/*! For license information please see app.2761a51fa584768fb720.js.LICENSE.txt */
(()=>{var __webpack_modules__={89981:(e,t,n)=>{"use strict";var i=n(49721),r=n(15861),a=n(70885),s=n(87757),o=n.n(s),c=n(52308),l=n.n(c),u=n(96486),d=n.n(u),p=n(177),f=n.n(p),h=n(1650),m=n(20294),g=n(98348),v=n(44442),b=n(60989),y=n(93443),w=n(56609),_=n(87122),k=n(97137);const P=JSON.parse('{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":false},"children":[{"type":"vertical","params":{"width":"50%","height":"50%"},"children":[{"type":"single","params":{"width":"200px","fixed":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":0},"children":[{"type":"tab","params":{"ext":"filetree","active":true,"title":"Filetree"}}]}]},{"type":"horizontal","params":{"width":"50%","height":"50%"},"children":[{"type":"vertical","params":{"width":"50%","height":"50%"},"children":[{"type":"single","params":{"width":"30%","height":"50%","focus":true,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":0},"children":[]}]},{"type":"vertical","params":{"width":"60%","height":"50%"},"children":[{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]},{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}]}'),Z=JSON.parse('{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":false},"children":[{"type":"vertical","params":{"width":"50%","height":"50%"},"children":[{"type":"single","params":{"width":"200px","fixed":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":0},"children":[{"type":"tab","params":{"ext":"filetree","active":true,"title":"Filetree"}}]}]},{"type":"vertical","params":{"width":"50%","height":"50%"},"children":[{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":0},"children":[]}]},{"type":"single","params":{"width":"50%","height":"50%","focus":true,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}]}'),x=JSON.parse('{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":false},"children":[{"type":"vertical","params":{"width":"50%","height":"50%"},"children":[{"type":"single","params":{"width":"200px","fixed":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":0},"children":[{"type":"tab","params":{"ext":"filetree","active":true,"title":"Filetree"}}]}]},{"type":"horizontal","params":{"width":"50%","height":"50%"},"children":[{"type":"single","params":{"width":"50%","height":"50%","focus":true,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":0},"children":[]}]},{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}]}'),C=JSON.parse('{"type":"single","params":{"canFocus":false},"children":[{"type":"vertical","children":[{"type":"single","params":{"width":"200px","fixed":true},"children":[{"type":"tabs","children":[{"type":"tab","params":{"active":false,"title":"Filetree","ext":"filetree"}}]}]},{"type":"single","params":{"focus":true,"width":"50%"},"children":[{"type":"tabs","children":[{"type":"tab","params":{"filename":{"names":["readme.md","readme.markdown"],"caseSensitive":false},"active":true,"ext":"tree","view":"preview"}}]}]}]}]}'),S=JSON.parse('{"type":"single","params":{"canFocus":false},"children":[{"type":"vertical","children":[{"type":"single","params":{"width":"200px","fixed":true},"children":[{"type":"tabs","children":[{"type":"tab","params":{"active":false,"title":"Filetree","ext":"filetree"}}]}]},{"type":"single","params":{"focus":true,"width":"50%"},"children":[{"type":"tabs","children":[]}]}]}]}');n(47403);var E={v:"vertical",s:"single",h:"horizontal",t1:"tabs",t2:"tab"};function I(e,t,n){n=n||[],d().isUndefined(e)||!1!==t.call(null,e,n)&&d().forEach(e.children,(function(e,i){I(e,t,n.concat([i]))}))}function T(e){return d().isUndefined(e)?"single":E[e]}function j(e){var t={type:"single",params:{canFocus:!1},children:[]};return t.children.push({type:T(e.t),children:[]}),d().forOwn(e,(function(e,n){if(!(n.indexOf("c")<0)){var i=n.substring(1).split(".");d().reduce(i,(function(t,n,r){var a,s;return d().isUndefined(t.children)&&(t.children=[]),d().isUndefined(t.children[n])&&(t.children[n]={}),i.length-1===r&&(t.children[n]=(a=e,s={params:{}},d().forEach(a,(function(e){d().includes(Object.keys(E),e)?s.type=T(e):d().isNaN(+e)?e.match(/^[hw]\d/)?d().merge(s.params,function(e){var t={};e.lastIndexOf("f")===e.length-1&&(t.fixed=!0,e=e.substring(0,e.length-1));var n=e.substring(0,1),i="";return"w"===n?i="width":"h"===n&&(i="height"),t[i]=e.substring(1),t}(e)):0===e.indexOf("//")?d().merge(s.params,function(e){var t=e.split("//");return{ext:t[1],filename:t[2],view:t[3]}}(e)):"f"===e&&(s.params.focus=!0):s.params.activeTabIndex=+e})),s)),t.children[n]}),t.children[0])}})),t}const A={showcase:P,column2:Z,row2:x,default:C,defaultWorkingCopy:S,toUrl:function(e){var t={};return I(e.children[0],(function(e,n){if(d().isEmpty(n))(function(e){return e.type&&d().includes(["horizontal","vertical"],e.type)})(e)&&(t.t=e.type.substring(0,1));else{var i,r,a="c"+n.join("."),s=d().merge({type:e.type},e.params);t[a]=(i=s,r=[],d().forOwn(i,(function(e,t){switch(t){case"type":r.push(d().findKey(E,(function(t){return t===e})));break;case"activeTabIndex":e>0&&r.push(e);break;case"width":case"height":var n=t.substring(0,1)+e;n+=i.fixed?"f":"",r.push(n);break;case"filename":var a="//"+(i.ext||"tree");d().isUndefined(e)||(a+="//"+e,d().isString(i.view)&&(a=a+"//"+i.view)),r.push(a);break;case"focus":e&&r.push("f")}})),r)}})),l().param(t)},parseQuery:function(e){if(d().isString(e)){var t=l().deparam(e);if(!d().isUndefined(t.t))return j(t)}}};const O=n(20184).ZP;var D=n(15094),N=n(68058),M=n(95611),F=n(56386),R=n(58471),L=n(59050),U=n(23318),B=(n(59999),n(87167)),q=n(2774),H=n(2774).rc,W=y.Z.create(n(10270)),z=function(e){this.id=d().uniqueId(),this.children=[],e=d().defaults(e||{},{width:"100%",height:"100%",fixed:!1,collapsed:0}),this.template=null,this.appended=!1,this.panel=e.panel,this.width=e.width,this.height=e.height,this.fixed=e.fixed,this.collapsed=e.collapsed,this.oldWidth=e.oldWidth},G=z.prototype;function V(e,t,n){if(e._latestDeepFocus)return e._latestDeepFocus;switch(e.type){case"single":return e;case"vertical":return V(e[t],t,n);case"horizontal":return V(e[n],t,n);default:return null}}Object.defineProperty(G,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(W.panelChangeSize({panel:this,orientation:"width",new:e,old:this._width}),this._width=e)}}),Object.defineProperty(G,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(W.panelChangeSize({panel:this,orientation:"height",new:e,old:this._height}),this._height=e)}}),G.collapse=function(e){if(!this.collapsed&&this.container){this.oldWidth=this.container.width();var t=H+"px";this.container.css("width",t),this.container.addClass("panel-collapsed");var n=this.container.find(".panel-expand");return n.show(),n.addClass("panel-expand-"+e),this.width=t,this.collapsed=e,!0}return!1},G.expand=function(){if(this.collapsed&&this.container){var e=this.oldWidth+"px";this.container.css("width",e),this.container.removeClass("panel-collapsed");var t=this.container.find(".panel-expand");return t.hide(),t.removeClass("panel-expand-"+this.collapsed),this.width=e,this.collapsed=0,!0}return!1},G.addChild=function(e){e.panel=this,this.children.push(e)},G.addChildren=function(e){d().forEach(e,d().bind(this.addChild,this))},G.render=function(e){var t=this;if(this.appended)return this.template.show();e&&(t.container=e),d().forEach(this.children,(function(e){e.render(t.template)})),t.container.append(t.template),this.appended=!0,this.collapsed&&(t.container.addClass("panel-collapsed"),t.container.find(".panel-expand").show(),t.container.find(".panel-expand").addClass("panel-expand-"+this.collapsed))},G.isOpen=function(e,t){return d()(this.children).map((function(n){return n.isOpen(e,t)})).compact().first()},G.getAllOpened=function(e,t){return d()(this.children).map((function(n){return n.isOpen(e,t)})).compact().value()},G.closeAllTabs=function(e){d().each(this.children,(function(t){d().isFunction(t.closeAllTabs)&&t.closeAllTabs(e),d().isFunction(t._closeTabs)&&t._closeTabs(e)})),d().isFunction(this._closeTabs)&&this._closeTabs(e)},G.showHelpBlock=function(){d().each(this.children,(function(e){d().isFunction(e.showHelpBlock)&&e.showHelpBlock()}))},G.hideHelpBlock=function(){d().each(this.children,(function(e){d().isFunction(e.hideHelpBlock)&&e.hideHelpBlock()}))},G.detach=function(){this.template.detach(),this.appended=!1},G.remove=function(){this.template.remove(),this.appended=!1;var e=d().invokeMap(this.children,"remove");return Promise.all(d().flattenDeep(e))},G.serialize=function(){var e=d().map(this.children,(function(e){return e.serialize()}));return{type:this.type,params:{width:this.width,height:this.height,fixed:this.fixed,collapsed:this.collapsed,oldWidth:this.oldWidth},children:e}},G._setFocus=function(e){this._latestDeepFocus=e,this.panel&&"function"==typeof this.panel._setFocus&&this.panel._setFocus(e)},G.searchNeighborhood=function(e){return function(e,t){var n=e.panel;if(n){if(-1!==["Left","Right"].indexOf(t)){if("vertical"===n.type){if("Right"===t&&e!==n.right)return V(n.right,"left","top");if("Left"===t&&e!==n.left)return V(n.left,"right","top")}}else if("horizontal"===n.type){if("Up"===t&&e!==n.top)return V(n.top,"left","bottom");if("Down"===t&&e!==n.bottom)return V(n.bottom,"left","top")}if("function"==typeof n.searchNeighborhood)return n.searchNeighborhood(t)}return null}(this,e)};const K=z;var Y=f().compile('<div class="panel-container">\n    <div class="panel-expand">\n        <button type="button" class="panel-expand-menu" aria-label="Expand Guides pane"></button>\n    </div>\n    <div class="panel-editor"></div>\n</div>\n'),J=y.Z.create(n(10270)),Q=function e(t){e._sc.constructor.call(this,t),t=d().defaults(t||{},{width:"50%",height:"50%",canFocus:!0,focus:!1,collapsed:0}),this.id=d().uniqueId(),this.children=[],this.canFocus=t.canFocus,this.hasFocus=t.focus,this.type=q.V5.SINGLE,this.template=l()(Y()),this.width=t.width,this.height=t.height,this.collapsed=t.collapsed,this.oldWidth=t.oldWidth,this._registerEvents()};m.ZP.inherit(Q,K);var X=Q.prototype;X._registerEvents=function(){var e=this;this._registerTemplateEvents(),this._eventSizeChange=y.Z.subscribe("panel:size:change",this._updateEditor.bind(this)),this._focusHandler=this.focus.bind(this),this._expandFocusHandler=y.Z.on(this.template.find(".panel-expand"),"click",(function(){return J.expandPanel({id:e.id})}))},X._unregisterEvents=function(){y.Z.unsubscribe(this._eventSizeChange),this._disposableEditorFocusHandler&&(this._disposableEditorFocusHandler.dispose(),this._disposableEditorFocusHandler=null),this.canFocus&&y.Z.off(this.template,"click",this._focusHandler),y.Z.off(this.template.find(".panel-expand"),"click",this._expandFocusHandler)},X._registerTemplateEvents=function(){this.canFocus&&y.Z.on(this.template,"click",this._focusHandler)},X._updateEditor=function(){this._editor&&this._editor.layout()},Object.defineProperty(X,"tabs",{get:function(){return this.children[0]}}),X.focus=function(){if(this.canFocus&&(this.panel&&this.panel._setFocus(this),!this.template.hasClass("focus"))){l()(".ide").find(".panel-container").removeClass("focus"),this.template.addClass("focus");var e=this,t=function(){e.tabs.focus(),e.hasFocus=!0,J.panelChangeFocus(e)};navigator.userAgent.match(/msie/i)?d().delay(t,200):t()}},X.addTab=function(e,t){e.panel=this,this.tabs.addTab(e,t)},X.detachTab=function(e){return this.tabs.detachTab(e)},X.closeTab=function(e){return this.tabs.closeTab(e)},X.activateTab=function(e,t){this.children[0].activateTab(e,t),this._updateEditor()},X.open=function(e,t,n){n=n||{};var i=this.isOpen(t,e);return d().isUndefined(i)?(i=this.tabs.open(e,t,n),!n.noFocus&&this.focus()):(i.setOptions(n),this.activateTab(i,n.view),!n.noFocus&&this.focus()),i},X.getTab=function(e){return this.tabs.getTab(e)},X.getTabs=function(e){return d().filter(this.tabs.children,(function(t){return t.extensionName!==e}))},X._closeTabs=function(e){if(this.canFocus){var t=this,n=d().clone(this.tabs.children);d().each(n,(function(n){n&&!d().includes(e,n.extensionName)&&t.closeTab(n).catch(m.ZP.error.checkErrorForIgnore)}))}},X.moveTab=function(e,t){return this.tabs.moveTab(e,t)},X.activeTab=function(){return this.tabs._activeTab},X.remove=(0,r.Z)(o().mark((function e(){var t=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._unregisterEvents(),e.next=3,Q._sc.remove.apply(this,t);case 3:return this._editor&&this._editor.close(),e.next=6,m.ZP.promise.delay(10);case 6:this._editor=null;case 7:case"end":return e.stop()}}),e,this)}))),X.render=function(e){var t=this;this.appended&&this.template.detach(),e&&(t.container=e),d().forEach(this.children,(function(e){e.render(t.template)})),t.container.append(t.template),t._registerTemplateEvents(),t._updateEditor(),this.appended=!0,this.collapsed&&(t.container.addClass("panel-collapsed"),t.container.find(".panel-expand").show(),t.container.find(".panel-expand").addClass("panel-expand-"+this.collapsed))},X.editor=function(){return this._editor||(this._editor=new B.ZP(this.template.find(".panel-editor")[0]),this._disposableEditorFocusHandler=this._editor.onDidFocus(this._focusHandler)),this._editor},X.detach=function(){this.template.detach(),this.appended=!1},X.serialize=function(){var e=d().map(this.children,(function(e){return e.serialize()}));return{type:this.type,params:{width:this.width,height:this.height,focus:this.hasFocus,canFocus:this.canFocus,fixed:this.fixed,collapsed:this.collapsed,oldWidth:this.oldWidth},children:e}};const $=Q;var ee=n(6836).n,te=n(2774).V5,ne=n(2774).rc,ie=n(2774).y4,re=y.Z.create(n(10270)),ae=f().compile('<div class="vertical-panel-container split-panel-container">\n  <div class="left"></div>\n  <div\n    class="divider"\n    role="separator"\n    tabindex="0"\n    aria-label="Move panel divider"\n  ></div>\n  <div class="right"></div>\n</div>\n'),se=function e(t){e._sc.constructor.call(this,t),this.type=te.VERTICAL,this.template=l()(ae());var n=(0,m.xD)(4);this.template.find(".left").attr("id",n),this.template.find(".divider").attr("aria-controls",n),this._registerEvents()};(0,m.ED)(se,K);var oe=se.prototype;oe._unregisterEvents=function(){y.Z.unsubscribe(this._eventPanelExpand),y.Z.unsubscribe(this._eventPanelCollapse)},oe._registerEvents=function(){var e=this;this._eventPanelExpand=y.Z.subscribe("panel:expand:#id",(function(t){e.left.id===t.id&&e.expandLeft(),e.right.id===t.id&&e.expandRight()})),this._eventPanelCollapse=y.Z.subscribe("panel:collapse:#id",(function(t){e.left.id===t.id&&e.collapseLeft(),e.right.id===t.id&&e.collapseRight()}))},Object.defineProperty(oe,"left",{get:function(){return this.children[0]}}),Object.defineProperty(oe,"right",{get:function(){return this.children[1]}}),oe.expandRight=function(){this._expand(this.right,this.left,this.template.children(".left"))},oe.expandLeft=function(){this._expand(this.left,this.right,this.template.children(".right"))},oe._expand=function(e,t,n){e.expand();var i=this.template.width()-e.oldWidth-ie+"px";n.css("width",i),t.width=i,e.container.find(".tabs-container").show(),re.panelResizeEnd()},oe._collapse=function(e,t,n,i,r){var a=n.width()-ne+i.width()+"px";e.collapse(r),t.expand(),i.css("width",a),t.width=a,n.find(".tabs-container").hide(),n.find(".panel-expand-menu").focus(),re.panelResizeEnd()},oe.collapseRight=function(){this._collapse(this.right,this.left,this.template.children(".right"),this.template.children(".left"),"right")},oe.collapseLeft=function(){this._collapse(this.left,this.right,this.template.children(".left"),this.template.children(".right"),"left")},oe.remove=function(){return this._unregisterEvents(),se._sc.remove.apply(this,arguments)},oe.render=function(e){var t=this;ee(t,"width"),d().forEach(["left","right"],(function(e){var n=t.template.children("."+e);n.css("width",t[e].width),t[e].fixed&&n.addClass("flex-fixed"),t[e].render(n)})),e.append(t.template)},oe.focus=function(){this.right.focus()};const ce=se;var le=n(6836).n,ue=n(2774).V5,de=f().compile('<div class="horizontal-panel-container split-panel-container">\n  <div class="top"></div>\n  <div\n    class="divider"\n    role="separator"\n    tabindex="0"\n    aria-label="Move panel divider"\n  ></div>\n  <div class="bottom"></div>\n</div>\n'),pe=function e(t){e._sc.constructor.call(this,t),this.type=ue.HORIZONTAL,this.template=l()(de());var n=(0,m.xD)(4);this.template.find(".top").attr("id",n),this.template.find(".divider").attr("aria-controls",n)};(0,m.ED)(pe,K);var fe=pe.prototype;Object.defineProperty(fe,"top",{get:function(){return this.children[0]}}),Object.defineProperty(fe,"bottom",{get:function(){return this.children[1]}}),fe.render=function(e){var t=this;le(t,"height"),d().forEach(["top","bottom"],(function(e){var n=t.template.children("."+e);t[e].render(n),n.css("height",t[e].height),t[e].fixed&&n.addClass("flex-fixed")})),e.append(t.template)},fe.focus=function(){this.bottom.focus()};const he=pe;var me=n(20294).ET,ge=n(2774).V5,ve=y.Z.create(n(10270)),be=f().compile('<div class="tab-container editor-size-mark"></div>\n'),ye=function(e){var t=this;e=d().clone(e),e=d().defaults(e||{},{active:!1}),this._fullscreen=!1,this.filename=e.filename,this.title=this._generateTitle(this.filename,e.ext,e.title),this.active=e.active,this.activated=!1,this.panel=e.panel,e.options=e.options||{},this.options=e.options;var n=this.template=l()(be());this.template.addClass(e.ext),this.extensionName=e.ext,!e.view&&m.ZP.markdown.isReadme(this.filename)?this.viewType="preview":this.viewType=e.view;var r=this.filename;this.syncing=0,this._subscriptions=[],this.dragging=!1;var a=this;e.options.tab=this;var s=i.Z.getByUrl(e.ext);if(void 0===s)this.ready=Promise.reject(new Error("No extension")),this.extension=Promise.reject(new Error("No extension"));else{var o=s.info.name;this.ready=new Promise((function(s,c){t.extension=i.Z.create(o,n,r,t.viewType,e.ext,e.options).then((function(e){if(d().isUndefined(e))throw new Error("Extension was not created");return a.closing&&a.active||s(),e})).catch((function(e){return c(e)}))}))}this._subscribe()},we=ye.prototype;function _e(e){var t=e.panel;if(t){var n=t.hasFocus?"focus":"unfocus";return e._callExtensionSync(n)}}we.setOptions=function(e){return this._callExtensionSync("setOptions",e)},we._subscribe=function(){var e=this._subscriptions.push.bind(this._subscriptions);e(y.Z.subscribe("filetree:file:drop",this._fileDrop.bind(this))),e(y.Z.subscribe("panel:focus:change",_e.bind(null,this))),e(y.Z.subscribe("dialog:close",_e.bind(null,this))),e(y.Z.subscribe("tab:activated",_e.bind(null,this))),e(y.Z.subscribe("tab:focus",_e.bind(null,this)))},we._fileDrop=function(e,t){var n=this;if(this.template&&this.template.is(t.tab)){var i=null,r=this.panel&&this.panel.editor();if(this.activated&&r)i=r.getPosition(),r.getLineCount()===t.line&&(i={lineNumber:t.line+1,column:1});t.position=i,this._callExtension("fileDrop",t).then((function(e){!e&&i&&n.activated&&r.replaceRange(t.path+"\n",i,i)}))}},we._unsubscribe=function(){var e=this;d().forEach(this._subscriptions,(function(t){t=e._subscriptions.pop(),y.Z.unsubscribe(t)}))},we._generateTitle=function(e,t,n){if(d().isString(n))return n;if(d().isObject(n)&&d().has(n,e))return n[e];d().isUndefined(e)&&(e="");var i=me.parse(e).name;return"tree"===t?i:d().template("<%= file %> (<%= ext %>)")({file:i,ext:t})},we._callExtension=function(e,t){var n=this;return this.extension.then((function(i){if(i&&d().isFunction(i[e])){var r=n.panel&&n.panel.editor();return i[e].call(i,r,n,t)}}))},we._callExtensionSync=function(e,t){var n=this;return this.extension.then((function(i){if(i&&d().isFunction(i[e])){var r=n.panel&&n.panel.editor();return i[e].call(i,r,n,t)}}))},we._callExtensionSyncClose=function(e,t){var n=this;return this.extension.then((function(i){if(i&&"function"===l().type(i[e])){var r=n.panel&&n.panel.editor(),a=i[e].call(i,r,n,t);return a||Promise.resolve()}}))},we.switchType=function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return this.viewType=t,e.abrupt("return",this._callExtensionSync("switchType",t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),we.switchToNextType=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._callExtensionSync("switchToNextType"));case 1:case"end":return e.stop()}}),e,this)}))),we.render=function(e){var t=this,n=l()('<div class="blocker-container" />');e.find(".blocker-container").remove(),e.append(n),n.showFProgress(null,0);var i=(new Date).getTime();return this._callExtension("activate").then((function(){var e=(new Date).getTime()-i<1e3;return n.completeFProgress(e)})).then((function(){if(!t.closing&&t.active){e.find(".blocker-container").remove(),e.find(".tab-container").detach(),e.append(t.template);var n=t.panel&&t.panel.editor();return n&&t.editorViewState&&d().defer((function(){n.restoreViewState(t.editorViewState),t.editorViewState=null})),t._callExtensionSync("afterActivate")}})).catch((function(e){e&&e.close&&t.panel.closeTab(t).catch(m.ZP.error.checkErrorForIgnore)}))},we.setTitle=function(e){this.title=e,this.panel&&(this.panel.tabs.tabbar.render(),this.panel.tabs.tabbar.activate(this.panel.tabs._activeTabIndex))},we.rename=function(e){var t,n=this.panel&&this.panel.editor();this.activated&&n&&n.isVisible()&&(t=n.saveViewState()),this.filename=e,this.title=this._generateTitle(e,this.extensionName),this._unsubscribe(),this._subscribe(),this._callExtension("rename",e).then((function(){return n&&t&&n.restoreViewState(t)}))},we.detach=function(){this.deactivate(),this.panel=null},we.activate=function(e){if(this.activated)return Promise.resolve();this.active=!0;var t=this;return this.render(e).then((function(){if(!t.closing&&t.active)return t.activated=!0,ve.tabActivated({extension:t.extensionName},t),t.getFileName()}))},we.deactivate=function(){var e=this.panel&&this.panel.editor();if(this.active&&e&&e.isVisible()&&(this.editorViewState=e.saveViewState()),this.active=!1,!this.activated)return Promise.resolve();var t=this;return this.fullscreen=!1,this._callExtension("beforeDeactivate").finally((function(){return t.activated=!1,t._callExtension("deactivate")})).finally((function(){t.template.detach()}))},we.dragstart=function(){this.dragging=!0},we.dragend=function(){this.dragging=!1},we.serialize=function(){var e=this.extensionName,t=i.Z.getByUrl(e);if(t){var n=t.info;if(d().has(n,"codio")&&d().has(n.codio,"noStateSave")&&!0===n.codio.noStateSave)return}return{type:ge.TAB,params:{filename:this.filename,ext:e,active:this.activated,title:this.title,view:this.viewType}}},Object.defineProperty(we,"dirty",{get:function(){return i.Z.currentProject?this.getShareFile().then((function(e){return!(!e||!e.save)&&e.save.dirty})):Promise.resolve(!1)}}),Object.defineProperty(we,"fullscreen",{get:function(){return this._fullscreen},set:function(e){var t=i.Z.getByUrl(this.extensionName);t&&!0===t.info.codio.noFullscreen?this._fullscreen=!1:(e=!!e,this._fullscreen!==e&&(this._fullscreen=e,function(e,t){var n=t?"addClass":"removeClass";e.template[n]("fullscreen"),e.panel._updateEditor(),e.extension.then((function(e){t?ve.enterFullscreen(e):ve.leaveFullscreen(e)}))}(this,e)))}}),we.focus=function(){return this._callExtensionSync("focus")},we.getFileName=function(){return this.filename?Promise.resolve(this.filename):this.extension.then((function(e){if(e&&d().isFunction(e.getFile))return e.getFile()}))},we.getShareFile=function(){return this.getFileName().then((function(e){return i.Z.currentProject.getShareFile(e)}))},we.close=function(e,t){var n=this;return this._unsubscribe(),this._callExtensionSyncClose("close",t).then((function(t){return e&&e.find(".blocker-container").remove(),n.template.remove(),ve.tabClosed(),t}))},we.beforeClose=function(){if(i.Z.currentProject.protectLayout){var e=new Error("Layout is protected. Close tab is not allowed");throw e.ignore=!0,e}return this._callExtension("beforeClose")},y.Z.subscribe("command:ide:fullscreen",(function(){var e=i.Z.ide;if(e.panels.focus){var t=e.panels.focus.activeTab();t&&(t.fullscreen=!t.fullscreen)}}));const ke=ye,Pe=JSON.parse('[{"title":"Preview static","command":"preview:tab-file","ext":["tree"]},{"title":"Code Playback","noDefaults":true,"command":"file:open","params":{"ext":"change-player"},"context":{"project":["OWNER","ADMIN"]},"ext":["tree"]},{"separator":"true","ext":["tree"],"isfile":true},{"title":"Close File","command":"ide:tab_close","isfile":true},{"title":"Close Other Files","command":"ide:tab_close_others","isfile":true},{"title":"Close All Files","command":"ide:tab_close_all","isfile":true},{"separator":true,"isfile":true},{"title":"Close Files to the Right","command":"ide:tab_close_right","isfile":true},{"title":"Close Files to the Left","command":"ide:tab_close_left","isfile":true}]');var Ze=n(44442).A,xe=i.Z.get("codio-right-menu"),Ce=n(10947).q;function Se(e,t){var n,r,a=this,s={onBeforeShow:function(e){r=null;var a=l()(e.target).closest(".tab");if(0===a.length)return!1;r=t.getTab(a);var s=function(e,t){return d().filter(e,(function(e){return(!i.Z.currentProject.protectLayout||!e.isfile)&&(!d().isArray(e.ext)||-1!==d().indexOf(e.ext,t))}))}(Pe,r.extensionName);n.setItems(s)},onSelect:function(e){var n=this.getNode(e);if(n.command&&r){var i=n.command.split(":"),a=i.shift(),s=i.join(":");d().defer((function(){var e=d().extendWith({filename:r.filename,tabbar:t,tab:r},n.params||{});Ze.execute(a,s,e)}))}}};this.state=xe&&xe().then((function(t){(n=a.rightMenu=new t(e,null,null,s)).setItems(Pe)}))}Se.prototype.remove=function(){var e=this;this.state&&this.state.then((function(){e.rightMenu&&e.rightMenu.remove()}))},y.Z.subscribe("tab:right-menu:update:#id",(function(e,t){var n=e.id,i=Ce(Pe,n);i&&d().forOwn(t,(function(e,t){i[t]=e}))}));const Ee=Se;n(9781),n(62102);var Ie=y.Z.create(n(10270)),Te=f().compile('<div class="tabbar">\n  {{#each tabs}}\n    <div data-id="{{@index}}" class="tab {{#if activated}}active{{/if}}" draggable="true">\n      <div class="dirty {{lookup ../dirty @index}}">*</div>\n      <div class="title">\n        <a tabindex="0" href="javascript:void(0)" title="{{title}}" aria-label="{{title}} tab" draggable="false">{{title}}</a>\n      </div>\n      {{#if ../showClose}}\n      <div class="close-tab">\n        <button type="button" class="close-button" title="Close {{title}} tab" aria-label="Close {{title}} tab">\n          <span class="close-button-icon">×</span>\n        </button>\n      </div>\n      {{/if}}\n    </div>\n  {{/each}}\n\n</div>\n'),je=function(e,t){this.container=e,this.tabs=t,this.template=Te,this.fragment=null,this.rightMenu=null,this.eventHandles=[],this.showClose=!i.Z.currentProject.protectLayoutValue,this.attached=!1,function(e){var t=d().bind(e.eventHandles.push,e.eventHandles);function n(n,i){t(y.Z.subscribe(n,(function(t,n){var r=n?n.arg:null,a=r&&r.tabbar,s=r&&r.tabbar===e?e:null;a||s||!e.tabs.panel.hasFocus||(s=e);var o=r?r.tab:null;s&&!o&&(o=s.tabs.panel.activeTab()),s&&o&&i(t,s,o)})))}n("command:ide:tab_close",(function(e,t,n){t.tabs.closeTab(n).catch(m.ZP.error.checkErrorForIgnore)})),n("command:ide:tab_close_others",(function(e,t,n){t.tabs.closeOthersTabs(n).catch(m.ZP.error.checkErrorForIgnore)})),n("command:ide:tab_close_all",(function(e,t){t.tabs.closeAll().catch(m.ZP.error.checkErrorForIgnore)})),n("command:ide:tab_close_right",(function(e,t,n){t.tabs.closeRightTabs(n).catch(m.ZP.error.checkErrorForIgnore)})),n("command:ide:tab_close_left",(function(e,t,n){t.tabs.closeLeftTabs(n).catch(m.ZP.error.checkErrorForIgnore)})),n("command:ide:tab_switch_right",(function(e,t,n){t.tabs.switchToNextTab(n,!0)})),n("command:ide:tab_switch_left",(function(e,t,n){t.tabs.switchToNextTab(n)})),t(y.Z.subscribe("shareman:dirty",(function(t,n){e.updateDirty(d().last(t.split(":")),n.dirty)})))}(this),this.updateEvId=y.Z.subscribe("settings:changed:#mode",this.onUpdateDirtySettings.bind(this))},Ae=je.prototype,Oe=!1;Ae.onUpdateDirtySettings=function(){var e=v.Z.get("ide").highlight_unsaved_tabs;this.fragment&&(e?this.fragment.removeClass("no-dirty"):this.fragment.addClass("no-dirty"))},Ae.getTab=function(e){var t=l()(e).data("id");return this.tabs.children[t]},Ae._bindEvents=function(e){var t=this,n=function(){var e=l()(this);if(!e.hasClass("active")){var n=e.data("id");Ie.activate({id:t.tabs.panel.id},n)}},r=function(e){e.preventDefault()},a=".tab",s=".close-tab .close-button";l().Velocity.State.isMobile?(y.Z.on(e,"touchmove",a,r),y.Z.on(e,"touchmove",s,r),y.Z.on(e,"touchend",a,n),y.Z.on(e,"touchend",s,n)):(y.Z.on(e,"click",a,n),y.Z.on(e,"click",s,(function(e){e.preventDefault();var n=l()(this).closest(".tab").data("id");return Ie.close({id:t.tabs.panel.id},n),!1}))),y.Z.on(e,"dragstart",".tab",(function(e){var n=t.getTab(this),r=l()(this).data("id");i.Z.ide.panels.dragSrc={tab:n,id:r,tabEl:l()(this),panel:t.tabs.panel},e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",""),Oe=!0})),y.Z.on(e,"dragover",(function(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="move",!1})),y.Z.on(e,"dragover",".tab",(function(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="move",!1})),e.find(".tab").dndhover().on({dndHoverStart:function(e){if(Oe)return e.stopPropagation(),l()(this).addClass("dragover"),!1},dndHoverEnd:function(e){if(Oe)return e.stopPropagation(),l()(this).removeClass("dragover"),!1}}),e.dndhover().on({dndHoverStart:function(){Oe&&l()(this).addClass("default-dragover")},dndHoverEnd:function(){Oe&&l()(this).removeClass("default-dragover")}});var o=function(){Oe&&(e.removeClass("default-dragover"),i.Z.ide.panels.dragSrc.tabEl.removeClass("dragover"),i.Z.ide.panels.dragSrc.tab.dragend(),Oe=!1)};y.Z.on(e,"drop",".tab",(function(e){if(Oe){e.stopPropagation&&e.stopPropagation();var n=l()(this).data("id"),r=i.Z.ide.panels.dragSrc;return r&&(i.Z.ide.panels.moveTab(r.panel,t.tabs.panel,r.id,n),o()),!1}})),y.Z.on(e,"drop",(function(e){if(Oe){e.stopPropagation&&e.stopPropagation();var n=i.Z.ide.panels.dragSrc;return n&&(i.Z.ide.panels.moveTab(n.panel,t.tabs.panel,n.id),o()),!1}})),y.Z.on(e,"dragend",".tab",(function(){o()}))},Ae.find=function(e){if(this.fragment)return this.fragment.find('[data-id="'+e+'"]')},Ae.updateDirty=function(e,t){var n=this.fragment&&this.fragment.is(":visible"),i=this.tabs.findAllTabs(e);if(n&&i){var r=d().findIndex(this.tabs.children,i);!function(e,t){var n=e.find("div.dirty");t?n.addClass("show"):n.removeClass("show")}(this.find(r),t)}},Ae.render=function(){var e=this;return Promise.all(d().map(this.tabs.children,(function(e){return e.dirty.then((function(e){return e?"show":""}))}))).then((function(t){var n=e.fragment;if(e.fragment=l()(e.template({tabs:e.tabs.children,dirty:t,showClose:e.showClose})),e.rightMenu&&e.rightMenu.remove(),e.rightMenu=new Ee(e.fragment,e),e._bindEvents(e.fragment),!e.attached)return e.container.append(e.fragment),void(e.attached=!0);n.replaceWith(e.fragment),e.onUpdateDirtySettings(),Ie.tabbarRendered()}))},Ae.activate=function(e){this.fragment&&(this.fragment.find("div.tab").removeClass("active"),this.find(e).addClass("active"))},Ae.remove=function(){this.rightMenu&&this.rightMenu.remove(),this.rightMenu=null,d().forEach(this.eventHandles,(function(e){y.Z.unsubscribe(e)})),this.updateEvId&&y.Z.unsubscribe(this.updateEvId),this.eventHandles.length=0},l().event.props.push("dataTransfer");const De=je;var Ne=n(85886),Me=n(44442).A,Fe=n(2774).V5,Re=f().compile('<div class="tab-container help-tab">\n    <div>\n        <h1>Need help getting started?</h1>\n        <ul>\n            <li id="empty-help-play-guides"><a class="a--darkBg" href="javascript:void(0)" data-command="guides:pre_play">Play Guides</a></li>\n            <li id="empty-help-edit-guides"><a class="a--darkBg" href="javascript:void(0)" data-command="guides:pre_edit">Create or Edit Guides</a></li>\n            <li>\n                Click on a file in the file tree to open it or <a class="a--darkBg" href="javascript:void(0)" data-command="ide:new_file">create a file</a>\n            </li>\n        </ul>\n    </div>\n</div>\n'),Le=f().compile('<div class="tabs-container"></div>\n'),Ue=!1,Be=[{title:"Save",class:"mb-yes",onClick:function(){this.close(R.Z.IDYES)},type:1},{title:"Close",class:"mb-no",onClick:function(){this.close(R.Z.IDNO)}},{title:"Cancel",class:"mb-cancel",onClick:function(){this.close(R.Z.IDCANCEL)}}],qe="CLOSE_RIGHT",He="CLOSE_LEFT",We="CLOSE_OTHERS",ze=function(e){d().bindAll(this,["_storeActiveTab","_activateTab","_registerCommands","activate","deactivate","findTab","findAllTabs","isOpen","isChild","getTab","activateTab","detachTab","renameTabByPath","closeTabByPath","closeTabByExt","_showPrompt","_promptCloseHandler","_closeTab","closeTab","closeAll","closeOthersTabs","closeLeftTabs","closeRightTabs","switchToNextTab","switchToNextViewType","open","render","showHelpBlock","hideHelpBlock","addTab","addChildren","moveTab","remove","focus","serialize"]),this.children=[],this.activeTabSequence=0,e=d().defaults(e||{},{active:!1,activeTabIndex:0}),this._activeTabIndex=e.activeTabIndex,this.active=e.active,this._panel=e.panel,this.template=l()(Le());var t={terminal:Me.getCurrentKey("terminal:backend-connection"),fileOpen:Me.getCurrentKey("ide:key_quick_open")};this.helpTab=l()(Re(t)),Ue&&this.helpTab.addClass("hide"),this.tabbar=new De(this.template,this),this.eventHandles=[],this.registeredCommands=!1,this._opening=[],this._tabToActivate=null,this._viewToActivate=null},Ge=ze.prototype;function Ve(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d().isUndefined(t)){e.next=2;break}return e.abrupt("return",t.deactivate());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e,t,n){var i={};return null===t||d().isUndefined(t)||(i={filename:t}),n&&(i.extensionName=n),d().find(e,i)}function Je(e,t){var n=d().findIndex(e,t);n>-1&&e.splice(n,1)}function Qe(e,t){return d().isObject(t)&&(t=Xe(e,t)),e.children[t]}function Xe(e,t){return d().findIndex(e.children,t)}function $e(e,t){var n=[],i=function(e,t){var n=[],i=(t=t||{}).type;if(i){var r=t.current,a=e.children,s=d().indexOf(a,r);switch(i){case qe:if(-1!==s)for(var o=0,c=s;o<=c;o++)n.push(a[o]);break;case He:if(-1!==s)for(var l=s,u=a.length;l<u;l++)n.push(a[l]);break;case We:r&&n.push(r)}}return n}(e,t),r=e.children;return d().forEach(r,(function(t){-1===d().indexOf(i,t)&&n.push(e.closeTab.bind(e,t))})),i.length=0,d().reduce(n,(function(e,t){return e.catch(m.ZP.error.checkErrorForIgnore).finally(t)}),Promise.resolve())}Object.defineProperty(Ge,"_activeTab",{get:function(){return this.children[this._activeTabIndex]}}),Ge._storeActiveTab=function(e){this.activeTabSequence++,e.sequence=this.activeTabSequence},Ge._activateTab=function(e,t){var n=this;if(e=e||n._tabToActivate,t=t||n._viewToActivate,e)return this.template.find(".help-tab").remove(),e.viewType!==t&&e.switchType(t),n._activeTabIndex=d().indexOf(n.children,e),n._storeActiveTab(e),e.activate(this.template).then((function(){Me.execute("layout","save"),n.tabbar.activate(n._activeTabIndex),n._tabToActivate=null,n._viewToActivate=null}))},Ge._registerCommands=function(){if(!this.registeredCommands){var e=this;e.panel.id;var t=d().bind(this.eventHandles.push,this.eventHandles);t(y.Z.subscribe("tab:activate:"+e.panel.id,(function(t,n){e.activateTab(n)}))),t(y.Z.subscribe("tab:close:"+e.panel.id,(function(t,n){e.closeTab(n).catch(m.ZP.error.checkErrorForIgnore)}))),t(y.Z.subscribe("tab:close_by_path:#path",(function(t,n){n=n||{},e.closeTabByPath(t.path,n.recursive,n.force)}))),t(y.Z.subscribe("tab:close_by_ext:#ext",(function(t,n){n=n||{},e.closeTabByExt(t.ext,n.force)}))),t(y.Z.subscribe("tab:rename:#oldName:#newName",(function(t,n){e.renameTabByPath(t.oldName,t.newName,n)}))),t(y.Z.subscribe("command:ide:switch_view_type",(function(){e.switchToNextViewType()}))),this.registeredCommands=!0}},Object.defineProperty(Ge,"hasTabs",{get:function(){return!d().isEmpty(this.children)}}),Object.defineProperty(Ge,"panel",{get:function(){return this._panel},set:function(e){this._panel=e,d().forEach(this.children,(function(t){t.panel=e}))}}),Ge.activate=function(){this.active||(this.active=!0)},Ge.deactivate=function(){this.active&&(this.active=!1)},Ge.findTab=function(e,t){return Ye(this.children,e,t)},Ge.findAllTabs=function(e){return".guides/metadata.md"===e?this.findTab(null,"guides-edit"):Ye(this.children,e)},Ge.isOpen=function(e,t){var n;return d().isEmpty(this._opening)||(n=Ye(this._opening,e,t)),d().isUndefined(n)&&(n=this.findTab(e,t)),n},Ge.isChild=function(e){return d().includes(this.children,e)||d().includes(this._opening,e)},Ge.getTab=function(e,t){var n=null;return d().isString(e)?n=this.findTab(e,t):d().isNumber(e)?n=this.children[e]:this.isChild(e)&&(n=e),n},Ge.activateTab=function(e,t){var n=this.getTab(e);n&&(this._tabToActivate=n,this._viewToActivate=t,this._activeTab&&this._activeTab!==n?Ve(this._activeTab).then(d().bind(this._activateTab,this)):this._activateTab(n,t))},Ge.detachTab=function(){var e=(0,r.Z)(o().mark((function e(t){var n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getTab(t)){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",Ve(n).finally((function(){var e=Xe(i,n),t=i._activeTabIndex,r=i.children[t],a=e===t?0:e<t?-1:1;i.children.splice(e,1);var s=!1;if(0===i.children.length)s=!0;else if(0===a){var o=d().max(i.children,(function(e){return e.sequence})),c=-1;o&&(c=d().indexOf(i.children,o)),-1!==c?i.activateTab(c):i.activateTab(0)}else i._activeTabIndex=d().indexOf(i.children,r);i.tabbar.render(),s&&i._renderHelpTab(),Me.execute("layout","save")})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Ge._renderHelpTab=function(){this.template.append(this.helpTab);var e=i.Z.currentProject;e.eduStartedAssignmentInfo?(this.helpTab.find("#empty-help-edit-guides").addClass("hide"),e.guides&&e.guides.metadata&&e.guides.metadata.sections&&e.guides.metadata.sections.length||this.helpTab.find("#empty-help-play-guides").addClass("hide")):e.exists(Ne.q9)?this.helpTab.find("#empty-help-play-guides").removeClass("hide"):this.helpTab.find("#empty-help-play-guides").addClass("hide")},Ge.renameTabByPath=function(e,t,n){!n&&(n={});var r=n.recursive,a=n.saveLayout,s=[];if(d().forEach(this.children,(function(n){var i=n.filename;if(i)if(i===e)n.rename&&s.push(n.rename.bind(n,t));else if(r&&0===i.indexOf(e+"/")){var a=i.replace(e,t);n.rename&&s.push(n.rename.bind(n,a))}})),!d().isEmpty(s)&&(d().each(s,(function(e){e()})),this.tabbar.render(),!1!==a&&Me.execute("layout","save"),this._panel.hasFocus)){var o=this._panel.activeTab();o&&o.filename&&i.Z.ide.panels.replaceUrl("tree",o.filename)}},Ge.closeTabByPath=function(e,t,n){var i=this,r=[];d().forEach(i.children,(function(n){var i=n.filename;i&&(i===e||t&&0===i.indexOf(e+"/"))&&r.push(n)})),d().forEach(r,(function(e){i.closeTab(e,n).catch(m.ZP.error.checkErrorForIgnore)}))},Ge.closeTabByExt=function(e,t){var n=this,i=[];d().forEach(n.children,(function(t){var n=t.extensionName;n&&n===e&&i.push(t)})),d().forEach(i,(function(e){n.closeTab(e,t).catch(m.ZP.error.checkErrorForIgnore)}))},Ge._showPrompt=function(e){var t=this;return new Promise((function(n){R.Z.showConfirm({title:"Unsaved Changes",description:"The file <code>"+e.filename+"</code> has unsaved changes. If you close without saving those,changes will be lost!.<br/>What do you want to do?",doNotCloseOpened:!0,buttons:Be,onClose:function(i,r){return n(t._promptCloseHandler(i,r,e))}})}))},Ge._promptCloseHandler=function(e,t,n){var i=new Error("unsaved changes - cancel");switch(t){case R.Z.IDYES:return n.getShareFile().then((function(e){if(e&&e.save)return e.save();throw new Error("Can not save")}));case R.Z.IDNO:return Promise.resolve();case R.Z.IDCANCEL:default:return Promise.reject(i)}},Ge._closeTab=function(e,t){var n=this.template,i=this;return e.beforeClose().then((function(){return e.closing=!0,e.close(n,t)})).then((function(){return i.detachTab(e)}))},Ge.closeTab=function(e,t){var n=Qe(this,e);if(!n)return Promise.resolve();var r=this;return n.dirty.then((function(e){if(e&&i.Z.ide.panels.getSameTabsCount(n.filename,n.extensionName)<2){var a=i.Z.currentProject.getShareFile(n.filename);a&&a.save&&a.save()}return r._closeTab(n,t)}))},Ge.closeAll=function(){return $e(this)},Ge.closeOthersTabs=function(e){var t=Qe(this,e);if(t)return $e(this,{current:t,type:We})},Ge.closeLeftTabs=function(e){var t=Qe(this,e);if(t)return $e(this,{current:t,type:He})},Ge.closeRightTabs=function(e){var t=Qe(this,e);if(t)return $e(this,{current:t,type:qe})},Ge.switchToNextTab=function(e,t){var n=Qe(this,e);if(n){var i=Xe(this,n)+(t?1:-1);i<0&&(i=this.children.length-1),i===this.children.length&&(i=0),this.activateTab(i)}},Ge.switchToNextViewType=function(){if(this.panel.hasFocus){var e=this._activeTab;e&&e.switchToNextType()}},Ge.open=function(e,t,n){var i=new ke({title:(n=n||{}).title,panel:this.panel,ext:e,filename:t,view:n.view,options:n});this._opening.push(i);var r=this;return i.ready.then((function(){r.addTab(i),r.activateTab(i)})).catch((function(){return Je(r._opening,i)})),i},Ge.render=function(){var e=(0,r.Z)(o().mark((function e(t){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._registerCommands(),e.next=3,this.tabbar.render();case 3:d().isEmpty(this.children)?this._renderHelpTab():(n=this._activeTab,i=this._activeTabIndex,n&&(n.activate(this.template),this.tabbar.activate(i))),y.Z.on(this.template,"click",(function(e){var t=l()(e.target).closest("a").data("command");if(!d().isEmpty(t)){var n=t.split(":"),i=n.shift();t=n.join(":"),Me.execute(i,t)}})),t.append(this.template);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Ge.showHelpBlock=function(){this.helpTab.removeClass("hide")},Ge.hideHelpBlock=function(){this.helpTab.addClass("hide")},Ge.addTab=function(e,t){e.panel=this.panel,d().isUndefined(t)?(this.children.push(e),this._storeActiveTab(e)):(this._activeTabIndex>=t&&(this._activeTabIndex+=1),this.children.splice(t,0,e)),Je(this._opening,e),(e.active||this._activeTab===e)&&d().defer(this.activateTab.bind(this),e),this.tabbar.render()},Ge.addChildren=function(e){e=d().filter(e,(function(e){return e instanceof ke}));var t=this;d().forEach(e,(function(e){e.panel=t.panel,t._opening.push(e),e.ready.then((function(){t.addTab(e)})).catch((function(){return Je(t._opening,e)}))}))},Ge.moveTab=function(e,t){if((t>this.children.length-1||d().isUndefined(t))&&(t=this.children.length-1),e!==t&&this._activeTab){var n=this._activeTab;return n.deactivate().then(function(){var i=this.children.splice(e,1)[0];this.children.splice(t,0,i),this._activeTabIndex=d().indexOf(this.children,n),this.tabbar.render(),this.activateTab(i)}.bind(this))}},Ge.remove=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.template.remove(),d().forEach(this.eventHandles,(function(e){y.Z.unsubscribe(e)})),this.eventHandles.length=0,t=d().invokeMap(this.children,"close"),e.prev=4,e.next=7,Promise.all(d().flattenDeep(t));case 7:return e.prev=7,this.children=[],this._tabToActivate=null,this.tabbar.remove(),y.Z.off(this.template),e.finish(7);case 13:case"end":return e.stop()}}),e,this,[[4,,7,13]])}))),Ge.focus=function(){var e=this._activeTab;e&&e.focus()},Ge.serialize=function(){var e=d()(this.children).map((function(e){return e&&e.serialize&&e.serialize()})).compact().value();return{type:Fe.TABS,params:{active:this.active,activeTabIndex:this._activeTabIndex},children:e}},y.Z.subscribe("guides:player:open",(function(){Ue=!0,i.Z.ide.panels.hideHelpBlock()})),y.Z.subscribe("guides:player:close_rendered",(function(){Ue=!1,i.Z.ide.panels.showHelpBlock()}));const et=ze;var tt=n(68058).I_,nt=n(2774).V5,it=y.Z.create(n(10270)),rt=A.default,at=A.defaultWorkingCopy,st={template:null,child:null,layout:rt,focus:null,lastFocus:null,initialFocus:null,_subscriptions:[],rendered:!1,all:{}},ot=d().debounce(it.panelChangeSize,navigator.userAgent.match(/msie/i)?400:200);function ct(){var e=i.Z.currentProject;return!!e&&(e.isAuthorProject&&e.exists(Ne.q9))}function lt(){return ct()?at:rt}function ut(){return e=!1,d().each(st.allPanels(),(function(t){return!(e=0!==t.getTabs("filetree").length)})),e?new Promise((function(e){var t=!1;R.Z.showConfirm({title:"Change layout",description:"Switching layouts will close all currently open tabs, and will of course change your layout. Are you sure you wish to do this?",onHide:function(){e(t)},onClose:function(e){t=!!e}})})):Promise.resolve(!0);var e}function dt(e){var t;if(e){if(!e.tabs||!e.tabs.children)return Promise.resolve();t=e.tabs.children}else t=d().flatten(d().map(st.allPanels(),(function(e){return e.tabs.children})));var n=d().map(t,"dirty");return Promise.all(n).then((function(e){if(d().some(e))return M.Z.saveAllAndWait()}))}function pt(e,t){if(e){var n=e.panel,i=n.panel;if(n!==st){var r=function t(n){if(n&&n.children){var i=n.children;d().eachRight(i,(function(i){i instanceof ke?e.isOpen(i.filename,i.extensionName)||(i.active=!1,n.detachTab(i).then((function(){e.addTab(i),e.tabs.tabbar.render()}))):t(i)}))}},a=function e(t){if(t instanceof $)return t.activeTab()||0;if(t.children){var n=[];return d().each(t.children,(function(t){var i=e(t);i&&n.push(i)})),n[0]||0}return 0}(n);t&&d().each(n.children,(function(t){t!==e&&r(t)}));var s,o=n.template.parent();e.activeTab&&(s=e.activeTab()||a);var c=d().findIndex(i.children,n);if(-1!==c){i.children[c]=e,e.panel=i,e.detach();var l=d().findIndex(n.children,e);n.children.splice(l,1),n.remove(),e.render(o),s&&e.activateTab(s),e.focus(),d().defer((function(){st.lastFocus=null})),st.updateLayout(),ot()}}}}var ft=function(e){return function e(t){if(t){var n=function(e){switch(e){case nt.SINGLE:return $;case nt.VERTICAL:return ce;case nt.HORIZONTAL:return he;case nt.TABS:return et;case nt.TAB:return ke;default:throw new Error("Unkown type "+e)}}(t.type);if("tab"===t.type){var r=i.Z.getByUrl(t.params.ext);!t.params.title&&r&&r.info.codio&&r.info.codio.title&&(t.params.title=r.info.codio.title);var a=t.params.filename;if(d().isObject(a)){d().defaults(a,{caseSensitive:!0,names:[]});var s=i.Z.currentProject.getFileInfoInsensitive;a.caseSensitive&&(s=i.Z.currentProject.exists),s=d().bind(s,i.Z.currentProject);var o=!1,c=a.names;if(c=d().isArray(c)?c:[c],d().forEach(c,(function(e){var n=s(e);if(n)return t.params.filename=d().isBoolean(n)?e:n,o=!0,!1})),!o)return}}var l=new n(t.params);return d().has(t,"children")&&l.addChildren(d().map(t.children,d().bind(e,t))),t.params&&t.params.focus&&(st.initialFocus=l.id,st.focus=l),"single"===l.type&&(st.all[l.id]=l),l}}(e)},ht=function(e){var t=e.serialize();return t.children[0].children=[],t.params.focus=!1,t.children[0].params.activeTabIndex=-1,ft(t)};function mt(){return i.Z.currentProject.guid+":layout"}var gt=function(e){i.Z.ide.isClosed||tt.set(mt(),e)},vt=function e(t,n){if(t){var i,r=!1;return d().each(n,(function(e){t.isOpen&&t.isOpen(void 0,e)&&(r=!0)})),t.canFocus&&!r?t:(d().each(t.children,(function(t){return!(i=e(t,n))})),i)}};function bt(e,t,n){return void 0===n&&(n=5),new Promise((function(i){var r=function(e,t){var n=["filetree","guides","terminal"];!0===t.ignoreSingle?n=[]:d().isArray(t.ignoreExtensions)&&(n=t.ignoreExtensions);if(t.panel)return t.panel;if(e.focus){if(e.focus.activeTab()){var i=e.focus.activeTab().extensionName;if(e.focus.activeTab()&&d().includes(n,i)&&(e.lastFocus=vt(e.child,n)||vt(e.child,["guides","filetree"])||vt(e.child,["filetree"])||e.lastFocus,e.lastFocus))return e.lastFocus}return e.focus}return vt(e.child,n)}(e,t);!r&&n>0?d().delay((function(){return bt(e,t,n--).then(i)}),200):i(r)}))}function yt(e,t,n){var i=st.focus;if(i&&"function"==typeof i.searchNeighborhood){var r=i.searchNeighborhood(e);r&&(r.focus(),n.pass=!1,n.arg&&"function"==typeof n.arg.preventDefault&&n.arg.preventDefault())}}st.render=function(e){if(this.rendered)return this.template=e,this.child.render(e);var t,n;t=d().bind(st._subscriptions.push,st._subscriptions),n=d().debounce(st.updateLayout.bind(st),200),t(y.Z.subscribe("command:layout:save",(function(){n()}))),t(y.Z.subscribe("command:file:open",(function(e,t){t=t.arg,st.open(t.ext,t.filename,t)}))),i.Z.currentProject.protectLayoutValue||(t(y.Z.subscribe("command:ide:panel_split_horizontal",(function(){st.splitHorizontal(st.focus)}))),t(y.Z.subscribe("command:ide:panel_split_vertical",(function(){st.splitVertical(st.focus)}))),t(y.Z.subscribe("command:ide:panel:join",(function(){st.join(st.focus,!0)}))),t(y.Z.subscribe("command:ide:panel_close",(function(){st.close(st.focus)}))),t(y.Z.subscribe("command:ide:layout_default",(function(){ut().then((function(e){e&&st.setLayout(lt()).then((function(){st.updateFocusUrl(st.focus),ct()&&it.playGuides()}))}))}))),t(y.Z.subscribe("command:ide:layout_showcase",(function(){ut().then((function(e){e&&(st.setLayout(A.showcase),st.updateUrl(null,null))}))}))),t(y.Z.subscribe("command:ide:layout_2_columns",(function(){ut().then((function(e){e&&(st.setLayout(A.column2),st.updateUrl(null,null))}))}))),t(y.Z.subscribe("command:ide:layout_2_rows",(function(){ut().then((function(e){e&&(st.setLayout(A.row2),st.updateUrl(null,null))}))})))),function(){var e=d().bind(st._subscriptions.push,st._subscriptions);e(y.Z.subscribe("panel:resize:end",(function(){st.updateLayout()}))),y.Z.on(window,"resize.panels",(function(){ot()}));var t=function(e,t){if(!d().isNull(st.initialFocus)&&t.panel.id===st.initialFocus)return st.initialFocus=null;t.panel===st.focus&&st.updateUrl(t.extensionName,t.filename||"")};e(y.Z.subscribe("tab:activated",t)),e(y.Z.subscribe("tab:focus",t)),e(y.Z.subscribe("panel:focus:change",(function(e,t){if(st.focus){if(st.focus.id===t.id)return;st.focus.hasFocus=!1}st.lastFocus=st.focus,st.focus=t,st.focus.hasFocus=!0;var n=t.activeTab();n&&it.tabFocus({extension:n.extensionName},n),st.updateFocusUrl(t)}))),e(y.Z.subscribe("tab:closed",(function(){st.focus.activeTab()||st.updateUrl(null,null)})))}();var r=tt.get(mt()),a=!r&&ct();r||(r=d().cloneDeep(lt())),this.layout=r,this.template=e,this.child=ft(r),this.child.panel=st,this.focus&&this.focus.focus(),this.child.render(e),this.rendered=!0,a&&it.playGuides()},st.remove=function(){this.unsubscribe(),this.template&&this.template.empty();var e=this.child&&this.child.remove();return this.child=null,st.focus=null,st.lastFocus=null,st.rendered=!1,e||Promise.resolve()},st.unsubscribe=function(){d().forEach(st._subscriptions,(function(e){e=st._subscriptions.pop(),y.Z.unsubscribe(e)})),y.Z.off(window,"resize.panels")},st.isOpen=function(e,t){return this.child&&this.child.isOpen(e,t)},st.getAllOpened=function(e,t){return this.child&&this.child.getAllOpened(e,t)},st.closeAllTabs=function(e){return this.child&&this.child.closeAllTabs(e)},st.showHelpBlock=function(){return this.child&&this.child.showHelpBlock()},st.hideHelpBlock=function(){return this.child&&this.child.hideHelpBlock()},st.updateUrl=function(e,t){t=t||"";var n=[i.Z.currentProject.path,e,encodeURIComponent(t)],r=d().compact([i.Z.currentProject.path,e,encodeURIComponent(t)]),a="/"+(n=d().compact(n)).join("/");"/"+r.join("/")!==i.Z.router.getURL()&&i.Z.router.redirectTo(a,void 0,!0)},st.replaceUrl=function(e,t){var n=[i.Z.currentProject.path.toLowerCase(),e,t],r="/"+(n=d().compact(n)).join("/");r!==i.Z.router.getURL()&&i.Z.router.replaceWith(r,void 0,!1)},st.open=function(e,t,n){if(i.Z.currentProject.protectLayout&&!d().includes(i.Z.currentProject.protectLayoutAllowed,e))return Promise.resolve();var r=(n=n||{}).view;if(this.initialFocus=null,this.isActiveTab(e,t,r)){this.focus.activeTab().setOptions(n);var a=this.focus.activeTab();return Promise.resolve(a)}var s=this.focus&&this.focus.activeTab();s&&s.fullscreen&&(s.fullscreen=!s.fullscreen);var o=i.Z.getByUrl(e);if(!o)return Promise.resolve();if(n.title,o.info.codio.global){o.info.codio.noFile&&(t=void 0),n.step&&(t=n.step.toString());var c=st.isOpen(t,e);if(c)return c.panel&&(c.setOptions(n),c.panel.activateTab(c,r),!n.noFocus&&c.panel.focus()),Promise.resolve(c)}return o.info.codio.title&&!n.title&&(n.title=function(e){var t;t=d().isObject(e.info.codio.title)?e.info.codio.title.file:e.info.codio.title;return t}(o)),bt(this,n).then((function(i){if(i)return i.open(e,t,n);n.title}))},st.moveTab=function(e,t,n,i){if(e===t)return e.moveTab(n,i);var r=e.getTab(n),a=this;e.detachTab(n).then((function(){return t.addTab(r,i),t.tabs.tabbar.render(),t.activateTab(r)})).then((function(){a.updateFocusUrl(a.focus)}))},st.serialize=function(){if(d().isObject(this.child))return this.child.serialize()},st.updateLayout=function(){var e=this.serialize();gt(e),this.layout=e},st.splitHorizontal=function(e){if(!(e.template.height()<50)){var t=e.panel,n=new he;n.panel=t;var i=ht(e);n.width=e.width,n.height=e.height,e.height="50%",i.height="50%",n.fixed=e.fixed,e.fixed=!1,i.fixed=!1,n.panel=t,n.addChildren([e,i]);var r=d().findIndex(t.children,e);t.children[r]=n;var a=e.template.parent();e.detach(),n.render(a),n.focus(),this.updateLayout()}},st.addTreePanel=function(e){if(!(e.template.width()<50)){var t=e.panel,n=new ce;n.panel=t;var i=ft({type:"single",params:{width:"200px",height:"100%",focus:!1,canFocus:!0,fixed:!0},children:[{type:"tabs",params:{active:!1,activeTabIndex:0},children:[{type:"tab",params:{ext:"filetree",active:!0,title:"Filetree"}}]}]});n.width=e.width,n.height=e.height,e.width="50%",n.fixed=e.fixed,e.fixed=!1,i.fixed=!0,n.addChildren([i,e]);var r=d().findIndex(t.children,e);t.children[r]=n;var a=e.template.parent();e.detach(),n.render(a),n.focus(),this.updateLayout()}},st.splitVertical=function(e){if(!(e.template.width()<50)){var t=e.panel,n=new ce;n.panel=t;var i=ht(e);n.width=e.width,n.height=e.height,e.width="50%",i.width="50%",n.fixed=e.fixed,e.fixed=!1,i.fixed=!1,n.addChildren([e,i]);var r=d().findIndex(t.children,e);t.children[r]=n;var a=e.template.parent();e.detach(),n.render(a),n.focus(),this.updateLayout()}},st.close=function(e){dt(e).then((function(){delete st.all[e.id],pt(d()(e.panel.children).without(e).first(),!1)}))},st.join=function(e,t){dt(d()(e.panel.children).without(e).first()).then((function(){pt(e,t)}))},st.resetLayout=function(){return this.setLayout(lt())},st.setLayout=function(e){if(JSON.stringify(this.layout)===JSON.stringify(e))return Promise.resolve();var t=this;return dt().then((function(){return t.remove()})).then((function(){t.layout=d().cloneDeep(e),gt(t.layout),t.render(t.template)}))},st.presetLayout=function(e){JSON.stringify(this.layout)!==JSON.stringify(e)&&(this.layout=e,gt(this.layout))},st.isActiveTab=function(e,t,n){if(!this.focus)return!1;var i=this.focus.activeTab();if(d().isUndefined(i))return!1;var r=i.extensionName===e,a=i.filename===t,s=d().isUndefined(n)||i.viewType===n;return r&&a&&s},st.allPanels=function(e){return function e(t,n){return d().reduce(t,(function(t,n){return"single"!==n.type?t.concat(e(n.children)):t.concat([n])}),n||[])}((e=e||st.child).children)},st.getSameTabsCount=function(e,t){var n=i.Z.ide.panels.allPanels();return d().reduce(n,(function(n,i){return n+d().reduce(i.tabs.children,(function(n,i){var r=i.extensionName===t,a=i.filename===e;return r&&a?n+1:n}),0)}),0)},st.updateFocusUrl=function(e){var t=e.activeTab(),n="",i="";t&&(n=t.extensionName,i=t.filename||""),this.updateLayout(),this.updateUrl(n,i)},st.getOpenedTabs=function(e){var t=st.allPanels();return d()(t).map((function(e){return e.getTabs()})).flatten().filter({extensionName:e}).value()},y.Z.subscribe("command:ide:panel_switch_right",yt.bind(null,"Right")),y.Z.subscribe("command:ide:panel_switch_left",yt.bind(null,"Left")),y.Z.subscribe("command:ide:panel_switch_up",yt.bind(null,"Up")),y.Z.subscribe("command:ide:panel_switch_down",yt.bind(null,"Down"));const wt=st;var _t=f().compile('<form action="/" method="post" onsubmit="return false;">\n\n  <label for="current-path">Current path</label>\n  <input type="text" id="current-path" maxlength="100" readonly value="{{currentPath}}">\n\n  <label for="item-name">{{itemName}} name</label>\n  <input type="text" id="item-name" name="name" autocomplete="off" required autofocus placeholder="Enter the name of the new {{tolower itemName}}{{#unless notFile}}, including the extension{{/unless}}"  maxlength="100">\n\n  <div class="ac-window-prompt-rule"></div>\n</form>\n'),kt=f().compile('<form action="/" method="post">\n  <p>\n    Use the form below to rename the {{type}} <code>{{path}}</code>.\n  </p>\n\n  <label for="item-name">New Name</label>\n  <input type="text" name="name" id="item-name" required autofocus\n         placeholder="The {{type}} name" value="{{name}}" maxlength="100">\n\n</form>\n'),Pt=f().compile("<p>\n  {{{description}}}\n</p>\n<p>\n  Deleting this {{temp}} is permanent and cannot be undone. Are you sure you want to delete it?\n</p>\n"),Zt=f().compile('<form action="/" method="post">\n\n  <p>\n    The file with name\n    <code>{{name}}</code>  already exists in\n    <code>{{parentPath}}  </code>\n    Do you want to Rename it?\n  </p>\n\n  <label for="item-name">New Name</label>\n  <input type="text" name="name" id="item-name" required autofocus placeholder="The {{type}} name={{name}}" value="{{name}}" maxlength="100">\n\n</form>\n'),xt=v.Z.hotkey,Ct=y.Z.create(n(10270)),St=n(2774).fs,Et=n(2774).zI,It={path:"",type:""},Tt=[It],jt=!1;function At(e){if(e||It.type===St.FILE){var t=It.path.split("/");return t.pop(),t.join("/")}return It.path}function Ot(e,t,n,r,a){n=!d().isUndefined(n)&&n;var s=e;if(t&&(s=t+"/"+s),!m.ZP.isItemNameValid(e))return"Name must only contain alphanumeric characters, hyphens and underscores.";var o=i.Z.currentProject.getFileInfo(s),c=!!a&&-1!==a.indexOf(s);if(o||c){if(n){var l=m.ZP.path.parse(r);if(o&&l.name.toLowerCase()===o.name.toLowerCase()&&l.name!==o.name)return!1}return"An item with that name "+e+" already exists."}return!1}function Dt(e,t,n){var r=At(),a=n!==St.FILE?"Folder":"File",s=l()(_t({notFile:n!==St.FILE,itemName:a,currentPath:r||"Root folder"})),o=s.find("#item-name"),c=new R.Z({title:e,content:s,buttons:R.Z.MB_OKCANCEL,focusOn:s.find("#item-name").focus(),icon:n===St.FILE?"file":"folder",onShow:function(){var e=this;o.on("keyup",(function(t){!t||13!==t.keyCode||t.metaKey||t.ctrlKey||e.close(R.Z.IDOK)}))},onClose:function(e){if(e===R.Z.IDOK){var t=c.content().find("#item-name"),a=l().trim(t.val()),s=Ot(a,r);if(s)return m.ZP.addErrorToInput(t,s),!1;t.off("keyup");var o=m.ZP.path.makePath(r,a),u=n===St.FILE?"createFile":"createFolder";i.Z.currentProject[u](a,r).then((function(){Nt(n,o)}))}}})}function Nt(e,t){d().delay((function(){Ct.selectTreeItem({path:t})}),200),e===St.FILE&&xt.execute("file","open",{ext:"tree",filename:t})}function Mt(){Dt("Create New File",0,St.FILE)}function Ft(e){return m.ZP.path.parse(e).name}function Rt(e,t,n,i,r){var a=t.item,s={action:Et.SKIP_ALL},o=l()(Zt({type:a.type,parentPath:e,name:a.name})),c=new R.Z({title:n+" "+a.type,buttons:[{title:"Rename",type:1,onClick:function(){return c.close(Et.RENAME)}},{title:"Skip",onClick:function(){return c.close(Et.SKIP)}},{title:"Skip All",onClick:function(){return c.close(Et.SKIP_ALL)}}],content:o,onShow:function(){this.content().find("#item-name").focus()},onHide:function(){i&&i(s)},onClose:function(t){switch(s={action:t},t){case R.Z.IDCANCEL:s={action:Et.SKIP_ALL};break;case Et.RENAME:var n=this.content().find("#item-name"),i=l().trim(n.val()),a=Ot(i,e,void 0,void 0,r.paths);if(a)return m.ZP.addErrorToInput(n,a),!1;s={action:Et.RENAME,name:i}}return!0}})}function Lt(e,t){d().each(t,(function(e){e.item.name=function(e,t){for(var n=t,r="",a=m.ZP.path.parse(e.path),s=m.ZP.path.getFileName(a.name),o=1;o<64;o++){r=e.type!==St.FILE?e.item.name+=n:s+n+"."+a.extension;var c=""===a.dir?r:a.dir+"/"+r;if(!i.Z.currentProject.getFileInfo(c))break;n+=t}return r}(e,"-copy")}));var n=[],r=[];d().each(t,(function(t){n.push(t.path);var i=""===e?t.item.name:e+"/"+t.item.name;r.push(i)})),i.Z.currentProject.copyItems(n,r).then((function(){Nt(t[0].type,r[0])}))}y.Z.subscribe("command:ide:new_file",(function(){if(i.Z.currentProject&&!i.Z.currentProject.readOnly)return Mt()})),y.Z.subscribe("command:ide:new_folder",(function(){i.Z.currentProject&&!i.Z.currentProject.readOnly&&Dt("Create New Folder",0,St.DIR)})),y.Z.subscribe("command:ide:rename_item",(function(){i.Z.currentProject&&!i.Z.currentProject.readOnly&&M.Z.saveAllAndWait().then((function(){!function(e,t){if(""!==e){var n=l()(kt({type:t,path:e,name:Ft(e)})),r="Rename ";t===St.FILE?r+="file":r+="folder",new R.Z({title:r,buttons:R.Z.MB_OKCANCEL,content:n,icon:t===St.FILE?"file":"folder",onShow:function(){this.content().find("#item-name").focus()},onClose:function(t){if(t===R.Z.IDOK){var n=At(!0),r=this.content().find("#item-name"),a=l().trim(r.val()),s=Ot(a,n,!0,e);if(s)return m.ZP.addErrorToInput(r,s),!1;i.Z.currentProject.renameItem(e,m.ZP.path.makePath(n,a)).catch((function(e){var t=e.message;return k.Z.error(t)}))}}})}}(It.path,It.type)}))})),y.Z.subscribe("command:ide:delete_item",(function(){i.Z.currentProject&&!i.Z.currentProject.readOnly&&(jt||M.Z.saveAllAndWait().then((function(){!function(e){var t=(e=d().filter(e||[],(function(e){if(""!==e.path||"app"!==e.type)return e}))).length;if(0!==t){var n;jt=!0,n=1===t?"You are about to delete the "+e[0].type+': "<code>'+d().escape(e[0].path)+'</code>".':"You are about to delete "+e.length+" items.";for(var r=1!==t?"items":"item",a=[],s=0;s<t;s++)a.push(e[s].path);R.Z.showConfirm({description:Pt({description:n,temp:r}),onHide:function(){jt=!1},onClose:function(e){e&&i.Z.currentProject.deleteItems(a),jt=!1}})}}(Tt)})))})),y.Z.subscribe("filetree:move",(function(e,t){i.Z.currentProject&&!i.Z.currentProject.readOnly&&M.Z.saveAllAndWait().then((function(){!function(e,t){for(var n=[],r=[],a=[],s=0,o=t.length;s<o;s++){var c=Ft(t[s].path),l=""===e?c:e+"/"+c;i.Z.currentProject.getFileInfo(l)?n.push(t[s]):r.push(t[s])}var u=function(e,t){var n=[],r=[];d().each(t,(function(t){n.push(t.path);var i=""===e?t.item.name:e+"/"+t.item.name;r.push(i)})),i.Z.currentProject.moveItems(n,r)};0===n.length?u(e,r):function t(){if(0===n.length)0!==r.length?u(e,r):Ct.unblockTree();else{var i=n.shift();Rt(e,i,"Move",(function(s){switch(s.action){case Et.RENAME:i.item.name=s.name,r.push(i);var o=e?e+"/":"";a.push(o+s.name);break;case Et.SKIP_ALL:n=[];break;case Et.OVERWRITE:r.push(i);break;case Et.OVERWRITE_ALL:r.push(i),r=r.concat(n),n=[]}t()}),{paths:a})}}()}(t[0],t[1])}))})),y.Z.subscribe("filetree:select",(function(e,t){0!==t.length&&(It.path=t[0].path,It.type=t[0].type),Tt=t})),y.Z.subscribe("filetree:paste",(function(e,t){if(i.Z.currentProject&&!i.Z.currentProject.readOnly){var n=t[0],r=t[1];M.Z.saveAllAndWait().then((function(){!function(e,t){for(var n=[],r=[],a=[],s=0,o=t.length;s<o;s++){var c=Ft(t[s].path);if(i.Z.currentProject.getFileInfo(t[s].path)){var l=""===e?c:e+"/"+c;i.Z.currentProject.getFileInfo(l)?n.push(t[s]):r.push(t[s])}}var u=function(e,t){var n=[],r=[];d().each(t,(function(t){n.push(t.path);var i=""===e?t.item.name:e+"/"+t.item.name;r.push(i)})),i.Z.currentProject.copyItems(n,r)};0===n.length&&r.length>0?u(e,r):function t(){if(0===n.length)0!==r.length?u(e,r):Ct.unblockTree();else{var i=n.shift();Rt(e,i,"Copy",(function(s){switch(s.action){case Et.RENAME:i.item.name=s.name,r.push(i);var o=e?e+"/":"";a.push(o+s.name);break;case Et.SKIP_ALL:n=[];break;case Et.OVERWRITE:r.push(i);break;case Et.OVERWRITE_ALL:r.push(i),r=r.concat(n),n=[]}t()}),{paths:a})}}()}(n,r)}))}})),y.Z.subscribe("filetree:duplicate",(function(e,t){if(i.Z.currentProject&&!i.Z.currentProject.readOnly){var n=t[0],r=t[1];M.Z.saveAllAndWait().then((function(){Lt(n,r)}))}})),y.Z.subscribe("project:item:created:#path",(function(e,t){Ct.itemCreated({path:e.path},t)})),y.Z.subscribe("project:item:deleted:#path",(function(e){Ct.closeByPath({path:e.path},{force:!0,recursive:!0}),Ct.itemDeleted({path:e.path})})),y.Z.subscribe("project:item:moved:#from:#to",(function(e,t){!function(e,t,n,i){Ct.tabRename({from:e,to:t},{recursive:n,saveLayout:i})}(e.from,e.to,!0),Ct.itemMoved({from:e.from,to:e.to},t)}));const Ut={createFile:Mt,validateItem:Ot};var Bt=v.Z.hotkey,qt=n(2774).Xd;y.Z.subscribe("command:settings:project:open",(function(){if(i.Z.currentProject){var e=function(){Bt.execute("file","open",{ext:"tree",filename:qt})};i.Z.currentProject.exists(qt)?e():i.Z.currentProject.createFile(qt,"").then(e)}})),y.Z.subscribe("command:settings:user:open",(function(){i.Z.currentProject&&i.Z.currentUser&&!i.Z.currentUser.isAnonymous()&&Bt.execute("file","open",{ext:"user-preferences",filename:""})}));var Ht={};function Wt(e,t){var n=i.Z.ide.panels.focus&&i.Z.ide.panels.focus.activeTab();return n&&n.filename===e?n.extension.then((function(e){return e.extension.editor()})):new Promise((function(n){Ht[e]=y.Z.subscribe("file:editor:activate",(function(t,i){return n(function(e,t,n){return t.filename===n?(void 0!==Ht[n]&&(y.Z.unsubscribe(Ht[n]),delete Ht[n]),Promise.resolve(t.editor)):Promise.resolve()}(0,i,e))})),d().defer((function(){i.Z.ide.open("tree",e,t)}))}))}const zt={openFilePromise:Wt,openFileAndGoToLine:function(e,t,n,i){n=n||1,Wt(e,i).then((function(e){!function(e,t,n){if(n){var i={lineNumber:e,column:t};n.focus(),n.setPosition(i),d().defer((function(){return n.scrollToPosition(i)}))}}(t,n,e)}))}};var Gt=n(49088);var Vt,Kt=f().compile("Projects are only available if you have an active subscription\n")(),Yt=f().compile('<p>Codio is unable to store a cookie that is needed for your project subdomain. There are two ways to remedy this.</p>\n<p>1. Press OK below. This will plant the cookie for this visit to your project. However, you will see this message and be required to repeat it each time you enter the project.</p>\n<p>2. Enable cookies to be stored by changing your browser settings <a href="https://docs.codio.com/common/develop/general.html#cookie-requirements" target="_blank">as described here</a>. You should not see this message again once the settings have been changed.</p>\n')(),Jt=f().compile('<p>\n    <strong>\n        This assignment only allows a single login per user. Please make sure you have....\n    </strong>\n    <br/>\n    <ol class="strict-session-warning">\n        <li>Closed other tabs or browsers with Codio</li>\n        <li>Stable Internet connection</li>\n        <li>Enough power in your device</li>\n        <li>Plenty of time</li>\n    </ol>\n    <br/>\n    <strong>\n        Once you start this assignment, if your computer gets disconnected from\n        the network and reconnects with a new IP address, you will be locked out.\n    </strong>\n</p>\n')(),Qt=f().compile("<p>\n    The assignment you are trying to access has been started from a different IP address or different browser.\n</p>\n<p>\n    Please contact your class instructor/professor for assistance\n</p>\n")(),Xt=f().compile('<button\n  class="iframe-fullscreen-btn"\n  aria-label="{{ariaLabel}}">\n  <i class="icon ss-icon ss-pika iframe-fullscreen-btn-icon {{iconName}}"\n     type="pika"\n     aria-hidden="true">\n    {{iconName}}\n  </i>\n</button>\n'),$t=f().compile("<p>Sorry there seems to be a problem loading your assignment</p>\n<ul style=\"text-align: left;\">\n  <li><a href=\"https://docs.codio.com/develop/develop/general.html#cookies-firewalls-browser-support\" target=\"_blank\">check cookies are set correctly</a></li>\n  <li>clear cookies/cache (select 'all time')</li>\n  <li>try in a private/incognito browser (where any browser addons/extensions won't be running)</li>\n  <li>try a different browser that you haven't used before</li>\n  <li>check any local firewall/AntiVirus apps that are running (they all should have log files to show if they are blocking anything -- some have 'default' settings that they say are to protect you but can interfere a lot!</li>\n  <li>If you are using Safari browser it can be blocking preview cookies with their 'Intelligent Tracking Prevention 2.0', Look to disable the cookie block of the browser, refresh and try again</li>\n</ul>\n<br/>\n<p>If you still have a problem please contact us at help@codio.com with details of the assignment and what browsers you have tried.</p>\n")(),en=y.Z.create(n(10270)),tn=l()(f().compile('<div class="ide-container">\n  <div class="ide"></div>\n</div>\n')()),nn=l()("#body-loading"),rn=l()("#content"),an=null,sn=!1,on="NORMAL",cn=function(e,t,n,r){var a;return t&&t.length>0&&(t=decodeURIComponent(t)),function(e,t,n){if(i.Z.currentProject&&(!i.Z.currentProject.protectLayout||d().includes(i.Z.currentProject.protectLayoutAllowed,e))){n=n||{};var r=wt.open(e,t,n);return en.fileOpened({filePath:t},t),r}}(e,t,a=d().isString(n)?{title:a,view:r}:n)},ln=function(e){e&&"session-closed"===e.event&&L.Z.validateAccessToken().catch((function(){return location.assign("/p/login")}))},un=function(e,t){return new Promise((function(e,n){var i=l().ajax({url:t,type:"GET",contentType:"text/html; charset=utf-8",xhrFields:{withCredentials:!0},timeout:1e3});i.done(e),i.fail(n)}))},dn=function(e){var t="//"+e.backendDomain+"/?set-codio-session="+e.dynamicPreviewCookie,n="//"+e.backendDomain+"/?verify-codio-session="+e.dynamicPreviewCookie;return un(0,n).catch((function(){return un(0,t).then((function(){return un(0,n)}))})).catch((function(){return function(e){return new Promise((function(t){R.Z.showConfirm({title:"Cookie preview confirmation",description:Yt,width:900,buttons:R.Z.MB_OK,onClose:function(){var n=window.open(e,"Init Session","width=790,height=350,toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=1,left=400,top=220"),i=setInterval((function(){n&&!n.closed||(clearInterval(i),t())}),1e3)}}).preventClosing(!0),l()(".modal-scrollable").css({"z-index":1e4})}))}(t)})).catch((function(e){U.Z.captureMessage("updateStaticPreviewCookie error",{extra:e})}))},pn=function(){var e=[{title:"Continue Execution",class:"mb-yes",onClick:function(){b.ZP.AccountManager.upgradeSessionToStrict().finally((function(){location.reload()}))},type:1},{title:"Cancel",class:"mb-cancel",onClick:function(){location.assign("/home")}}];R.Z.showConfirm({title:"Single Login Assignment",description:Jt,width:900,buttons:e}).preventClosing(!0),l()(".modal-scrollable").css({"z-index":1e4})},fn=function(){var e=(0,r.Z)(o().mark((function e(t,n){var i,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(){var e=[{title:"Ok",class:"mb-yes",onClick:function(){location.assign("/home")},type:1}];R.Z.showConfirm({title:"Additional Login Prevented",description:Qt,width:900,buttons:e}).preventClosing(!0),l()(".modal-scrollable").css({"z-index":1e4})},i=t.eduStartedAssignmentInfo,r=i&&i.started.completed,t.examMode.singleLogin&&(!r||n)){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",b.ZP.AccountManager.upgradeSessionToStrict().then((function(e){if(!e)return a()})).catch((function(){return a()})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),hn="initial",mn=function(e,t,n){hn="loadProject";var r,s=new URLSearchParams(window.location.search).get("sso_token");s&&window.sessionStorage.setItem("codio_sso_token",s),"projects"===e&&(e=void 0,r=t,t=void 0),nn.removeClass("in").data("wait",!1);var o=function(){l()("div.ac").showFProgress("Loading project...")};o();var c={message:"long project opening(> 30s)",archiveState:on,extended:!1},u=[(new Date).getTime()],p=null,f=function e(){if(v=null,"loadProject"===hn||"loadProject:waitProjectData"===hn){if(c.archiveState!==on&&!c.extended)return v=setTimeout(e,6e4),void(c.extended=!0);var n=u.reduce((function(e,t,n,i){return 0===n||e.push(t-i[n-1]),e}),[]);l()("div.ac").hideFProgress(),p=R.Z.showWarning({description:$t,buttons:R.Z.MB_OK,doNotCloseOpened:!0,width:700,onHide:function(){p=null,"projectError"!==hn&&o()}}),U.Z.captureMessage(c.message,{extra:{id:i.Z.currentUser&&i.Z.currentUser.account,projectName:t,projectId:r,url:window.location.href,phase:hn,timeSpent:n,archiveState:c.archiveState}})}},v=setTimeout(f,3e4);return w.Z.start(e,t,r,(0,Gt.p)()),Vt=function(e,t,n,r,s){O.api.invalidateSubscriptionsCache().catch((function(e){var t=e.message;return k.Z.error(t)}));var o=i.Z.currentUser.isAnonymous(),c={},l=function(e){hn=e};return g.Z.load(e,t,n,!1,l).then((function(e){return hn="loadProject:waitSub",s.archiveState=e.archive_state,e.archive_state!==on&&(s.message="archived long project opening(> 90s)"),r.push((new Date).getTime()),e.isPublic||(c=o||i.Z.currentUser.isInTrial()?[]:O.api.getCachedSubscriptions()),Promise.all([e,c])})).then((function(e){var t=(0,a.Z)(e,2),n=t[0],s=t[1];if(hn="loadProject:checkSub",r.push((new Date).getTime()),!(n.isPublic||i.Z.currentUser.isDummy()||i.Z.currentUser.isInTrial()||O.hasAnyUsableSubscription(s)))throw new Error(Kt);return n})).then((function(e){return hn="loadProject:checkStrict",r.push((new Date).getTime()),fn(e).then((function(){return hn="loadProject:checkArchived",e.checkArchivedState(e)})).then((function(){return hn="loadProject:nsSubscribe",h.Z.subscribe("user-events/"+i.Z.currentUser.account,ln,e.pairProgramming&&e.pairProgramming.enabled?"collaboration:"+e.guid:""),r.push((new Date).getTime()),e.subscribeNS(l)}))}))}(e,t,r,u,c).then((function(e){return u.push((new Date).getTime()),hn="deprecationWarning",i.Z.currentProject=e,function(){var e=i.Z.currentProject;if(1===e.generation&&e.isUserOwner&&!e.startedAssignment){var t=["<strong>Deprecation Notice.</strong><br/>","<strong>Please note: </strong>Generation 1 stacks will be disabled on January 1st 2017.","<br/>We recommend that you update to use Generation 2 stack. For information on how to",' create your own stacks <a href="https://docs.codio.com/common/develop/stacks/create-stack.html"',' target="_blank">click here</a>.',"<br/>For information on how to migrate Generation 1 project to Generation 2 project ",'<a href="',"/home/projects/"+i.Z.currentProject.pathName+"/preferences?tab=migration",'" target="_blank">click here</a>.'];k.Z.info((e.eduStartedAssignmentInfo?["<strong>Deprecation Notice.</strong><br/>","<strong>Please note: </strong>Generation 1 stacks will be disabled on January 1st 2017.","If you are opening this assignment in a course, please discuss with your teacher."]:t).join(""))}}(),p&&p.close(),null!==v&&clearTimeout(v),v=null,dn(e)})).then((function(){return v=setTimeout(f,3e4),w.Z.waitConnectionOrTimeout()})).then((function(){w.Z.canWrite()||F.ZP.block(["Sorry, but there seems to be a problem with your connection."," If this is the first time you are seeing this error message,"," you may have to reconfigure your network firewall settings."," Need further help? Use ",'<a href="https://codio.com/docs/dashboard/account/firewall" target="_blank">',"https://codio.com/docs/dashboard/account/firewall</a><br/><br/>"," If you have tried to access your project before, please try reloading the page."," If you continue to experience problems, ",'<a href="mailto:help@codio.com">contact us</a>'," and include your username and name of your project."].join(""))})).then((function(){return hn="render",null,k.Z.hideCritical(),d().isUndefined(n)||wt.presetLayout(n),l()(document).bind("drop dragover",(function(e){e.preventDefault()})),l()("div.ac").completeFProgress().then((function(){_.ZP.show("ide");var e=tn.find(".ide");wt.render(e),rn.children(".ide-container").remove(),rn.append(tn),rn.addClass("in"),document.title="Codio - "+i.Z.currentProject.name,en.ideOpened()}))})).then((function(){if(hn="Settings",!_n.isClosed){if(bn(),wn(i.Z.currentProject.penalty),i.Z.currentProject.authorAssignment&&en.updateDeleteProjectMenuItem({title:"Discard Changes"}),en.projectOpened({projectId:i.Z.currentProject.guid},i.Z.currentProject),i.Z.currentUser&&i.Z.currentUser.isAnonymous()){var e="anon_projects",t=N.I_.get(e);t||(t={}),t[i.Z.currentProject.guid]=1,N.I_.set(e,t)}m.ZP.checkGigaBoxStatusOnStart(i.Z.currentProject,b.ZP)}return null!==v&&clearTimeout(v),m.ZP.sleep.wasSleep(!0),function(){if(m.ZP.isIframe()&&m.ZP.fullscreenSupport()){var e=l()("#iframe-fullscreen");e.removeClass("hide").empty().append(gn(!1)).click(m.ZP.toggleIframeFullscreen);var t=vn.bind(null,e);document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),document.addEventListener("mozfullscreenchange",t),document.addEventListener("MSFullscreenChange",t)}}(),_n.isClosed||w.Z.cursors(i.Z.currentProject.guid).catch((function(){})),i.Z.currentProject})).catch((function(e){return hn="projectError",p&&p.close(),window.sessionStorage.removeItem("codio_sso_token"),null!==v&&clearTimeout(v),function(e){l()("div.ac").hideFProgress(),_n.isClosed=!0,yn().then((function(){var t;d().isString(e)&&(t=e),e&&d().isString(e.message)&&(t=e.message);var n=d().some(["Project not found","Not allowed","Permission denied","NOT_FOUND","Unauthenticated"],(function(e){return d().includes(t.toLowerCase(),e.toLowerCase())}));if(n)return k.Z.notFound("Project not found");if(d().includes(t.toLowerCase(),"FAILED_PRECONDITION".toLowerCase()))return pn();if(d().isString(t)&&d().includes(t,"Unit is Disabled"))return k.Z.serverError("Unit is Disabled");if(d().isString(t)&&d().includes(t,"Project was corrupted"))return k.Z.serverError("Unpacking project failed. Please contact us to find out more");if(d().includes(t,"active subscription"))return k.Z.paymentRequired(Kt);if(d().isString(t)&&d().includes(t,"Got non 200 code: 423"))return k.Z.locked();if(d().includes(t,"Assignment completed and access restricted")){var i=d().includes(t,"[lti]");return k.Z.unitNoAccessCompleted(m.ZP.isIframe(),i,t)}if(d().includes(t.toLowerCase(),"CUSTOM_AUTHENTICATION_REQUIRED".toLowerCase())){var r=window.location.href,a=window.btoa(unescape(encodeURIComponent(r))),s="?responseUrl=".concat(a),o=t.match("{(.*)}")?t.match("{(.*)}")[1]:"";window.location.href="".concat(window.location.origin,"/oauth_api/ssoAccessToken/").concat(o).concat(s)}else{if(d().includes(t.toLowerCase(),"STRICT_SESSION_REQUIRED".toLowerCase()))return pn();U.Z.captureException(e),k.Z.serverUnavailable(t)}}))}(e)})),Vt};function gn(e){var t=e?"scaledown":"scaleup",n="press this button to start full screen mode to return back press Esc";return e&&(n="press this button to stop full screen mode"),l()(Xt({iconName:t,ariaLabel:n}))}function vn(e){m.ZP.getFullscreenElement()?e.empty().append(gn(!0)):e.empty().append(gn(!1))}function bn(){i.Z.currentProject&&i.Z.currentProject.getFile(".settings").then((function(e){v.Z.project(e)})).catch((function(){return v.Z.project()}))}function yn(){return _n.isClosing=!0,M.Z.saveAllAndWait().then((function(){wt.remove(),tn.remove(),l()("div.ac").hideFProgress(),_n.isClosing=!1,_n.isClosed=!0,an&&(y.Z.unsubscribe(an),an=null),function(){function e(){wt.remove(),tn.remove()}_n.isFullScreen&&en.leaveFullscreen(),_.ZP.hide(),i.Z.currentProject&&(i.Z.currentProject.unsubscribeNS(),en.projectClosed(i.Z.currentProject)),k.Z.hideCritical(),nn.show(),v.Z.project(""),document.title="Codio",d().defer((function(){en.ideClosed(),i.Z.currentProject=null,i.Z.collaborationDriverId=null})),rn.hasClass("in")&&l().support.transition?rn.one(l().support.transition.end,e):e(),rn.removeClass("in"),l().support.transition&&!nn.hasClass("in")&&(nn.one(l().support.transition.end,(function(){nn.data("wait",!1)})),nn.data("wait",!0)),nn.addClass("in")}()}))}function wn(e){var t=i.Z.currentProject.eduStartedAssignmentInfo,n=t&&t.started.completed;if(!(n&&n.completed)&&e){var r=["Deadline "+e.id+" has been reached. This deadline carries ","a penalty of "+e.percent+"%."];k.Z.info(e.message?e.message:r.join(""))}}var _n={generate:function(e){var t=e.project;if(t){var n=t.split(":");n[0]=n[0].toLowerCase(),e.project=n.join(":")}var i=e.username;return i&&(i=i.toLowerCase(),e.username=i),i+"/"+t},open:cn,panels:wt,enter:function(e){var t;_n.isClosed=!1;var n=i.Z.router.getQueryString();d().isUndefined(n)||(t=A.parseQuery(n)),e=e.params,mn.bind(null,e.username,e.project,t)()},isClosed:!0,isClosing:!1,isFullScreen:!1,exit:yn,extension:{enter:function(e){if(!_n.isClosed){var t=e.params.path||"",n=e.params.extension;Vt.then((function(){d().delay((function(){d().isUndefined(n)||cn(n,t)}))}))}},exit:function(e){},generate:function(e){return d().filter([e.extension,e.path]).join("/")}},isDirty:function(){var e=d().flatten(d().map(wt.allPanels(),(function(e){return d().map(e.tabs.children,"dirty")})));return Promise.all(e).then((function(e){return d().some(e)}))}},kn=d().debounce(bn,400);y.Z.subscribe("file:change:.settings",(function(){kn()})),y.Z.subscribe("editor:save:.settings",bn),y.Z.subscribe("item:created:.settings",kn),y.Z.subscribe("item:moved:.settings",kn),y.Z.subscribe("item:deleted:.settings",(function(){var e=D.Z.getFile(".settings");e&&e.close(!0),kn()})),y.Z.subscribe("item:moved:.settings",kn),y.Z.subscribe("item:moved:#file:.settings",kn),y.Z.subscribe("project:preferencesUpdated:#projectId",(function(e,t){i.Z.currentProject&&i.Z.currentProject.guid===e.projectId&&d().includes(t,"name")&&(document.title="Codio - "+i.Z.currentProject.name)})),y.Z.subscribe("project:penaltyUpdated",(function(e,t){wn(t)})),v.Z.hotkey.plugin("ide",n(94375)),y.Z.subscribe("command:project:close",(function(){sn||m.ZP.goBackOrLocation("/"+i.Z.currentUser.name()),sn=!1})),_n.skipNextProjectCloseEvent=function(){return sn=!0},_n.showEnterStrictSessionWarning=pn,i.Z.ide=_n,_n.helpers=zt,y.Z.subscribe("ide:fullscreen:#status",(function(e){_n.isFullScreen="enter"===e.status})),v.Z.plugin("ide",n(53064));const Pn=_n;n(88541);var Zn=n(15671),xn=n(43144),Cn=n(60136),Sn=n(82963),En=n(61120),In=n(84204);const Tn=function(){var e=v.Z.get("code-beautifier"),t=v.Z.get("editor");return e.indent_char=t.use_tabs?"\t":" ",e.indent_size=t.tab_size,e};var jn=function(){function e(){(0,Zn.Z)(this,e),this._currentEditor=null}return(0,xn.Z)(e,[{key:"_getEditor",value:function(){var e=i.Z.currentEditor;return null!==e?e.editor:null}},{key:"processHotkey",value:function(){var e=this,t=this._getEditor();if(null===t)return!1;var n,i,r,a=t.getModel(),s=t.getSelections().filter((function(e){return!e.isEmpty()})),o=0!==s.length;o||(n=t.getPosition(),i=t.getScrollLeft(),r=t.getScrollTop(),s.push(a.getFullModelRange()));var c=s.map((function(t){var n=a.getValueInRange(t);return{range:t,text:e.format(n,Tn())}}));return t.executeEdits(c),o||(t.setPosition(n),t.setScrollPosition(r,i)),!0}},{key:"format",value:function(e){return e}}]),e}();const An=jn;function On(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,En.Z)(e);if(t){var r=(0,En.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,Sn.Z)(this,n)}}var Dn={js:In.js,json:In.js,html:In.html,htm:In.html,css:In.css},Nn=function(e){(0,Cn.Z)(n,e);var t=On(n);function n(e){var i;if((0,Zn.Z)(this,n),!Object.prototype.hasOwnProperty.call(Dn,e))throw e+" Not Supported";return(i=t.call(this))._type=e,i}return(0,xn.Z)(n,[{key:"format",value:function(e,t){return Dn[this._type](e,t)}}]),n}(An);const Mn=Nn;var Fn=["js","html","css","json","htm"],Rn="menu-item-beautify";function Ln(e,t){_.ZP.disableItem(Rn);var n=t.filename;if(n){var i=m.ZP.path.getFileExtension(n);d().includes(Fn,i)&&_.ZP.enableItem(Rn)}}y.Z.subscribe("tab:activated",Ln),y.Z.subscribe("tab:focus",Ln),y.Z.subscribe("command:code-beautifier:key_format_code",(function(e,t){if(i.Z.currentProject&&!i.Z.currentProject.readOnly){var n=!1;if(i.Z.currentEditor){var r=i.Z.currentEditor.filename;if(void 0!==i.Z.currentEditor.filename){var a=m.ZP.path.getFileExtension(r);d().includes(Fn,a)&&(n=new Mn(a).processHotkey())}}!1===n&&(t.pass=!0)}})),y.Z.subscribe("command:code-beautifier:key_toggle:#param",(function(e){i.Z.currentUser.isAnonymous()||v.Z.hotkey.execute("settings","update:user",{plugin:"code-beautifier",key:e.param,value:!v.Z.get("code-beautifier")[e.param]})}));const Un={format:function(e,t){return new Mn(e).format(t)},AutoFormat:An},Bn=JSON.parse('{"name":"code-beautifier","description":"Autoformat for css, html, javascript"}'),qn=JSON.parse('{"indent_level":{"default":0,"type":"int","desc":"Indent level"},"indent_with_tabs":{"default":false,"type":"boolean","desc":"Indent with tabs. Overrides indent char and indent size."},"navigate_within_soft_tabs":{"default":null,"type":"boolean","desc":"Navigate within soft tabs."},"preserve_newlines":{"default":false,"type":"boolean","desc":"Preserve line-breaks."},"max_preserve_newlines":{"default":5,"type":"int","desc":"Number of line-breaks to be preserved in one chunk."},"jslint_happy":{"default":false,"type":"boolean","desc":"Enable jslint-strict mode."},"brace_style":{"default":"collapse","type":"list","values":{"collapse":"collapse","expand":"expand","end-expand":"end-expand"},"desc":"Brace style."},"keep_array_indentation":{"default":false,"type":"boolean","desc":"Preserve array indentation."},"keep_function_indentation":{"default":false,"type":"boolean","desc":"Preserve function indentation."},"space_before_conditional":{"default":false,"type":"boolean","desc":"Space before conditional."},"break_chained_methods":{"default":false,"type":"boolean","desc":"Break chained method calls across subsequent lines."},"eval_code":{"default":false,"type":"boolean","desc":"Indent eval code."},"unescape_strings":{"default":false,"type":"boolean","desc":"Decode printable characters encoded in XNN notation."},"wrap_line_length":{"default":0,"type":"int","desc":"Wrap lines at next opportunity after N characters."},"indent-scripts":{"default":"normal","type":"list","values":{"keep":"keep","separate":"separate","normal":"normal"},"desc":"Indent scripts."}}'),Hn=JSON.parse('{"key_format_code":{"key":{"win":"Ctrl+Shift+B","mac":"Cmd+Shift+B"},"desc":"Format the code."},"key_toggle:jslint_happy":{"desc":"Strict linting: Toggle."},"key_toggle:keep_array_indentation":{"desc":"Preserve array indentation: Toggle."},"key_toggle:keep_function_indentation":{"desc":"Preserve function indentation: Toggle."},"key_toggle:space_before_conditional":{"desc":"Space before conditional: Toggle."},"key_toggle:break_chained_methods":{"desc":"Break chained methods calls across lines: Toggle."},"key_toggle:eval_code":{"desc":"Indent eval code: Toggle."},"key_toggle:unescape_strings":{"desc":"Decode printable characters in XNN notation: Toggle."}}');var Wn={};Wn.info=Bn,Wn.settings=qn,Wn.hotkeys=Hn,Wn.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Un);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(Wn);const zn=JSON.parse('{"name":"codio-filetree","description":"Filetree viewer","codio":{"global":true,"noFullscreen":true,"noFile":true,"urls":"filetree","title":"Filetree"}}'),Gn=JSON.parse('{"tree_items_limit":{"type":"int","default":150,"desc":"Maximum items in tree level"},"show_dot_files":{"type":"boolean","default":true,"desc":"Ability to show(hide) dotfiles, exclude codio specific"}}');var Vn=n(73687);var Kn=y.Z.create(n(43380)),Yn=f().compile('<div class="project-info" xmlns="http://www.w3.org/1999/html">\n  <div class="title">\n    <div class="owner-info">\n      <a\n        href="/{{project.owner.name}}"\n        class="owner"\n        data-target="dashboard"\n      >\n        {{project.owner.name}}<span class="sr-only"> dashboard</span>\n      </a>\n      <span class="ss-icon{{#unless project.readOnly}} hide{{/unless}} readonly-status" title="This project is read only.">writingdisabled</span>\n    </div>\n    <h4 class="name">{{project.name}}</h4>\n  </div>\n\n  <div class="icons">\n    <div class="icons-container">\n      <span class="{{#if project.readOnly}}hide{{/if}} re-synchronise icon-container">\n        <button\n          class="refresh-button info-command"\n          aria-label="Re-synchronise the tree"\n          title="Re-synchronise the tree"\n          data-cmd="syncStructure"\n        >\n          <span class="iconify" data-icon="@codio:mdi:autorenew"></span>\n        </button>\n      </span>\n      <span class="{{#unless project.isAdmin}}hide{{/unless}} open-terminal icon-container">\n        <button\n          class="terminal info-command"\n          title="Open Terminal"\n          data-cmd="openTerminal"\n          aria-label="Open Terminal"\n        >\n          <span class="iconify" data-icon="@codio:mdi:console"></span>\n        </button>\n      </span>\n      <span class="open-guides {{#if hideGuidesIcon}}hide{{/if}} icon-container">\n        <button\n          class="guides info-command"\n          title="Open Guides {{#if onlyPlayGuides}}Player{{else}}Editor{{/if}}"\n          data-cmd="{{#if onlyPlayGuides}}openGuidesPlayer{{else}}openGuidesEditor{{/if}}"\n          aria-label="Open Guides {{#if onlyPlayGuides}}Player{{else}}Editor{{/if}}"\n        >\n          {{#if onlyPlayGuides}}\n            <span class="iconify" data-icon="@codio:mdi:play"></span>\n          {{else}}\n            <span class="iconify" data-icon="@codio:mdi:pencil-outline"></span>\n          {{/if}}\n        </button>\n      </span>\n      {{#if project.isFork}}\n      <span class="icon-container">\n        <button\n          class="info-command"\n          data-cmd="openParent"\n          {{#if project.parent.ownerId}}\n          title="Copied from {{project.parent.owner}}/{{project.parent.name}}"\n          {{/if}}\n          aria-label="Go to copy source"\n        >\n          <span class="iconify" data-rotate="90deg" data-icon="@codio:mdi:directions-fork"></span>\n        </button>\n      </span>\n      {{/if}}\n    </div>\n  </div>\n\n</div>\n'),Jn=function(e,t){this.container=e,this.project=t,this.fragment=null,this.appended=!1},Qn=Jn.prototype;Qn.render=function(){var e=this.project,t=e.eduStartedAssignmentInfo,n=Vn.ZP.isGuidesExist(),i=t||e.readOnly;this.fragment=l()(Yn({project:this.project,hideGuidesIcon:i&&!n,onlyPlayGuides:i},{allowProtoMethodsByDefault:!0,allowProtoPropertiesByDefault:!0})),this.appended||(Xn(this.fragment),this.container.prepend(this.fragment),this.appended=!0)},Qn.remove=function(){this.fragment.remove(),this.appended=!1};var Xn=function(e){var t=e.find(".info-command");y.Z.on(t,"click",(function(e){e.preventDefault();var t=l()(e.target).closest(".info-command").data("cmd");t&&t.length>0&&Kn[t]()}))};function $n(e){var t=i.Z.currentProject;"name"===e&&l()(".project-info .name").attr("title",t.name).text(t.name)}y.Z.subscribe("project:preferencesUpdated:#projectId",(function(e,t){i.Z.currentProject&&i.Z.currentProject.guid===e.projectId&&d().forEach(t,$n)})),y.Z.subscribe("project:permissionsUpdated:#projectId",(function(){if(i.Z.currentProject){var e=l()(".project-info .readonly-status"),t=l()(".project-info .re-synchronise");i.Z.currentProject.readOnly?(e.removeClass("hide"),t.addClass("hide")):(e.addClass("hide"),t.removeClass("hide"));var n=l()(".project-info .open-terminal");i.Z.currentProject.isAdmin?n.removeClass("hide"):n.addClass("hide")}}));var ei,ti;ei=Ne.ZP.GUIDES_FOLDER,ti=function(){var e=i.Z.currentProject;if(e){var t=e.eduStartedAssignmentInfo,n=Vn.ZP.isGuidesExist(),r=t||e.readOnly,a=l()(".project-info .open-guides");r&&!n?a.addClass("hide"):a.removeClass("hide")}},d().each(["item:created:","item:deleted:"],(function(e){y.Z.subscribe(e+ei,ti)}));const ni=Jn;var ii=f().compile('<div id="tree-bar">\n  <div id="tree-bar-inner"></div>\n  <div id="tree-progress"></div>\n</div>\n'),ri=function(e,t){this.container=e,this.project=t,this.fragment=null,this.appended=!1;var n=this;this.changeHandler=y.Z.subscribe("project:permissionsUpdated:#projectId",(function(){n.remove(),n._isReadOnly()||n.render()}))},ai=ri.prototype;ai._isReadOnly=function(){if(!i.Z.currentProject)return!0;var e=i.Z.currentProject.access.control;return!("OWNER"===e||"WRITE_FILES"===e||"ADMIN"===e)},ai.close=function(){y.Z.unsubscribe(this.changeHandler),this.remove()},ai.render=function(){this.fragment=l()(ii(this.project)),this.appended||this._isReadOnly()||(this.container.append(this.fragment),this.appended=!0)},ai.remove=function(){this.fragment&&this.fragment.remove(),this.appended=!1};const si=ri;var oi=n(70243),ci=n(6229),li=y.Z.create(n(43380)),ui={},di=function(e,t,n){var i=oi.Z.getTreeNodeByPath(e,t);i&&e.set_icon(i.id,n)};function pi(e,t){li.iconClick({plugin:e},t)}function fi(e,t){d().forOwn(t,(function(t,n){d().forOwn(t,(function(t,i){di(e,i,t.iconClass,pi.bind(null,n,t))}))}))}const hi={setIcons:function(e,t,n){!0!==n&&d().isEqual(t,ui)||(!function(e){d().forOwn(ui,(function(t){d().forOwn(t,(function(t,n){di(e,n,"")}))}))}(e),fi(e,t),ui=d().cloneDeep(t))},setIcon:di,clean:function(){ui={}},updateNodeIconTitle:function(e,t,n){var i=oi.Z.getTreeNodeByPath(e,t);e.get_node(i.id,!0).find("#".concat(i.id,"_anchor")).attr("title",n)}};var mi=null,gi=[];function vi(e){mi=e}var bi={};var yi=d().debounce((function(e){if(e&&vi(e),mi&&mi.element){var t=gi;gi=[],d()(t).sortBy("seq").forEach((function(e){"add"===e.type?function(e,t,n){bi[e]=bi[e]||{show:[],hide:[]},d().isUndefined(n)?bi[e].base=t:(d().isArray(n)||(n=[n]),t="show"===t?"show":"hide",bi[e][t]=d().union(bi[e][t],n))}(e.plugin,e.filter,e.path):function(e,t,n){d().isUndefined(t)&&d().isUndefined(n)?delete bi[e]:d().remove(bi[e],{type:t,path:n})}(e.plugin,e.filter,e.path)}));var n,i=(n=d().some(bi,{base:"hide"}),d().some(bi,{base:"show"})||!n?"show":"hide"),r=function(e){var t=_i(e),n=d().union.apply(d(),d().map(bi,t)),i=d().union.apply(d(),d().map(bi,e));return i.unshift(n),d().without.apply(d(),i)}(i);!function(e,t,n){var i=e.get_json(),r=_i(t),a=v.Z.get("codio-filetree").show_dot_files;function s(e,i,o){d().each(e.children,(function(e){var c,l=i+(""!==i?"/":"")+e.text,u=""===i&&d().includes(Pi,e.text);if(a||!d().startsWith(e.text,".")||u)if(d().isUndefined(o)){var p=d().some(n,(c=l,function(e){return e===c||d().startsWith(e,c+"/")})),f=p?r:t;ki(e,f),s(e,l,d().includes(n,l)?f:void 0)}else ki(e,o),s(e,l,o);else ki(e,"hide"),s(e,l,o)}))}d().isArray(i)&&i.length>0&&s(i[0],"")}(mi,i,r)}}),150);function wi(e,t){t.type=e,gi.push(t),yi()}function _i(e){return"show"===e?"hide":"show"}function ki(e,t){"show"!==t!==!!e.state.hidden&&mi[t+"_node"](e.id)}var Pi=[".settings",".codio",".codio-jupyter",".guides",".authorunitignore",".authorassignmentignore",".unitignore",".assignmentignore",".codio-menu",".codioignore",".codioJUnit"];const Zi={setTree:vi,refresh:yi,open:function(e,t){var n=e.path;t&&t.path&&(n=t.path),mi&&function(e,t){var n=e;d().isArray(e)||(n=e.split(";"));d().each(n,(function(e){0!==(e=d().trim(e)).length&&t&&t(e)}))}(n,(function(e){oi.Z.openNodesByPaths(mi,e)}))},close,addVisibilityFilter:wi.bind(null,"add"),removeVisibilityFilter:wi.bind(null,"remove")};var xi,Ci=n(11533),Si=n.n(Ci),Ei=y.Z.create(n(43380)),Ii=Si().create(),Ti=[],ji=[],Ai=0,Oi=null,Di={},Ni=null,Mi=null;function Fi(e){return function(t,n){if(!oi.Z.getTreeNodeByPath(e,t.path)){var i=m.ZP.path.parse(t.path),r=oi.Z.getTreeNodeByPath(e,i.dir),a=d().isNumber(n),s={text:i.name,type:a?ci.Z.TYPE.FILE:ci.Z.TYPE.DIR};a||(s.children=Ri(n),s.state={opened:!1}),e.create_node(r,s),e.settings.dnd.blocker&&(Ai>=0&&Ai++,d().delay((function(){Ai>0&&Ai--,0===Ai&&(e.get_container()&&e.get_container().unblock(),e.settings.dnd.blocker=!1)}),400)),Zi.refresh(e)}}}function Ri(e){var t=[],n=[];return d().each(e,(function(e,i){var r=d().isNumber(e),a={text:i.replace(/．/g,"."),type:r?ci.Z.TYPE.FILE:ci.Z.TYPE.DIR};r?t.push(a):(a.children=Ri(e),a.state={opened:!1},n.push(a))})),d().union(n,t)}function Li(e){return function(t){var n=oi.Z.getTreeNodeByPath(e,t.path);e.delete_node([n])}}var Ui=0;function Bi(e){return function(t,n){var r=oi.Z.getTreeNodeByPath(e,t.from),a=oi.Z.getParentPath(t.to),s=oi.Z.getTreeNodeByPath(e,a);if(r&&s&&s.state.loaded)r.parent===s.id?(e.rename_node(r,d().last(t.to.split("/"))),oi.Z.onSelectionChanged({instance:e,node:r})):(n&&(r.text=m.ZP.realName(n)),e.move_node(r,s,0,(function(t){n&&e.rename_node(t,m.ZP.realName(n))})));else if(s&&s.state.loaded&&i.Z.currentProject.exists(t.to)){var o=i.Z.currentProject.getFileInfo(t.to);Fi(e)({path:t.to},"file"===o.type?0:{})}else r&&Li(e)({path:t.from});!function(){for(var t=e.get_state().core.open,n=0;n<t.length;n++){var i=e.get_node(t[n]);0===i.children.length&&i.state&&(e._model.data[i.id].children.length=0,e._model.data[i.id].state.loaded=!0,e._model.data[i.id].state.opened=!1)}}(),e.settings.dnd.blocker&&(Ui>=0&&Ui++,d().delay((function(){Ui>0&&Ui--,0===Ui&&(e.get_container()&&e.get_container().unblock(),e.settings.dnd.blocker=!1,Zi.refresh(e))}),400)),Zi.refresh(e)}}function qi(e){Ni=oi.Z.getOpenedNodesPaths(e,Di),Mi=oi.Z.getSelectedNodesPaths(e),hi.clean();var t=!1;d().each(Di,(function(n,r){var a="/"===r,s=oi.Z.getLevelByPath(i.Z.currentProject,a?"":r);if(s){if(Ii.diff(n,s))if(a)t=!0;else{var o=oi.Z.getTreeNodeByPath(e,a?"":r);o&&e.refresh_node(o)}}else delete Di[r]})),t&&e.refresh(!0),d().defer((function(){Ei.redrawn(),Zi.refresh(e)}))}function Hi(e){var t=ji;t.length>20?Oi?Oi():qi(e):d().each(t,(function(t){switch(t.action){case"insert":Fi(e).apply(null,t.args);break;case"remove":Li(e).apply(null,t.args);break;case"move":Bi(e).apply(null,t.args)}})),ji=[]}function Wi(){d().forEach(Ti,(function(e){y.Z.unsubscribe(e)})),xi&&(xi.cancel(),xi=null),Oi&&(Oi.cancel(),Oi=null),Ti=[]}const zi={init:function(e){Wi();var t=d().bind(Ti.push,Ti);xi=d().debounce(Hi.bind(this,e),150,{maxWait:6e4}),t(y.Z.subscribe("item:created:#path",(function(){ji.push({action:"insert",args:arguments}),xi&&xi()}))),t(y.Z.subscribe("item:deleted:#path",(function(){ji.push({action:"remove",args:arguments}),xi&&xi()}))),t(y.Z.subscribe("item:moved:#from:#to",(function(){ji.push({action:"move",args:arguments}),xi&&xi()}))),t(y.Z.subscribe("settings:changed",(function(){Zi.refresh(e)}))),Oi=d().debounce(qi.bind(this,e),250,{maxWait:6e4}),t(y.Z.subscribe("project:fileStructure:updated",Oi)),t(y.Z.subscribe("share:redraw",Oi)),e.settings.core.data=function(t,n){var r=oi.Z.getPath(e,t),a=oi.Z.getTreeLevelByPath(i.Z.currentProject,r,Ni,Mi),s=oi.Z.getLevelByPath(i.Z.currentProject,r);d().each(s,(function(e){e.dir&&(Di[(r?r+"/":"")+e.name]=!1)})),Di[r||"/"]=s,n.call(this,a)},e.refresh()},clean:Wi};const Gi=function(){this.draw=function(e){var t=l()("<span/>");return t.text(e.name),t}};function Vi(e){var t=l()("<img>"),n=new FileReader;return n.onload=function(e){t.attr("src",e.target.result)},n.readAsDataURL(e),t}const Ki=function(){this.draw=Vi};function Yi(e){var t=l()("<span/>");return t.text("Dir: "+e.name),t}const Ji=function(){this.draw=Yi};var Qi=n(54565),Xi=n(34766),$i=n.n(Xi),er={},tr=function(){var e=(0,r.Z)(o().mark((function e(t){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(er[t]){e.next=6;break}if(n=Qi.Z.get("s3options")){e.next=4;break}throw new Error("S3 configuration not found");case 4:i=n[t],er[t]=new($i())({apiVersion:"2006-03-01",params:{Bucket:i.upload_bucket},accessKeyId:i.key,secretAccessKey:i.secret,region:i.region});case 6:return e.abrupt("return",er[t]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function nr(e,t,n,i){return ir.apply(this,arguments)}function ir(){return ir=(0,r.Z)(o().mark((function e(t,n,i,r){var a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tr(t);case 2:if(a=e.sent,n){e.next=5;break}return e.abrupt("return",null);case 5:return s=a.upload({Key:i,Body:n},(function(){s=null})),r&&s.on("httpUploadProgress",(function(e){var t=Math.round(e.loaded/e.total*100);r(t)})),e.abrupt("return",{promise:s.promise(),abort:function(){s&&s.abort()}});case 8:case"end":return e.stop()}}),e)}))),ir.apply(this,arguments)}var rr,ar={},sr=f().compile('<div class="file-item">\r\n    <span class="delete" title="Remove file" aria-label="Remove file">\r\n        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\r\n    </span>\r\n    <div class="progress-bar"></div>\r\n</div>\r\n')(),or=f().compile('<div class="multi-upload dnd-handler">\r\n    <div class="not-supported">Sorry, but uploading requires the HTML5 File API. These require a modern browser. Please ensure that you are using one of the latest browsers.</div>\r\n    <div class="workarea"></div>\r\n    <div class="dnd">\r\n        <h4 class="drop-title">Drag and drop files here or</h4>\r\n        <div class="file-selection">\r\n            <input class="file-select visuallyhidden" type="file" multiple tabindex="-1">\r\n            <button class="btn file-select-btn">browse for files...</button>\r\n        </div>\r\n        {{#if dirUploadSupport}}\r\n        <div class="folder-selection">\r\n            <input class="folder-select visuallyhidden" type="file" webkitdirectory directory tabindex="-1">\r\n            <button class="btn folder-select-btn">browse for files from folder...</button>\r\n        </div>\r\n        {{/if}}\r\n    </div>\r\n</div>\r\n')({dirUploadSupport:m.ZP.isDirectoryUploadSupport()}),cr="defaultUpload",lr="loading",ur="loaded",dr="error",pr="abort",fr=!(!window.File||!window.FileReader);function hr(){if(this.workarea){var e=this.workarea.children(),t=0;e.each((function(e,n){l()(n).data("state")!==lr&&t++})),t>=e.length&&kr.call(this)}}function mr(e){var t=!1;return d().each(this.preventUploadList,(function(n){0===e.indexOf(n)&&(t=!0)})),t}function gr(e){if(e.item.data("path",e.path),!e.isDirectory&&!mr.call(this,e.path+"/"+e.name)){var t=e.item.data("item");if(t){var n=t.size||t.fileSize;if(void 0!==n&&n>Qi.Z.get("fileUploadLimit")){var i={file:t.name,message:"The file is too big"};return br.call(this,dr,i,e.item),void Mr.call(this,e.path,t.name)}var r=e.name,a=m.ZP.path.getFileExtension(r),s=e.path,o={name:r,extension:a,path:s,state:lr};yr.call(this,e.item,t,o,s).catch((function(e){return k.Z.error(e.message)}))}}}function vr(e,t,n){n.data("state")!==pr&&n.data("state",e),n.data("msg",t);var i=n.data("lastState"),r="state-"+e;i&&n.removeClass(i),n.addClass(r),n.data("lastState",r)}function br(e,t,n){vr(e,t,n),hr.call(this)}function yr(e,t,n,i){return wr.apply(this,arguments)}function wr(){return wr=(0,r.Z)(o().mark((function e(t,n,r,a){var s,c,l,u,d,p,f,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=function(e){l(),e=e&&e.message?e.message:e;var n={file:r.name,message:e};br.call(s,dr,n,t),Fr.call(s,{path:a,name:r.name})},p=function(e,t){return i.Z.currentProject.uploadFromS3File(m.ZP.path.makePath(a,r.name),e,t)},u=function(e){c.style.width=e+"%",c.innerHTML=parseInt(e,10)+"%"},l=function(){var e=t.data();delete e.abort,t.data(e)},s=this,c=t.find(".progress-bar")[0],d="".concat(m.ZP.GUID(),".tmpfile"),e.next=9,nr("upload",n,d,(function(e){u(e-e/10>>0)}));case 9:h=e.sent,r.abort=h.abort,t.data(r),h.promise.then((function(e){u(90),p(e.Bucket,e.Key).then((function(e){e?(l(),u(100),_r.call(s,a,r),br.call(s,ur,void 0,t)):f("Unexpected error")})).catch((function(e){var t=e.message;return f(t)}))})).catch((function(e){return f(e)}));case 13:case"end":return e.stop()}}),e,this)}))),wr.apply(this,arguments)}function _r(e,t){var n=m.ZP.path.makePath(e,t.name);this.params&&this.params.onFileUploaded&&this.params.onFileUploaded(n,{name:t.name,extension:t.extension})}function kr(){var e=this.workarea.children(),t=!1,n={},i="";if(e.each((function(e,i){var r=l()(i).data("state"),a=l()(i).data("error-shown");if(r===dr&&!a){var s=l()(i).data("msg");s&&(t=!0,n[s.message]?n[s.message]=n[s.message]+"<div>"+s.file+"</div>":n[s.message]="<div>"+s.file+"</div>"),l()(i).data("error-shown",!0)}})),t){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i+=r+"<br/><div>"+n[r]+"</div><br/>");k.Z.error(i)}this.params&&this.params.onFilesUploaded&&this.params.onFilesUploaded()}function Pr(e){for(var t=m.ZP.promise.deferred(),n=!0,i=function(){var i=(0,r.Z)(o().mark((function i(){var r,a,s;return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n){i.next=2;break}return i.abrupt("return",Promise.reject(new Error("Upload prepare failed")));case 2:r=!0,a=0;case 4:if(!(a<e.length)){i.next=12;break}return i.next=7,m.ZP.promise.getState(e[a]);case 7:s=i.sent,r=r&&s===m.ZP.promise.STATES.FULFILLED;case 9:a++,i.next=4;break;case 12:r&&t.resolve();case 13:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}(),a=function(e){n=!1,t.reject(e)},s=0;s<e.length;s++)e[s].then(i).catch(a);return t.promise}function Zr(e){for(var t=[],n=[],i=0;i<e.length;i++)n.push(e[i]),t.push(n.join("/"));return t}function xr(e){var t,n,i=this,r=i.workarea;i.buffItems=l()("<div/>");var a="",s=[];for(t=0;t<e.length;t++){if((n=e[t]).webkitRelativePath)for(var o=Zr((a=n.webkitRelativePath.replace(/\/[^\/]+$/,"")).split("/")),c=0;c<o.length;c++){var u=o[c];if(!d().includes(s,u)){s.push(u);var p=u.split("/"),f={name:p[p.length-1],isDirectory:!0};p.splice(p.length-1),jr.call(i,f,p.join("/"))}}""===n.type&&0===n.size||4096===n.size&&""===n.type?n.name:Ir.call(i,n,a)}r.append(i.buffItems.children());var h=[];Dr.call(i,i.queue,h,(function(){for(var e=0,t=h.length;e<t;e++)gr.call(i,h[e])}))}function Cr(){this.workarea.block()}function Sr(){this.workarea.unblock()}function Er(e){var t,n,i,r=this;Cr.call(r);var a=r.workarea;r.buffItems=l()("<div/>");var s=[],o={dirArray:[]};for(t=0;t<e.length;t++)if(n=e[t],!d().isUndefined(n.webkitGetAsEntry)){if(null===(i=n.webkitGetAsEntry()))continue;i.isFile?s.push(Ir.call(r,n.getAsFile(),"")):i.isDirectory&&s.push(Or.call(r,i,"",o))}Pr.call(r,s).then((function(){a.append(r.buffItems.children()),Sr.call(r);var e=[];Dr.call(r,r.queue,e,(function(){for(var t=0,n=e.length;t<n;t++)gr.call(r,e[t])}))})).catch((function(){Sr.call(r)}))}function Ir(e,t){return Tr.apply(this,arguments)}function Tr(){return Tr=(0,r.Z)(o().mark((function e(t,n){var i,r,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this,e.t0=o().keys(ar);case 2:if((e.t1=e.t0()).done){e.next=9;break}if((s=e.t1.value)===cr||!t.type.match(s)){e.next=7;break}return r=ar[s].draw(t),e.abrupt("break",9);case 7:e.next=2;break;case 9:r||(r=ar[cr].draw(t)),(a=l()(sr)).data("item",t),a.data("path",n),r.addClass("preview"),r.attr("title",t.name),a.append(r),i.buffItems.append(a),i.queue.push(a),vr.call(i,lr,void 0,a);case 19:case"end":return e.stop()}}),e,this)}))),Tr.apply(this,arguments)}function jr(e,t){var n,i,r=this;n=ar.directory.draw(e),(i=l()(sr)).data("item",e),i.data("path",t),i.data("name",e.name),n.addClass("preview"),n.attr("title","Dir: "+e.name),i.append(n),r.buffItems.append(i),r.queue.push(i),vr.call(r,ur,void 0,i)}function Ar(e,t,n){var i=m.ZP.promise.deferred(),r=this,a=function(){i.resolve()},s=function(e){i.reject(e)};if(e.length>0){var o=e[0];e.shift(),o.isFile?o.file((function(i){Ir.call(r,i,t),Ar.call(r,e,t,n).then(a).catch(s)})):o.isDirectory&&Or.call(r,o,t,n).then((function(){Ar.call(r,e,t,n).then(a).catch(s)})).catch(s)}else i.resolve();return i.promise}function Or(e,t,n){for(var i=m.ZP.promise.deferred(),r=e.createReader(),a=this,s=Zr((t+"/"+e.name).replace(/^\//,"").split("/")),o=0;o<s.length;o++){var c=s[o];if(!d().includes(n.dirArray,c)){n.dirArray.push(c);var l=c.split("/"),u={name:l[l.length-1],isDirectory:!0};l.splice(l.length-1),jr.call(a,u,l.join("/"))}}return r.readEntries((function(r){0===r.length?i.resolve():Ar.call(a,r,(t+"/"+e.name).replace(/^\//,""),n).then((function(){i.resolve()})).catch((function(e){i.reject(e)}))}),(function(){})),i.promise}function Dr(e,t,n){if(0===e.length)n&&n();else{var i=this,r=function(){Dr.call(i,e,t,n)},a=e.shift(),s=a.data("item");if(s){var o=a.data("path"),c=s.name,l=m.ZP.path.getFileExtension(s.name),u={name:c,extension:l,state:lr,isDirectory:s.isDirectory,path:o};this.params&&this.params.onFilePrepareUpload(u,(function(e){t.push({item:a,path:e,name:c,isDirectory:s.isDirectory}),r()}),(function(e){var t=e&&{message:e,file:c};br.call(i,dr,t,a),r()}))}else r()}}function Nr(){var e=this,t=this,n=this.dndArea;function i(e){var t=e.clone(!0,!1);e.replaceWith(t)}this.onDropHandler=l().proxy(this.onDrop,this),this.onDragOverHandler=l().proxy(this.onDragOver,this),y.Z.on(n,"drop",this.onDropHandler),y.Z.on(n,"dragover",this.onDragOverHandler),y.Z.on(this.place,"click",".file-select-btn",(function(){e.place.find(".file-select").click()})),y.Z.on(this.place,"click",".folder-select-btn",(function(){e.place.find(".folder-select").click()})),y.Z.on(this.place,"change",".file-select",(function(){xr.call(t,this.files),i(l()(this))})),m.ZP.isDirectoryUploadSupport()&&y.Z.on(this.place,"change",".folder-select",(function(){xr.call(t,this.files),i(l()(this))}))}function Mr(e,t){var n=m.ZP.path.makePath(e,t);return this.params&&this.params.onFileRemoved?this.params.onFileRemoved(n):Promise.reject(new Error("No file removed callback"))}function Fr(e){var t=this;t.deleteQueue.push(e),t.activeDeletion||(t.activeDeletion=Rr.call(t),t.activeDeletion.then((function(){t.activeDeletion=null})).catch((function(){t.activeDeletion=null})))}function Rr(){var e=this,t=m.ZP.promise.deferred(),n=function(){t.resolve()},i=function(e){t.reject(e)};if(this.deleteQueue.length>0){var r=this.deleteQueue[0];this.deleteQueue.shift(),Mr.call(e,r.path,r.name).then((function(){Rr.call(e,r).then(n).catch(i)})).catch(i)}else t.resolve();return t.promise}function Lr(e,t){this.params=t||{};var n=this;this.queue=[],this.deleteQueue=[],this.activeDeletion=null;var i=this.place=l()(or);e.append(i);var r=this.workarea=i.find(".workarea");if(!fr)return r.hide(),i.find(".dnd").hide(),void i.find(".not-supported").show();this.dndArea=this.params.documentBind?l()(document):i.find(".dnd"),this.preventUploadList={},y.Z.bind(r,"click",(function(e){if(!(n.deleteQueue.length>0)){var t=l()(e.target);if(t.closest(".delete").length>0){var i=t.closest(".file-item");if(i.length>0){var a=i.data();a.abort&&a.abort();var s=a.path+"/"+a.name;if(s=s.replace(/^\//,""),i.remove(),a.state===ur){if(a.item&&a.item.isDirectory){var o=r.find(".file-item");n.preventUploadList[s]=s,d().each(o,(function(e){var t=l()(e),i=t.data();0===(i.path+"/").indexOf(s+"/")&&(i.abort&&i.abort(),t.remove(),i.state===ur&&i.item&&!i.item.isDirectory&&Fr.call(n,i))}))}Fr.call(n,a)}var c=n.activeDeletion;c||(c=Rr.call(n)),c.then((function(){n.deleteQueue.length=0,hr.call(n),n.preventUploadList[s]=void 0})).catch((function(){n.deleteQueue.length=0}))}}}})),Nr.call(this)}Lr.register=function(e,t){e===cr&&(rr=t),t.prototype=new rr,ar[e]=new t};var Ur=Lr.prototype;Ur.onDrop=function(e){e.stopPropagation(),e.preventDefault(),m.ZP.isDirectoryUploadSupport()?Er.call(this,e.originalEvent.dataTransfer.items):xr.call(this,e.originalEvent.dataTransfer.files)},Ur.processDataTransfer=function(e,t){m.ZP.isDirectoryUploadSupport()?Er.call(this,e,t):xr.call(this,e)},Ur.onDragOver=function(e){e.stopPropagation(),e.preventDefault()},Ur.destroy=function(){this.cancelUpload(),this.params=null,this.workarea=null,this.place&&this.place.remove(),this.place=null,y.Z.off(this.dndArea,"drop",this.onDropHandler),y.Z.off(this.dndArea,"dragover",this.onDragOverHandler),this.dndArea=null},Ur.cancelUpload=function(){this.workarea.children().each((function(e,t){var n=l()(t).data("xhr");n&&n.abort()}))},Lr.register(cr,Gi),Lr.register("image",Ki),Lr.register("directory",Ji);const Br=Lr;var qr,Hr=n(2774).fs;function Wr(e,t){if(qr=void 0,0!==t.length)if(t[0].type===Hr.FILE){var n=m.ZP.path.parse(t[0].path);qr=n.dir}else qr=t[0].path}function zr(e){e=void 0===e||e;var t=i.Z.currentProject;if(!t||t.readOnly)return null;if(!d().isUndefined(qr)&&t){var n=l()("<div/>"),r="Cancel all uploads and close",a=new Br(n,{documentBind:e,onFilePrepareUpload:function(e,n,i){o.preventClosing(!0),s.element.html(r);var a=e.path.length>0?"/"+e.path:"",c=qr+a;c=c.replace(/^\//,"");var l=Ut.validateItem(e.name,c);l?i(l):e.isDirectory?t.createFolder(e.name,c).then(d().bind(n,null,c)).catch((function(){i()})):d().bind(n,null,c)()},onFileUploaded:function(){},onFilesUploaded:function(){o.preventClosing(!1),s.element.html("Close")},onFileRemoved:function(e){return t.deleteItems([e])}}),s={title:"Close",onClick:function(){o.close(o.IDCANCEL)}},o=new R.Z({title:"Upload Files",buttons:[s],content:n,onHide:function(){a.destroy(),a=void 0,o=null}});return a}return k.Z.notify("Please select Folder in Tree"),null}y.Z.subscribe("command:ide:upload_item",zr),y.Z.subscribe("filetree:select",Wr);const Gr={openDialog:zr,treePath:Wr},Vr=JSON.parse('{"app":[{"title":"Preview","command":"preview:project"},{"separator":"true"},{"title":"New File...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:new_file"},{"title":"New Folder...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:new_folder"},{"title":"Upload...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:upload_item"},{"id":"filetree-export-zip","title":"Export as ZIP","command":"project:export:zip"},{"title":"Paste...","id":"filetree-paste","command":"filetree:paste","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}}],"dir":[{"id":"find-in-folder","title":"Search In Folder(s) ...","command":"search:in_folder"},{"separator":"true"},{"id":"deploy-files","title":"Deploy...","noDefaults":true,"context":{"session":"registered","project":["ADMIN","OWNER"]},"nodes":[]},{"separator":"true","noDefaults":true,"context":{"session":"registered","readOnlyAccess":false,"project":["ADMIN","OWNER"]}},{"title":"New File...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:new_file"},{"title":"New Folder...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:new_folder"},{"title":"Upload...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:upload_item"},{"title":"Rename...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:rename_item"},{"title":"Delete...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:delete_item"},{"title":"Copy...","command":"filetree:copy","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}},{"title":"Paste...","id":"filetree-paste","command":"filetree:paste","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}},{"title":"Duplicate...","id":"filetree-duplicate","command":"filetree:duplicate","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}}],"file":[{"title":"Preview static","command":"preview:tree-file"},{"id":"filetree-download","title":"Download","command":"project:export:file"},{"title":"Code Playback","noDefaults":true,"command":"file:open","params":{"ext":"change-player"},"context":{"project":["OWNER","ADMIN"]}},{"separator":"true","context":{"session":"registered","project":["WRITE_FILES","ADMIN","OWNER"]}},{"id":"deploy-files","title":"Deploy...","noDefaults":true,"context":{"session":"registered","project":["ADMIN","OWNER"]},"nodes":[]},{"separator":"true","noDefaults":true,"context":{"session":"registered","project":["ADMIN","OWNER"]}},{"id":"set-default-index","title":"Set as project index","command":"preview:set-default-index","noDefaults":true,"context":{"session":"registered","project":["OWNER","ADMIN","WRITE_FILES"]}},{"separator":"true","noDefaults":true,"context":{"session":"registered","readOnlyAccess":false,"project":["OWNER","ADMIN","WRITE_FILES"]}},{"title":"Rename...","command":"ide:rename_item","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}},{"title":"Delete...","command":"ide:delete_item","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}},{"title":"Copy...","command":"filetree:copy","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}},{"title":"Paste...","id":"filetree-paste","command":"filetree:paste","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}},{"title":"Duplicate...","id":"filetree-duplicate","command":"filetree:duplicate","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}}],"multi-select":[{"id":"find-in-folder","title":"Search In Folder(s) ...","command":"search:in_folder"},{"separator":"true"},{"id":"deploy-files","title":"Deploy...","noDefaults":true,"context":{"session":"registered","project":["ADMIN","OWNER"]},"nodes":[]},{"separator":"true","noDefaults":true,"context":{"session":"registered","project":["ADMIN","OWNER"]}},{"title":"New File...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:new_file"},{"title":"New Folder...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:new_folder"},{"title":"Upload...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:upload_item"},{"title":"Delete...","command":"ide:delete_item","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}},{"title":"Copy...","command":"filetree:copy","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}}]}');var Kr=n(85284);n(57568);var Yr=n(44442).A,Jr=y.Z.create(n(43380)),Qr=n(10947).q,Xr={},$r=null,ea=[],ta=4e3,na="files-tree",ia=function e(t,n,r){if(!(this instanceof e))return new e(t,n,r);var a=this;this.container=t,this.panel=r,this.clipboard=null,this.canDrop=!1,this.dropTarget="";var s={name:na,core:{check_callback:function(e,t,n,i,r){if("move_node"===e){var s=this.get_selected();if(r&&"i"!==r.pos&&r.ref&&"dir"===r.ref.type&&(n=r.ref),"#"===n.id||t.parent===n.id||t.id===n.id||"file"===n.type||-1!==d().indexOf(s,n.id)&&-1!==d().indexOf(s,t.id)||-1!==d().indexOf(t.children_d||[],n.id)?a.canDrop=!1:(a.dropTarget=n.id,a.canDrop=!0),!a.canDrop)return a.treeDiv.find(".highlighted").removeClass("highlighted"),!1;if(a.canDrop||"#"===n.id||t.parent===n.id){var o="#"===n.id?"j"+a.tree._id+"_1":n.id,c=l()("#"+o);c.hasClass("highlighted")||(a.treeDiv.find(".highlighted").removeClass("highlighted"),c.addClass("highlighted"))}}if(r&&r.dnd&&"i"!==r.pos)return!1},multiple:!0,themes:{dots:!1,responsive:!1},data:[],force_text:!0},types:{"#":{valid_children:["root"],max_children:1},root:{valid_children:["file","dir"],icon:ca(),a_attr:{title:la()}},dir:{valid_children:["file","dir"],icon:"ss-icon ss-folder"},file:{valid_children:["none"],icon:"ss-icon ss-textfile"},truncated:{valid_children:["none"],icon:"ss-icon ss-alert"}},sort:function(e,t){var n=this.get_node(e),i=this.get_node(t),r=["root","dir","file"],a=n.text.toLowerCase()>i.text.toLowerCase()?1:-1;return n.type!==i.type&&(a=r.indexOf(n.type)>r.indexOf(i.type)?1:-1),a},dnd:{blocker:!0,copy:!1,check_while_dragging:!0,open_timeout:4e3,is_draggable:function(e){if(i.Z.currentProject&&i.Z.currentProject.readOnly)return!1;for(var t=["file","dir"],n=!0,r=0;r<e.length;r++){var a=e[r];n=n&&-1!==d().indexOf(t,a.type)}return n}},contextmenu:{select_node:!0,show_at_node:!1,items:function(e,t){return sa.call(a,a.tree,e,t)}},plugins:["contextmenu","dnd","search","types","sort","unique","guttericons","wholerow"]};this.treeContainer=l()('<div class="tree-container"></div>'),this.treeDiv=this.treeContainer.jstree(s),this.storedFunctions=[],this.loading=!0,this.treeDiv.on("activate_node.jstree",(function(e,t){var n=t.event&&"contextmenu"===t.event.type,i=t.event&&t.event.ctrlKey,r=t.event&&t.event.shiftKey;if(n||i||r)return!1;if(1===t.instance.get_selected().length){var s=t.node,o=s.state&&s.state.loaded;"dir"===s.type&&(s.children.length>0||!o)&&a.tree.toggle_node(s),oi.Z.onSelect(t)}})).on("changed.jstree",(function(e,t){oi.Z.onSelectionChanged(t)})).on("move_node.jstree",(function(e,t){oi.Z.onSelectionChanged(t)})).on("ready.jstree",(function(){a.loading=!1,a.tree.hide_dots(),oa.call(a)})).on("refresh.jstree",(function(){Zi.refresh(o)}));var o=this.tree=l().jstree.reference(this.treeDiv);this.container.append(this.treeContainer),y.Z.on(this.container,"click",(function(e){if(0!==l()(e.target).closest(".jstree-node").length)return!1})),this.activeDragItems=[],l()(document).on("dnd_start.vakata.filetree",(function(e,t){var n=t.data.nodes;0!==n.length&&(a.activeDragItems=oi.Z.sortAndCollectNodes(o,n),0!==a.activeDragItems.length&&(t.helper.find(".jstree-icon:eq(0)").hide(),t.helper.addClass("codio-contrasted")))})).on("dnd_move.vakata.filetree",(function(e,t){var n=l()("#jstree-marker"),i=d().get(t,"data.origin.settings.name");i===na?n.addClass("in-filetree"):i===Ne.Iw&&n.addClass("in-guidestree")})).on("dnd_stop.vakata.filetree",(function(e,t){if(a.container.find(".jstree-node.highlighted").removeClass("highlighted"),0!==a.activeDragItems.length&&""!==a.dropTarget&&a.canDrop){var n=a.tree,i=n.get_node(a.dropTarget),r=oi.Z.getPath(n,i),s=a.activeDragItems;a.activeDragItems=[],a.dropTarget="",a.canDrop=!1,d().delay((function(){n.settings.dnd.blocker&&n.get_container().block()}),300),n.settings.dnd.blocker=!0,Jr.moveItems([r,s])}else if(0!==a.activeDragItems.length){var o=l()(t.event.target).closest(".tab-container");if(o){var c=l()(t.event.target).closest(".CodeMirror-line");d().each(a.activeDragItems,(function(e){Jr.itemDrop({path:e.path,type:e.item.type,tab:o[0],line:c&&c[0],event:t.event})}))}}})),this.projectInfo=new ni(this.container,i.Z.currentProject),this.treeBar=new si(this.container,i.Z.currentProject),zi.init(this.tree),Zi.setTree(this.tree),ua.call(this,this.tree),hi.setIcons(this.tree,Xr,!0),function(e,t){if(i.Z.currentProject&&i.Z.currentProject.readOnly)return;var n=t,r=l()(document);function a(t){var n=l()(t.target);if(!(n.closest(".dnd-handler").length>0||n.closest(".modal-scrollable").length>0)){t.stopPropagation(),t.preventDefault();var i=m.ZP.isDirectoryUploadSupport()?t.originalEvent.dataTransfer.items:t.originalEvent.dataTransfer.files,a=n.closest(".jstree-node"),s=a.attr("id");s&&0!==s.length||(s=oi.Z.getTreeNodeByPath(e,"").id);var o=e.get_node(s),c=oi.Z.getPath(e,o),u=o.type;if(Gr.treePath(void 0,[{path:c,type:u}]),!d().isEmpty(t.originalEvent.dataTransfer.files)){var p=Gr.openDialog(!1);p&&(p.processDataTransfer(i),r.bind("drop.filetree",(function(e){e.stopPropagation(),e.preventDefault(),r.unbind("drop.filetree"),a.removeClass("highlighted")})))}}}y.Z.on(n,"drop",a),y.Z.on(l()("body"),"drop",a),y.Z.on(n,"dragover",(function(t){var i=l()(t.target).closest(".jstree-node");if(!i.hasClass("highlighted")){var r=i.attr("id");n.find(".jstree-node").removeClass("highlighted"),i.addClass("highlighted"),d().delay((function(){i.hasClass("highlighted")&&e.open_node(r)}),ta)}t.stopPropagation(),t.preventDefault()})),y.Z.on(n,"dragleave",(function(){n.find(".jstree-node").removeClass("highlighted")}))}(this.tree,this.treeContainer)},ra=ia.prototype;function aa(e){var t=e.command,n="";return d().isString(t)&&(n=Yr.getCurrentKey(t),n=d().isUndefined(n)?"":m.ZP.formatCommand(n)),'<span class="item-title">'+e.title+'</span><span class="hotkey">'+n+"</span>"}function sa(e,t){var n=this,i=e.get_selected().length>1,r=t.type,a=!1,s="app";i?s="multi-select":("root"!==r&&(s=r),n.clipboard||(a=!0));var o=!1,c=oi.Z.getPath(e,t)+"/";c&&n.clipboard&&n.clipboard.files&&(o=!!n.clipboard.files.find((function(e){return"dir"===e.type&&0===c.indexOf(e.path+"/")}))),a=a||o;var l=g.Z.inContext,u=Vr[s]||{},p={},f=null,h=d().find(u,(function(e){return"filetree-paste"===e.id}));h&&(h.visible=!a);var m=function(n){return function(){if(n.command){var i=n.command.split(":"),r=i.shift(),a=i.join(":"),s=oi.Z.getPath(e,t);Yr.execute(r,a,d().extendWith(n.params,{filename:s}))}}};return d().each(u,(function(e){if(l(e.context,"",Kr,e.noDefaults)){if(void 0!==e.visible&&!e.visible)return;if("true"===e.separator)null!==f&&(p[f].separator_after=!0,f=null);else{if(p[e.title]={label:aa(e),action:m(e)},e.nodes)if(0===e.nodes.length)p[e.title].submenu={no_items:{label:""}};else{for(var t={},n=0;n<e.nodes.length;n++){var i=e.nodes[n];t[i.title]={label:aa(i),action:m(i)}}p[e.title].submenu=t}f=e.title}}})),p}function oa(){for(var e=0;e<this.storedFunctions.length;e++)this.storedFunctions[e]();this.storedFunctions=[]}function ca(){return i.Z.currentProject&&i.Z.currentProject.isPublic?"ss-icon ss-unlock":"ss-icon ss-lock"}ra.updateIcons=function(){hi.setIcons(this.tree,Xr)},ra.activate=function(e,t){this.panel=t,this._render()},ra.deactivate=function(){$r=null},ra.close=function(){Xr={},hi.clean(),zi.clean(),l()(document).off("dnd_start.vakata.filetree dnd_stop.vakata.filetree"),this.tree.destroy(),function(e){if(i.Z.currentProject&&i.Z.currentProject.readOnly)return;y.Z.off(e,"drop dragleave dragover")}(this.treeContainer),d().forEach(ea,(function(e){y.Z.unsubscribe(e)})),ea.length=0,this.treeBar.close(),this.container.remove(),$r=null,this.container=null,this.tree=null},ra._render=function(){$r=this,this.updateIcons(),this.projectInfo.render(),this.treeBar.render()};var la=function(){return i.Z.currentProject&&i.Z.currentProject.isPublic?"Public project":"Private project"};function ua(e){var t=this,n=d().bind(ea.push,ea),r=function(n){var i=oi.Z.getTreeNodeByPath(e,n);if(i){var r={path:n,type:i.type},a=function(){e.deselect_all(!0),e.select_node(i)};t.loading?t.storedFunctions.push(a):a(),Jr.itemSelect(r,[r])}};function a(){var t=i.Z.currentProject,n=oi.Z.getTreeNodeByPath(e,""),r=[t.name," (",t.currentBranch,")"].join("");e.rename_node(n,r)}n(y.Z.subscribe("tab:activated:tree",(function(e,t){r(t.filename)}))),n(y.Z.subscribe("tab:focus:tree",(function(e,t){r(t.filename)}))),n(y.Z.subscribe("tree:select:#path",(function(e){r(e.path)}))),n(y.Z.subscribe("project:dataUpdate",(function(e,t){t.newProject.currentBranch!==t.oldProject.currentBranch&&a()}))),n(y.Z.subscribe("project:preferencesUpdated",(function(t,n){d().includes(n,"name")&&a(),d().includes(n,"is_public")&&(hi.setIcon(e,"",ca()),hi.updateNodeIconTitle(e,"",la()))}))),n(y.Z.subscribe("command:ide:delete_item",(function(){var n=oi.Z.getSelectedFiles(e);if(t.clipboard&&t.clipboard.files.length>0)if(d().each(n,(function(e){var n=[];d().each(t.clipboard.files,(function(t,i){t.path===e.path&&n.push(i)})),n=n.reverse(),d().each(n,(function(e){t.clipboard.files.splice(e,1)}))})),0===t.clipboard.files.length)t.clipboard=null;else{var i=pa(t.clipboard.files);t.clipboard.minPath=i.minPath}}))),n(y.Z.subscribe("command:filetree:copy",(function(){var n=oi.Z.getSelectedFiles(e),i=[];d().each(n.items,(function(e,t){"root"===e.type&&i.push(t)})),i=i.reverse(),d().each(i,(function(e){n.items.splice(e,1)}));var r=pa(n.items);t.clipboard={minPath:r.minPath,files:n.items}}))),n(y.Z.subscribe("command:filetree:paste",(function(){var n=oi.Z.getSelectedFiles(e).file,i="";if("dir"===n.type)i=n.path;else{var r=n.path.split("/");r.pop(),i=r.join("/")}d().delay((function(){e.settings.dnd.blocker&&e.get_container().block()}),300),e.settings.dnd.blocker=!0,Jr.pasteItems([i,t.clipboard.files])}))),n(y.Z.subscribe("command:filetree:duplicate",(function(){var t=oi.Z.getSelectedFiles(e),n=t.file.path.split("/");n.pop();var i=n.join("/");d().delay((function(){e.settings.dnd.blocker&&e.get_container().block()}),300),e.settings.dnd.blocker=!0,Jr.duplicateItems([i,t.items])})))}function da(e){if(e.tree){var t=e.tree.get_selected(),n=d().isEmpty(t)?oi.Z.getTreeNodeByPath(e.tree,"").id:t,i=e.tree.get_node(n,!0);return i&&i.children(".jstree-anchor")}}function pa(e){var t=e[0].path,n=t.split("/").length;n>1&&d().each(e,(function(e){var i=e.path.split("/").length;i<n&&(t=e.path,n=i)}));var i=t.split("/");return i.pop(),{minPath:t=i.join("/"),weight:n}}ra.focus=function(){var e=da(this);e&&e.length>0&&e.get(0).focus({preventScroll:!0})},ra.unfocus=function(){var e=da(this);e&&e.blur()},y.Z.subscribe("tree:publish:icons:#plugin",(function(e,t){var n=e.plugin;Xr[n]=t,null!==$r&&$r.updateIcons()})),y.Z.subscribe("filetree:right-menu:update:#id",(function(e,t){var n=e.id;d().each(Vr,(function(e){var i=Qr(e,n);i&&d().each(t,(function(e,t){i[t]=e}))}))})),y.Z.subscribe("filetree:node:addVisibilityFilter",(function(e,t){t&&d().isString(t.plugin)&&Zi.addVisibilityFilter(t)})),y.Z.subscribe("filetree:node:removeVisibilityFilter",(function(e,t){t&&d().isString(t.plugin)&&Zi.removeVisibilityFilter(t)})),y.Z.subscribe("filetree:node:open:#path",Zi.open),y.Z.subscribe("filetree:node:close:#path",Zi.close),y.Z.subscribe("tree:unblock",(function(){var e=$r.tree;e.settings.dnd.blocker&&(e.get_container().unblock(),e.settings.dnd.blocker=!1)})),y.Z.subscribe("command:filetree:openParent",(function(){location.assign(i.Z.currentProject.parent.href)}));const fa=ia;var ha={};ha.info=zn,ha.settings=Gn,ha.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(ha);const ma=JSON.parse('{"name":"codio-tree","description":"Tree Extension","codio":{"urls":"tree"}}');var ga=n(18098),va=["c","i","h","ino","cc","cpp","c++","cp","cxx","ii","hh","hp","hxx","hpp","h++","go","java","js","pas","p","pp","P","pro","py","py3","pyw","rs"];var ba=f().compile('<div class="statusbar">\n  <div class="percentage">{{percentage}}%</div>\n  <div class="position">({{position.lineNumber}}:{{position.column}})</div>\n  <div class="switches">\n    <div class="views">\n      <select {{#unless views.length}}disabled{{/unless}} aria-label="View">\n        {{#each views}}\n        <option value="{{id}}" {{#if selected}}selected{{/if}}>{{name}}</option>\n        {{/each}}\n      </select>\n    </div>\n</div>\n'),ya=y.Z.create(n(9533)),wa=function(e){var t=e.getPosition().lineNumber,n=e.getLineCount();return n<2?100:Math.ceil(t/n*100)},_a=function(e){return e.substring(0,1).toUpperCase()+e.substring(1)},ka=function(e,t){var n=i.Z.getViews(),r=d()(n).filter((function(t){return t.info.name===e})).first().info.codio.view,a=d().map(r,(function(e){return{id:e,name:_a(e),selected:e===t}}));return a.length>1?a:[]},Pa=function(e,t,n){this.container=t,this.editor=e,this.tree=n,this.attached=!1,this.fragment=null;var i=this;this._refreshHandler=d().debounce(this.refresh.bind(this),75,{maxWait:400}),y.Z.on(this.container,"change",".statusbar .views > select",(function(){i.tree.switchType(null,null,l()(this).val())}))},Za=Pa.prototype;Za.render=function(e){if(e&&(this.editor=e),this.attached)return this.refresh();this.attach(),d().defer((function(){ya.statusBarOpened()}))},Za.refresh=function(){if(this.editor){var e=d().clone(this.editor.getPosition()),t=l()(ba({position:e,percentage:wa(this.editor),views:ka(this.tree.extensionName,this.tree.viewType)}));this.fragment.replaceWith(t),this.fragment=t,ya.statusBarOpened()}},Za.attach=function(){this._cursorPositionDisposableHandler=this.editor.onDidChangeCursorPosition(this._refreshHandler);var e=d().clone(this.editor.getPosition());e.lineNumber+=1,this.fragment=l()(ba({position:e,percentage:wa(this.editor),views:ka(this.tree.extensionName,this.tree.viewType)})),this.container.append(this.fragment),this.attached=!0},Za.detach=function(){this.editor&&(this._cursorPositionDisposableHandler&&this._cursorPositionDisposableHandler.dispose(),this._cursorPositionDisposableHandler=null,this.editor=null),this.fragment&&this.fragment.detach(),this.attached=!1},Za.remove=function(){this.editor&&(this._cursorPositionDisposableHandler&&this._cursorPositionDisposableHandler.dispose(),this._cursorPositionDisposableHandler=null,this.editor=null),y.Z.off(this.container,"change",".statusbar .views > select"),this.tree=null,this.attached=!1,this.fragment&&this.fragment.remove()},Za.disable=function(){this.fragment&&this.fragment.remove(),this.render=function(){}},Za.getTypes=function(){return ka(this.tree.extensionName,this.tree.viewType)};const xa=Pa;var Ca=n(44442).A,Sa=y.Z.create(n(9533)),Ea=["sb3"],Ia=function(e,t,n,i,r){r=r||{},this.container=e,this.filename=t,this.sync=!1!==r.sync,this.statusbar=null,this.fragment=null,this.editor=null,this.tab=null,this.drawn=!1,this.active=!1,this.showStatusbar=r.showStatusbar,this.highlight=r.highlight,this.fragment=l()('<div class="tree-container">');var a,s=ja(t);if(d().isUndefined(n)){if(s){var o=d().toPairs(s);this.viewType=o[0][0],a=o[0][1]}}else a=s[n],this.viewType=n;void 0!==a&&(this.extensionName=a.info.name,this.sync=!1!==a.info.codio.sync,this.extensionPromise=a.get().then(Oa.bind(null,this,t,this.viewType,r)).catch((function(){})),r.nofs||(this.fsHandlerId=y.Z.subscribe("ide:fullscreen:#mode",Ta.bind(this))))};function Ta(e,t){this.active&&("enter"===e.mode?Ma(this,t===this?"enterFullscreen":"hide"):Ma(this,"leaveFullscreen"),Ma(this,"updateSize"))}function ja(e){var t=m.ZP.path.parse(e),n=ga.Z.getByFilename("/"+e);return void 0!==n||void 0!==(n=ga.Z.getByFilename(t.name))||void 0!==(n=ga.Z.getByExt(t.extension))?n:{code:Aa(t.extension)}}var Aa=function(e){return va.includes(e)?ga.Z.getExt("view-code-breakpoints"):ga.Z.getExt("view-code")};function Oa(e,t,n,r,a){var s={container:e.fragment,filename:t,view:n};if(d().defaults(s,r),a.info&&a.info.codio&&!0===a.info.codio["no-auto-loading"])return e.extension=new a(s),a.info.codio&&a.info.codio["close-extension-ide-tab"]&&Sa.closeByPath({path:s.filename},!1),Promise.resolve();if(e.file)return s.file=e.file,s.fileContent=e.file.model,e.extension=new a(s),Promise.resolve();if(d().isNull(i.Z.currentProject))return Promise.reject(new Error("No project"));var o=e.sync?"file":"getBinaryFileContent",c=Promise.resolve(""),l=m.ZP.path.getFileExtension(t);return Ea.includes(l)||(c=i.Z.currentProject[o](t)),c.then((function(t,n){d().isString(t)?(e.file=null,s.fileContent=new B.yO(t)):(e.file=t,t?s.fileContent=t.model:n=!0),s.file=e.file,e.extension=new a(s),n&&Sa.closeByPath({path:s.filename},!1)}),(function(t){d().isString(t)?(e.file=null,s.fileContent=new B.yO(t)):t&&(e.file=t),Sa.closeByPath({path:s.filename},!1)}))}var Da=Ia.prototype;function Na(e,t){if("close"===t||"beforeClose"===t)return!0;var n=!1;return d().each(i.Z.ide.panels.all,(function(t){var i=t.activeTab();i&&i===e.tab&&(n=!0)})),n}function Ma(e,t,n,i){return Fa.apply(this,arguments)}function Fa(){return Fa=(0,r.Z)(o().mark((function e(t,n,i,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.promise.getState(t.extensionPromise);case 2:if(e.sent!==m.ZP.promise.STATES.REJECTED){e.next=5;break}return e.abrupt("return",Promise.resolve());case 5:return e.abrupt("return",t.extensionPromise.then((function(){var e=t.extension,a=r||Na(t,n);e&&d().isFunction(e[n])&&a&&e[n].call(e,i)})));case 6:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Ra(e,t,n){return La.apply(this,arguments)}function La(){return La=(0,r.Z)(o().mark((function e(t,n,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.promise.getState(t.extensionPromise);case 2:if(e.sent!==m.ZP.promise.STATES.REJECTED){e.next=5;break}return e.abrupt("return",Promise.resolve());case 5:return e.abrupt("return",t.extensionPromise.then((function(){var e=t.extension;if(e&&d().isFunction(e[n]))return Na(t,n)?e[n].apply(e,d().isArray(i)?i:[i]):Promise.reject(new Error("extension is not active"))})));case 6:case"end":return e.stop()}}),e)}))),La.apply(this,arguments)}function Ua(e,t,n,r,a){if(i.Z.currentProject.exists(t)){var s=i.Z.currentProject.getFileInfo(t);if(s.type&&"file"===s.type)return new Ia(e,t,n,r,a)}else k.Z.error("The file: "+m.ZP.safeHtml(t)+" cannot be found. Resync the file tree (Project->Resync File Tree) and if still a problem please contact us.")}Da.afterActivate=function(e){return Ra(this,"afterActivate",e)},Da.setOptions=function(e,t,n){this.highlight=n.highlight,Ma(this,"setOptions",n,!0)},Da.activate=function(e,t){var n=this;if(this.tab=t,this.drawn){if(this.active)return}else!function(e,t){e.container.append(e.fragment),!1===e.showStatusbar||e.statusbar||(e.statusbar=new xa(t,e.container,e)),e.drawn=!0}(this,e),this.container.append(this.fragment);if(this.extensionPromise)return this.statusbar&&this.statusbar.render(e),this.editor=e,Ra(this,"setTab",this.tab).then((function(){return Ra(n,"activate",e).then((function(){n.drawn=n.active=!0}))}))},Da.beforeDeactivate=function(){if(this.fragment&&this.extensionPromise)return Ra(this,"beforeDeactivate")},Da.deactivate=function(){if(this.active=!1,this.statusbar&&this.statusbar.detach(),this.fragment&&this.extensionPromise)return Ma(this,"deactivate")},Da.dropActiveFlag=function(){this.active=!1},Da.beforeClose=function(){return Ra(this,"beforeClose")},Da.close=function(e,t,n){var i,r=[];this.file&&("function"==typeof this.file.close&&(i=this.file.close(n)),i&&r.push(i));return this.statusbar&&(this.statusbar.remove(),this.statusbar=null),this.fragment.remove(),this.fsHandlerId&&y.Z.unsubscribe(this.fsHandlerId),r.push(Ma(this,"close")),Promise.all(r)},Da.focus=function(){return Ma(this,"focus")},Da.rename=function(e,t,n){var i=Promise.resolve();this.filename=n;var r,a=ja(this.filename),s=this.viewType;if(!d().isUndefined(this.viewType)&&a[this.viewType])r=a[this.viewType];else if(a){var o=d().toPairs(a);r=o[0][1],s=o[0][0]}return r&&r.info.name!==this.extensionName?(this.extensionName=r.info.name,this.sync=!1!==r.info.codio.sync,this.switchType(this.editor,this.tab,s)):(this.extension&&(this.extension.fileName=n),i)},Da.switchToNextType=function(){if(this.statusbar){var e=this.statusbar.getTypes();if(e.length>1){var t,n=d().findIndex(e,{selected:!0});n===e.length-1?n=0:n++,t=e[n].id,this.switchType(this.editor,this.tab,t)}}},Da.switchType=function(e,t,n){if(!d().isUndefined(n)){var r=this;return r.viewType=n,d().isNull(this.tab)||(this.tab.viewType=n),Ra(this,"close").then((function(){var e=i.Z.getExt(r.extensionName);return r.extensionPromise=e.get().then(Oa.bind(null,r,r.filename,r.viewType,{}))})).then((function(){return Ra(r,"setTab",r.tab),Ra(r,"activate",r.editor)})).then((function(){return Ra(r,"afterActivate")})).then((function(){Ca.execute("layout","save"),r.statusbar&&r.statusbar.render(r.editor)}))}},Da.fileDrop=function(e,t,n){return Ra(this,"fileDrop",[e,t,n])};var Ba={};Ba.info=ma,Ba.settings={},Ba.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ua);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(Ba);const qa=JSON.parse('{"name":"codio-right-menu","description":"Right menu ext"}');var Ha=n(71002),Wa=n(52308),za=l()("<div/>");function Ga(e){return e=e||"",za.text(e).html()}function Va(){this._dropCloseTimeout();var e=this._opt.leaveInterval;if(e){var t=this,n=setTimeout((function(){t._div&&t._onMenuClose()}),e);this._objectEnv.timeIdLeave=n}}function Ka(e){var t,n=this._opt;if(n[e]&&"function"==typeof n[e]){var i=Array.prototype.slice.call(arguments,0);i.splice(0,1),t=n[e].apply(this,i)}return t}function Ya(e){this._div.stop().fadeOut(0).hide();var t=this._nodesMap;for(var n in t)t[n].nodesContainer&&t[n].nodesContainer.hide();!1!==e&&Ka.call(this,"onClose")}const Ja=function(e,t,n){var i={_data:null,_div:null,_nodesMap:null,_plugins:null,_contextDiv:null,_objectEnv:null,_id:null,_init:function(e,t,n){this._id=this._generateUniqueId(),this._div=l()("<table class='simple-right-menu' id='"+this._id+"' tabIndex='-1'>").attr("unselectable","on"),this._contextDiv=e,this._objectEnv={},this._opt=n||{},!this._opt.leaveInterval&&(this._opt.leaveInterval=0),this._dropData(),this.setData(t),this._bindEvents()},id:function(){return this._id},setData:function(e){e=Wa.extend(!0,{},{val:e}).val,this._setData(e)},_setData:function(e){if(null!=e){this.clear();this._generateUniqueId();this._addNewNode(void 0,e,this._div)&&(this._data=e)}},getData:function(){return Wa.extend(!0,{},{val:this._data}).val},clear:function(){this._div.empty(),this._dropData()},width:function(){return this._div.width()},height:function(){return this._div.height()},_log:function(e){console},_error:function(e){console&&console.error(e)},_dropData:function(){this._dropCloseTimeout(),this._objectEnv={},this._nodesMap={},this._data={}},setItemIcon:function(e,t){var n=this._getNodesMap(e);if(n){var i=n.divs.children(":not(:last)").find(".simple-right-menu-item-icon");if(i.length>0&&"span"==i[0].tagName.toLowerCase()){var r=i.attr("class"),a=i.attr("style"),s=l()("<img class='"+r+"' style='"+a+"'>");i.replaceWith(s),i=s}i.attr("src",t)}},setItemIconSize:function(e){if(e=parseInt(e,10),!isNaN(e)){var t=this._div;t.addClass("simple-right-menu-icon-"+e),t.removeClass("simple-right-menu-icon-"+this._div.data("iconSize")),t.data("iconSize",e)}},_onMenuClose:function(){var e=this;this._div&&this._div.fadeOut(100,(function(){Ya.call(e)}))},_dropCloseTimeout:function(){clearTimeout(this._objectEnv.timeIdLeave)},_addNewNode:function(e,t,n,i){var r=l()("<div>");r.data("id",e);var a=this._nodesMap,s=!0,o=this;if(this._traverseNodes(t,(function(e,t){var n;if(e.id=null==e.id?o._generateUniqueId(a):e.id,null!=a[e.id])return o._error("Error :: Detects duplicate ID in data"),s=!1,!1;var i=null!=e.nodes,r=!1===e.enable?"simple-right-menu-item-disable ":"",c=i?"":e.bungClass,u=i&&e.nodes.length>0,d=!1!==e.safeTitle?Ga(e.title||""):e.title||"",p=e.icon?"simple-right-menu-icon-"+e.icon:"",f=e.icon2?"simple-right-menu-icon-"+e.icon2:"",h=e.separator?l()("<tr class='simple-right-menu-item-separator'><td colspan='3'></td></tr>"):l()("<tr class='"+r+"simple-right-menu-item "+(i?"simple-right-menu-folder":"simple-right-menu-child")+"'><td><span class='simple-right-menu-item-icon "+p+"'>&nbsp;</span></td><td><span class='simple-right-menu-title "+f+"'>"+d+"</span></td><td><span class='simple-right-menu-expand "+c+" "+(u?"simple-right-menu-has-child":"")+"'>&nbsp;</span></td></tr>");return(n=i?o._getNewContainerEl(e.id):void 0)&&n.hide(),!1===e.visible&&h.hide(),h.data({id:e.id}),h.append(l()("<td>").append(n)),e.userData=null==e.userData?{}:e.userData,a[e.id]={node:e,divs:h,nodesContainer:n,parentId:t.data("id"),titleEl:h.find(".simple-right-menu-title")},t.append(h),n}),r),s)if(null!=i&&-1!=i){var c=null==e?this._getFakeRootNode():this._getNodesMap(e);if(c.node.nodes.length>i)this._getNodesMap(c.node.nodes[i].id).divs.before(r.children());else n.append(r.children())}else n.append(r.children());return s},_getNewContainerEl:function(e){return l()("<table class='simple-right-menu-container' style='display:none;'>").data("id",e)},_generateUniqueId:function(e){function t(){for(var e="abcdefghijklmnopqrstuvwxyz0123456789-",t="w",n=0;n<37;n++){var i=parseInt(37*Math.random());t+=e.charAt(i)}return t}for(var n;e&&e[n]||!n;)n=t();return n},traverseNodes:function(e,t){"function"==typeof e&&(t=e,e=this._data),this._traverseNodes(e,t)},_traverseNodes:function(e,t,n){var i,r=e.nodes;if(l().isArray(e)?(r=e,i=n):i=t(e,n),null!=r&&!1!==i)for(var a=0,s=r.length;a<s;a++)this._traverseNodes(r[a],t,i)},_traverseParents:function(e,t){var n=this.getParentNode(e);null!=n&&0!=t(n)&&this._traverseParents(n.id,t)},_getNodesMap:function(e){return this._nodesMap[e]},_getFakeRootNode:function(){return l().isArray(this._data)?{node:{nodes:this._data},divs:l()("<tr>"),nodesContainer:this._div,parentId:void 0}:this._getNodesMap(this._data.id)},addNode:function(e,t,n){"string"!=typeof e&&(n=t,t=e,e=void 0);var i="string"!=typeof e?this._getFakeRootNode():this._getNodesMap(e),r=i.node,a=i.divs;if(null!=r.nodes&&0!=r.nodes.length||(r.nodes=[],a&&a.addClass("simple-right-menu-folder").removeClass("simple-right-menu-child"),i.nodesContainer=i.nodesContainer?i.nodesContainer:this._getNewContainerEl(e),a&&a.children(":last").append(i.nodesContainer)),this._addNewNode(e,t,i.nodesContainer,n))return l().isArray(t)?t.length>0&&(r.nodes=r.nodes.concat(t)):null!=n&&-1!=n?r.nodes.splice(n,0,t):r.nodes.push(t),r.nodes.length>0&&a&&a.children(":not(:last)").find(".simple-right-menu-expand").addClass("simple-right-menu-has-child"),t.id},moveNodeByPos:function(e,t,n,i){return i.removeNode(e.id),this.addNode(t,e,n)},removeNode:function(e){var t=this._getNodesMap(e),n=this;if(t){l()(t.nodesContainer).empty().remove(),t.divs.empty().remove();var i=null==t.parentId?this._getFakeRootNode():this._getNodesMap(t.parentId),r=i.node.nodes;if(r)for(var a=0,s=r.length;a<s;a++)if(r[a].id==e){this._traverseNodes(r[a],(function(e){delete n._nodesMap[e.id]})),r.splice(a,1);break}null!=t.parentId?r&&0==r.length&&(i.divs.children(":not(:last)").find(".simple-right-menu-expand").removeClass("simple-right-menu-has-child"),i.nodesContainer.empty().remove(),i.nodesContainer=void 0):l().isArray(this._data)||this._dropData()}else this._error("Error :: There are no node by ID = "+e)},removeChildren:function(e){var t=this._getNodesMap(e);if(t&&null!=t.node.nodes)for(var n=0,i=t.node.nodes.length;n<i;n++)this.removeNode(t.node.nodes[n].id)},getChildren:function(e){var t=this._getNodesMap(e);if(t&&null!=t.node.nodes)return t.node.nodes},_getEventElem:function(e){return l()(e.originalEvent.target||e.originalEvent.srcElement)},_getParentItemElement:function(e){return e.closest(".simple-right-menu-item")},_bindEvents:function(){var e=this,t=this._div,n=!1,i=!1;l()(this._contextDiv).unbind("."+this._id).bind("contextmenu."+this._id,(function(t){return n=!1,i=!1,e.onContextMenu(t),!1})).bind("click."+this.id,(function(){e._onMenuClose()})),t.unbind("dblclick contextmenu mouseover mouseenter mouseleave blur mousedown mouseup").bind("dblclick",(function(t){var n=e._getEventElem(t),i=e._getParentItemElement(n);0!=i.length&&Ka.call(e,"onDblClick",i.data("id")),t.stopPropagation()})).bind("contextmenu",(function(e){e.stopPropagation(),e.preventDefault()})).bind("mouseover",(function(t){var n=e._getEventElem(t),i=e._getParentItemElement(n),r=i.data("id");if(null!=r){e._dropCloseTimeout();var a=e._getNodesMap(r),s=e._getNodesMap(a.parentId);if((s=null==s?e._getFakeRootNode():s).node&&s.node.nodes)for(var o=s.node.nodes,c=0,u=o.length;c<u;c++)if(r!=o[c].id&&1!=o[c].separator){var d=e._getNodesMap(o[c].id);d.nodesContainer&&d.nodesContainer.is(":visible")&&d.nodesContainer.fadeOut(100)}if(a.nodesContainer){var p=a.nodesContainer,f=l()(window).height();p.css({left:"",top:i.position().top}).fadeIn(100),e._fixPosition(f,p)}t.stopPropagation(),t.preventDefault()}})).bind("mouseleave",(function(){Va.call(e)})).bind("mouseenter",(function(t){e._dropCloseTimeout(),t.stopPropagation(),t.preventDefault()})).bind("mouseup",(function(t){n&&function(t){var n=e._getEventElem(t),i=e._getParentItemElement(n);0!=i.length&&(e._onSelect(i),Ka.call(e,"onClick",i.data("id")))}(t),i&&e._onMenuClose()})).bind("mousedown",(function(){n=!0,i=!1})).bind("blur",(function(){n?i=!0:e._onMenuClose()}))},_onSelect:function(e,t){var n=e.data("id"),i=this._getNodesMap(n);if(i&&!1!==i.node.enable){"function"==typeof i.node.func&&i.node.func.call(this,i.node);var r=this._objectEnv.selectedNodeId;this._div.is(":visible")&&this._onMenuClose();var a=this._objectEnv.selectedNodeId=n;!1!==t&&Ka.call(this,"onSelect",a,r)}},selectNode:function(e,t){var n=this._getNodesMap(e);n&&this._onSelect(n.divs,t)},isFolder:function(e){var t=this._getNodesMap(e);return!(!t||!t.node.nodes)},getNode:function(e){var t=this._getNodesMap(e);return t?t.node:void 0},getParentNode:function(e){var t=this._getNodesMap(e);return t?this.getNode(t.parentId):void 0},getParentNodeId:function(e){var t=this.getParentNode(e);return null==t?void 0:t.id},setUserData:function(e,t,n){var i=this._getNodesMap(e);i&&(i.node.userData[t]=n)},getUserData:function(e,t){var n=this._getNodesMap(e);return n?n.node.userData[t]:void 0},showNode:function(e){var t=this._getNodesMap(e);t&&(t.divs.show(),t.node.visible=!0)},hideNode:function(e){var t=this._getNodesMap(e);t&&(t.divs.hide(),t.node.visible=!1)},enableNode:function(e){var t=this._getNodesMap(e);t&&(t.divs.removeClass("simple-right-menu-item-disable"),t.node.enable=!0)},disableNode:function(e){var t=this._getNodesMap(e);t&&(t.divs.addClass("simple-right-menu-item-disable"),t.node.enable=!1)},setTitle:function(e,t){var n=this._getNodesMap(e);if(n){var i=!1!==n.node.safeTitle?Ga(t):t;n.titleEl.html(i),n.node.title=t}},onContextMenu:function(e){Ya.call(this,!1);var t=Ka.call(this,"onBeforeShow",e);e&&"object"==(0,Ha.Z)(e)&&e.clientX&&e.clientY&&(this._objectEnv.pos={left:e.clientX-2,top:e.clientY-2}),!1!==t&&this.show()},show:function(e){for(var t=this._div,n=this._data,i=0,r=l()(window).height(),a=0,s=n.length;a<s;a++){!1!==this._getNodesMap(n[a].id).node.visible&&i++}t.detach().hide(),i>0?(l()(document.body).append(t),e=null==(e=e||this._objectEnv.pos)?{left:0,top:0}:e,t.css({left:e.left-2,top:e.top-2,opacity:1e-5}),Va.call(this),t.show(),this._fixPosition(r,t,!0),t.focus(),t.animate({opacity:1},100)):Ya.call(this,!0)},hide:function(){this._onMenuClose()},reDraw:function(){this._setData(this._data),this._bindEvents()},base:function(){return this._div},_fixPosition:function(e,t,n){var i=t.outerHeight(),r=t.offset().top,a=parseInt(t.css("top")),s=e<i+r?e-(i+r):0;s=n?r+s:a+s,t.css("top",s-5)},destroy:function(){if(this._dropCloseTimeout(),this._data){var e=this._data.id;null!=e&&this.removeNode(e)}this._div&&this._div.unbind("click dblclick contextmenu mouseenter mouseleave click dblclick").stop().empty().remove(),this._contextDiv&&(this._contextDiv.unbind("contextmenu."+this._id),this._contextDiv=void 0),this._nodesMap=void 0,this._data=void 0,this._objectEnv=void 0,this._div=void 0,this._opt=null,l()(this).unbind()}};return i._init(e,t,n),i};var Qa=n(44442).A,Xa=f().compile('<i class="ss-icon {{#unless checked}} off{{/unless}}">\n  {{#if checked}}\n    checkmark\n  {{/if}}\n</i>\n<span class="item-title {{#if checked}}checked{{else}}off{{/if}}">{{title}}</span><span class="hotkey {{#unless key}}hide{{/unless}}">{{{key}}}</span>\n'),$a=function e(t,n,i,r){if(!(this instanceof e))return new e(t,n,i,r);(r=r||{}).onSelect||(r.onSelect=function(e){var t=this.getNode(e);if(t.command){var n=t.command.split(":"),i=n.shift(),r=n.join(":");Qa.execute(i,r,t.params)}}),this.container=t,this.menu=Ja(t,null,r)},es=$a.prototype;es.setItems=function(e,t){var n=this.menu;if(e){e=function(e){e=d().clone(e);var t=null,n=null;return d().map(e,(function(e){return t=e.command,d().isString(t)&&(n=Qa.getCurrentKey(t),n=d().isUndefined(n)?null:m.ZP.formatCommand(n)),e._title||(e._title=e.title),e.title=Xa({title:e._title,key:n,checked:e.checked}),e.safeTitle=!1,e}))}(e=d().clone(e));var i=g.Z.inContext;n.traverseNodes(e,(function(e){void 0===e.visible&&(e.visible=i(e.context,"",t,e.noDefaults))})),n.setData(e)}else n.setData([])},es.hide=function(){this.menu.hide()},es.remove=function(){this.menu.destroy()};const ts=$a;var ns={};ns.info=qa,ns.settings={},ns.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ts);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(ns);const is=JSON.parse('{"name":"view-codio-settings-code","description":"Settings code editor","codio":{"fileName":"/.settings","view":"code"}}');var rs=navigator.platform.toUpperCase().indexOf("MAC")>=0,as=/^\s*\[([\w-]+)\]$/,ss=d().once((function(){var e=["Ctrl","Alt","Shift"];rs&&e.push("Cmd");var t=function(e,t){for(var n=function e(t,n,i,r){if(0!==t)for(var a=0;a<n.length;a++)e(t-1,n.slice(a+1),i.concat([n[a]]),r);else i.length>0&&(r[r.length]=i)},i=[],r=t;r<e.length;r++)n(r,e,[],i);return i.push(e),i}(e,1);return d().map(t,(function(e){return e.join("+")+"+"}))})),os=function(e,t){return d().map(e,(function(e){return{label:e,insertText:e,range:t}}))};B.Zo.SQ.registerCompletionItemProvider("codioSettings",["="],(function(e,t){var n=v.Z.descriptions(),i=[],r=function(e,t){for(var n=t.lineNumber;n>-1;){var i=e.getLineContent(n),r=as.exec(i);if(null!==r)return r[1];n--}}(e,t),a=function(e,t){var n=e.getLineContent(t.lineNumber),i=n.substring(0,t.column),r=i.indexOf("=");return-1===r?null:{value:i.substring(r+1).trim(),key:n.substring(0,r).trim()}}(e,t),s=t.column;if(null!==a)i=function(e,t,n){var i=[];if(d().has(e,t)&&d().has(e[t],n)){var r=e[t][n];"list"===r.type?i=d().values(r.values):"boolean"===r.type?i=["true","false"]:"hotkey"===r.type&&(i=ss())}return i}(n,r,a.key),s-=a.value.length,a.value.length>0&&(i=d().filter(i,(function(e){return 0===e.indexOf(a.value)})));else{var o=function(e,t){return e.getLineContent(t.lineNumber).substring(0,t.column).replace(/^\s+/,"")}(e,t);s-=o.length,null!==r&&(i=function(e,t){return d().has(e,t)?d().keys(e[t]):[]}(n,r)),d().forEach(n,(function(e,t){i.push("["+t+"]")})),i=d().filter(i,(function(e){return 0===e.indexOf(o)}))}var c={startLineNumber:t.lineNumber,startColumn:s,endLineNumber:t.lineNumber,endColumn:t.column};return{suggestions:os(i,c)}}));var cs=n(4942),ls=n(11752);const us={build:function(){var e=v.Z.descriptions(),t=[];return d().forEach(e,(function(e,n){d().isEmpty(e)||(t.push("[",n,"]","\n\n"),function(e,t){var n=d().omitBy(e,(function(e){return e.readonly}));d().forEach(n,(function(e,n){t.push(";",e.desc,"\n; Type: ",e.type," ","\n"),"list"===e.type&&function(e,t){t.push("; Values: \n"),d().forEach(e,(function(e,n){t.push(";  ",e," : ",n,"\n")}))}(e.values,t),t.push(n," = ",e.default,"\n\n")}))}(e,t),t.push("\n\n"))})),t.join("")}};var ds=n(71970);function ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ps(Object(n),!0).forEach((function(t){(0,cs.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ps(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,En.Z)(e);if(t){var r=(0,En.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,Sn.Z)(this,n)}}var ms=function(e){(0,Cn.Z)(n,e);var t=hs(n);function n(e){(0,Zn.Z)(this,n);var i={fileContent:us.build()||"",container:e};return t.call(this,fs(fs({},i),{},{language:"codioSettings"}))}return(0,xn.Z)(n,[{key:"activate",value:function(){var e=this;return this._editor||(this._editor=new B.ZP(this._container)),(0,ls.Z)((0,En.Z)(n.prototype),"activate",this).call(this,this._editor).then((function(){e.editor().setOption("readOnly",!0)}))}}]),n}(ds.Z);const gs=ms;function vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function bs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vs(Object(n),!0).forEach((function(t){(0,cs.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ys(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,En.Z)(e);if(t){var r=(0,En.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,Sn.Z)(this,n)}}const ws=function(e){(0,Cn.Z)(n,e);var t=ys(n);function n(e){return(0,Zn.Z)(this,n),t.call(this,bs(bs({},e),{},{language:"codioSettings"}))}return(0,xn.Z)(n)}(ds.Z);var _s=f().compile('<div class="codio-settings">\n    <div id="codio-settings-editor">\n      <h5>Your Preferences</h5>\n      <div class="settings-editor editor-size-mark"></div>\n    </div>\n    <div id="codio-settings-defaults">\n      <h5>Default Preferences <small>(read-only)</small></h5>\n      <div class="settings-editor editor-size-mark"></div>\n    </div>\n</div>\n'),ks=function(){function e(t){(0,Zn.Z)(this,e),this._container=t.container;var n=l()(_s());l()(this._container).append(n),this._default=new gs(n.find("#codio-settings-defaults").find(".settings-editor"));var i=d().clone(t);i.fileContent=i.fileContent||"",i.container=n.find("#codio-settings-editor").find(".settings-editor"),this._editor=new ws(i),this._bindEvents=[y.Z.subscribe("panel:size:change",this.updateSize.bind(this))]}return(0,xn.Z)(e,[{key:"activate",value:function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([this._editor.activate(t),this._default.activate()]));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterActivate",value:function(){this._default.afterActivate(),this._editor.afterActivate(),this.updateSize()}},{key:"deactivate",value:function(){this._default.deactivate(),this._editor.deactivate()}},{key:"editor",value:function(){return this._editor.editor()}},{key:"model",value:function(){return this._editor.model()}},{key:"close",value:function(){this._container.empty(),d().each(this._bindEvents,(function(e){return y.Z.unsubscribe(e)})),this._editor.close(),this._default.editor()&&this._default.editor().close()}},{key:"updateSize",value:function(){var e=this;d().defer((function(){e._editor.layout(),e._default.layout()}))}}]),e}();const Ps=ks;var Zs={};Zs.info=is,Zs.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ps);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(Zs);const xs=JSON.parse('{"name":"install-software","description":"Install Software","codio":{"global":true,"title":"Install Software","urls":["install-software","install-software-logs"]}}'),Cs=JSON.parse('{"install-software":{"desc":"Install Software"}}');var Ss=n(73007),Es=n.n(Ss),Is=n(19093),Ts=n.n(Is),js=n(68156),As=n.n(js),Os=n(20294).ED;function Ds(){As().apply(this,arguments)}function Ns(){Ts().apply(this,arguments)}n(44941),Os(Ds,As()),Ds.prototype.getLocalResults=function(e,t){t(this.list)},Ds.prototype.setList=function(e){this.list=e},Os(Ns,Ts()),Ns.prototype.getSearchProps=function(){return["name","description","installed","category"]},Ns.prototype.getSearchTokens=function(){return{name:"Name",description:"Description",installed:"Installed",category:"Category"}},Ns.prototype.doCategory=function(e,t){var n=t.category?t.category.toLowerCase():"";return this.compare(e.toLowerCase(),n)},Ns.prototype.doName=function(e,t){return this.compare(e.toLowerCase(),t.name.toLowerCase())},Ns.prototype.doDesc=function(e,t){return this.compare(e.toLowerCase(),t.description.toLowerCase())},Ns.prototype.doInstalled=function(e,t){var n=d().includes(["true",'"true"',"'true'"],e),i=d().includes(["false",'"false"',"'false'"],e);return n?t.installed:!!i&&!t.installed};const Ms=function(e){var t=new(Es()),n=new Ds([new Ns]);return n.setList(e),t.addProvider(n),t.setList=function(e){this.clean(),n.setList(e)},t};var Fs=n(71e3),Rs=m.ZP.KeyCode,Ls="li:not(.js-skip-menuitem)",Us=function e(t,n,i,r){var a=i+r,s=n[a=(a=a>=n.length?0:a)<0?n.length-1:a],o=t.find("li[data-js-id='".concat(s.id,"']"));return!o.is(":visible")||o.hasClass("disabled")||o.hasClass("divider")?e(t,n,a,r):s},Bs=function(e){e.find('a[aria-expanded="true"]').attr("aria-expanded","false"),e.find('button[aria-expanded="true"]').attr("aria-expanded","false")},qs=function(e,t,n){var i=e.find('[data-js-id="'.concat(t,'"]'));Bs(i.parent());var r=i.find("a, :input").first().focus();n?i.addClass("open"):i.removeClass("open"),r&&r.attr("aria-expanded")&&r.attr("aria-expanded","true")};function Hs(e,t){!function(e){e.removeClass("open"),e.find(".open").removeClass("open"),Bs(e)}(e),t===Rs.ESC&&d().defer((function(){e.find("button").first().focus()}))}var Ws=function e(t,n,i){for(var r=0,a=t.length;r<a;r++){var s=t[r];if(s.id===n)return{items:t,item:s,position:r,parentId:i};if(s.items){var o=e(s.items,n,s.parentId);if(o)return o}}},zs=function(e,t){return Ws(e,t)||!1},Gs=function(e,t,n){var i=l()(n.target);if("block"!==i.data("click")){var r=i.is("button")&&"dropdown"===i.data("toggle"),a=i.closest("li"),s=a.data("js-id"),o=zs(e,s);if(o||r){var c=function(e,t){var n=e.which||e.keyCode;return Rs.TAB===n&&0!==t.closest(".dropdown-menu").length&&(n=e.shiftKey?Rs.UP:Rs.DOWN),n}(n,i);switch(c){case Rs.LEFT:case Rs.RIGHT:o&&function(e,t,n,i){var r=i.hasClass("dropdown-submenu")&&!d().isEmpty(t.item.items),a=Rs.LEFT===n&&i.hasClass("pull-left")||Rs.RIGHT===n&&i.hasClass("pull-right");if(r&&a){if(Rs.LEFT===n&&i.hasClass("pull-left")||Rs.RIGHT===n&&i.hasClass("pull-right")){!i.hasClass("open")&&i.addClass("open");var s=t.item.items[0];qs(e,s.id,!d().isEmpty(s.items))}}else if(t.item.parentId){var o=e.find('[data-js-id="'.concat(t.item.parentId,'"]'));(Rs.LEFT===n&&o.hasClass("pull-right")||Rs.RIGHT===n&&o.hasClass("pull-left"))&&qs(e,t.item.parentId,!1)}}(t,o,c,a);break;case Rs.DOWN:case Rs.UP:if(r&&c===Rs.DOWN){var u=zs(e,e[0].id);qs(t,u.item.id,!d().isEmpty(u.items))}else o&&function(e,t,n,i){var r=Us(e,t.items,t.position,Rs.UP===n?-1:1);i.removeClass("open"),qs(e,r.id,!d().isEmpty(r.items))}(t,o,c,a);break;case Rs.RETURN:!r&&Hs(t,c);break;case Rs.ESC:Hs(t,c)}}}},Vs=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=m.ZP.GUID(4);t.attr("data-js-id",i);var r=Ks(t).children(Ls);if(0!==r.length){var a=[];return r.each((function(){a.push(e(l()(this),i))})),{id:i,items:a,parentId:n}}return{id:i,parentId:n}},Ks=function(e){var t=e.find(".dropdown-menu").first();return"menu"===t.attr("role")?t:t.find('ul[role="menu"]').first()},Ys=function(e){var t=[],n=e.hasClass("btn-group")?e:e.find(".btn-group").first();return Ks(n).children(Ls).each((function(){t.push(Vs(l()(this)))})),t},Js=function(){l().makeArray(l()('[data-toggle="dropdown"]')).forEach((function(e){var t=l()(e.parentNode);t.hasClass("open")&&t.removeClass("open")}))},Qs=function(e){var t=Ys(e);return y.Z.on(e,"mouseover.dd-helper",'a[role="menuitem"]',(function(e){var t=l()(e.target);Bs(t.closest("ul")),t.attr("aria-expanded")&&t.attr("aria-expanded","true")})),y.Z.on(e,"mouseout.dd-helper",'a[role="menuitem"]',(function(e){var t=l()(e.target);Bs(t.closest("ul"))})),y.Z.on(e.children('[data-toggle="dropdown"]'),"keydown.dd-helper",(function(e){var t=l()(e.target),n=e.which||e.keyCode;n!==Rs.SPACE&&n!==Rs.RETURN||(e.stopPropagation(),Js(),t.focus(),t.closest(".btn-group").addClass("open"))})),y.Z.on(e,"keydown.dd-helper",(function(n){d().defer((function(){Gs(t,e,n)}))})),y.Z.on(l()(document),"keydown.dd-helper",(function(e){if(!/input|textarea/i.test(e.target.tagName)){var t=e.which||e.keyCode;t!==Rs.SPACE&&t!==Rs.RETURN||Js()}})),function(){return y.Z.off(e,".dd-helper")}};var Xs=f().compile('<div class="btn-group">\n    {{#each items}}\n        {{#if dropdown}}\n            <div class="btn-group">\n                <button type="button" class="btn dropdown-toggle {{#unless items.length}}disabled{{/unless}}" data-toggle="dropdown">\n                    {{title}}\n                    <span class="caret"></span>\n                </button>\n                <ul class="dropdown-menu" role="menu">\n                    {{#each items}}\n                        <li role="menuitem"><a role="menuitem" href="javascript:void(0)" data-filter="{{this.filter}}">{{title}}</a></li>\n                    {{/each}}\n                </ul>\n            </div>\n        {{else}}\n            <button type="button" class="btn {{#if default}}default-filter{{/if}}" data-filter="{{this.filter}}">{{title}}</button>\n        {{/if}}\n    {{/each}}\n</div>\n');function $s(e,t,n){function i(){var t=l()(this),i=t.is("button")&&t;e.find("button.btn").removeClass("btn-primary"),i&&i.addClass("btn-primary"),n&&n(t.data("filter"))}this.container=e,e.append(l()(Xs({items:t})));var r=d().find(t,{default:!0});r?d().defer((function(){i.call(e.find(".default-filter"))})):d().each(t,(function(e){if(e.items&&(r=d().find(e.items,{default:!0})))return d().defer((function(){n(r.filter)})),!1})),y.Z.on(this.container,"click","[data-filter]",i),this._unbindDropdownEvents=Qs(e.find(".btn-group"))}var eo=$s.prototype;eo.updateState=function(e){this.container.find("button.btn").removeClass("btn-primary"),this.container.find('button[data-filter="'+e+'"]').addClass("btn-primary")},eo.destroy=function(){this.container&&(y.Z.off(this.container,"click",'[data-filter="filter"]'),this._unbindDropdownEvents&&y.Z.unsubscribe(this._unbindDropdownEvents),this.container.remove(),this.container=null)};const to=$s;n(93132);var no=n(44442).A,io=Qi.Z.get("lxcSoftwareRepoUrl");n(44830);var ro=f().compile('<div class="install-software-message need-subscription">\n    <h4>Installing Software and Box access is only available if you have an active subscription.</h4>\n    <button class="btn close-connection btn-primary" tabindex="0" data-pos="1">Close</button>\n    <a href=\'/home/billing\' class="btn subscribe" tabindex="0" data-pos="0" data-target="dashboard">Subscribe Today</a>\n</div>\n'),ao=f().compile('<div id="install-software">\n    <h2>Install software</h2>\n    <section class="search">\n        <div id="filter-bar" class="pull-left"></div>\n        <div id="install-software-filter-bar" class="pull-left"></div>\n        <div class="pull-right search-container">\n            <label for="search" class="search">Search:</label>\n            <input id="search" type="text" class="software-search" placeholder="Search ..." autofocus>\n        </div>\n    </section>\n    <section class="parts-list"></section>\n</div>\n'),so=f().compile('<table class="tablesorter table table-striped" data-table-group="projects-table">\n    <thead>\n    <tr>\n        <th>Name</th>\n        <th data-sorter="false">Install</th>\n        <th data-sorter="false">Version</th>\n        <th>Category</th>\n    </tr>\n    </thead>\n    <tbody>\n    {{#each parts}}\n    <tr class="data-row" data-name="{{name}}" data-script="{{script}}">\n        <td data-text="{{name}}" class="name">\n            <h5>{{name}}</h5>\n            <p>{{description}}</p>\n        </td>\n        <td>\n            <p class="hide">U</p>\n            <button class="qtip-here install-button"\n                data-action="install"\n                title="Install"\n                aria-label="Install {{name}} {{description}} version {{version}} category {{category}}"\n            >\n                <i class="ss-icon ss-downloadcloud" aria-hidden="true"></i>\n            </button>\n        </td>\n        <td class="version">\n            <p>{{version}}</p>\n        </td>\n        <td>{{category}}</td>\n    </tr>\n    {{/each}}\n    </tbody>\n</table>\n'),oo=function e(t,n){if(!(this instanceof e))return new e(t,n);this.container=t,this.filename=n,this.events=[],this._inited=!1,this._partsList=[],this.categories={data_stores:"Data Stores",deployment:"Deployment",development_tools:"Dev Tools",libraries:"Libraries",shells:"Shells",programming_languages:"Languages",utilities:"Utilities",web_development:"Web Dev",IDE:"IDE"}};var co=oo.prototype;co.activate=function(){this._inited||this.container.block(),this._inited=!0;var e=this;return O.api.getCachedSubscriptions().then((function(t){var n=i.Z.currentUser.get("details").get("created_at"),r=Qi.Z.get("boxAccessCutoffDate"),a=O.hasAnyUsableSubscription(t);i.Z.currentUser.isInTrial||a||n<r?e._loadList().then((function(t){e.container.unblock(),e._partsList=t.packages,e._buildElements(),e._renderList(e._partsList),e._bindEvents(e._partsList)})).catch((function(){e.container.unblock();k.Z.error('We are unable to fetch data from the server right now. Please try again. If problems persist, contact us <a href="mailto:help@codio.com">help@codio.com</a>.')})):(e.container.unblock(),e.container.html(ro()),e._unbindEvents(),d().bind(e.events.push,e.events)(y.Z.on(e.container,"click",".close-connection",(function(){y.Z.publish("tab:close_by_path:"+e.filename)}))));d().delay((function(){e.container.find(".software-search").focus()}),100)}))},co.deactivate=function(){},co.close=function(){this.container.find(".qtip-here").qtip("destroy",!0),this.container.empty(),this.container.unblock(),this._unbindEvents()},co._unbindEvents=function(){d().forEach(this.events,(function(e){y.Z.off(e)})),this.events.length=0},co._buildElements=function(){if(this.container.is(":empty")){this._element=l()(ao({})),this._element.find(".qtip-here").qtip(),this.container.append(this._element);var e=d()(this._partsList).map((function(e){return e.category})).uniq().compact().sort().value(),t=[];d().each(e,(function(e){t.push({title:e,filter:'category:"'+e+'"'})}));var n=[{title:"All",filter:"",default:!0},{title:"Category",dropdown:!0,items:t}],i=this;this.searchFilterBar=new to(i._element.find("#filter-bar"),n,i._applyFilter.bind(i))}},co._bindEvents=function(e){this._unbindEvents();var t=d().bind(this.events.push,this.events),n=this._element.find(".software-search"),i=this.search=Ms(e),r=this._bindedSearchHandler=this._searchHandler.bind(this,i,n);t(y.Z.on(n,"input",r)),d().isEmpty(n.val())||r(),this._bindListActions()},co._bindListActions=function(){var e=this;d().each(["install"],(function(t){var n='[data-action="'+t+'"]',i=e._element.find(n),r=e._action.bind(e,t);y.Z.on(i,"click",(function(){var e=l()(this).closest("tr"),t=e.data("name"),n=e.data("script");r(t,n)}))}))},co._action=function(e,t,n){if("install"===e)this.container.find(".qtip-here").qtip("destroy",!0),(0,Fs.Z)((i=io,r=n,a=d().compact(i.split("/")).pop(),s="master"!==a?" BRANCH=".concat(a," "):"","sudo ".concat(s,' bash -c "$(curl -fsSL ').concat(i,'tools/ansible.sh)" ').concat(r)),"Installing "+t);var i,r,a,s},co._loadList=function(){var e=m.ZP.promise.deferred();return l().getJSON(io+"package_list.json").then((function(t){t.packages=d().values(t.packages),e.resolve(t)})).fail((function(t){return e.reject(t)})),e.promise},co._renderList=function(e){this._datatable=l()(so({parts:e})).tablesorter({theme:"basic",sortList:[[0,0]],widgets:["saveSort"],headers:{0:{sorter:"text"},1:{sorter:"text"},2:{sorter:"text"}},textSorter:function(e,t){return e.localeCompare(t)}}),this._datatable.find(".qtip-here").qtip(),this._element.find(".parts-list").empty().append(this._datatable)},co._applyFilter=function(e){var t=this._element.find(".software-search");t.val(e),this._searchHandler(this.search,t)},co._searchHandler=function(e,t){var n=t.val();this.searchFilterBar.updateState(n),e&&e.search(n,this._searchFinishedHandler.bind(this))},co._searchFinishedHandler=function(e){this._renderList(e),this._bindListActions()},y.Z.subscribe("command:install-software",(function(){no.execute("file","open",{ext:"install-software",filename:"Install Software"})}));const lo=oo;const uo=function(e,t,n,r,a){var s=i.Z.currentProject;if(s&&s.isAdmin)return new lo(e,t,n,r,a)};var po;i.Z.register({info:xs,hotkeys:Cs,get:(po=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uo);case 1:case"end":return e.stop()}}),e)}))),function(){return po.apply(this,arguments)})});const fo=JSON.parse('{"name":"codio-debugger","description":"Debugger","codio":{"global":true,"noFile":true,"title":"Debugger Settings","urls":"debugger"}}');var ho=n(8246);var mo,go,vo=n(240),bo=n.n(vo),yo=n(44442).A,wo=n(68058).I_,_o=y.Z.create(n(86868)),ko="menu-debug-button",Po={id:"",title:"",command:"",onOff:{defaultValue:!1,toggle:!1}},Zo={title:"divider"},xo={title:"Configure....",command:"file:open",params:{ext:"debugger",filename:""},onOff:{defaultValue:!1,toggle:!1}};function Co(e,t){void 0!==t&&function(e){var t=i.Z.currentProject.guid;wo.set("default-debugger-"+t,e)}(t);var n,r=(n=i.Z.currentProject.guid,wo.get("default-debugger-"+n)),a=d().find(e,(function(e){return e.id==="debug-"+r}));void 0===a&&(a=d().find(e,(function(e){return"divider"!==e.title&&"Configure...."!==e.title}))),void 0===a&&(a=e[0]),_.ZP.switchItemInGroup(ko,a.id),go=a,_.ZP.setTitle(ko,a.title)}y.Z.subscribe("command:debug:menu-start",(function(e,t){Co(mo,t.arg.data.uuid),_o.startDebug(t.arg.data)})),y.Z.subscribe("command:debugger:executeByName",(function(e,t){var n=d().find(mo,{title:t.title});if(void 0!==n){var i=n.params.data;Co(mo,i.uuid),_o.startDebug(i)}})),y.Z.subscribe("command:debugger:execute",(function(){var e=go,t=e.command.split(":"),n=t.shift();t=t.join(":"),yo.execute(n,t,e.params)}));const So=function(e){var t=[xo],n=d().map(e,(function(e){return function(e,t){var n=d().cloneDeep(Po),i=e.name.trim(),r=e.uuid;return n.id="debug-"+r,n.title=i,n.command="debug:menu-start",n.params={data:e},t&&(n.onOff.defaultValue=!0),n}(e)}));n.length>0&&(t.push(Zo),t=t.concat(n)),mo=t,_.ZP.setItems(ko,t),Co(t)};var Eo=f().compile('<p class="alert alert-info{{#if targets}} hide{{/if}}">\n    You haven\'t yet created a Debugger Target.\n</p>\n<ul>\n    {{#each targets}}\n    <li data-uuid="{{uuid}}" id="{{uuid}}">\n        <h4>{{name}}</h4>\n\n        <div>\n            <section class="btn-toolbar">\n                <div class="btn-group">\n                    <button class="btn hint hint-top" data-action="debug" aria-label="Start debug" title="Start debug">\n                        <span class="hint-text">Start debug</span>\n                        debug\n                    </button>\n                </div>\n                <div class="btn-group">\n                    <button class="btn hint hint-top" data-action="edit" aria-label="Edit target" title="Edit target">\n                        <span class="hint-text">Edit target</span>\n                        <span class="iconify-inline" data-icon="@codio:mdi:pencil-outline"></span>\n                    </button>\n                </div>\n                <div class="btn-group">\n                    <button class="btn hint hint-top" data-action="remove" aria-label="Delete Debugger Target" title="Delete Debugger Target">\n                        <span class="hint-text">Delete</span>\n                        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n                    </button>\n                </div>\n            </section>\n\n            <p>\n                {{#equals type \'PYTHON\'}}\n                Command arguments: {{command}}\n                {{/equals}}\n                {{#equals type \'PYTHON3\'}}\n                Command arguments: {{command}}\n                {{/equals}}\n                {{#equals type \'JAVA\'}}\n                Connection string: {{command}}\n                {{/equals}}\n                {{#equals type \'NODEJS\'}}\n                Command arguments: {{command}}\n                {{/equals}}\n                {{#equals type \'DENO\'}}\n                Command arguments: {{command}}\n                {{/equals}}\n                {{#equals type \'GDB\'}}\n                Command arguments: {{command}}\n                {{/equals}}\n            </p>\n            {{#if before}}\n                <p>Before launch: {{before}}</p>\n            {{/if}}\n\n        </div>\n    </li>\n    {{/each}}\n</ul>\n'),Io=".codio";var To={parent:null,list:null,callback:null,targets:[],load:function(){var e=i.Z.currentProject,t=this;e.exists(Io)?e.file(Io).then((function(e){try{var n=JSON.parse(function(e){return(new(bo())).strip(e)}(e.content));n.debugger instanceof Array&&(t.targets=n.debugger)}catch(e){t.targets=[]}So(t.targets),t.render()})):So([])},render:function(){if(this.parent){var e=this,t=l()(Eo({targets:this.targets}));this.parent.find("#debugger-target-list").html(t),y.Z.on(t,"click.debugger","button.btn",(function(){var t=l()(this).closest("li").data("uuid"),n=l()(this).data("action");e.callback(n,t)}))}}};y.Z.subscribe("project:open",(function(){To.load()}));var jo=n(75121),Ao=n.n(jo);const Oo=JSON.parse('[{"type":"JAVA_SINGLE","slug":"Single Java File","command":"","before":"","single":true},{"type":"PYTHON","slug":"Python 2","command":"your_script.py","before":""},{"type":"PYTHON3","slug":"Python 3","command":"your_script.py","before":""},{"type":"JAVA","slug":"Java","command":"5105","before":""},{"type":"NODEJS","slug":"NodeJS","command":"app.js","before":""},{"type":"DENO","slug":"DENO","command":"app.ts","before":""},{"type":"C_SINGLE","slug":"Single C File","command":"","before":"","single":true},{"type":"CPP_SINGLE","slug":"Single C++ File","command":"","before":"","single":true},{"type":"GDB","slug":"C/C++","command":"","before":""}]');var Do=n(42052);const No="JAVA",Mo="JAVA_SINGLE",Fo="5105",Ro="PYTHON",Lo="PYTHON3",Uo="NODEJS",Bo="DENO",qo="GDB",Ho="C_SINGLE",Wo="CPP_SINGLE",zo="No local variables",Go="Initializing",Vo="Cant init connection to debugger tool, probably firewall error",Ko="Debug tool offline, trying to reconnect",Yo="Debugger ready",Jo="/home/codio/workspace/",Qo="Program raised an unhandled exception.",Xo="Program is paused",$o="Program is running",ec={RUNNING:"running",PAUSED:"paused",EXITED:"exited"},tc="{{filepath}}",nc="-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=";var ic=f().compile('<form action="/" method="post" id="debugger-target-creation" class="form-horizontal" novalidate>\n\n    <h3 class="page-header">\n        {{#equals current.uuid undefined}}\n            Creating a New Target\n        {{/equals}}\n        {{#if current.uuid}}\n            Configure Target\n        {{/if}}\n        <small><a href="https://docs.codio.com/common/develop/ide/debugger/debugger.html#debugger" target="_blank"><i class="ss-icon">help</i> Help</a></small>\n    </h3>\n\n    <fieldset id="debugger-target-common-inputs">\n\n        <input type="hidden" name="debug-target-id" id="uid" value="{{current.uuid}}" data-required="true">\n\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="type">\n                Debugger type: <i class="ss-icon">help</i>\n                <span class="hint-text">Select programming language.</span>\n            </label>\n            <div class="controls">\n                <select name="debug-target-type" id="type" required data-required="true">\n                    <option value="" {{#equals current.name undefined}}selected="true"{{/equals}}>Select type...</option>\n                    {{#each list}}\n                        <option value="{{type}}" {{#equals ../current.type type}}selected="true"{{/equals}}>{{slug}}</option>\n                    {{/each}}\n                </select>\n            </div>\n        </div>\n\n        {{#if selected}}\n\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="name">\n                Name: <i class="ss-icon">help</i>\n                <span class="hint-text">Used to identify this debugger target.</span>\n            </label>\n            <div class="controls">\n                <input type="text" name="debug-target-name" id="name" class="input-xlarge" value="{{current.name}}" placeholder="Target name..." maxlength="80" required data-required="true">\n            </div>\n        </div>\n\n        {{#equals current.type \'PYTHON\'}}\n        {{> python}}\n        {{/equals}}\n        {{#equals current.type \'PYTHON3\'}}\n        {{> python}}\n        {{/equals}}\n        {{#equals current.type \'JAVA\'}}\n        {{> java}}\n        {{/equals}}\n        {{#equals current.type \'JAVA_SINGLE\'}}\n        {{> java_single}}\n        {{/equals}}\n        {{#equals current.type \'NODEJS\'}}\n        {{> nodejs}}\n        {{/equals}}\n        {{#equals current.type \'DENO\'}}\n        {{> deno}}\n        {{/equals}}\n        {{#equals current.type \'C_SINGLE\'}}\n        {{> cpp_single}}\n        {{/equals}}\n        {{#equals current.type \'CPP_SINGLE\'}}\n        {{> cpp_single}}\n        {{/equals}}\n        {{#equals current.type \'GDB\'}}\n        {{> gdb}}\n        {{/equals}}\n        {{/if}}\n\n    </fieldset>\n\n    <div class="form-actions">\n        {{#if selected}}\n            <button type="submit" class="btn btn-primary">\n                {{#equals current.uuid undefined}}\n                Create Target\n                {{/equals}}\n                {{#if current.uuid}}\n                Save Target\n                {{/if}}\n            </button>\n        {{/if}}\n        <button type="reset" class="btn">Cancel</button>\n    </div>\n\n</form>\n'),rc={cpp:Wo,c:Ho};function ac(e,t){m.ZP.addErrorToInput(e,t),e.focus()}var sc,oc={parent:null,form:null,callback:null,render:function(e){var t=this,n=this.parent.find("#debugger-target-create");if((e=d().cloneDeep(e))&&e.type===No)if(e.single)e.type=Mo,e.command=e.path,e.before=e.args;else{var i=e.command,r=i.match(/.+address=([0-9]+)/);r&&(i=r[1],e.command=i),e.agent=nc+i}e&&e.type===qo&&e.single&&(e.type=rc[e.lang],e.command=e.sourcePath,e.before=e.args);var a=l()(ic({list:Oo,current:e||{},selected:!!e}));n.html(a),this.form=a,y.Z.on(a.find("button[type=reset]"),"click.debugger",(function(){n.empty()})),y.Z.on(a,"change.debugger","#type",(function(){var e=d().find(Oo,{type:l()(this).val()});""!==l()(this).val()&&t.render(e)})),y.Z.on(a,"change.debugger","#command",(function(){a.find("#agent").val(nc+a.find("#command").val())})),y.Z.on(a,"submit.debugger",l().proxy(this._onSubmission,null,this))},_commonTarget:(sc=(0,r.Z)(o().mark((function e(t,n,i,r){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={type:n,command:t,before:i},r&&(a=d().merge(a,r)),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)}))),function(e,t,n,i){return sc.apply(this,arguments)}),_pythonTarget:function(e,t,n){return this._commonTarget(e,t,n)},_nodejsTarget:function(e,t,n){return this._commonTarget(e,t,n)},_denoTarget:function(e,t,n){return this._commonTarget(e,t,n)},_javaTarget:function(e,t,n){return e=nc+e,this._commonTarget(e,t,n)},_singleJavaTarget:function(e,t,n,r,a){var s=this,o=e;d().endsWith(o,".java")||o===tc||(o+=".java");var c=function(){if(!a)return"";var e=d().endsWith(a,"/")?"":"/";return a+e}(),u=c+o;return function(){if(d().includes(o,tc)){if(""!==c){var t="Only empty root folder allowed with {{filepath}}";return ac(l()("#root-folder"),t),Promise.reject(new Error(t))}if(e!==tc){var n="Only {{filepath}} allowed";return ac(r,n),Promise.reject(new Error(n))}return Promise.resolve({className:tc})}if(!i.Z.currentProject.exists(u)){var a="File not exists";return ac(r,a),Promise.reject(new Error(a))}return i.Z.currentProject.file(u).then((function(e){return Do.Z.parseClassInformation(e.content,u)}))}().then((function(i){var r=i.className;i.packageName&&(r=i.packageName+"."+r),t=No;var c=n;n=(a?"cd "+a+" && ":"")+"javac -g -d . "+o+" && java "+nc+Fo+" "+r+" "+n;var l=a?e:u;return e=nc+Fo,s._commonTarget(e,t,n,{single:!0,path:l,args:c,rootFolder:a})}))},_gdbTarget:function(e,t,n){return this._commonTarget(e,t,n)},_singleGdbTarget:function(e,t){var n=t.executablePath+" "+t.args;return this._commonTarget(n,qo,t.beforeCmd,{single:!0,lang:e,additionalCompilerFlags:t.additionalCompilerFlags,sourcePath:t.sourcePath,args:t.args})},_singleCppTarget:function(e,t,n,i){var r,a,s=e,o=n,c=m.ZP.path.parse(s);if("cpp"===c.extension||"cc"===c.extension){var l=""===c.dir?"":c.dir+"/",u=i&&i.replace('"','"\\""'),d="/tmp/make"+Ao()(Math.random()),p=l+m.ZP.path.getFileName(c.name);a=["mkdir -p "+d+"/"+l,"ln -sf ~/workspace/"+s+" "+d+"/"+s,"cd "+d,'CXXFLAGS="-g '+u+'" make '+p].join(" && "),r=d+"/"+p}else a="g++ -g "+s+" -o "+(r="/tmp/program"+Ao()(Math.random()));return this._singleGdbTarget("cpp",{sourcePath:s,args:o,beforeCmd:a,executablePath:r,additionalCompilerFlags:i})},_singleCTarget:function(e,t,n,i){var r,a,s=e,o=n,c=m.ZP.path.parse(s);if("c"===c.extension){var l=""===c.dir?"":c.dir+"/",u=i&&i.replace('"','"\\""'),d="/tmp/make"+Ao()(Math.random()),p=l+m.ZP.path.getFileName(c.name);a=["mkdir -p "+d+"/"+l,"ln -sf ~/workspace/"+s+" "+d+"/"+s,"cd "+d,'CFLAGS="-std=c11 -g -lm '+u+'" make '+p].join(" && "),r=d+"/"+p}else a="gcc -std=c11 -g -lm "+s+" -o "+(r="/tmp/program"+Ao()(Math.random()));return this._singleGdbTarget("c",{sourcePath:s,args:o,beforeCmd:a,executablePath:r,additionalCompilerFlags:i})},_fetchCommandInformation:function(e,t,n,i,r){switch(t){case Ro:case Lo:return this._pythonTarget(e,t,n,i);case No:return this._javaTarget(e,t,n,i);case Mo:return this._singleJavaTarget(e,t,n,i,r.rootFolder);case Uo:return this._nodejsTarget(e,t,n,i);case Bo:return this._denoTarget(e,t,n,i);case qo:return this._gdbTarget(e,t,n,i);case Wo:return this._singleCppTarget(e,t,n,r.additionalCompilerFlags,i);case Ho:return this._singleCTarget(e,t,n,r.additionalCompilerFlags,i)}},_onSubmission:function(e,t){t.preventDefault(),t.stopPropagation();var n=l()(this),i=n.find("#type"),r=n.find("#name"),a=n.find("#command"),s=i.val(),o=r.val(),c=a.val(),u=n.find("#before").val(),d=n.find("#uid").val();if(!s)return ac(i,"Select a type");if(!o)return ac(r,"Enter a name");if(!c)return ac(a,a.data().error||"Enter a command");var p={rootFolder:n.find("#root-folder").val(),additionalCompilerFlags:n.find("#additional-compiler-flags").val()};e._fetchCommandInformation(c,s,u,a,p).then((function(t){t.uuid=d||m.ZP.GUID(),t.name=o,e.callback(t),n.empty()}))}};var cc=y.Z.create(n(86868)),lc=f().compile('<div id="debugger-targets-editor">\n\n    <h2>\n        Debugger Targets\n        <button id="debugger-create-button" class="btn btn-primary" autofocus>Create...</button>\n    </h2>\n\n    <p>\n        A <i>Debugger Target</i> defines the configuration for a specific debugger type.\n    </p>\n\n    <hr>\n\n    <div id="debugger-target-create">\n    </div>\n\n    <div id="debugger-target-list">\n    </div>\n\n</div>\n');ho.Z.registerPartial("java",'<div class="control-group">\n    <label class="control-label hint hint-top" for="command">\n        Debugger port: <i class="ss-icon">help</i>\n        <span class="hint-text">Specify port for attach</span>\n    </label>\n    <div class="controls">\n        <input type="number" name="debug-target-command" id="command" class="input-xlarge" value="{{current.command}}" placeholder="Command arguments..." maxlength="80" required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="agent">\n        Debugger instruction:\n    </label>\n    <div class="controls">\n        <input readonly type="text" name="debug-target-agent" id="agent" class="input-xlarge" value="{{current.agent}}" placeholder="Command arguments..." maxlength="80" required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="before">\n        Launch: <i class="ss-icon">help</i>\n        <span class="hint-text">Command line command to run before start debugger. It can be command for run your Java application: java -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5105 MyClass</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-before" id="before" class="input-xlarge" value="{{current.before}}" placeholder="Compile and start command..." maxlength="800" required data-required="true">\n    </div>\n</div>\n'),ho.Z.registerPartial("java_single",'<div class="control-group">\n    <label class="control-label hint hint-top" for="root-folder">\n        Root folder: <i class="ss-icon">help</i>\n        <span class="hint-text">Java class root folder. Leave empty for project root</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-root-folder" id="root-folder" class="input-xlarge" value="{{current.rootFolder}}" placeholder="Root folder..." maxlength="80" required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="command">\n        Classname or file path: <i class="ss-icon">help</i>\n        <span class="hint-text">Specify Classname or file path</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-command" id="command" class="input-xlarge" value="{{current.command}}" placeholder="Classname..." maxlength="80" required data-required="true" data-error="Enter classname or file path">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="before">\n        Arguments: <i class="ss-icon">help</i>\n        <span class="hint-text">Pass arguments to program</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-before" id="before" class="input-xlarge" value="{{current.before}}" placeholder="Arguments..." maxlength="800" required data-required="true">\n    </div>\n</div>\n'),ho.Z.registerPartial("python",'<div class="control-group">\n    <label class="control-label hint hint-top" for="command">\n        Command arguments: <i class="ss-icon">help</i>\n        <span class="hint-text">Path to your script for debug</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-command" id="command" class="input-xlarge" value="{{current.command}}" placeholder="Command arguments..." maxlength="80" required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="before">\n        Before launch: <i class="ss-icon">help</i>\n        <span class="hint-text">Command line command for run before start debugger</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-before" id="before" class="input-xlarge" value="{{current.before}}" placeholder="Before launch..." maxlength="800" required data-required="true">\n    </div>\n</div>'),ho.Z.registerPartial("nodejs",'<div class="control-group">\n    <label class="control-label hint hint-top" for="command">\n        Command arguments: <i class="ss-icon">help</i>\n        <span class="hint-text">Path to your script for debug</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-command" id="command" class="input-xlarge" value="{{current.command}}" placeholder="Command arguments..." maxlength="80" required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="before">\n        Before launch: <i class="ss-icon">help</i>\n        <span class="hint-text">Command line command for run before start debugger</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-before" id="before" class="input-xlarge" value="{{current.before}}" placeholder="Before launch..." maxlength="800" required data-required="true">\n    </div>\n</div>'),ho.Z.registerPartial("deno",'<div class="control-group">\n  <label class="control-label hint hint-top" for="command">\n      Command arguments: <i class="ss-icon">help</i>\n      <span class="hint-text">Path to your script for debug</span>\n  </label>\n  <div class="controls">\n      <input type="text" name="debug-target-command" id="command" class="input-xlarge" value="{{current.command}}" placeholder="Command arguments..." maxlength="80" required data-required="true">\n  </div>\n</div>\n\n<div class="control-group">\n  <label class="control-label hint hint-top" for="before">\n      Before launch: <i class="ss-icon">help</i>\n      <span class="hint-text">Command line command for run before start debugger</span>\n  </label>\n  <div class="controls">\n      <input type="text" name="debug-target-before" id="before" class="input-xlarge" value="{{current.before}}" placeholder="Before launch..." maxlength="800" required data-required="true">\n  </div>\n</div>'),ho.Z.registerPartial("gdb",'<div class="control-group">\n    <label class="control-label hint hint-top" for="command">\n        Launch: <i class="ss-icon">help</i>\n        <span class="hint-text">Path to your program for debug</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-command" id="command" class="input-xlarge" value="{{current.command}}" placeholder="./my_program arg1 arg2 arg3" maxlength="256" required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="before">\n        Before launch: <i class="ss-icon">help</i>\n        <span class="hint-text">Command line command for run before start debugger</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-before" id="before" class="input-xlarge" value="{{current.before}}" placeholder="Before launch..." maxlength="800" required data-required="true">\n    </div>\n</div>\n'),ho.Z.registerPartial("cpp_single",'<div class="control-group">\n    <label class="control-label hint hint-top" for="command">\n        File path: <i class="ss-icon">help</i>\n        <span class="hint-text">Specify file path</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-command" id="command" class="input-xlarge" value="{{current.command}}" placeholder="File path..." required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="before">\n        Arguments: <i class="ss-icon">help</i>\n        <span class="hint-text">Pass arguments to program</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-before" id="before" class="input-xlarge" value="{{current.before}}" placeholder="Arguments..." maxlength="800" required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="additional-compiler-flags">\n        Additional compiler flags: <i class="ss-icon">help</i>\n        <span class="hint-text">Pass flags (CXXFLAGS) to GNU C/C++ compiler</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-additional-compiler-flags" id="additional-compiler-flags" class="input-xlarge" value="{{current.additionalCompilerFlags}}" placeholder="Compiler flags..." maxlength="800" required data-required="true">\n    </div>\n</div>\n');var uc=function e(t){if(!i.Z.currentUser.isAnonymous()){var n=i.Z.currentProject.access.control;if("OWNER"===n||"ADMIN"===n||"WRITE_FILES"===n){if(!(this instanceof e))return new e(t);this.handlers=[],this.container=t;var r,a,s=l()(lc());this.container.append(s),this.form=(r=t,a=this._onEdit.bind(this),oc.parent=r,oc.callback=a,oc),this.list=function(e,t){To.parent=e,To.callback=t;var n=d().debounce(To.load.bind(To),400);return d().forEach(["file:change:","item:created:","item:moved:","item:moved:#file:"],(function(e){y.Z.subscribe(e+Io,n)})),To}(t,this._onItemAction.bind(this)),this.list.load()}}},dc=uc.prototype;dc._onItemAction=function(e,t){if("remove"===e)d().remove(this.list.targets,(function(e){return e.uuid===t})),cc.appendSection({section:"debugger",data:this.list.targets});else if("edit"===e){var n=d().find(this.list.targets,(function(e){return e.uuid===t}));this.form.render(n)}else if("debug"===e){var i=d().find(this.list.targets,(function(e){return e.uuid===t}));i&&cc.startDebug(i)}},dc._onEdit=function(e){d().remove(this.list.targets,(function(t){return t.uuid===e.uuid})),this.list.targets.push(e),cc.appendSection({section:"debugger",data:this.list.targets})},dc._bindEvents=function(){var e=this;y.Z.on(this.container,"click.debugger","#debugger-create-button",(function(){e._renderCreateForm()}))},dc._renderCreateForm=function(){this.form.render()},dc.activate=function(){if(!this.container){var e=new Error("No permission");return e.close=!0,Promise.reject(e)}this.render();var t=this;d().delay((function(){t.container.find("#debugger-create-button").focus()}),100)},dc.deactivate=function(){},dc.close=function(){},dc.render=function(){this._bindEvents()};const pc=uc;var fc=n(82244),hc=n(4728);n(57568);var mc=n(4728).aO,gc=function e(t,n,i){if(i||(i={}),i.isEditable=!!i.isEditable&&i.isEditable,i.prepend=!!i.prepend&&i.prepend,i.emptyMessage=d().isEmpty(i.emptyMessage)?"Empty":i.emptyMessage,n||(n={}),!(this instanceof e))return new e(t,n,i);var r={core:{check_callback:i.isEditable,multiple:!0,themes:{dots:!1,responsive:!1},data:[]},plugins:["search","unique","guttericons","wholerow"]};this.emptyDiv=l()('<div class="codio-debugger-tree-empty"></div>').text(i.emptyMessage),this.stringMessageDiv=l()('<div class="codio-debugger-tree-empty"></div>'),this.container=t,this.treeContainer=l()('<div class="codio-debugger-tree"></div>'),this.treeDiv=this.treeContainer.jstree(r);var a=this,s=!1;this.treeDiv.on("activate_node.jstree",(function(e,t){if(i.isEditable){s=!0;var n=t.node.data,r=t.node.text;a.tree.edit(t.node,n,(function(e,o,c){if(e.text===n||c)a.tree.rename_node(t.node,r);else if("function"==typeof i.onChange){var l=mc.CHANGE;i.onChange(e.text,l,n)}s=!1}))}})).on("hover_node.jstree",(function(e,t){!s&&d().isFunction(i.onRemove)&&a.showRemoveButton(t.node,(function(){i.onRemove(t.node.data)}))})).on("dehover_node.jstree",(function(e,t){!s&&d().isFunction(i.onRemove)&&a.hideRemoveButton(t.node)})),this.tree=l().jstree.reference(this.treeDiv);var o=i.prepend?"prepend":"append";this.container[o](this.emptyDiv,this.stringMessageDiv,this.treeContainer),this.setData(n)},vc=gc.prototype;vc.createNodes=function e(t){var n=[];if(d().isArray(t))d().each(t,(function(t){n.push(e(t))}));else if(d().isObject(t)){var i=t.type?" <em>("+d().escape(t.type)+")</em>":"",r=d().escape(d().trim(t.name||t.watch))+i;if(null===t.value||d().isArray(t.value))n=d().isEmpty(t.value)?{text:r+" : <i>empty</i>",data:r}:{text:r,children:e(t.value)};else{var a=d().escape(d().trim(t.value));n=d().isEmpty(r)?{text:a}:{text:r+" : "+a,data:r}}}else n={text:d().escape(d().trim(t))};return n},vc.show=function(){this.treeContainer.removeClass("hide"),this.emptyDiv.removeClass("hide"),this.stringMessageDiv.removeClass("hide")},vc.hide=function(){this.emptyDiv.addClass("hide"),this.treeContainer.addClass("hide"),this.stringMessageDiv.addClass("hide")},vc.setData=function(e){if(d().isEmpty(e))return this.emptyDiv.removeClass("hide"),this.treeContainer.addClass("hide"),void this.stringMessageDiv.addClass("hide");d().isString(e)?(this.stringMessageDiv.text(e).removeClass("hide"),this.emptyDiv.addClass("hide"),this.treeContainer.addClass("hide")):(this.emptyDiv.addClass("hide"),this.treeContainer.removeClass("hide"),this.stringMessageDiv.addClass("hide")),this.tree.settings.core.data=e,this.tree.refresh(!0)},vc.showRemoveButton=function(e,t){var n=this,i=this.tree.get_node(e,!0).find(".jstree-wholerow"),r=l()('\n<span aria-label="Remove" title="Remove" class="icon-removeNode">\n  <span class="iconify icon-removeNode" data-icon="@codio:mdi:trash-can-outline"></span>\n</span>\n  ');i.append(r),y.Z.on(i,"click.remove-node",".iconify",(function(){n.tree.delete_node(e),t()}))},vc.hideRemoveButton=function(e){this.tree.get_node(e,!0).find(".icon-removeNode").remove()};const bc=gc;var yc=f().compile('<div class="codio-debugger-breakpoints-list">\n  {{#each data}}\n  <div class="codio-debugger-breakpoints-item">\n    <input class="codio-debugger-breakpoint-checkbox" type="checkbox" id="codio-debugger-breakpoint-{{path}}" data-path="{{path}}" data-line="{{line}}" {{#if active}}checked{{/if}}>\n    <label class="codio-debugger-breakpoint-label" for="codio-debugger-breakpoint-{{path}}">{{path}} : {{add1 line}}</label>\n    <a href="javascript:void(0)" class="codio-debugger-breakpoint-remove" data-path="{{path}}" data-line="{{line}}">Remove</a>\n  </div>\n  {{/each}}\n</div>'),wc=function e(t,n){if(!(this instanceof e))return new e(t,n);this.content=l()(yc()),this._options=n,this.container=t,this.container.append(this.content)},_c=wc.prototype;_c.bindEvents=function(){var e=this;this.content.find('input[type="checkbox"]').change((function(){var t=l()(this).is(":checked"),n=e._options.onChange;if(d().isFunction(n)){var i=l()(this).data();n(i.path,i.line,t)}})),this.content.find(".codio-debugger-breakpoint-remove").click((function(t){t.preventDefault();var n=e._options.onRemove;if(d().isFunction(n)){var i=l()(this).data();n(i.path,i.line)}l()(this).parent().remove()}))},_c.unbindEvents=function(){this.content.find('input[type="checkbox"]').off()},_c.setData=function(e){this.container.empty(),d().isArray(e.data)&&(e.data=e.data.sort((function(e,t){return e.path<t.path?-1:e.path>t.path?1:e.line-t.line}))),this.content=l()(yc(e)),this.container.append(this.content),this.unbindEvents(),this.bindEvents()};const kc=wc;var Pc=function e(t,n,i){if(!(this instanceof e))return new e(t,n,i);this.container=t,this.uuid=n,this.options=i,this._init()},Zc=Pc.prototype;Zc._init=function(){},Zc.connect=function(){},Zc.disconnect=function(){},Zc.clear=function(){},Zc.write=function(){},Zc.destroy=function(){};const xc=Pc;var Cc=function e(t,n,i){if(!(this instanceof e))return new e(t,n,i);e._sc.constructor.call(this,t,n,i)};(0,n(20294).ED)(Cc,xc);var Sc=Cc.prototype;Sc._init=function(){this.output=l()('<pre className="debugger-console-output"></pre>'),this.container.append(this.output),this.options&&this.options.initialMessages&&this.options.initialMessages.forEach(this.write.bind(this))},Sc.clear=function(){this.output.empty()},Sc.write=function(e){this.output.append(e)},Sc.destroy=function(){this.output&&(this.output.remove(),this.output=null)};const Ec=Cc;var Ic=n(12320),Tc=n(12617),jc=n(83680),Ac=n.n(jc);n(471);var Oc=n(20294).ED,Dc="0",Nc="2",Mc="0",Fc="1",Rc=function e(t,n,i){if(!(this instanceof e))return new e(t,n,i);e._sc.constructor.call(this,t,n,i)};Oc(Rc,xc);var Lc=Rc.prototype;Lc._init=function(){this.textEncoder=new TextEncoder,this.textDecoder=new TextDecoder,this.output=l()('<div class="debugger-xterm-console-output"></div>'),this.container.append(this.output),this._openTerminal()},Lc._openTerminal=function(){var e=this.fitAddon=new Tc.FitAddon,t=this.term=new Ic.Terminal({screenReaderMode:!0});t.loadAddon(e),this._subscribe(),t.open(this.output[0]),this.safeFit()},Lc.safeFit=function(){try{this.fitAddon.fit()}catch(e){}},Lc.connect=function(e){if(this.term){this.socket&&this.disconnect(),this.clear();var t="https:"===window.location.protocol?"wss://":"ws://",n=i.Z.currentProject.backendSubDomain+"-"+e+"."+Qi.Z.get("boxDomain");this.socket=new(Ac())(t+n+"/ws",["tty"],{binaryType:"arraybuffer"}),this.socket.onopen=this._onSocketOpen.bind(this),this.socket.onmessage=this._onSocketData.bind(this),this.termResizeHandler=this._onTerminalResize.bind(this),this.termResizeDisposable=this.term.onResize(this.termResizeHandler),this.termDataHandler=this._onTerminalData.bind(this),this.termDataDisposable=this.term.onData(this.termDataHandler),this.safeFit()}},Lc.disconnect=function(){this.socket&&(this.term&&(this.termResizeDisposable.dispose(),this.termDataDisposable.dispose()),this.socket.onopen=null,this.socket.onmessage=null,this.socket.close(),this.socket=null)},Lc._subscribe=function(){var e=this;this.term.attachCustomKeyEventHandler(this._onTermKeydown.bind(this)),this.resizeListenerId=y.Z.subscribe("panel:size:change",(function(){return e.safeFit()}))},Lc._onTermKeydown=function(e){var t=this.term._core.isMac,n=t&&e.metaKey||!t&&e.ctrlKey,i=n&&67===e.keyCode,r=n&&86===e.keyCode;if(i||r)return i&&document.execCommand("copy"),r&&document.execCommand("paste"),!1},Lc._onSocketOpen=function(){this.socket.send(this.textEncoder.encode(JSON.stringify({AuthToken:""}))),this.safeFit()},Lc._onSocketData=function(e){var t=e.data,n=String.fromCharCode(new Uint8Array(t)[0]),i=t.slice(1);switch(n){case Dc:this.term.write(this.textDecoder.decode(i));break;case Nc:var r=JSON.parse(this.textDecoder.decode(i)),a=this;Object.keys(r).forEach((function(e){a.term[e]=r[e]}))}},Lc._onTerminalResize=function(e){if(this.socket.readyState===WebSocket.OPEN){var t=JSON.stringify({columns:e.cols,rows:e.rows});this.socket.send(this.textEncoder.encode(Fc+t))}},Lc._onTerminalData=function(e){this.socket.readyState===WebSocket.OPEN&&this.socket.send(this.textEncoder.encode(Mc+e))},Lc.clear=function(){this.term.clear()},Lc.write=function(){},Lc.destroy=function(){this.disconnect(),this.resizeListenerId&&(y.Z.unsubscribe(this.resizeListenerId),this.resizeListenerId=null),this.term&&(this.term.dispose(),this.term=null),this.output&&(this.output.remove(),this.output=null)};const Uc=Rc;var Bc=f().compile('<div class="codio-debugger-instance">\n    <div class="codio-debugger-actions">\n        {{> buttons}}\n    </div>\n    <div class="debugger-statusbar"></div>\n    <div class="panel-group debugger-info-panel" role="tablist" aria-multiselectable="true">\n        <div class="panel panel-default">\n            <div class="panel-heading" role="tab">\n                <h4 class="panel-title">\n                    <a class="toggleButton" role="button" data-toggle="collapse" data-parent="#debugger-collapse" href="#collapse-frames" aria-expanded="true" aria-controls="collapse-frames">\n                        Call Stack\n                    </a>\n                </h4>\n            </div>\n            <div class="panel-collapse collapse in collapse-frames" role="tabpanel">\n                <div class="codio-debugger-running-overlay hide">\n                    Program is running\n                </div>\n                <div class="panel-body codio-debugger-frames">\n                    Frames are not available\n                </div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading" role="tab">\n                <h4 class="panel-title">\n                    <a class="toggleButton" role="button" data-toggle="collapse" data-parent="#debugger-collapse" href="#collapse-locals" aria-expanded="false" aria-controls="collapse-locals">\n                        Local variables\n                    </a>\n                </h4>\n            </div>\n            <div class="panel-collapse collapse in collapse-locals" role="tabpanel">\n                <div class="codio-debugger-running-overlay hide">\n                    Program is running\n                </div>\n                <div class="panel-body codio-debugger-locals">\n                </div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading" role="tab">\n                <h4 class="panel-title">\n                    <a class="toggleButton" role="button" data-toggle="collapse" data-parent="#debugger-collapse" href="#collapse-watches" aria-expanded="false" aria-controls="collapse-watches">\n                        Watches\n                    </a>\n                    <button class="btn btn-inverse-gray codio-debugger-add-watch collapse-watches" aria-label="Add watches" title="Add watches">\n                        <span class="iconify-inline" data-icon="@codio:mdi:plus-thick"></span>\n                    </button>\n                </h4>\n            </div>\n            <div class="panel-collapse collapse in collapse-watches" role="tabpanel">\n                <div class="panel-body codio-debugger-watches">\n                    <input class="codio-debugger-watch-input hide">\n                </div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading" role="tab">\n                <h4 class="panel-title">\n                    <a class="toggleButton" role="button" data-toggle="collapse" data-parent="#debugger-collapse" href="#collapse-breakpoints" aria-expanded="false" aria-controls="collapse-breakpoints">\n                        Breakpoints\n                    </a>\n                </h4>\n            </div>\n            <div class="panel-collapse collapse in collapse-breakpoints" role="tabpanel">\n                <div class="panel-body codio-debugger-breakpoints">\n                    No Breakpoints\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="panel-group debugger-console-panel" role="tablist" aria-multiselectable="true">\n\n        <div class="panel panel-default">\n            <div class="panel-heading" role="tabpanel">\n                <h4 class="panel-title">\n                    <a class="toggleButton" role="button" data-toggle="collapse" data-parent="#debugger-collapse" href="#collapse-console" aria-expanded="false" aria-controls="collapse-console">\n                        Console\n                    </a>\n                    <button class="btn btn-inverse-gray codio-debugger-clear-console collapse-console" aria-label="Clear console" title="Clear console">\n                        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n                    </button>\n                </h4>\n            </div>\n            <div class="panel-collapse collapse in collapse-console" role="tabpanel">\n                <div class="panel-body debugger-output-panel">\n                    <div class="debugger-before-output-container hide">\n                        <span class="debugger-output-container-title">Output before launch:</span>\n                    </div>\n                    <div class="debugger-program-output-container">\n                        <span class="debugger-output-container-title hide">Program output:</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),qc=f().compile('<ul>\n    {{#each frames}}\n    <li>\n        <span {{#if current}}class="codio-debugger-active-frame"{{/if}}></span>\n        {{#if source}}\n            <a href="#" data-uuid="{{source.uuid}}" data-frame="{{framePos}}">\n        {{/if}}\n        {{#if className}}\n            {{methodName}}():{{fileLine}}, {{className}} ({{packageName}})\n        {{/if}}\n        {{#unless className}}\n            {{fileName}}({{fileLine}}){{methodName}}()\n        {{/unless}}\n        {{#if source}}\n            </a>\n        {{/if}}\n    </li>\n    {{/each}}\n</ul>'),Hc=y.Z.create(n(86868)),Wc=n(4728).aO,zc=n(38299).y;ho.Z.registerPartial("buttons",'<div class="btn-toolbar">\n    <button class="btn" data-action="resume" title="Resume program" disabled aria-label="Resume program">\n        <span class="iconify" data-icon="@codio:mdi:play"></span>\n    </button>\n    <button class="btn hide" data-action="restart" title="Restart program" disabled aria-label="Restart program">\n        <span class="iconify" data-icon="@codio:mdi:refresh"></span>\n    </button>\n    <button class="btn" data-action="step-over" title="Step over" disabled aria-label="Step over">\n        <span class="iconify" data-icon="@codio:mdi:debug-step-over"></span>\n    </button>\n    <button class="btn" data-action="step-into" title="Step into" disabled aria-label="Step into">\n        <span class="iconify" data-icon="@codio:mdi:debug-step-into"></span>\n    </button>\n    <button class="btn" data-action="step-out" title="Step out" disabled aria-label="Step out">\n        <span class="iconify" data-icon="@codio:mdi:debug-step-out"></span>\n    </button>\n    <div class="spacer"></div>\n    <button class="btn" data-action="stop" title="Stop debugging" aria-label="Stop debugging">\n        <span class="iconify" data-icon="@codio:mdi:close-thick"></span>\n    </button>\n</div>\n');var Gc=function e(t,n){if(!(this instanceof e))return new e(t,n);this.config=t,this.container=n,this.content=l()(Bc()),zc(this.content),this.handlers=[],this.clearInfoDelay=null,this.programOutputBuffer=[],this._init()},Vc=Gc.prototype;Vc._init=function(){var e=this.config.uuid;this._bindCollapsible(),this.beforeOutput=new Ec(this.content.find(".debugger-before-output-container"),e),this._localsTree=bc(this.content.find(".codio-debugger-locals"),[],{emptyMessage:"Frame is not available"}),this._watchesTree=bc(this.content.find(".codio-debugger-watches"),[],{emptyMessage:"No watch expressions",prepend:!0,isEditable:!0,onChange:function(t,n,i){Hc.editWatch({uuid:e},{watch:t,state:n,old:i})},onRemove:function(t){Hc.editWatch({uuid:e},{watch:t,state:Wc.REMOVE})}}),this._bindWatchesInput(),this._breakpointsUI=kc(this.content.find(".codio-debugger-breakpoints"),{onChange:function(e,t,n){Hc.breakpointState({path:e},{state:!0,line:t,active:n})},onRemove:function(e,t){Hc.breakpointState({path:e},{state:!1,line:t})}}),this._initEvents()},Vc._bindCollapsible=function(){var e=l()(this.content).find('[data-toggle="collapse"]');y.Z.on(e,"click",(function(e){e.stopPropagation(),e.preventDefault();var t=l()(e.target).attr("href").replace("#",".");l()(t).toggle(),l()(e.target).toggleClass("closed")}))},Vc._initEvents=function(){var e=this.config.uuid,t=this.handlers;function n(t,n){return void 0!==n?"command:debug:"+t+":"+n:"command:debug:"+t+":"+e}function i(e){t.push(e)}i(y.Z.subscribe(n("console:init"),this._onConsoleInit.bind(this))),i(y.Z.subscribe(n("console:append"),this._onConsoleAppend.bind(this))),i(y.Z.subscribe(n("console:clear"),this._onClear.bind(this))),i(y.Z.subscribe(n("status-message"),this._onStatusMessageChange.bind(this))),i(y.Z.subscribe(n("debugger-state"),this._onBreakpointState.bind(this))),i(y.Z.subscribe(n("draw-frame"),this._onDrawFrame.bind(this))),i(y.Z.subscribe(n("draw-locals"),this._onDrawLocals.bind(this))),i(y.Z.subscribe(n("draw-breakpoints"),this._onDrawBreakpoints.bind(this))),i(y.Z.subscribe(n("draw-watches"),this._onDrawWatches.bind(this)));var r=this.content.find(".codio-debugger-actions");y.Z.on(r,"click.debugger","button.btn",this._onBtnClick.bind(this)),y.Z.on(this.content,"click",".codio-debugger-add-watch",this._onAddWatch.bind(this)),y.Z.on(this.content,"click",".codio-debugger-clear-console",this._onClear.bind(this))},Vc._onDrawLocals=function(e,t){var n=d().isString(t)?t:this._localsTree.createNodes(t);this._localsTree.setData(n)},Vc._onDrawWatches=function(e,t){var n=this._watchesTree.createNodes(t);this._watchesTree.setData(n)},Vc._onDrawBreakpoints=function(e,t){this._breakpointsUI.setData({data:t})},Vc._onDrawFrame=function(e,t){var n=l()(qc({frames:t}));y.Z.on(n,"click.debugger","a",this._onFrameClick.bind(this)),this.content.find(".codio-debugger-frames").html(n)},Vc._onFrameClick=function(e){e.stopPropagation(),e.preventDefault();var t=this.config.uuid,n=l()(e.target).data("frame");return Hc.frame({uuid:t},n),!1},Vc._onBtnClick=function(e){var t=l()(e.target).closest("button").data("action"),n=this.config.uuid;Hc[t]&&Hc[t]({uuid:n})},Vc._getWatchesInput=function(){return this.content.find("input.codio-debugger-watch-input")},Vc._onAddWatch=function(){this._getWatchesInput().removeClass("hide").focus()},Vc._bindWatchesInput=function(){this._getWatchesInput().on("blur",this._onWatchesInputBlur.bind(this)).on("keydown",this._onWatchesInputKeydown.bind(this))},Vc._hideWatchesInput=function(){this._getWatchesInput().addClass("hide").val("")},Vc._onWatchesInputBlur=function(e){e.stopImmediatePropagation(),e.preventDefault();var t=l()(e.target).val(),n=this.config.uuid;d().isEmpty(t)||Hc.editWatch({uuid:n},{watch:t,state:Wc.ADD}),this._hideWatchesInput()},Vc._onWatchesInputKeydown=function(e){var t=e.which;27===t&&l()(e.target).val(""),13!==t&&27!==t||(e.stopImmediatePropagation(),e.preventDefault(),l()(e.target).blur())},Vc._onBreakpointState=function(e,t){var n=this,i=this.content.find(".codio-debugger-actions");switch(i.find("button").attr("disabled",!0),i.find('button[data-action="stop"]').attr("disabled",!1),t.state){case ec.PAUSED:this.clearInfoDelay=null,i.find('button[data-action="resume"]').removeClass("hide"),i.find('button[data-action="restart"]').addClass("hide"),this.content.find(".codio-debugger-running-overlay").addClass("hide"),n.content.find(".codio-debugger-frames").removeClass("codio-debugger-inactive-panel"),n.content.find(".codio-debugger-locals").removeClass("codio-debugger-inactive-panel");["resume","step-over","step-into","step-out"].forEach((function(e){i.find('button[data-action="'+e+'"]').attr("disabled",!1)}));break;case ec.RUNNING:i.find('button[data-action="resume"]').removeClass("hide"),i.find('button[data-action="restart"]').addClass("hide");var r=m.ZP.promise.delay(150).then((function(){r===n.clearInfoDelay&&(n.content.find(".codio-debugger-running-overlay").removeClass("hide"),n.content.find(".codio-debugger-frames").addClass("codio-debugger-inactive-panel"),n.content.find(".codio-debugger-locals").addClass("codio-debugger-inactive-panel"))}));this.clearInfoDelay=r;break;case ec.EXITED:this.clearInfoDelay=null,this.content.find(".codio-debugger-running-overlay").addClass("hide"),n.content.find(".codio-debugger-frames").removeClass("codio-debugger-inactive-panel"),n.content.find(".codio-debugger-locals").removeClass("codio-debugger-inactive-panel");var a=i.find('button[data-action="restart"]');a.removeClass("hide"),a.attr("disabled",!1),n._localsTree.setData([]),n.content.find(".codio-debugger-frames").text("Frames are not available"),i.find('button[data-action="resume"]').addClass("hide"),this.programOutput&&d().delay((function(){n.programOutput.disconnect()}),500),this.programOutputBuffer=[]}},Vc._onClear=function(){this.beforeOutput.clear(),this.programOutput.clear()},Vc._onConsoleInit=function(e,t){var n=this.config.uuid,i=this.content.find(".debugger-program-output-container");t.port?(this.programOutput||(this.programOutput=new Uc(i,n)),this.programOutput.connect(t.port)):this.programOutput=new Ec(i,n,{initialMessages:this.programOutputBuffer})},Vc._onConsoleAppend=function(e,t){var n=t.text;"before"===t.stage?(this.content.find(".debugger-before-output-container").removeClass("hide"),this.beforeOutput.write(n)):(this.content.find(".debugger-program-output-container .debugger-output-container-title").removeClass("hide"),this.programOutput?this.programOutput.write(n):this.programOutputBuffer.push(n)),this.content.find(".debugger-console-panel .panel-body")[0].scrollIntoView(!1)},Vc._onStatusMessageChange=function(e,t){this.content.find(".debugger-statusbar").text(t)},Vc.render=function(){return this.content},Vc.close=function(){this.handlers.forEach((function(e){y.Z.unsubscribe(e)})),this.programOutput&&this.programOutput.destroy()};const Kc=Gc;function Yc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Jc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yc(Object(n),!0).forEach((function(t){(0,cs.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qc=Qi.Z.get("isAnalyticsEnabled"),Xc=window.gtag,$c="",el="anonymous",tl=function(){var e=el;i.Z.currentUser&&!i.Z.currentUser.isAnonymous()&&(e=i.Z.currentUser.name());var t={page:$c,dimension1:e===el?"no":"yes",dimension2:"no",dimension3:e},n=m.ZP.str.startsWith;return n(document.referrer,"https://github.com/login/oauth/authorize")&&(t.referrer="https://codio.com/p/login"),n(document.referrer,"https://bitbucket.org/site/oauth2/authorize")&&(t.referrer="https://codio.com/p/login"),t},nl=Qc?function(){rl("focus",{event_category:"window"})}:d().noop,il=Qc?function(e){$c=e;var t=tl();console.debug("ANALYTICS:","[ga.pageview]",e,t),Xc("event","page_view",t)}:d().noop,rl=Qc?function(e,t){var n=tl();console.debug("ANALYTICS:","[ga.event]",e,t,n),Xc("event",e,Jc(Jc({},t),n))}:d().noop;y.Z.subscribe("route:changed",(function(e,t){il(t.enter)})),y.Z.subscribe("app:timeChunkMsSpent",(function(e,t){nl(t)}));const al={sendEvent:rl,pageview:il};var sl=n(43440),ol=n.n(sl);n(28190);var cl=b.ZP.containerManager,ll=y.Z.create(n(86868)),ul={},dl={},pl=null,fl=!1,hl=null,ml=null;function gl(){return Qi.Z.get("backendSchema")+i.Z.currentProject.backendSubDomain+"-9001."+Qi.Z.get("boxDomain")}function vl(){function e(){fl=!0,ml=null}null===ml&&(ml=bl(-1).then(e).catch((function(){var e=i.Z.currentProject.guid;return cl.run(e,"/usr/share/cdb/cdb.sh",{})})).then((function(){return bl(0)})).then(e).catch(e))}function bl(e){e=e||0;var t=m.ZP.promise.deferred();return l().ajax({url:gl()+"/p/info",type:"GET",contentType:"application/json; charset=UTF-8",xhrFields:{withCredentials:!0},timeout:1e3}).then((function(){t.resolve()})).fail((function(){if(e>80||-1===e)return t.reject(new Error("failed to connect to debugger"));m.ZP.promise.delay(250).then((function(){t.resolve(bl(e+1))}))})),t.promise}function yl(){if(!pl){var e="WebSocket"in window;pl=new(ol())(gl(),{reconnect:{retries:1/0,max:"5000 ms"},strategy:["online","timeout","disconnect"],websockets:e,pingTimeout:25e3,transport:{transports:["websocket"]}});var t=0;pl.on("open",(function(){d().each(ul,(function(e,t){ll.connectionInit({uuid:t})})),t=0})),pl.on("reconnect",(function(){fl&&++t>12&&(d().each(ul,(function(e,t){ll.connectionOffline({uuid:t})})),vl(),t=0,d().each(dl,(function(e){e.reject(new Error("connection failure"))})),dl={})})),pl.on("data",(function(e){var t=e;try{t=JSON.parse(e)}catch(e){}t.forEach((function(e){!function(e){var t=e.commandId;t?dl[t]&&(dl[t].resolve(e.data),delete dl[t]):ll.connectionData({uuid:e.debuggerTargetId,topic:e.topic},e.data)}(e)}))}))}}function wl(e){return vl(),yl(),function(t){if(!pl)return Promise.reject(new Error("no connection"));var n=m.ZP.promise.deferred(),i=m.ZP.GUID();return t.cid=i,"exit"===t.type?(null===hl?pl.write(JSON.stringify([t])):(pl.write(JSON.stringify(hl)),hl=null),delete ul[e],0===d().keys(ul).length&&pl&&(d().each(dl,(function(e){e.reject(new Error("connection closed"))})),pl.end(),pl=null,dl={})):(null===hl?(hl=[t],setTimeout((function(){if(!pl)return hl&&hl.forEach((function(e){var t=e.cid;dl[t]&&dl[t].reject(new Error("no connection"))})),void(hl=null);pl.write(JSON.stringify(hl)),hl=null}),1)):hl.push(t),dl[i]=n),n.promise}}const _l=function(e){if(ul[e])return ul[e];var t=wl(e);return ul[e]=t,t};var kl={};function Pl(){if(i.Z&&i.Z.currentEditor)return i.Z.currentEditor.filename}function Zl(e,t,n,i){d().includes(e[t],tc)&&(n?(e[t]=e[t].replace(tc,n),i.updated=!0):i.canStart=!1)}const xl={updateConfigWithCurrent:(Cl=(0,r.Z)(o().mark((function e(t){var n,i,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d().cloneDeep(t),i={canStart:!0,updated:!1},r=Pl(),Zl(n,"command",r,i),Zl(n,"before",r,i),Zl(n,"sourcePath",r,i),i.updated&&(n.uuid=n.uuid+r),i.canStart){e.next=9;break}throw new Error("No active file for debug.");case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)}))),function(e){return Cl.apply(this,arguments)}),_onStop:function(e){if(kl[e]){var t=kl[e].instance;t.close&&t.close().catch((function(){})),y.Z.unsubscribe(kl[e].subId),delete kl[e]}},debug:function(e,t){var n=e.uuid;if(kl[n]){var i=kl[n].instance;kl[n].failed&&(i.config=e,i._onConnectionInit())}else{var r=y.Z.subscribe("command:debug:stop:"+n,this._onStop.bind(this,n));kl[n]={instance:{failed:!1},subId:r},al.sendEvent("run",{event_category:"debugger",event_label:"type",value:e.type}),M.Z.saveAllAndWait().then((function(){kl[n]&&(kl[n].instance=new t(e,_l(n)))}))}}};var Cl,Sl=y.Z.create(n(86868)),El=function e(t,n){if(!(this instanceof e))return new e(t,n);this.stream=n,this.config=t,this.uuid=t.uuid,this.handlers=[],this._initialiseDebugger=!1,this._init()},Il=El.prototype;Il._init=function(){this._subscribeEvents(),this._onConnectionInit()},Il._subscribeEvents=function(){var e=this,t=this.uuid,n=this.handlers;function i(e){n.push(e)}function r(e,n){return n?"debugger:connection:"+e+":"+t:"command:debug:"+e+":"+t}i(y.Z.subscribe(r("init",!0),this._onConnectionInit.bind(this))),i(y.Z.subscribe(r("offline",!0),this._onConnectionOffline.bind(this))),i(y.Z.subscribe(r("data:#topic",!0),this._onConnectionData.bind(this))),i(y.Z.subscribe(r("frame"),(function(t,n){return e._onChangeFrame(t,n).catch((function(){}))}))),i(y.Z.subscribe(r("resume"),(function(){return e._onResume().catch((function(){}))}))),i(y.Z.subscribe(r("step-over"),(function(){return e._onStepOver().catch((function(){}))}))),i(y.Z.subscribe(r("step-into"),(function(){return e._onStepInto().catch((function(){}))}))),i(y.Z.subscribe(r("step-out"),(function(){return e._onStepOut().catch((function(){}))}))),i(y.Z.subscribe(r("restart"),(function(){return e._onRestart().catch((function(){}))}))),i(y.Z.subscribe(r("send-stdin"),(function(){return e._onSendStdin().catch((function(){}))}))),i(y.Z.subscribe("command:debug:breakpoint-update",this._onBPUpdate.bind(this))),i(y.Z.subscribe(r("update-watch"),this._onWatchUpdate.bind(this)))},Il._jid=function(){return{uuid:this.uuid}},Il._command=function(e){return this._stream("command",{command:e})},Il._stdin=function(e){return this._stream("stdin",{data:e})},Il._stream=function(e,t){var n={uuid:this.uuid,type:e};return t&&d().assign(n,t),this.stream(n)},Il._consoleMessage=function(e,t){Sl.consoleAppend(this._jid(),{stage:t?"before":"program",text:e})},Il._statusMessage=function(e){Sl.statusMessageChange(this._jid(),e)},Il._deactivateLineInEditor=function(e){e&&e.source&&Sl.breakpointClear({path:e.source.path})},Il._activateLineInEditor=function(e,t){t&&this._deactivateLineInEditor(t),e&&e.source&&d().defer((function(){var t=parseInt(e.fileLine,10)-1;Sl.breakpointHit({path:e.source.path},t),i.Z.ide.open("tree",e.source.path,{highlight:{ref:t,count:1,debuggerLine:!0}})}))},Il.close=function(){return this.handlers.forEach((function(e){y.Z.unsubscribe(e)})),this._cleanupState(),this._stream("exit")},Il._onRestart=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.abrupt("return",M.Z.saveAllAndWait().then((function(){Sl.consoleClear(t._jid()),t._onConnectionInit(!0)})));case 2:case"end":return e.stop()}}),e,this)}))),Il._onSendStdin=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),Il._onConnectionInit=function(){},Il._onConnectionOffline=function(){},Il._onConnectionData=function(){},Il._onChangeFrame=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),Il._onResume=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),Il._onStepOver=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),Il._onStepInto=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),Il._onStepOut=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),Il._onBPUpdate=function(){},Il._onWatchUpdate=function(){};const Tl=El;var jl=n(20294).ED,Al=n(20294).Bd.bold,Ol=y.Z.create(n(86868)),Dl=function e(t,n){if(!(this instanceof e))return new e(t,n);e._sc.constructor.call(this,t,n)};jl(Dl,Tl);var Nl=Dl.prototype;function Ml(){var e="/"+i.Z.currentProject.path+"/install-software";k.Z.error(["It looks like Java is not installed.<br/>","Either connect your project to the appropriate Codio certified stack or ","you can install Java from ","the 'Tools-><a href=\""+e+"\">Install software</a>' menu."].join(""))}Nl._setBreakpoints=function(){var e=this,t=[];return fc.ZP.breakpoints().then((function(n){var r=d().filter(n,(function(t){return(!e.config.rootFolder||d().startsWith(t.path,e.config.rootFolder))&&d().endsWith(t.path,".java")})),a=d().filter(r,(function(e){return e.active}));Ol.drawBreakpoints(e._jid(),r);var s=[];return d().each(a,(function(e){if(i.Z.currentProject.exists(e.path)){var n=i.Z.currentProject.file(e.path).then((function(t){return Do.Z.parseClassInformation(t.content,e.path,e.line)})).then((function(n){t.push({item:e,information:n})}));s.push(n)}})),Promise.all(s)})).then((function(){var n=t.map((function(e){var t=e.information.packageName;return{classId:(t?t+".":"")+e.information.className,line:e.item.line}}));return e._command({type:"breakpoints",breakpoints:n})}))},Nl._parseFrame=function(e,t,n){var r=this,a=/^.*\[(\d+)\]\s(.+)\s\((.+):([\d,]+)\)$/;this.threadName=t,this.currFramePos=parseInt(n,10);var s=e.split("\n"),o=d().map(s,(function(e){var t=e.match(a);if(t){var n=t[2].split("."),i=n.pop(),s=n.pop(),o=s,c=n.join(".");s&&-1!==s.indexOf("$")&&(o=s.split("$")[0]);var l=t[4];l=l.replace(/,/g,"");var u=parseInt(t[1],10);return{framePos:u,methodName:i,packageName:c,className:s,parentClassName:o,fileName:t[3],fileLine:parseInt(l,10),pc:t[5],current:u===r.currFramePos}}})).filter((function(e){return!!e})),c=i.Z.currentProject.files(),l=d().filter(c,(function(e){return d().find(o,(function(t){return(!r.config.rootFolder||d().startsWith(e.path,r.config.rootFolder))&&t.fileName===e.name}))})),u=[],p=[];return d().each(l,(function(e){var t=i.Z.currentProject.file(e.path).then((function(t){return Do.Z.parseClassInformation(t.content,e.path)})).then((function(t){p.push({item:e,information:t})}));u.push(t)})),Promise.all(u).then((function(){var e=d().map(o,(function(e){var t=d().find(p,(function(t){return t.information.fileName===e.fileName&&t.information.packageName===e.packageName&&t.information.className===e.parentClassName}));return t&&(e.source={uuid:r.uuid,path:t.item.path}),e}));r.frames=e;var t=e[r.currFramePos-1];r._activateLineInEditor(t),Ol.drawFrame(r._jid(),e)}))},Nl._calcWatches=function(){var e=this,t={};return hc.ZP.watches(this.uuid).then((function(n){var i=[];return d().each(n,(function(n){var r=e._command({type:"watches",watches:[n.watch]}).then((function(e){e.error||(t[n.watch]=e.result[n.watch])}));i.push(r)})),Promise.all(i)})).then((function(){var n=[];d().isEmpty(t)||d().each(t,(function(t,i){t=t.replace(e.threadName+"["+e.currFramePos+"] ","").replace(/Requested stack frame is no longer active: \d+\n/,"");var r=(t=d().trim(t)).split("\n"),a={watch:i,value:t,error:!1},s=r[0],o="com.sun.tools.example.debug.expr.ParseException: ";if(-1!==t.indexOf(o))s=s.replace(o,""),a.value=s,a.error=!0;else{var c=s.indexOf(i);a.value=-1!==c?t.substring(c+i.length+3):t}n.push(a)})),Ol.drawWatches(e._jid(),n)}))},Nl._parseLocals=function(e){if(e.error)Ol.drawLocals(this._jid(),e.error);else if(d().isEmpty(e.vars))Ol.drawLocals(this._jid(),zo);else{var t=d().map(e.vars,(function(e,t){var n=e.split(t,2)[1]||"";return Do.Z.parseLocalVariableInformation(n,t)}));Ol.drawLocals(this._jid(),t)}},Nl._initDebuggerState=function(){this._setBreakpoints(),this._calcWatches()},Nl._onBPUpdate=function(){this._setBreakpoints()},Nl._onWatchUpdate=function(){this._calcWatches()},Nl._onConnectionInit=function(){if(!this._initialiseDebugger){this._initialiseDebugger=!0,this._statusMessage(Go);var e=this;return this.stream(this.config).then((function(t){if(e._initialiseDebugger=!1,Ol.consoleInit(e._jid(),{port:t.terminalPort}),t.error)switch(Ol.debuggerState(e._jid(),{state:ec.EXITED}),t.code){case"BEFORE_ERROR":e._statusMessage("Got an error before initializing the debugger.");break;case"NO_TARGET":e._statusMessage("Could not open the connection for debugging.");e._consoleMessage(Al('<a href="https://docs.codio.com/common/develop/ide/debugger/debugger.html#debugger" target="_blank">No connection help</a>\n\n'),!0);break;case"NO_PREREQUISITES":e._statusMessage("Error starting the debugger"),Ml()}else t.isContinuing?(Ol.debuggerState(e._jid(),{state:ec.RUNNING}),e._statusMessage(Yo),e._initDebuggerState(),e._command({type:"get_state"}).then((function(t){if(!t.error){var n=t.result;if(!n.isRunning){var i=n.frame;e._parseFrame(i.whereOutput,i.threadName,i.currFramePos),e._parseLocals(i.localsOutput),Ol.debuggerState(e._jid(),{state:ec.PAUSED}),e._statusMessage(Xo)}}}))):(Ol.debuggerState(e._jid(),{state:ec.RUNNING}),e._statusMessage(Yo),e._initDebuggerState())})).catch((function(){e._initialiseDebugger=!1,e._statusMessage(Vo)}))}},Nl._onConnectionData=function(e,t){var n=e&&e.topic;"before"===n?(/javac?: (?:command )?not found/i.test(t)&&Ml(),this._consoleMessage(t)):"in"===n?this._processOutput(t):"exited"===n&&(this._cleanupState(),this._statusMessage("Program exited"),Ol.debuggerState(this._jid(),{state:ec.EXITED}))},Nl._processOutput=function(e){if(e)switch(e.type){case"PAUSED_STATE":var t=e.frame;this._parseFrame(t.whereOutput,t.threadName,t.currFramePos),this._parseLocals(t.localsOutput),Ol.debuggerState(this._jid(),{state:ec.PAUSED});var n=e.isException?Qo:Xo;this._statusMessage(n),this._changeFrameInProgress=!1,this._calcWatches();break;case"EXITED":this._statusMessage(e.output),this._cleanupState(),Ol.debuggerState(this._jid(),{state:ec.EXITED})}},Nl._onConnectionOffline=function(){this._cleanupState(),this._statusMessage(Ko)},Nl._cleanupState=function(){if(Ol.debuggerState(this._jid(),{state:ec.RUNNING}),d().isNumber(this.currFramePos)){var e=this.frames[this.currFramePos-1];this._deactivateLineInEditor(e)}this.threadName=null,this.currFramePos=null,this.frames=null},Nl._onResume=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._resumeAction("cont"));case 1:case"end":return e.stop()}}),e,this)}))),Nl._resumeAction=function(e){return this._statusMessage($o),this._cleanupState(),this._command({type:"resume",action:e})},Nl._onStepOver=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._resumeAction("next"));case 1:case"end":return e.stop()}}),e,this)}))),Nl._onStepInto=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._resumeAction("step"));case 1:case"end":return e.stop()}}),e,this)}))),Nl._onStepOut=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._resumeAction("step up"));case 1:case"end":return e.stop()}}),e,this)}))),Nl._onChangeFrame=function(){var e=(0,r.Z)(o().mark((function e(t,n){var i,r,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._changeFrameInProgress){e.next=2;break}return e.abrupt("return");case 2:if(i=parseInt(this.currFramePos,10),r=parseInt(n,10),i===r){e.next=10;break}return this._changeFrameInProgress=!0,a=Math.abs(r-i),s=r-i>0?"up":"down",this._cleanupState(),e.abrupt("return",this._command({type:"change_frame",action:s+" "+a}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}();const Fl=Dl,Rl={updateConfigWithCurrent:function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d().cloneDeep(t),!d().includes(n.before,tc)){e.next=14;break}if(!i.Z||!i.Z.currentEditor){e.next=11;break}if(r=i.Z.currentEditor.filename,!d().endsWith(r,".java")){e.next=8;break}return e.abrupt("return",i.Z.currentProject.file(r).then((function(e){return Do.Z.parseClassInformation(e.content,r)})).then((function(e){var n=e.className;e.packageName&&(n=e.packageName+"."+n);var i=t.before.replace(tc,r).replace(tc,n);return{uuid:t.uuid+r,type:No,command:t.command,before:i,single:!0,args:t.args,rootFolder:""}})));case 8:throw new Error("It should be java file.");case 9:e.next=12;break;case 11:throw new Error("No active file for debug.");case 12:e.next=15;break;case 14:return e.abrupt("return",Promise.resolve(n));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),debug:function(e){xl.debug(e,Fl)}};var Ll=m.ZP.inherit,Ul=m.ZP.str.bold,Bl=y.Z.create(n(86868)),ql=function e(t,n){if(!(this instanceof e))return new e(t,n);this.defferedBreakpoints=!1,this.defferedWatches=!1,this.currentParsedOutput=[],this.lastProgramOutput="",this.commandDeferreds={},e._sc.constructor.call(this,t,n)};Ll(ql,Tl);var Hl=ql.prototype;function Wl(e){return d().isArray(e)||d().isObject(e)?d().map(e,(function(e){var t=d().has(e,"length")?"["+e.length+"]":"";return{name:JSON.stringify(e.name),type:e.type+t,value:Wl(e.value)}})):JSON.stringify(e)}Hl._fullCommand=function(e){var t,n=m.ZP.promise.deferred(),i=(t=Ao()(Math.random()+Math.random()),parseInt(t.substring(0,8),16).toString());this.commandDeferreds[i]=n;var r=e+"\np '~~Codio_cmd_done "+i+"~~'";return this._command(r).catch((function(){})),n.promise},Hl._processOutput=function(e){this.lastProgramOutput+=e;var t=this.lastProgramOutput.split("(Pdb) ");if(1!==t.length){t.shift();var n=this;t.forEach((function(e){var t=e.match(/^~~Codio_exit: (.+?)~~\n$/);if(t){var i=t[1];switch(i){case"on_error":return void n._statusMessage(Qo);case"normal":n._statusMessage("Program exited normally.");break;case"error":n._statusMessage("Program exited with an error.");break;case"syntax_error":n._statusMessage("Program has a syntax error.");break;default:var r=i.split(":");r.length>1&&"sys_exit"===r[0]&&n._statusMessage("Program exited with the exit code: "+r[1])}return n._cleanupState(),void Bl.debuggerState(n._jid(),{state:ec.EXITED})}var a=e.match(/^'~~Codio_cmd_done (\w+)~~'\n$/);if(a){var s=a[1];n.commandDeferreds[s]&&(n.commandDeferreds[s].resolve(n.currentParsedOutput.join("")),delete n.commandDeferreds[s]),n.currentParsedOutput=[]}else n.currentParsedOutput.push(e)}));var i=n.currentParsedOutput.pop();this.lastProgramOutput="(Pdb) "+(i||"")}else this.lastProgramOutput=""},Hl._parseFrame=function(e){if(e){var t=this,n=e.split("\n");n.splice(0,3);var r=/^( {2}|> )(.*)\(([0-9]+)\)(.*)\(\)(->[0-9]*)?$/,a=-1,s=d()(n).reverse().map((function(e){var n=e.match(r);if(n){a++;var s="> "===n[1];s&&(t.currFramePos=a);var o=n[2],c=null;return 0===o.indexOf(Jo)&&(o=o.substring(Jo.length,o.length),i.Z.currentProject.exists(o)&&(c={uuid:t.uuid,path:o})),{framePos:a,methodName:n[4],fileName:o,fileLine:n[3],source:c,current:s}}})).filter((function(e){return!!e})).value();this.frames=s;var o=s[t.currFramePos];t._activateLineInEditor(o),Bl.drawFrame(t._jid(),s)}},Hl._onBPUpdate=function(){this.frames?this._updateBreakpoints():this.defferedBreakpoints||(this.defferedBreakpoints=!0,this._statusMessage("Deferred breakpoints update - will be done on next stop"))},Hl._onWatchUpdate=function(){this.frames?this._calcWatches():this.defferedWatches||(this.defferedWatches=!0,this._statusMessage("Deferred watches update - will be done on next stop"))},Hl._updateBreakpoints=function(){var e=this;return this._fullCommand("break").then((function(t){var n=[],i=/^([0-9]+)\s+breakpoint.*$/;return t&&d().each(t.split("\n"),(function(e){var t=e&&e.match(i);t&&n.push("clear "+t[1])})),e._setBreakpoints(n)})).then((function(){}))},Hl._setBreakpoints=function(e){var t=this;return fc.ZP.breakpoints().then((function(n){var i=d().filter(n,(function(e){return d().endsWith(e.path,".py")})),r=d().filter(i,(function(e){return e.active}));Bl.drawBreakpoints(t._jid(),i);var a=e||[];if(d().each(r,(function(e){a.push("break "+Jo+e.path+":"+(e.line+1))})),!d().isEmpty(a))return t._fullCommand(a.join("\n"))}))},Hl._fetchLocals=function(){var e=this;return this._fullCommand("print_locals").then((function(t){var n,i=d().trim(t).replace(/\(Pdb\) /g,""),r=i;try{r=JSON.parse(i)}catch(e){}n=d().isString(r)?r:Wl(r),Bl.drawLocals(e._jid(),n)}))},Hl._calcWatches=function(){var e=this,t={};return hc.ZP.watches(this.uuid).then((function(n){var i=[];return d().each(n,(function(n){var r="pp "+n.watch,a=e._fullCommand(r);i.push(a),a.then((function(e){t[n.watch]=e}))})),Promise.all(i)})).then((function(){var n=[],i=/^\*{3} \w+Error: (.*)$/;d().isEmpty(t)||d().each(t,(function(e,t){var r={watch:t,value:e=d().trim(e).replace("(Pdb) ",""),error:!1},a=e.match(i);a&&(r.error=!0,r.value=a[1]),n.push(r)})),Bl.drawWatches(e._jid(),n)}))},Hl._currentDebuggerState=function(){var e=this;return this._fullCommand("where").then((function(t){if(d().isNumber(e.currFramePos)){var n=e.frames[e.currFramePos];e._deactivateLineInEditor(n)}var i=!!t;Bl.debuggerState(e._jid(),{state:ec.PAUSED}),i&&e._parseFrame(t)})).then((function(){e._calcWatches(),e._updateBreakpoints()})).then((function(){return e._fetchLocals()}))},Hl._onConnectionInit=function(){if(!this._initialiseDebugger){this._initialiseDebugger=!0,this._statusMessage(Go);var e=this;return this.stream(this.config).then((function(t){if(e._initialiseDebugger=!1,Bl.consoleInit(e._jid(),{port:t.terminalPort}),t.error)switch(t.code){case"BEFORE_ERROR":e._statusMessage("Got an error before initializing the debugger.");break;case"NO_TARGET":e._consoleMessage(Ul('<a href="https://docs.codio.com/common/develop/ide/debugger/debugger.html#debugger" target="_blank">No python file help</a>\n\n'),!0),e._statusMessage("Could not find the executable to debug.")}else e.failed=!1,e._statusMessage(Yo),e._currentDebuggerState()})).catch((function(){e._initialiseDebugger=!1,e._statusMessage(Vo)}))}},Hl._onConnectionOffline=function(){this._cleanupState(),this._statusMessage(Ko)},Hl._onConnectionData=function(e,t){var n=e&&e.topic;if("before"===n||"output"===n){d().each(['Traceback (most recent call last):\n  File "/usr/share/cdb/scripts/pdb_auto.py", line 31, in main\n','    dbg._runscript(mainpyfile)\n  File "/usr/lib/python2.7/pdb.py", line 1233, in _runscript\n','    self.run(statement)\n  File "/usr/lib/python2.7/bdb.py", line 400, in run\n    exec cmd in globals, locals\n'],(function(e){t=t.replace(e,"")})),d().isEmpty(t)||this._consoleMessage(d().escape(t),"before"===n)}else"in"===n?this._processOutput(t):"exited"===n&&Bl.debuggerState(this._jid(),{state:ec.EXITED})},Hl._onChangeFrame=function(){var e=(0,r.Z)(o().mark((function e(t,n){var i,r,a,s,c,l,u,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._changeFrameInProgress){e.next=2;break}return e.abrupt("return");case 2:if(i=this,r=parseInt(this.currFramePos,10),a=parseInt(n,10),r===a){e.next=13;break}for(this._changeFrameInProgress=!0,s=Math.abs(a-r),c=a-r>0?"up":"down",l=[],u=0;u<s;u++)l.push(c);return d=this._fullCommand(l.join("\n")).then((function(){var e=parseInt(i.currFramePos,10);i.currFramePos=a;var t=i.frames[a],n=i.frames[e];return t.current=!0,n.current=!1,Bl.drawFrame(i._jid(),i.frames),i._activateLineInEditor(t,n),i._calcWatches()})).finally((function(){i._changeFrameInProgress=!1})),e.abrupt("return",Promise.all([d,i._fetchLocals()]));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),Hl._onResume=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._resumeAction("continue"));case 1:case"end":return e.stop()}}),e,this)}))),Hl._resumeAction=function(e){var t=this;return t._statusMessage($o),t._cleanupState(),this._fullCommand(e).then((function(){t._statusMessage(Xo)})).then((function(){return t._currentDebuggerState()}))},Hl._onStepOver=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._resumeAction("next"));case 1:case"end":return e.stop()}}),e,this)}))),Hl._onStepInto=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._resumeAction("step"));case 1:case"end":return e.stop()}}),e,this)}))),Hl._onStepOut=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._resumeAction("return\nnext"));case 1:case"end":return e.stop()}}),e,this)}))),Hl._cleanupState=function(){if(Bl.debuggerState(this._jid(),{state:ec.RUNNING}),d().isNumber(this.currFramePos)){var e=this.frames[this.currFramePos];this._deactivateLineInEditor(e)}this.currFramePos=null,this.frames=null};const zl=ql,Gl={updateConfigWithCurrent:xl.updateConfigWithCurrent,debug:function(e){xl.debug(e,zl)}};var Vl=m.ZP.inherit,Kl=m.ZP.str.bold,Yl=y.Z.create(n(86868)),Jl=function e(t,n){if(!(this instanceof e))return new e(t,n);e._sc.constructor.call(this,t,n)};Vl(Jl,Tl);var Ql=Jl.prototype;Ql._showInstallationInstructions=function(){var e="/"+i.Z.currentProject.path+"/install-software";k.Z.error(["It looks like NodeJS is not installed.<br/>","Either connect your project to the appropriate Codio certified stack or ","you can install NodeJS from ","the 'Tools-><a href=\""+e+"\">Install software</a>' menu."].join(""))},Ql.SUPPORTED_EXTENSIONS=["js","mjs"],Ql._onConnectionInit=function(){if(!this._initialiseDebugger){this._initialiseDebugger=!0,this._statusMessage(Go);var e=this;return this.stream(this.config).then((function(t){if(e._initialiseDebugger=!1,Yl.consoleInit(e._jid(),{port:t.terminalPort}),t.error)switch(Yl.debuggerState(e._jid(),{state:ec.EXITED}),t.code){case"BEFORE_ERROR":e._statusMessage("Got an error before initializing the debugger.");break;case"NO_TARGET":e._statusMessage("Could not find the executable to debug.");e._consoleMessage(Kl('<a href="https://docs.codio.com/common/develop/ide/debugger/debugger.html#debugger" target="_blank">No connection help</a>\n\n'),!0);break;case"NO_PREREQUISITES":e._statusMessage("Error starting the debugger"),e._showInstallationInstructions()}else t.isContinuing?(Yl.debuggerState(e._jid(),{state:ec.RUNNING}),e._statusMessage($o),e._setBreakpoints(),e._calcWatches(),e._command({type:"get_state"}).then((function(t){if(!t.error){var n=t.result;n.isRunning||(e._setCurrentState(n),Yl.debuggerState(e._jid(),{state:ec.PAUSED}),e._statusMessage(Xo))}}))):(e._statusMessage(Yo),e._setBreakpoints(),e._calcWatches())})).catch((function(){e._initialiseDebugger=!1,e._statusMessage(Vo)}))}},Ql._onConnectionOffline=function(){this._cleanupState(),this._statusMessage(Ko)},Ql._onConnectionData=function(e,t){var n=e&&e.topic;"before"===n||"output"===n?this._consoleMessage(t,"before"===n):"in"===n?this._processOutput(t):"exited"===n&&(this._cleanupState(),this._statusMessage("Program exited"),Yl.debuggerState(this._jid(),{state:ec.EXITED}))},Ql._cleanupState=function(){if(d().isNumber(this.currFramePos)){var e=this.frames&&this.frames[this.currFramePos];e&&this._deactivateLineInEditor(e)}Yl.debuggerState(this._jid(),{state:ec.RUNNING}),this._clearState(),this.frames=null,this.backtrace=null},Ql._clearState=function(){if(d().isNumber(this.currFramePos)){var e=this.frames&&this.frames[this.currFramePos];e&&this._deactivateLineInEditor(e)}this.currFramePos=0},Ql._onWatchUpdate=function(){this._calcWatches()},Ql._calcWatches=function(){var e=this,t={};return hc.ZP.watches(this.uuid).then((function(n){var i=d().map(n,(function(n){return e._command({type:"evaluate",frameNum:e.currFramePos,expression:n.watch}).then((function(e){e.error||(t[n.watch]=e.result)}))}));return Promise.all(i)})).then((function(){var n=[];d().isEmpty(t)||(n=d().map(t,(function(e,t){var n=e.error||e.value&&(e.value.value||e.value.text);return{watch:t,value:d().toString(n),error:!!e.error}}))),Yl.drawWatches(e._jid(),n)}))},Ql._setBreakpoints=function(){var e=this;return fc.ZP.breakpoints().then((function(t){var n=d().filter(t,(function(t){return t.active&&e.SUPPORTED_EXTENSIONS.includes(m.ZP.path.getFileExtension(t.path))}));Yl.drawBreakpoints(e._jid(),n);var i=d().map(n,(function(e){return{fileName:Jo+e.path,fileLine:e.line}}));return e._command({type:"breakpoints",breakpoints:i})}))},Ql._onBPUpdate=function(){this._setBreakpoints()},Ql._onChangeFrame=function(){var e=(0,r.Z)(o().mark((function e(t,n){var i,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=parseInt(this.currFramePos,10),r=parseInt(n,10),i===r){e.next=6;break}return a=this,this.currFramePos=r,e.abrupt("return",Promise.all([this._command({type:"locals",frameNum:r}).then((function(e){e.error||e.result.error||Yl.drawLocals(a._jid(),e.result),a._parseBacktrace(a.backtrace)})),this._calcWatches()]));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),Ql._parseBacktrace=function(e){var t=this;if(!e)return Yl.drawFrame(this._jid(),[]);var n=e.map((function(e,n){var r=e.fileName;r=d().replace(r,/[^\:]+:\/\//,"");var a=null;return d().startsWith(r,Jo)&&(r=r.substring(Jo.length,r.length),i.Z.currentProject.exists(r)&&(a={uuid:t.uuid,path:r})),{framePos:n,methodName:e.methodName||"(anonymous function)",fileName:r,fileLine:e.fileLine+1,source:a,current:n===t.currFramePos}})),r=n[t.currFramePos];this.frames=n,this.backtrace=e,t._activateLineInEditor(r),Yl.drawFrame(t._jid(),n)},Ql._processOutput=function(e){if(e)switch(e.type){case"PARSE_FAILED_STATE":this._consoleMessage("Failed to parse the file "+e.params.url+":"+e.params.endColumn+"\n");break;case"PAUSED_STATE":this._setCurrentState(e.frame),Yl.debuggerState(this._jid(),{state:ec.PAUSED});var t=e.isException?Qo:Xo;this._statusMessage(t),this._calcWatches()}},Ql._setCurrentState=function(e){this.currFramePos=0,this._parseBacktrace(e.backtrace),Yl.drawLocals(this._jid(),e.locals),e.exception&&this._consoleMessage(e.exception+"\n")},Ql._onResume=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._resumeAction());case 1:case"end":return e.stop()}}),e,this)}))),Ql._resumeAction=function(e){return Yl.debuggerState(this._jid(),{state:ec.RUNNING}),this._statusMessage($o),this._clearState(),this._command({type:"resume",action:e})},Ql._onSendStdin=function(e,t){return this._stdin(t)},Ql._onStepOver=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._resumeAction("next"));case 1:case"end":return e.stop()}}),e,this)}))),Ql._onStepInto=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._resumeAction("in"));case 1:case"end":return e.stop()}}),e,this)}))),Ql._onStepOut=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._resumeAction("out"));case 1:case"end":return e.stop()}}),e,this)})));const Xl=Jl,$l={updateConfigWithCurrent:xl.updateConfigWithCurrent,debug:function(e){xl.debug(e,Xl)}};var eu=function e(t,n){if(!(this instanceof e))return new e(t,n);e._sc.constructor.call(this,t,n)};(0,m.ZP.inherit)(eu,Xl);var tu=eu.prototype;tu.SUPPORTED_EXTENSIONS=["ts","js"],tu._showInstallationInstructions=function(){var e="/"+i.Z.currentProject.path+"/install-software";k.Z.error(["It looks like Deno is not installed.<br/>","Either connect your project to the appropriate Codio certified stack or ","you can install Deno from ","the 'Tools-><a href=\""+e+"\">Install software</a>' menu."].join(""))};const nu=eu,iu={updateConfigWithCurrent:xl.updateConfigWithCurrent,debug:function(e){xl.debug(e,nu)}};function ru(e,t,n,i){this.message=e,this.expected=t,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,ru)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(ru,Error);const au={SyntaxError:ru,parse:function(e){var t,n=arguments.length>1?arguments[1]:{},i={},r={GdbOutput:ce},a=ce,s=/^[~@&]/,o={type:"class",value:"[~@&]",description:"[~@&]"},c=function(e,t){return{type:e,output:t}},l=/^[*+=\^]/,u={type:"class",value:"[*+=^]",description:"[*+=^]"},d=function(e,t,n,i){return{type:t,token:e,resultClass:n,results:ge(i)}},p="=",f={type:"literal",value:"=",description:'"="'},h=function(e,t){return{key:e,value:t}},m="{}",g={type:"literal",value:"{}",description:'"{}"'},v=function(){return{}},b="{",y={type:"literal",value:"{",description:'"{"'},w="}",_={type:"literal",value:"}",description:'"}"'},k=function(e){return ge(e)},P="[]",Z={type:"literal",value:"[]",description:'"[]"'},x=function(){return[]},C="[",S={type:"literal",value:"[",description:'"["'},E="]",I={type:"literal",value:"]",description:'"]"'},T=function(e){return e},j=",",A={type:"literal",value:",",description:'","'},O=function(e,t){return[e].concat(t.map((function(e){return e[1]})))},D=function(e,t){return[e].concat(t)},N=function(e){return e.map((function(e){return e[1]}))},M=/^[a-zA-Z_]/,F={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},R=/^[0-9a-zA-Z\-_]/,L={type:"class",value:"[0-9a-zA-Z-_]",description:"[0-9a-zA-Z-_]"},U=function(){return e.substring($,X)},B=/^[0-9]/,q={type:"class",value:"[0-9]",description:"[0-9]"},H='"',W={type:"literal",value:'"',description:'"\\""'},z=/^[^\\"]/,G={type:"class",value:'[^\\\\"]',description:'[^\\\\"]'},V=function(e){return e.join("")},K="\\",Y={type:"literal",value:"\\",description:'"\\\\"'},J={type:"any",description:"any character"},Q=function(e){switch(e){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";default:return e}},X=0,$=0,ee=[{line:1,column:1,seenCR:!1}],te=0,ne=[],ie=0;if("startRule"in n){if(!(n.startRule in r))throw new Error("Can't start parsing from rule \""+n.startRule+'".');a=r[n.startRule]}function re(t){var n,i,r=ee[t];if(r)return r;for(n=t-1;!ee[n];)n--;for(r={line:(r=ee[n]).line,column:r.column,seenCR:r.seenCR};n<t;)"\n"===(i=e.charAt(n))?(r.seenCR||r.line++,r.column=1,r.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(r.line++,r.column=1,r.seenCR=!0):(r.column++,r.seenCR=!1),n++;return ee[t]=r,r}function ae(e,t){var n=re(e),i=re(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:i.line,column:i.column}}}function se(e){X<te||(X>te&&(te=X,ne=[]),ne.push(e))}function oe(e,t,n,i){return null!==t&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(t),new ru(null!==e?e:function(e,t){var n,i=new Array(e.length);for(n=0;n<e.length;n++)i[n]=e[n].description;return"Expected "+(e.length>1?i.slice(0,-1).join(", ")+" or "+i[e.length-1]:i[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0100-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1000-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(t,n),t,n,i)}function ce(){var t;return(t=function(){var t,n,r;t=X,s.test(e.charAt(X))?(n=e.charAt(X),X++):(n=i,0===ie&&se(o));n!==i&&(r=he())!==i?($=t,t=n=c(n,r)):(X=t,t=i);return t}())===i&&(t=function(){var t,n,r,a,s;t=X,n=function(){var t,n,r;t=X,n=[],B.test(e.charAt(X))?(r=e.charAt(X),X++):(r=i,0===ie&&se(q));if(r!==i)for(;r!==i;)n.push(r),B.test(e.charAt(X))?(r=e.charAt(X),X++):(r=i,0===ie&&se(q));else n=i;n!==i&&($=t,n=U());return t=n,t}(),n===i&&(n=null);n!==i?(l.test(e.charAt(X))?(r=e.charAt(X),X++):(r=i,0===ie&&se(u)),r!==i&&(a=fe())!==i&&(s=pe())!==i?($=t,t=n=d(n,r,a,s)):(X=t,t=i)):(X=t,t=i);return t}()),t}function le(){var t,n,r,a;return t=X,(n=fe())!==i?(61===e.charCodeAt(X)?(r=p,X++):(r=i,0===ie&&se(f)),r!==i&&(a=ue())!==i?($=t,t=n=h(n,a)):(X=t,t=i)):(X=t,t=i),t}function ue(){var t;return(t=he())===i&&(t=function(){var t,n,r,a;t=X,e.substr(X,2)===m?(n=m,X+=2):(n=i,0===ie&&se(g));n!==i&&($=t,n=v());t=n,t===i&&(t=X,123===e.charCodeAt(X)?(n=b,X++):(n=i,0===ie&&se(y)),n!==i&&(r=de())!==i?(125===e.charCodeAt(X)?(a=w,X++):(a=i,0===ie&&se(_)),a!==i?($=t,t=n=k(r)):(X=t,t=i)):(X=t,t=i));return t}(),t===i&&(t=function(){var t,n,r,a;t=X,e.substr(X,2)===P?(n=P,X+=2):(n=i,0===ie&&se(Z));n!==i&&($=t,n=x());t=n,t===i&&(t=X,91===e.charCodeAt(X)?(n=C,X++):(n=i,0===ie&&se(S)),n!==i?(r=function(){var t,n,r,a,s,o;if(t=X,n=ue(),n!==i){for(r=[],a=X,44===e.charCodeAt(X)?(s=j,X++):(s=i,0===ie&&se(A)),s!==i&&(o=ue())!==i?a=s=[s,o]:(X=a,a=i);a!==i;)r.push(a),a=X,44===e.charCodeAt(X)?(s=j,X++):(s=i,0===ie&&se(A)),s!==i&&(o=ue())!==i?a=s=[s,o]:(X=a,a=i);r!==i?($=t,t=n=O(n,r)):(X=t,t=i)}else X=t,t=i;return t}(),r===i&&(r=de()),r!==i?(93===e.charCodeAt(X)?(a=E,X++):(a=i,0===ie&&se(I)),a!==i?($=t,t=n=T(r)):(X=t,t=i)):(X=t,t=i)):(X=t,t=i));return t}())),t}function de(){var e,t,n;return e=X,(t=le())!==i&&(n=pe())!==i?($=e,e=t=D(t,n)):(X=e,e=i),e}function pe(){var t,n,r,a,s;for(t=X,n=[],r=X,44===e.charCodeAt(X)?(a=j,X++):(a=i,0===ie&&se(A)),a!==i&&(s=le())!==i?r=a=[a,s]:(X=r,r=i);r!==i;)n.push(r),r=X,44===e.charCodeAt(X)?(a=j,X++):(a=i,0===ie&&se(A)),a!==i&&(s=le())!==i?r=a=[a,s]:(X=r,r=i);return n!==i&&($=t,n=N(n)),t=n}function fe(){var t,n,r,a;if(t=X,M.test(e.charAt(X))?(n=e.charAt(X),X++):(n=i,0===ie&&se(F)),n!==i){for(r=[],R.test(e.charAt(X))?(a=e.charAt(X),X++):(a=i,0===ie&&se(L));a!==i;)r.push(a),R.test(e.charAt(X))?(a=e.charAt(X),X++):(a=i,0===ie&&se(L));r!==i?($=t,t=n=U()):(X=t,t=i)}else X=t,t=i;return t}function he(){var t,n,r,a;if(t=X,34===e.charCodeAt(X)?(n=H,X++):(n=i,0===ie&&se(W)),n!==i){for(r=[],z.test(e.charAt(X))?(a=e.charAt(X),X++):(a=i,0===ie&&se(G)),a===i&&(a=me());a!==i;)r.push(a),z.test(e.charAt(X))?(a=e.charAt(X),X++):(a=i,0===ie&&se(G)),a===i&&(a=me());r!==i?(34===e.charCodeAt(X)?(a=H,X++):(a=i,0===ie&&se(W)),a!==i?($=t,t=n=V(r)):(X=t,t=i)):(X=t,t=i)}else X=t,t=i;return t}function me(){var t,n,r;return t=X,92===e.charCodeAt(X)?(n=K,X++):(n=i,0===ie&&se(Y)),n!==i?(e.length>X?(r=e.charAt(X),X++):(r=i,0===ie&&se(J)),r!==i?($=t,t=n=Q(r)):(X=t,t=i)):(X=t,t=i),t}function ge(e){var t={};return e.forEach((function(e){t[e.key]=e.value})),t}if((t=a())!==i&&X===e.length)return t;throw t!==i&&X<e.length&&se({type:"end",description:"end of input"}),oe(null,ne,te<e.length?e.charAt(te):null,te<e.length?ae(te,te+1):ae(te,te))}};var su=function e(t){if(!(this instanceof e))return new e(t);this.callbacks=t||{sendCommand:d().noop,onGdbPrompt:d().noop,onProgramOutput:d().noop,onExecStateChanged:d().noop},this.initialized=!1,this.commandDeferreds={},this.leftOutput=""},ou=su.prototype;function cu(e,t){if(d().startsWith(t,"(gdb)"))e.callbacks.onGdbPrompt();else{var n;try{n=au.parse(t)}catch(e){return void console.error(e)}switch(n.type){case"@":e.callbacks.onProgramOutput(n.output);break;case"*":e.callbacks.onExecStateChanged({state:n.resultClass,params:n.results});break;case"^":var i=e.commandDeferreds[n.token];i&&(i.resolve({state:n.resultClass,params:n.results}),delete e.commandDeferreds[n.token])}}}ou.command=function(e){var t,n=m.ZP.promise.deferred(),i=(t=Ao()(Math.random()+Math.random()),parseInt(t.substring(0,8),16).toString());this.commandDeferreds[i]=n;var r=this;return this.callbacks.sendCommand(i+e).then((function(t){t.error&&(n.reject(new Error("command ".concat(i+e," failed"))),delete r.commandDeferreds[i])})),n.promise},ou.feedOutput=function(e){e&&function(e,t){for(var n=0;;){var i=t.indexOf("\n",n);if(-1===i)return void(e.leftOutput+=t.substring(n));var r=e.leftOutput+t.substring(n,i);e.leftOutput="",cu(e,r),n=i+1}}(this,e)};const lu=su;var uu=m.ZP.str.bold,du=y.Z.create(n(86868)),pu=new RegExp("^"+Jo),fu=function e(t,n){if(!(this instanceof e))return new e(t,n);this.initializedFuture=m.ZP.promise.deferred(),this.pipeline=new lu({sendCommand:this._command.bind(this),onGdbPrompt:xu.bind(null,this),onProgramOutput:this._consoleMessage.bind(this),onExecStateChanged:ku.bind(null,this)}),this.deferredBreakpoints=!1,e._sc.constructor.call(this,t,n)};(0,m.ED)(fu,Tl);var hu=fu.prototype;function mu(e){return fc.ZP.breakpoints().then((function(t){var n=Pu(e,'-interpreter-exec console "delete breakpoints"'),i=d()(t).map((function(t){var n="-break-insert "+(t.active?"":" -d ")+t.path+":"+(t.line+1);return Pu(e,n).then((function(e){if("done"===e.state)return t}))})).value();return Promise.all(i).then((function(t){var n=t.filter((function(e){return!!e}));du.drawBreakpoints(e._jid(),n)})),Promise.all([n,i])}))}function gu(e,t){var n="-data-evaluate-expression ";return(0===t||t)&&(n+=" --thread "+e.currThreadId+" --frame "+t+" "),hc.ZP.watches(e.uuid).then((function(t){var i=t.map((function(t){return Pu(e,n+JSON.stringify(t.watch)).then((function(e){return{watch:t.watch,error:"done"!==e.state,value:e.params.value||e.params.msg}}))}));Promise.all(i).then((function(t){du.drawWatches(e._jid(),t)}))}))}function vu(e){return Pu(e,"-stack-list-frames").then((function(t){if("done"===t.state){var n=t.params.stack.filter((function(e){return"frame"===e.key})).map((function(t){var n=t.value,r=null,a=n.file,s=a&&a.replace(pu,"");i.Z.currentProject.exists(s)&&(r={uuid:e.uuid,path:s});var o=Number(n.level);return{framePos:o,methodName:n.func,fileName:n.file,fileLine:Number(n.line),source:r,current:e.currStackPos===o}}));e.frames=n,du.drawFrame(e._jid(),n)}}))}function bu(e,t){var n="-stack-list-variables";return(0===t||t)&&(n+=" --thread "+e.currThreadId+" --frame "+t),Pu(e,n+=" --all-values").then((function(t){if("done"===t.state){var n=t.params.variables.map((function(e){return{name:e.name,value:e.value}}));du.drawLocals(e._jid(),n)}}))}function yu(e,t){return Promise.all([vu(e),bu(e,t)])}function wu(e,t,n){if(i.Z.currentProject.exists(t.source.path)){var r=e.frames&&e.frames[e.currStackPos];e._activateLineInEditor(t,r)}e.currStackPos=n}function _u(e){e.deferredBreakpoints&&(mu(e),e.deferredBreakpoints=!1),gu(e)}function ku(e,t){if("running"===t.state){e._cleanupState();var n=m.ZP.promise.delay(50).then((function(){n===e._runningStatusDelayFuture&&e._statusMessage($o)}));e._runningStatusDelayFuture=n}else if("stopped"===t.state){switch(e._runningStatusDelayFuture=null,t.params.reason){case"exited-signalled":return e._statusMessage("Program exited with an error."),void du.debuggerState(e._jid(),{state:ec.EXITED});case"exited":var i="Program exited with an error. Exit code: "+Number(t.params["exit-code"]);return e._statusMessage(i),void du.debuggerState(e._jid(),{state:ec.EXITED});case"exited-normally":return e._statusMessage("Program exited normally."),void du.debuggerState(e._jid(),{state:ec.EXITED});case"signal-received":var r="Program received signal "+t.params["signal-name"]+". "+t.params["signal-meaning"];e._statusMessage(r);break;default:e._statusMessage(Xo)}e.currThreadId=t.params["thread-id"];var a=t.params.frame.file,s=a&&a.replace(pu,""),o={fileLine:Number(t.params.frame.line),source:{path:s}};wu(e,o,0),du.debuggerState(e._jid(),{state:ec.PAUSED}),_u(e)}}function Pu(e,t){return e.pipeline.command(t)}function Zu(e,t){var n=Pu(e,t);return e._cleanupState(),n.then((function(){return yu(e)}))}function xu(e){e.initializedFuture.resolve()}function Cu(){var e="/"+i.Z.currentProject.path+"/install-software";k.Z.error(["It looks like GDB is not installed.<br/>","Either connect your project to the appropriate Codio certified stack or ","you can install GDB from ","the 'Tools-><a href=\""+e+"\">Install software</a>' menu."].join(""))}hu._onBPUpdate=function(){this.frames?mu(this):this.deferredBreakpoints||(this.deferredBreakpoints=!0)},hu._onWatchUpdate=function(){this.frames&&gu(this)},hu._initDebuggerState=function(){return Promise.all([mu(this),Zu(this,"-exec-run --start")])},hu._onConnectionInit=function(e){if(!this._isInitializingDebugger){this._isInitializingDebugger=!0,this._statusMessage(Go);var t=this,n=this.config;return e&&(n=d().defaults({forceRestart:!0},n)),this.stream(n).then((function(e){if(t._isInitializingDebugger=!1,du.consoleInit(t._jid(),{port:e.terminalPort}),e.error)switch(du.debuggerState(t._jid(),{state:ec.EXITED}),e.code){case"BEFORE_ERROR":t._statusMessage("Got an error before initializing the debugger.");break;case"NO_TARGET":t._consoleMessage(uu('<a href="https://docs.codio.com/common/develop/ide/debugger/debugger.html#debugger" target="_blank">No file to debug</a>\n\n'),!0),t._statusMessage("Could not find the executable to debug.");break;case"NO_PREREQUISITES":Cu()}else e.isContinuing?(t._statusMessage("Resuming debug"),t.initializedFuture.resolve(),t._cleanupState(),Pu(t,"-thread-info").then((function(e){if("done"===e.state){t.currThreadId=e.params["current-thread-id"];var n=d().find(e.params.threads,{id:t.currThreadId}),i=n.frame,r=n.frame.file,a=r&&r.replace(pu,""),s={fileLine:Number(i.line),source:{path:a}};wu(t,s,Number(i.level)),du.debuggerState(t._jid(),{state:ec.PAUSED}),yu(t),_u(t)}}))):(t._statusMessage(Yo),t.initializedFuture.promise.then((function(){t._initDebuggerState()})))})).catch((function(){t._isInitializingDebugger=!1,t._statusMessage(Vo),du.debuggerState(t._jid(),{state:ec.EXITED})}))}},hu._onConnectionOffline=function(){this._cleanupState(),this._statusMessage(Ko)},hu._onConnectionData=function(e,t){if("before"===(e=e&&e.topic)||"output"===e){if("before"===e){var n=/: not found|: command not found/i.test(t);this.config.single&&n&&Cu()}this._consoleMessage(t,"before"===e)}else"in"===e&&this.pipeline.feedOutput(t)},hu._onChangeFrame=function(){var e=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._changeFrameInProgress){e.next=2;break}return e.abrupt("return");case 2:if(this.currStackPos===n){e.next=5;break}return wu(this,this.frames[n],n),e.abrupt("return",Promise.all([yu(this,n),gu(this)]));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),hu._onSendStdin=function(e,t){return this._stdin(t)},hu._onResume=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zu(this,"-exec-continue"));case 1:case"end":return e.stop()}}),e,this)}))),hu._onStepOver=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zu(this,"-exec-next"));case 1:case"end":return e.stop()}}),e,this)}))),hu._onStepInto=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zu(this,"-exec-step"));case 1:case"end":return e.stop()}}),e,this)}))),hu._onStepOut=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.frames&&this.frames.length>1)){e.next=4;break}return e.abrupt("return",Zu(this,"-exec-finish"));case 4:k.Z.error("No frames for step out");case 5:case"end":return e.stop()}}),e,this)}))),hu._cleanupState=function(){if(du.debuggerState(this._jid(),{state:ec.RUNNING}),d().isNumber(this.currStackPos)&&this.frames){var e=this.frames[this.currStackPos];this._deactivateLineInEditor(e)}this.currThreadId=null,this.currStackPos=null,this.frames=null};const Su=fu,Eu={updateConfigWithCurrent:xl.updateConfigWithCurrent,debug:function(e){xl.debug(e,Su)}};var Iu=y.Z.create(n(86868)),Tu=f().compile('<div id="codio-debugger">\n    <div class="codio-debugger-header">\n        <ul class="tabbed debugger-tab-titles">\n        </ul>\n    </div>\n    <div class="active-debugger">\n    </div>\n</div>'),ju=f().compile('{{#each targets}}\n<li {{#equals uuid ../active}}class="active"{{/equals}}><a href="#tab-{{uuid}}">{{name}}</a></li>\n{{/each}}'),Au=l()(Tu()),Ou=[],Du=null,Nu={};Nu[No]=Rl,Nu[Ro]=Gl,Nu[Lo]=Gl,Nu[Uo]=$l,Nu[Bo]=iu,Nu[qo]=Eu;const Mu={impl:Nu,listen:function(){y.Z.subscribe("command:debug:start",this.onStartDebug.bind(this)),y.Z.subscribe("command:debug:stop:#uuid",this.onStopDebug.bind(this)),fc.ZP.listen(),hc.ZP.listen()},_handleTabClick:function(e){e.preventDefault();var t=l()(e.target).attr("href");if(null!==t.match(/#tab-/)){var n=t.replace("#tab-","");this._openTab(n)}},_openTab:function(e){var t=Au.find(".tabbed li"),n=t.find('a[href="#tab-'+e+'"]').parent();t.removeClass("active"),n.addClass("active"),Du=e;var i=d().find(Ou,(function(t){return t.uuid===e}));i&&(Au.find(".codio-debugger-instance").detach(),Au.find(".active-debugger").append(i.ui.render()))},onStopDebug:function(e){var t=e.uuid,n=d().remove(Ou,(function(e){return e.uuid===t}));n&&n[0].ui.close(),d().isEmpty(Ou)?(Au.detach(),Iu.debuggerPanelSwitched()):(Du=Ou[0].uuid,this._renderTabs(),this._openTab(Du))},_renderTabs:function(){var e=l()(ju({targets:Ou,active:Du})),t=Au.find(".codio-debugger-header");d().size(Ou)>1?t.removeClass("hide"):t.addClass("hide"),Au.find(".debugger-tab-titles").html(e),y.Z.on(e,"click.debugger","a",this._handleTabClick.bind(this))},onStartDebug:function(e,t){var n=this.impl[t.type];if(n){var i=Promise.resolve(t);n.updateConfigWithCurrent&&(i=n.updateConfigWithCurrent(t));var r=this;i.then((function(e){var t=l()("div.ide");0===t.find("#codio-debugger").length&&(t.append(Au),Iu.debuggerPanelSwitched());var i=d().find(Ou,(function(t){return t.uuid===e.uuid}));if(i)r._openTab(i.uuid);else{var a=d().cloneDeep(e);a.ui=new Kc(e),Ou.push(a),Du=e.uuid,r._renderTabs(),n.debug(e),r._openTab(e.uuid)}})).catch((function(e){k.Z.error(e.message)}))}}};i.Z.register({info:fo,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pc);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),Mu.listen();const Fu=JSON.parse('{"name":"codio-lsp","description":"Language server","codio":{"global":true,"noFile":true,"title":"Language server","urls":"lsp"}}'),Ru=JSON.parse('{"toggle":{"key":"Shift+Alt+L","desc":"Toggle language Server settings"}}'),Lu=JSON.parse('{"enable_lsp_support":{"default":false,"type":"boolean","desc":"Enable language server support."}}');n(28190);var Uu=b.ZP.containerManager,Bu=null,qu=!1,Hu=0,Wu={},zu={},Gu=[],Vu=null,Ku=null,Yu=null;function Ju(){return Qi.Z.get("backendSchema")+i.Z.currentProject.backendSubDomain+"-9002."+Qi.Z.get("boxDomain")}function Qu(){function e(){qu=!0,Yu=null}null===Yu&&(Yu=Xu(-1).then(e).catch((function(){var t=i.Z.currentProject.guid;return Uu.run(t,"/usr/share/codio/lsp-proxy-v2/lsp-proxy-v2.sh",{}).then((function(){return Xu(0).then(e)})).catch(e)})))}function Xu(e){e=e||0;var t=l().ajax({url:Ju()+"/p/info",type:"GET",contentType:"application/json; charset=UTF-8",xhrFields:{withCredentials:!0},timeout:1e3}),n=m.ZP.promise.deferred();return t.then((function(){n.resolve()})).fail((function(){if(e>80||-1===e)return n.reject(new Error("can not connect to lsp"));m.ZP.promise.delay(250).then((function(){n.resolve(Xu(e+1))}))})),n.promise}function $u(){var e="WebSocket"in window;Bu=new(ol())(Ju(),{reconnect:{retries:1/0,max:"5000 ms"},strategy:["online","timeout","disconnect"],websockets:e,pingTimeout:25e3,transport:{transports:["websocket"]}});var t=0;Bu.on("open",(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0,null!==Ku){e.next=10;break}return e.prev=2,e.next=5,sd();case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return");case 10:return e.next=12,m.ZP.promise.getState(Ku.promise);case 12:e.sent===m.ZP.promise.STATES.PENDING?Ku.resolve():d().each(zu,(function(e){e.onReconnect&&e.onReconnect()}));case 14:case"end":return e.stop()}}),e,null,[[2,7]])})))),Bu.on("close",(function(){d().each(zu,(function(e){e.onCloseConnection&&e.onCloseConnection()}))})),Bu.on("reconnect",(function(){qu&&(++t>12?td():t%5==0&&Qu())})),Bu.on("data",(function(e){var t=e;try{t=JSON.parse(e),d().each(t,id)}catch(e){}})),y.Z.subscribe("project:shutdown",ed)}function ed(){td()}function td(){return nd.apply(this,arguments)}function nd(){return(nd=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Bu){e.next=14;break}if(Bu.end(),Bu=null,!Ku){e.next=9;break}return e.next=6,m.ZP.promise.getState(Ku.promise);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=null;case 10:t=e.t0,Ku&&t===m.ZP.promise.STATES.PENDING&&Ku.reject(new Error("primus connection closed")),Ku=null,d().each(zu,(function(e){e.onDisconnect&&e.onDisconnect()}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function id(e){return rd.apply(this,arguments)}function rd(){return rd=(0,r.Z)(o().mark((function e(t){var n,i,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cd(JSON.stringify(t),"in"),n=t.id,(i=Wu[n])?void 0!==t.error?i.reject(new Error(t.error)):i.resolve(t.result):zu[t.type]&&(r=zu[t.type].onNotification)&&r(t);case 4:case"end":return e.stop()}}),e)}))),rd.apply(this,arguments)}function ad(e,t,n,i){return sd().then((function(){var r=++Hu,a=function(e){return Wu[e]=m.ZP.promise.deferred(),Wu[e].promise}(r),s=JSON.stringify({jsonrpc:"2.0",id:r,method:e,params:n,type:t,notification:void 0!==i&&i});return Bu.write(s),cd(s,"out"),a}))}function sd(){return od.apply(this,arguments)}function od(){return(od=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ku){e.next=6;break}return e.next=3,m.ZP.promise.getState(Ku.promise);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=null;case 7:return t=e.t0,null!==Ku&&t!==m.ZP.promise.STATES.REJECTED||(Ku=m.ZP.promise.deferred(),Qu(),Bu&&Bu.end(),$u()),e.abrupt("return",Ku.promise);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cd(e,t){Gu.unshift({message:e,direction:t})>50&&Gu.pop(),Vu&&Vu(Gu)}const ld={sendMessage:function(e,t,n){return ad(e,t,n,!1)},sendNotification:function(e,t,n){return ad(e,t,n,!0)},registerTypeListener:function(e,t){zu[e]=t},deregisterTypeListener:function(e){delete zu[e]},terminate:td,registerHistoryListener:function(e){Vu=e,e&&e(Gu)}};var ud=f().compile("<div class=\"scrollable\">\n    {{#each history}}\n    <p>\n        {{#equals direction 'in'}}<=={{/equals}}\n        {{#equals direction 'out'}}==>{{/equals}}\n        &nbsp;\n        {{message}}\n    </p>\n    {{/each}}\n</div>"),dd=function e(t){if(!(this instanceof e))return new e(t);this.container=t,ld.registerHistoryListener(this.render.bind(this))},pd=dd.prototype;pd.activate=function(){},pd.deactivate=function(){},pd.close=function(){ld.registerHistoryListener(null)},pd.render=function(e){var t=l()(ud({history:e}));this.container.empty().append(t)};const fd=dd;var hd=n(94117).VF,md=n(94117)._Q,gd=new Error("IGNORE_ERROR"),vd=function(e,t,n){this._ready=m.ZP.promise.deferred(),this._type=e,this._diagnostics={},this._onDiagnostics=t,this._onInitError=n,this._requestsCache={},this._closing=!1,this._init().catch((function(){}))},bd=vd.prototype;function yd(e){return 1===e||void 0===e?"error":"warning"}bd._init=function(){var e=this,t=this._type;return this._closing=!1,ld.sendMessage("codio/initLs",t,{}).then((function(){return ld.sendMessage("initialize",t,{rootUri:hd("")})})).then((function(){ld.registerTypeListener(e._type,e._getInterface()),e._ready.resolve()})).catch((function(t){e._ready.reject(t),e._onInitError&&e._onInitError()})),this._ready.promise},bd._getInterface=function(){var e=this;return{onNotification:this._onNotification.bind(this),onDisconnect:function(){return e._onDisconnect().catch((function(e){}))},onReconnect:function(){return e._onReconnect().catch((function(e){}))},onCloseConnection:function(){return e._onCloseConnection().catch((function(e){}))}}},bd._onCloseConnection=function(){return this._ready||(this._ready=m.ZP.promise.deferred()),this._closing=!0,this._ready.reject(new Error("connection closed")),this._ready.promise},bd._onDisconnect=function(){return this._onCloseConnection()},bd._onReconnect=function(){return this._ready&&this._ready.reject(new Error("reconnect")),this._ready=m.ZP.promise.deferred(),this._init()},bd._onRestart=function(){return this._closing?Promise.resolve():(this._ready&&this._ready.reject(new Error("reconnect")),this._ready=m.ZP.promise.deferred(),this._init())},bd._onNotification=function(e){if("textDocument/publishDiagnostics"===e.method){var t=e.params;this._diagnostics[t.uri]=(n=t.diagnostics,d().map(n,(function(e){return{from:{lineNumber:e.range.start.line+1,column:e.range.start.character+1},to:{lineNumber:e.range.end.line+1,column:e.range.end.character+1},severity:yd(e.severity),message:e.message}}))),this._onDiagnostics&&this._onDiagnostics(md(t.uri))}else"codio/downLs"===e.method&&this._onRestart().catch((function(e){}));var n},bd._sendNotification=function(e,t){var n=this._type;return this._ready.promise.then((function(){return ld.sendNotification(e,n,t)}))},bd._sendMessage=function(e,t){var n=this;if(this._closing)return Promise.reject(gd);var i=m.ZP.hashCode(JSON.stringify({method:e,params:t}),!0);if(void 0===this._requestsCache[i]){var r=this._type;this._requestsCache[i]=this._ready.promise.then((function(){return ld.sendMessage(e,r,t)})),this._requestsCache[i].finally((function(){delete n._requestsCache[i]}))}return this._requestsCache[i]},bd.reconnectIfFailed=(0,r.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.promise.getState(this._ready.promise);case 2:if(t=e.sent,!(n=t===m.ZP.promise.STATES.REJECTED&&!i.Z.currentProject.isOff())){e.next=13;break}return e.prev=5,e.next=8,this._onReconnect();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),e.t0;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this,[[5,10]])}))),bd.hover=function(){var e=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._sendMessage("textDocument/hover",{textDocument:{uri:hd(t)},position:{line:n.lineNumber-1,character:n.column-1}}).then((function(e){return e.contents})).catch((function(e){})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),bd.getDiagnostics=function(e){return this._diagnostics[hd(e)]||[]},bd.resolveItems=function(){var e=(0,r.Z)(o().mark((function e(t){var n,i,r,a,s,c=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==t.length){e.next=2;break}return e.abrupt("return",t);case 2:if(n=d().filter(t,(function(e){return!e.textEdit})),0!==n.length){e.next=5;break}return e.abrupt("return",t);case 5:return i=d().sortBy(n,(function(e){return e.sortText?e.sortText:e.label})),r=d().filter(t,(function(e){return e.textEdit})),a=d().take(i,70),s=d().map(a,(function(e){return"python"===c._type?Promise.resolve(e):c._sendMessage("completionItem/resolve",e)})),e.abrupt("return",Promise.all(s).then((function(e){return d().concat(r,e)})).catch((function(e){})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),bd.hint=function(e,t){var n=this;return this._sendMessage("textDocument/completion",{textDocument:{uri:hd(e)},position:{line:t.lineNumber-1,character:t.column-1}}).then((function(e){var t=d().isArray(e.items)?e.items:e;return 0===t.length?[]:n.resolveItems(t).then((function(e){return e})).catch((function(){return Promise.resolve(t)}))})).catch((function(e){}))},bd.didOpen=function(e,t){return this._sendNotification("textDocument/didOpen",{textDocument:{uri:hd(e),text:t,version:0}})},bd.didChange=function(e,t,n){return this._sendNotification("textDocument/didChange",{textDocument:{uri:hd(e),version:n},contentChanges:[{text:t}]})},bd.didClose=function(e){return this._sendNotification("textDocument/didClose",{textDocument:{uri:hd(e)}})};const wd=vd;var _d=n(12953),kd=y.Z.create(n(19423)),Pd={},Zd={},xd=!1,Cd=null;function Sd(e){kd.diagnosticsUpdated({fileName:e})}function Ed(e,t){t&&!t.isDisposed()&&Nd(e,t.getValue()).catch((function(){}))}function Id(e){d().each(Pd,(function(t,n){t.type===e&&Od(n).catch((function(e){}))})),delete Zd[e],d().isEmpty(Zd)&&Ud().catch((function(e){}))}function Td(){return Td=(0,r.Z)(o().mark((function e(t,n){var i,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&!n.isDisposed()){e.next=2;break}return e.abrupt("return");case 2:if(!Pd[t]||1!==Pd[t].count){e.next=11;break}if(i=n.getLanguageId(),Zd[i]){e.next=6;break}return e.abrupt("return");case 6:return r=Zd[i],a=n.getValue(),e.next=10,r.reconnectIfFailed();case 10:return e.abrupt("return",r.didOpen(t,a).catch((function(e){})));case 11:case"end":return e.stop()}}),e)}))),Td.apply(this,arguments)}function jd(){return jd=(0,r.Z)(o().mark((function e(t,n){var i,r,a,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&!n.isDisposed()){e.next=2;break}return e.abrupt("return");case 2:if(Pd[t]){e.next=13;break}return i=n.getLanguageId(),Zd[i]||(Zd[i]=new wd(i,Sd,Id.bind(null,i))),r=Zd[i],a=n.getValue(),s=d().debounce(Ed.bind(null,t,n),500,{maxWait:5e3}),c=n.onDidChangeModelContent(s),Pd[t]={count:1,model:n,type:i,version:0,disposableHandler:c},e.next=12,r.reconnectIfFailed();case 12:return e.abrupt("return",r.didOpen(t,a).catch((function(e){})));case 13:Pd[t].count++;case 14:case"end":return e.stop()}}),e)}))),jd.apply(this,arguments)}function Ad(e){return d().filter(Pd,(function(t){return t.type===e})).length>0}function Od(e){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,r.Z)(o().mark((function e(t){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pd[t]){e.next=2;break}return e.abrupt("return");case 2:if(Pd[t].count--,0!==Pd[t].count){e.next=9;break}return n=Pd[t].type,Pd[t].disposableHandler.dispose(),i=Zd[n],delete Pd[t],e.abrupt("return",i.didClose(t).then((function(){if(Ad(n)||(delete Zd[n],ld.deregisterTypeListener(n)),d().isEmpty(Pd))return Ud()})));case 9:case"end":return e.stop()}}),e)}))),Dd.apply(this,arguments)}function Nd(e,t){return Md.apply(this,arguments)}function Md(){return Md=(0,r.Z)(o().mark((function e(t,n){var i,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pd[t]){e.next=2;break}return e.abrupt("return");case 2:return i=++Pd[t].version,r=Pd[t].type,a=Zd[r],e.next=7,a.reconnectIfFailed();case 7:return e.sent&&Ld(),e.abrupt("return",a.didChange(t,n,i));case 10:case"end":return e.stop()}}),e)}))),Md.apply(this,arguments)}function Fd(){return Fd=(0,r.Z)(o().mark((function e(t,n,i,r){var a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pd[t]){e.next=2;break}return e.abrupt("return");case 2:if(!(a=Pd[t].model).isDisposed()){e.next=5;break}return e.abrupt("return");case 5:return s=a.getValue(),e.abrupt("return",Nd(t,s).then((function(){var e=Pd[t].type;return Zd[e].hint(t,n,i||"").then((function(e){r&&r(e)}))})));case 7:case"end":return e.stop()}}),e)}))),Fd.apply(this,arguments)}function Rd(){return Rd=(0,r.Z)(o().mark((function e(t,n,i){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pd[t]){e.next=2;break}return e.abrupt("return");case 2:return r=Pd[t].type,a=Zd[r],e.next=6,a.reconnectIfFailed();case 6:return e.sent&&Ld(),e.abrupt("return",a.hover(t,n).then((function(e){i&&i(e)})));case 9:case"end":return e.stop()}}),e)}))),Rd.apply(this,arguments)}function Ld(){d().each(Pd,(function(e,t){var n=Zd[e.type];e.model.isDisposed()||n.didOpen(t,e.model.getValue()).catch((function(){})),e.version=0}))}function Ud(){return Bd.apply(this,arguments)}function Bd(){return Bd=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d().map(Pd,(function(e,t){return Od(t)})),e.prev=1,e.next=4,Promise.all(t);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return Pd={},Zd={},e.abrupt("return",ld.terminate());case 11:case"end":return e.stop()}}),e,null,[[1,6]])}))),Bd.apply(this,arguments)}function qd(){return(qd=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hd(){Cd.then((function(e){e&&(xd=v.Z.get("codio-lsp").enable_lsp_support,y.Z.subscribe("settings:changed",(function(){var e=v.Z.get("codio-lsp").enable_lsp_support;xd!==e&&((xd=e)?k.Z.info("LSP support enabled. Please refresh/reload your browser for the change to be effective "):Ud().catch((function(){})))})))}))}var Wd=function(e){return d().includes(_d.B,e)};const zd=function(){Cd=function(){return qd.apply(this,arguments)}(),y.Z.subscribe("file:editor:activate",(function(e,t){var n=t.codeEditor;if(n&&n.lspSupport&&xd){var i=n.model();Wd(i.getLanguageId())&&function(e,t){return Td.apply(this,arguments)}(n.fileName,i).catch((function(){}))}})),y.Z.subscribe("file:editor:open",(function(e,t){if(t&&t.lspSupport&&xd){var n=t.model();Wd(n.getLanguageId())&&function(e,t){return jd.apply(this,arguments)}(t.fileName,n).catch((function(){}))}})),y.Z.subscribe("file:editor:close",(function(e,t){t&&t.lspSupport&&xd&&Od(t.fileName).catch((function(){}))})),y.Z.subscribe("file:editor:hint",(function(e,t){xd?function(e,t,n,i){return Fd.apply(this,arguments)}(t.fileName,t.position,t.curLine,t.cb).catch((function(){})):t.cb(!1)})),y.Z.subscribe("file:editor:lint",(function(e,t){xd?function(e,t,n){if(Pd[e]){var i=Pd[e].type,r=Zd[i].getDiagnostics(e);n&&n(r)}}(t.fileName,t.text,t.cb):t.cb([])})),y.Z.subscribe("file:editor:hover",(function(e,t){xd?function(e,t,n){return Rd.apply(this,arguments)}(t.fileName,t.position,t.cb).catch((function(){})):t.cb()})),y.Z.subscribe("command:codio-lsp:toggle",(function(){Cd.then((function(e){if(e){var t=v.Z.get("codio-lsp").enable_lsp_support;kd.projectSettingsUpdate({arg:{plugin:"codio-lsp",key:"enable_lsp_support",value:!t}})}else k.Z.info('Sorry, but LSP does not enabled in your organization account. Please contact us <a href="mailto:help@codio.com">help@codio.com</a> to find out more and to discuss this further.')}))})),y.Z.subscribe("settings:loaded",Hd),ld.registerTypeListener("global",{onReconnect:function(){d().defer(Ld)}})};i.Z.register({info:Fu,hotkeys:Ru,settings:Lu,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fd);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),zd();const Gd=JSON.parse('{"name":"junit","description":"JUnit","codio":{"global":true,"noFile":true,"title":"JUnit","urls":"junit"}}'),Vd=JSON.parse('{"open":{"key":"Shift+Alt+J","desc":"Open and execute JUnit"}}'),Kd=JSON.parse('{"timeout":{"default":30,"type":"int","desc":"set time out for junit scripts."}}');var Yd=n(50156),Jd=y.Z.create(n(23112)),Qd=function e(t){if(!(this instanceof e))return new e(t);this.container=t},Xd=Qd.prototype,$d={},ep=f().compile('<form action="/" method="post" class="form-horizontal codio-junit-form" novalidate>\n    <fieldset>\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="junit-version">\n                JUnit version\n            </label>\n            <div class="controls">\n                <select id="junit-version" name="junit-version" class="input-xlarge" data-required="true">\n                    <option value="5.10.0" {{#equals jUnitVersion \'5.10.0\'}}selected{{/equals}}>JUnit5 v5.10.0</option>\n                    <option value="5" {{#equals jUnitVersion \'5\'}}selected{{/equals}}>JUnit5 v5.6.1</option>\n                    <option value="4.13.2" {{#equals jUnitVersion \'4.13.2\'}}selected{{/equals}}>JUnit4 v4.13.2</option>\n                    <option value="4" {{#equals jUnitVersion \'4\'}}selected{{/equals}}>JUnit4 v4.12</option>\n                </select>\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="junit-main-source">\n                Source path:\n            </label>\n            <div class="controls">\n                <input type="text" id="junit-main-source" name="junit-main-source" class="input-xlarge" value="{{mainSource}}" placeholder="Sources..." maxlength="256" required data-required="true" autofocus>\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="junit-test-source">\n                Tests source path:\n            </label>\n            <div class="controls">\n                <input type="text" id="junit-test-source" name="junit-test-source" class="input-xlarge" value="{{testSource}}" placeholder="Test sources..." maxlength="256" required data-required="true">\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="junit-libraries">\n                Library path:\n            </label>\n            <div class="controls">\n                <input type="text" id="junit-libraries" name="junit-libraries" class="input-xlarge" value="{{libraries}}" placeholder="Libraries..." maxlength="1024" required data-required="true">\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="junit-libraries">\n                Working directory:\n            </label>\n            <div class="controls">\n                <input type="text" id="junit-wd" name="junit-wd" class="input-xlarge" value="{{wd}}" placeholder="Working directory..." maxlength="1024" required data-required="true">\n            </div>\n        </div>\n\n        <hr/>\n\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="junit-add-case">\n                Add test case:\n            </label>\n            <div class="controls">\n                <input type="text" id="junit-add-case" name="junit-add-case" class="input-xlarge" value="{{librariesPath}}" placeholder="Path to file or drop it..." maxlength="1024" required data-required="true">\n                <button type="button" class="btn" id="junit-add-case-btn">Add test case</button>\n            </div>\n        </div>\n\n        <hr/>\n\n        <div id="junit-test-cases">\n\n        </div>\n\n    </fieldset>\n</form>\n'),tp=f().compile('<div class="control-group">\n    <label class="control-label hint hint-top">\n        <button class="remove-btn icon-button" aria-label="Remove test case" title="Remove test case">\n            <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n        </button>\n        Test case\n    </label>\n    <div class="controls">\n        <div class="junit-case-info">\n            {{#if jUnit5Case}}\n            <div><strong class="junit5-case">It is JUnit5 case</strong></div>\n            {{/if}}\n            <div><strong>Path:</strong> <span class="junit-case-path">{{casePath}}</span></div>\n            <div><strong>Class name:</strong> <span class="junit-case-class">{{className}}</span></div>\n        </div>\n        {{#if showExecute}}\n            <button type="submit" class="btn btn-primary" id="junit-execute-btn">Execute all</button>\n        {{/if}}\n    </div>\n</div>\n');Xd._save=function(){var e=this.container.find("#junit-main-source").val(),t=this.container.find("#junit-test-source").val(),n=this.container.find("#junit-libraries").val(),i=this.container.find("#junit-version").val(),r=this.container.find("#junit-wd").val(),a=[];$d={};var s=this.container.find(".junit-case-info");return d().each(s,(function(e){var t=l()(e),n=t.find(".junit-case-path").text(),i=t.find(".junit-case-class").text(),r=t.find(".junit5-case").size()>0;$d[n]=!0,a.push({path:n,className:i,jUnit5Case:r})})),Yd.ZP.updateSettingsContent({mainSource:e,testSource:t,libraries:n,cases:a,wd:r,jUnitVersion:i})},Xd._addTestCase=function(e){if(!d().isEmpty(e)&&i.Z.currentProject.exists(e)){if(!$d[e]){var t=this,n="";i.Z.currentProject.file(e).then((function(t){return n=t.content,Do.Z.parseClassInformation(t.content,e)})).then((function(i){if(d().isEmpty(i.className))k.Z.error("Java class not found in "+e);else if(d().includes(n,"@Test")||d().includes(n,"@ParameterizedTest")||d().includes(n,"@org.junit.jupiter.api.Test")||d().includes(n,"@org.junit.jupiter.params.ParameterizedTest")||d().includes(n,"extends")){var r=d().includes(n,".jupiter.");if(r)!(d().endsWith(i.className,"Test")||d().endsWith(i.className,"Tests"))&&k.Z.info("".concat(i.className," class name do not match against class names ending in Test or Tests. This test may not function correctly."));var a=d().isEmpty(i.packageName)?i.className:i.packageName+"."+i.className;t._caseTemplate(e,a,r),t._save()}else k.Z.error("JUnit test not found in "+e)}))}}else k.Z.error("File not found: "+e)},Xd._caseTemplate=function(e,t,n){var i=l()(tp({casePath:e,className:t,showExecute:d().isEmpty(d().keys($d)),jUnit5Case:n}));$d[e]=!0;var r=this;this.container.find("#junit-test-cases").append(i),y.Z.on(i.find(".remove-btn"),"click",(function(e){e.preventDefault(),e.stopPropagation();var t=l()(this).parent().parent();R.Z.showConfirm({title:"Case remove confirmation",description:"Are you sure you want to remove this case?",onClose:function(e){e&&(t.remove(),r._save())}})}))},Xd._execute=function(){this._save().then((function(e){d().isEmpty(e.cases)?k.Z.error("No tests to execute"):Jd.execute()}))},Xd._bindEvents=function(){var e=this;y.Z.on(this.container.find("input"),"change",(function(){e._save()})),y.Z.on(this.container.find("#junit-version"),"change",(function(){e._save()})),y.Z.on(this.container.find("#junit-add-case-btn"),"click",(function(t){t.preventDefault(),t.stopPropagation();var n=e.container.find("#junit-add-case").val();e._addTestCase(n)})),y.Z.on(this.container.find("form"),"submit",(function(t){t.preventDefault(),t.stopPropagation(),e._execute()}))},Xd.open=function(){var e=this;return Yd.ZP.loadSettingsFromFile().then((function(t){$d={},e.container.empty().append(l()(ep(t))),d().each(t.cases,(function(t){e._caseTemplate(t.path,t.className,t.jUnit5Case||!1)})),e._bindEvents()}))},Xd.close=function(){},Xd.fileDrop=function(e){this._addTestCase(e)};const np=Qd;var ip=n(47753),rp=n.n(ip),ap=n(4629),sp=n(82678);var op=ap.ZP.NO_TESTS,cp=ap.ZP.NO_JAVA,lp=ap.ZP.COMPILE_ERROR,up="display-name: ",dp=y.Z.create(n(23112)),pp=function e(t){if(!(this instanceof e))return new e(t);this.container=t},fp=pp.prototype,hp=f().compile('<div class="junit-results">\n{{#equals status \'pending\'}}\n  <strong>Please wait, your test case files are being executed.</strong>\n{{/equals}}\n{{#equals status \'fulfilled\'}}\n  <h3>\n    Tests Summary\n    <button class="btn btn-primary" id="junit-execute-btn">Re-execute</button>\n  </h3>\n  <div class="junit-summary-info">\n    <table>\n      <tr>\n        <td><strong>{{tests}}</strong></td>\n        <td><strong>{{failures}}</strong></td>\n        <td><strong>{{time}}s</strong></td>\n      </tr>\n      <tr>\n        <td>tests</td>\n        <td>failures</td>\n        <td>duration</strong></td>\n      </tr>\n    </table>\n  </div>\n  {{#each cases}}\n    <div class="junit-result-block">\n      <p class="junit-result-classname">{{classname}}</p>\n      <table class="junit-result-table">\n        <thead>\n          <tr>\n            <th>Test</th>\n            <th>Duration</th>\n            <th>Result</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#each cases}}\n            <tr>\n              <td>{{name}}</td>\n              <td>{{time}}s</td>\n              <td class="junit-result-{{#if failure}}failed{{/if}}{{#unless failure}}passed{{/unless}}"\n                  {{#if failure}}title="{{failure.message}}"{{/if}}\n              >\n                {{#if failure}}failed<i class="ss-icon ss-navigatedown"></i>{{/if}}{{#unless failure}}passed{{/unless}}\n              </td>\n            </tr>\n          {{#if failure}}\n            <tr class="hide">\n              <td colspan="3" class="junit-test-error-description">\n                {{#if failure.message}}\n                  Message: <b>{{failure.message}}</b>\n                {{/if}}\n                <pre>{{failure.text}}</pre>\n              </td>\n            </tr>\n          {{/if}}\n          {{/each}}\n        </tbody>\n      </table>\n    </div>\n  {{/each}}\n{{/equals}}\n{{#equals status \'no_results\'}}\n  <strong>No active tests found</strong>\n{{/equals}}\n{{#equals status \'no_java\'}}\n  It looks like Java is not installed.<br/>\n  Either connect your project to the appropriate Codio certified stack or you can install Java from the Tools->\n  <a href="{{installSoftwareLink}}">Install software</a> menu.\n{{/equals}}\n{{#equals status \'error\'}}\n  <h3>\n    Tests Summary\n    <button class="btn btn-primary" id="junit-execute-btn">Re-execute</button>\n  </h3>\n  <strong>Compile or execution error:</strong>\n  <br/>\n  <pre>{{error}}</pre>\n{{/equals}}\n</div>\n');function mp(e){var t=e.failure||e.error,n=e._name;if(d().isString(e["system-out"])){var i=e["system-out"].split("\n"),r=d().find(i,(function(e){return d().startsWith(e,up)}));r&&(n=r.substring(up.length))}return{name:n,time:e._time,failure:!!t&&{message:t._message,text:t.__text||t.__cdata}}}function gp(e,t){y.Z.on(e.find(".junit-result-failed"),"click",(function(){var e=l()(this).parent().next();e.toggleClass("hide");var t=l()(this).find("i");e.hasClass("hide")?(t.removeClass("ss-navigateup"),t.addClass("ss-navigatedown")):(t.removeClass("ss-navigatedown"),t.addClass("ss-navigateup"))})),y.Z.on(e.find("#junit-execute-btn"),"click",(function(){dp.execute(),d().defer((function(){t.open()}))}))}fp.open=(0,r.Z)(o().mark((function e(){var t,n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){n.closed||(n.container.empty().append(l()(hp({status:"error",error:e}))),gp(n.container,n))},t=sp.default.getCurrentExecutions(),n=this,e.next=5,m.ZP.promise.getState(t);case 5:r=e.sent,this.container.empty().append(l()(hp({status:r}))),t.then((function(e){var t,r,s,o;if(!n.closed)if(e.code===op)n.container.empty().append(l()(hp({status:"no_results"})));else if(e.code===cp){var c="/"+i.Z.currentProject.path+"/install-software";n.container.empty().append(l()(hp({status:"no_java",installSoftwareLink:c})))}else if(e.code===lp)a(e.stdout);else{var u=(new(rp())).xml_str2json(e.stdout);u?(n.container.empty().append(l()(hp((t=u.testsuite,r=d().isArray(t.testcase)?t.testcase:[t.testcase],s=d().groupBy(r,(function(e){return e._classname})),o=d().map(s,(function(e,t){return{classname:t,cases:d().map(e,mp)}})),{status:"fulfilled",failures:(t._failures?d().toInteger(t._failures):0)+(t._errors?d().toInteger(t._errors):0),tests:t._tests,time:t._time,timestamp:t._timestamp,cases:o})))),gp(n.container,n)):a(e.stdout)}})).catch((function(e){a(e)}));case 8:case"end":return e.stop()}}),e,this)}))),fp.close=function(){this.closed=!0};const vp=pp;var bp,yp=f().compile('<section class="filters">\n<ul class="tabbed">\n    <li><a href="#tab-settings">JUnit Settings</a></li>\n    <li><a href="#tab-executions">JUnit Executions</a></li>\n</ul>\n</section>\n<div class="scrollable">\n    <section class="data"></section>\n</div>\n'),wp=function e(t){var n=this;if(!(this instanceof e))return new e(t);this.container=t;var i=l()(yp());this.container.append(i),y.Z.on(i,"click.junit",".tabbed a",this._handleTabClick.bind(this)),this._subId=y.Z.subscribe("junit:execute",(function(){d().defer((function(){return n._openTab("executions")}))})),sp.default.getStoredExecution()?this._openTab("executions"):this._openTab("settings")},_p=wp.prototype;_p._handleTabClick=function(e){e.preventDefault();var t=l()(e.target).attr("href");if(null!==t.match(/#tab-/)){var n=t.replace("#tab-","");this._openTab(n)}},_p._openTab=function(e){var t=this.container.find(".data"),n=this.container.find(".tabbed li"),i=n.find('a[href="#tab-'+e+'"]').parent();if(!i.hasClass("active")){n.removeClass("active"),i.addClass("active"),bp&&bp.close();var r=this;switch(e){case"settings":bp=new np(t),d().delay((function(){r.container.find("#junit-main-source").focus()}),100);break;case"executions":bp=new vp(t),d().delay((function(){r.container.find("#junit-execute-btn").focus()}),100);break;default:return}bp&&bp.open()}},_p.activate=function(){var e=function(){var e=new Error("Not allowed");return e.close=!0,Promise.reject(e)};if(i.Z.currentUser.isAnonymous())return e();var t=i.Z.currentProject.access.control;if("OWNER"!==t&&"ADMIN"!==t&&"WRITE_FILES"!==t)return e();this.render()},_p.deactivate=function(){},_p.close=function(){bp&&bp.close(),y.Z.unsubscribe(this._subId)},_p.render=function(){},_p.fileDrop=function(e,t,n){var i=n.path;return"file"===n.type&&bp.fileDrop&&bp.fileDrop(i),!0};const kp=wp;n(82678),y.Z.subscribe("command:junit:open",(function(){i.Z.ide.open("junit")})),i.Z.register({info:Gd,hotkeys:Vd,settings:Kd,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kp);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const Pp=JSON.parse('{"name":"userenv","description":"Environment Variables","codio":{"global":true,"noFile":true,"title":"Environment Variables","urls":"userenv"}}'),Zp='<tr class="codio-userenv-tr-item">\n  <td>\n    <button class="btn codio-userenv-remove-btn" title="Remove variable" aria-label="Remove variable">\n      <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n    </button>\n  </td>\n  <td><input type="text" maxlength="120" class="codio-userenv-input codio-userenv-key" value="{{key}}" /></td>\n  <td><input type="text" maxlength="2048" class="codio-userenv-input codio-userenv-value" value="{{value}}"/></td>\n</tr>\n';var xp=m.ZP.KeyCode,Cp=f().compile('<form action="/" method="post" class="form-horizontal codio-userenv-form" novalidate>\n  <h1 class="codio-userenv-title">Environment Variables</h1>\n  <fieldset>\n    <table class="codio-userenv-table">\n      <thead>\n        <tr>\n          <th scope="col" class="codio-userenv-th-remove"></th>\n          <th scope="col" class="codio-userenv-th-key">\n            Key\n          </th>\n          <th scope="col" class="codio-userenv-th-value">\n            Value\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n      <tr class="codio-userenv-empty hide"><td colspan="3">No environment variables</td></tr>\n      {{#each items}}\n        {{> userEnvItem this}}\n      {{/each}}\n      </tbody>\n    </table>\n  </fieldset>\n  <div class="codio-userenv-buttons">\n    <button class="btn btn-primary codio-userenv-save-btn" id="userenv_save">Save</button>\n    <button class="btn btn-inverse-gray codio-userenv-add-btn" id="userenv_add" type="button" aria-label="Add environment variable">Add Variable</button>\n  </div>\n</form>\n\n'),Sp=f().compile(Zp);ho.Z.registerPartial("userEnvItem",Zp);var Ep=function(){function e(t){(0,Zn.Z)(this,e),this.container=t}return(0,xn.Z)(e,[{key:"load",value:function(){var e=this;return this.cachedItems?Promise.resolve(this.cachedItems):(this.dataPromise||(this.dataPromise=b.ZP.ProjectManager.getEnvVariables()),this.dataPromise.then((function(t){return e.cachedItems=t,e.cachedItems})))}},{key:"activate",value:function(){var e=this,t=i.Z.currentProject.access.control;if(i.Z.currentUser.isAnonymous()||"OWNER"!==t){var n=new Error("Not allowed");return n.close=!0,Promise.reject(n)}this.initialized||(this.container.block(),this.load().then((function(t){e.initialized=!0,e.render(t)})).catch((function(t){k.Z.error(t.message),e.dataPromise=null,e.cachedItems=null})).finally((function(){return e.container.unblock()})))}},{key:"close",value:function(){y.Z.off(this.container,".user-env"),this.cachedItems=null,this.initialized=!1,this.container=null,this.dataPromise=null}},{key:"bindEvents",value:function(){var e=this;y.Z.on(this.container,"keydown.user-env",".codio-userenv-input",(function(e){(e.which||e.keyCode)===xp.RETURN&&(e.stopPropagation(),e.preventDefault())})),y.Z.on(this.container,"click.user-env",".codio-userenv-remove-btn",(function(t){t.preventDefault();var n=l()(t.currentTarget).closest("tr");e.cachedItems.splice(n.index()-1,1),n.remove(),e.updateNoItemsMessageVisibility()})),y.Z.on(this.container,"click.user-env","#userenv_add",(function(t){t.preventDefault();var n={key:"",value:""};e.cachedItems.push(n),e.container.find(".codio-userenv-table > tbody").append(l()(Sp(n))),e.updateNoItemsMessageVisibility()})),y.Z.on(this.container,"click.user-env","#userenv_save",(function(t){t.preventDefault();var n=e.collectItems();null!==n&&b.ZP.ProjectManager.setEnvVariables(n).then((function(){return k.Z.success("Environment variables has been updated. It will be applied after box restart.")})).catch((function(e){return k.Z.error(e.message)}))}))}},{key:"updateNoItemsMessageVisibility",value:function(){var e=this.container.find(".codio-userenv-empty");this.cachedItems.length?e.addClass("hide"):e.removeClass("hide")}},{key:"collectItems",value:function(){var e=this.container.find(".codio-userenv-table > tbody > .codio-userenv-tr-item");return this.variablesIsValid(e)?l().map(e,(function(e){var t=l()(e);return{key:t.find(".codio-userenv-key").val(),value:t.find(".codio-userenv-value").val()}})):null}},{key:"variablesIsValid",value:function(e){var t=!0;return l().each(e,(function(e,n){var i=l()(n).find(".codio-userenv-key"),r=i.val().trim(),a=[];/^[0-9]+/.test(r)&&a.push("Key cannot start with a number."),/^[A-Z0-9_]+$/.test(r)||a.push("Key must contain only characters: _, A-Z, 0-9."),a.length>0&&(m.ZP.addErrorToInput(i,{title:a.join("<br/>"),append:!0}),t=!1)})),t}},{key:"render",value:function(e){y.Z.off(this.container,".user-env");var t=l()(Cp({items:e}));this.container.empty().append(t),this.updateNoItemsMessageVisibility(),this.bindEvents()}}]),e}();const Ip=Ep;y.Z.subscribe("command:userenv:open",(function(){i.Z.ide.open("userenv")})),i.Z.register({info:Pp,hotkeys:{},settings:{},get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ip);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const Tp=JSON.parse('{"name":"virtual-machines","description":"Virtual machines VNC connection","codio":{"global":true,"noFile":true,"title":"VM","urls":["virtual-machines","virtual-machines-ssh"]}}');function jp(){return!!Ap()}function Ap(){var e,t=i.Z.currentProject;if(!t.writableCopy)return t.authorAssignment&&t.authorAssignment.course&&t.authorAssignment.course.details?e=t.authorAssignment.course.details:t.eduStartedAssignmentInfo&&t.eduStartedAssignmentInfo.course&&t.eduStartedAssignmentInfo.course.details&&(e=t.eduStartedAssignmentInfo.course.details),e&&e.computedVmOptions&&e.computedVmOptions.enabled?e.computedVmOptions:void 0}var Op=function(){function e(t,n,i){(0,Zn.Z)(this,e),this.iframe=function(e){var t=l()("<iframe>");if(e&&e.length){var n=d().map(e,(function(e){var t=e.name,n=e.allowlist;return"".concat(t," ").concat(n)})).join("; ");t.attr("allow",n)}return t}(t),this.elToAttach=i?l()('<div class="codio-external-iframe-div"/>').append(this.iframe):this.iframe,n.append(this.elToAttach)}return(0,xn.Z)(e,[{key:"css",value:function(e){this.elToAttach.css(e)}},{key:"focus",value:function(){this.elToAttach&&this.elToAttach.focus()}},{key:"addClass",value:function(e){this.elToAttach.addClass(e)}},{key:"removeClass",value:function(e){this.elToAttach.removeClass(e)}},{key:"get",value:function(){return this.elToAttach}},{key:"src",value:function(e,t){var n=this;t&&this.iframe.on("load.iframeEl",(function(){n.iframe.off("load.iframeEl"),t()})),this.iframe.attr("src",e)}},{key:"load",value:function(e){this.iframe.load(e)}},{key:"destroy",value:function(){this.elToAttach.remove()}}]),e}(),Dp=function(){function e(t,n,i,r,a){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];(0,Zn.Z)(this,e),this.iframeContainer=t,this.containerToExpand=n,this.policy=i,this.bodyContainerId=r,this.extName=a,this.createWithDivContainer=s,this.iframeEl=new Op(this.policy,this.getBodyContainer(),this.createWithDivContainer),this.hide(),this.eventHandlers=[],this.bindEvents()}var t;return(0,xn.Z)(e,[{key:"getBodyContainer",value:function(){var e=l()("#".concat(this.bodyContainerId));return 0===e.length&&(e=l()('<div id="'.concat(this.bodyContainerId,"\" class='codio-external-iframes'></div>")).appendTo("body")),e}},{key:"bindEvents",value:function(){var e=this,t=d().bind(this.eventHandlers.push,this.eventHandlers),n=d().debounce((function(){return e.adjust()}),200);t(y.Z.subscribe("tab:activated:".concat(this.extName),(function(t,i){i.template&&i.template.find(e.iframeContainer)&&n()}))),t(y.Z.subscribe("panel:size:change",n)),t(y.Z.subscribe("command:layout:save",n)),t(y.Z.subscribe("debug:panel_switched",n)),t(y.Z.subscribe("call:panelSwitched",n)),t(y.Z.subscribe("ide:fullscreen:#mode",this.onFullscreen.bind(this)))}},{key:"adjust",value:function(){var e=this;d().defer((function(){return e.refresh()}))}},{key:"onFullscreen",value:function(e,t){"enter"===e.mode?t.container.find(this.iframeContainer).length||this.iframeContainer.hide():this.iframeContainer.show(),this.adjust()}},{key:"adjustSizeAndPosition",value:function(){var e=this.containerToExpand[0].getBoundingClientRect(),t={top:e.top,left:e.left,width:e.right-e.left,height:e.bottom-e.top};this.iframeEl.css(t)}},{key:"src",value:function(e,t){var n=this,i=m.ZP.promise.deferred(),r=function(){n.refresh(),i.resolve()};if(!t)return this.iframeEl.src(e,r),i.promise;var a=(this.iframeEl.get().attr("class")||"").split(/\s+/);return this.iframeEl.destroy(),this.iframeEl=new Op(this.policy,this.getBodyContainer(),this.createWithDivContainer),d().each(a,(function(e){return n.addClass(e)})),this.iframeEl.src(e,r),this.refresh(),i.promise}},{key:"hide",value:function(){this.removeClass("show")}},{key:"show",value:function(){this.addClass("show")}},{key:"focus",value:function(){this.iframeEl.focus()}},{key:"addClass",value:function(e){this.iframeEl.addClass(e)}},{key:"removeClass",value:function(e){this.iframeEl.removeClass(e)}},{key:"refresh",value:(t=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.iframeContainer){e.next=2;break}return e.abrupt("return");case 2:this.iframeContainer.is(":visible")?(this.adjustSizeAndPosition(),this.show()):this.hide();case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getIframeEl",value:function(){return this.iframeEl}},{key:"clean",value:function(){y.Z.unsubscribe(this.eventHandlers),this.eventHandlers=[],this.iframeEl.destroy(),this.iframeContainer=null,this.containerToExpand=null}}]),e}();const Np=Dp;var Mp,Fp,Rp,Lp=n(37371),Up=n(96577),Bp=Qi.Z.get("zeusUri"),qp=(Mp=Lp._F,Fp=window.__GRPCWEB_DEVTOOLS__||function(){},Rp=Mp(Bp),Fp([Rp]),Rp),Hp=function(){var e=(0,Gt.p)();return{authorization:"Bearer ".concat(e)}};function Wp(e,t,n){var i=new Up.StartRequest;i.setAssignmentId(e),i.setOwnerId(t);var r=new Up.StartRequest.StartOptions;return r.setToken((0,Gt.p)()),n&&r.setSshKey(n),i.setOptions(r),new Promise((function(e,t){qp.start(i,Hp(),(function(n,i){n?t(new Error(n.message)):e(i)}))}))}function zp(e,t){var n=new Up.FetchConnectionOptionsRequest;return n.setAssignmentId(e),n.setOwnerId(t),new Promise((function(e,t){qp.fetchConnectionOptions(n,Hp(),(function(n,i){n?t(new Error(n.message)):e(i)}))}))}function Gp(e){var t=new Up.FetchTaskStatusRequest;t.setTaskId(e);var n=null;return new Promise((function(i,r){function a(){qp.fetchTaskStatus(t,Hp(),(function(t,s){t?r(new Error(t.message)):s.getStatus()===Up.FetchTaskStatusResponse.TaskStatus.IN_PROGRESS?n=setTimeout((function(){return a()}),4e4):(null!=n&&(clearTimeout(n),n=null),h.Z.unsubscribe("tasks/".concat(e)),s.getStatus()===Up.FetchTaskStatusResponse.TaskStatus.ERROR?r(new Error(s.getDescription())):i(s))}))}a(),h.Z.subscribe("tasks/".concat(e),(function(e){e&&a()}))}))}var Vp=n(70580),Kp=n(67511),Yp={},Jp={};function Qp(){var e=Xp();d().isEqual(e,Yp)||(Yp=e,y.Z.trigger(Jp,"settings-changed",e))}var Xp=function(){return v.Z.get("terminal")};y.Z.subscribe("settings:changed",Qp),y.Z.subscribe("settings:loaded",Qp);const $p=Jp;var ef=n(72375);const tf=JSON.parse('["ide:layout_default","ide:layout_simple","ide:layout_2_columns","ide:layout_2_rows","ide:layout_showcase","ide:panel_split_horizontal","ide:panel_split_vertical","ide:panel:join","ide:panel_close","ide:tab_close","ide:tab_close_all","ide:tab_close_others","ide:tab_close_left","ide:tab_close_right","ide:tab_switch_left","ide:tab_switch_right","ide:key_quick_open","ide:key_quick_run","ide:panel_switch_right","ide:panel_switch_left","ide:panel_switch_up","ide:panel_switch_down","ide:key_menu_focus"]');var nf=f().compile('<div class="ssh-terminal-loading">Connecting...</div>\n<div class="ssh-terminal-message"></div>\n<div class="ssh-terminal-message-writable"></div>\n<div class="ssh-terminal-holder">\n</div>\n'),rf=f().compile('<div id="ssh-reconnect-prompt">\n    <h4>Your connection to "{{username}}@{{host}}{{#if port}}:{{port}}{{/if}}" closed, want to reconnect?</h4>\n\n    <button class="btn re-connect" tabindex="0" data-pos="0" title="Re-connect" aria-label="Re-connect">RE-Connect</button>\n    <button class="btn close-connection btn-primary" tabindex="0" data-pos="1" title="Close tab" aria-label="Close tab">Close Tab</button>\n</div>\n'),af=f().compile('<div id="ssh-offline-prompt">\n    <h4>Your connection to your Box has been lost. You will automatically be reconnected when the connection is recovered.</h4>\n</div>\n'),sf=f().compile('<div id="writable-prompt">\n    <button class="btn writable-btn" tabindex="0" data-pos="0" title="Writable Copy" aria-label="Writable Copy">Writable Copy</button>\n    <strong>\n        File system is read-only. To run code or make changes, make a writable copy.\n        To ensure the student\'s submission remains the same,\n        any changes you make will be deleted when you close the writable copy tab.\n    </strong>\n</div>\n'),of=0,cf=[],lf=function(e,t,n,i){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.credentials=t,this.container=e.html(nf()),this.connecting=!0,this.subscriptions=[],this.canReconnect=r,this.header=e.find(".ssh-terminal-message"),this.writablePlacer=e.find(".ssh-terminal-message-writable"),this.send=i,this.holder=this.container.find(".ssh-terminal-holder"),this.id=function(){if(cf.length>0)return cf.shift();return of++}(),this.holder.data("id",this.id),this.active=!0,this.inputStorage=[],this.activeAndAlreadyFocused=!1,this._execTasks=[],this._execDebounced=d().debounce(this.runExec.bind(this),100,{maxWait:3e4}),this._resizeDebounced=d().debounce(this.resize.bind(this),100,{maxWait:1e3}),this.welcomeTextDoneCallback=d().debounce(this._welcomeTextDoneCallback.bind(this),200,{maxWait:3e3}),this.initialized=!1;var a=v.Z.descriptions().terminal.theme.values,s=v.Z.get("terminal").theme;s=d().includes(a,s)?s:"dark",this.holder.addClass("codio-terminal-"+s);var o=this.fitAddon=new Tc.FitAddon,c=this.term=new Ic.Terminal(this.getConfiguration());c.loadAddon(o),c.loadAddon(new Kp.WebLinksAddon),this.initialize(),this.container.find(".xterm-helper-textarea").data("allowed-hotkeys",tf.join(",")),this.bindEvents(),!n&&this.focus()};lf.prototype.initialize=function(){!this.initialized&&this.term&&this.holder.is(":visible")&&(this.term.open(this.holder[0]),this.resize(),this.initialized=!0),this.forceRefresh()},lf.prototype.forceRefresh=function(){if(this.term){var e=this.term._core;e._charSizeService&&e._charSizeService.measure(),this.resize()}},lf.prototype.getTheme=function(){var e=v.Z.get("terminal"),t=v.Z.descriptions().terminal.theme.values;return"dark"===(d().includes(t,e.theme)?e.theme:"dark")?{background:"black",foreground:"white",selectionForeground:"#B2CEF0",selectionBackground:"#001C3E"}:{background:"white",foreground:"black",cursor:"black",selectionForeground:"#001C3E",selectionBackground:"#B2CEF0"}};var uf=function(e){return Math.min(100,Math.max(8,e))};lf.prototype.getConfiguration=function(){var e=v.Z.get("terminal"),t=e.font_size||14;return{screenKeys:!0,cursorBlink:!1,scrollback:e.scrollback||3e3,fontSize:uf(t),fontFamily:'"Source Code Pro", Monaco, Menlo, Consolas, "Courier New", monospace',theme:this.getTheme(),screenReaderMode:!0}},lf.prototype._welcomeTextDoneCallback=function(){d().isEmpty(this._execTasks)||this._execDebounced(),this.resize(),this.welcomeTextDoneCallback=void 0},lf.prototype.onDataSend=function(e){this.send("data",{input:e,cols:this.term.cols,rows:this.term.rows})},lf.prototype.bindEvents=function(){var e=this,t=this.term,n=this;t.onTitleChange(this.loaded.bind(this)),t.onData((function(t){return e.onDataSend(t)})),t.onKey((function(e){e.domEvent.preventDefault()})),this.__settingsChangedCallback=function(e,i,r){e.holder.removeClass((function(e,t){return(t.match(/(^|\s)codio-terminal-\S+/g)||[]).join(" ")}));var a=v.Z.descriptions().terminal.theme.values,s=r.theme;s=d().includes(a,s)?s:"dark",e.holder.addClass("codio-terminal-"+s),t.options.theme=n.getTheme(),t.options.scrollback=r.scrollback||3e3;var o=r.font_size||14;t.options.fontSize=uf(o),e.resize()}.bind(null,this),this.subscriptions.push(y.Z.on($p,"settings-changed",this.__settingsChangedCallback)),t.attachCustomKeyEventHandler((function(e){return!1!==n.hasFocus&&function(e,t){if(function(e,t){var n=e.term,i=n._core.isMac,r=n.getSelection(),a=i&&t.metaKey||!i&&t.ctrlKey,s=a&&67===t.keyCode,o=a&&86===t.keyCode;return r&&s||o}(e,t))return!1;var n=function(e){var t={charCode:e.charCode,altKey:e.altKey,code:e.code,ctrlKey:e.ctrlKey,key:e.key,keyCode:e.keyCode,metaKey:e.metaKey,shiftKey:e.shiftKey,target:e.target,srcElement:e.srcElement,which:e.which};return l().Event(e.type,t)}(t);if(y.Z.trigger(document,n),n.isPropagationStopped()||n.isDefaultPrevented())return t.stopPropagation(),t.preventDefault(),!1;return!0}(n,e)})),this.resizeLID=y.Z.on(window,"resize.panels",(function(){return e._resizeDebounced()})),this.subscriptions.push(y.Z.subscribe("education:writableCopyMenuVisibility",this._writableCopyCallback.bind(this)))},lf.prototype.activate=function(){var e=this;d().defer((function(){return e.initialize()}));var t=this;this.active=!0,d().each(this.inputStorage,(function(e){t.term.write(e)})),this.inputStorage=[],this.activeAndAlreadyFocused=this.active&&this.hasFocus,this._writableCopyCallback(void 0,{state:ef.Z.showWritableCopyButton()})},lf.prototype.deactivate=function(){this.active=!1,this.activeAndAlreadyFocused=!1},lf.prototype.destroy=function(){this.cleanup(),this.container.empty(),this.send("kill"),this.resizeLID&&(y.Z.unsubscribe(this.resizeLID),this.resizeLID=null)},lf.prototype.cleanup=function(){cf.push(this.id),this._execDebounced&&this._execDebounced.cancel(),this.term.dispose(),d().each(this.subscriptions,(function(e){y.Z.unsubscribe(e)}))},lf.prototype.reConnectPrompt=function(){this.container.find(".ssh-terminal-loading").hide(),this.header.html(rf(this.credentials))},lf.prototype.offlinePrompt=function(e){this.container.find(".ssh-terminal-loading").hide(),e?this.canReconnect&&this.header.html(af()):this.header.empty()},lf.prototype._writableCopyCallback=function(e,t){var n=t.state,r=i.Z.currentProject;n&&r.isReadOnly?(this.writablePlacer.html(sf({})),this.writablePlacer.find(".writable-btn").click((function(){v.Z.hotkey.execute("education","writable")}))):this.writablePlacer.empty()},lf.prototype.focus=function(){var e=this;e.term&&e.term.focus(),e.hasFocus=!0,this.activeAndAlreadyFocused=this.active},lf.prototype.blur=function(){this.hasFocus=!1;this.activeAndAlreadyFocused=!this.active,this.term&&this.term.blur()},lf.prototype.write=function(e){this.loaded(),this.active?this.term.write(e):this.inputStorage.push(e)},lf.prototype.exec=function(e){this._execTasks.push(e),this._execDebounced()},lf.prototype.runExec=function(){var e=this;if(this.connecting||this.term&&!this.term.textarea)return this._execDebounced();if(!d().isEmpty(this._execTasks)){var t=this._execTasks;this._execTasks=[];var n=d().last(t),i=d().isObject(n)&&n.noFocus;d().each(t,(function(t){t=d().isObject(t)?t.cmd:t,e.onDataSend("".concat(t,"\r"))})),!i&&this.focus()}},lf.prototype.loaded=function(){this.connecting&&(this.container.find(".ssh-terminal-loading").hide(),this.resize(),this.connecting=!1)},lf.prototype.resize=function(){var e=this.term;if(e&&this.holder.is(":visible")&&0!==this.holder.has(".xterm").length){try{var t;null!==(t=e._core)&&void 0!==t&&null!==(t=t._renderService)&&void 0!==t&&t.dimensions&&this.fitAddon.fit()}catch(e){}this.send("resize",{cols:e.cols,rows:e.rows})}};const df=lf;var pf=Qi.Z.get("sshServer"),ff=f().compile('<div id="ssh-reconnect-prompt">\n    <h4>{{error}}</h4>\n\n</div>\n'),hf=y.Z.create(n(89404)),mf=/Connection to (?:[0-9]{1,3}\.){3}[0-9]{1,3} closed by remote host/g,gf=function(){return this.connections={},this.unclaimed={},this.connected={},this.pending=[],this.status=ol().CLOSED,this.primus=null,this.canReconnect=!1,this.wasInterruped=!1,this.isExiting=!1,this};function vf(e,t,n){var i=e.unclaimed[n];return i.def.reject(new Error(t)),delete e.unclaimed[n],i.el.html(ff({error:t})),i.def.promise}gf.prototype.getInstance=function(){var e=(0,r.Z)(o().mark((function e(t,n,i,r){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.connections[this.connected[i]]){e.next=3;break}return e.abrupt("return",this.spawn(t,n,i,r));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,i,r){return e.apply(this,arguments)}}(),gf.prototype.onConnect=function(){var e=this;this.wasInterruped||!this.canReconnect?(d().each(this.connections,(function(t,n){e.spawn(t.container,t.credentials,n)})),d().invokeMap(this.connections,"destroy")):d().each(this.connections,(function(t,n){e.reconnect(n)})),this.wasInterruped=!1,this.canReconnect=!1,this.connections={},d().each(this.pending,(function(t){e.send("spawn",t)})),this.pending=[]},gf.prototype.connect=function(){if(!this.primus){var e="WebSocket"in window,t=this.primus=new(ol())(pf,{reconnect:{retries:1/0,maxDelay:5e3},strategy:["online","timeout","disconnect"],websockets:e,pingTimeout:25e3,transport:{transports:["websocket"]}});this.status=t.readyState;var n=this,i=null;t.on("readyStateChange",(function(){n.status=t.readyState,n.status===ol().CLOSED&&(i=(new Date).getTime(),n.makeOffline()),n.status===ol().OPEN&&i&&(n.canReconnect=(new Date).getTime()-i<6e4)})),t.on("open",this.onConnect.bind(this)),t.on("data",this.listen.bind(this)),t.on("error",(function(){}))}},gf.prototype.makeOffline=function(){var e=this;d().each(this.connections,(function(t){t.offlinePrompt(!0),e.reconnect()}))},gf.prototype.reconnect=function(e){this.unclaimed[e]=this.connections[e],this.send("reconnect",{},e)},gf.prototype.onReconnect=function(e){this.connections[e]=this.unclaimed[e],delete this.unclaimed[e],this.connections[e].offlinePrompt(!1)},gf.prototype.spawn=function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=this.unclaimed[n]={el:e,def:m.ZP.promise.deferred(),credentials:t,noFocusOnInit:r,canReconnect:a},o=d().merge({},t,{clientId:n});return o.sessionId=(0,Gt.p)(),o.userName=i.Z.currentUser.name(),this.status!==ol().OPEN?(this.pending.push(o),this.connect()):this.send("spawn",o),s.def.promise},gf.prototype.onSpawn=function(e,t){if(t.clientId&&this.unclaimed[t.clientId]){var n=this.unclaimed[t.clientId];this.connected[t.clientId]=e,this.connections[e]=new df(n.el,n.credentials,n.noFocusOnInit,function(t,n){return this.send(t,n,e)}.bind(this),n.canReconnect),n.def.resolve(this.connections[e]),delete this.unclaimed[t.clientId]}},gf.prototype.listen=function(){var e=(0,r.Z)(o().mark((function e(t){var n,i,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},e.prev=1,n=JSON.parse(t),e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(1),e.abrupt("return");case 8:if("spawned"!==n.event){e.next=10;break}return e.abrupt("return",this.onSpawn(n.uuid,n.data));case 10:if("reconnected"!==n.event){e.next=12;break}return e.abrupt("return",this.onReconnect(n.uuid,n.data));case 12:if("pty-error"!==n.event){e.next=18;break}if(!n.data||!n.data.err||"reconnect - connection not found"!==n.data.err){e.next=17;break}if(i=this.unclaimed[n.data.clientId],!d().isObject(i)){e.next=17;break}return e.abrupt("return",this.spawn(i.container,i.credentials).catch((function(){})));case 17:vf(this,n.data.err,n.data.clientId).catch((function(){}));case 18:if(!(r=this.connections[n.uuid])){e.next=29;break}if("data"!==n.event){e.next=27;break}if(!mf.test(n.data.input)){e.next=24;break}return e.abrupt("return");case 24:r.write(n.data.input,n.data),d().includes(n.data.input,"logout\r\n")&&(this.isExiting=!0),r.welcomeTextDoneCallback&&r.welcomeTextDoneCallback();case 27:"interrupted"===n.event&&(this.wasInterruped=!0),"pty-closed"!==n.event&&"pty-error"!==n.event||(this.isExiting?(this.isExiting=!1,hf.closeTerminal({container:r.container})):r.reConnectPrompt(),r.cleanup());case 29:case"end":return e.stop()}}),e,this,[[1,5]])})));return function(t){return e.apply(this,arguments)}}(),gf.prototype.send=function(e,t,n){n&&"kill"===e&&delete this.connections[n],this.primus.write(JSON.stringify({event:e,uuid:n,data:t}))};const bf=new gf;var yf=b.ZP.SSHManager,wf={openCliTab:function(e){var t=e.username+"@"+e.host;t+=e.port?":"+e.port:"";var n=e.name||t;i.Z.ide.open("terminal",n+"-"+(new Date).getTime(),"ssh "+n,t)},validateServer:function(e){var t=!0,n={};return d().each(e,(function(e,i){if("port"!==i&&"uid"!==i&&"name"!==i)return"username"!==i||/^[a-z0-9_][\.a-z0-9_\-]*[$]?$/.test(e)?void(l().trim(e)||(n[i]=!0,t=!1)):(t=!1,void(n[i]="Not a valid user name"))})),{success:t,errors:n}},saveServer:function(e,t){return yf.saveServer(e,t).then((function(n){var i=t.name||t.username+"@"+t.host,r=["Target",'"'+m.ZP.safeHtml(i)+'"',e?"created.":"updated."].join(" ");k.Z.success(r),y.Z.publish("ssh.connection.manager:server-updated",n)})).catch((function(e){return k.Z.error(["Unable to create/update your target at this time. (<code>",m.ZP.safeHtml(e),"</code>). Please try again."].join(""))}))}};const _f=wf;var kf=f().compile('<form action="#" id="ssh-connection-form" class="form-horizontal" novalidate>\n\n    <h3 class="page-header">\n\t    {{#if server.uid}}Edit Server Details{{else}}Creating a New Server{{/if}}\n    </h3>\n\n    <fieldset id="deployment-target-common-inputs">\n        <input type="hidden" name="uid" value="{{server.uid}}" data-required="true">\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="input-f-name">\n                Friendly name: <i class="ss-icon">help</i>\n                <span class="hint-text">A friendly name or alias.</span>\n            </label>\n            <div class="controls">\n                <input type="text" id="input-f-name" autofocus required data-required="true" placeholder="optional connection name..." name="name" value="{{server.name}}">\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="ssh-username-input">\n                Username: <i class="ss-icon">help</i>\n                <span class="hint-text">The username to connect as.</span>\n            </label>\n            <div class="controls">\n                <input id="ssh-username-input" type="text" name="username" class="input-xlarge" value="{{server.username}}" placeholder="Username" maxlength="80" required data-required="true" data-error="Username is required">\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="ssh-server-input">\n                Hostname: <i class="ss-icon">help</i>\n                <span class="hint-text">Server name or IP address of your server</span>\n            </label>\n            <div class="controls">\n                <input id="ssh-server-input" type="text" name="host" class="input-xlarge" value="{{server.host}}" placeholder="Server" maxlength="80" required data-required="true" data-error="Server name is required">\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="ssh-port-input">\n                Port <small>(optional)</small>: <i class="ss-icon">help</i>\n                <span class="hint-text">The port number of your server. Leave blank to use the default</span>\n            </label>\n            <div class="controls">\n                <input id="ssh-port-input" type="text" name="port" class="input-small" value="{{server.port}}" placeholder="port number..." maxlength="80"  data-error="Port should be numeric">\n            </div>\n        </div>\n    </fieldset>\n\n    <div class="form-actions">\n        <button type="submit" class="save btn btn-primary">Save Details</button>\n        <button type="reset" class="btn">Cancel</button>\n    </div>\n\n</form>\n'),Pf=function e(t,n){return this instanceof e?(this.tpl=n||kf,this.container=t,this.bindEvents(),{hide:d().bind(this.close,this),show:d().bind(this.render,this)}):new e(t)};Pf.prototype.bindEvents=function(){y.Z.on(this.container,"submit","form",d().bind(this.save,this)),y.Z.on(this.container,"click","button[type=reset]",d().bind(this.close,this))},Pf.prototype.render=function(e){this.container.html(this.tpl({server:e})).show(),this.container.find("input[name=name]").focus()},Pf.prototype.close=function(){return y.Z.publish("ssh.connection.manager:form-closed"),this.container.hide()},Pf.prototype.disable=function(){this.container.find(".save").disableButton("Saving...","loading"),this.container.find(":input").prop("disabled",!0)},Pf.prototype.enable=function(){this.container.find(".save").enableButton(),this.container.find(":input").prop("disabled",!1)},Pf.prototype.values=function(){var e=this.container.find(":input"),t={name:l().trim(e.filter('[name="name"]').val()),username:l().trim(e.filter('[name="username"]').val()),host:l().trim(e.filter('[name="host"]').val()),port:Math.abs(parseInt(e.filter('[name="port"]').val(),10)),uid:l().trim(e.filter('[name="uid"]').val())};return isNaN(t.port)&&delete t.port,t},Pf.prototype.validate=function(){var e=_f.validateServer(this.values()),t=this;return d().each(e.errors,(function(e,n){var i=t.container.find('[name="'+n+'"]'),r=d().isString(e)?e:i.data().error;m.ZP.addErrorToInput(i,r),i.focus()})),e.success},Pf.prototype.save=function(e){if(e.preventDefault(),e.stopPropagation(),this.validate()){this.disable();var t=this.values(),n=!t.uid;return n&&delete t.uid,_f.saveServer(n,t).then(d().bind((function(){this.close()}),this)).finally(d().bind((function(){this.enable()}),this))}};const Zf=Pf;var xf=n(76638),Cf={},Sf=d().partial(xf.Z.request,"AccountSshManager");Cf.uploadKeyToRemote=function(e,t,n,i){return Sf("uploadKeyToRemote",{remote:{host:e,username:t,password:n,port:i}})};const Ef=Cf;var If=f().compile('<form action="/" class="form-horizontal" method="post" id="remote-ssh-dialog">\n\n    <p>Complete this form with the credentials for your remote server, and we will upload your Codio Public key to that server. This will then allow you to make secure connections between Codio and your server(s).</p>\n\n    <div class="control-group">\n        <label class="control-label" for="remote-ssh-host">Host:</label>\n        <div class="controls">\n            <input id="remote-ssh-host" type="text" name="host" class="window-prompt-input input-large" placeholder="Host..." autofocus value="{{server.host}}" />\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label" for="remote-ssh-username">Username:</label>\n        <div class="controls">\n            <input id="remote-ssh-username" type="text" name="username" class="input-large" placeholder="Username..." value="{{server.username}}">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label" for="remote-ssh-password">Password:</label>\n        <div class="controls">\n            <input id="remote-ssh-password" type="password" name="password" placeholder="Password..." class="input-large">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label" for="remote-ssh-port">Port:</label>\n        <div class="controls">\n            <input id="remote-ssh-port" type="text" name="port" class="input-large" placeholder="Port..." value="{{server.port}}">\n        </div>\n    </div>\n\n</form>'),Tf=f().compile('<div>\n    <p>Complete this form with the credentials for your remote server, and we will upload your Codio Public key to that server. This will then allow you to make secure connections between Codio and your server(s).</p>\n\n    <fieldset>\n        <label>Server</label>\n        <input id="remote-ssh-username" type="text" name="username" class="input-large" placeholder="Username" value="{{server.username}}">\n        <label class="text">@</label>\n        <input id="remote-ssh-host" type="text" name="host" class="window-prompt-input input-large" placeholder="Host" autofocus value="{{server.host}}" />\n        <label class="text">:</label>\n        <input id="remote-ssh-port" type="text" name="port" class="input-large" placeholder="Port" value="{{server.port}}">\n    </fieldset>\n\n    <fieldset>\n        <label>Password</label>\n        <input id="remote-ssh-password" type="password" name="password" placeholder="Password..." class="input-large">\n    </fieldset>\n\n</div>'),jf=null;function Af(){jf&&jf.close()}function Of(e,t){if(jf||t){var n=function(e){var t=e.find("#remote-ssh-host"),n=e.find("#remote-ssh-username"),i=e.find("#remote-ssh-password"),r=e.find("#remote-ssh-port"),a=t.val().trim(),s=n.val().trim(),o=i.val(),c=r.val().trim(),l=!1;return 0===a.length?(m.ZP.addErrorToInput(t,{title:"Host should not be empty",append:!0}),l=!0):/[^\w\d\.-]/.test(a)?(m.ZP.addErrorToInput(t,{title:"Host contains invalid characters",append:!0}),l=!0):0===s.length?(m.ZP.addErrorToInput(n,{title:"Username should not be empty",append:!0}),l=!0):/^[a-z0-9_][\.a-z0-9_\-]*[$]?$/.test(s)?0===o.length?(m.ZP.addErrorToInput(i,"Password should not be empty"),l=!0):c.length>0&&!/^\d+$/.test(c)&&(m.ZP.addErrorToInput(r,"Port should contain digits only"),l=!0):(m.ZP.addErrorToInput(n,{title:"Not valid username",append:!0}),l=!0),0===c.length&&(c=void 0),{error:l,fields:{host:a,name:s,password:o,port:c}}}(t||jf.dialogContent);if(!n.error){var i=n.fields;jf&&(jf.buttons()[0].element.disableButton("Uploading...","loading"),jf.dialogContent.find(":input").prop("disabled",!0).addClass("disabled")),Ef.uploadKeyToRemote(i.host,i.name,i.password,i.port).then((function(){k.Z.info("Public Key Uploaded Successfully"),Df(),Af(),e()})).catch((function(e){Df(),k.Z.error("Upload Public Key: "+m.ZP.safeHtml(e))}))}}}function Df(){jf&&(jf.buttons()[0].element.enableButton(),jf.dialogContent.find(":input").prop("disabled",!1).removeClass("disabled"))}const Nf={open:function(e,t){return jf&&jf.close(),new Promise((function(n,i){var r=new Error("Upload public key canceled");jf=new R.Z({title:"Upload Public Key",doNotCloseOpened:t,icon:"key",onClose:function(){jf=null},onHide:function(){i(r)},buttons:[{title:"Upload",onClick:function(){Of(n)}},{title:"Close",type:1,onClick:function(){Af(),i(r)}}],content:If({server:e||{}})}),y.Z.on(jf.content().find("form"),"keyup","input",(function(e){if(13===e.which)return Of(n)}))}))},form:function(e){return l()(Tf({server:e||{}}))},upload:Of};var Mf=b.ZP.SSHManager,Ff=f().compile('<div id="ssh-connections-editor">\n\n\t<h2>\n\t\tSSH Connection Manager\n\t\t<button id="ssh-create-button" class="btn btn-primary" autofocus>Create New</button>\n\t</h2>\n\n  <p>Codio makes its easy for you to connect and work with your remote servers, by providing a full-featured SSH command line interface (CLI) right within your project. Create and save a connection, then connect to that server via SSH at any time. Perfect for working with your development server while you edit code.</p>\n\n\t<hr>\n\n    <div class="loader">Loading, please wait...</div>\n\n\t<div class="form-holder"></div>\n\n\t<div id="ssh-connections-list"></div>\n</div>\n'),Rf=f().compile('<div class="connection">\n    <h4>{{#if name}}{{name}}{{else}}{{username}}@{{host}}{{#if port}}:{{port}}{{/if}}{{/if}}</h4>\n\n    <div class="btn-toolbar">\n        <div class="btn-group">\n            <button class="btn" data-action="connect" title="connect" aria-label="connect">\n                <span class="iconify-inline" data-icon="@codio:mdi:connection"></span>\n            </button>\n            <button class="btn" data-action="copy-key" title="Upload key to server" aria-label="Upload key to server">\n                <span class="iconify-inline" data-icon="@codio:mdi:cloud-upload"></span>\n            </button>\n            <button class="btn" data-action="edit" title="Edit" aria-label="Edit">\n                <span class="iconify-inline" data-icon="@codio:mdi:pencil-outline"></span>\n            </button>\n            <button class="btn" data-action="remove" title="Remove" aria-label="Remove">\n                <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n            </button>\n        </div>\n    </div>\n    {{#if name}}\n    <div>\n        {{username}}@{{host}}{{#if port}}:{{port}}{{/if}}\n    </div>\n    {{/if}}\n</div>\n'),Lf=function(e){this.container=e.html(Ff()),this.subscriptions=[],this.connections=[],this.form=new Zf(this.container.find(".form-holder")),this.list=this.container.find("#ssh-connections-list"),this.bindEvents(),this.fetch()},Uf=Lf.prototype;Uf.bindEvents=function(){y.Z.on(this.container,"click","#ssh-create-button",d().bind(this.showForm,this)),y.Z.on(this.container,"click",'[data-action="edit"]',d().bind(this.editServer,this)),y.Z.on(this.container,"click",'[data-action="copy-key"]',(function(e){var t=l()(e.currentTarget).closest(".connection");Nf.open(t.data()).catch((function(){}))})),y.Z.on(this.container,"click",'[data-action="remove"]',d().bind(this.deleteServer,this)),y.Z.on(this.container,"click",'[data-action="connect"]',d().bind(this.connectToServer,this)),this.subscriptions.push(y.Z.subscribe("ssh.connection.manager:form-closed",d().bind(this.showList,this))),this.subscriptions.push(y.Z.subscribe("ssh.connection.manager:server-updated",d().bind(this.updateServer,this)))},Uf.fetch=function(){Mf.fetchServers().then(d().bind((function(e){this.connections=e,this.container.find(".loader").hide(),this.renderList()}),this)).catch((function(e){k.Z.error(["Unable to fetch your servers at this time. (<code>",m.ZP.safeHtml(e),"</code>). Please try again."].join(""))}))},Uf.showForm=function(e){this.list.hide(),this.form.show(e)},Uf.showList=function(){return this.list.show()},Uf.renderList=function(){var e=this.connections;if(!e.length)return this.showForm();this.showList(),this.list.empty().append(d().map(e,(function(e){return l()(Rf(e)).data(e)})));var t=this;d().delay((function(){t.container.find("#ssh-create-button").focus()}),100)},Uf.deleteServer=function(e){var t=l()(e.currentTarget).closest(".connection"),n=t.parent(),i=t.find("h4").text();if(confirm('Are you sure you wish to delete the target named "'+i+'"?'))return t.hide(),Mf.deleteServer(t.data().uid,t.data().host).then(d().bind((function(){var e=d().findKey(this.connections,{uid:t.data().uid});e&&this.connections.splice(e,1),k.Z.success('Target "'+m.ZP.safeHtml(i)+'" successfully deleted.'),t.remove(),0===n.find(".connection").length&&this.showForm()}),this)).catch((function(){k.Z.error('Error deleting target "'+m.ZP.safeHtml(i)+'"'),t.show()}))},Uf.editServer=function(e){var t=l()(e.currentTarget).closest(".connection");return this.showForm(t.data())},Uf.updateServer=function(e,t){var n=d().findKey(this.connections,{uid:t.uid});return n?this.connections[n]=t:this.connections.push(t),this.renderList()},Uf.connectToServer=function(e){return _f.openCliTab(l()(e.currentTarget).closest(".connection").data())},Uf.close=function(){d().each(this.subscriptions,(function(e){y.Z.unsubscribe(e)})),this.subscriptions=[],this.container.remove()};const Bf=Lf;var qf=f().compile('<div class="ssh-terminal-message need-subscription">\n    <h4>Terminal and Box access is only available if you have an active subscription.</h4>\n    <button class="btn close-connection btn-primary" tabindex="0" data-pos="1">Close</button>\n    <a href=\'/home/billing\' class="btn subscribe" tabindex="0" data-pos="0" data-target="dashboard">Subscribe Today</a>\n</div>\n'),Hf=f().compile('<div id="ssh-reconnect-prompt">\n    <h4>You do not have administrative access to the box and terminal access is not allowed.</h4>\n</div>\n'),Wf=f().compile('<div id="ssh-reconnect-prompt">\n  <h4>\n    Sorry but as this assignment is marked as completed, the terminal is no longer accessible.\n    Please contact your teacher if you require access to this assignment again.\n  </h4>\n</div>\n'),zf=function e(t,n,a,s,c){if(!(this instanceof e))return new e(t,n,a,s,c);if(c=c||{},this.noFocusOnInit=c.noFocus,this.container=t,this.subscriptions=[],this.timeoutId=null,this.tab=c.tab,this.shouldRecalculateTerminalStatus=!1,this._resizeDebounce=d().debounce(eh.bind(null,this),100,{maxWait:1e3}),this.readyDeferred=m.ZP.promise.deferred(),"editor"===n||"editor"===a)return this.editor=new Bf(t),this;if(a){var l=null;l="backend"===a?{backend:!0,projectId:i.Z.currentProject.guid}:$f(a);var u=c.tab;if(u)if("backend"===a)u.setTitle(c.title||"Terminal");else{var p=n.split("-");p.pop(),p=p.join("-"),u.setTitle("SSH "+p)}var f=this;this.subscriptions.push(y.Z.subscribe("tab:activated:terminal",(function(e,i){Gf(f,e,i,{filename:n,container:t,params:l,type:a})})));var h=this.subscriptions;h.push(y.Z.subscribe("panel:focus:change",(function(){Yf(f)}))),h.push(y.Z.subscribe("dialog:close",(function(){Yf(f)}))),h.push(y.Z.subscribe("tab:activated",(function(){f.noFocusOnInit?f.noFocusOnInit=!1:(Yf(f),f.shouldRecalculateTerminalStatus=!0)}))),h.push(y.Z.on(t,"click",".re-connect",(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jf(this);case 2:!0===l.backend&&(l.projectName=i.Z.currentProject.name),f.termPromise=bf.getInstance(t,l,n).then((function(e){f.term=e}));case 4:case"end":return e.stop()}}),e,this)}))).bind(this))),h.push(y.Z.on(t,"click",".close-connection",function(){Jf(this),y.Z.publish("tab:close_by_path:"+n)}.bind(this))),h.push(y.Z.subscribe("panel:size:change",this._resizeDebounce)),h.push(y.Z.subscribe("project:permissionsUpdated:#projectId",function(){i.Z.currentProject.readOnly&&(Jf(this),y.Z.publish("tab:close_by_path:"+n))}.bind(this))),h.push(y.Z.subscribe("project:closeTerminal",function(e,i){i&&i.container===t&&(Jf(this),y.Z.publish("tab:close_by_path:"+n))}.bind(this)))}},Gf=function(e,t,n,i){var r=i.filename;n.filename===r&&(Vf(e,i).catch((function(){})),e.readyDeferred.resolve(),e._resizeDebounce())},Vf=function(e,t){return e.termPromise||(e.termPromise=Kf(e,t)),e.termPromise},Kf=function(){var e=(0,r.Z)(o().mark((function e(t,n){var r,a,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.filename,a=n.container,s=n.params,c=n.type,!t.term){e.next=3;break}return e.abrupt("return",bf.getInstance(a,s,r).then((function(e){return t.term=e,e})));case 3:if(l=(new Date).getTime(),t.container.showFProgress(null,0),Qf.call(t,r),t.timeoutId=setTimeout((function(){!t.term&&t.timeoutId&&(Xf.call(t),k.Z.error("Sorry, but it has taken a little too long to connect to the terminal. Please try again by reloading Codio."),y.Z.publish("tab:close_by_path:"+r))}),25e3),"backend"!==c){e.next=9;break}return e.abrupt("return",O.api.getCachedSubscriptions().then((function(e){var o=i.Z.currentUser.get("details").get("created_at"),c=i.Z.currentUser.isDummy(),u=Qi.Z.get("boxAccessCutoffDate"),d=O.hasAnyUsableSubscription(e),p=i.Z.currentProject;if((c||d||o<u)&&p.isAdmin)return bf.getInstance(a,s,r,n.noFocus).then((function(e){Xf.call(t);var n=(new Date).getTime()-l<800;return t.container.completeFProgress(n).then((function(){return t.term=e,e}))}));Xf.call(t);var f=(new Date).getTime()-l<800;return t.container.completeFProgress(f).then((function(){var e=p.eduStartedAssignmentInfo&&p.isReadOnly?Wf():Hf();return t.container.html(p.isAdmin?qf():e),Promise.reject(new Error("No access"))}))})));case 9:return e.abrupt("return",bf.getInstance(a,s,r).then((function(e){Xf.call(t);var n=(new Date).getTime()-l<800;return t.container.completeFProgress(n).then((function(){return t.term=e,e}))})));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Yf(e){e.termPromise&&e.termPromise.then((function(){e.term&&e.shouldRecalculateTerminalStatus&&(e.shouldRecalculateTerminalStatus=!1,e.tab.active?e.term.activate():e.term.deactivate())})).catch((function(){}))}function Jf(e){return e.termPromise?e.termPromise.then((function(){e.termPromise=void 0,e.term.destroy(),e.term=void 0,e.readyDeferred=m.ZP.promise.deferred()})).catch((function(){})):Promise.resolve()}function Qf(e){var t=this;this.timeoutId=setTimeout((function(){!t.term&&t.timeoutId&&(clearTimeout(t.timeoutId),k.Z.error("Sorry, but it has taken a little too long to connect to the terminal. Please try again by reloading Codio."),y.Z.publish("tab:close_by_path:"+e))}),25e3)}function Xf(){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=null}function $f(e){var t={};return e=l().trim(e).split("@"),t.username=e[0],e=e[1].split(":"),t.host=e[0],e[1]&&(t.port=e[1]),t}function eh(e){e.termPromise&&e.termPromise.then((function(){e.tab.active&&e.term&&e.term.resize()})).catch((function(){}))}var th=zf.prototype;th.activate=function(){M.Z.saveAllAndWait(),this.shouldRecalculateTerminalStatus=!0,Yf(this)},th.deactivate=function(){this.shouldRecalculateTerminalStatus=!0,Yf(this)},th.focus=function(){var e=this;this.termPromise&&this.termPromise.then((function(){e.term&&e.term.focus()})).catch((function(){}))},th.unfocus=function(){var e=this;e.termPromise&&e.termPromise.then((function(){e.term&&e.term.blur()})).catch((function(){}))},th.close=function(){d().each(this.subscriptions,(function(e){y.Z.unsubscribe(e)})),Xf.call(this),this.subscriptions=[],Jf(this),this.editor&&this.editor.close(),this.container.remove()},th.ready=function(){return this.readyDeferred.promise};const nh=zf;var ih=f().compile('<div class="codio-vm-actions">\n    <button class="codio-restart-vm-button btn">\n        Restart vm\n    </button>\n    <button class="codio-reset-vm-button btn">\n        Reset vm\n    </button>\n    <div class="codio-vm-log">\n        Fetching current status...\n    </div>\n    <div class="codio-vm-log-substatus">\n    </div>\n</div>\n<div class="scrollable codio-vm-iframe-container"></div>\n'),rh=y.Z.create({vmPing:"vm:ping"}),ah=[{name:"clipboard-read",allowlist:"*"},{name:"clipboard-write",allowlist:"*"},{name:"fullscreen",allowlist:"*"}],sh=void 0,oh=void 0,ch=[],lh=d().debounce((function(){return rh.vmPing()}),5e3,{maxWait:3e4}),uh=function(){var e,t,n=i.Z.currentProject;if(n.writableCopy)throw new Error("Assignment id required");if(n.isAuthorProject)return{ownerId:n.owner.id,assignmentId:n.authorAssignment.assignment.id,courseId:n.authorAssignment.course.id};if(n.eduStartedAssignmentInfo)return{ownerId:n.owner.id,assignmentId:(e=n.eduStartedAssignmentInfo,t=e.assignment,t?t.projectBased?t.projectBased.id:t.bookBased.id:""),courseId:n.eduStartedAssignmentInfo.course.id};throw new Error("Assignment id required")},dh=function(){if(sh===Up.StatusResponse.MachineStatus.RUNNING){var e=uh();!function(e,t){var n=new Up.ReportActiveRequest;n.setAssignmentId(e),n.setOwnerId(t),new Promise((function(e,t){qp.reportActive(n,Hp(),(function(n,i){n?t(new Error(n.message)):e(i)}))}))}(e.assignmentId,e.ownerId)}},ph=function(){oh||(oh=y.Z.subscribe("app:timeChunkMsSpent",(function(){return dh()})))},fh=function(){var e=uh(),t=e.ownerId;return function(e,t){var n=new Up.StatusRequest;return n.setAssignmentId(e),n.setOwnerId(t),new Promise((function(e,t){qp.status(n,Hp(),(function(n,i){n?t(new Error(n.message)):e(i)}))}))}(e.assignmentId,t)},hh=function e(t,n,i,r){var a=this;try{uh()}catch(e){throw new Error("Not allowed")}if(!(this instanceof e))return new e(t);this.sshExtension="virtual-machines-ssh"===r,this.wasClosed=!1,this.container=t;var s=l()(ih({}));this.container.append(s);var o=this.container.find(".codio-vm-iframe-container");this.sshExtension||(this.frame=new Np(o,o,ah,"codio-vm-iframes",r,!0)),this._firstStatusFetch=!0,this._bindEvents();var c=uh(),u=c.courseId,d=c.ownerId;this.nsSubId=h.Z.subscribeLast("tasks/"+u+d,(function(e){var t=e||"";a._logSubStatus(t),a._fetchCurrentStatus()})),ch.push(this.nsSubId),ch.length>1&&this._fetchCurrentStatus()},mh=hh.prototype;mh._fetchCurrentStatus=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;fh().then((function(t){e.wasClosed||e._updateCurrentStatus(t.getStatus())})).catch((function(){t<5&&setTimeout((function(){return e._fetchCurrentStatus(t+1)}),5e3)}))},mh._updateCurrentStatus=function(e){sh=e,this._firstStatusFetch&&this.showFProgress("Initiating..."),e===Up.StatusResponse.MachineStatus.INACTIVE&&(this._firstStatusFetch?(this._logCurrentStatus("Virtual machine is inactive, running start action."),this._startVirtualMachine()):(this._logCurrentStatus("Virtual machine is inactive."),this._cleanupExtension(),this.vncUrl="",this.sshConnection="")),e===Up.StatusResponse.MachineStatus.STARTING&&(this._logCurrentStatus("Virtual machine is starting."),this.showFProgress("Initiating...")),e===Up.StatusResponse.MachineStatus.RUNNING&&(this._logCurrentStatus("Virtual machine is active, opening connection."),this._waitVncUrl()),e===Up.StatusResponse.MachineStatus.STOPPING&&(this._cleanupExtension(),this.showFProgress("Stopping..."),this._disableActionButtons(),this._logCurrentStatus("Virtual machine is stopping")),this._firstStatusFetch=!1},mh.showFProgress=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.activeFProgressMessage!==e&&(this.activeFProgressMessage=e,this._getFrameTopContainer().showFProgress(e))},mh.hideFProgress=function(){this.activeFProgressMessage="",this._getFrameTopContainer().hideFProgress()},mh._logCurrentStatus=function(e){this.container.find(".codio-vm-log").text(e)},mh._logSubStatus=function(e){var t=e&&"Connected"!==e?"Action: ".concat(e):"";this.container.find(".codio-vm-log-substatus").text(t)},mh._startVirtualMachine=(0,r.Z)(o().mark((function e(){var t,n,r,a,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=uh(),n=t.assignmentId,r=t.ownerId,sh=Up.StatusResponse.MachineStatus.STARTING,this._disableActionButtons(),a=i.Z.currentUser.get("details").get("ssh"),s=a&&a.public?a.public:"",e.prev=5,e.next=8,Wp(n,r,s);case 8:return c=e.sent,e.next=11,Gp(c.getTaskId());case 11:e.next=18;break;case 13:e.prev=13,e.t0=e.catch(5),l=e.t0.message,this.hideFProgress(),k.Z.error(l);case 18:return e.prev=18,e.next=21,this._fetchCurrentStatus();case 21:return e.prev=21,this._enableActionButtons(),e.finish(21);case 24:ph();case 25:case"end":return e.stop()}}),e,this,[[5,13],[18,,21,24]])}))),mh._waitVncUrl=function(){this.haveCurrentWaitTask||(this.haveCurrentWaitTask=!0,this._disableActionButtons(),this.container.find(".codio-reset-vm-button").removeAttr("disabled","disabled"),this.waitVncUrl())},mh.waitVncUrl=(0,r.Z)(o().mark((function e(){var t,n,i,r,a,s,c=this,l=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=l.length>0&&void 0!==l[0]?l[0]:0)>20)){e.next=5;break}return this.haveCurrentWaitTask=!1,this._enableActionButtons(),e.abrupt("return");case 5:return n=uh(),i=n.ownerId,r=n.assignmentId,e.prev=6,e.next=9,zp(r,i);case 9:if((a=e.sent).getUrl()){e.next=13;break}return setTimeout((function(){return c.waitVncUrl(t+1)}),5e3),e.abrupt("return");case 13:this.haveCurrentWaitTask=!1,this._logCurrentStatus("Virtual machine is ready."),this._enableActionButtons(),this.hideFProgress(),s=this.vncUrl!==a.getUrl()||this.sshConnection!==a.getSsh(),this.vncUrl!==a.getUrl()&&(this.vncUrl=a.getUrl()),this.sshConnection!==a.getSsh()&&(this.sshConnection=a.getSsh()),s&&this._renderExtension(),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(6),this._enableActionButtons(),this.haveCurrentWaitTask=!1;case 27:case"end":return e.stop()}}),e,this,[[6,23]])}))),mh.focus=function(){this.term&&this.term.focus()},mh._getFrameTopContainer=function(){return this.frame?this.frame.getIframeEl().get():this.container.find(".codio-vm-iframe-container")},mh._renderExtension=function(){var e=this;if(this.sshExtension){if(!this.sshConnection)return void this.container.find(".codio-vm-iframe-container").text("Wrong options");bf.spawn(this.container.find(".codio-vm-iframe-container"),$f(this.sshConnection),{},!1,!1).then((function(t){e.term=t,d().defer((function(){t.forceRefresh(),t.focus()}))}))}else this.frame.src(this.vncUrl)},mh._cleanupExtension=function(){this.sshExtension?(this.term&&(this.term.destroy(),this.term=null),this.container.find(".codio-vm-iframe-container").empty()):this.frame&&this.frame.src("about:blank")},mh._bindEvents=function(){var e=this;function t(e,t){l()(t.target).closest(".btn").attr("disabled")||e()}this.container.find(".codio-restart-vm-button").click(t.bind(this,(function(){return e._onRestartClick()}))),this.container.find(".codio-reset-vm-button").click(t.bind(this,(function(){return e._onResetClick()}))),ph(),window.addEventListener("message",this._onMessage)},mh._onMessage=function(e){try{"noVNCPing"===JSON.parse(e.data).method&&lh()}catch(e){}},mh._onRestartClick=function(){var e=this;this._confirm("Do you want to restart the Virtual Machine?").then((function(){return e._restartAction()})).catch((function(){}))},mh._onResetClick=function(){var e=this;this._confirm("Do you want to reset the Virtual Machine?",!0,"<center>This will remove any changes you have made to the VM and return it to its original state.<br>This process can take several minutes.</center>").then((function(){return e._resetAction()})).catch((function(){}))},mh._restartAction=function(){var e=this,t=uh();(function(e,t){var n=new Up.StopRequest;return n.setAssignmentId(e),n.setOwnerId(t),new Promise((function(e,t){qp.stop(n,Hp(),(function(n,i){n?t(new Error(n.message)):e(i)}))}))})(t.assignmentId,t.ownerId).then((function(e){return Gp(e.getTaskId())})).catch((function(e){var t=e.message;return k.Z.error(t)})).finally((function(){return e._startVirtualMachine()}))},mh._resetAction=function(){var e=this;this._logCurrentStatus("Resetting virtual machine");var t=uh(),n=t.assignmentId,i=t.ownerId;this._disableActionButtons(),this._cleanupExtension(),this.showFProgress("Resetting..."),function(e,t){var n=new Up.TerminateRequest;return n.setAssignmentId(e),n.setOwnerId(t),new Promise((function(e,t){qp.terminate(n,Hp(),(function(n,i){n?t(new Error(n.message)):e(i)}))}))}(n,i).then((function(e){return Gp(e.getTaskId())})).catch((function(e){var t=e.message;return k.Z.error(t)})).finally((function(){return e._startVirtualMachine()}))},mh._confirm=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=m.ZP.promise.deferred(),r={description:e,captcha:t,onClose:function(e){e?i.resolve():i.reject(new Error("Rejected"))}};return n&&(r.description2=n),Vp.Z.showConfirm(r),i.promise},mh._disableActionButtons=function(){this.container.find(".codio-restart-vm-button").attr("disabled","disabled"),this.container.find(".codio-reset-vm-button").attr("disabled","disabled")},mh._enableActionButtons=function(){this.container.find(".codio-restart-vm-button").removeAttr("disabled","disabled"),this.container.find(".codio-reset-vm-button").removeAttr("disabled","disabled")},mh.close=function(){var e=uh(),t=e.courseId,n=e.ownerId;h.Z.unsubscribe("tasks/"+t+n,this.nsSubId);var i=ch.indexOf(this.nsSubId);-1!==i&&ch.splice(i,1),0===ch.length&&(y.Z.unsubscribe(oh),oh=null),this.wasClosed=!0,window.removeEventListener("message",this._onMessage),this.frame&&this.frame.clean(),this.frame=null,lh.flush()};const gh=hh;var vh=f().compile('<div class="publish-virtual-machine-content">\n    <div>\n        <label for="publish-virtual-machine-name" class="publish-virtual-machine-name-label">Name</label>\n        <input id="publish-virtual-machine-name" placeholder="Name..." required/>\n    </div>\n    <div>\n        <label for="publish-virtual-machine-description" class="publish-virtual-machine-description-label">Description</label>\n        <textarea id="publish-virtual-machine-description" rows="6" placeholder="Description..."></textarea>\n    </div>\n</div>\n'),bh=null;function yh(e,t){var n=i.Z.currentProject;Ap()&&n.isAuthorProject&&function(e,t,n,i){var r=new Up.PublishRequest;return r.setAssignmentId(e),r.setOwnerId(t),r.setName(n),r.setDescription(i),new Promise((function(e,t){qp.publish(r,Hp(),(function(n,i){if(n)return t(new Error(n.message));Gp(i.getTaskId()).then((function(){return e()})).catch((function(e){return t(e)}))}))}))}(n.authorAssignment.assignment.id,n.owner.id,e,t).then((function(){return k.Z.info("Image was published")})).catch((function(e){var t=e.message;return k.Z.error(t)}))}function wh(e){return e&&"UBUNTU"===e.osType}y.Z.subscribe("command:vm:open",(function(){jp()&&d().defer((function(){return i.Z.ide.open("virtual-machines","",{title:"VM"})}))})),y.Z.subscribe("command:vm:open-ssh",(function(){var e=Ap();e&&wh(e)&&d().defer((function(){return i.Z.ide.open("virtual-machines-ssh","",{title:"VM SSH Terminal"})}))})),y.Z.subscribe("command:vm:publish",(function(){var e=[{title:"Publish",type:1,onClick:function(){t.find("#publish-virtual-machine-name").val()?bh.close(!0):k.Z.error("Name required.")}},{title:"Close",type:0,onClick:function(){return bh.close(!1)}}],t=l()(vh({}));bh=new R.Z({title:"Publish Virtual Machine State",className:"publish-virtual-machine",content:t,buttons:e,width:500,onClose:function(e){!0===e&&yh(t.find("#publish-virtual-machine-name").val(),t.find("#publish-virtual-machine-description").val())}})})),y.Z.subscribe("project:open",(function(){var e=Ap();e?(i.Z.currentProject.authorAssignment||_.ZP.setVisibility("virtual-machine-extension-publish",!1),wh(e)||_.ZP.setVisibility("virtual-machine-extension-ssh",!1)):_.ZP.setVisibility("virtual-machine",!1)}));var _h=null;function kh(){if(!jp())throw new Error("Not supported");var e=i.Z.currentProject,t=e.authorAssignment?e.authorAssignment.course:e.eduStartedAssignmentInfo.course;return b.ZP.OrganizationManager.get(t.organizationId).then((function(e){if(!e.computedVmOptions||!e.computedVmOptions.enabled)throw new Error("Not supported");return gh}))}i.Z.register({info:Tp,hotkeys:{},settings:{},get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===_h&&(_h=kh()),e.abrupt("return",_h);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const Ph=JSON.parse('{"name":"codio-autograde","description":"Test autograde script","codio":{"global":true,"noFile":true,"title":"Test Autograde Script","urls":"test-autograde"}}');var Zh=n(26024),xh=n(27726);var Ch=y.Z.create(n(98322)),Sh=f().compile('<div class="codio-test-autograde">\n    <h2>\n        Test Autograde Script\n    </h2>\n    <form action="/">\n        <div class="main">\n            <div class="settings-form">\n                <div>\n                    <a href="javascript:void(0)" id="test-autograde-btn" class="btn btn-primary">Test script</a>\n                    <fieldset class="test-script-fieldset">\n                        <label for="test-script-name">Path to script</label>\n                        <div class="input-container">\n                            <input type="text" name="name" id="test-script-name" required autofocus placeholder="Path to script for test" value=".guides/scripts/autograde.sh" class="input-xlarge" maxlength="255">\n                        </div>\n                    </fieldset>\n                </div>\n                <div>\n                    <p id="codio-test-autograde-result" class="alert alert-info">\n                        No result for now\n                    </p>\n                </div>\n                <fieldset class="test-assessments-help-fieldset">\n                    <label>Generate Test Data for CODIO_AUTOGRADE_ENV</label>\n                    <a href="https://docs.codio.com/instructors/authoring/assessments/auto-grade-scripts.html#access-authored-content-assessment-results" target="_blank">\n                        <i class="ss-icon">info</i>\n                        <span>Need a little help?</span>\n                    </a>\n                </fieldset>\n                <div id="codio-test-autograde-assessments">\n                    No assessments stats\n                </div>\n            </div>\n        </div>\n        <footer></footer>\n    </form>\n</div>\n'),Eh=f().compile('{{#if code}}\n<h3 class="test-output-failed">\n    Script exited with non zero code, assignment submission will be failed\n</h3>\n{{else}}\n{{#exists grade}}\n<fieldset class="test-grade-fieldset">\n    <label>Grade</label>\n    <p>{{grade}}</p>\n</fieldset>\n{{/exists}}\n{{#if penalty}}\n<fieldset class="test-extraCredit-fieldset">\n    <label>Custom penalty</label>\n    <p>{{penalty}}</p>\n</fieldset>\n{{/if}}\n{{#if extraCredit}}\n<fieldset class="test-extraCredit-fieldset">\n    <label>Extra Credit</label>\n    <p>{{extraCredit}}</p>\n</fieldset>\n{{/if}}\n{{/if}}\n\n{{#equals version 2}}\n<fieldset class="test-output-fieldset">\n    <label for="test-output">Feedback</label>\n    <div id="test-feedback">\n    </div>\n</fieldset>\n{{/equals}}\n<fieldset class="test-output-fieldset">\n    <label for="test-output">Output</label>\n    <div>\n        <textarea id="test-output" readonly>{{message}}</textarea>\n    </div>\n</fieldset>\n'),Ih=f().compile('<div class="codio-test-assessment-item codio-test-assessment-item--header">\n    <div class="codio-test-assessment-name"><span>Name</span></div>\n    <div class="codio-test-assessment-correct"><span>Is answered</span></div>\n    <div class="codio-test-assessment-correct"><span>Is correct</span></div>\n    <div class="codio-test-assessment-points"><span>Points Test<br/>Student Earned</span></div>\n</div>\n<hr/>\n{{#each assessments}}\n<div class="codio-test-assessment-item" id="{{ id }}">\n    <div class="codio-test-assessment-name">\n        <span class=\'codio-test-assessment-name-el\'>{{title}}</span>\n    </div>\n    <div class="codio-test-assessment-answered">\n        <fieldset>\n            <label class="switch">\n                <span class="visuallyhidden">Is correct</span>\n                <input type="checkbox" name="name" id="answered-{{id}}" required autofocus checked/>\n                <span class="switch-label"></span>\n                <span class="switch-handle"></span>\n            </label>\n        </fieldset>\n    </div>\n    <div class="codio-test-assessment-correct">\n        {{#if partialPoints}}\n        <span>Partial points (Max {{max}})</span>\n        {{else}}\n        <fieldset>\n            <label class="switch">\n                <span class="visuallyhidden">Is correct</span>\n                <input type="checkbox" name="name" id="correct-answer-{{id}}" required autofocus checked/>\n                <span class="switch-label"></span>\n                <span class="switch-handle"></span>\n            </label>\n        </fieldset>\n        {{/if}}\n    </div>\n    <div class="codio-test-assessment-points">\n        <fieldset>\n            {{#if partialPoints}}\n            <input type="number" name="name" id="correct-points-{{id}}" min="{{min}}" max="{{max}}" required autofocus placeholder="Points" value="1" class="input-xlarge" maxlength="255">\n            {{else}}\n            <input readonly type="number" name="name" id="correct-points-{{id}}" placeholder="Points" value="{{max}}" class="input-xlarge" maxlength="255">\n            {{/if}}\n        </fieldset>\n    </div>\n</div>\n<hr/>\n{{/each}}\n'),Th=".codio",jh=[];var Ah=function e(t){if(!(this instanceof e))return new e(t);this.container=t;var n=l()(Sh());this.container.append(n),this.closed=!1;var i=this,r=y.Z.on.bind(y.Z,this.container);r("click.autograde","#test-autograde-btn",this._onFormSubmit.bind(this)),r("keyup.autograde",".codio-test-assessment-points input",(function(e){var t=this,n=l()(e.target).val(),r=l()(e.target).closest(".codio-test-assessment-item").attr("id");i.assessmentsContent.forEach((function(e){if(e.taskId===r){var i=e.source.incorrectPoints?parseInt(e.source.incorrectPoints,10):0,a=parseInt(e.source.points,10);n<i||n>a?t.classList.add("validation-error"):t.classList.remove("validation-error")}}))})),r("click.autograde",".codio-test-assessment-answered input",(function(e){var t=l()(e.target).prop("checked"),n=l()(e.target).closest(".codio-test-assessment-item"),i=n.find(".codio-test-assessment-correct input"),r=n.find(".codio-test-assessment-points input");i.attr("disabled",!t),r.attr("disabled",!t)})),Zh.ZP.loadAssessmentsFromFile().then((function(e){if(e)return Promise.all([e,xh._3.getAssessmentsUsageForProject(e)]).then((function(e){var t=(0,a.Z)(e,2),n=t[0],i=t[1];return n.map((function(e){return e.usageInfo=d().find(i,{taskId:e.taskId}),e}))})).then((function(e){i.assessmentsContent=e;var t=e.filter((function(e){return e.usageInfo})).map((function(e){return{partialPoints:!!e.source.arePartialPointsAllowed,min:e.source.incorrectPoints?parseInt(e.source.incorrectPoints,10):0,max:parseInt(e.source.points,10),title:e.source.name,id:e.taskId}}));i._drawAssessmentsContent(t)}))})),this._loadPrevUsedScripts().then((function(e){jh=e;var t=d().last(e)||".guides/scripts/autograde.sh";n.find("#test-script-name").val(t)}))},Oh=Ah.prototype;Oh._addError=function(e,t){var n=this.container.find(e);m.ZP.addErrorToInput(n,{title:t,noFocus:!1}),d().defer((function(){n.data("selectize")?n[0].selectize.focus():n.focus()}))},Oh._onFormSubmit=function(){var e=this.container.find("form"),t=e.find("#test-script-name").val();if(!t)return this._addError("#test-script-name","Empty script path");var n={assessments:{stats:{total:0,answered:0,correct:0,totalPoints:0,points:0},info:[]},completedDate:new Date,course:{id:"dummy_course_id",project:"dummy_project_id",assignment:{id:"dummy_assignment_id"}}};if(this.assessmentsContent){var r=this;if(n.assessments.info=this.assessmentsContent.filter((function(e){return e.usageInfo})).map((function(t){var i=e.find("#answered-"+t.taskId).prop("checked"),a=e.find("#correct-answer-"+t.taskId).prop("checked"),s=parseInt(e.find("#correct-points-"+t.taskId).val(),10);if(t.source.arePartialPointsAllowed&&isNaN(s))return r._addError("#correct-points-"+t.taskId,"Points is required"),null;var o=parseInt(t.source.points,10)||0,c=parseInt(t.source.incorrectPoints,10)||0;return i&&(a||t.source.arePartialPointsAllowed&&s>0?(n.assessments.stats.correct++,n.assessments.stats.points+=s):t.source.incorrectPoints&&(n.assessments.stats.points-=c),n.assessments.stats.answered++,n.assessments.stats.totalPoints+=o),{name:t.source.name,points:o,incorrectPoints:c,answer:i?{correct:t.source.arePartialPointsAllowed?s>0:a,points:a||t.source.arePartialPointsAllowed?s:0-c}:null}})),d().some(n.assessments.info,(function(e){return null===e})))return;n.assessments.stats.total=n.assessments.info.length}e.find("#test-autograde-btn").disableButton("Executing...","loading"),this._showExecutionResult(t,"Executing...",!0);var a=this._showExecutionResult.bind(this,t);M.Z.saveAllAndWait().then((function(){b.ZP.CourseManager.testAutograde(i.Z.currentProject.guid,t,n).then((function(e){return xf.Z.onlyNsCallbackTask({message:e})})).then(a).catch((function(e){return a(e.message)}))}))},Oh._showExecutionResult=function(e,t,n){if(!this.closed){if(!n)this.container.find("#test-autograde-btn").enableButton();var i=this.container.find("#codio-test-autograde-result");if(i.removeClass(),n)return i.addClass("alert alert-info"),i.html(t);if(t&&t.message)try{t=JSON.parse(t.message)}catch(e){t=t.message}d().includes(t.stderr,e)&&0!==t.code&&(d().includes(t.stderr,"No such file or directory")?t="Script not found. Please check path to script: "+e:d().includes(t.stderr,"Permission denied")&&(t="Script have no permissions to execute. Run: chmod +x "+e+" in terminal")),d().isObject(t)&&0===t.code&&(d().pull(jh,e),jh.push(e),Ch.appendSection({section:"autogradeTestScripts",data:jh}));var r=this._prepareContent(t),a=Eh(r);i.html(a),2===r.version&&this._drawFeedback(r,i)}},Oh._drawFeedback=function(e,t){var n=t.find("#test-feedback");m.ZP.renderFeedback(e.feedback,e.format).then((function(e){return n.html(e)}))},Oh._prepareContent=function(e){var t={message:e};if(!d().isString(e)){t.grade=e.grade;var n=[];e.stdout&&n.push("Stdout:",e.stdout),e.stderr&&n.push("Stderr:",e.stderr),e.code&&n.push("Exit code: "+e.code),t.message=n.join("\n"),t.feedback=2===e.version&&e.feedback,t.version=e.version,t.format=e.format,t.code=e.code,t.extraCredit=e.extraCredit,t.penalty=e.penalty}return t},Oh._drawAssessmentsContent=function(e){if(!this.closed){var t=l()(Ih({assessments:e}));this.container.find("#codio-test-autograde-assessments").html(t)}},Oh._loadPrevUsedScripts=function(){var e=i.Z.currentProject;return e.exists(Th)?e.file(Th).then((function(e){try{var t=JSON.parse(function(e){return(new(bo())).strip(e)}(e.content));return t.autogradeTestScripts instanceof Array?t.autogradeTestScripts:[]}catch(e){return[]}})).catch((function(){return[]})):Promise.resolve([])},Oh.focus=function(){this.container.find("#test-autograde-btn").focus()},Oh.close=function(){this.closed=!0};const Dh=Ah;i.Z.register({info:Ph,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dh);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const Nh=JSON.parse('{"name":"validate-jupyter","description":"Validate jupyter script","codio":{"global":true,"noFile":true,"title":"Test jupyter","urls":"validate-jupyter"}}');var Mh=f().compile('<div class="codio-jupyter">\n    <h2>\n        Validate Jupyter\n        <a href="javascript:void(0)" id="validate-jupyter-btn" class="btn btn-primary">Re-execute</a>\n    </h2>\n    <form action="/">\n        <div class="main">\n            {{#if error}}\n            {{error}}\n            {{/if}}\n            <div class="validate-jupyter-result">\n\n            </div>\n        </div>\n        <footer></footer>\n    </form>\n</div>\n'),Fh=f().compile('<div>\n    <h4>File: {{filename}}</h4>\n    <div>\n        <h5>Validate result</h5>\n        <pre class="alert alert-info">\n            {{validate}}\n        </pre>\n    </div>\n    <div>\n        <h5>Publish result</h5>\n        <pre class="alert alert-info">\n            {{assign}}\n        </pre>\n    </div>\n</div>\n'),Rh=".codio-jupyter",Lh=function e(t){if(!(this instanceof e))return new e(t);var n=i.Z.currentProject.exists(Rh)?void 0:Rh+" not found";this.container=t;var r=l()(Mh({error:n}));this.container.append(r),this._runValidation(),this._bindEvents()},Uh=Lh.prototype;Uh._runValidation=function(){this.container.find("#validate-jupyter-btn").disableButton("Executing...","loading");var e=this;this.container.find(".validate-jupyter-result").removeClass("alert alert-info").empty(),b.ZP.AssessmentManager.validateJupyter(i.Z.currentProject.guid).then((function(e){return xf.Z.onlyNsCallbackTask({message:e})})).then((function(t){0!==t.code?e._onError(t.stdout+"\n"+t.stderr):e._renderResult(t.stdout)})).catch((function(t){e._onError(t&&t.message)}))},Uh._bindEvents=function(){var e=this;this.container.find("#validate-jupyter-btn").click((function(){e._runValidation()}))},Uh._renderResult=function(e){this.container.find("#validate-jupyter-btn").enableButton();var t=this.container.find(".validate-jupyter-result"),n=JSON.parse(e);d().each(n,(function(e,n){var i=l()(Fh({filename:n,validate:e.validate,assign:e.assign}));t.append(i)})),0===d().keys(n).length&&this._onError("No jupyter notebook(s) found.")},Uh._onError=function(e){this.container&&(this.container.find(".validate-jupyter-result").empty().addClass("alert alert-info").append(e),this.container.find("#validate-jupyter-btn").enableButton())};const Bh=Lh;i.Z.register({info:Nh,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bh);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const qh=JSON.parse('{"name":"change-player","description":"Code Playback","codio":{"global":true,"noFile":true,"title":"Code Playback","urls":"change-player"}}');n(25304);var Hh=n(86048);var Wh=n(50276),zh=f().compile('<div id="change-player">\n\n    <div class="change-player-header">\n        <div>\n            <strong>File:&nbsp;</strong>\n            <span id="change-player-file-name"/>&nbsp;\n            <i class="ss-icon ss-openfolder change-player-navigation-refresh" data-action="refresh" title="Open file" aria-label="Open file"/>\n        </div>\n    </div>\n\n    <div class="change-player-file" id="change-player-file">\n        <div id="change-player-loading"></div>\n        <div class="hide player-errors"></div>\n    </div>\n\n    <div class="change-player-navigation">\n        <div>\n            <input type="range" min="0" max="0" value="0" class="slider change-player-position" id="change-player-position" title="Code Playback Position" aria-label="Code Playback Position">\n        </div>\n        <div class="change-player-controls">\n            <i class="ss-icon ss-skipback change-player-navigation-skipback" data-action="skipback" title="Previous change" aria-label="Previous change"/>\n            <i class="ss-icon ss-play change-player-navigation-play" data-action="start" title="Play/Pause" aria-label="Play/Pause"/>\n            <i class="ss-icon ss-skipforward change-player-navigation-skipforward" data-action="skipforward" title="Next change" aria-label="Next change"/>\n            <div class="change-player-position-information"/>\n            <div class="change-player-navigation-empty" />\n            <div class="change-player-speed">\n                <strong>Speed</strong>\n                <select id="change-player-speed-select" title="Play speed" aria-label="Play speed">\n                    <option value="1">1 cps</option>\n                    <option value="2">2 cps</option>\n                    <option value="5">5 cps</option>\n                    <option value="10">10 cps</option>\n                    <option value="15">15 cps</option>\n                </select>\n            </div>\n        </div>\n    </div>\n\n</div>\n'),Gh=f().compile('{{#if userInformation}}\n<div class="change-player-position-information-date">\n    {{dateTime}}\n</div>\n<div class="change-player-position-information-user">\n    <strong>Modified by:&nbsp;</strong><div  class="change-player-position-information-username">{{userInformation}}</div>\n</div>\n{{else}}\n<strong  class="change-player-position-information-na">\n    N/A\n</strong>\n{{/if}}\n'),Vh=f().compile("<blockquote>\n    <h1>Code Playback Error</h1>\n    <div>\n        {{#equals errorCode '1'}}\n        History changes not found for file {{fileName}}\n        {{/equals}}\n        {{#equals errorCode '2'}}\n        Permission denied for file {{fileName}}\n        {{/equals}}\n        {{#equals errorCode '3'}}\n        Incorrect session passed\n        {{/equals}}\n        {{#equals errorCode '3'}}\n        File {{fileName}} precessing error\n        {{/equals}}\n    </div>\n</blockquote>\n"),Kh="change-player-file-name",Yh=function(){function e(t,n,i,r){(0,Zn.Z)(this,e),this.currentPosition=t,this.endPosition=n,this.startPosition=t,this.step=i,this.startContent=r,this.timeline=new Array(n),this.speed=5}return(0,xn.Z)(e,[{key:"setSpeed",value:function(e){this.speed=e}},{key:"addFrame",value:function(e,t){var n=this;d().each(t.timeline,(function(t,i){var r=i+n.step*e;r>n.endPosition||(n.timeline[r]=t)}))}},{key:"resetPlay",value:function(){this.currentPosition=this.startPosition}},{key:"moveToPosition",value:function(e){return this.currentPosition=e-1,this.getNextState()}},{key:"currentPositionInformation",value:function(){return this.positionInformation(this.currentPosition)}},{key:"positionInformation",value:function(e){return this.timeline[e]}},{key:"timelineState",value:function(){var e=this.currentPosition+1,t=Math.floor(e/this.step),n=this.currentPosition+5*this.speed;return{needPreload:!this.timeline[e]||!this.timeline[n],nextFrame:this.timeline[e]?t+1:t,playDone:e>this.endPosition,currentPosition:this.currentPosition}}},{key:"getNextState",value:function(){var e=this.currentPosition+1;if(e>this.endPosition&&(e=this.endPosition),this.timeline[e]){var t=this.timeline[e];if(t&&d().isString(t.content))return this.currentPosition=e,t.content}}}]),e}(),Jh=(0,xn.Z)((function e(t,n){(0,Zn.Z)(this,e),this.offset=t,this.timeline=n})),Qh=(0,xn.Z)((function e(t,n,i){(0,Zn.Z)(this,e),this.content=t,this.modified=n,this.modifiedBy=i})),Xh=function e(t,n,r,a,s){if(!i.Z.currentUser.isAnonymous()){var o=i.Z.currentProject.access.control;if("OWNER"===o||"ADMIN"===o){if(!(this instanceof e))return new e(t,n,r,a,s);this.dmp=new diff_match_patch.diff_match_patch,this.tab=s.tab,this.container=t;var c=l()(zh({}));this._model=new B.yO(""),this.container.append(c),this._getAndStoreFileName(s&&s.filename),this.filename&&this.tab.setTitle("▶ "+this.filename),this._bindEvents(),this.playing=!1,this.hasPlayOnDrag=!1,this._debounceCloseConnection=d().debounce(this._closeConnection.bind(this),3e5)}}},$h=Xh.prototype;$h._updateEditorSize=function(){this._editor&&this._editor.layout()},$h._bindEvents=function(){var e=this,t=this;document.addEventListener("visibilitychange",(function(){document.hidden?(t._onPausePlay(),t._debounceCloseConnection()):(t._debounceCloseConnection.cancel(),1!=t.closed&&t._restoreConnection())})),this._handlers=[y.Z.subscribe("ide:fullscreen:enter",this._updateEditorSize.bind(this)),y.Z.subscribe("ide:fullscreen:leave",this._updateEditorSize.bind(this))],this.container.find(".change-player-navigation-play").click((function(){e.playing?e._onPausePlay():e._onStartPlay()})),this.container.find(".change-player-navigation-skipback").click((function(){if(!e.playing&&e.fileTimeline){var t=e.fileTimeline.currentPosition-1;t>=e.fileTimeline.startPosition&&(e._playAtPosition(t),e._setTimelinePosition(t))}})),this.container.find(".change-player-navigation-skipforward").click((function(){if(!e.playing&&e.fileTimeline){var t=e.fileTimeline.currentPosition+1;t<=e.fileTimeline.endPosition&&(e._playAtPosition(t),e._setTimelinePosition(t))}}));var n=this.container.find("#change-player-position"),i=!1;n.change((function(){var t=n.val();e.hasPlayOnDrag=i,e._playAtPosition(t)})).mousedown((function(){i=e.playing,e.hasPlayOnDrag=!1,e._onPausePlay()})).on("input",(function(t){var n=l()(t.target).val();e._playAtPosition(n)})),this.container.find("#change-player-speed-select").change((function(t){var n=parseInt(l()(t.target).val(),10);e.fileTimeline&&(e.fileTimeline.setSpeed(n),d().isNumber(e.playerInterval)&&(clearInterval(e.playerInterval),e.playerInterval=setInterval((function(){return e._onPlayNext()}),1e3/e.fileTimeline.speed)))})).val("5"),this.container.find(".change-player-navigation-refresh").click((function(){e._loadAvailableFiles()}))},$h._loadAvailableFiles=function(){var e=this;if(!this.charonClientMetadata)return this._loadFileMetadata(),void d().delay((function(){return e._loadAvailableFiles()}),100);var t=this.charonClientMetadata.interface,n=this.charonClientMetadata.client,r=new t.LoadAvailableFilesRequest;r.setProjectId(i.Z.currentProject.assignmentProjectId);var a=this.charonClientMetadata.metadataConverter(this._getSession()),s=[];n.loadAvailableFiles(r,a).subscribe({onSubscribe:function(e){return e.request(Number.MAX_SAFE_INTEGER)},onComplete:function(){return Wh.Z.open((function(){return s}),(function(t){return e._changeFile(t)}))},onNext:function(e){var t=e.toObject().path;s.push({name:m.ET.parse(t).name,path:t})},onError:function(e){return k.Z.error(e)}})},$h._changeFile=function(e){this.filename=e,N.I_.set(Kh,this.filename),this._loadFileMetadata(),this.filename&&this.tab.setTitle("▶ "+this.filename)},$h.setOptions=function(e,t,n){n.filename&&this.filename!==n.filename&&this._changeFile(n.filename)},$h._onStartPlay=function(){var e=this;if(this.fileTimeline){var t=this.container.find(".change-player-navigation-play");t.removeClass("ss-play"),t.addClass("ss-pause"),this.playing=!0;var n=this.fileTimeline.timelineState(),i=n.needPreload,r=n.playDone,a=n.nextFrame;r&&this._resetPlay(),!this.loadingFrame&&i&&this._loadFileState(a),d().isNumber(this.playerInterval)||(this.playerInterval=setInterval((function(){return e._onPlayNext()}),1e3/this.fileTimeline.speed))}},$h._setWithHighlight=function(e,t){var n=this,i=this._editor.getScrollTop(),r=this._editor.getScrollLeft(),a=this._editor.getPosition(),s=null;if(t&&d().isString(t.content)){var o=this.dmp.diff_main(t.content,e);this.dmp.diff_cleanupEfficiency(o);var c=d().map(o,(function(e){return e[1]}));this._model.setValue(c.join(""));var l=1,u=1;d().each(o,(function(e){var t=e[0],i=e[1].split("\n"),r=i.length-1,a=i[i.length-1].length,o=B.Zo.e6.fromPositions({lineNumber:l,column:u},{lineNumber:l+r,column:u+a});-1===t?n._editor.deltaDecorations([],[{range:o,options:{inlineClassName:"codePlaybackRemove"}}]):1===t&&n._editor.deltaDecorations([],[{range:o,options:{inlineClassName:"codePlaybackInsert"}}]),l+=r,u+=a,s||(s={lineNumber:l,column:u})}))}else this._model.setValue(e);s?(this._editor.setPosition(s),this._editor.scrollToPosition({lineNumber:s.lineNumber,column:1})):(this._editor.setScrollPosition(i,r),this._editor.setPosition(a))},$h._onPlayNext=function(){if(!this.fileTimeline)return d().isNumber(this.playerInterval)&&clearInterval(this.playerInterval);var e=this.fileTimeline.positionInformation(this.fileTimeline.currentPosition),t=this.fileTimeline.getNextState(),n=this.fileTimeline.timelineState(),i=n.needPreload,r=n.nextFrame,a=n.playDone,s=n.currentPosition;!this.loadingFrame&&i&&this._loadFileState(r),d().isString(t)&&(this._setWithHighlight(t,e),this._setTimelinePosition(s)),a&&this._onPausePlay()},$h._resetPlay=function(){this.fileTimeline.resetPlay(),this._setWithHighlight(this.fileTimeline.startContent),this._setTimelinePosition(this.fileTimeline.startPosition)},$h._playAtPosition=function(e){var t=this;if(this.fileTimeline){var n=parseInt(e,10),i=this.fileTimeline.positionInformation(n-1),r=this.fileTimeline.moveToPosition(n);if(d().isString(r))this._setWithHighlight(r,i),this._drawPositionInformation(n),this.hasPlayOnDrag&&this._onStartPlay();else{var a=this.fileTimeline.timelineState().nextFrame;this.loadingFrame||this._loadFileState(a),d().delay((function(){return t._playAtPosition(e)}),200)}}},$h._initTimeline=function(e,t){this.container.find("#change-player-position").attr("max",t).attr("min",e).val(e)},$h._setTimelinePosition=function(e){this.container.find("#change-player-position").val(e),this._drawPositionInformation(e)},$h._drawPositionInformation=function(e){if(this.fileTimeline){var t=e?this.fileTimeline.positionInformation(e):this.fileTimeline.currentPositionInformation(),n=Gh(t?{userInformation:t.modifiedBy,dateTime:(0,m.yU)(t.modified)}:{});this.container.find(".change-player-position-information").empty().append(n)}},$h._onPausePlay=function(){if(this.container){var e=this.container.find(".change-player-navigation-play");e.addClass("ss-play"),e.removeClass("ss-pause"),d().isNumber(this.playerInterval)&&clearInterval(this.playerInterval),this.playerInterval=void 0,this.playing=!1,this.loadingFrame=!1}},$h._getAndStoreFileName=function(e){e&&(this.filename=e);var t=i.Z.ide.panels.focus&&i.Z.ide.panels.focus.activeTab();t&&!this.filename&&("tree"===t.extensionName&&(this.filename=t.filename,N.I_.set(Kh,this.filename)));this.filename||(this.filename=N.I_.get(Kh)),this.filename&&!i.Z.currentProject.exists(this.filename)&&(this.filename=null)},$h._closeConnection=function(){this.charonClientMetadata&&(this.charonClientMetadata.close(),this.charonClientMetadata=void 0)},$h._restoreConnection=function(){var e=this;this.charonClientMetadata||window.createCharonClient({uri:Qi.Z.get("charon")}).subscribe({onSubscribe:function(e){e.request(Number.MAX_SAFE_INTEGER)},onNext:function(t){var n=t.error,i=t.clientData;n?(e.charonClientMetadata=void 0,k.Z.error(n)):i&&(e.charonClientMetadata=i)}})},$h._closeClient=function(){this.charonClientMetadata&&(this._closeConnection(),this.fileTimeline=void 0,this.playing=void 0,this.filename=void 0,this.metadataState=void 0)},$h._loadFileMetadata=function(){var e=this;this.filename&&(this.container.find("#change-player-file-name").text(this.filename),this.container.find("#change-player-file").showFProgress("Loading file state")),this.charonClientMetadata?(this._onPausePlay(),this._loadFileInitialState()):window.createCharonClient({uri:Qi.Z.get("charon")}).subscribe({onSubscribe:function(e){e.request(Number.MAX_SAFE_INTEGER)},onNext:function(t){var n=t.error,i=t.clientData;e.loadingFrame=!1,n?(e.charonClientMetadata=void 0,k.Z.error(n)):i&&(e.charonClientMetadata=i,!e.metadataState&&e.filename&&e._loadFileInitialState())}})},$h.activate=function(){if(!this.container){var e=new Error("No permission");return e.close=!0,Promise.reject(e)}},$h.afterActivate=function(){!this._editor&&this.filename&&this._loadFileMetadata()},$h._getSession=function(){return(0,Gt.p)()},$h._loadFileInitialState=function(){var e=this;if(this.charonClientMetadata){var t=this.charonClientMetadata.interface,n=this.charonClientMetadata.client,r=new t.InitialStateRequest;r.setProjectId(i.Z.currentProject.assignmentProjectId),r.setPath(this.filename),this.container.find(".player-errors").addClass("hide");var a=this.charonClientMetadata.metadataConverter(this._getSession());n.initialState(r,a).subscribe({onComplete:function(t){return e._onInitialStateSubscribeComplete(t)},onError:function(t){return e._onInitialStateSubscribeError(t)}})}},$h._onInitialStateSubscribeError=function(e){this._editor&&(this._editor.dispose(),this._editor=void 0);var t=this.container.find(".player-errors");t.removeClass("hide").empty(),t.append(Vh({fileName:this.filename,errorCode:e.source.message})),this.container.find("#change-player-file").completeFProgress()},$h._onInitialStateSubscribeComplete=function(e){var t=e.toObject();this._model&&this._model.dispose(),this._model=new B.yO(t.startContent,void 0,this.filename),this.metadataState=t,this.fileTimeline=new Yh(t.startVersion,t.endVersion,t.step,t.startContent),this._initTimeline(t.startVersion,t.endVersion),this._initEditor(),this.container.find("#change-player-file").completeFProgress(),this._loadFileState(0)},$h._onLoadFileStateComplete=function(e,t,n,i){e=d().sortBy(e,[function(e){return e.version}]);for(var r=t.content,a=new Array(i+1),s=e.length-1;s>=0;s--){var o=e[s];if(!o)break;a[o.version===n*i+i?i:o.version%i]=new Qh(String(r),new Date(o.modified.seconds),o.modifiedBy);var c=d().map(o.changesList,(function(e){return e.insert?{p:e.insert.position,i:e.insert.insert}:{p:e.pb_delete.position,d:e.pb_delete.pb_delete}}));r=Hh.Z.apply(r,c)}var l=new Jh(n,a);this.fileTimeline.addFrame(n,l),this.loadingFrame=!1,this._drawPositionInformation()},$h._loadFileState=function(e){var t=this;if(this.charonClientMetadata){var n,r=this.charonClientMetadata.interface,a=this.charonClientMetadata.client,s=new r.LoadStatesRequest;s.setProjectId(i.Z.currentProject.assignmentProjectId),s.setPath(this.filename),s.setOffset(e||0);var o=[],c=this.metadataState.step,l=this.charonClientMetadata.metadataConverter(this._getSession());a.loadStates(s,l).subscribe({onSubscribe:function(e){t.loadingFrame=!0,e.request(Number.MAX_SAFE_INTEGER)},onComplete:function(){t._onLoadFileStateComplete(o,n,e,c)},onNext:function(e){var t=e.toObject(),i=t.log,r=t.snapshot;r?n=r:i&&o.push(i)},onError:function(e){k.Z.error(e),t.loadingFrame=!1}})}},$h._initEditor=function(){this._editor||(this._editor=new B.ZP(l()(document.getElementById("change-player-file")),this._model,{lineNumbers:!0,readOnly:!0,ariaLabel:"Code Playback",contextmenu:!0})),this._editor.setModel(this._model)},$h.deactivate=function(){this._onPausePlay()},$h.close=function(){this._onPausePlay(),this._closeClient(),this._handlers&&this._handlers.forEach((function(e){return y.Z.unsubscribe(e)})),this._handlers=[],this._model&&this._model.dispose(),this.closed=!0};const em=Xh;i.Z.register({info:qh,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",em);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const tm=JSON.parse('{"name":"stack-info","description":"Stack information","codio":{"global":true,"noFile":true,"title":"Stack information","urls":"stack-info"}}');var nm=f().compile('<div>\n  <section>\n    <h2>Stack: <small class="text-stack-name">loading information...</small></h2>\n    <p class="short-description"></p>\n  </section>\n  <section>\n    <div class="long-description rendered-markdown"></div>\n  </section>\n</div>\n'),im=function e(t){if(!(this instanceof e))return new e(t);this.container=t;var n=l()(nm());this.container.append(n),this._fetchInformation()},rm=im.prototype;rm._fetchInformation=function(){var e=i.Z.currentProject,t=this;e&&b.ZP.StacksManager.getByVersionId(e.stackVersionId).then((function(e){t.render(e)})).catch((function(e){t.render({name:e,shortDescription:"",longDescription:""})}))},rm.render=function(e){if(e){this.container.find(".text-stack-name").text(e.name),this.container.find(".short-description").text(e.shortDescription);var t=this.container.find(".long-description");this._toHtml(e.longDescription).then((function(e){t.html(e)}))}},rm._toHtml=function(e){return m.ZP.markdown.render(e,{breaks:!0,sanitize:!0,allowedTags:"iframe|br",smartLists:!0}).catch((function(e){console.error(e)}))},rm.activate=function(){this._fetchInformation()},rm.deactivate=function(){},rm.close=function(){};const am=im;i.Z.register({info:tm,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",am);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const sm=JSON.parse('{"name":"stack-create","description":"Create Stack","codio":{}}');var om=n(98296),cm=n.n(om);function lm(){return!!(Math.ceil(2*Math.random())-1)}function um(){for(var e=["html","css","javascript","c++","asp.net","java","flex","drupal","joomla","mssql","apollo","php"],t=[],n=0;n<5;n++){var i=Math.ceil(Math.random()*(e.length-1));t.push(e.splice(i,1)[0])}return t}function dm(){for(var e=Math.ceil(15*Math.random()),t="",n=0;n<e;n++)t+="changelog number "+n+"* Source: [https://github.com/h5bp/html5-boilerplate](https://github.com/h5bp/html5-boilerplate)\n";return t}function pm(){for(var e=Math.ceil(15*Math.random())+1,t=[],n=1;n<e;n++){var i={id:m.ZP.GUID(),project_id:m.ZP.GUID(1),version:lm()?"0.0."+n:null,description:dm(),state:lm()?"READY":"processing",errorCode:"error code",timestamp:(new Date).getTime()-1e10+2592e5*n,installCount:Math.ceil(1e3*Math.random()),usage:Math.ceil(100*Math.random())};t.push(i)}return t}function fm(){var e="stack-"+m.ZP.GUID(1),t={id:m.ZP.GUID(),name:e,isPrivate:lm(),slug:e,shortDescription:m.ZP.GUID(),longDescription:"# [HTML5 Boilerplate](http://html5boilerplate.com) \nHTML5 Boilerplate is a professional front-end template for building fast, \nrobust, and adaptable web apps or sites. This project is the product of many years of iterative development and combined\n community knowledge. It does not impose a specific development philosophy or\n framework, so you are free to architect your code in the way that you want.\n * Source: [https://github.com/h5bp/html5-boilerplate](https://github.com/h5bp/html5-boilerplate)\n * Homepage: [http://html5boilerplate.com](http://html5boilerplate.com)\n * Twitter: [@h5bp](http://twitter.com/h5bp)",tags:um(),imageUrl:"",versions:pm(),ownerInfo:{id:m.ZP.GUID(),name:"name-"+m.ZP.GUID(1),slug:"slug-"+m.ZP.GUID(1),type:lm()?"user":"organization"},isOwner:!0};return t.totalCount=function(e){for(var t=0,n=0;n<e.versions.length;n++)t+=e.versions[n].installCount;return t}(t),t.ready=hm(t),t}function hm(e){return!!d().find(e.versions,{state:"READY"})}function mm(e){return!!d().find(e.versions,(function(e){return"READY"!==e.state&&"ERROR"!==e.state}))}var gm={};function vm(e,t){b.ZP.StacksManager.getById(t).then((function(n){mm(n)?d().delay(vm.bind(null,e,t),2e3):e.resolve(n)}),(function(t){e.reject(t)}))}const bm={getStack:fm,getStacks:function(e){for(var t=e||Math.ceil(150*Math.random()),n=[],i=0;i<t;i++)n.push(fm());return n},isStackReady:hm,canCreateStacks:function(){return!i.Z.currentUser.isAnonymous()},getVersionStr:function(e){return e.version||cm()(e.timestamp).format("Do MMMM YYYY")},waitForStackReady:function(e){if(gm[e])return gm[e].promise;var t=m.ZP.promise.deferred();return vm(t,e),t.promise.finally((function(){gm[e]=null})),gm[e]=t,t.promise},isVersionBuildInProgress:mm,isLastBuildFailed:function(e){var t=e.versions;return t.length>1&&"ERROR"===t[t.length-1].state}};n(25818);var ym=f().compile('<form id="stack-create" action="/" method="post">\n\n  <div class="centered new-stack-info">\n    <p>Current stack</p>\n    <p><strong>{{stackInfo.name}}</strong>({{stackInfo.version}})</p>\n\n    <p>Please select one of the following</p>\n\n    <fieldset class="radio stack-create-flag">\n      <label for="new-version">\n        <input id="new-version" type="radio" name="create-type" value="new-version">\n        <span>New Stack Version</span>\n      </label>\n\n      <label for="new-stack">\n        <input id="new-stack" type="radio" name="create-type" value="new-stack" checked>\n        <span>New Stack</span>\n      </label>\n\n    </fieldset>\n  </div>\n\n  <div class="new-stack-version hide">\n    {{#if canPublish}}\n    <p class="centered">Create a new version of the assignment project\'s stack.</p>\n    <fieldset>\n      <label for="stack-changelog">CHANGELOG</label>\n      <textarea class="form-textarea" id="stack-changelog" name="stack-changelog" placeholder="Short description of what has changed"></textarea>\n    </fieldset>\n    {{/if}}\n    {{#unless canPublish}}\n    <p>You are not able to create a new version of the current stack as you do not have permissions. If someone within your organization owns this stack then please ask them to make your Organization the owner. If it is a Codio certified stack then please select the New Stack option on the right.</p>\n    {{/unless}}\n  </div>\n\n  <div class="new-stack">\n    <p class="centered">Create a new Stack from the assignment project\'s current stack configuration.</p>\n    <fieldset>\n      <label for="stack-name">New Stack Name</label>\n      <input type="text" name="stackName" id="stack-name" required autofocus placeholder="Your stack name" class="input-xlarge" maxlength="60">\n    </fieldset>\n    <fieldset class="radio stack-public-flag">\n      <label for="stack-public">\n        <input id="stack-public" type="radio" name="public" value="public">\n        <span><i class="ss-icon">unlocked</i> Public</span>\n      </label>\n\n      <label for="stack-private">\n        <input id="stack-private" type="radio" name="public" value="private" checked>\n        <span><i class="ss-icon">locked</i> Private</span>\n      </label>\n    </fieldset>\n    <fieldset class="stack-owners">\n      <label for="owner">Owner</label>\n      <select class="select-stack-owner" name="owner" id="owner">\n        <option value="__me__" selected="selected">My account ({{username}})</option>\n        <optgroup label="Your Organizations">\n          {{#each organizations}}\n          <option value="{{id}}">{{details.name}}</option>\n          {{/each}}\n        </optgroup>\n      </select>\n    </fieldset>\n  </div>\n\n  <div class="buildingMessage-new-stack hide">\n    <strong>Stack build in progress.</strong>\n    You can close the window. Your stack will appear under the \'<a href="javascript:void(0)">My Stacks</a>\' tab in a few minutes.\n  </div>\n\n  <div class="buildingMessage-new-version hide">\n    <strong>Stack build in progress.</strong>\n    You can close the window. Your stack will appear under the \'<a href="javascript:void(0)" class="new-version-title">My Stacks</a>\' tab in a few minutes.\n  </div>\n\n</form>\n'),wm={},_m=null,km=null,Pm=null,Zm=null;function xm(e){var t=e.currentStack,n=i.Z.currentProject.stackVersionId,r=function(e,t){if(e.isOwner)return!0;if("TEACHER"===i.Z.currentUser.get("details").get("type")&&"ORGANIZATION"===e.ownerInfo.type){var n=d().find(t,(function(t){return t.id===e.ownerInfo.id}));return n&&n.owner}return!1}(t,e.organizations),a=d().find(t.versions,(function(e){return e.id===n})),s={name:t.name,version:a.version},o=l().extend(e,{canPublish:r,stackInfo:s,username:e.user.name()});return km=o,l()(ym(o))}wm.showDialog=function(e,t){_m&&wm.closeDialog();var n=xm(e);(_m=new R.Z({title:"Create Stack from current Project",keyboard:!1,width:400,content:n,onClose:function(){_m&&(_m=null)},buttons:[{title:"Create",onClick:function(){wm.validate()&&t(!0)},type:1},{title:"Close",onClick:function(){t(!1)}}]})).content().find(".buildingMessage-new-stack a").click((function(){location.assign("/home/stacks")})),_m.content().find(".buildingMessage-new-version a").click((function(){Pm&&location.assign("/home/stacks/"+Pm.id)})),_m.content().find('input[name="create-type"]').click((function(){"new-version"===l()(this).val()?(_m.content().find(".new-stack-version").removeClass("hide"),_m.content().find(".new-stack").addClass("hide")):(_m.content().find(".new-stack-version").addClass("hide"),_m.content().find(".new-stack").removeClass("hide"))})),y.Z.on(_m.content().closest(".modal-scrollable"),"keydown",(function(e){27===(e.which||e.keyCode)&&wm.closeDialog()})),e.buildPromise&&(wm.disableDialog(),wm.showBuildingMessage(Zm,Pm),e.buildPromise.then((function(){wm.hideBuildingMessage(),wm.enableDialog()})))},wm.validate=function(){return"new-stack"===_m.content().find('input[name="create-type"]:checked').val()?wm.validateStackName():km.canPublish},wm.getRequestType=function(){return _m.content().find('input[name="create-type"]:checked').val()},wm.getRequestData=function(e){if("new-version"===wm.getRequestType())return{stackId:km.currentStack.id,source:i.Z.currentProject.guid,description:_m.content().find("#stack-changelog").val(),version:km.currentStack.versions.length+1+"",updateProjectStack:e};var t=wm.getStackName(),n=_m.content().find('input[name="public"]:checked').val(),r=_m.content().find("#owner").val(),a="private"===n,s={name:t,source:i.Z.currentProject.guid,shortDescription:t,isPrivate:a,updateProjectStack:e};return a||(s.longDescription=t,s.tags=[t]),"__me__"!==r&&(s.owner=r),s},wm.hideBuildingMessage=function(){_m&&(_m.content().find(".buildingMessage-"+Zm).addClass("hide"),Pm=null,Zm=null)},wm.showBuildingMessage=function(e,t){_m&&(Pm=t,Zm=e,_m.content().find(".buildingMessage-"+e).removeClass("hide"),_m.preventClosing(!1),_m.buttons()[1].enable())},wm.disableDialog=function(){_m&&(_m.preventClosing(!0),_m.buttons()[0].disable("Creating...","loading"),_m.buttons()[1].disable(),_m.content().find(":input").prop("disabled",!0))},wm.disableActions=function(){_m&&(_m.preventClosing(!0),_m.buttons()[0].disable("Working...","loading"))},wm.enableActions=function(){_m&&(_m.preventClosing(!1),_m.buttons()[0].enable(!0))},wm.enableDialog=function(){if(_m){_m.preventClosing(!1);var e=_m.content();_m.buttons()[0].enable(!0),_m.buttons()[1].enable(),e.find(":input").prop("disabled",!1)}},wm.closeDialog=function(){_m&&_m.close()},wm.validateStackName=function(){if(_m){var e=_m.content().find("[name=stackName]"),t=e.val();return 0===t.length?(m.ZP.addErrorToInput(e,"Name cannot be empty"),!1):!(t.length>60)||(m.ZP.addErrorToInput(e,"Name is too long and cannot be more than 60 characters"),!1)}return!1},wm.getStackName=function(){return _m?_m.content().find("[name=stackName]").val():null},wm.showWarning=function(e){if(_m){var t=_m.content().find("input[name=stackName]");m.ZP.addErrorToInput(t,e)}};const Cm=wm;var Sm=null;function Em(){Cm.closeDialog()}function Im(e){var t,n=Cm.getRequestType();t="new-version"===n?b.ZP.StacksManager.publishVersion(Cm.getRequestData(e)):b.ZP.StacksManager.create(Cm.getRequestData(e)),Cm.disableDialog(),t.then((function(e){return Cm.showBuildingMessage(n,e),Sm=function(e){return bm.waitForStackReady(e.id).then((function(){if(bm.isLastBuildFailed(e)){var t='<a href="/home/stacks/'+e.id+'">dashboard</a>';k.Z.error("Stack build failed. Please check information in "+t)}return e}))}(e),Sm})).then((function(){Em()})).catch((function(e){var t=e.message;d().includes(t,"duplicate key error")&&(t="Stack name already exists"),k.Z.error(t)})).finally((function(){Sm=null,Cm.hideBuildingMessage(),Cm.enableDialog()}))}y.Z.subscribe("command:stack-create:open",(function(){var e;Promise.all([(e=i.Z.currentProject,b.ZP.StacksManager.getByVersionId(e.stackVersionId)),b.ZP.OrganizationManager.getMyOrganizations()]).then((function(e){var t=(0,a.Z)(e,2);!function(e,t){Cm.showDialog({projectName:i.Z.currentProject.name,currentStack:e,organizations:t,user:i.Z.currentUser,buildPromise:Sm},(function(e){if(!e)return Em();!function(e){var t=R.Z.showConfirm({title:"Change stack confirmation",captcha:!1,doNotCloseOpened:!0,buttons:[{title:"YES",type:1,onClick:function(){t&&t.close(),e(!0)}},{title:"NO",onClick:function(){t&&t.close(),e(!1)}}],description:["Would you like to switch the project to new stack version? ","Updating or changing the stack will result in the removal ","of all your manual changes outside of the project directory. ","Your project files will stay untouched."].join("")})}(Im)}))}(t[0],t[1])})).catch((function(e){var t=e.message;return k.Z.error(t)}))}));const Tm={};var jm={};jm.info=sm,jm.hotkeys={},jm.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tm);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(jm);const Am=JSON.parse('{"name":"view-code","description":"code editor","codio":{"view":"code"}}');var Om={};Om.info=Am,Om.get=function(){return i.Z.loadModule((function(e){Promise.all([n.e(2988),n.e(4943),n.e(8980)]).then(function(){var t=[n(88980)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.Z.register(Om);const Dm=JSON.parse('{"name":"view-code-breakpoints","description":"code editor with breakpoints","codio":{"view":"code"}}');var Nm={};Nm.info=Dm,Nm.get=function(){return i.Z.loadModule((function(e){Promise.all([n.e(2988),n.e(4943),n.e(6098)]).then(function(){var t=[n(46098)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.Z.register(Nm);const Mm=JSON.parse('{"name":"view-markdown-code","description":"MarkDown code editor","codio":{"fileExt":["md","markdown"],"view":["preview","code","splitview"]}}');var Fm={};Fm.info=Mm,Fm.get=function(){return i.Z.loadModule((function(e){Promise.all([n.e(2988),n.e(4943),n.e(57)]).then(function(){var t=[n(80057)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.Z.register(Fm);var Rm=b.ZP.ProjectManager,Lm=function(){};function Um(){return!i.Z.currentUser.isAnonymous()&&"OWNER"===i.Z.currentProject.access.control}function Bm(e,t){return d().isUndefined(t)&&(t=[]),"git "+e+" "+t.join(" ")}function qm(e){var t;return e?(/[^a-zA-Z-0-9-_\.]+/gi.test(e)||-1!==e.indexOf(".")&&/(^\.)|(\.$)+/gi.test(e))&&(t="Branch name contains invalid characters"):t="Branch name cannot be empty",t}var Hm=Lm.prototype;Hm.init=function(){return this.executeBackground("init")},Hm.pull=function(e){return this.execute("pull",e)},Hm.checkout=function(e){return this.executeCheckout(e)},Hm.createBranch=function(){var e=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=qm(t))){e.next=3;break}throw new Error(n);case 3:return e.abrupt("return",this.checkout(["-b",t]));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Hm.deleteBranch=function(e){return this.branch(["-D",e])},Hm.switchBranch=function(e){return this.checkout([e])},Hm.executeCheckout=function(e){return this.execute("checkout",e)},Hm.branch=function(e){return this.execute("branch",e)},Hm.push=function(e){return this.execute("push",e)},Hm.executeBackground=function(e,t,n){return this.command(Bm(e,t),n)},Hm.execute=function(e,t){if(!Um())return Promise.reject(new Error("No access"));(0,Fs.Z)(Bm(e,t),"git")},Hm.command=function(e,t){if(!Um())return Promise.reject(new Error("No access"));var n=i.Z.currentProject,r=n.owner.name,a=n.pathName;return Rm.git(r,a,e,t)},Hm.getGitCredentialsList=function(){if(!Um())return Promise.reject(new Error("No access"));var e=i.Z.currentProject,t=i.Z.currentUser.name(),n=e.pathName;return Rm.getGitCredentialsList(t,n)},Hm.getBranchesList=function(){return Promise.resolve({output:i.Z.currentProject.branches})},Hm.getRemotesList=function(){return this.executeBackground("remote",["-v"]).then((function(e){var t=e.output;e={remotes:[]};var n={},i=[];return l().each(t,(function(e,t){var r=t.match(/^([^\s]*)\s([^\s]*)/);if(null!==r){var a={name:r[1],link:r[2]};d().has(n,a.name)||(i.push(a),n[a.name]=1)}})),i}))},Hm.deleteRemote=function(e,t){return this.executeBackground("remote",["rm",e],t)},Hm.addRemote=function(e,t,n){return this.executeBackground("remote",["add",e,t],n)},Hm.renameRemote=function(e,t,n){return this.executeBackground("remote",["rename",e,t],n)},Hm.setRemoteUrl=function(e,t,n){return this.executeBackground("remote",["set-url",e,t],n)},Hm.close=function(){this.container.remove()};const Wm=Lm;var zm=null,Gm=f().compile('<form action="/" method="post" class="form-horizontal">\n  <p>\n    Git is preinstalled on all Codio Boxes so you can access Git from the\n    Terminal (<code>Tools > Terminal</code>).\n    If you are looking for a friendly way of using Git, try using\n    <a href="https://github.com/FredrikNoren/ungit" target="_blank">Ungit</a>,\n    which is a great Git UI you can run in Codio. See <a href="https://intercom.help/codio/general-questions/ungit" target="_blank">Using Ungit in Codio</a>.\n  </p>\n  <label for="branchName">New branch name</label>\n  <input type="text" name="branchName" class="ac-input-large" value="" placeholder="New branch name..." autofocus required  maxlength="80" />\n\n</form>\n'),Vm=f().compile('<form action="/" method="post">\n  <p>\n    Git is preinstalled on all Codio Boxes so you can access Git from the\n    Terminal (<code>Tools > Terminal</code>).\n    If you are looking for a friendly way of using Git, try using\n    <a href="https://github.com/FredrikNoren/ungit" target="_blank">Ungit</a>,\n    which is a great Git UI you can run in Codio. See <a href="https://intercom.help/codio/general-questions/ungit" target="_blank">Using Ungit in Codio</a>.\n  </p>\n\n  <label for="branchName">Branch:</label>\n  <select name="branchName" class="select">\n    {{#each branches}}\n    <option value="{{this}}">{{this}}</option>\n    {{/each}}\n  </select>\n\n</form>\n'),Km=f().compile('<form action="/" method="post">\n  <p>\n    Git is preinstalled on all Codio Boxes so you can access Git\n    from the Terminal (<code>Tools > Terminal</code>).\n    If you are looking for a friendly way of using Git, try using\n    <a href="https://github.com/FredrikNoren/ungit" target="_blank">Ungit</a>,\n    which is a great Git UI you can run in Codio. See <a href="https://intercom.help/codio/general-questions/ungit" target="_blank">Using Ungit in Codio</a>.\n  </p>\n  <label for="branchName">Branch:</label>\n  <select name="branchName" class="select">\n    {{#each branches}}\n    <option value="{{this}}"{{#equals ../currentBranch this}} selected="selected"{{/equals}}>{{this}}</option>\n    {{/each}}\n  </select>\n</form>\n');function Ym(e,t,n){var r,a,s,o;switch(zm&&zm.close(),e){case"delete-branch":r="Delete",a="Delete Branch",s="Deleting...",o=t.deleteBranch.bind(t);break;case"switch-branch":r="Switch",a="Switch Branch",s="Switching...",o=t.switchBranch.bind(t);break;case"create-branch":r="Create",a="New Branch",s="Creating...",o=t.createBranch.bind(t)}var c=function(e,t){if(t&&t.output){var n=t.output,r=i.Z.currentProject.currentBranch;l().each(n,(function(e,t){n[e]=t.replace(/^[\s\*]*/,"")})),"delete-branch"===e&&d().forEach([r],(function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1)})),t={branches:n,currentBranch:r}}switch(e){case"delete-branch":return Vm(t);case"switch-branch":return Km(t);case"create-branch":return Gm()}}(e,n);zm=new R.Z({title:a,icon:"fork",content:c,onClose:function(){zm=null},buttons:[{title:r,onClick:function(){var e=zm.buttons()[0].element;e.disableButton(s,"loading"),o(zm?zm.content().find("[name=branchName]").val():null).then((function(){return Jm()})).catch((function(t){k.Z.error(t.message),e.enableButton()}))},type:1},{title:"Cancel",onClick:Jm}]})}function Jm(){zm&&zm.close()}const Qm={createBranchesDialog:Ym.bind(null,"create-branch"),switchBranchesDialog:Ym.bind(null,"switch-branch"),deleteBranchesDialog:Ym.bind(null,"delete-branch")},Xm='<div class="git-remote-item" data-remote-name="{{name}}" data-remote-link="{{link}}" data-remote-user="{{user}}" data-remote-pass="{{pass}}">\n  <div class="git-remote-item-view">\n    <div class="git-remote-item-data">\n      <span class="git-remote-text-name">{{name}}</span>\n      &nbsp;\n      <code class="git-remote-text-link">{{link}}</code>\n    </div>\n    <div class="btn-group">\n      <button type="button" class="btn git-remote-btn" data-action="edit">\n        <span class="iconify-inline" data-icon="@codio:mdi:pencil-outline"></span>\n      </button>\n      <button type="button" class="btn git-remote-btn" data-action="remove" aria-label="Delete Remote">\n        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n      </button>\n    </div>\n  </div>\n\n  <div class="git-remote-item-edit hide">\n    <div class="git-remote-item-data">\n      <label for="name">Name</label>\n      <input name="name" type="text" class="git-remote-name" placeholder="origin" autofocus required value="{{name}}">\n\n      <label for="link">URL</label>\n      <input name="link" type="text" class="git-remote-link" placeholder="git@github.com:org/repo.git" required value="{{link}}">\n    </div>\n\n    <div class="btn-group">\n      <button type="button" class="btn git-remote-btn" data-action="save">\n        <b>Save </b><span class="iconify-inline" data-icon="@codio:mdi:floppy"></span>\n      </button>\n      <button type="button" class="btn git-remote-btn" data-action="remove" aria-label="Delete Remote">\n        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n      </button>\n    </div>\n  </div>\n</div>\n';var $m=null,eg=null,tg=f().compile('<p>\n  Git is preinstalled on all Codio Boxes so you can access Git from\n  the Terminal (<code>Tools > Terminal</code>).\n  If you are looking for a friendly way of using Git, try\n  using <a href="https://github.com/FredrikNoren/ungit" target="_blank">Ungit</a>,\n  which is a great Git UI you can run in Codio. See <a href="https://intercom.help/codio/general-questions/ungit" target="_blank">Using Ungit in Codio</a>.\n</p>\n<div class="git-remote-items">\n  {{#each this}}\n  {{> remote-item}}\n  {{/each}}\n</div>\n'),ng=f().compile(Xm);function ig(){!function(e){var t=l()(ng({name:"",link:""}));sg(t),t.find("button").click(rg),e.append(t)}($m.dialogContent.find(".git-remote-items"))}function rg(){var e=l()(this),t=e.data("action"),n=$m.dialogContent.find(".git-remote-items"),i=e.closest(".git-remote-item"),r={name:i.data("remote-name"),link:i.data("remote-link")};switch(t){case"save":!function(e,t,n){var i=function(e){var t=e.find("input").serializeArray(),n={};return l().each(t,(function(e,t){n[t.name]=t.value})),n}(e);i.name=l().trim(i.name),i.link=l().trim(i.link);var r=i.name!==n.name,a=i.link!==n.link;if(!r&&!a)return void og(e);var s=function(e,t,n){var i=t.find(".git-remote-name"),r=t.find(".git-remote-link");if(d().isEmpty(e.name))return m.ZP.addErrorToInput(i,"Should not be empty"),!1;var a=/\s/;if(-1!==e.name.search(a))return m.ZP.addErrorToInput(i,"Cannot contain spaces"),!1;var s=!0;if(n.children().each((function(n,i){i!==t[0]&&(l()(i).data("remote-name")===e.name&&(s=!1))})),!s)return m.ZP.addErrorToInput(i,"The remote with this name already exists"),!1;if(d().isEmpty(e.link))return m.ZP.addErrorToInput(r,"Should not be empty"),!1;if(-1!==e.link.search(a))return m.ZP.addErrorToInput(r,"Cannot contain spaces"),!1;return!0}(i,e,t);if(!s)return;var o,c={username:i.user,password:i.pass};if(n.name)if(r)if(a){var u={};d().isUndefined(n)||(u.username=n.user,u.password=n.pass),o=eg.deleteRemote(n.name,u).then((function(){return eg.addRemote(i.name,i.link,c)}))}else o=eg.renameRemote(n.name,i.name,c);else a&&(o=eg.setRemoteUrl(n.name,i.link,c));else o=eg.addRemote(i.name,i.link,c);o&&o.then((function(){!function(e,t){e.find(".git-remote-text-name").html(m.ZP.safeHtml(t.name)),e.find(".git-remote-text-link").html(m.ZP.safeHtml(t.link)),e.find(".git-remote-name").val(t.name),e.find(".git-remote-link").val(t.link),e.data("remote-name",t.name),e.data("remote-link",t.link)}(e,i),og(e)})).catch((function(e){cg(e)}))}(i,n,r);break;case"remove":i.remove(),r.name&&eg.deleteRemote(r.name).catch((function(e){cg(e)}));break;case"edit":sg(i)}}function ag(e,t){var n=e?".git-remote-item-edit":".git-remote-item-view",i=e?".git-remote-item-view":".git-remote-item-edit";t.children(i).addClass("hide"),t.children(n).removeClass("hide")}var sg=ag.bind(null,!0),og=ag.bind(null,!1);function cg(e){e=d().isUndefined(e.message)?e:e.message,k.Z.error(e)}ho.Z.registerPartial("remote-item",Xm);const lg={showRemotesList:function(e,t){eg=t,$m&&$m.close();var n=l()(tg(e));n.find("button").click(rg),$m=new R.Z({title:"Git Remotes",icon:"uploadcloud",width:550,onClose:function(){$m=null},buttons:[{title:"Add Remote",onClick:ig},{title:"Close",type:1,onClick:function(){return $m.close(R.Z.IDCANCEL)}}],content:n})}},ug=JSON.parse('{"name":"git","description":"Git","codio":{"title":"git","global":true,"noFile":true,"urls":"git"}}'),dg=JSON.parse('{"pull":{"desc":"Git: pull from origin"},"push":{"desc":"Git: push to origin"},"show-create-branch":{"desc":"Git: create a new branch"},"show-switch-branch":{"desc":"Git: switch between branches"},"show-delete-branch":{"desc":"Git: delete a branch"},"remotes-show":{"desc":"Git: show remotes"}}');var pg={};pg.info=ug,pg.settings={},pg.hotkeys=dg;var fg=new Wm;pg.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fg);case 1:case"end":return e.stop()}}),e)}))),y.Z.subscribe("command:git:pull",(function(){fg.pull(["origin"])})),y.Z.subscribe("command:git:push",(function(){fg.push(["origin"])})),y.Z.subscribe("command:git:show-create-branch",(function(){Qm.createBranchesDialog(fg)})),y.Z.subscribe("command:git:show-switch-branch",(function(){fg.getBranchesList().then((function(e){Qm.switchBranchesDialog(fg,e)}))})),y.Z.subscribe("command:git:show-delete-branch",(function(){fg.getBranchesList().then((function(e){Qm.deleteBranchesDialog(fg,e)}))})),y.Z.subscribe("command:git:remotes-show",(function e(){fg.getRemotesList().then((function(e){return fg.getGitCredentialsList().then((function(t){return d().each(e,(function(e){var n=t[e.link];d().isUndefined(n)||(e.user=n.user,e.pass=n.pass)})),e}))})).then((function(e){lg.showRemotesList(e,fg)})).catch((function(t){var n=t&&t.message?t.message:t;d().includes(n.toLowerCase(),"not a git repository")?R.Z.showConfirm({title:"Init git repository?",description:"Not a git repository. Would you like init it?",onClose:function(t){t&&fg.init().then(e)}}):k.Z.error(n)}))})),i.Z.register(pg);var hg=null,mg=f().compile('<form action="/" method="post">\n\n  <p>\n    Codio makes its easy for you to connect and work with your\n    remote servers, by providing a full-featured SSH command\n    line interface (CLI) right within your project. Use this dialog\n    to quickly connect to any server via SSH. Perfect for working with\n    your development server while you edit code.\n  </p>\n\n  <label class="hint hint-top" for="input-f-name">\n    Friendly name <i class="ss-icon">help</i>\n    <span class="hint-text">A friendly name or alias. Only required if you are saving this connection for later use.</span>\n  </label>\n  <input type="text" id="input-f-name" autofocus placeholder="a friendly name..." name="name">\n\n  <label class="hint hint-top" for="input-username">\n    Username <i class="ss-icon">help</i>\n    <span class="hint-text">The username to connect as.</span>\n  </label>\n  <input type="text" id="input-username" required placeholder="username..." name="username" data-error="Username is required">\n\n  <label class="hint hint-top" for="input-server">\n    Hostname <i class="ss-icon">help</i>\n    <span class="hint-text">Server name or IP address of your server</span>\n  </label>\n  <input type="text" id="input-server" required placeholder="hostname..." name="host" data-error="Hostname is required">\n\n  <label class="hint hint-top" for="input-port">\n    Port <small>(optional)</small>: <i class="ss-icon">help</i>\n    <span class="hint-text">The port number of your server. Leave blank to use the default</span>\n  </label>\n  <input type="text" id="input-port" placeholder="port number..." name="port">\n\n</form>\n')();const gg={show:function(){hg&&hg.close();var e=m.ZP.promise.deferred();function t(t){var n={name:l().trim(hg.content().find("[name=name]").val()),username:l().trim(hg.content().find("[name=username]").val()),host:l().trim(hg.content().find("[name=host]").val()),port:l().trim(hg.content().find("[name=port]").val())||22},i=_f.validateServer(n);return i.success?(e.resolve(n),hg.close(),t?_f.saveServer(!0,n):void 0):(l().each(i.errors,(function(e){var t=hg.content().find('[name="'+e+'"]'),n=!0===i.errors[e]?t.data().error:i.errors[e];m.ZP.addErrorToInput(t,n),t.focus()})),e.reject(new Error("connect failed. parameters are not valid")))}var n=[{title:"Connect",onClick:t,type:1},{title:"Cancel",onClick:function(){e.reject(new Error("connection canceled")),hg&&hg.close()}}];i.Z.currentUser.isAnonymous()||n.splice(1,0,{title:"Connect & Save",onClick:function(){t(!0)},type:1});var r=mg;return hg=new R.Z({title:"New Server Connection",icon:"connection",content:r,onClose:function(){hg=null},onHide:function(){e.reject(new Error("connection canceled"))},buttons:n}),y.Z.on(hg.content().find("form"),"keyup","input",(function(e){if(13===e.which)return t()})),e.promise}},vg=JSON.parse('{"name":"terminal","description":"SSH terminal","codio":{"global":true,"title":{"editor":"SSH Connections"},"urls":"terminal"}}'),bg=JSON.parse('{"font_size":{"default":14,"type":"int","desc":"Font size."},"theme":{"default":"dark","type":"string","values":{"light":"light","dark":"dark"},"desc":"Terminal theme."},"scrollback":{"default":3000,"type":"int","desc":"Number of lines available in the scroll history."}}'),yg=JSON.parse('{"show-connect-dialog":{"desc":"Quick Connect"},"show-connections-manager":{"desc":"Connections Manager"},"backend-connection":{"key":"Shift+Alt+T","desc":"Terminal. SSH connection to the box"}}');var wg={};wg.info=vg,wg.settings=bg,wg.hotkeys=yg,wg.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nh);case 1:case"end":return e.stop()}}),e)}))),y.Z.subscribe("command:terminal:show-connections-manager",(function(){i.Z.currentUser.isAnonymous()||i.Z.ide.open("terminal","editor")})),y.Z.subscribe("command:terminal:show-connect-dialog",(function(){i.Z.currentUser.isAnonymous()||gg.show().then((function(e){_f.openCliTab(e)})).catch((function(){}))})),y.Z.subscribe("command:terminal:backend-connection",(function(){i.Z.currentProject.isAdmin&&i.Z.ide.open("terminal","backend-"+(new Date).getTime(),{title:"Terminal",view:"backend"})})),i.Z.register(wg),n(23147);var _g={};_g.info=n(65670),_g.settings=n(62119),_g.hotkeys=n(61735),i.Z.register(_g);var kg=f().compile('<section class="preview-buttons">\n    <a href="javascript:void(0)" aria-label="Open in new browser tab" title="Open in new browser tab" class="preview-expand"><i class="ss-icon">navigate</i></a>\n    <a href="javascript:void(0)" aria-label="Reload preview" title="Reload preview" class="preview-refresh"><i class="ss-icon">sync</i></a>\n    <a href="javascript:void(0)" aria-label="Stop loading preview" title="Stop loading preview" class="preview-stop"><i class="ss-icon">close</i></a>\n    <a href="javascript:void(0)" class="preview-spinner"><i class="svg icon icon-spinner" /></a>\n</section>\n\n<section id="address-input">\n    <form action="/" method="post" class="address-form" onsubmit="return false;">\n        <input type="text" class="address" placeholder="Enter a URL to preview...">\n    </form>\n</section>\n')(),Pg=function(e,t){this.container=e,this.preview=t,this.fragment=l()(kg),this.container.prepend(this.fragment),this.addressField=this.fragment.find(".address"),this.addressForm=this.fragment.find(".address-form");var n=this.buttons=this.fragment.filter(".preview-buttons");y.Z.on(n,"click.preview",Sg.bind(this)),y.Z.on(this.addressForm,"submit",Cg.bind(this))},Zg=Pg.prototype;function xg(){this.addressField.val(this.addressField.data("url")),this.preview.refresh()}function Cg(){this.addressField.data("url",this.addressField.val()),this.preview.refresh()}function Sg(e){var t=l()(e.target).closest("a");t.hasClass("preview-stop")&&this.preview.stopLoading(),this.isEnabled&&(t.hasClass("preview-refresh")&&xg.call(this),t.hasClass("preview-expand")&&this.preview.expand())}Object.defineProperty(Zg,"address",{get:function(){return this.addressField.data("url")||""},set:function(e){this.addressField.val(e).data("url",e)}}),Zg.disable=function(){this.buttons.addClass("awaiting"),this.addressField.prop("disabled",!0),this.buttons.prop("disabled",!0),this.container.addClass("disabled"),this.isEnabled=!1},Zg.enable=function(){this.buttons.removeClass("awaiting"),this.addressField.prop("disabled",!1),this.buttons.prop("disabled",!1),this.container.removeClass("disabled"),this.isEnabled=!0},Zg.close=function(){y.Z.off(this.buttons,"click.preview"),y.Z.off(this.addressForm,"submit")},Zg.focusAddressBar=function(){this.addressField.focus()};const Eg=Pg;var Ig=n(72664),Tg=n(84346),jg=n(86190);function Ag(){var e=l()("#codio-preview-iframes");return 0===e.length&&(e=l()('<div id="codio-preview-iframes" class="codio-external-iframes"></div>').appendTo("body")),e}function Og(e,t){this.parent=e,this.policy=t,this.iframe=Dg(t).appendTo(Ag()),this.hide()}var Dg=function(e){var t=l()("<iframe>");if(e&&e.length){var n=d().map(e,(function(e){var t=e.name,n=e.allowlist;return"".concat(t," ").concat(n)})).join("; ");t.attr("allow",n)}return t},Ng=Og.prototype;function Mg(e){var t=l()(e._container).closest(".editor-size-mark"),n=(t=0===t.length?e.parent[0]:t[0]).getBoundingClientRect(),i={top:n.top,left:n.left,width:n.right-n.left,height:n.bottom-n.top};e.iframe.css({top:i.top,left:i.left,width:i.width,height:i.height})}Ng.src=function(e){var t=m.ZP.promise.deferred(),n=(this.iframe.attr("class")||"").split(/\s+/);this.iframe.remove();var i=this.iframe=Dg(this.policy).appendTo(Ag());d().each(n,(function(e){i.addClass(e)})),this.iframe.attr("src",e);var r=this;return r.refresh(),this.iframe.load((function(){r.refresh(),t.resolve()})),t.promise},Ng.hide=function(){this.removeClass("show")},Ng.show=function(){this.addClass("show")},Ng.focus=function(){this.iframe&&this.iframe.focus()},Ng.addClass=function(e){this.iframe.addClass(e)},Ng.removeClass=function(e){this.iframe.removeClass(e)},Ng.refresh=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.parent&&(this.parent.find(".preview-frame").is(":visible")?(Mg(this),this.show()):this.hide());case 1:case"end":return e.stop()}}),e,this)}))),Ng.clean=function(){this.iframe.remove(),this.parent=null};const Fg=Og;var Rg=n(44952),Lg=y.Z.create(n(29265)),Ug=n(68058).I_,Bg=n(44442).A,qg={},Hg=null;function Wg(){var e=Ig.Z.getCurrentFile(),t=e?m.ZP.path.parse(e).name:Ig.Z.getProjectIndexFile();t="Current File "+function(e){return e?"("+m.ZP.truncate(e,20)+")":""}(t=e?t:""),Lg.updatePreviewMenuCurrentFile({title:t})}function zg(e){var t=i.Z.currentProject;if(t){var n={guid:t.guid,runMode:e};b.ZP.ProjectManager.update(n).then(Gg)}}function Gg(){var e=qg.runMode();Lg.updatePreviewMenuRunP({onOff:{defaultValue:e===Tg.ZP.RUN_MODE_PREVIEW}}),Lg.updatePreviewMenuRunDP({onOff:{defaultValue:e===Tg.ZP.RUN_MODE_PREVIEW_DEPLOY}}),Lg.updatePreviewMenuRunD({onOff:{defaultValue:e===Tg.ZP.RUN_MODE_DEPLOY}}),Lg.updatePreviewMenuButton({title:["Preview","Deploy & Preview","Deploy"][e]}),Vg()}function Vg(){var e="Project index ("+m.ZP.truncate(Ig.Z.getProjectIndexFile(),20)+")";Lg.updatePreviewMenuProjectIndex({title:e})}qg.setPreviewInside=function(e){Ug.set("preview-new-window",!e),Lg.updatePreviewMenuInside({onOff:{defaultValue:e}}),Lg.updatePreviewMenuNewWindow({onOff:{defaultValue:!e}})},qg.isPreviewInside=function(){return!Ug.get("preview-new-window")},qg.setIndexDefault=function(e){Ug.set("preview-default-index",e),Lg.updatePreviewMenuIndex({onOff:{defaultValue:e}}),Lg.updatePreviewMenuCurrentFile({onOff:{defaultValue:!e}})},qg.isIndexDefault=function(){return Ug.get("preview-default-index")},qg.runMode=function(){var e=i.Z.currentProject,t=Tg.ZP.RUN_MODE_PREVIEW;return e&&!i.Z.currentUser.isAnonymous()&&e.isAdmin&&(t=e.runMode),t},y.Z.subscribe("command:preview:inside",qg.setPreviewInside.bind(null,!0)),y.Z.subscribe("command:preview:new-window",qg.setPreviewInside.bind(null,!1)),y.Z.subscribe("command:preview:project-index",qg.setIndexDefault.bind(null,!0)),y.Z.subscribe("command:preview:current-file",qg.setIndexDefault.bind(null,!1)),y.Z.subscribe("command:preview:run-mode:#mode",(function(e){var t;switch(e.mode){case"preview":t=Tg.ZP.RUN_MODE_PREVIEW;break;case"deploy-preview":t=Tg.ZP.RUN_MODE_PREVIEW_DEPLOY;break;case"deploy":t=Tg.ZP.RUN_MODE_DEPLOY}zg(t)})),y.Z.subscribe("tab:activated",Wg),y.Z.subscribe("tab:focus",Wg),y.Z.subscribe("tab:closed",Wg),y.Z.subscribe("panel:focus:change",Wg),y.Z.subscribe("deployment:targetsUpdated",function(e){return b.ZP.DeployManager.getProjectTargets(i.Z.currentProject.guid).then((function(t){d().isArray(t.targets)&&0!==t.targets.length?(Lg.updatePreviewMenuRunDP({disabled:!1}),Lg.updatePreviewMenuRunD({disabled:!1}),e&&Gg()):(zg(Tg.ZP.RUN_MODE_PREVIEW),Lg.updatePreviewMenuRunDP({disabled:!0}),Lg.updatePreviewMenuRunD({disabled:!0}))})).catch((function(e){var t=e.message;k.Z.error(t)}))}.bind(null,null)),y.Z.subscribe("project:open",(function(){qg.setPreviewInside(qg.isPreviewInside()),Lg.updatePreviewMenuInside({disabled:!1}),qg.setIndexDefault(qg.isIndexDefault())})),y.Z.subscribe("filetree:select:#file",(function(e){Hg=e.file})),y.Z.subscribe("command:preview:set-default-index",(function(){var e=v.Z.get("preview");if(!e||e[Tg.ZP.SETTINGS_INDEX]!==Hg){var t={plugin:Tg.ZP.EXT_NAME,key:Tg.ZP.SETTINGS_INDEX,value:Hg};Bg.execute("settings","update:project",t)}})),y.Z.subscribe("settings:changed",Vg);const Kg=qg;var Yg=n(68058).I_,Jg=n(44442).A,Qg={},Xg=f().compile('<form action="/" method="post" class="ac-form-horizontal">\n    <p>Because this project is private, we protect your code by requiring authentication when previewing. This is to avoid unwanted users seeing your previews outside of Codio.</p>\n    <p>You can enable <b>Allow Private Static Preview</b> for your project (available via \'Project>Settings’) if you do not wish to authenticate with your Codio username and password each time you preview. If you can\'t recall your Codio password, you can change it via \'Codio>Account\' menu item\n        See <a href="https://docs.codio.com/common/develop/ide/editing/preview.html#preview" target="_blank">Preview in a Codio tab or new browser tab</a> for more information on Allow Private Static Preview.</p>\n    <p>This only applies to code being previewed over the standard ports 80 and 443. Previewing via any other port will have no authentication, because the code is being served from your application server, which we have no control over.</p>\n</form>\n')();Qg.show=function(){var e=Yg.get("preview-warning-was-shown"),t=m.ZP.promise.deferred();if(i.Z.currentProject.isPrivate&&!e){Yg.set("preview-warning-was-shown",!0);var n=new R.Z({title:"Warning",content:Xg,buttons:[{title:"Continue",type:1,onClick:function(){return n.close(R.Z.IDCANCEL)}},{title:"Change password...",onClick:function(){return n.close(R.Z.IDOK)}}],onClose:function(e){e===R.Z.IDOK?(t.reject(new Error("preview go to change password")),Jg.execute("account","preferences",{show:"change-password"})):t.resolve()}});n.preventClosing(!0)}else t.resolve();return t.promise};const $g=Qg;var ev={};function tv(e,t){return function(e){return e||Ig.Z.getProjectIndex()?Promise.resolve():(Ig.Z.showIndexNotFound(),Promise.reject(new Error("no project index found")))}(e).then((function(){return!!t||$g.show()}))}ev.run=function(e,t){var n,i=Kg.isPreviewInside();i||(n=window.open("","_blank")),M.Z.saveAllAndWait().then((function(){tv(e,i).then((function(){e?Ig.Z.openPreview(i,e,t,n):Kg.isIndexDefault()?Ig.Z.openProjectIndex(i,void 0,n):Ig.Z.openPreview(i,Ig.Z.getCurrentFile(),void 0,n)})).catch((function(){}))}))},ev.getAddress=function(e,t,n){return e&&!n&&(n=Ig.Z.getDefaultAddress(t,e)),Rg.Z.interpolate(n)},ev.checkAddress=function(e){return Ig.Z.addrInPreviewDomain(e)&&Ig.Z.isDefaultPort(e)&&!Ig.Z.inWhiteList(e)?Promise.reject({showInfo:!0,address:e}):Promise.resolve(e)};const nv=ev;var iv=f().compile('<div class="preview-container {{#unless hideWarning}}warning{{/unless}}">\n    <section class="iframe-container">\n        <div class="preview-info">\n            <i class="icon icon-preview-menu-screen" />\n\n            <h4>Previewing server-side code.</h4>\n            <p>Codio provides very easy previewing options for both static content (HTML, CSS, JS) and dynamic content (PHP, Ruby, NodeJS, etc.). The Codio Preview menu lets you configure one-click shortcuts to do this. Please click on the link below for documentation.</p>\n\n            <h5><a href="https://docs.codio.com/common/develop/ide/editing/preview.html#preview" target="_blank">Preview Documentation</a></h5>\n\n            <h5>Web Servers</h5>\n            <p>Languages like PHP will require you to have a web server set up. If you have not yet done this, please refer to the <a href="https://docs.codio.com/common/develop/ide/boxes/installsw/install-software.html#installing-software-packages" target="_blank">Box Parts documentation</a>, where you will see how to install Apache or Nginx onto your Box. You can do all this from the <a href="https://docs.codio.com/common/develop/ide/boxes/terminal.html#terminal" target="_blank">Terminal</a>.</p>\n\n            <h5>Server-Side Applications</h5>\n            <p>Languages like Ruby and Node can run your application without the need for a web server, so you should treat this as Dynamic content when reading the <a href="https://docs.codio.com/common/develop/ide/editing/preview.html#preview" target="_blank">Preview Documentation</a>.\n\n            <p>If you require any further help, <a href="mailto:help@codio.com">just ask</a>.</p>\n        </div>\n        <div  class="preview-frame"></div>\n    </section>\n</div>\n'),rv={};rv[Tg.Pl]=nv;var av=document.location.protocol,sv=null,ov=[{name:"serial",allowlist:"*"},{name:"clipboard-read",allowlist:"*"},{name:"clipboard-write",allowlist:"*"},{name:"fullscreen",allowlist:"*"}],cv=function e(t,n,r,a,s){if(!(this instanceof e))return new e(t,n,r,a,s);s=s||{},this.eventHandlers=[],this.tab=s.tab;var o=s.noWarning;if("preview-url"===a&&(a="preview",void 0===(n=N.I_.get(Ig.Z.previewStorageLinkId(n)))))return Promise.reject(new Error("No preview filename"));var c=!0===o||N.nP.get("hide-preview-mixed-warning"),u=iv({hideWarning:c});this.ext=a,this.fragment=l()(u),this.frame=new Fg(this.fragment.find(".preview-frame").parent(),ov),this.frameContainer=this.fragment.find(".iframe-container"),this.filename=n,this.container=t,this.previewPanel=new Eg(this.fragment,this),this.extension=Ig.Z.findCompiledViewExtension(this.filename);var p=d().bind(this.eventHandlers.push,this.eventHandlers),f=d().debounce(this.adjust.bind(this),200);p(y.Z.subscribe("tab:activated:preview",f)),p(y.Z.subscribe("panel:size:change",f)),p(y.Z.subscribe("command:layout:save",f)),p(y.Z.subscribe("debug:panel_switched",f)),p(y.Z.subscribe("call:panelSwitched",f)),p(y.Z.subscribe("ide:fullscreen:#mode",uv.bind(null,this)));var h=this,m=this.frameContainer.find(".preview-info .create-deployment-target");return y.Z.on(m,"click.preview",(function(){i.Z.ide.open("deployment","targets","Manage Targets",2)})),p(y.Z.subscribe("item:moved:#from:#to",(function(e){var t;h.filename===e.from&&(t=e.to,h.filename=t,h.refresh())}))),t.append(this.fragment),this.applyAddress().then(function(){return!s.noFocus&&this.previewPanel.focusAddressBar(),this}.bind(this)).catch(function(){this.close()}.bind(this))},lv=cv.prototype;function uv(e,t,n){var i=e.frameContainer.find(".preview-frame");"enter"===t.mode?n!==e&&i.hide():i.show(),e.adjust()}function dv(e){var t=rv[e.ext],n=e.previewPanel.address;return t.getAddress(e.filename,e.extension,n)}function pv(){return Tg.Pl}function fv(e,t,n){var r;void 0!==n&&(N.I_.set(Ig.Z.previewStorageLinkId(n),t),t=n,r="preview-url"),i.Z.currentProject.temporaryDisableProtectLayout(),rv[e]&&rv[e].run(t,r)}lv.stopLoading=function(){this.applyIframeAddr("about:blank"),this.previewPanel.enable()},lv.applyAddress=function(){var e=this,t=m.ZP.promise.deferred();return dv(e).then((function(e){return function(e){if(0===e.indexOf("http://")&&"https:"===av)return jg.Z.openInNewWindow(e),Promise.reject(new Error("http - opened in new window"));return Promise.resolve(e)}(e)})).then((function(t){return e.previewPanel.address=t,function(e,t){var n=rv[t];return n.checkAddress?n.checkAddress(e):Promise.resolve(e)}(t,e.ext)})).then((function(n){var i=new URL(n),r=!!m.ZP.path.getFileExtension(i.pathname)?i.pathname.split("/").pop():i.hostname;return e.tab.setTitle("".concat(r," - ").concat(n," - Preview")),e.filename=n,e.previewPanel.disable(),e.frame.parent.find(".preview-frame").show().siblings(".preview-info").hide(),t.resolve(),n})).then(m.ZP.waitAddress).then((function(t){return e.applyIframeAddr(t),e.frame.refresh()})).catch((function(n){if(n&&n.showInfo)return e.frame.parent.find(".preview-frame").hide().siblings(".preview-info").show(),void e.frame.refresh().then((function(){e.previewPanel.address=n.address,e.previewPanel.enable(),t.resolve()}));t.reject(new Error("Apply preview address failed"))})).then(t.resolve),t.promise},lv.adjust=function(){var e=this;d().defer((function(){e.frame.refresh()}))},lv.setUrl=function(e,t,n){this.filename=n,dv(this).then(function(e,t){e.previewPanel.address=t}.bind(null,this))},lv.expand=function(){window.open(this.previewPanel.address,"_blank")},lv.refresh=function(){var e=this;M.Z.saveAllAndWait().then((function(){e.applyAddress().catch(function(){e.close()}.bind(e))}))},lv.applyIframeAddr=function(e){var t=this.frame,n=t.parent,i=new Fg(n,ov);t.clean();var r=this;this.frame=i,i.refresh(),i.src(e).then((function(){r.previewPanel&&r.previewPanel.enable()}))},lv.close=function(){d().forEach(this.eventHandlers,(function(e){y.Z.unsubscribe(e)})),this.eventHandlers.length=0,this.frame.clean(),this.previewPanel&&(this.previewPanel.close(),this.previewPanel=null)},y.Z.subscribe("command:preview:tree-file",(function(){fv(pv(),sv)})),y.Z.subscribe("command:preview:deploy-tree-file",(function(){fv(Tg.if,sv)})),y.Z.subscribe("command:preview:project",(function(){fv(pv())})),y.Z.subscribe("command:preview:tab-file",(function(e,t){fv(pv(),t.arg.tab.filename)})),y.Z.subscribe("command:preview:deploy-tab-file",(function(e,t){fv(Tg.if,t.arg.tab.filename)})),y.Z.subscribe("filetree:select:#file",(function(e){sv=e.file})),y.Z.subscribe("command:preview:url",(function(e,t){fv("preview",t.arg.file,t.arg.title)}));const hv=cv,mv=JSON.parse('{"name":"preview","description":"Preview Extension","codio":{"global":true,"urls":["preview","preview-url"]}}'),gv=JSON.parse('{"index_file":{"type":"string","default":"","desc":"This value will be used when user previews the project."}}');i.Z.register({info:mv,hotkeys:{},settings:gv,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hv);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});var vv=f().compile('<div class="codio-tutor-header">\n<button class="btn btn-refresh" id="codio-tutor-refresg-code">\n    <i class="ss-icon">sync</i>Refresh code\n</button>\n<div class="codio-tutor-block-type">\n    {{#equals extension \'py\'}}\n    <label class="codio-tutor-block-type-label" for="pythonType">Execution type: </label>\n    <select name="pythonType" id="pythonType" class="codio-tutor-block-type-select">\n        <option value="py2">Python 2.x</option>\n        <option value="py" selected="selected">Python3.x</option>\n        <option value="py3anaconda">Python3.x + anaconda</option>\n    </select>\n    {{/equals}}\n</div>\n</div>\n<div class="codio-tutor-iframe-container">\n<iframe class="codio-tutor-iframe" frameBorder="0"/>\n<div class="codio-tutor-iframe-loader"></div>\n</div>\n'),bv=f().compile("<h1>\n    File {{filename}} not supported\n</h1>\n"),yv=["py","java","cpp","c","rb","js","ts"],wv={py:"py=3",py2:"py=2",java:"cumulative=false&heapPrimitives=false&textReferences=false&rawInputLstJSON=%5B%5D&py=java",py3anaconda:"py=py3anaconda&rawInputLstJSON=%5B%5D&textReferences=false",c:"cumulative=false&heapPrimitives=false&textReferences=false&py=c&rawInputLstJSON=%5B%5D",cpp:"cumulative=false&heapPrimitives=false&textReferences=false&py=cpp&rawInputLstJSON=%5B%5D",ruby:"cumulative=true&heapPrimitives=true&textReferences=true&py=ruby&rawInputLstJSON=%5B%5D",js:"cumulative=false&heapPrimitives=false&textReferences=false&py=js&rawInputLstJSON=%5B%5D",ts:"cumulative=false&heapPrimitives=false&textReferences=false&py=ts&rawInputLstJSON=%5B%5D"},_v=function e(t,n,i,r,a){if(!(this instanceof e))return new e(t,n,i,r,a);var s=m.ZP.path.getFileExtension(n);if(!d().includes(yv,s))return this._notSupported(t,n);this._container=t,this._pyMode="py",this._initContainer(t,n,s);var o=this;d().defer((function(){o.runCode(n)}))},kv=_v.prototype;kv._initContainer=function(e,t,n){l()(vv({extension:n})).appendTo(e),this.iframe=e.find(".codio-tutor-iframe"),this.iframe.load((function(){e.find(".codio-tutor-iframe-loader").hide()})),"py"===n&&this._bindPythonEvents(e,t),this._bindRefreshEvent(e,t)},kv._notSupported=function(e,t){l()(bv({filename:t})).appendTo(e)},kv._getSizeOptions=function(){var e=this._container.find(".codio-tutor-iframe-container");return["&codeDivWidth=",e.width()/2,"&codeDivHeight=",e.height()-40].join("")},kv._bindRefreshEvent=function(e,t){var n=this;e.find("#codio-tutor-refresg-code").click((function(){n.runCode(t)}))},kv._bindPythonEvents=function(e,t){var n=this;e.find("#pythonType").change((function(){n._pyMode=l()(this).val(),n.runCode(t)}))},kv._getExtensionOptions=function(e){var t=m.ZP.path.getFileExtension(e);return"py"===t&&(t=this._pyMode),wv[t]||""},kv.runCode=function(e){var t=this.iframe,n=this._getSizeOptions(),r=this._getExtensionOptions(e),a=this._container;i.Z.currentProject.file(e).then((function(e){var i=encodeURIComponent(e.content),s="https://pythontutor.com/iframe-embed.html?date="+(new Date).getTime()+"#code="+i+"&"+r+n;a.find(".codio-tutor-iframe-loader").show(),t.attr("src",s)}))};const Pv=_v,Zv=JSON.parse('{"name":"tutor","description":"Code tutor","codio":{"global":true,"urls":["tutor","tutor-url"]}}');i.Z.register({info:Zv,hotkeys:{},settings:{},get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pv);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const xv=JSON.parse('{"name":"view-images","description":"view image files","codio":{"fileExt":["png","jpeg","jpg","tiff","gif","bmp","ico"],"view":"image","no-auto-loading":true}}'),Cv={};var Sv=function(){function e(t){(0,Zn.Z)(this,e),this.container=t.container,this.filename=t.filename,this.render()}return(0,xn.Z)(e,[{key:"render",value:function(){var e=i.Z.currentProject.backendSubDomain,t=Qi.Z.get("boxDomain"),n="https://".concat(e,".").concat(t,"/").concat(this.filename),r=l()('<img src="'.concat(n,'"/>'));this.container.addClass("ac-image-viewer"),this.container.append(r)}},{key:"close",value:function(){this.container&&this.container.empty()}}]),e}();(0,cs.Z)(Sv,"info",xv),(0,cs.Z)(Sv,"settings",Cv);const Ev=Sv;var Iv={};Iv.info=xv,Iv.settings=Cv,Iv.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ev);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(Iv);const Tv=JSON.parse('{"name":"view-audio","description":"play audio files","codio":{"fileExt":["aac","flac","mp3","oga","wav"],"view":"audio","no-auto-loading":true}}'),jv={};var Av=function(){function e(t){(0,Zn.Z)(this,e),this.container=t.container,this.filename=t.filename,this.render()}return(0,xn.Z)(e,[{key:"render",value:function(){var e=i.Z.currentProject.backendSubDomain,t=Qi.Z.get("boxDomain"),n="https://".concat(e,".").concat(t,"/").concat(this.filename),r=l()("<audio src='".concat(n,"' preload='metadata' controls />"));this.container.addClass("ac-audio-player"),this.container.append(r)}},{key:"close",value:function(){this.container&&this.container.empty()}}]),e}();(0,cs.Z)(Av,"info",Tv),(0,cs.Z)(Av,"settings",jv);const Ov=Av;var Dv={};Dv.info=Tv,Dv.settings=jv,Dv.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ov);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(Dv);const Nv=JSON.parse('{"name":"view-video","description":"play video files","codio":{"fileExt":["ogg","webm","mkv","mp4"],"view":"video","no-auto-loading":true}}'),Mv={};var Fv=function(){function e(t){(0,Zn.Z)(this,e),this.container=t.container,this.filename=t.filename,this.render()}return(0,xn.Z)(e,[{key:"render",value:function(){var e=i.Z.currentProject.backendSubDomain,t=Qi.Z.get("boxDomain"),n="https://".concat(e,".").concat(t,"/").concat(this.filename),r=l()("<video src='".concat(n,"' preload='metadata' controls >").concat("Your browser does not support the video tag.","</video>"));r.addClass("ac-video-player-control"),this.container.addClass("ac-video-player"),this.container.append(r)}},{key:"close",value:function(){this.container&&this.container.empty()}}]),e}();(0,cs.Z)(Fv,"info",Nv),(0,cs.Z)(Fv,"settings",Mv);const Rv=Fv;var Lv={};Lv.info=Nv,Lv.settings=Mv,Lv.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rv);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(Lv);const Uv=JSON.parse('{"name":"view-code-javascript","description":"Javascript code editor","codio":{"view":"code","fileExt":["js","mjs","cjs"]}}');var Bv={};Bv.info=Uv,Bv.get=function(){return i.Z.loadModule((function(e){Promise.all([n.e(2988),n.e(4943),n.e(2943)]).then(function(){var t=[n(48893)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.Z.register(Bv);const qv=JSON.parse('{"name":"view-code-typescript","description":"Typescript code editor","codio":{"view":"code","fileExt":["ts"]}}');var Hv={};Hv.info=qv,Hv.get=function(){return i.Z.loadModule((function(e){Promise.all([n.e(2988),n.e(4943),n.e(9032)]).then(function(){var t=[n(47376)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.Z.register(Hv);const Wv=JSON.parse('{"name":"multi-upload","description":"Multi-upload extension","codio":{"global":true}}');var zv={};zv.info=Wv,zv.settings={},zv.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gr);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(zv);const Gv=JSON.parse('{"name":"fork","description":"Copy Project","codio":{}}');const Vv=0,Kv=1,Yv=2,Jv=3,Qv=4,Xv=5;var $v=f().compile('<form action="/" method="post">\n\n  {{#if deprecated}}\n  <h4>\n    Deprecated stack type - project cannot be copied\n  </h4>\n  {{/if}}\n  {{#unless deprecated}}\n  {{#unless isAnonymous}}\n  {{#if scenario1}}\n  <p>\n    This project shares the same name with a project that already exists in your account.\n    If you still wish to copy this project, please choose a different name.\n    This new copy will then be assigned this new name.\n  </p>\n  {{/if}}\n  {{#if scenario2}}\n  <p>\n    You have already copied this project more than once. You can find these copies at\n    <ul>{{#each forksList}}<li><a href="javascript:void(0)" data-url="{{link}}">{{title}}</a></li>{{/each}}</ul>\n    Do you wish to continue and create a new copy? If you do, then\n    please choose a new name for this copy. Please note, that this will\n    not affect your current copies.\n  </p>\n  {{/if}}\n  {{#if scenario3}}\n  <p>\n    You have already copied this project at\n    {{#each forksList}}&nbsp;<a href="javascript:void(0)" data-url="{{link}}">{{title}}</a>{{/each}}.\n    Do you wish to continue and create a new copy? If you do, then\n    please choose a new name for this copy. Please note, that this\n    will not affect your current copy.\n  </p>\n  {{/if}}\n  {{#if scenario4}}\n  <p>\n    This project shares the same name with a project that already exists in\n    your account. If you still wish to copy this project, please choose\n    a different name. This new copy will then be assigned this new name.\n  </p>\n  {{/if}}\n\n  <label for="projectName">New Project Name</label>\n  <input id="projectName" type="text" name="projectName" value="{{defaultValue}}" maxlength="80" autofocus />\n  {{else}}\n  <p>\n    Please be aware that as an anonymous user who is not currently signed in, any projects you\n    create will not persist. In order to keep your projects around for future use, you should\n    <a href="javascript:void(0)" data-url="/p/signup">sign up</a> for a Codio account as soon as possible.\n  </p>\n  {{/unless}}\n\n  {{#if showCloneOptions}}\n  <div class="fork-types-selector">\n    <h4>Clone Options</h4>\n\n    <fieldset class="radio">\n      <label>\n        <input type="radio" name="type" value="project" checked>\n        <span><i class="ss-icon">folder</i> Only Project</span>\n      </label>\n      <label>\n        <input type="radio" name="type" value="box" checked>\n        <span><i class="ss-icon">box</i> Only Box</span>\n      </label>\n      <label>\n        <input type="radio" name="type" value="both" checked>\n        <span><i class="ss-icon">box</i> Box & Project</span>\n      </label>\n    </fieldset>\n  </div>\n  {{/if}}\n  {{/unless}}\n\n</form>\n'),eb={},tb=null;eb.showDialog=function(e,t){tb&&eb.closeDialog();var n=[];1!==i.Z.currentProject.generation&&n.push({title:"Continue",onClick:function(){(eb.validateNewProjectName()||e.isAnonymous)&&t(!0)},type:1}),n.push({title:"Cancel",onClick:function(){t(!1)}});var r=function(e){var t=l().extend(e,{});return t.defaultValue=e.projectName,t["scenario"+e.scenario]=!0,t.deprecated=1===i.Z.currentProject.generation,l()($v(t))}(e);tb=new R.Z({title:"Create Copy",icon:"fork",width:650,content:r,onClose:function(){tb&&(y.Z.off(tb.content().find("a"),"click.fork"),tb=null)},buttons:n}),y.Z.on(tb.content().find("a"),"click.fork",(function(e){var t=l()(e.target).data("url");t&&i.Z.router.redirectTo(t),eb.closeDialog()}))},eb.disableForkSelection=function(){tb&&tb.content().find(".fork-types-selector input").prop("disabled",!0)},eb.disableDialog=function(){if(tb){tb.preventClosing(!0),tb.buttons()[0].disable("Copying...","loading"),tb.buttons()[1].disable();var e=tb.content();e.find(":input").prop("disabled",!0),e.parent().hide()}},eb.enableDialog=function(){if(tb){tb.preventClosing(!1);var e=tb.content();tb.buttons()[0].enable(!0),tb.buttons()[1].enable(),e.find(":input").prop("disabled",!1),e.parent().show()}},eb.closeDialog=function(){tb&&tb.close()},eb.validateNewProjectName=function(){if(tb){var e=tb.content().find("[name=projectName]"),t=e.val(),n=m.ZP.isProjectNameNotValid(t);return n&&m.ZP.addErrorToInput(e,n),!n}return!1},eb.getDestProjectName=function(){return tb?tb.content().find("[name=projectName]").val():null},eb.getForkType=function(){return tb?tb.content().find('input[name="type"]:checked').val():null},eb.showWarning=function(e){if(tb){var t=tb.content().find("[name=projectName]");m.ZP.addErrorToInput(t,e)}};const nb=eb;n(59999);var ib=!1,rb=!1;function ab(e){return e&&e.project||i.Z.currentProject}var sb=function(e){var t=ab(e),n=t.guid,r=t.name;M.Z.saveAllAndWait().then((function(){return b.ZP.ProjectManager.checkProjectClonable(n)})).then((function(e){if(rb=e,i.Z.currentUser.isAnonymous())ub(t,Qv,r);else if(i.Z.currentUser.getAccountUid()!==t.ownerId)L.Z.loadUserProjectsList((function(e){var n,i=function(e,t){for(var n=e.forks||[],i=[],r=[],a=0,s=n.length;a<s;a++)n[a].guid&&i.push(n[a].guid);return l().each(t,(function(e,t){-1!==l().inArray(t.guid,i)&&r.push(function(e){return{link:"/"+e.owner+"/"+e.pathName,title:e.name}}(t))})),r}(t,e),a=lb(r,e),s=0!==i.length,o=1<i.length;n=s?o?Yv:Jv:a?Kv:Vv,d().isUndefined(n)||ub(t,n,r,i)}));else{ub(t,rb?Qv:Xv,r)}}))},ob=function(e,t,n){nb.disableDialog();var i="Cloning a Box can take some time depending on the amount of data to be cloned. Please be patient.";switch(n){case"box":break;case"project":default:i="Copying a Project.";break;case"both":i="Copying a Project. "+i}return l()("div.ac").showFProgress(i),b.ZP.ProjectManager.fork(e.guid,t,n).then((function(e){return l()("div.ac").completeFProgress().then((function(){var t,n,i;k.Z.success("Project Copied"),cb(),t=e.accountName,n=e.projectName,i="/"+t+"/"+n,location.assign(i)}))})).catch((function(e){var t=e.message;l()("div.ac").hideFProgress(),k.Z.error(t),nb.enableDialog()}))};function cb(){nb.closeDialog()}function lb(e,t){var n=d()(t).map("name");return d().includes(n,e)}function ub(e,t,n,r){var a=rb||t===Xv;nb.showDialog({scenario:t,projectName:n,forksList:r,showCloneOptions:a,isAnonymous:i.Z.currentUser.isAnonymous()},(function(t){if(!t)return cb();if(!ib){ib=!0;var n=nb.getDestProjectName(),i=nb.getForkType();L.Z.loadUserProjectsList((function(t){lb(n,t)?nb.showWarning("Project with this name already exists"):ob(e,n,i),ib=!1}))}}))}y.Z.subscribe("command:project:fork",(function(e,t){ab(t).eduStartedAssignmentInfo||sb(t)}));const db={doForkWithDialog:sb,doFork:ob};var pb={};pb.info=Gv,pb.settings={},pb.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",db);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(pb);const fb=JSON.parse('{"name":"project-settings","description":"Project Settings","codio":{"global":true,"noFile":true,"title":"Project Settings","urls":"project-settings"}}');var hb=n(3717),mb=n.n(hb);var gb=y.Z.create(n(36656)),vb=function e(t,n){if(!(this instanceof e))return new e(n,t);this.project=t,this.container=n,this.aobOn=t.is_box_always_on,this.subs={}},bb=vb.prototype,yb=f().compile('<form action="/" id="project-settings-general">\n  <div class="main">\n      <div class="settings-form">\n          <input type="hidden" id="project-guid" name="guid" value="{{project.guid}}">\n\n          {{#unless isAnonymous}}\n          <fieldset>\n              <label for="project-name">Project Name</label>\n              <div class="input-container">\n                  <input type="text" name="name" id="project-name" required autofocus placeholder="Your project name" value="{{project.name}}" class="input-xlarge" maxlength="85" {{#unless isOwner}}readonly{{/unless}}>\n              </div>\n          </fieldset>\n          {{/unless}}\n\n          <fieldset>\n              <label for="project-description">Project description</label>\n              <textarea name="description" id="project-description" placeholder="Your project description" rows="4">{{project.description}}</textarea>\n          </fieldset>\n\n          {{#if isOwner}}\n          {{#unless isAnonymous}}\n          {{#unless project.isPrivateBitbucket}}\n          <fieldset class="radio project-public-flag">\n              <label for="project-public">\n                  <input id="project-public" type="radio" name="public" value="public" {{#if project.isPublic}}checked{{/if}}>\n                  <span><i class="ss-icon">unlocked</i> Public</span>\n              </label>\n\n              <label for="project-private">\n                  <input id="project-private" type="radio" name="public" value="private" {{#if project.isPrivate}}checked{{/if}}>\n                  <span><i class="ss-icon">locked</i> Private</span>\n              </label>\n              <p class="subscription-visibility help-block"><strong>A Subscription is required to make this project Private. <a href="/home/billing" target="_blank">Create a subscription now</a>.</strong></p>\n          </fieldset>\n          {{/unless}}\n\n          <fieldset>\n              <label>Allow Box Cloning</label>\n              <label class="switch">\n                  <span class="visuallyhidden">Allow Box Cloning</span>\n                  <input type="checkbox" name="is_box_clonable" id="project-box-clonable" {{#if project.is_box_clonable}}checked{{/if}} aria-describedby="project-box-clonable-label">\n                  <span class="switch-label" aria-hidden="true"></span>\n                  <span class="switch-handle" aria-hidden="true"></span>\n              </label>\n              <p id="project-box-clonable-label" class="help-block">Allow Box cloning? When your project is copied, only the project root and its contents are cloned for other users. To allow another user to clone the Box as well as the project, check this box.</p>\n          </fieldset>\n\n          <fieldset class="project-aob">\n              <label>Always-On Box</label>\n              <label class="switch">\n                  <span class="visuallyhidden">Always-On Box</span>\n                  <input type="checkbox" name="is_box_always_on" id="project-box-always-on" {{#if project.is_box_always_on}}checked{{/if}} aria-describedby="project-box-always-on-label">\n                  <span class="switch-label" aria-hidden="true"></span>\n                  <span class="switch-handle" aria-hidden="true"></span>\n              </label>\n              <div class="help-block" id="project-box-always-on-label">\n                  <p>Usually when you close a project, its Box will automatically shut down after a few minutes. An Always-On Box is one that never shuts down, and therefore always on, even when you do not have the Project open.</p>\n                  <p><strong class="subscription-aob block">A Subscription is required to use Always-On Boxes. <a href="/home/billing" target="_blank">Create a subscription now</a>.</strong></p>\n                  <p class="aob-no-slots"><strong>There are no Always-On Boxes available to use right now.</strong></p>\n              </div>\n          </fieldset>\n          <fieldset class="select-aob">\n              <label>Who should pay for this Always-On Box?</label>\n              <div class="input-container">\n                  <select class="select-aob-element" name="select-aob-element" value=""><option value="" hidden></option></select>\n              </div>\n          </fieldset>\n          <p class="select-aob-after">This will use one of the Always-On Boxes from <span class="org-name">Organization Name</span>. There are now <span class="org-boxes-count">X</span> Always-On Boxes available in <span class="org-name">Organization Name</span>.</p>\n          {{#if project.isOwner}}\n          <fieldset {{#if project.isPublic}}class="hide"{{/if}} id="is-private-preview-allowed-field">\n              <label>Allow Private Static Preview</label>\n              <label class="switch">\n                  <span class="visuallyhidden">Allow Private Static Preview</span>\n                  <input type="checkbox" name="is_private_preview_allowed" id="is-private-preview-allowed" {{#if project.is_private_preview_allowed}}checked{{/if}} aria-describedby="is-private-preview-allowed-label">\n                  <span class="switch-label" aria-hidden="true"></span>\n                  <span class="switch-handle" aria-hidden="true"></span>\n              </label>\n              <p class="help-block" id="is-private-preview-allowed-label">\n                  Enable this option to preview static content in your private project without authentication. See&nbsp;\n                  <a href="https://docs.codio.com/common/develop/ide/editing/preview.html#preview" target="_blank">preview documentation</a>&nbsp;for more details.\n              </p>\n          </fieldset>\n          <fieldset {{#unless project.is_private_preview_allowed}}class="hide"{{/unless}} id="secure-domain-field">\n          <label>Secure backend domain url</label>\n          <p>\n              <a href="{{project.secureBackendDomain}}" target="_blank" id="secure-domain-link">\n                  {{project.secureBackendDomain}}\n              </a>&nbsp;\n              <a href="javascript:void(0)" id="regenerate-secure-domain" class="btn">Regenerate domain</a>\n          </p>\n          </fieldset>\n          {{/if}}\n          {{#if project.isOwner}}\n          <fieldset>\n              <label>Protect dynamic ports</label>\n              <label class="switch">\n                  <span class="visuallyhidden">Protect dynamic ports</span>\n                  <input type="checkbox" name="dynamicPortProtection" id="project-protect-dynamic" {{#if project.dynamic_port_protection}}checked{{/if}} aria-describedby="project-protect-dynamic-label">\n                  <span class="switch-label" aria-hidden="true"></span>\n                  <span class="switch-handle" aria-hidden="true"></span>\n              </label>\n              <p id="project-protect-dynamic-label" class="help-block">Enable this to restrict preview to the owner of the box.</p>\n          </fieldset>\n          {{/if}}\n\n          {{/unless}}\n          {{/if}}\n      </div>\n      <div class="make-public">\n          <p><strong>Warning!</strong></p>\n          <p>\n            This Project is currently private, and you cannot edit a private project without a\n            subscription. <a href="/home/billing" target="_blank">Create a subscription now</a>,\n            or simply make this project public.\n          </p>\n          <p>\n            <button class="make-public-btn btn btn-primary" type="button">Make this project public</button>\n            <span>or</span>\n            <a href="/home/billing" target="_blank">Create a Subscription</a>\n          </p>\n      </div>\n  </div>\n\n  <footer>\n    <div>\n      <a href="javascript:void(0)" id="project-settings-save" class="btn btn-primary">Save Changes</a>\n    </div>\n    <div>\n      {{#unless hideExport}}\n        <a href="javascript:void(0)" id="project-export" class="btn">Export</a>\n      {{/unless}}\n      {{#unless hideDelete}}\n        <a href="javascript:void(0)" id="project-delete" class="btn btn-danger">{{#exists project.authorAssignment}}Discard changes{{else}}Delete{{/exists}}</a>\n      {{/unless}}\n    </div>\n  </footer>\n</form>\n');function wb(e){e.find("#project-settings-save").disableButton("Updating...","loading"),e.find(":input").prop("disabled",!0)}function _b(e){e.find("#project-settings-save").enableButton();var t=e.find(":input");d().each(t,(function(e){var t=l()(e),n=t.data("is_disabled")||!1;t.prop("disabled",n),t.removeData("is_disabled")}))}bb._bindEvents=function(){var e=y.Z.on.bind(y.Z,this.container),t=this;e("click.project-settings","#project-settings-save",this._onFormSubmit.bind(this)),e("change.project-settings",'input[name="is_box_always_on"]',this._handleChangeAlwaysOn.bind(this)),e("click.project-settings","#project-delete",(function(){return gb.deleteProject()})),e("click.project-settings","#project-export",l().proxy(this._onProjectExport,this)),e("keydown.project-settings",'input[name="name"]',(function(e){13===e.which&&t.container.find("#project-settings-save").click()})),e("click.project-settings",".make-public-btn",this._makePublicHandler.bind(this)),e("click.project-settings","#project-public",this._tooglePublicState.bind(this,!0)),e("click.project-settings","#project-private",this._tooglePublicState.bind(this,!1)),e("click.project-settings","#regenerate-secure-domain",this._regenerateSecureDomain.bind(this)),e("click.project-settings","#is-private-preview-allowed",this._tooglePreviewState.bind(this)),this.eventOnUpdate=y.Z.subscribe("project:preferencesUpdated",(function(){t._updateSubs().then(l().proxy(t._onUpdated,t))})),this.eventOnSubscriptionUpdated=y.Z.subscribe("billing:update",(function(){t._updateSubs().then(l().proxy(t._showAlwaysOnBoxes,t,t.container))}))},bb._regenerateSecureDomain=function(){var e=this.container.find("#regenerate-secure-domain");e.disableButton("Updating...","loading");var t=this;R.Z.showConfirm({title:"Regenerate secure domain",description:["Select Yes to generate a new backend domain URL. ","Access by the old URL will no longer function"].join(""),onClose:function(n){n?b.ZP.ProjectManager.regenerateSecureDomain(t.project.guid).catch((function(t){e.enableButton(),t&&k.Z.error(t.message)})):e.enableButton()}})},bb._tooglePreviewState=function(){var e=this.container.find('input[name="is_private_preview_allowed"]');e.prop("checked")&&!this.project.is_private_preview_allowed&&R.Z.showConfirm({title:"Allow Private Static Preview",description:["Are you sure you want to enable private static preview? ","This will allow you the ability to preview static content ","without authentication. A special URL will be generated."].join(""),onClose:function(t){t||e.removeAttr("checked")}})},bb._tooglePublicState=function(e){var t=this.container.find("#is-private-preview-allowed-field"),n=this.container.find("#secure-domain-field"),i=this.container.find('input[name="is_private_preview_allowed"]').prop("checked");e?(t.addClass("hide"),n.addClass("hide")):(t.removeClass("hide"),i&&n.removeClass("hide"))},bb._makePublicHandler=function(){var e=this.container.find(".make-public-btn");e.disableButton("Updating...","loading");var t=d().cloneDeep(this.project);t.is_public=!0,b.ZP.ProjectManager.update(t).then((function(){gb.projectSettingsRefresh({projectName:t.pathName})})).catch((function(t){e.enableButton(),t&&k.Z.error(t.message)}))},bb._slotsCount=function(e){var t=d().parseInt(e.maxAlwaysOnBoxSlotsCount),n=d().parseInt(e.usedAlwaysOnBoxSlotsCount),i=(t=d().isFinite(t)?t:0)-(n=d().isFinite(n)?n:0);return i>0?i:0},bb._updateVisibilityControls=function(){var e=O.hasAnyUsableSubscription(this.subs)||i.Z.currentUser.isInTrial()||i.Z.currentUser.isDummy(),t=this.container,n=t.find('.project-public-flag > label[for="project-private"]');t.find(".subscription-visibility").hide(),n.removeClass(),n.find("input").removeAttr("disabled"),this.project.isPublic&&!e&&(t.find(".subscription-visibility").show(),n.addClass("disabled"),n.find("input").attr("disabled","disabled")),this._privateProjectsRequired&&(t.find("#project-private").attr("checked","checked"),t.find("#project-public").removeAttr("checked"),t.find('.project-public-flag > label[for="project-public"]').hide())},bb._showAlwaysOnBoxes=function(){var e=this.container;if(1===i.Z.currentProject.generation)return e.find(".project-aob").hide(),Promise.resolve();var t=this,n=O.hasAnyUsableSubscription(this.subs)||i.Z.currentUser.isDummy();e.find("#project-box-always-on").attr("disabled","disabled"),e.find(".select-aob-after").hide(),e.find(".select-aob").hide(),e.find(".aob-no-slots").hide(),y.Z.off(e,"change",".select-aob-element");var r=e.find(".select-aob-element");r[0]&&r[0].selectize&&r[0].selectize.destroy(),r.find("option[data-name]").remove();var a=!0;if(t.aobInfo={},e.block(),n){e.find(".subscription-aob").hide();var s=this.subs[i.Z.currentUser.getAccountUid()];if(s&&O.hasUsableSubscription(s)&&(t.aobInfo[i.Z.currentUser.getAccountUid()]={name:"user's boxes",slotsCount:t._slotsCount(s)},t._slotsCount(s)>0)){var o=l()("<option>").attr("value",i.Z.currentUser.getAccountUid()).html("Me");r.append(o),a=!1}return t.gotOrganizationAOBSlots=!1,t.orgs.then((function(i){var s=0;if(d().forEach(i,(function(e){var n=t.subs[e.id];if(n&&O.hasUsableSubscription(n)){t.aobInfo[e.id]={name:e.details.name,slotsCount:t._slotsCount(n)};var i=l()("<option>").attr("value",e.id);t._slotsCount(n)>0&&(s++,i.html(e.details.name),r.append(i),r.find("option:not([hidden])").not(":disabled").length>1&&(t.gotOrganizationAOBSlots=!0))}})),s>0||!a){if(1===s&&a||0===s&&!a){var o=r.find("option:not([hidden])").not(":disabled").attr("value");r.val(o)}else y.Z.on(e,"change",".select-aob-element",t._handleChangeAlwaysOnOwner.bind(t));r.selectize(),a=!1}else t.aobOn?a=!1:(a=!0,e.find(".aob-no-slots").show());n&&e.find(".subscription-aob").hide();var c=e.find("#project-box-always-on"),u=!!a;c.prop("disabled",u),c.data("is_disabled",u),e.unblock()}))}e.find(".subscription-aob").show(),e.unblock()},bb._onUpdated=function(){var e=this.container;e.find("#project-name").val(this.project.name),e.find("#project-description").val(this.project.description),e.find("#project-box-clonable").prop("checked",this.project.is_box_clonable),e.find("#project-box-always-on").prop("checked",this.aobOn),e.find("input:radio[name=public]:nth(0)").attr("checked",this.project.isPublic),e.find("input:radio[name=public]:nth(1)").attr("checked",!this.project.isPublic);var t=e.find("#secure-domain-field"),n=this.project.secureBackendDomain;n&&!this.project.isPublic?(t.removeClass("hide"),t.find("#secure-domain-link").attr("href",n).text(n),this.container.find("#regenerate-secure-domain").enableButton()):t.addClass("hide")},bb._handleChangeAlwaysOnOwner=function(e){var t=this.subs[i.Z.currentUser.getAccountUid()],n=l()(e.target).closest(".select-aob-element").val(),r=this.aobInfo[n].name,a=this.aobInfo[n].slotsCount;n===i.Z.currentUser.getAccountUid()&&(n=null);var s=this.container;s.find(".select-aob-after .org-name").html(r);var o=s.find("#project-box-always-on").prop("checked");if(o=o||!1)if(!n&&this._slotsCount(t)<=0){(0,R.Z)({content:"You do not have any available Always-On Boxes in your account.",icon:"warning"})}else{s.find(".select-aob").hide();var c=s.find(".select-aob-after");c.show(),c.find(".org-boxes-count").html(a-1)}},bb._handleChangeAlwaysOn=function(){var e=this.container,t=e.find("#project-box-always-on").prop("checked");(t=t||!1)&&this.gotOrganizationAOBSlots?e.find(".select-aob").show():(e.find(".select-aob").hide(),e.find(".select-aob-after").hide())},bb._saveAlwaysOn=function(e,t){""===t&&(t=null);var n,i=this.project;(n=e?i.assignAlwaysOn(t):i.unassignAlwaysOn()).catch((function(e){e&&k.Z.error(e.message)}));var r=this;return n.then((function(){return O.api.invalidateSubscriptionsCache().catch((function(e){var t=e.message;return k.Z.error(t)})),r._updateSubs()}))},bb._addError=function(e,t){var n=this.container.find("[name="+e+"]");m.ZP.addErrorToInput(n,{title:t,noFocus:!1}),d().defer((function(){n.data("selectize")?n[0].selectize.focus():n.focus()}))},bb._processSubmit=function(){var e=this,t=i.Z.currentUser.isAnonymous(),n=this.project,r=this.container,a=this.container.find("#project-name"),s=t?n.name:l().trim(a.val()),o=this.container.find("#project-description").val(),c=this.container.find('input[name="is_box_clonable"]').prop("checked"),u=this.container.find("#project-protect-dynamic").prop("checked"),d=this.project.is_private_preview_allowed,p=!!this.container.find('input[name="is_box_always_on"]').prop("checked"),f=r.find(".select-aob-element"),h=f.val();if(!function(t,n){var i=m.ZP.isProjectNameNotValid(t);return i&&e._addError(n,i),!i}(s,"name"))return Promise.reject(new Error("Project name is not valid"));var g=!!e.aobOn!==p;if(!function(t){var n=""===t.val();return p&&n&&e._addError("select-aob-element","You should choose who should pay for this Always-On Box."),!(p&&n)}(f)&&g)return Promise.reject(new Error("Selected AOB is not valid"));h===i.Z.currentUser.getAccountUid()&&(h=null),f.val(""),wb(this.container);var v,b=this.container.find(".project-public-flag input:radio[name=public]:checked");return(v=!!t||!n.isPrivateBitbucket&&(0===b.length||"public"===b.val()))||(d=this.container.find('input[name="is_private_preview_allowed"]').prop("checked")),M.Z.saveAllAndWait().then((function(){if(g)return e._saveAlwaysOn(p,h)})).then((function(){var t;return n.isOwner?(t={name:s,is_public:v,description:o,is_box_clonable:c,is_private_preview_allowed:d,dynamic_port_protection:u},g&&(t.is_box_always_on=p,e.aobOn=p)):t={name:s,description:o},n.update(t)})).then((function(){k.Z.success("Project successfully updated."),_b(e.container),e.container.find(".project-name").html(s),e.container.find(".open-without-subscription").addClass("hide")})).catch((function(t){t&&k.Z.error(t.message),_b(e.container)}))},bb._onProjectExport=function(){var e=this.project.guid;gb.exportProject({guid:e})},bb._updateSubs=function(){var e=this;return O.api.getCachedSubscriptions().then((function(t){e.subs=t}))},bb._onFormSubmit=function(){if("disabled"!==this.container.find("#project-settings-save").attr("disabled")){var e=this;return wb(this.container),e._processSubmit().then((function(){e._updateVisibilityControls(),e._showAlwaysOnBoxes(e.container)})).finally((function(){_b(e.container)}))}},bb.open=function(){this.container.empty();var e=i.Z.currentProject,t=this;return this.orgs=b.ZP.OrganizationManager.getMyOrganizations(),O.api.getCachedSubscriptions().then((function(e){return t.subs=e,t.orgs})).then((function(n){d().isEmpty(n)?t._privateProjectsRequired=!1:t._privateProjectsRequired=d().every(n,(function(e){return e.details.privateProjectsRequired}));var r=e.eduStartedAssignmentInfo&&!e.isOpenedByTeacher&&ef.Z.getDisableDownloadByStudent(e.eduStartedAssignmentInfo);return t.container.append(l()(yb({project:t.project,isAnonymous:i.Z.currentUser.isAnonymous(),hideDelete:!e.isOwner||e.eduStartedAssignmentInfo&&!e.isOpenedByTeacher,hideExport:r,isOwner:e.isOwner},{allowProtoMethodsByDefault:!0,allowProtoPropertiesByDefault:!0}))),t._updateVisibilityControls(),t._showAlwaysOnBoxes()})).then(t._bindEvents.bind(t))},bb.close=function(){var e=this.container.find(".select-aob-element");e&&e[0]&&e[0].selectize&&e[0].selectize.destroy(),y.Z.unsubscribe(this.eventOnUpdate),y.Z.unsubscribe(this.eventOnSubscriptionUpdated),y.Z.off(this.container)};const kb=vb;n(39197),n(25818);var Pb=n(20294).ED;function Zb(){As().apply(this,arguments)}function xb(){Ts().apply(this,arguments)}Pb(Zb,As()),Zb.prototype.getLocalResults=function(e,t){t(this.stacks)},Zb.prototype.setStacks=function(e){this.stacks=e},Pb(xb,Ts()),xb.prototype.getSearchProps=function(){return["name","owner","shortDescription","longDescription","tag"]},xb.prototype.getSearchTokens=function(){return{name:"Name",owner:"Owner",desc:"Description",private:"Private",public:"Public",tag:"Tag",myOrgs:"My Organizations",version:"Version"}},xb.prototype.doName=function(e,t){return this.compare(e,t.name.toLowerCase())},xb.prototype.doOwner=function(e,t){return!(!t.ownerInfo||!t.ownerInfo.name)&&this.compare(e,t.ownerInfo.name.toLowerCase())},xb.prototype.doDesc=function(e,t){return!!t.description&&(this.compare(e,t.shortDescription.toLowerCase())||this.compare(e,t.longDescription.toLowerCase()))},xb.prototype.doPrivate=function(e,t){return t.isPrivate},xb.prototype.doPublic=function(e,t){return!t.isPrivate},xb.prototype.doTag=function(e,t){if(!d().isArray(t.tags)||0===t.tags.length)return!1;var n=this,i=!1;return d().each(t.tags,(function(t){return!(i=n.compare(e,t.toLowerCase()))})),i},xb.prototype.doMyOrgs=function(e,t){return t.myOrg};const Cb={getSearchEngine:function(e){var t=new(Es()),n=new Zb([new xb]);return n.setStacks(e),t.addProvider(n),t.setStacks=function(e){this.clean(),n.setStacks(e)},t}};var Sb=null,Eb=f().compile('<section class="filters">\n  <ul class="tabbed">\n    <li id="my-tab-link">\n      <a data-tab="my" href="javascript:void(0)">My Stacks</a>\n    </li>\n      <li id="certified-tab-link">\n          <a data-tab="certified" href="javascript:void(0)">Certified</a>\n      </li>\n    <li id="popular-tab-link">\n      <a data-tab="popular" href="javascript:void(0)">Popular</a>\n    </li>\n    <li id="all-tab-link">\n      <a data-tab="all" href="javascript:void(0)">All</a>\n    </li>\n  </ul>\n\n  <div class="form">\n    <label class="search">\n      <div class="btn-group search-filter">\n        <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)">\n          Filters <span class="caret"></span>\n        </a>\n        <ul class="dropdown-menu">\n          <li><a class="filter-item" tabindex="-1" href="javascript:void(0)" data-value="myOrgs:">My Organizations</a></li>\n          <li><a tabindex="-1" href="https://docs.codio.com/common/develop/projects/access-projects.html#search-projects" target="_blank">Advanced queries</a></li>\n        </ul>\n      </div>\n      <i class="ss-icon">search</i>\n      <input type="search" id="search-field" placeholder="Search...">\n    </label>\n  </div>\n</section>\n\n<section class="ordering">\n  <div class="paginate-container pagination"></div>\n\n  <select class="selectbox filter">\n    <option value="name" selected="selected">Name</option>\n    <option value="totalCount">Downloads</option>\n    <option value="owner">Owner</option>\n  </select>\n\n  <div id="filter-buttons" class="buttons">\n    <button id="filter-asc" data-order="asc" class="active btn">\n      <i class="ss-icon">ascend</i>\n    </button>\n    <button id="filter-desc" data-order="desc" class="btn">\n      <i class="ss-icon">descend</i>\n    </button>\n  </div>\n</section>\n\n<div class="stacks-list-container list {{#if isSelection}}selection-mode{{/if}}"></div>\n'),Ib=f().compile('{{#equals items.length 0}}\r\n\r\n  <div class="block-notice">\r\n    {{#if search}}\r\n      <p>Your search - <strong>{{search}}</strong> - did not match any stack.</p>\r\n      <small>\r\n        <p>Suggestions:</p>\r\n        <ul>\r\n          <li>Make sure that all words are spelled correctly.</li>\r\n          <li>Try different keywords.</li>\r\n          <li>Try more general keywords.</li>\r\n          <li>Try fewer keywords.</li>\r\n        </ul>\r\n      </small>\r\n    {{else}}\r\n      {{#if myStacks}}\r\n        {{#if isOwner}}\r\n          <p>It looks like you haven\'t created any stacks yet. Get started by browsing through what is available under <a data-tab="all" href="javascript:void(0)">All Stacks</a> or by clicking on the <a href="/home/stacks/new" class="btn btn-primary create-stack-btn">Create Stack</a> button.</p>\r\n          <p>If you want to learn more, take a look at our <a href="https://docs.codio.com/common/develop/stacks/stacks.html" target="_blank">docs</a>.</p>\r\n        {{else}}\r\n          <p>it looks like the user haven\'t created any stacks yet.</p>\r\n        {{/if}}\r\n      {{else}}\r\n        <p>it looks like no stacks available yet.</p>\r\n      {{/if}}\r\n    {{/if}}\r\n  </div>\r\n\r\n{{else}}\r\n\r\n  <table class="stacks-list">\r\n    <thead>\r\n      <th class="image"></th>\r\n      <th class="name"></th>\r\n      <th class="downloads"></th>\r\n      <th class="action"></th>\r\n    </thead>\r\n    <tbody>\r\n      {{#each items}}\r\n        <tr><td></td></tr>\r\n        <tr {{#unless ready}}class="disabled"{{/unless}} data-id="{{id}}">\r\n          <td class="image">\r\n            {{logoImage imageUrl name}}\r\n            {{#if isPrivate}}<i class="ss-icon qtip-here" title="Private">locked</i>{{/if}}\r\n          </td>\r\n          <td class="name {{#if shortDescription}}description{{/if}}">\r\n            {{#if ../isSelection}}\r\n              <a href="javascript:void(0)" class="select-stack-btn">\r\n            {{else}}\r\n              <a href="/home/stacks/{{id}}">\r\n            {{/if}}\r\n              {{#equals ownerInfo.type \'ORGANIZATION\'}}\r\n                <span class="stack-owner-org">{{toupper ownerInfo.name}} / </span>\r\n              {{else}}\r\n                <span class="stack-owner">{{#if ownerInfo}}{{#if ownerInfo.name}}{{toupper ownerInfo.name}}{{/if}}{{/if}} / </span>\r\n              {{/equals}}\r\n              {{name}}\r\n              <small>{{shortDescription}}</small>\r\n            </a>\r\n            <ul class="tags">\r\n              {{#each tags}}\r\n                <li class="stack-tag" data-tag="{{this}}">{{this}}</li>\r\n              {{/each}}\r\n            </ul>\r\n          </td>\r\n          <td class="downloads">\r\n            {{totalCount}}<i class="ss-icon qtip-here" title="Installations">downloadcloud</i>\r\n          </td>\r\n          <td class="action">\r\n            {{#if ../isSelection}}\r\n              {{#if ready}}\r\n                <button class="btn select-stack-btn"><i class="ss-icon qtip-here" title="Use this Stack">navigate</i> Select</button>\r\n              {{/if}}\r\n            {{else}}\r\n              {{#if ready}}\r\n                <a href="javascript:void(0)" class="use-stack-btn">\r\n                  <i class="ss-icon circular-icon qtip-here" title="Use this Stack to create a Project">navigate</i>\r\n                </a>\r\n              {{else}}\r\n                {{#if error}}\r\n                  <a href="/home/stacks/{{id}}" class="use-stack-btn">\r\n                    <i class="ss-icon circular-icon qtip-here" title="Show Stack Details">alert</i>\r\n                  </a>\r\n                {{else}}\r\n                  <a href="{{#if ../isSelection}}javascript:void(0){{else}}/home/stacks/{{id}}{{/if}}">\r\n                    <i class="ss-icon circular-icon qtip-here" title="Build in progress...">cloud</i>\r\n                  </a>\r\n                {{/if}}\r\n              {{/if}}\r\n            {{/if}}\r\n          </td>\r\n        </tr>\r\n      {{/each}}\r\n    </tbody>\r\n  </table>\r\n\r\n{{/equals}}\r\n'),Tb=null,jb=null,Ab=[],Ob=[],Db=null,Nb=null,Mb=10,Fb="codio-stacks-ordering",Rb=!1,Lb=!1,Ub=[];function Bb(e){return Fb+"."+e}function qb(e){return Sb=l()(Eb({canCreate:bm.canCreateStacks(),isSelection:e})),jb=Cb.getSearchEngine([]),Sb.find(".selectbox.filter").selectize({sortField:[{field:"$order",direction:"asc"}]}),function(){if(Sb){var e=Sb.find("#search-field");y.Z.on(e,"input",(function(){Kb(jb,e)})),y.Z.on(Sb,"click","a[data-tab]",(function(){Hb(l()(this).data("tab"))})),y.Z.on(Sb.find(".selectbox.filter"),"change",(function(e){e.preventDefault(),N.I_.set(Bb(Nb),zb()),Vb()}));var t=Sb.find("#filter-buttons > button");y.Z.on(t,"click",(function(e){e.preventDefault();var n=l()(this);n.hasClass("active")||(t.removeClass("active"),n.addClass("active"),N.I_.set(Bb(Nb),zb()),Vb())})),y.Z.on(Sb,"click","a.filter-item",Jb)}}(),m.ZP.showFastFade(Tb,Sb)}function Hb(e,t){if(Rb){Nb=e;var n=m.ZP.promise.deferred();Sb?n.resolve():qb(t).then(n.resolve);var i=Sb.find("#"+e+"-tab-link");if(!i.hasClass("active"))return Sb.find("ul.tabbed > li").removeClass("active"),i.addClass("active"),mb().start(),n.promise.then(Xb.bind(null,e)).then((function(n){if(i.addClass("active"),Rb&&Sb&&Nb===e){if(Lb&&"my"===e&&d().isEmpty(n))return Lb=!1,Hb("certified",t);d().each(n,(function(e){e.ready=bm.isStackReady(e),e.error=bm.isLastBuildFailed(e),e.myOrg=e.ownerInfo&&"ORGANIZATION"===e.ownerInfo.type&&!!Ub[e.ownerInfo.id]}));var r=N.I_.get(Bb(e));r=r||function(e){return"my"===e?{by:"name",order:"asc"}:{by:"totalCount",order:"desc"}}(e),function(e){if(e&&Sb){var t=Sb.find("#filter-buttons");t.find("button").removeClass("active"),t.find("button[data-order="+e.order+"]").addClass("active"),Sb.find(".filter.selectbox")[0].selectize.setValue(e.by)}}(r),"certified"===e&&(n=d().filter(n,(function(e){var t=e.ownerInfo.slug;return"codio"===t||"codio-certified"===t}))),n=Gb(n),Ab=Ob=n;var a="my"===e,s=Sb.siblings(".stacks-list-container"),o=Sb.find(".selectbox")[0].selectize,c=o.getValue();if(a?(s.removeClass("show-owner"),o.removeOption("owner")):(s.addClass("show-owner"),o.addOption({text:"Owner",value:"owner",$order:3})),a&&"owner"===c)o.setValue("name"),Vb(e);else{jb.setStacks(Ab);var l=Sb.find("#search-field");Kb(jb,l,e)}}})).catch((function(e){k.Z.error(e.message)})).finally((function(){mb().done()}))}}function Wb(){var e=Qb(),t=(e.page-1)*e.perPage;!function(e){y.Z.off(Sb.find("ul.tags"),"click","li"),y.Z.off(Sb.find(".use-stack-btn"),"click"),y.Z.off(Sb.find(".select-stack-btn"),"click"),Sb.find(".qtip-here").qtip("destroy",!0),Tb.closest("div.dashboard").scrollTop(0);var t=l()(Ib({canCreate:bm.canCreateStacks(),items:e,isSelection:!!Db,isOwner:!0,myStacks:"my"===Nb,search:Sb.find("#search-field").val()}));Sb.siblings(".stacks-list-container").empty().append(t),Sb.find(".qtip-here").qtip(),function(){y.Z.on(Sb.find(".select-stack-btn"),"click",(function(e){e.preventDefault();var t=l()(this).closest("tr").data("id"),n=d().find(Ab,{id:t});d().isFunction(Db)&&Db(n)}));var e=Sb.find("#search-field");y.Z.on(Sb.find("ul.tags"),"click","li",(function(t){t.preventDefault();var n=l()(this).data("tag");e.val('tag:"'+n+'"'),Kb(jb,e)})),y.Z.on(Sb.find(".use-stack-btn"),"click",(function(e){e.preventDefault();var t=l()(this).closest("tr").data("id"),n=d().findLast(d().find(Ab,{id:t}).versions,{state:"READY"});i.Z.router.redirectTo("/home/projects/new?stackVersion="+n.id)}))}()}(Ob.slice(t,t+e.perPage))}function zb(){return{by:Sb.find(".filter.selectbox")[0].selectize.getValue(),order:Sb.find("#filter-buttons > button.active").data("order")}}function Gb(e){var t=zb();switch(t.by){case"owner":e=d().sortBy(e,(function(e){return[e.ownerInfo&&e.ownerInfo.name?e.ownerInfo.name.toLowerCase():"",e.name.toLowerCase()]}));break;case"name":e=d().sortBy(e,(function(e){return e.name.toLowerCase()}));break;case"totalCount":e=d()(e).chain().sortBy((function(e){return e.name.toLowerCase()})).sortBy("totalCount").value()}return"desc"===t.order&&e.reverse(),e}function Vb(e){Ab=Ob=Gb(Ab),jb.setStacks(Ab);var t=Sb.find("#search-field");Kb(jb,t,e)}function Kb(e,t,n){Yb();var r=2===i.Z.currentProject.generation?"lxc":"old";e.search("version:"+r+" "+t.val(),(function(e){(!n||n&&Nb===n)&&function(e){Ob=e,Wb();var t=Sb.siblings(".ordering");0===e.length?t.hide():(t.show(),n=Sb.find(".paginate-container"),i=Qb(),Yb(),Ob.length>Mb&&n.pagination({currentPage:i.page,items:Ob.length,itemsOnPage:Mb,displayedPages:3,prevText:"directleft",nextText:"directright",onPageClick:function(){Wb()}}));var n,i}(e)}))}function Yb(){var e=Sb.find(".paginate-container");e.data("pagination")&&(e.pagination("destroy"),e.data("pagination",null))}function Jb(e){e.preventDefault();var t=Sb.find("#search-field");t.val(l()(this).data("value")),Kb(jb,t)}function Qb(){var e=1,t=Sb.find(".paginate-container");return t.data("pagination")&&(e=t.pagination("getCurrentPage")),{perPage:Mb,page:e}}function Xb(e){switch(e){case"my":return b.ZP.StacksManager.my();case"certified":case"popular":case"all":return b.ZP.StacksManager.all()}}function $b(){return($b=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sb){e.next=2;break}return e.abrupt("return");case 2:return Sb.find(".qtip-here").qtip("destroy",!0),Nb=null,Ab=Ob=jb=Db=null,Sb.find(".selectbox.filter")[0].selectize.destroy(),e.abrupt("return",m.ZP.hideFastFade(Tb).then((function(){Sb&&(y.Z.off(Sb,"click","a[data-tab]"),y.Z.off(Sb.find("#search-field"),"input"),y.Z.off(Sb.find(".selectbox.filter"),"change"),y.Z.off(Sb.find("#filter-buttons > button"),"click"),y.Z.off(Sb,"click","a.filter-item")),Sb.remove(),Sb=null})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const ey={show:function(e,t,n,i){return Rb=!0,Tb=e,Db=n,t=t||"certified",Lb=i,mb().start(),b.ZP.OrganizationManager.getMyOrganizations().then((function(e){return d().each(e,(function(e){Ub[e.id]=e})),Hb(t,!!n)})).catch((function(e){k.Z.error(e.message)})).finally((function(){mb().done()}))},hide:function(){return Rb=!1,function(){return $b.apply(this,arguments)}()}};n(25818);var ty=function e(t,n){if(!(this instanceof e))return new e(n,t);this.project=t,this.container=n},ny=ty.prototype,iy=f().compile('<div id="project-stack-settings">\r\n  <form action="/">\r\n    <div class="main">\r\n      <fieldset class="stack-select">\r\n        <label for="stack">Current Stack</label>\r\n        <span class="input-append project-stack">\r\n          <input type="text" id="stack" name="stack" class="stack-browse-input" placeholder="Choose a stack..." readonly>\r\n          <i class="ss-icon">dropdown</i>\r\n        </span>\r\n      </fieldset>\r\n\r\n      <fieldset class="stack-version-select">\r\n        <label for="stack-version">Version</label>\r\n        <select id="stack-version" name="stack"></select>\r\n      </fieldset>\r\n\r\n      <p class="warning">\r\n        Updating or changing the stack will result in the removal of all your manual changes outside of the project directory. Your project files will stay untouched.\r\n      </p>\r\n    </div>\r\n\r\n    <footer>\r\n      {{#unless inIde}}<a href="/home/projects" class="btn">Cancel</a>{{/unless}}\r\n      <button class="btn btn-primary">Save</button>\r\n    </footer>\r\n  </form>\r\n\r\n  <div class="stacks-page">\r\n    <header>\r\n      <h3>Select a Stack</h3>\r\n      <button id="close-stacks-browser" class="btn">Close</button>\r\n    </header>\r\n    <div class="stacks-container"></div>\r\n  </div>\r\n</div>\r\n');function ry(){return ry=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",b.ZP.StacksManager.getByVersionId(t));case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}}),e)}))),ry.apply(this,arguments)}ny._updateProjectStack=function(e){e.preventDefault();var t=this;R.Z.showConfirm({title:"Change stack confirmation",captcha:!0,description:["Updating or changing the stack will result in the removal ","of all your manual changes outside of the project directory. ","Your project files will stay untouched."].join(""),onClose:function(e){if(e){t.container.find("button").disableButton("Saving...","loading"),t.container.find(":input").prop("disabled",!0);var n=t.container.find("#stack-version").val(),r=d().includes(n,":latest");b.ZP.ProjectManager.changeStack(t.project.guid,n.replace(":latest",""),r).then((function(){k.Z.success("Stack updated successfully"),0===i.Z.router.getURL().indexOf("/home/projects")&&(window.location="/home/projects")}),(function(){k.Z.error("Stack failed to update. Please try again.")})).finally((function(){t.container.find("button").enableButton(),t.container.find(":input").prop("disabled",!1)}))}}})},ny._onStackChanged=function(e,t){this._hideStackBrowser(),this._setStack(e,t)},ny._hideStackBrowser=function(e){e&&e.preventDefault();var t=this;ey.hide().then((function(){l()("#project-settings > .filters").show(),t.container.find(".stacks-page").hide(),t.container.closest("div.dashboard").scrollTop(0),t.container.find("form").show()}))},ny._handleChooseStack=function(e){if(!("click"!==e.type&&"keydown"!==e.type||"keydown"===e.type&&"Enter"!==e.key)){e.preventDefault();var t=this,n=this.container.find(".stacks-container");ey.show(n,"my",this._onStackChanged.bind(this),!0).then((function(){t.container.find("form").hide(),t.container.find(".stacks-page").show(),l()("#project-settings > .filters").hide()}))}},ny._bindEvents=function(){var e=y.Z.on.bind(y.Z,this.container);e("keydown.project-stack-settings",".project-stack",this._handleChooseStack.bind(this)),e("click.project-stack-settings",".project-stack",this._handleChooseStack.bind(this)),e("submit.project-stack-settings","form",this._updateProjectStack.bind(this)),e("click.project-stack-settings","#close-stacks-browser",this._hideStackBrowser.bind(this))},ny._setStack=function(e){var t=null,n=this.container.find("#stack-version"),i=this.container.find("button");e?i.enableButton():i.disableButton(),n[0].selectize&&n[0].selectize.destroy(),e&&this.project.stackVersionId&&(t=d().find(e.versions,{id:this.project.stackVersionId}));var r=this.container.find("#stack"),a=e&&e.ownerInfo&&e.ownerInfo.name?e.ownerInfo.name:"",s=e&&e.name||"";e&&r.val(a+" / "+s),n.empty();var o=e&&e.versions||[];if(o=d().filter(o,(function(e){return"READY"===e.state})),!d().isEmpty(o)&&(this.project.isAuthorProject||this.project.isBookWriter)){var c=l()('<option value="'+d().last(o).id+':latest">Use the latest version</option>');n.append(c)}d().eachRight(o,(function(e){var t=bm.getVersionStr(e),i=l()('<option value="'+e.id+'">'+t+"</option>");n.append(i)}));(!t||t&&this.project.isLatestStack?n.find("option:enabled").first():n.find('option[value="'+t.id+'"]')).attr("selected","selected"),n.selectize()},ny._openStack=function(e){this.container.empty(),this.container.append(l()(iy({inIde:!!l()(".ide").length}))),this._setStack(e),this._bindEvents();var t=this;d().delay((function(){var e=t.container.find("#stack");e&&e.focus()}),100)},ny.open=function(){var e=this;return function(e){return ry.apply(this,arguments)}(this.project.stackVersionId).then((function(t){e._openStack(t)})).catch((function(){e._openStack(null)}))},ny.close=function(){this._hideStackBrowser();var e=this.container.find("#stack-version")[0];e&&e.selectize&&e.selectize.destroy(),y.Z.off(this.container)};const ay=ty;var sy=function e(t,n){if(!(this instanceof e))return new e(n,t);this.project=t,this.container=n},oy=sy.prototype,cy=f().compile('<div id="project-forwarding-settings">\n    <form action="#">\n        <div class="main">\n            {{#unless canUse}}\n            <div>\n                <h4  class="forwarding-port-need-subscription-h4">Forwarding is only available if you have an active subscription.</h4>\n                <a href=\'/home/billing\' class="btn subscribe" tabindex="0" data-pos="0" data-target="dashboard">Subscribe Today</a>\n            </div>\n            {{/unless}}\n            {{#if canUse}}\n            <fieldset class="forwarding-port-item">\n                {{#unless ssh}}\n                <label>SSH Forwarding</label>\n                <p>\n                    No ssh forwarding enabled\n                </p>\n                {{/unless}}\n\n                {{#if ssh}}\n                <label>SSH Forwarding</label>\n                <span class="forwarding-port-info">\n                    ssh codio@{{ssh.host}} -p {{ssh.port}}\n                </span>\n                <p class="forwarding-port-help">Use this string to connect</p>\n                {{/if}}\n            </fieldset>\n            {{/if}}\n        </div>\n        <footer>\n            {{#if canUse}}\n                {{#unless ssh}}\n                    <button id="enable-ssh-forwarding" class="btn btn-primary">Enable SSH forwarding</button>\n                {{/unless}}\n                {{#if ssh}}\n                    <button id="disable-ssh-forwarding" class="btn btn-primary btn-danger">Disable SSH forwarding</button>\n                {{/if}}\n            {{/if}}\n        </footer>\n    </form>\n</div>\n');function ly(e){return Promise.all([b.ZP.ForwardingManager.forwardingList(e),O.api.getCachedSubscriptions().then((function(e){var t=i.Z.currentUser.isDummy(),n=i.Z.currentUser.get("details").get("created_at"),r=Qi.Z.get("boxAccessCutoffDate"),a=O.hasAnyUsableSubscription(e);return t||a||n<r}))])}oy._bindEvents=function(){var e=y.Z.on.bind(y.Z,this.container);e("click.project-forwarding-settings","#disable-ssh-forwarding",this._handleSshForwardingAction.bind(this,!0)),e("click.project-forwarding-settings","#enable-ssh-forwarding",this._handleSshForwardingAction.bind(this,!1))},oy._handleSshForwardingAction=function(e,t){t&&t.preventDefault(),this._forwardingAction(e,22)},oy._forwardingAction=function(e,t){var n=b.ZP.ForwardingManager,i=e?n.removeForwarding:n.addForwarding,r=this;i(this.project.guid,t).then((function(){return ly(r.project.guid)})).catch((function(e){return e&&k.Z.error(e.message),Promise.reject(e)})).then((function(e){var t=(0,a.Z)(e,2),n=t[0],i=t[1];r._render(n,i)}))},oy._render=function(e,t){var n=d().filter(e,(function(e){return 22===e.forwardingPort}))[0];this.container.empty().append(l()(cy({ssh:n,canUse:t})))},oy.open=function(){var e=this;return ly(this.project.guid).then((function(t){var n=(0,a.Z)(t,2),i=n[0],r=n[1];e._render(i,r),e._bindEvents()}))},oy.close=function(){y.Z.off(this.container)};const uy=sy;var dy="Standard",py={"1gb":"1 Gb","2gb":"2 Gb","8gb":"8 Gb","4gb":"4 Gb","16gb":"16 Gb",gpu:"GPU",Standard:"Standard",cgroupv1:"cgroupv1"};n(25818);var fy=function e(t,n){if(!(this instanceof e))return new e(n,t);this.project=t,this.container=n},hy=fy.prototype,my=f().compile('<div id="project-gigabox-settings">\n  <form action="/">\n    <div class="main">\n      {{#if noSlots}}\n        <fieldset>\n          You have Standard Box.\n        </fieldset>\n      {{else}}\n      <fieldset class="gigabox-select">\n        <label for="gigabox-slot">Memory (RAM)</label>\n        <select id="gigabox-slot" name="gigabox-slot"></select>\n      </fieldset>\n      {{/if}}\n    </div>\n\n    <footer>\n      {{#unless inIde}}<a href="/home/projects" class="btn">Cancel</a>{{/unless}}\n      {{#unless noSlots}}<button class="btn btn-primary">Save</button>{{/unless}}\n    </footer>\n  </form>\n</div>\n');hy._updateProjectSlot=function(e){e.preventDefault(),this.container.find("button").disableButton("Saving...","loading"),this.container.find(":input").prop("disabled",!0);var t=this,n=this.container.find("#gigabox-slot").val(),r=n.split("/");r=n===dy?null:{boxType:r[1],ownedByOrg:r[0]};var a={guid:i.Z.currentProject.guid,gigaBoxSlot:r};b.ZP.ProjectManager.update(a).then((function(){k.Z.success("Project updated successfully")})).catch((function(e){var t=e&&e.message||"";k.Z.error("Project failed to update. Please try again."+t)})).finally((function(){t.container.find("button").enableButton(),t.container.find(":input").prop("disabled",!1)}))},hy._bindEvents=function(){y.Z.on.bind(y.Z,this.container)("submit.project-gigabox-settings","form",this._updateProjectSlot.bind(this))},hy._setSlot=function(e){var t=i.Z.currentProject.gigaBoxSlot,n=this.container.find("#gigabox-slot"),r=this.container.find("button");e?r.enableButton():r.disableButton(),n[0].selectize&&n[0].selectize.destroy();var a=d().reduce(e,(function(e,t){var n=d().reduce(t.slots,(function(e,n,i){return 0===n||e.push({value:t.org+"/"+i,label:py[i]+" - "+t.name}),e}),[]);return e.concat(n)}),[]);a.unshift({value:dy,label:dy}),a.sort((function(e,t){var n=function(e){if(e===dy)return 0;var t=parseInt(e,10);return isNaN(t)?e.charCodeAt(0):t};return n(e.label)-n(t.label)})),n.empty(),d().each(a,(function(e){var t=l()('<option value="'+e.value+'">'+e.label+"</option>");n.append(t)}));var s;s=null===t||t===dy?dy:t.ownedByOrg+"/"+t.boxType,n.find('option[value="'+s+'"]').attr("selected","selected"),n.selectize()},hy._openSlots=function(e){this.container.empty();var t=0===e.length;this.container.append(l()(my({inIde:!!l()(".ide").length,noSlots:t}))),!t&&this._setSlot(e),this._bindEvents()},hy.open=function(){var e,t=this;return(e=t.project,b.ZP.OrganizationManager.getMyOrganizations().then((function(t){var n;if(e.authorAssignment){var i=e.authorAssignment.course.organizationId,r=d().find(t,(function(e){return e.id===i}));n=r&&null!==r.gigaBoxes?[r]:[]}else n=d().filter(t,(function(e){return null!==e.gigaBoxes}));return d().map(n,(function(e){return{org:e.id,slots:e.gigaBoxes,name:e.details.name}}))})).catch((function(e){k.Z.error(e.message)}))).then((function(e){t._openSlots(e)})).catch((function(){t._openSlots(null)}))},hy.close=function(){var e=this.container.find("#gigabox-slot")[0];e&&e.selectize&&e.selectize.destroy(),y.Z.off(this.container)};const gy=fy;n(8151);var vy,by=f().compile('<header class="page-header">\n  <h2>\n    <a href="/home/projects">\n      <i class="ss-icon">briefcase</i> Projects\n    </a>\n    <small class="project-name">{{projectName}}\n      <small>Settings</small>\n    </small>\n  </h2>\n</header>\n\n<section class="filters" {{#if noSubscription}}style="display: none;"{{/if}}>\n  <ul class="tabbed">\n    <li class="active"><a href="#tab-general">General Settings</a></li>\n    {{#unless isAnonymous}}\n    {{#if showStackSettings}}\n    <li><a href="#tab-stack">Stack Settings</a></li>\n    {{/if}}\n    <li><a href="#tab-forwarding">Forwarding Settings</a></li>\n    {{#if showGigaBoxSettings}}\n    <li><a href="#tab-gigabox">GigaBoxes Settings</a></li>\n    {{/if}}\n    {{/unless}}\n  </ul>\n</section>\n<div class="scrollable">\n  <section class="data {{#if noSubscription}}no-subscription{{/if}}"></section>\n</div>\n'),yy=function e(t,n,r,a,s){if(!(this instanceof e))return new e(t,n,r,a,s);n=n||i.Z.currentProject,this.project=n,this.container=t;var o=2===n.generation,c=i.Z.currentUser.get("details").get("type"),u=o&&"STUDENT"!==c,d=l()(by({projectName:n.name,isAnonymous:i.Z.currentUser.isAnonymous(),noSubscription:r,showStackSettings:o,showGigaBoxSettings:u})),p=this;y.Z.on(d,"click.project-settings",".tabbed a",this._handleTabClick.bind(this));var f=window.location.hash.replace("#tab-","")||s&&s.tabName||"general";this._openTab(f,d,r).then((function(){return m.ZP.showFastFade(p.container,d)})).then((function(){p.container.find("#project-name").focus()}))},wy=yy.prototype;wy._handleTabClick=function(e){e.preventDefault();var t=l()(e.target).attr("href");if(null!==t.match(/#tab-/)){var n=t.replace("#tab-","");this._openTab(n)}},wy._openTab=function(e,t){var n=this.container.find(".tabbed li");d().isUndefined(t)?t=this.container.find(".data"):(n=t.find(".tabbed li"),t=t.find(".data"));var i=n.find('a[href="#tab-'+e+'"]').parent();switch(n.removeClass("active"),i.addClass("active"),vy&&vy.close(),e){case"general":vy=new kb(this.project,t);break;case"stack":vy=new ay(this.project,t);break;case"forwarding":vy=new uy(this.project,t);break;case"gigabox":vy=new gy(this.project,t);break;default:return}return mb().start(),vy.open().catch((function(){})).finally((function(){return mb().done()}))},wy.cleanup=function(){y.Z.off(this.container,".project-settings"),vy&&vy.close(),vy=void 0};const _y=yy;var ky=null,Py=null;function Zy(){window.location="/home/projects"}function xy(e){i.Z.ide.open("project-settings",void 0,{tabName:e.tab})}function Cy(e){var t,n=l()("#content").find(".dashboard");n.block(),(t=e.projectName,g.Z.loadInfo(i.Z.currentUser.name(),t)).then((function(e){n.unblock(),Sy(e)})).catch((function(t){if(n.unblock(),t){var r=t.message?t.message:t;"Projects are only available if you have an active subscription"===r?b.ZP.ProjectManager.all(i.Z.currentUser.name()).then((function(t){var n=d().find(t,{pathName:e.projectName});n&&Sy({guid:n.guid,name:n.name},!0)})):k.Z.error(r)}}))}function Sy(e,t){var n=l()("#dashboard-content"),i=l()('<div id="project-settings">');n.empty(),m.ZP.showFastFade(n,i),ky=y.Z.subscribe("project:preferencesUpdated:#projectId",Zy),Py=_y(i,e,t)}function Ey(){var e=l()("#dashboard-content").find("#project-settings");return m.ZP.hideFastFade(e).then((function(){i.Z.currentProject=null,y.Z.unsubscribe(ky),ky=null,Py&&Py.cleanup(),e.remove()}))}i.Z.register({info:fb,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_y);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),y.Z.subscribe("command:project:preferences",xy),y.Z.subscribe("command:project:preferences-tab:#tab",xy),y.Z.subscribe("dashboard:preferences:open:#projectName",Cy),y.Z.subscribe("dashboard:preferences:close",Ey),y.Z.subscribe("dashboard:preferences:refreshAll:#projectName",(function(e){Ey().then(Cy.bind(null,e))}));const Iy=JSON.parse('{"name":"project-permissions","description":"Project Permissions","codio":{"global":true,"noFile":true,"title":"Project Permissions","urls":"project-permissions"}}');function Ty(){this.defer=m.ZP.promise.deferred(),this.dataPromise=this.defer.promise,As().apply(this,arguments)}function jy(){}function Ay(){}n(44941),(0,m.ED)(Ty,As()),Ty.prototype.getLocalResults=function(e,t){this.dataPromise.then((function(e){t(e)}))},(0,m.ED)(jy,Ts()),jy.prototype.getSearchProps=function(){return["name"]},jy.prototype.getSearchTokens=function(){return{name:"Name"}},(0,m.ED)(Ay,Ts()),Ay.prototype.getSearchTokens=function(){return{notExist:"Item not exist in a collection"}},Ay.prototype.setExclude=function(e){this.currentMembers=d().keys(e)},Ay.prototype.doNotExist=function(e,t){return!d().includes(this.currentMembers,t.id)};const Oy=function(e){var t=new(Es()),n=new Ay;t.setExclude=n.setExclude.bind(n);var i=new Ty([n,new jy]);return t.addProvider(i),e(i),t};function Dy(e,t){var n;(n=e,n.then((function(e){var t=[];return d().each(e,(function(e){d().each(e.members,(function(e){t.push({id:e.id,name:e.name,actual_name:e.actualName})}))})),t=d().uniqBy(t,(function(e){return e.name})),t})).catch((function(){return[]}))).then(t.defer.resolve)}const Ny=function(e){return Oy(Dy.bind(null,e))};function My(e,t){(function(e){return e.then((function(e){var t=[];return d().each(e,(function(e){d().each(e.teams,(function(n){"__owners__"===n.id&&(n.name="Owners"),t.push({name:n.name,id:n.id,org_id:e.id,org_name:e.details.name,type:"team"})}))})),t})).catch((function(){return[]}))})(e).then(t.defer.resolve)}const Fy=function(e){return Oy(My.bind(null,e))};function Ry(e,t){(function(e){return e.then((function(e){var t=[];return d().each(e,(function(e){t.push({name:e.details.name,id:e.id,type:"org"})})),t})).catch((function(){return[]}))})(e).then(t.defer.resolve)}const Ly=function(e){return Oy(Ry.bind(null,e))},Uy={users:function(e){return Ny(e)},teams:function(e){return Fy(e)},orgs:function(e){return Ly(e)}};n(44941);var By=f().compile('<div id="project-permissions">\r\n\r\n    <h2>Project Permissions <small id="project-name">{{name}}</small></h2>\r\n\r\n    <div class="project-permissions-type-body">\r\n        <div>\r\n            <label class="permissions-autoc-label" for="name_typeahead">Search:</label>\r\n            <div class="permissions-autoc"></div>\r\n        </div>\r\n\r\n        <table class="table table-striped">\r\n            <tbody class="permissions-content"></tbody>\r\n        </table>\r\n    </div>\r\n\r\n</div>\r\n'),qy=f().compile('{{#each permissions}}\r\n    <tr class="permission-item permission-type-{{access}}" data-id="{{id}}" data-type="{{type}}">\r\n        <td>{{name}}{{#if org_name}}&nbsp;-&nbsp;{{org_name}}{{/if}}{{#if username}}&nbsp;({{username}}){{else}}&nbsp;({{type}}){{/if}}</td>\r\n        <td>\r\n            {{#if is_owner}}\r\n                <div class="permission-access btn-group">\r\n                    <button type="button" class="btn btn-small btn-info active" data-type="OWNER">Owner</button>\r\n                </div>\r\n            {{else}}\r\n                <div class="permission-access btn-group" {{#if is_not_current}}data-toggle="buttons-radio"{{/if}}>\r\n                    <button type="button" class="btn btn-small {{#if read_access}} active{{/if}}" data-type="READ">Read</button>\r\n                    <button type="button" class="btn btn-small {{#if write_access}} active{{/if}}" data-type="WRITE_FILES">Write</button>\r\n                    <button type="button" class="btn btn-small {{#if admin_access}} active{{/if}}" data-type="ADMIN">Admin</button>\r\n                </div>\r\n            {{/if}}\r\n        </td>\r\n        <td>\r\n            {{#if is_owner}}\r\n                &nbsp;\r\n            {{else}}\r\n                <button class="permission-btn-delete icon-button" aria-label="Remove permission" title="Remove permission">\r\n                    <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\r\n                </button>\r\n            {{/if}}\r\n        </td>\r\n    </tr>\r\n{{/each}}\r\n'),Hy=f().compile("{{actual_name}} <span>({{name}})</span>\n"),Wy=f().compile("<p><strong>{{name}}</strong> – {{org_name}}</p>\n"),zy="READ",Gy="owner";function Vy(e,t,n){e.search("notExist: "+t,(function(){n.apply(null,arguments)}))}function Ky(){var e=l()('<input id="name_typeahead" type="text" placeholder="search for a user, organization or team...">');this.placeForAuto.append(e);var t=b.ZP.OrganizationManager.getMyOrganizations({withTeams:!0,withMembers:!0,populateMembersInfo:!0,withMembersFirstLastName:!0});this.userSearch=Uy.users(t),this.teamSearch=Uy.teams(t),this.orgSearch=Uy.orgs(t),this.updateSearch(),this.autoSelect=e.typeahead({highlight:!0,autoselect:!1,minLength:1},{name:"user",displayKey:"name",source:Vy.bind(this,this.userSearch),templates:{header:"<h3>Users</h3>",suggestion:Hy}},{name:"org",displayKey:"name",source:Vy.bind(this,this.orgSearch),templates:{header:"<h3>Orgs</h3>"}},{name:"team",displayKey:"name",source:Vy.bind(this,this.teamSearch),templates:{header:"<h3>Teams</h3>",suggestion:Wy}})}function Yy(e,t){var n=!0;return"user"===t&&(n=this.userInfo.ownerId!==e&&this.userInfo.currentUserId!==e),n}function Jy(){var e=zy,t=this,n=function(i){var r=d().clone(i),a=r&&r.id,s=a,o=r&&r.name,c=r&&r.type;if(a&&o&&Yy.call(t,a,c)){s=a=l().isPlainObject(a)?a.id:a;var u=!1,p="Users";switch(c){case"org":u=!t.permOrgs[s],p="Orgs";break;case"user":u=!t.permUsers[s],p="Users";break;case"team":s=r.org_id+":"+a,u=!t.permTeams[s],p="Teams"}if(!u&&("OWNER"===e||e===t["perm"+p][s]))return;t["perm"+p][s]=e,t["data"+p]=d().remove(t["data"+p],(function(e){return e.id!==a}));var f=r;r.actual_name&&(r.username=r.name,r.name=r.actual_name),t["data"+p].push(f),$y.call(t);var h=u?"onAdded":"onChanged";t.params[h]&&t.params[h].call(t,r.id,c,e),n=null}};this.activeItem&&n(this.activeItem)}function Qy(){Ky.call(this);var e=this,t=this.place.find("#name_typeahead");function n(n){n.type="user",e.activeItem=n,Jy.call(e),e.autoSelect.focus(),t.typeahead("val",""),e.activeItem=null}y.Z.on(t,"keyup",(function(i){var r=t.val();13===i.keyCode&&r&&e.userSearch.search('notExist: "'+r+'"',(function(i){if(d().isEmpty(i)){var a=d().includes(r,"@")?"findByEmail":"findByUsername";b.ZP.AccountManager[a](r).then((function(i){e.permUsers[i.account]?k.Z.info("User is already added."):R.Z.showConfirm({title:"Add user permission confirmation",description:"This user is not a member of your organizations. Are you sure you want to give permission to this user?",onClose:function(r){if(t.typeahead("val",""),r){var a={actual_name:i.get("details").get("actual_name"),id:i.account,name:i.get("details").get("name"),type:"user"};n.call(e,a)}}})})).catch((function(){k.Z.error("User not found.")}))}else if(1===i.length){var s=i[0];n.call(e,s)}}))})),y.Z.on(e.autoSelect,"typeahead:selected",(function(n,i,r){i.type=r,e.activeItem=i,Jy.call(e),e.autoSelect.focus(),t.typeahead("val","")})),y.Z.on(e.autoSelect,"typeahead:cursorchanged",(function(t,n,i){var r=e.autoSelect.parent().find(".tt-dropdown-menu");r.find(".tt-suggestion").first().attr("class")===r.find(".tt-cursor").attr("class")&&r.scrollTop(0),n.type=i,e.activeItem=n})),y.Z.on(e.autoSelect,"typeahead:closed",(function(){e.activeItem=null}))}function Xy(e,t){var n,i=[];switch(t){case"user":i=this.dataUsers;break;case"team":i=this.dataTeams;var r=e.split(":");n=r.shift(),e=r.join(":");break;case"org":i=this.dataOrgs}for(var a=0,s=i.length;a<s;a++)if(i[a].id===e&&("team"===t&&i[a].org_id===n||"team"!==t))return i[a];return null}function $y(){var e,t,n=[],i=[],r=[],a=this.permUsers,s=this.permOrgs,o=this.permTeams;for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(t=Xy.call(this,c,"user"))&&(e={id:c,username:t.username,name:t.name,type:"user",read_access:"READ"===a[c],write_access:"WRITE_FILES"===a[c],admin_access:"ADMIN"===a[c],is_owner:this.userInfo.ownerId===c,is_not_current:this.userInfo.currentUserId!==c},n.push(e));for(c in o)Object.prototype.hasOwnProperty.call(o,c)&&(t=Xy.call(this,c,"team"))&&(e={id:c,name:t.name,org_name:t.org_name,type:"team",read_access:"READ"===o[c],write_access:"WRITE_FILES"===o[c],admin_access:"ADMIN"===o[c],is_not_current:!0},r.push(e));for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&(t=Xy.call(this,c,"org"))&&(e={id:c,name:t.name,type:"org",read_access:"READ"===s[c],write_access:"WRITE_FILES"===s[c],admin_access:"ADMIN"===s[c],is_not_current:!0},i.push(e));var l,u,d,p=function(e,t){return l=e.name,u=t.name,l>u?-1:l<u?1:0};n=n.sort(p),r=r.sort(p),i=i.sort(p),n=n.sort((function(e,t){return l=e.access,u=t.access,l!==u?l===Gy?d=1:u===Gy&&(d=-1):d=0,d})),n=i.concat(r.concat(n)),this.list.empty().append(qy({permissions:n})),this.reDrawObjectSelector()}function ew(){var e=this.list,t=this;y.Z.bind(e,"click",(function(n){var i=l()(n.target),r=i.closest(".permission-item",e),a=i.closest(".permission-item",e).data("id"),s=null;if(a&&Yy.call(t,a)){var o=i.closest(".permission-access button",e);if(o.length>0){s=r.data("type");var c=o.data("type"),u=m.ZP.promise.deferred();u.promise.then((function(){if("OWNER"!==c){switch(s){case"user":t.permUsers[a]=c;break;case"team":t.permTeams[a]=c;break;case"org":t.permOrgs[a]=c}t.params.onChanged&&t.params.onChanged.call(t,a,s,c)}return $y.call(t),!1})),"ADMIN"===c&&function(e,n,i){var r=!0;switch(n){case"user":r=t.permUsers[e]!==i;break;case"team":r=t.permTeams[e]!==i;break;case"org":r=t.permOrgs[e]!==i}return r}(a,s,c)?function(){var e=m.ZP.promise.deferred(),t=new R.Z.showConfirm({title:"Attention",description:"Assigning Admin permissions to another user entails considerable potential security risks and allows access to the entire contents of the box, including private keys (such as your Codio private key), API keys your code might contain and private data that you might store on your box.\n\nIf you are sure that you are comfortable with this, then please click OK below.",buttons:[{title:"Ok",type:1,onClick:function(){return t.close(R.Z.IDYES)}},{title:"Cancel",onClick:function(){return t.close(R.Z.IDCANCEL)}}],onClose:function(t){return t?e.resolve():e.reject(new Error("cancel assign admin permissions")),!0}});return e.promise}().then(u.resolve).catch($y.bind(t)):u.resolve()}if(i.closest(".permission-btn-delete",e).length>0&&t.permUsers[a]!==Gy){switch(s=r.data("type")){case"user":delete t.permUsers[a];break;case"team":delete t.permTeams[a];break;case"org":delete t.permOrgs[a]}t.params.onDeleted&&t.params.onDeleted.call(t,a,s)}$y.call(t)}}))}var tw=function(e,t,n){this.params=t||{},this.userInfo=n||{},this.dataUsers=d().clone(t.users.data||[]),this.permUsers=d().clone(t.users.permissions||{}),this.dataOrgs=d().clone(t.organizations.data||[]),this.permOrgs=d().clone(t.organizations.permissions||{}),this.dataTeams=d().clone(t.teams.data||[]),this.permTeams=d().clone(t.teams.permissions||{}),this.params.autocomplete=!1!==this.params.autocomplete,this.autoSelect=null,this.place=l()(By({name:i.Z.currentProject.name})),this.list=this.place.find(".permissions-content"),this.placeForAuto=this.place.find(".permissions-autoc"),this.activeItem=null,Qy.call(this),$y.call(this),ew.call(this),e.append(this.place),e.find("#name_typeahead").focus()},nw=tw.prototype;nw.reDrawObjectSelector=function(){},nw.data=function(e){return e&&(this.dataUsers=d().clone(e)),d().clone(this.dataUsers)},nw.redraw=function(e){this.dataUsers=d().clone(e.users.data||[]),this.permUsers=d().clone(e.users.permissions||{}),this.dataOrgs=d().clone(e.organizations.data||[]),this.permOrgs=d().clone(e.organizations.permissions||{}),this.dataTeams=d().clone(e.teams.data||[]),this.permTeams=d().clone(e.teams.permissions||{}),$y.call(this)},nw.permissions=function(){var e=[];return d().each(this.permUsers,(function(t,n){"OWNER"!==t&&e.push({accountId:n,permission:t})})),d().each(this.permTeams,(function(t,n){var i=n.split(":"),r=i.shift(),a=i.join(":");e.push({orgId:r,teamId:a,permission:t})})),d().each(this.permOrgs,(function(t,n){e.push({orgId:n,permission:t})})),e},nw.updateSearch=function(){this.userSearch.setExclude(this.permUsers),this.teamSearch.setExclude(this.permOrgs),this.orgSearch.setExclude(this.permTeams)},nw.destroy=function(){this.params.autocomplete&&this.autoSelect.typeahead("destroy"),this.autoSelect=null,this.dataUsers=null,this.permUsers=null,this.dataOrgs=null,this.permOrgs=null,this.dataTeams=null,this.permTeams=null,this.params=null,this.list.remove(),this.list=null,this.place.remove(),this.place=null};const iw=tw;var rw=null,aw=function e(t){if(!(this instanceof e))return new e(t);var n=i.Z.currentProject;if(n&&n.isAdmin&&!n.isBook){this.project=n,this.container=t,this.container.block(),this.parse();var r=this;this.eventOnUpdate=y.Z.subscribe("project:preferencesUpdated",this._onUpdated.bind(this)),y.Z.subscribe("project:permissionsChanged:#projectId",(function(){r.parse()}))}},sw=aw.prototype;function ow(){var e=rw.permissions();return i.Z.currentProject.setPermissions(e).then((function(){rw.updateSearch()}))}sw._onUpdated=function(){this.container.find("#project-name").html(this.project.name)},sw.close=function(){rw=null,y.Z.unsubscribe(this.eventOnUpdate)},sw.parse=function(){var e=this,t=this.project.permissions||{},n=[],i=[],r=[];d().each(t,(function(e){e.accountId&&n.push(e.accountId),e.orgId&&(r.push(e.orgId),e.teamId&&i.push({id:e.teamId,orgId:e.orgId}))})),r=d().uniq(r),n.push(this.project.owner.id),Promise.all([b.ZP.AccountManager.all(null,n),b.ZP.OrganizationManager.getMyOrganizations({withTeams:!0}).catch((function(e){}))]).then((function(n){var i=(0,a.Z)(n,2),r=i[0],s=i[1],o={},c=[];l().each(r,(function(e,n){d().each(t,(function(e){if(n.id===e.accountId)return o[n.id]=e.permission,!1})),c.push({id:n.id,username:n.name,name:n.actual_name})}));var u={},p=[],f={},h=[];d().each(s,(function(e){d().each(t,(function(t){if(e.id===t.orgId&&!t.teamId)return f[e.id]=t.permission,!1})),h.push({id:e.id,name:e.details.name}),d().each(e.teams,(function(n){var i=e.id+":"+n.id;d().each(t,(function(t){if(e.id===t.orgId&&n.id===t.teamId)return u[i]=t.permission,!1})),p.push({id:n.id,name:n.name,org_name:e.details.name,org_id:e.id})}))})),o[e.project.owner.id]="OWNER",e.show({users:{data:c,permissions:o},teams:{data:p,permissions:u},organizations:{data:h,permissions:f}})})).catch((function(){e.container.unblock()}))},sw.show=function(e){var t=this.container;null===rw&&(t.empty(),t.unblock().block());var n=function(e,t){return e.name<t.name?-1:e.name>t.name?1:0};if(e.users&&l().isArray(e.users.data)&&e.users.data.sort(n),e.teams&&l().isArray(e.teams.data)&&e.teams.data.sort(n),e.organizations&&l().isArray(e.organizations.data)&&e.organizations.data.sort(n),null!==rw){var r=rw.permissions();d().isEqual(r,e)||rw.redraw(e)}else{var a={onAdded:ow,onDeleted:ow,onChanged:ow};l().extend(e,a);var s={owner:this.project.owner.name,ownerId:this.project.owner.id,currentUser:i.Z.currentUser.name(),currentUserId:i.Z.currentUser.getAccountUid()};t.unblock(),rw=new iw(t,e,s)}};const cw=aw;i.Z.register({info:Iy,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cw);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),y.Z.subscribe("command:project:permissions",(function(){i.Z.ide.open("project-permissions")}));const lw=JSON.parse('{"name":"deployment","description":"Deployment extension","codio":{"global":true,"title":{"targets":"Manage Targets","deploy":"Deploy..."},"urls":"deployment"}}'),uw=JSON.parse('{"key_deploy_current_file":{"key":{"mac":"Cmd+Alt+D","win":"Ctrl+Alt+D"},"desc":"Deploy current file to default deployment target"},"deploy":{"desc":"Open Deploy tab"},"manage_targets":{"desc":"Manage deployment targets"}}');var dw=n(50826),pw=y.Z.create(n(38830));const fw=function(e){var t=this,n=!1;y.Z.on(e.content.find("#deployment-target-list ul"),"click.deployment","button",(function(e){var n=l()(this).parents("li").data("uid");t[l()(this).data("action")](n,this,e)})),this.edit=function(t){b.ZP.DeployManager.getTarget(t).then((function(t){e.form.renderForEdit(t)})).catch((function(){k.Z.error("Unable to fetch target data. Please try again.")}))},this.history=function(t){e.history.renderFor(t),e.selectTarget(t)},this.defaultTarget=function(e,t){if(!n){t=l()(t),n=!0,t.addClass("setting");var r=i.Z.currentProject.guid,a=t.hasClass("active")?null:e;b.ZP.DeployManager.setDefault(a,r).then((function(){s(),pw.defaultTargetUpdated({targetId:a}),dw.ZP.updateMenu()})).catch((function(){s(),k.Z.error("Unable to fetch target data. Please try again.")}))}function s(){n=!1,t.removeClass("setting")}},this.remove=function(t,n){var i=l()(n).closest("li"),r=i.find("h4").text();if(confirm('Are you sure you wish to delete the target named "'+r+'"?')){var a=i.parent();i.remove(),0===a.find("li").length&&(a.parent().parent().find("> .alert").removeClass("hide"),e.form.renderForCreate()),b.ZP.DeployManager.deleteTarget(t).then((function(){k.Z.success('Target "'+r+'" successfully deleted.'),pw.targetsUpdated()})).catch((function(){k.Z.error('Error deleting target "'+r+'"')}))}}};var hw=n(97044),mw=n(2514),gw=b.ZP.ProjectManager,vw={getRemotes:function(){return i.Z.currentProject?gw.git(i.Z.currentUser.name(),i.Z.currentProject.name,"git remote -v"):Promise.reject(new Error("No project"))}};const bw=vw;var yw=f().compile('<form action="/" method="post" id="deployment-target-creation" class="form-horizontal" novalidate>\n\n    <h3 class="page-header">\n        Creating a New Target\n        <small><a href="https://docs.codio.com/common/develop/ide/tools/deployment.html#createmanage-a-target" target="_blank"><i class="ss-icon">help</i> Help</a></small>\n    </h3>\n\n    <fieldset id="deployment-target-common-inputs">\n        <input type="hidden" name="deploy-target-id" value="{{uid}}" data-required="true">\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="name">\n                Name: <i class="ss-icon">help</i>\n                <span class="hint-text">Used to identify this deployment target. Eg. \'production\' or \'staging\'</span>\n            </label>\n            <div class="controls">\n                <input type="text" id="name" name="deploy-target-name" class="input-xlarge" value="{{name}}" placeholder="Target name..." maxlength="80" required data-required="true">\n            </div>\n        </div>\n\n        <div class="control-group" id="preview-base-path-wrapper">\n            <label class="control-label hint hint-top" for="previewBasePath">\n                Preview Base Path: <i class="ss-icon">help</i>\n                <span class="hint-text">This base path will be prepended to the path of the file that is being previewed</span>\n            </label>\n            <div class="controls">\n                <input type="text" id="previewBasePath" name="deploy-target-previewBasePath" class="input-xlarge" value="{{previewBasePath}}" data-skiphidden="true" data-value="{{previewBasePath}}" placeholder="Preview Base Path..." data-required="true">\n            </div>\n        </div>\n\n        {{#if allowSourceSelection}}\n            <div class="control-group">\n                <label class="control-label hint hint-top" for="deployment-target-source">\n                    Source: <i class="ss-icon">help</i>\n                    <span class="hint-text">Will you deploy the whole project or just a specific directory within your project?</span>\n                </label>\n                <div class="controls">\n                    <select name="deploy-target-source[type]" data-required="true">\n                        <option value="project" {{#equals source.type \'PROJECT\'}}selected="true"{{/equals}}>Whole project</option>\n                        <option value="directory" {{#equals source.type \'DIRECTORY\'}}selected="true"{{/equals}}>Directory...</option>\n                    </select>\n\n                    <select name="deploy-target-source[path]" class="hide" id="deployment-target-source" data-required="true"></select>\n                </div>\n            </div>\n        {{/if}}\n\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="deployment-destination-type">\n                Destination: <i class="ss-icon">help</i>\n                <span class="hint-text">Where will you deploy to?</span>\n            </label>\n            <div class="controls">\n                <select name="deploy-target-destination[type]" id="deployment-destination-type" required data-required="true">\n                    <option value="" {{#equals destination.type null}}selected="true"{{/equals}}>Select destination...</option>\n                    <option value="ftp" {{#equals destination.type \'FTP\'}}selected="true"{{/equals}}>FTP...</option>\n                    <option value="sftp" {{#equals destination.type \'SFTP\'}}selected="true"{{/equals}}>SFTP...</option>\n                    <option value="rsync" {{#equals destination.type \'RSYNC\'}}selected="true"{{/equals}}>RSYNC...</option>\n                    <option value="parse" {{#equals destination.type \'PARSE\'}}selected="true"{{/equals}}>Parse</option>\n                    <option value="nodejitsu" {{#equals destination.type \'NODEJITSU\'}}selected="true"{{/equals}}>Nodejitsu...</option>\n                    <option value="git" {{#equals destination.type \'GIT\'}}selected="true"{{/equals}}>Git</option>\n                </select>\n                <p class="alert" id="deployment-paid-reminder"><strong>Paid plan reminder</strong>: Deploying to Codio requires that you have a <a href="javascript:void(0)" id="paid-subscription-link">paid Subscription.</a></p>\n            </div>\n        </div>\n    </fieldset>\n\n    {{> form-ftp}}\n    {{> form-sftp}}\n    {{> form-rsync}}\n    {{> form-nodejitsu}}\n    {{> form-git}}\n\n    <div class="form-actions">\n        <button type="submit" class="btn btn-primary">Create Target</button>\n        <button type="reset" class="btn">Cancel</button>\n    </div>\n\n</form>\n'),ww=y.Z.create(n(38830)),_w="deploy-target-",kw={parent:null,form:null,getTargetSourcesFromObject:function(e,t,n){if(e&&e.children){"dir"===e.type&&(t.dirs=t.dirs||[],n.push(e.name),t.dirs.push({path:"/"+n.join("/")}));var i=this;l().each(e.children,(function(e,r){i.getTargetSourcesFromObject(r,t,n)})),n.pop()}},renderForEdit:function(e){this.parent.selectTarget(e),this.render(),this.form.find("h3").text('Editing "'+e.name+'" Target'),this.form.find("button[type=submit]").text("Save Target"),this.form.find("#previewBasePath").blur(),this.parent.hideTargetList()},renderForCreate:function(){this.render(),this.parent.target&&this.parent.deselectTarget(),this.form.find("input[name=deploy-target-id]").val(""),this.form.find("h3").text("Creating a New Target"),this.form.find("button[type=submit]").text("Create Target"),this.parent.hideCreateButton(),this.parent.hideTargetList()},render:function(){var e=this,t=this.parent.target||{};t.allowSourceSelection=hw.ZP.ALLOW_SOURCE_SELECTION;var n=yw(t);this.form=l()(n);var i=this.form.find('select[name="deploy-target-destination[type]"]');if(y.Z.on(i,"change.deployment",l().proxy(xw,null,this)),xw.call(i,this),hw.ZP.ALLOW_SOURCE_SELECTION){var r=this.form.find('select[name="deploy-target-source[type]"]');y.Z.on(r,"change.deployment",l().proxy(Cw,null,this)),Cw.call(r,this)}y.Z.on(this.form,"submit.deployment",l().proxy(Pw,null,this)),this.parent.content.find("#deployment-target-location").html(this.form),this.form.find("input[name=deploy-target-name]").focus(),y.Z.on(this.form.find("button[type=reset]"),"click.deployment",(function(){e.close()}));var a=this.form.find("#deploymentTargetNodejitsuGenerateApiToken");y.Z.on(a,"click.deployment",(function(){mw.Z.generateApiToken((function(t){e.form.find("#deploymentTargetNodejitsuApiToken").val(t)}))}));var s=this.form.find("#previewBasePath");y.Z.on(s,"focus",(function(){var e=l()(this),t=e.data("value");t&&e.val(t)})),y.Z.on(s,"blur",(function(){var e=l()(this),t=e.val();e.data("value",t).val(t.replace(/^https?:\/\//,""))})),y.Z.on(this.form.find("#paid-subscription-link"),"click",(function(){ww.showSubscription()}));var o=this.form.find("#deploymentTargetRemote"),c=function(){var t=e.form.find("#deploymentNewRemote");""===o.val()?t.removeClass("hide"):t.addClass("hide")};y.Z.on(o,"change.deployment",c),o.prop("disabled","disabled"),bw.getRemotes().then((function(e){var t={},n=[];l().each(e.output,(function(e,i){var r=i.match(/^([^\s]*)\s([^\s]*)/);if(null!==r){var a={name:r[1],link:r[2]};if(!d().has(t,a.name)){var s=l()("<option></option>").attr("value",a.name).text(a.name);n.push(s),t[a.name]=1}}})),o.prepend(n)})).catch((function(){})).finally((function(){(t.destination&&t.destination.remote?o.find('option[value="'+t.destination.remote+'"]'):o.find("option:first")).attr("selected","selected"),o.attr("disabled",!1),c()}))},close:function(){this.form.remove();setTimeout(function(){this.parent.reset()}.bind(this),0)},disable:function(){this.form.find("button[type=submit]").disableButton("Creating...","loading"),this.form.find(":input").prop("disabled",!0)},enable:function(){this.form.find("button[type=submit]").enableButton(),this.form.find(":input").prop("disabled",!1)},addErrorToInput:function(e,t){this.enable(),m.ZP.addErrorToInput(e,t),e.focus()},fields:function(){var e={},t={},n=this;return l()(this.form.find('[data-required="true"]').serializeArray()).each((function(){var i=':input[name="'+this.name+'"][data-required="true"]',r=n.form.find(i),a={value:"deploy-target-previewBasePath"===this.name&&r.data("value")?r.data("value"):l().trim(this.value),element:r},s=/^(.+)\[(.+)\]+$/.exec(this.name);s?(e[s[1]]||(e[s[1]]={},t[s[1]]={}),e[s[1]][s[2]]=a,t[s[1]][s[2]]=a.value):(e[this.name]=a,t[this.name]=a.value)})),{fields:e,values:t}}};function Pw(e,t){if(t.preventDefault(),t.stopPropagation(),!e.form.find("button[type=submit]").hasClass("disabled")){var n=!0,r=e.fields(),a=function(e,t){return 0===t.indexOf(_w)?t.substr(14):t},s=d().mapKeys(r.fields,a),o=d().mapKeys(r.values,a);if(e.disable(),l().each(s,(function(){if(!Zw.call(this,e))return n=!1})),n){var c,u=l().extend({projectGuid:i.Z.currentProject.guid},o),p=function(e){k.Z.error(["Unable to create/update your target at this time. (<code>",e,"</code>). Please try again."].join(""))},f=!e.parent.target;if(e.parent.target){var h=u.id;c=b.ZP.DeployManager.saveTarget(h,u)}else c=b.ZP.DeployManager.createTarget(u);c.then((function(t){e.parent.history.markDeployedTargets([u]).then((function(n){u=n[0],ww.targetsUpdated();var i='Target "'+u.name+'" successfully ';f?(e.parent.appendTarget(l().extend(u,{uid:t.message})),e.close(),e.parent.deselectTarget(),i+="created."):(e.parent.updateTarget(l().extend(u,{uid:h})),e.close(),e.parent.deselectTarget(),i+="updated."),k.Z.success(i)})).catch(p)})).catch(p).finally(l().proxy(e,"enable"))}}}function Zw(e){if(!this.element){var t=!0;return l().each(this,(function(){if(!Zw.call(this,e))return t=!1})),t}if(this.element.is(":hidden")&&this.element.data("skiphidden"))return!0;if(this.element[0].required&&(null===this.value||""===this.value))return e.addErrorToInput(this.element,"Field is required"),!1;return"previewBasePath"!==this.element[0].id||""===this.value||/^https?:\/\//.test(this.value)?!("deploy-target-destination[host]"===this.element[0].name&&!m.ZP.validateHostname(this.value))||(e.addErrorToInput(this.element,"You did not enter a valid hostname. Please make sure it does not contain any protocol (http/https) or other invalid characters."),!1):(e.addErrorToInput(this.element,"Path should start from http:// or https://"),!1)}function xw(e){var t=l()(this).val();e.form.find(".deployment-target").addClass("hide").find("input, textarea, select").prop("required",!1).attr("data-required",!1);var n=e.form.find("#deployment-target-"+t+"-inputs");n.removeClass("hide").find("input, textarea, select").prop("required",!0).attr("data-required",!0).first().focus(),"sftp"===t&&n.find("#deploymentTargetSFtpPassword").prop("required",!1),"rsync"===t&&n.find("#deploymentTargetRSyncPassword").prop("required",!1),"git"===t&&n.find("#deploymentTargetRemote").prop("required",!1);var r=e.form.find("button[type=submit]");r.addClass("disabled"),O.api.getCachedSubscriptions().then((function(n){var a=O.hasAnyUsableSubscription(n),s=e.form.find("#deployment-paid-reminder");i.Z.currentUser.isInTrial||a||"codio"!==t?(s.hide(),r.removeClass("disabled")):(s.show(),r.addClass("disabled"))})).catch((function(e){var t=e.message;return k.Z.error(t)}));var a=e.form.find("#preview-base-path-wrapper");"codio"===t?a.hide().find("input").val(""):a.show()}function Cw(e){var t={},n=e.parent.target;e.getTargetSourcesFromObject(i.Z.currentProject,t,[]);var r=e.form.find("#deployment-target-source");r.empty();switch(l()(this).val()){case"directory":r.removeClass("hide").attr("data-required",!0).attr("name","deploy-target-source[path]"),l().each(t.dirs,(function(e,t){var i=l()('<option value="'+t.path+'">'+t.path+"</option>");n&&n.source&&t.path===n.source.path&&i.prop("selected",!0),r.append(i)}));break;case"project":r.addClass("hide").attr("data-required",!1)}}ho.Z.registerPartial("form-ftp",'<fieldset class="hide deployment-target" id="deployment-target-ftp-inputs">\n    <legend class="deployment-target-ftp">\n        FTP Details\n        <small><a href="https://docs.codio.com/common/develop/ide/tools/deployment.html#ftp-target-type" target="_blank"><i class="ss-icon">help</i> Help</a></small>\n    </legend>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetFtpHostname">\n            Hostname: <i class="ss-icon">help</i>\n            <span class="hint-text">The host name of your FTP server. You may append the port name using url:port.</span>\n        </label>\n        <div class="controls">\n            <input type="text" id="deploymentTargetFtpHostname" name="deploy-target-destination[host]" value="{{destination.host}}" placeholder="ftp.mydomain.com"/>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetFtpUsername">\n            Username: <i class="ss-icon">help</i>\n            <span class="hint-text">The username of your FTP server.</span>\n        </label>\n        <div class="controls">\n            <input type="text" id="deploymentTargetFtpUsername" name="deploy-target-destination[user]" value="{{destination.user}}" placeholder="myusername"/>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetFtpPassword">\n            Password: <i class="ss-icon">help</i>\n            <span class="hint-text">The password for your FTP server.</span>\n        </label>\n        <div class="controls">\n            <input type="password" id="deploymentTargetFtpPassword" name="deploy-target-destination[password]" value="{{destination.password}}" placeholder="mypassword"/>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetFtpPath">\n            Destination path: <i class="ss-icon">help</i>\n            <span class="hint-text">The path on your FTP server where we will deploy your project to.</span>\n        </label>\n        <div class="controls">\n            <input type="text" id="deploymentTargetFtpPath" name="deploy-target-destination[path]" value="{{destination.path}}" placeholder="/some/path/on/target/server"/>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <div class="controls">\n            <label class="checkbox">\n                <input type="checkbox" id="deploymentTargetFtpCleanup" name="deploy-target-destination[cleanupNeeded]" value="true" {{#if destination.cleanupNeeded}}checked="checked"{{/if}} />\n                Empty destination path before each deploy?\n            </label>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label for="deploymentTargetFtpTransferMode" class="control-label hint hint-top">\n            Transfer mode: <i class="ss-icon">help</i>\n            <span class="hint-text">The mode you choose here should match the FTP mode used on your server.</span>\n        </label>\n        <div class="controls">\n            <select name="deploy-target-destination[mode]" id="deploymentTargetFtpTransferMode">\n                <option value="PASSIVE" {{#equals destination.mode \'PASSIVE\'}}selected="true"{{/equals}}>Passive</option>\n                <option value="ACTIVE" {{#equals destination.mode \'ACTIVE\'}}selected="true"{{/equals}}>Active</option>\n            </select>\n        </div>\n    </div>\n\n</fieldset>\n'),ho.Z.registerPartial("form-sftp",'<fieldset class="hide deployment-target" id="deployment-target-sftp-inputs">\n    <legend class="deployment-target-sftp">\n        SFTP Details\n        <small><a href="https://docs.codio.com/common/develop/ide/tools/deployment.html#sftp-target-type" target="_blank"><i class="ss-icon">help</i> Help</a></small>\n    </legend>\n\n    <div class="control-group">\n        <p>We have generated an SSH key pair for you. You can find your public key in your Account Settings, which you should then upload to your SFTP server.</p>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetSFtpHostname">\n            Hostname: <i class="ss-icon">help</i>\n            <span class="hint-text">The host name of your FTP server. You may append the port name using url:port.</span>\n        </label>\n        <div class="controls">\n            <input type="text" id="deploymentTargetSFtpHostname" name="deploy-target-destination[host]" value="{{destination.host}}" placeholder="mydomain.com"/>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetSFtpUsername">\n            Username: <i class="ss-icon">help</i>\n            <span class="hint-text">The username to connect as.</span>\n        </label>\n        <div class="controls">\n            <input type="text" id="deploymentTargetSFtpUsername" name="deploy-target-destination[user]" value="{{destination.user}}" placeholder="myusername"/>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetSFtpPassword">\n            Password: <i class="ss-icon">help</i>\n            <span class="hint-text">The password for your FTP server. Leave this empty if you are using your Codio public SSH key.</span>\n        </label>\n        <div class="controls">\n            <input type="password" id="deploymentTargetSFtpPassword" name="deploy-target-destination[password]" value="{{destination.password}}" placeholder="mypassword"/>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetSFtpPath">\n            Destination path: <i class="ss-icon">help</i>\n            <span class="hint-text">The path on your FTP server where we will deploy your project to.</span>\n        </label>\n        <div class="controls">\n            <input type="text" id="deploymentTargetSFtpPath" name="deploy-target-destination[path]" value="{{destination.path}}" placeholder="/some/path/on/target/server"/>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <div class="controls">\n            <label class="checkbox">\n                <input type="checkbox" id="deploymentTargetSFtpCleanup" name="deploy-target-destination[cleanupNeeded]" value="true" {{#if destination.cleanupNeeded}}checked="checked"{{/if}} />\n                Empty destination path before each deploy?\n            </label>\n        </div>\n    </div>\n</fieldset>\n'),ho.Z.registerPartial("form-nodejitsu",'<fieldset class="hide deployment-target" id="deployment-target-nodejitsu-inputs">\n    <legend class="deployment-target-nodejitsu">\n        Nodejitsu Details\n        <small><a href="https://docs.codio.com/common/develop/ide/tools/deployment.html#git-target-type" target="_blank"><i class="ss-icon">help</i> Help</a></small>\n    </legend>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetNodejitsuUserName">\n            Username: <i class="ss-icon">help</i>\n            <span class="hint-text">Your Nodejitsu username.</span>\n        </label>\n        <div class="controls">\n            <input type="text" id="deploymentTargetNodejitsuUserName" name="deploy-target-destination[userName]" value="{{destination.userName}}" placeholder="Your username...">\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetNodejitsuApiToken">\n            API Token: <i class="ss-icon">help</i>\n            <span class="hint-text">Your Nodejitsu API token. Or we can generate one for you.</span>\n        </label>\n        <div class="controls input-append">\n            <input type="text" id="deploymentTargetNodejitsuApiToken" name="deploy-target-destination[apiToken]" value="{{destination.apiToken}}" placeholder="Your API token..." class="input-medium">\n            <button type="button" class="btn" id="deploymentTargetNodejitsuGenerateApiToken">Generate</button>\n        </div>\n    </div>\n\n</fieldset>\n'),ho.Z.registerPartial("form-rsync",'<fieldset class="hide deployment-target" id="deployment-target-rsync-inputs">\n    <legend class="deployment-target-rsync">\n        RSYNC Details\n        <small><a href="https://docs.codio.com/common/develop/ide/tools/deployment.html#rsync-target-type" target="_blank"><i class="ss-icon">help</i> Help</a></small>\n    </legend>\n\n    <div class="control-group">\n        <p>We have generated an SSH key pair for you. You can find your public key in your Account Settings, which you should then upload to your RSYNC server.</p>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetRSyncHostname">\n            Protocol: <i class="ss-icon">help</i>\n            <span class="hint-text">The protocol via which Rsync will operate.</span>\n        </label>\n        <div class="controls">\n            <select id="deploymentTargetRSyncMode" name="deploy-target-destination[ssh]">\n                <option value="true"  {{#equals destination.ssh true}}selected="true"{{/equals}}>SSH</option>\n                <option value="false" {{#equals destination.ssh false}}selected="true"{{/equals}}>RSYNC</option>\n            </select>\n\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetRSyncHostname">\n            Hostname: <i class="ss-icon">help</i>\n            <span class="hint-text">The host name of your RSYNC server. You may append the port name using url:port.</span>\n        </label>\n        <div class="controls">\n            <input type="text" id="deploymentTargetRSyncHostname" name="deploy-target-destination[host]" value="{{destination.host}}" placeholder="mydomain.com"/>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetRSyncUsername">\n            Username: <i class="ss-icon">help</i>\n            <span class="hint-text">The username of your RSYNC server.</span>\n        </label>\n        <div class="controls">\n            <input type="text" id="deploymentTargetRSyncUsername" name="deploy-target-destination[user]" value="{{destination.user}}" placeholder="myusername"/>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetRSyncPassword">\n            Password: <i class="ss-icon">help</i>\n            <span class="hint-text">The password for your RSYNC server. Leave this empty if you are using your Codio public SSH key.</span>\n        </label>\n        <div class="controls">\n            <input type="password" id="deploymentTargetRSyncPassword" name="deploy-target-destination[password]" value="{{destination.password}}" placeholder="mypassword"/>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetRSyncPath">\n            Destination path: <i class="ss-icon">help</i>\n            <span class="hint-text">The path on your RSYNC server where we will deploy your project to.</span>\n        </label>\n        <div class="controls">\n            <input type="text" id="deploymentTargetRSyncPath" name="deploy-target-destination[path]" value="{{destination.path}}" placeholder="/some/path/on/target/server"/>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <div class="controls">\n            <label class="checkbox">\n                <input type="checkbox" id="deploymentTargetRSyncDelete" name="deploy-target-destination[delete]" value="true" {{#if destination.delete}}checked="checked"{{/if}} />\n                Delete missing directories? If a directory has been removed from within Codio, then it will be removed from your remote.\n            </label>\n        </div>\n    </div>\n</fieldset>\n'),ho.Z.registerPartial("form-git",'<fieldset class="hide deployment-target" id="deployment-target-git-inputs">\n    <legend class="deployment-target-git">\n        Git Details\n        <small><a href="https://docs.codio.com/common/develop/ide/tools/deployment.html#git-target-type" target="_blank"><i class="ss-icon">help</i> Help</a></small>\n    </legend>\n\n    <div class="control-group">\n        <label class="control-label hint hint-top" for="deploymentTargetRemote">\n            Remote: <i class="ss-icon">help</i>\n            <span class="hint-text">Select remote for deployment.</span>\n        </label>\n        <div class="controls">\n            <select id="deploymentTargetRemote" name="deploy-target-destination[remote]">\n                <option value="" >Add remote...</option>\n            </select>\n        </div>\n    </div>\n\n    <div id="deploymentNewRemote" class="hide">\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="deploymentTargetGitRemoteName">\n                Name: <i class="ss-icon">help</i>\n                <span class="hint-text">Name of the remote...</span>\n            </label>\n            <div class="controls">\n                <input type="text" id="deploymentTargetGitRemoteName" data-skiphidden="true" name="deploy-target-destination[name]" value="{{destination.name}}" placeholder="Name of the remote..."/>\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="deploymentTargetGitRemoteUrl">\n                URL: <i class="ss-icon">help</i>\n                <span class="hint-text">URL of the remote...</span>\n            </label>\n            <div class="controls">\n                <input type="text" id="deploymentTargetGitRemoteUrl" data-skiphidden="true" name="deploy-target-destination[url]" value="{{destination.url}}" placeholder="URL of the remote..."/>\n            </div>\n        </div>\n\n    </div>\n\n</fieldset>\n');var Sw=f().compile('<div id="deployment-target-history">\n\n    <h3 class="page-header">\n        {{title}}\n        <button id="deployment-history-back-button" class="btn">&laquo; back</button>\n    </h3>\n\n    <table class="table table-striped">\n        <thead>\n            <tr>\n                <th>Date</th>\n                {{#if isMultiple}}<th>Target</th>{{/if}}\n                <th>Who?</th>\n                <th>Status</th>\n                <th>Logs</th>\n            </tr>\n        </thead>\n        <tbody></tbody>\n    </table>\n\n    {{#if isPaging}}\n        <div id="deployment-pagination">\n            <a href="javascript:void(0)" class="hide deployment-prev">&laquo; prev</a>\n            <a href="javascript:void(0)" class="deployment-next">next &raquo;</a>\n        </div>\n    {{/if}}\n\n</div>\n'),Ew=f().compile('{{#each history}}\n<tr class="deployment-item-history">\n    <td>\n      <abbr title="{{datetime}}">about {{timeInWords}} ago</abbr>\n    </td>\n    {{#if ../isMultiple}}\n      <td>{{target.name}}</td>\n    {{/if}}\n    <td><a href="/{{user}}" target="_blank" class="deployment-user">{{name}}</a></td>\n    <td>{{#equals info.status 1}}SUCCESS{{else}}{{#equals info.status 0}}FAILED{{else}}IN PROGRESS{{/equals}}{{/equals}}</td>\n    <td>\n        <button class="btn deployment-history-show-log" data-target="{{info.taskId}}">\n            <i class="ss-icon">plus</i>\n        </button>\n    </td>\n</tr>\n<tr class="deployment-item-history log hide" id="log_{{info.taskId}}">\n    <td colspan="5"><pre>{{deployLog}}</pre></td>\n</tr>\n{{/each}}\n'),Iw={parent:null,history:null,targetId:null,countOnPage:7,currentPage:0,renderFor:function(e){var t=this;this.targetId=e,t.targetId||this.parent.deselectTarget(),this.parent.hideTargetList(),b.ZP.DeployManager.getDeployEntriesByProject(i.Z.currentProject.guid).then((function(e){t.processHistory(e)})).catch((function(){k.Z.error("Unable to load the deployment history for this target. Please try again")}))},markDeployedTargets:function(e){return e=e||[],b.ZP.DeployManager.getDeployEntriesByProject(i.Z.currentProject.guid).then((function(t){var n={};return l().each(t,(function(e,t){n[t.info.targetId]={timeInWords:cm()().from(t.created,!0),datetime:cm()(t.created).format("dddd, MMMM Do YYYY, h:mm:ss a"),name:t.userName,user:t.userName}})),l().each(e,(function(e,t){n[t.uid]&&(t.deployed=l().extend({},n[t.uid],!0))})),e}))},processHistory:function(e){var t=this,n=[];function r(e,t){n.push({user:e.userName,name:e.userName,deployLog:e.info.log.join("\n"),target:{id:e.info.targetId,name:t},timeInWords:cm()().from(e.created,!0),datetime:cm()(e.created).format("dddd, MMMM Do YYYY, h:mm:ss a"),info:e.info})}e.sort((function(e,t){return parseInt(t.created,10)-parseInt(e.created,10)})),b.ZP.DeployManager.getProjectTargets(i.Z.currentProject.guid).then((function(i){i=i.targets;var a="",s="";l().each(i,(function(e,n){if(t.targetId===n.uid)return s=n.name,!1}));for(var o=function(e,t){return l().grep(e,(function(e){return e.uid===t.info.targetId}))},c=0,u=e.length;c<u;c++){var d=e[c],p=o(i,d);0!==p.length&&(a=p[0].name,t.targetId?t.targetId===d.info.targetId&&r(d,a):r(d,a))}t.renderHistory(n,s)})).catch((function(e){var t=e.message;k.Z.error(t)}))},renderHistory:function(e,t){var n=this,i=e.length>this.countOnPage,r=!0,a="Deployment History";this.targetId&&(r=!1,a='Deployment History for "'+t+'"');var s=l()(Sw({isPaging:i,isMultiple:r,title:a})),o=s.find(".deployment-prev"),c=s.find(".deployment-next"),u=s.find("tbody"),d=function(){s.find(".deployment-item-history").remove(),u.append(Ew({isMultiple:r,history:n.getCurrentPage(e)})),y.Z.on(s.find("a.deployment-user"),"click.deployment",(function(){return window.open(l()(this).attr("href")),!1})),y.Z.on(s.find(".deployment-history-date"),"click.deployment",(function(){l()(this).parent().find("div").toggleClass("hide")}))};y.Z.on(o,"click.deployment",(function(){n.currentPage--,c.removeClass("hide"),0===n.currentPage&&o.addClass("hide"),d()})),y.Z.on(c,"click.deployment",(function(){o.removeClass("hide"),n.currentPage++,n.currentPage*n.countOnPage+n.countOnPage>=e.length&&c.addClass("hide"),d()})),y.Z.one(s.find("#deployment-history-back-button"),"click",(function(){n.parent.content.find("#deployment-target-location").empty(),n.parent.deselectTarget()})),y.Z.on(s,"click",".deployment-history-show-log",(function(e){var t=l()(e.target).closest("button"),n=t.find("i"),i=t.data("target");s.find("#log_"+i).toggleClass("hide"),n.toggleClass("icon-plus icon-minus")})),this.parent.content.find("#deployment-target-location").html(s),this.parent.hideTargetList(),this.currentPage=0,d()},getCurrentPage:function(e){for(var t=[],n=this.currentPage*this.countOnPage+this.countOnPage,i=n>e.length?e.length:n,r=this.currentPage*this.countOnPage;r<i;r++)t.push(e[r]);return t}};const Tw='<li data-uid="{{uid}}" id="{{uid}}">\n    <h4>{{name}}</h4>\n\n    <div>\n        <section class="btn-toolbar">\n            <div class="btn-group">\n                <button class="btn hint hint-top" data-action="edit">\n                    <span class="hint-text">Edit target</span>\n                    <span class="iconify-inline" data-icon="@codio:mdi:pencil-outline"></span>\n                </button>\n                <button class="btn hint hint-top" data-action="history">\n                    <span class="hint-text">Target history</span>\n                    <span class="iconify-inline" data-icon="@codio:mdi:calendar-month"></span>\n                </button>\n            </div>\n            <div class="btn-group">\n                <button class="btn default-target-button hint hint-top" data-action="defaultTarget" data-toggle="button">\n                    <span class="hint-text">Default</span>\n                    <span class="iconify-inline" data-icon="@codio:mdi:check"></span>\n                </button>\n            </div>\n            <div class="btn-group">\n                <button class="btn hint hint-top" data-action="remove">\n                    <span class="hint-text">Delete Target</span>\n                    <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n                </button>\n            </div>\n        </section>\n\n        {{#if deployed}}\n            <p>last deployed <abbr title="{{deployed.datetime}}">about {{deployed.timeInWords}} ago</abbr> by <a href="/{{deployed.user}}" target="_blank" class="deployment-user">{{deployed.name}}</a>\n        {{else}}\n            <p>You\'ve not deployed to this target just yet</p>\n        {{/if}}\n    </div>\n</li>\n';var jw=f().compile(Tw),Aw=f().compile('<div id="deployment-targets-editor">\n\n    <h2>\n        Deployment Targets\n        <button id="deployment-create-button" class="btn btn-primary" autofocus>Create...</button>\n    </h2>\n\n    <p>\n        A <i>Deployment Target</i> defines the configuration for a specific environment in which your Codio project can be deployed to. It allows you to deploy your code to your production or staging servers, with a click of a button, and without ever leaving Codio.\n    </p>\n\n    <hr>\n\n    <p class="alert alert-info{{#if targets}} hide{{/if}}">\n        You haven\'t yet created a Deployment Target. Just fill in the fields below and define your first target, if you don\'t have your own servers to deploy to, just choose "Codio" as the type, and we\'ll host it all for you.\n    </p>\n\n    <div id="deployment-target-location"></div>\n\n    <div id="deployment-target-list">\n        <ul>\n            {{#each targets}}\n                {{> target}}\n            {{/each}}\n        </ul>\n    </div>\n\n</div>\n');ho.Z.registerPartial("target",Tw);var Ow,Dw={container:null,target:null,content:null,show:function(e){var t=this,n=new Promise((function(n,r){t.content&&t.close();var a,s=e;if(d().isString(e)){var o=e.split(hw.ZP.DELIMETER);s=parseInt(o[0],10),a=o[1]}b.ZP.DeployManager.getProjectTargets(i.Z.currentProject.guid).then((function(e){var i=e.defaultTarget;t.history.markDeployedTargets(e.targets).then((function(e){t.container.html(Nw.call(t,e,i,s,a)),n()})).catch((function(e){r(e)}))})).catch((function(e){k.Z.error("Unable to load the deployment targets. Please try again."),r(e)}))}));return n.finally((function(){t.content&&t.showCreateButton()})),n},close:function(){this.content&&(this.deselectTarget(),this.content.remove(),this.content=null)},reset:function(){this.content&&(this.showCreateButton(),this.showTargetList())},selectTarget:function(e){var t=this;"string"===l().type(e)?b.ZP.DeployManager.getTarget(e).then((function(e){t.target=e})).catch((function(){k.Z.error("Unable to fetch target data. Please try again.")})):this.target=e},deselectTarget:function(){this.target=null,this.reset()},showCreateButton:function(){var e=this.content.find("#deployment-create-button");e.show(),e.focus()},hideCreateButton:function(){this.content.find("#deployment-create-button").hide()},showTargetList:function(){this.content.find("#deployment-target-list").show()},hideTargetList:function(){this.content.find("#deployment-target-list").hide()},appendTarget:function(e){var t=this.content,n=t.find("#deployment-target-list ul"),i=jw(e);n.append(i),t.find("> .alert").addClass("hide")},updateTarget:function(e){var t=this.content.find("#deployment-target-list li#"+e.uid),n=t.find("button.default-target-button").hasClass("active"),i=l()(jw(e));n&&i.find("button.default-target-button").addClass("active"),t.replaceWith(i)}};function Nw(e,t,n,i){var r={};(e&&(r.targets=e),this.content=l()(Aw(r)),t)&&this.content.find("li#"+t).find("button.default-target-button").addClass("active");this.btnActions=new fw(this);var a=this;switch(y.Z.on(this.content,"click.deployment","#deployment-create-button",(function(){a.deselectTarget(),a.form.renderForCreate()})),n===hw.ZP.DEPLOYER_HISTORY&&d().isEmpty(e)&&(n=hw.ZP.DEPLOYER_CREATE),n){case hw.ZP.DEPLOYER_EDIT:this.hideTargetList();var s=this.content.find("#"+i+" button[data-action=edit]");this.btnActions.edit(i,s);break;case hw.ZP.DEPLOYER_CREATE:this.form.renderForCreate();break;case hw.ZP.DEPLOYER_HISTORY:Dw.history.renderFor(i)}return this.content}function Mw(e){return(Dw.container=e)&&Dw}Dw.form=(Ow=Dw,kw.parent=Ow,kw),Dw.history=function(e){return(Iw.parent=e)&&Iw}(Dw),y.Z.subscribe("deployment:default-updated",(function(e,t){if(Dw.container){var n=t.targetId;if(Dw.container.find("#deployment-target-list").find("button.default-target-button").removeClass("active"),n)Dw.container.find("li#"+n).find(".default-target-button").addClass("active")}}));var Fw=n(43553),Rw=n(83940),Lw=n(82943);var Uw=f().compile('<h4>Deployment to <span>{{target.name}}</span> {{status}}!</h4>\n<div class="clearfix">\n  <div class="pull-left">\n    {{started}} ago\n  </div>\n  <div class="pull-left">\n    {{#equals target.destination.type \'CODIO\' }}\n      <a href="{{url}}" target="_blank">Open site...</a> |\n    {{/equals}}\n    <a href="javascript:void(0)" id="toggle">show log &raquo;</a>\n  </div>\n</div>\n\n<pre class="hide">{{deploymentLog}}</pre>\n'),Bw=f().compile('<div class="deployment-deploy">\n    <form class="form-inline deployment-menu">\n\n        {{#if loading}}\n            <div>Loading, please wait...</div>\n        {{else}}\n            {{#if data}}\n\n                <div class="deployment-menu-controls">\n                    <select>\n                        {{#each data}}\n                        <option value="{{uid}}" data-dtype="{{destination.type}}" data-stype="{{source.type}}">{{name}}</option>\n                        {{/each}}\n                    </select>\n\n                    <div class="btn-group">\n                        <a href="javascript:void(0)" id="deployment-menu-deploy" class="btn btn-primary">Deploy Now</a>\n                        <a href="javascript:void(0)" id="deployment-menu-edit" class="btn">Edit...</a>\n                    </div>\n                </div>\n\n                <div class="deployment-url hide">Will deploy to <a href="" target="_blank"></a></div>\n\n                <div class="deployment-menu-status hide"></div>\n\n                <div class="deployment-menu-bottom-menu">\n                    <a href="javascript:void(0)" id="deployment-menu-manage-targets">Manage targets</a> |\n                    <a href="javascript:void(0)" class="deployment-menu-create-target">Create new target</a>\n                    <a class="deployment-menu-history-link" href="javascript:void(0)" id="deployment-menu-history">History</a>\n                </div>\n\n            {{else}}\n\n                <div class="deployment-menu-no-targets">\n                    <h4>You have not yet created any Deployment Targets.</h4>\n                    <h5><a href="javascript:void(0)" class="deployment-menu-create-target">Click here</a> to create your first target.</h5>\n                </div>\n\n            {{/if}}\n        {{/if}}\n\n    </form>\n</div>'),qw=f().compile('<h4>\n    <i class="icon icon-spinner-black"/> Deploying to "<span>{{name}}</span>"\n</h4>\n<pre>Starting deploy...</pre>\n'),Hw=function(e){var t=this;this.container=e;var n=Bw({loading:!0});if(this.container.append(n),!i.Z.currentUser.isAnonymous()&&i.Z.currentProject&&i.Z.currentProject.isAdmin){var r=this;Qw.call(this).then((function(){var e=r.container.find("#deployment-menu-deploy");e&&e.focus()})).catch((function(e){var t=e.message;k.Z.error(t)}))}y.Z.subscribe("deployment:targetsUpdated",(function(){return Qw.call(t).catch((function(e){var t=e.message;k.Z.error(t)}))})),y.Z.subscribe("deployment:deploy:files",Xw.bind(this))},Ww=Hw.prototype;function zw(e,t){if(this.container.find("#deployment-menu-deploy").hasClass("disabled"))return!1;this.content=this.container.find("form"),this.disable();var n=this.content.find("select");e?n.val(e).change():e=n.val(),Gw.call(this,e,t)}function Gw(e,t,n){var i,r=this;function a(e){i.text(e),i.scrollTop(i.prop("scrollHeight"))}var s=new Lw.Z(e,{onStart:function(){r.showStatus(s.getTarget()),i=r.content.find(".deployment-menu-status pre")},onUpdate:function(e){a(e)},onComplete:function(i,o){d().includes(o,"Authentication failed")?R.Z.showRepoAuthWindow({onClose:function(c,l,u){c?(a(o),Vw.call(r,i,s,o),s.close()):(n={username:l,password:u},Gw.call(r,e,t,n))}}):(a(o),Vw.call(r,i,s,o),s.close())},onFail:function(e){Kw.call(r,e),s.close()},paths:t,credentials:n})}function Vw(e,t,n){var i=Rw.Z.getCodioDeployUrl(),r=l()(Uw({target:t.getTarget(),url:i,deploymentLog:n,started:t.fromStartedTime(),status:e?"failed":"completed"}));y.Z.on(r.find("#toggle"),"click.deployment",(function(){var e=l()(this),t=e.parents(".deployment-menu-status").find("pre");t.toggleClass("hide"),t.hasClass("hide")?e.html("show log &raquo;"):e.html("hide log &laquo;")})),this.content.find(".deployment-menu-status").html(r),this.enable()}function Kw(e){this.enable(),k.Z.error(e)}function Yw(e,t){if("CODIO"===e.find(":selected").data("dtype")){var n=Rw.Z.getCodioDeployUrl();t.show().find("a").text(n).attr("href",n)}else t.hide()}function Jw(e,t){var n=e.find(":selected"),r=l()("#deployment-menu-deploy");"CODIO"===n.data("dtype")?i.Z.currentUser.isInTrial||O.hasAnyUsableSubscription(t)?r.removeAttr("disabled"):r.attr("disabled",!0):r.removeAttr("disabled")}function Qw(){var e=this,t=this.container.find("form");t.html("Loading..."),e.targetsLoded=!1;var n=O.api.getCachedSubscriptions(),r=b.ZP.DeployManager.getProjectTargets(i.Z.currentProject.guid);return Promise.all([r,n]).then((function(n){var i=(0,a.Z)(n,2),r=i[0],s=i[1];r=r.targets;var o=Bw({data:r});t.replaceWith(o),e.bindDropdown(e_,t_,n_,i_);var c=e.container.find("select"),l=e.container.find(".deployment-url");y.Z.on(c,"change.deployment",(function(){Yw(c,l),Jw(c,s)})),Yw(c,l),Jw(c,s),e.targetsLoded=!0}))}function Xw(e,t){this.targetsLoded?zw.call(this,t.targetId,t.paths):d().delay(Xw.bind(this,e,t),100)}function $w(e){i.Z.ide.open(hw.ZP.DEPLOYMENT,hw.ZP.DEPLOY_TARGETS,"Manage Targets",e)}Ww.start=function(e){e.preventDefault(),zw.call(this)},Ww.showStatus=function(e){var t=qw({name:e.name});this.content.find(".deployment-menu-status").removeClass("hide").html(t)},Ww.hideStatus=function(){this.content.find(".deployment-menu-status").addClass("hide")},Ww.disable=function(){Fw.Z.dispatch("show","loading-spinner"),this.content.find(".deployment-menu-controls select").prop("disabled",!0);var e=this.content.find(".deployment-menu-controls a");e.addClass("disabled"),e.first().text("Deploying...")},Ww.enable=function(){Fw.Z.dispatch("hide","loading-spinner"),this.content.find(".deployment-menu-controls select").prop("disabled",!1);var e=this.content.find(".deployment-menu-controls a");e.removeClass("disabled"),e.first().text("Deploy Now")},Ww.bindDropdown=function(e,t,n,i){var r=this.container.find("#deployment-menu-deploy");y.Z.on(r,"click.deployment",l().proxy(this,"start"));var a=this.container.find("#deployment-menu-manage-targets");y.Z.on(a,"click.deployment",n);var s=this.container.find("#deployment-menu-history");y.Z.on(s,"click.deployment",i);var o=this.container.find("#deployment-menu-edit");y.Z.on(o,"click.deployment",l().proxy(e,null,o));var c=this.container.find(".deployment-menu-create-target");y.Z.on(c,"click.deployment",l().proxy(t,null,c))},Ww.close=function(){y.Z.off(this.container,".deployment"),this.container.empty()};var e_=function(e){var t=e.parent().siblings("select").val();$w(hw.ZP.DEPLOYER_EDIT+hw.ZP.DELIMETER+t)},t_=function(){$w(hw.ZP.DEPLOYER_CREATE)},n_=function(){$w(hw.ZP.DEPLOYER_MANAGE)},i_=function(){$w(hw.ZP.DEPLOYER_HISTORY)};const r_=Hw;var a_=n(44442).A,s_=y.Z.create(n(38830));n(5706);var o_=function e(t,n){if(!(this instanceof e))return new e(t,n);this.container=t,this.filename=n},c_=o_.prototype;function l_(){dw.ZP.hasDeployPermission()&&a_.execute("file","open",{ext:"deployment",filename:"deploy",title:"Deploy"})}function u_(){dw.ZP.hasDeployPermission()&&a_.execute("file","open",{ext:"deployment",filename:"targets",title:"Manage Targets"})}c_.switchType=function(e,t,n){this.content&&this.content.show(n)},c_.activate=function(e,t){if(!this.content)switch(this.filename){case hw.ZP.DEPLOY:M.Z.saveAllAndWait(),this.content=new r_(this.container);break;case hw.ZP.DEPLOY_TARGETS:this.content=new Mw(this.container),this.content.show(t.viewType),t.viewType=hw.ZP.DEPLOYER_MANAGE,a_.execute("layout","save"),this.focusElementsDelayed()}},c_.focusElements=function(){var e=this.container.find(".deployment-menu-create-target");e&&e.focus()},c_.focusElementsDelayed=function(){return d().delay(this.focusElements.bind(this),100)},c_.close=function(){this.container&&(y.Z.off(this.container,".deployment"),this.container.empty()),this.content&&this.content.close()},y.Z.subscribe("command:deployment:set-default:#id",(function(e){b.ZP.DeployManager.setDefault(e.id,i.Z.currentProject.guid).then((function(){dw.ZP.updateMenu(),s_.defaultTargetUpdated({targetId:e.id})}))})),y.Z.subscribe("command:deployment:remove-default",(function(){b.ZP.DeployManager.setDefault(null,i.Z.currentProject.guid).then((function(){dw.ZP.updateMenu(),s_.defaultTargetUpdated({targetId:null})}))})),y.Z.subscribe("deployment:targetsUpdated",d().bind(dw.ZP.updateMenu,dw.ZP)),y.Z.subscribe("project:open",d().bind(dw.ZP.updateMenu,dw.ZP)),y.Z.subscribe("command:deployment:deploy",l_),y.Z.subscribe("command:ide:deploy",l_),y.Z.subscribe("command:deployment:manage_targets",u_),y.Z.subscribe("command:ide:manage_targets",u_),o_.getCodioDeployUrl=Rw.Z.getCodioDeployUrl;const d_=o_;i.Z.register({info:lw,hotkeys:uw,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d_);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const p_=JSON.parse('{"name":"codio-user-settings","description":"User Settings","codio":{"global":true,"noFile":true,"urls":"user-preferences","title":"User Preferences"}}');var f_=n(28755),h_=i.Z.get("view-codio-settings-code"),m_=y.Z.create(f_),g_=".settings",v_=function(){function e(t,n,i){(0,Zn.Z)(this,e),this._container=t,this._filename=n||"",this._showSwitchButton=i||!1,this._drawn=!1,this._active=!1,this._save=d().debounce(this._saveTimeouted.bind(this),800,{maxWait:5e3})}var t,n;return(0,xn.Z)(e,[{key:"_saveTimeouted",value:function(e){e.saveSection("details"),v.Z.user(e.get("details").get("settings"))}},{key:"_onSave",value:function(e){var t=this._editor.model().getValue();e.get("details").set("settings",t),this._save(e)}},{key:"_onUpdate",value:function(){var e=i.Z.currentUser.get("details").get("settings");if(this._editor&&this._editor.editor()){var t=this._editor.editor().getPosition();this._editor.model().setValue(e),this._editor.editor().setPosition(t)}}},{key:"_init",value:(n=(0,r.Z)(o().mark((function e(t,n,i){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.Z.defaultContent(t),e.next=3,h_();case 3:return r=e.sent,this._editor=new r({container:this._container,filename:"",fileContent:t,readOnly:!this._isUserSettings,showSwitchButton:this._showSwitchButton}),this._updateEvId=y.Z.subscribe("settings:changed:user",this._onUpdate.bind(this)),this._fsHandlerId=y.Z.subscribe("ide:fullscreen:#mode",this._onFullscreen.bind(this)),e.next=9,this._activateEditor(i);case 9:this._onChangeDisposable=this._editor.editor().onDidChangeModelContent(this._onSave.bind(this,n));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,i){return n.apply(this,arguments)})},{key:"_onFullscreen",value:function(e,t){this._active&&this._editor&&("enter"===e.mode?t===this?this._editor.enterFullscreen():this._editor.hide():this._editor.leaveFullscreen(),this._editor.updateSize())}},{key:"_activateEditor",value:(t=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._editor){e.next=2;break}return e.abrupt("return");case 2:return this._active=!0,e.next=5,this._editor.activate(t);case 5:return e.next=7,this._editor.afterActivate();case 7:this._editor.editor().focus();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"activate",value:function(e,t){if(this._drawn){if(this._active)return;this._activateEditor(e)}else{var n=i.Z.currentUser;this._isUserSettings=t&&"user-preferences"===t.extensionName,this._init(n.get("details").get("settings"),n,e),this._drawn=this._active=!0}}},{key:"afterActivate",value:function(){this._editor&&m_.focus({editor:this._editor._default.editor()})}},{key:"deactivate",value:function(){this._active=!1,this._editor&&m_.out(this._editor._default.editor())}},{key:"close",value:function(){this._updateEvId&&(y.Z.unsubscribe(this._updateEvId),this._updateEvId=null),this._fsHandlerId&&(y.Z.unsubscribe(this._fsHandlerId),this._fsHandlerId=null),this._onChangeDisposable&&this._onChangeDisposable.dispose(),this._onChangeDisposable=null,this._container.empty(),this._editor&&this._editor.close(),this._editor=null}}]),e}(),b_=function(){i.Z.currentProject&&!i.Z.currentProject.readOnly&&i.Z.currentProject.exists(g_)&&"file"===i.Z.currentProject.getFileInfo(g_).type&&i.Z.currentProject.file(g_).then((function(e){d().defer((function(){var t=e.content,n=v.Z.defaultContent(t);t!==n&&(e.content=n)}))}))};y.Z.subscribe("item:created:"+g_,b_),y.Z.subscribe("item:moved:"+g_,b_),y.Z.subscribe("ide:open",b_);const y_=v_;n(26433);var w_={};w_.info=p_,w_.settings={},w_.hotkeys={},w_.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y_);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(w_);const __=JSON.parse('{"name":"codio-settings-manager","description":"Settings Manager"}');var k_=".settings",P_={section:/^\s*\[\s*([^\]]*)\s*]\s*$/,param:/(^\s*([\w\.\-_]+)\s*=\s*)(.*?)\s*$/,comment:/^\s*;.*$/},Z_="user",x_="project";function C_(e,t){var n=t||!d().isUndefined(e.value);return e&&e.plugin&&e.key&&n}function S_(e,t,n){var r=n?j_:T_;if(t=d().isArray(t)?t:[t],t=d().filter(t,(function(e){return C_(e,n)})),!(e!==Z_&&e!==x_||d().isEmpty(t)))if(e===Z_){if(i.Z.currentUser.isAnonymous())return;var a=i.Z.currentUser.get("details").get("settings");a=r(a,t),i.Z.currentUser.get("details").set("settings",a),i.Z.currentUser.saveSection("details"),v.Z.user(a)}else I_(k_,t,T_)}function E_(e,t,n){i.Z.currentProject.file(e).then((function(e){var i=v.Z.defaultContent(e.content);i=n(i,t),d().defer((function(){e.content=i,v.Z.project(i),e.close()}))}))}function I_(e,t,n){i.Z.currentProject.exists(e)?E_(e,t,n):i.Z.currentProject.createFile(e,"").then((function(){E_(e,t,n)}))}function T_(e,t){var n,i=(e=e||"").split(/\r\n|\r|\n/),r=[],a=null,s=[];t=d().groupBy(t,"plugin");var o=d().clone(t);return i.forEach((function(e,i){if(!P_.comment.test(e))if(P_.param.test(e)){n=e.match(P_.param);var c=t[a]&&d().find(t[a],{key:n[2]});c&&(e=e.replace(P_.param,"$1"+c.value),d().remove(o[a],{key:n[2]}))}else P_.section.test(e)&&(n=e.match(P_.section),a=n[1],t[a]&&(s[a]=i));r.push(e)})),d().forEach(o,(function(e,t){d().forEach(e,(function(e){var n=e.key+" = "+e.value;d().has(s,t)?r.splice(s[t]+1,0,n):(r.push("["+t+"]",n),s[t]=r.length)})),s=function(e){var t,n=[];return e.forEach((function(e,i){!P_.comment.test(e)&&P_.section.test(e)&&(t=e.match(P_.section),n[t[1]]=i)})),n}(r)})),e=r.join("\n")}function j_(e,t){var n,i=(e=e||"").split(/\r\n|\r|\n/),r=[],a=null;return t=d().groupBy(t,"plugin"),i.forEach((function(e){if(!P_.comment.test(e))if(P_.param.test(e)){if(n=e.match(P_.param),t[a]&&d().find(t[a],{key:n[2]}))return}else P_.section.test(e)&&(n=e.match(P_.section),a=n[1]);r.push(e)})),e=r.join("\n")}y.Z.subscribe("command:settings:updateMany",(function(e,t){!function(e){e=d().filter(e,C_);var t=d().groupBy(e,(function(e){return e.type})),n=t[Z_],r=t[x_];if(!d().isEmpty(n)&&!i.Z.currentUser.isAnonymous()){var a=i.Z.currentUser.get("details").get("settings");a=T_(a,n),i.Z.currentUser.get("details").set("settings",a),i.Z.currentUser.saveSection("details"),v.Z.user(a)}d().isEmpty(r)||I_(k_,r,T_)}(t=t&&t.arg?t.arg:[])})),y.Z.subscribe("command:settings:update:#type",(function(e,t){t=t&&t.arg?t.arg:{},S_(e.type,t,!1)})),y.Z.subscribe("command:settings:remove:#type",(function(e,t){t=t&&t.arg?t.arg:{},S_(e.type,t,!0)}));const A_={};var O_={};O_.info=__,O_.settings={},O_.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A_);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(O_);const D_=JSON.parse('{"name":"emmet","description":"Emmet settings and hotkeys"}'),N_=JSON.parse('{"expand_abbreviation":{"key":{"win":"Ctrl-E","mac":"Cmd-E"},"desc":"Expand abbreviation"},"expand_abbreviation_with_tab":{"key":"Tab","desc":"Expand abbreviation with tab"},"match_pair_outward":{"key":{"win":"Ctrl-D","mac":"Cmd-D"},"desc":"Match pair outward"},"match_pair_inward":{"key":{"win":"Shift-Ctrl-D","mac":"Shift-Cmd-D"},"desc":"Match pair inward"},"wrap_with_abbreviation":{"key":{"win":"Shift-Ctrl-A","mac":"Shift-Cmd-A"},"desc":"Wrap with abbreviation"},"next_edit_point":{"key":"Ctrl-Alt-Right","desc":"Next edit point"},"prev_edit_point":{"key":"Ctrl-Alt-Left","desc":"Prev edit point"},"merge_lines":{"key":{"win":"Shift-Ctrl-M","mac":"Shift-Cmd-M"},"desc":"Merge lines"},"split_join_tag":{"key":{"win":"Shift-Ctrl-J","mac":"Shift-Cmd-J"},"desc":"Split/join tag"},"remove_tag":{"key":{"win":"Ctrl-K","mac":"Cmd-K"},"desc":"Remove tag"},"evaluate_math_expression":{"key":{"win":"Shift-Ctrl-Y","mac":"Shift-Cmd-Y"},"desc":"Evaluate math expression"},"increment_number_by_1":{"key":"Ctrl-Up","desc":"Increment number by 1"},"decrement_number_by_1":{"key":"Ctrl-Down","desc":"Decrement number by 1"},"increment_number_by_01":{"key":"Alt-Up","desc":"Increment number by 01"},"decrement_number_by_01":{"key":"Alt-Down","desc":"Decrement number by 01"},"increment_number_by_10":{"key":"Ctrl-Alt-Up","desc":"Increment number by 10"},"decrement_number_by_10":{"key":"Ctrl-Alt-Down","desc":"Decrement number by 10"},"select_next_item":{"key":{"win":"Shift-Ctrl-.","mac":"Shift-Cmd-."},"desc":"Select next item"},"select_previous_item":{"key":{"win":"Shift-Ctrl-,","mac":"Shift-Cmd-,"},"desc":"Select previous item"},"reflect_css_value":{"key":{"win":"Ctrl-B","mac":"Cmd-B"},"desc":"Reflect css value"}}');var M_=function(){};y.Z.subscribe("settings:changed",M_),y.Z.subscribe("settings:loaded",M_),y.Z.subscribe("command:emmet:key_toggle:#param",(function(e){i.Z.currentUser.isAnonymous()||v.Z.hotkey.execute("settings","update:user",{plugin:"emmet",key:e.param,value:!v.Z.get("emmet")[e.param]})}));var F_={};F_.info=D_,F_.settings={},F_.hotkeys=N_,i.Z.register(F_);const R_=JSON.parse('{"name":"sharing","description":"Sharing project"}');var L_=f().compile('<div id="project-sharing">\n\n  <section id="share-buttons">\n    <h4>\n      Click to share your Project quickly\n    </h4>\n    <a href="javascript:void(0)" class="share-by-twitter-link">\n      <i class="ss-icon ss-social-regular">twitter</i> Twitter\n    </a>\n    <a href="javascript:void(0)" class="share-by-facebook-link">\n      <i class="ss-icon ss-social-regular">facebook</i> Facebook\n    </a>\n    <a href="javascript:void(0)" class="share-by-email-link">\n      <i class="ss-icon ss-social-regluar">email</i> Email\n    </a>\n    <a href="javascript:void(0)" class="share-by-raw-link">\n      <i class="ss-icon ss-social-regluar">link</i>Link\n    </a>\n  </section>\n\n  <section id="share-links">\n    <p>\n      <input type="radio" name="url" value="plain" id="plain-url-type">\n      <label for="plain-url-type">Project URL</label> <code>{{origin}}/{{path}}</code>\n    </p>\n    <p id="guide-url">\n      <input type="radio" name="url" value="guide" id="guide-url-type">\n      <label for="guide-url-type">Guide URL</label> <code>{{origin}}/{{path}}/guides</code>\n    </p>\n    <p id="layout-url">\n      <input type="radio" name="url" value="layout" id="layout-url-type">\n      <label for="layout-url-type">\n        With layout\n        <i class="ss-icon hint hint-bottom">help\n          <span class="hint-text">This link includes details of your current layout, including the panels and tabs, and which files are opened.</span>\n        </i>\n      </label>\n      <code class="layout"></code>\n    </p>\n  </section>\n\n  <section id="share-href">\n    <a href="javascript:void(0)">You want buttons? We\'ve got buttons...</a>\n  </section>\n\n  <section id="share-textareas">\n    <h4>\n      Buttons\n      <small id="share-format">\n        <a href="javascript:void(0)" class="active" data-toggle="html">HTML</a>\n        <a href="javascript:void(0)" data-toggle="markdown">Markdown</a>\n      </small>\n    </h4>\n    <dl>\n      <dt><img src="https://codio-public.s3.amazonaws.com/sharing/demo-in-ide.png" width="95" height="19" alt="Show me a Demo at Codio"></dt>\n      <dd>\n        <textarea readonly class="html plain">&lt;a href=&quot;https://codio.com/{{path}}&quot;&gt;&lt;img src=&quot;https://codio-public.s3.amazonaws.com/sharing/demo-in-ide.png&quot; width=&quot;95&quot; height=&quot;19&quot; alt=&quot;Show me a Demo at Codio&quot;&gt;&lt;/a&gt;</textarea>\n        <textarea readonly class="markdown plain">[![Show me a Demo at Codio](https://codio-public.s3.amazonaws.com/sharing/demo-in-ide.png)](https://codio.com/{{path}})</textarea>\n\n        <textarea readonly class="html layout">&lt;a href=&quot;[[[layoutUrl]]]&quot;&gt;&lt;img src=&quot;https://codio-public.s3.amazonaws.com/sharing/demo-in-ide.png&quot; width=&quot;95&quot; height=&quot;19&quot; alt=&quot;Show me a Demo at Codio&quot;&gt;&lt;/a&gt;</textarea>\n        <textarea readonly class="markdown layout">[![Show me a Demo at Codio](https://codio-public.s3.amazonaws.com/sharing/demo-in-ide.png)]([[[layoutUrl]]])</textarea>\n      </dd>\n    </dl>\n\n    <dl>\n      <dt><img src="https://codio-public.s3.amazonaws.com/sharing/open-in-ide.png" width="95" height="19" alt="Show me the Code at Codio"></dt>\n      <dd>\n        <textarea readonly class="html plain">&lt;a href=&quot;https://codio.com/{{path}}&quot;&gt;&lt;img src=&quot;https://codio-public.s3.amazonaws.com/sharing/open-in-ide.png&quot; width=&quot;95&quot; height=&quot;19&quot; alt=&quot;Show me the Code at Codio&quot;&gt;&lt;/a&gt;</textarea>\n        <textarea readonly class="markdown plain">[![Show me the Code at Codio](https://codio-public.s3.amazonaws.com/sharing/open-in-ide.png)](https://codio.com/{{path}})</textarea>\n\n        <textarea readonly class="html layout">&lt;a href=&quot;[[[layoutUrl]]]&quot;&gt;&lt;img src=&quot;https://codio-public.s3.amazonaws.com/sharing/open-in-ide.png&quot; width=&quot;95&quot; height=&quot;19&quot; alt=&quot;Show me the Code at Codio&quot;&gt;&lt;/a&gt;</textarea>\n        <textarea readonly class="markdown layout">[![Show me the Code at Codio](https://codio-public.s3.amazonaws.com/sharing/open-in-ide.png)]([[[layoutUrl]]])</textarea>\n      </dd>\n    </dl>\n  </section>\n\n</div>\n'),U_=null,B_=function e(t){if(!(this instanceof e))return new e(t);this.openDialog()};function q_(e){var t=l()(this);t.addClass("active").siblings().removeClass("active");var n=e.find("input[type=radio]:checked").val();return e.find("textarea").hide().filter("."+t.data("toggle")+"."+n).show(),!1}function H_(e){var t=!1,n=l()(this),i=n.closest("a").attr("class").match(/share\S+/)[0],r=e.find("input[type=radio]:checked").siblings("code");!function(e,t){var n=t.find("#share-links a");e?n.show():n.hide()}(!1,e),e.find("#share-links code").show();var a=r.html(),s=n.attr("href"),o="width=570,height=260,left="+(window.outerWidth/2-285)+",top="+(window.outerHeight/2-130);switch(i){case"share-by-facebook-link":s="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(a)+"&display=popup&ref=plugin",window.open(s,"facebook",o),t=!0;break;case"share-by-twitter-link":window.open(s,"tweet",o),t=!0;break;case"share-by-raw-link":var c=r.siblings("a");if(c.length>0)c.show();else{var u=l()("<a></a>").attr("href",a).html(a);r.parent().append(u)}r.hide()}return!t}function W_(e,t){var n=l()(this),r=n.siblings("code").html(),a=e.find("#share-buttons a"),s=n.val(),o=e.find("textarea"),c=e.find("#share-format a.active").data("toggle");o.hide().filter("."+c+"."+s).show();var u=i.Z.currentProject.description?i.Z.currentProject.description:i.Z.currentProject.name,d=u+" "+r+" on Codio";a.each((function(e,n){var i=l()(n),a=140;switch(i.attr("class").match(/share\S+/)[0]){case"share-by-twitter-link":var s=r;d.length>a&&(s.length>70&&(s=t.shortUrls[s]),9+s.length+u.length>a&&(u=u.slice(a-s.length-12)+"..."));var o="https://twitter.com/share?text="+encodeURIComponent(u+" on Codio")+"&url="+encodeURIComponent(s);i.attr("href",o).attr("target","_blank");break;case"share-by-email-link":var c="mailto:someone@example.com?Subject=Codio&Body="+encodeURIComponent(d);i.addClass("email").attr("href",c).attr("target","_blank")}})),o.hide().filter("."+c+"."+s).show()}function z_(){var e=U_.content().find("#layout-url"),t=A.toUrl(i.Z.ide.panels.serialize()),n=window.location.origin;l().getJSON("https://api-ssl.bitly.com/v3/shorten",{login:"o_b5j5ipv5o",apiKey:"R_39bc6ed444d4035743ad8f0aa7bf643f",longUrl:[n+"/",i.Z.currentProject.path,"?",t].join("")}).then((function(t){t.data.url&&(e.show().find(".layout").text(t.data.url),U_.content().find("textarea.layout").each((function(e,n){var i=l()(n);i.text(i.text().replace("[[[layoutUrl]]]",t.data.url))})))}));var r=this,s=n+"/"+i.Z.currentProject.path,o=n+"/"+i.Z.currentProject.path+"/guides";Promise.all([G_(s),G_(o)]).then((function(e){var t=(0,a.Z)(e,2),n=t[0],i=t[1];r.shortUrls[s]=n,r.shortUrls[o]=i,U_.content().find("input[type=radio]:checked").change()}))}function G_(e){var t=m.ZP.promise.deferred();return l().getJSON("https://api-ssl.bitly.com/v3/shorten",{login:"o_b5j5ipv5o",apiKey:"R_39bc6ed444d4035743ad8f0aa7bf643f",longUrl:e}).then((function(e){t.resolve(e&&e.data&&e.data.url)})).fail((function(e){return t.reject(e)})),t.promise}B_.prototype.openDialog=function(){var e=(U_=new R.Z({title:"Share your project",content:L_({origin:window.location.origin,path:i.Z.currentProject.path}),width:500,onClose:function(){U_=null},onShow:z_.bind(this),buttons:[{title:"Close",onClick:function(){return U_.close(R.Z.IDCANCEL)}}]})).content();this.shortUrls={},y.Z.on(e,"click","#share-format a",l().proxy(q_,null,e)),y.Z.on(e,"click","#share-buttons a",l().proxy(H_,null,e)),y.Z.on(e,"click","textarea",(function(e){l()(e.target).select()})),y.Z.on(e,"click","#share-href",(function(){l()(this).hide(),e.find("#share-textareas").show()})),null!==i.Z.currentProject&&i.Z.currentProject.exists(Ne.ZP.GUIDES_FOLDER)?e.find("#guide-url-type").attr("checked",!0):e.find("#plain-url-type").attr("checked",!0),y.Z.on(e,"change","input[type=radio]",l().proxy(W_,null,e,this))},y.Z.subscribe("command:project:share",(function(){new B_}));const V_={};i.Z.register({info:R_,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V_);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const K_=JSON.parse('{"name":"search","description":"Codio project wide search and replace","codio":{"urls":["search"],"noFile":true,"noStateSave":true,"title":"Search Results"}}'),Y_=JSON.parse('{"key_searchProject":{"key":"Ctrl+H","desc":"Find in project"},"key_replaceProject":{"key":"Ctrl+Shift+H","desc":"Replace in project"}}');var J_=n(64998),Q_=/^(\S.*):$/,X_=/^(\s*)(\d+)(:|-)(\s+)(.*)$/;function $_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,En.Z)(e);if(t){var r=(0,En.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,Sn.Z)(this,n)}}var ek=b.ZP.search,tk=function(e){(0,Cn.Z)(n,e);var t=$_(n);function n(e,i){var r;(0,Zn.Z)(this,n);var a=new B.yO("","codio-search"),s=(r=t.call(this,{container:e,fileName:i,readOnly:!0,fileContent:a}))._s_searchParams=J_.ZP.decodeParams(i);return r._s_container=e,r._s_model=a,0===s.locations.length?delete s.locations:s.locations=s.locations.split(" "),r._s_initSearch(),r._s_appendResults("Searching ".concat(s.pattern,"....\n")),r._s_bindEvents(),r}return(0,xn.Z)(n,[{key:"_s_initSearch",value:function(){var e=this;ek.search(this._s_searchParams).then((function(t){return e._s_checkStatus(0,t)}))}},{key:"_s_bindEvents",value:function(){var e=this;this._s_fullscreenSubscribe=y.Z.subscribe("ide:fullscreen:#mode",(function(t,n){if(n===e)switch(t.mode){case"enter":e.enterFullscreen();break;case"leave":e.leaveFullscreen()}}))}},{key:"_s_appendResults",value:function(e,t){var n=this._s_model;t=void 0===t?n.getLineCount():t,n.replaceRange(e,{lineNumber:t,column:1}),this.editor()&&this.editor().setPosition({lineNumber:1,column:1})}},{key:"_highlightMatches",value:function(){var e=this;if(!this._s_highlights&&this._s_parsed){var t=this._s_searchParams,n=t.pattern,i=t.flags,r=i.ignoreCase,a=i.regexp,s=i.wholeWorld,o=this._s_model.findMatches(n,!1,a,!r,s,!1).filter((function(t){var n=t.range,i=e._s_parsed[n.startLineNumber];return i&&"result"===i.type})).map((function(e){return{range:e.range,options:{inlineClassName:"search-highlight"}}}));this._s_highlights=this.editor().deltaDecorations([],o)}}},{key:"activate",value:function(){var e=this;return(0,ls.Z)((0,En.Z)(n.prototype),"activate",this).apply(this,arguments).then((function(){e.editor().setModel(e._s_model),e.editor().setOption("lineNumbers","off"),e._highlightMatches()}))}},{key:"afterActivate",value:function(){(0,ls.Z)((0,En.Z)(n.prototype),"afterActivate",this).call(this,arguments);var e=this.editor();e&&(this._s_onMouseDownDisposable=e.onMouseDown(this._s_onClick.bind(this)))}},{key:"deactivate",value:function(){return this._s_clean(),(0,ls.Z)((0,En.Z)(n.prototype),"deactivate",this).call(this,arguments)}},{key:"close",value:function(){return y.Z.unsubscribe(this._s_fullscreenSubscribe),this._s_parsed=null,this._s_clean(),(0,ls.Z)((0,En.Z)(n.prototype),"close",this).call(this,arguments)}},{key:"_s_onready",value:function(e,t){var n="";n+=t?'More than 100 results found for "'+this._s_searchParams.pattern+'", only first 100 are shown.':"Found "+e+' match(es) for "'+this._s_searchParams.pattern+'".',e>0&&(n+=" Double click on the line to open the file."),this._s_model.replaceRange("",{lineNumber:1,column:1},{lineNumber:2,column:1}),this._s_appendResults(n+"\n",1)}},{key:"_s_onClick",value:function(e){var t=this;if(this._s_parsed){if(d().isNumber(this._s_clickTimeout)){clearTimeout(this._s_clickTimeout),this._s_clickTimeout=null;var n=e.target.position,r=this._s_parsed[n.lineNumber],a=r.range?r.range.startLineNumber:r.lineNumber;i.Z.ide.helpers.openFileAndGoToLine(r.path,a)}this._s_clickTimeout=setTimeout((function(){t._s_clickTimeout=null}),500)}}},{key:"_s_checkStatus",value:function(e,t){var n=this,i="log-entry/"+t.logEntryId,r=null;b.ZP.standardCallbackTask({message:t.taskId}).then((function(e){n._s_onready(e.totalMatches,e.moreResults),h.Z.unsubscribe(i,r)})).catch((function(e){var t=e.message;l().notify(t,{type:"error"}),h.Z.unsubscribe(i,r)})),r=h.Z.subscribeAll(i,(function(e){if(e){var t=e.split("\n");t.shift(),(e=t.join("\n"))&&e.length>0&&(n._s_appendResults(function(e){return(e=(e=e.replaceAll("<codio-search-file","\n<codio-search-file")).replaceAll("</codio-search-file>","</codio-search-file>:")).replace(/(<(\/?codio-search[^>]+)>)/gi,"")}(e)),n._s_parsed=function(e){for(var t=e.split(/\r?\n/),n=[],i=null,r=0;r<t.length;r++){var s=r+1,o=t[r],c=Q_.exec(o);if(c){var l=(0,a.Z)(c,2)[1];i=l,n[s]={type:"file",path:l,range:B.Zo.e6.fromPositions({lineNumber:s,column:0},{lineNumber:s,column:o.length})}}if(i){var u=X_.exec(o);if(u){var d=(0,a.Z)(u,4),p=d[2],f=d[3];n[s]={type:"result",path:i,lineNumber:parseInt(p,10),resultOffset:(p+f+"").length+2}}}}return n}(n._s_model.getValue()),n._highlightMatches())}}))}},{key:"_s_clean",value:function(){this._s_onMouseDownDisposable&&this._s_onMouseDownDisposable.dispose(),this._s_onMouseDownDisposable=null;var e=this.editor();e&&(this._s_highlights&&this.editor().deltaDecorations(this._s_highlights,[]),this._s_highlights=null,e.setOption("lineNumbers",null))}}]),n}(ds.Z);const nk=tk;n(27090),n(35373);var ik={info:K_,settings:{},hotkeys:Y_,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nk);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};i.Z.register(ik);const rk=JSON.parse('{"name":"shortcuts","description":"Shortcuts List Viewer","codio":{"global":true,"title":"Shortcuts","urls":"shortcuts"}}');var ak;function sk(e){ak=function(e){var t={};return d().each(e,(function(e,n){d().each(e,(function(e){d().isEmpty(e.key)||d().isEmpty(e.desc)||(t[n]=t[n]||[],t[n].push({title:m.ZP.formatKey(e.key),description:e.desc}))}))})),t}(v.Z.hotkey.compiledDescription());var t=l()(f().compile('<section>\n    <div>\n        <form class="form-search" onsubmit="return false;">\n            <input type="text"\n                   autofocus\n                   class="input-medium search-query shortcut-search {{#if asDialog}}as-dialog{{/if}}"\n                   placeholder="Find a shortcut..."\n                   aria-label="Find a shortcut">\n        </form>\n        <p>These are your keyboard shortcuts, which include any customisations you may have made. You can customise\n            these by editing your User preferences, which can be found in <code>Codio > Preferences -> User</code>.</p>\n    </div>\n    <div class="shortcuts-descriptions {{#if asDialog}}as-dialog{{/if}}">\n        {{#eachObject shortcuts}}\n        <table class="table table-hover table-striped">\n            <thead>\n                <tr>\n                    <th class="shortcuts-section" data-id="{{_key}}" colspan="2" tabindex="0">{{_key}}</th>\n                </tr>\n            </thead>\n            <tbody>\n                {{#each items}}\n                <tr class="shortcuts-item" data-id="{{title}}">\n                    <td class="shortcuts-item-key" tabindex="0"><code>{{{title}}}</code></td>\n                    <td class="shortcuts-item-command" tabindex="0">{{description}}</td>\n                </tr>\n                {{/each}}\n            </tbody>\n        </table>\n        {{/eachObject}}\n    </div>\n</section>')({shortcuts:ak,asDialog:e})),n=t.find(".shortcut-search");return y.Z.on(n,"keyup.shortcuts",(function(){!function(e,t){e=e.toUpperCase(),d().each(t,(function(t,n){var i=!1;d().each(t,(function(t){var n=t.title.toUpperCase(),r=t.description.toUpperCase();n.indexOf(e)>-1||r.indexOf(e)>-1?(i=!0,l()('.shortcuts-item[data-id="'+t.title+'"]').show()):l()('.shortcuts-item[data-id="'+t.title+'"]').hide()}));var r=i?"show":"hide";l()('.shortcuts-section[data-id="'+n+'"]')[r](),l()('.shortcuts-item[data-section="'+n+'"]')[r]()}))}(n.val(),ak)})),t}y.Z.subscribe("command:shortcuts:show",(function(){i.Z.ide.isClosed?(0,R.Z)({title:"Shortcuts",content:sk(!0),buttons:R.Z.MB_OK}):i.Z.ide.open("shortcuts","","Shortcuts")}));const ok=function e(t){if(!(this instanceof e))return new e(t);l()(t).append(sk(!1)),d().delay((function(){l()(t).find(".shortcut-search").focus()}),100)};var ck={};ck.info=rk,ck.settings={},ck.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ok);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(ck);const lk=JSON.parse('{"name":"quick-open","description":"Open files with the keyboard","codio":{}}');var uk={};uk.info=lk,uk.hotkeys={},uk.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wh.Z);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(uk);const dk=JSON.parse('{"name":"command-bar","description":"Run any action with the keyboard","codio":{}}');const pk={filterCommands:function(e,t){return t=t.toUpperCase(),d().filter(e,(function(e){return-1!==e.name.toUpperCase().indexOf(t)}))},sortFunc:function(e,t){var n=e.name.toUpperCase().split(":"),i=t.name.toUpperCase().split(":"),r=n[0],a=i[0],s=n[1],o=i[1];return r>a?1:r<a?-1:s>o?1:s<o?-1:0}};var fk=n(15454);const hk={};var mk=n(44442).A,gk=null,vk=f().compile('<ul aria-labelledby="itemsList" role="listbox" id="itemsList" tabindex="0" class="list command-bar">\n  {{#each items}}\n    <li role="none">\n        <a role="option" href="#" tabindex="-1" data-index="{{@index}}">\n            <div class="name" title="{{name}}">{{name}}</div>\n            <div class="hotkey">{{hotkey}}</div>\n            <div class="command hide">{{command}}</div>\n        </a>\n    </li>\n  {{/each}}\n</ul>\n'),bk=null,yk=function(){return m.ZP.promise.defer().then((function(){if(!bk){var e=function(){var e=i.Z.currentProject;return(e.eduStartedAssignmentInfo&&e.isOwner&&!e.isOpenedByTeacher||e.isAuthorProject)&&(hk.project={delete:!0}),e.eduStartedAssignmentInfo&&!e.isOpenedByTeacher&&ef.Z.getDisableDownloadByStudent(e.eduStartedAssignmentInfo)&&(hk.project=(0,cs.Z)({},"export:zip",!0)),hk}();bk=[],d().each(mk.descriptions(),(function(t,n){d().each(t,(function(t,i){e[n]&&e[n][i]||bk.push({command:i,name:n+": "+t.desc,hotkey:m.ZP.formatKey(t.default)})}))})),bk.sort(pk.sortFunc)}return bk}))},wk=function(e,t){var n,r;e?(n=e.find(".name").html(),r=e.find(".command").html()):t&&(n=t.name,r=t.command);var a=i.Z.ide.panels.focus&&i.Z.ide.panels.focus.activeTab(),s=function(e,t){return e&&mk.execute(e.split(":")[0],t)};a?(gk.close(),a.focus().then((function(){return s(n,r)}))):(gk.close(),s(n,r))};function _k(e,t,n){return m.ZP.promise.defer().then((function(){return pk.filterCommands(e,t)})).then((function(e){return m.ZP.promise.defer(e)})).then((function(e){return n()?Promise.reject(new Error("query cancelled")):e.sort(pk.sortFunc)}))}var kk=function(){if(!i.Z.ide.isClosed){if(!gk){var e={title:"Command Bar",maxItems:500,allowedHotkeys:"command-bar:key_quick_run",searchPlaceholder:"enter first few letters of a command to run...",listTemplate:vk,filterOnQueryChanged:_k,callback:wk};gk=new fk.Z(yk.bind(this),e)}gk.toggle()}};y.Z.subscribe("command:ide:key_quick_run",d().debounce(kk,200)),y.Z.subscribe("project:close",(function(){gk&&gk.close(),gk=null}));const Pk={open:kk};var Zk={};Zk.info=dk,Zk.hotkeys={},Zk.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pk);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(Zk);const xk=JSON.parse('{"name":"container","description":"Container Managers","codio":{}}'),Ck=JSON.parse('{"restart":{"desc":"Restart the box"},"reset":{"desc":"Reset user home on the box to original state"}}');var Sk=b.ZP.containerManager,Ek=null;function Ik(e){if(null===Ek){var t=i.Z.currentProject;t&&t.isAdmin&&(Ek=R.Z.showConfirm({description:"Do you want to "+e+" the box for '"+t.name+"' Project?",captcha:"reset"===e,onClose:Tk.bind(null,e),onHide:function(){Ek=null}}))}}function Tk(e,t){if(t)return function(e,t){e.preventClosing(!0);var n=e.buttons()[0],i=t.charAt(0).toUpperCase()+t.slice(1);n.disable(i+"ing...","loading"),e.buttons()[1].disable(),e.content().find(":input").prop("disabled",!0)}(Ek,e),Sk[e](i.Z.currentProject.guid).then(jk.bind(null,e)).catch((function(e){var t=e.message;k.Z.error(m.ZP.safeHtml(t)),Ek.close()})),!1}function jk(e,t){if(t){var n="reset"===e?e:e+"ed";k.Z.success("The box was "+n),m.ZP.checkGigaBoxStatus(i.Z.currentProject,b.ZP)}else k.Z.error("Fail to "+e+" the box");Ek.close()}y.Z.subscribe("command:container:reset",Ik.bind(null,"reset")),y.Z.subscribe("command:container:restart",Ik.bind(null,"restart"));const Ak={};var Ok,Dk=f().compile('<div id="container-project-info">\n  <p>The following information is specific to this project, and details the different ways you can access your Project and its Box. If you need a hand with anything, please <a href="mailto:help@codio.com">drop us a line</a>.</p>\n\n  <section>\n    <h4>Web: <small>Dynamic content</small></h4>\n    <p>You can run your server applications on port 80 or any port between 1024 and 9999.\n      To access the port add it to the box domain name as shown bellow</p>\n    <pre><code>https://{{ domain }}-80.{{ boxDomain }}\nhttps://{{ domain }}-&lt;1024-9999&gt;.{{ boxDomain }}</code></pre>\n\n    <p><small>* Access using <code>https://{{ domain }}.{{ boxDomain }}:&lt;1024-9999&gt;</code> is deprecated due to security reasons.</small></p>\n  </section>\n\n  <section>\n    <h4>Web: <small>Static content</small></h4>\n    <pre><code><a target="_blank" href="https://{{ domain }}.{{ boxDomain }}">https://{{ domain }}.{{ boxDomain }}</a></code></pre>\n  </section>\n\n  <section>\n    <h4>Stack: <small>Information</small></h4>\n    Click <a class="stack-info-link" href="{{stackInfoLink}}">here</a> to show stack information.\n  </section>\n\n</div>\n');function Nk(){Ok=null}y.Z.subscribe("command:container:info",(function(){var e=function(){var e=i.Z.currentProject;if(!e)return!1;var t=[];i.Z.router&&i.Z.router.getURL()&&(t=d().take(i.Z.router.getURL().split("/"),3)).push("stack-info");var n={domain:e.backendSubDomain,boxDomain:Qi.Z.get("boxDomain"),sshHost:e.sshHost,sshPort:e.sshPort,fileServer:e.userFileServer,stackInfoLink:t.join("/"),containerServer:null};return 1===e.generation?Promise.resolve(n):b.ZP.ProjectManager.fetchContainerServer(e.guid).then((function(e){return n.containerServer=e,n})).catch((function(){return n}))}();e&&!Ok&&e.then((function(e){var t=l()(Dk(e));Ok=new R.Z({title:"Project Box Info",content:t,onClose:Nk,onHide:Nk,buttons:R.Z.MB_OK,width:700,height:"535px"}),y.Z.on(t.find(".stack-info-link"),"mouseup",(function(){Ok.close()}))}))}));var Mk={};Mk.info=xk,Mk.hotkeys=Ck,Mk.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ak);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(Mk);const Fk=JSON.parse('{"name":"sync-structure","description":"Synchronization structure","codio":{}}'),Rk=JSON.parse('{"sync":{"desc":"Synchronize the file structure"}}');var Lk=n(31706);y.Z.subscribe("command:file:sync_structure",(function(){var e=l()("#tree-progress");e.showFProgress(null,10,!1),Lk.Z.syncStructure(i.Z.currentProject.guid).then((function(){e.completeFProgress()}))}));const Uk={};var Bk={};Bk.info=Fk,Bk.hotkeys=Rk,Bk.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uk);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(Bk);const qk=JSON.parse('{"name":"guides","description":"Codio Guides support","codio":{"urls":["guides","guides-edit"],"view":["preview","code","splitview"],"global":true,"noFile":true,"title":{"guides":"Guide","installed":"Guides Editor"}}}'),Hk=JSON.parse('{"font_size":{"default":18,"type":"int","desc":"Guides font size."},"sync_font_size":{"default":false,"type":"boolean","desc":"Sync guides font size with editor and terminal font sizes."},"theme":{"default":"light","type":"list","values":{"light":"light","charcoal":"charcoal","paper":"paper","dyslexic":"dyslexic"},"desc":"Guides theme."},"editor_theme_before_dyslexic":{"default":"","type":"string","desc":"Editor theme before dyslexic theme in guides was applied."}}'),Wk=JSON.parse('{"pre_edit":{"desc":"Edit Guide","key":{"win":"Ctrl+Alt+G","mac":"Cmd+Alt+G"}},"view":{"desc":"Play Guide"},"remove_custom_css":{"desc":"Remove custom CSSs from Guides"},"add_custom_css":{"desc":"Add custom CSS to Guides"},"md_toolbar_bold":{"desc":"Make selected text bold in guides markdown editor","key":{"win":"Ctrl+B","mac":"Cmd+B"}},"md_toolbar_u_list":{"desc":"Convert selected text into innumerate list","key":{"win":"Ctrl+U","mac":"Cmd+U"}},"md_toolbar_o_list":{"desc":"Convert selected text into ordered list","key":{"win":"Ctrl+,","mac":"Cmd+,"}},"md_toolbar_code":{"desc":"Create code block with selected text","key":{"win":"Ctrl+D","mac":"Cmd+D"}},"md_toolbar_run":{"desc":"Create command button","key":{"win":"Ctrl+M","mac":"Cmd+M"}}}');var zk=n(67449),Gk=n.n(zk),Vk=n(28893),Kk=n(18914),Yk=n(72523).w_,Jk=n(72523).Yn;function Qk(e){var t=m.ZP.path.getFileExtension(e);return Yk[t]}const Xk={getMediaPlayerSource:function(e){var t=m.ZP.path.makePath(Jk,e);return{src:e=Ig.Z.url(t),type:Qk(e)}}};n(49085);var $k=n(72523).vK,eP=null,tP=null,nP=null,iP=!1,rP=y.Z.create(n(10742));function aP(e,t,n){iP=!1;var i=e.media;eP={section:e,media:i,actionMap:d().groupBy(i.actions,"time"),times:d()(i.actions).sortBy("time").map("time").value(),runMap:{},getPanel:t,lastTime:0};var r=nP.find(".media-player-container"),a=function(){r.removeClass("media-player-hidden"),rP.mediaPlayerInitialized(),n?tP.play():tP.load()};tP?(tP.reset(),sP(i.source),a()):function(e,t){var n=nP.find("#player_media_player");tP=Gk()(n[0],{},(function(){sP(e.source,this),this.volume(.5),this.markers({markerTip:{display:!1},markers:e.actions}),this.on("timeupdate",uP),this.on("ended",dP),this.on("seeked",lP);var n=this;this.on("canplay",(function(){eP&&n.markers.reset(eP.media.actions),iP=!0})),t()}))}(i,a)}function sP(e,t){t=t||tP;var n=Xk.getMediaPlayerSource(e);i.Z.currentProject.eduStartedAssignmentInfo&&(n=e),t.src(n)}function oP(e,t){return Vk.ZP.getMetadata().then((function(n){var i=n.getSectionTabs(eP.section.id),r=eP.section.getMediaTabs(i,e,t);d().forEach(r.map.toClose,(function(e){e.close(eP.getPanel).catch(m.ZP.error.checkErrorForIgnore)})),d().forEach(r.map.toOpen,(function(e){e.open(eP.getPanel)})),r.needCloseAll&&Kk.Z.closeAllTabs(eP.getPanel),r.needPause&&cP(),eP.runMap=[];var a=d().findLast(eP.times,(function(e){return e<=t}));eP.actionMap[a]&&(eP.runMap[a]=!0),eP.lastTime=t,eP.seeked=!1}))}function cP(){tP&&tP.pause()}function lP(){eP.seeked&&oP(eP.lastTime,Math.round(tP.currentTime()))}function uP(){if(iP){var e=tP.currentTime(),t=Math.round(e);if(eP&&!eP.seeked)if(Math.abs(t-eP.lastTime)>1)eP.seeked=!0;else{eP.lastTime=t;var n=d().findLast(eP.times,(function(e){return e<=t})),i=eP.actionMap[n];!eP.runMap[n]&&i&&oP(n-1,n)}}}function dP(){l()(".guides-button-next").click()}const pP={runSection:d().throttle((function(e,t,n,i){nP=e;var r=t&&t.media;r&&!r.disabled?d().defer((function(){!function(e,t,n){e.media.type===$k.AUDIO&&aP(e,t,n)}(t,n,i)})):(cP(),nP.find(".media-player-container").addClass("media-player-hidden"),rP.mediaPlayerStopped())}),1e3),pause:cP,cleanup:function(){tP&&(tP.dispose(),tP=null),eP=null,nP=null,rP.mediaPlayerClosed()}};var fP=n(61478),hP=null,mP=null,gP=null,vP=null;const bP={setContainer:function(e){vP=e},getContainer:function(){return vP},setAssessmentId:function(e){hP=e},getAssessmentId:function(){return hP},setRubricsInfo:function(e){gP=e},getRubricsInfo:function(){return gP},setAssessmentStats:function(e){mP=e},getAssessmentStats:function(){return mP}};var yP=n(76900);function wP(){var e=bP.getAssessmentId(),t=bP.getAssessmentStats();if(e&&t)return d().find(t,(function(t){return t.id===e}))}const _P={isRubricAssessment:function(e){return yP.ZP.FREE_TEXT===e.type||yP.ZP.GRADE_BOOK===e.type},checkVisibility:function(e,t,n){n===t?l()(e).find("i").hide():l()(e).find("i").show()},assessmentPosition:function(){return d().findIndex(bP.getAssessmentStats(),(function(e){return bP.getAssessmentId()===e.id}))},getCurrentAssessment:wP,getPoints:function(e){var t=wP();if(!t)return"";var n=t.answer&&t.answer.attempt?t.answer.attempt.points:null,i=t.details.points,r=t.answer&&d().isFinite(t.answer.attempt.points)?n:e?"?":"";return""===r?"":t.task.arePartialPointsAllowed?r+"/"+i+(e?" point(s)":""):r+(e?" point(s)":"")},getCurrentAdjustValue:function(){var e=bP.getContainer();if(e){var t=e.find(".assessments-grade-rubrics--adjust-input");if(t.length){var n=parseInt(t.val(),10);if(d().isFinite(n))return n}return 0}},getCurrentCommentsValue:function(){var e=bP.getContainer();if(e){var t=e.find(".assessments-grade-rubrics--adjust-textarea");return t.length?t.val():""}}};var kP=n(88228),PP=n(79165),ZP=f().compile(PP),xP=y.Z.create(n(10742));function CP(e,t,n){var i={adjustValue:_P.getCurrentAdjustValue(),comments:_P.getCurrentCommentsValue()};t&&(i.uuid=t);var r=_P.getCurrentAssessment();return r.answer&&r.answer.attempt&&r.answer.attempt.id&&(i.answerId=r.answer.attempt.id),SP().then((function(t){if(t)return jP(!0),fP.Z.applyAssessmentGradingRubrics(e,bP.getAssessmentId(),i).then((function(){return TP(!1,n)}))})).catch((function(e){jP(!1),k.Z.error(e.message)}))}function SP(){var e=_P.getCurrentAssessment();return!e.answer&&e.draft&&d().isString(e.draft.text)?new Promise((function(e){var t=R.Z.showConfirm({description:"This answer is in draft mode, submitting answer will force draft to answer",doNotCloseOpened:!0,onHide:function(){d().defer((function(){l()(t.documentActiveElement).focus()}))},onClose:function(t){e(t)}})})):Promise.resolve(!0)}function EP(e,t,n){return SP().then((function(i){if(i)return jP(!0),fP.Z.changeRubric(e,t).then((function(){return TP(n)}))})).catch((function(e){k.Z.error(e.message),jP(!1)}))}function IP(e){return d()(e).keyBy((function(e){return e[0]})).mapValues((function(e){return e[1]})).value()}function TP(e,t){var n=i.Z.currentProject;jP(!0);return Promise.all([fP.Z.loadRubrics(),fP.Z.findCourse(n.course.id,n.eduStartedAssignmentInfo.started.assignmentId,n.eduStartedAssignmentInfo.started.assignee.userId,n.eduStartedAssignmentInfo.started.assignee.groupId,{assignment:{stats:!0,guideStats:!0,started:{project:!0,grade:!0,assessmentStats:!0,assessmentStates:!0}}})]).then((function(n){var r=(0,a.Z)(n,2),s=r[0],o=r[1];xP.assignmentRubricsReloaded(s),xP.courseReloaded(o);var c=function(e){var t=i.Z.currentProject,n=t.eduStartedAssignmentInfo.started.assignmentId,r=t.eduStartedAssignmentInfo.started.assignee,a=d()(e.unitsList).map("assignmentsList").flatten().value(),s=d().find(a,(function(e){return(e.projectBased?e.projectBased.id:e.bookBased.id)===n})),o=s.projectBased||s.bookBased,c=d().find(e.startedAssignments,(function(e){var t=e.assignee;return t.groupId&&t.groupId===r.groupId||t.userId&&t.userId===r.userId})),l=d().mapValues(IP(c.assessmentStatesMap),"value"),u=d().keyBy(c.answersList,"assessmentId"),p=d().keyBy(o.guidesStats.assessmentsList,"id"),f=IP(c.rubricsMap);return d()(o.guidesStats.sectionsList).map((function(e){var t="";try{t=JSON.parse(e.playbackMetadataJson).title}catch(e){}return d()(e.assessmentIdsList).map((function(e){var n=p[e];kP.ZP.updateAssessmentType(n),n.sectionTitle=t;var i=l[e];try{i=JSON.parse(i)}catch(e){}return n.draft=i,n.answer=u[e],n.answer&&n.answer.attempt&&(n.answer.attempt=kP.ZP.convertAttemptOrAssessmentTask(n.answer.attempt,!0)),n.task=kP.ZP.convertAttemptOrAssessmentTask(n.task),n.rubric=f[n.id],n})).sortBy((function(e){return e.details.name.toLowerCase()})).value()})).flatten().value()}(o);bP.setRubricsInfo(s);var l=d().filter(c,(function(e){return _P.isRubricAssessment(e)}));bP.setAssessmentStats(l),t||xP.gradeAssessmentsRender(e)})).finally((function(){jP(!1)}))}function jP(e){var t=bP.getContainer();if(t){var n=t.find(".assessments-grade-rubrics--points"),i=_P.getPoints(!0);e&&(i=l()(ZP())),n.empty().append(i)}}const AP={applyRubric:CP,changeRubricCall:EP,reloadStats:TP,checkUnsaved:function(){var e=_P.getCurrentAssessment(),t=0,n="";return e.rubric&&(t=e.rubric.adjustValue,n=e.rubric.comments),(t!==_P.getCurrentAdjustValue()||n!==_P.getCurrentCommentsValue())&&(CP(!1,void 0,!0),!0)},saveAdjustPoints:function(e,t){_P.getCurrentAdjustValue()!==t.adjustValue&&CP(!1)},addRubric:function(){EP(!1,{message:"Message",weight:1},!0)}};var OP=n(79791),DP=f().compile('<div class="assessments-grade-rubrics--item {{#equals position 1}}assessments-grade-rubrics--predefinedAlign{{/equals}}" data-uuid="{{uuid}}">\n    <a class="select {{activeClass}} assessments-grade-rubrics--item-position-{{position}}" href="#">{{position}}</a>\n    {{#if custom}}\n    <span class="assessments-grade-rubrics--span">\n        -{{weight}}\n    </span>\n    {{/if}}\n    <div class="assessments-grade-rubrics--div {{activeClass}} {{#equals custom false}}predefined{{/equals}}" title="{{message}}">\n        {{message}}\n    </div>\n    {{#equals custom true}}\n    {{#equals readOnly false}}\n    <button class="assessments-grade-rubrics--itemClose icon-button" title="Remove rubric" aria-label="Remove rubric">\n        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n    </button>\n    {{/equals}}\n    {{/equals}}\n</div>\n'),NP=m.ZP.KeyCode;function MP(e){e.stopPropagation(),e.preventDefault()}function FP(e,t,n){return MP(n),AP.applyRubric(t,e)}function RP(e,t,n,i){MP(i);var r=l()('<input type="text" maxlength="1000" class="assessments-grade-rubrics--message"/>').val(n).click(MP).blur((function(){var e=(0,OP.xh)(n);t.find(".assessments-grade-rubrics--div").empty().append(e)})).change((function(e){var t=LP(l()(e.target).closest(".assessments-grade-rubrics--item").data("uuid"));t.message=l()(e.target).val(),t.message!==n&&AP.changeRubricCall(!1,t)}));t.find(".assessments-grade-rubrics--div").empty().append(r),r.focus()}function LP(e){var t=bP.getRubricsInfo(),n=d().find(t.rubricsList,(function(t){return t.uuid===e}));return d().cloneDeep(n)}function UP(e,t,n,i){MP(i);var r=Date.now(),a=l()('<input type="number" max="1000" min="-1000" class="assessments-grade-rubrics--input"/>').val(n).click(MP).blur((function(e){Date.now()-r<50||(s(e),t.find(".assessments-grade-rubrics--span").empty().append("-"+n))})).keydown((function(e){(e.keyCode||e.which)===NP.RETURN&&s(e)}));function s(e){var t=LP(l()(e.target).closest(".assessments-grade-rubrics--item").data("uuid"));t.weight=parseInt(a.val(),10),d().isFinite(t.weight)&&t.weight!==n&&AP.changeRubricCall(!1,t)}t.find(".assessments-grade-rubrics--span").empty().append(a),a.focus()}function BP(e,t){MP(t),R.Z.showConfirm({description:"Do you want to remove rubric item?",captcha:!0,doNotCloseOpened:!0,onClose:function(e){if(e){var n=LP(l()(t.target).closest(".assessments-grade-rubrics--item").data("uuid"));AP.changeRubricCall(!0,n)}}})}const qP={renderRubricItem:function(e,t,n,i,r){var a="",s=e.rubric&&d().includes(e.rubric.rubricsList,n.uuid);if(!e.rubric||d().isEmpty(e.rubric.rubricsList)){var o=e.details.points,c=e.answer&&e.answer.attempt&&d().isFinite(e.answer.attempt.points)?e.answer.attempt.points:null;null!==c&&(o===c&&1===t||0===c&&0===t)&&(s=!0)}if(s)switch(t){case 0:a="active-red";break;case 1:a="active-green";break;default:a="active"}var u=!(!n.context||!n.context.assessmentId),p=(0,OP.xh)(n.message),f=l()(DP({activeClass:a,position:t,weight:n.weight,uuid:n.uuid,message:n.message,custom:t>1,readOnly:u}));i.append(f),f.find(".assessments-grade-rubrics--div").html(p),f.find("a.select").click(FP.bind(null,n.uuid,!!a)),t>1&&!u&&(f.find(".assessments-grade-rubrics--itemClose").click(BP.bind(null,t)),f.click(UP.bind(null,t,f,n.weight)),f.find(".assessments-grade-rubrics--div").click(RP.bind(null,t,f,n.message)),r&&d().defer((function(){f.trigger("click")})))},selectRubricItem:function(e){l()(".assessments-grade-rubrics--item-position-".concat(e)).trigger("click")}};var HP=n(83638);var WP,zP=f().compile('<div class="assessment-grade-container">\n  <div class="header">\n    <a class="assessments-grade-left" href="#">\n      <i class="icon ss-icon icon-left ss-pika" type="pika">\n        left\n      </i>\n    </a>\n    <a class="assessments-grade-right" href="#">\n      <i class="icon ss-icon icon-right ss-pika" type="pika">\n        right\n      </i>\n    </a>\n    <h3 class="title">Assessments grading</h3>\n  </div>\n  <div class="content"></div>\n  <div class="footer">\n    <div class="hint">\n      Use left/right or page up/page down arrows to navigate assessments.&nbsp;\n      Use 0-9 for select rubric, +/insert for add rubric\n    </div>\n    <button class="btn btn-primary close-btn">Close</button>\n  </div>\n</div>'),GP=f().compile('<div class="assessments-grade-info">\n    <div class="assessments-grade-info-row">\n        <div class="assessments-grade-info-item">\n            Section\n        </div>\n        <div class="assessments-grade-info-item">\n            Assessment Name\n        </div>\n        <div class="assessments-grade-info-item assessments-grade-info-item--width">\n            Points\n        </div>\n        <div class="assessments-grade-info-item assessments-grade-info-item--width">\n            Type\n        </div>\n        <div class="assessments-grade-info-item assessments-grade-info-item--width">\n            Correct\n        </div>\n    </div>\n    <div class="assessments-grade-info-row assessments-grade-info-row--data">\n        <div class="assessments-grade-info-item">\n            {{section}}\n        </div>\n        <div class="assessments-grade-info-item">\n            {{name}}\n        </div>\n        <div class="assessments-grade-info-item assessments-grade-info-item--width">\n            {{points}}\n        </div>\n        <div class="assessments-grade-info-item assessments-grade-info-item--width">\n            {{#equals type \'grade-book\'}}\n            <i class="svg icon assessments-grade--type-img icon-grade-book"/>\n            {{/equals}}\n            {{#equals type \'free-text\'}}\n            <i class="svg icon assessments-grade--type-img icon-free-text"/>\n            {{/equals}}\n        </div>\n        <div class="assessments-grade-info-item assessments-grade-info-item--width">\n            {{#equals correctIcon undefined}}\n                {{#if draft}}\n                    <span class="assessments-grade-info-item--draft">draft</span>\n                {{else}}\n                    {{#if date}}\n                    <span class="assessments-grade-info-item--grade">grade</span>\n                    {{/if}}\n                {{/if}}\n            {{else}}\n                <i class="icon ss-icon icon-{{correctIcon}} ss-pika" type="pika" title="{{correctIconTitle}}">{{correctIcon}}</i>\n            {{/equals}}\n        </div>\n    </div>\n</div>\n{{#if date}}\n<div class="assessments-grade-field">\n    <div class="assessments-grade-field-title">\n        Date\n    </div>\n    <div class="assessments-grade-field-value">\n        {{date}}\n    </div>\n</div>\n{{/if}}\n{{#equals type \'free-text\'}}\n<div class="assessments-grade-field">\n    <div class="assessments-grade-field-title">\n        Question\n    </div>\n    <div class="assessments-grade-field-value">\n        {{question}}\n    </div>\n</div>\n{{/equals}}\n'),VP=f().compile('<div class="assessments-grade-field--answers">\n    <div class="assessments-grade-field--answers-container {{#equals type \'grade-book\'}}hide{{/equals}}">\n    {{#if rationale}}\n    <div class="assessments-grade-field">\n        <div class="assessments-grade-field-title">\n            Rationale\n        </div>\n        <div class="assessments-grade-field-value assessments-grade-field-rationale">\n            {{rationale}}\n        </div>\n    </div>\n    {{/if}}\n    <div class="assessments-grade-field">\n        <div class="assessments-grade-field-title">\n            {{#equals type \'free-text\'}}\n            Student answer\n            {{/equals}}\n            {{#equals type \'grade-book\'}}\n            Answer\n            {{/equals}}\n        </div>\n        <div class="assessments-grade-field-value assessments-grade-field-question {{#equals type \'grade-book\'}}hide{{/equals}}">\n            {{answer}}\n        </div>\n    </div>\n    </div>\n    <div class="assessments-grade-field-rubrics">\n    </div>\n</div>\n'),KP=f().compile('{{#if partialPoints}}\n<div class="assessments-grade-rubrics--options" title=\'Copy rubrics\'>\n    <i class="icon ss-icon icon-gear ss-pika" type="pika">gear</i>\n</div>\n{{/if}}\n<div class="assessments-grade-rubrics--total">\n    Total points:\n    <div class="assessments-grade-rubrics--points">\n        {{points}}\n    </div>\n</div>\n<div class="assessments-grade-rubrics--content">\n</div>\n{{#if partialPoints}}\n<button class="btn btn-primary assessments-grade-rubrics--button">\n    <i class="icon ss-icon icon-add ss-pika" type="pika">add</i>\n    &nbsp;Add Rubric Item\n</button>\n<div class="assessments-grade-rubrics--adjust">\n    Points adjust:\n    <input type="number" min="-1000" max="1000" class="assessments-grade-rubrics--adjust-input" value="{{adjustValue}}"/>\n</div>\n{{/if}}\n<textarea placeholder="Provide specific assessment comments..." class="assessments-grade-rubrics--adjust-textarea">{{comments}}</textarea>\n<div class="assessments-grade-rubrics--comments-preview"></div>\n\n\n'),YP=f().compile('<div id="assessments-grade">\n    <div class="assessments-grade-content">\n        <i class="spinner assessments-grade-rubrics--loader svg icon icon-loader-dark" />\n    </div>\n</div>\n'),JP=y.Z.create(n(10742)),QP=m.ZP.KeyCode;function XP(e,t){document.addEventListener("keydown",eZ,!1),l()(window).on("beforeunload",$P),e&&(e.find(".assessments-grade-left").click(tZ.bind(null,-1)),e.find(".assessments-grade-right").click(tZ.bind(null,1)),e.find(".close-btn").click(aZ.bind(null,t)))}function $P(){if(AP.checkUnsaved())return"Please wait, data saving in progress"}function eZ(e){var t=e.keyCode||e.which,n=e.target.tagName;if(!(("TEXTAREA"===n||"INPUT"===n)&&!d().includes([QP.HOME,QP.END,QP.INSERT],t)))switch(t){case QP.PAGE_UP:case QP.RIGHT:tZ(1);break;case QP.PAGE_DOWN:case QP.LEFT:tZ(-1);break;case QP.INSERT:case QP.PLUS:AP.addRubric();break;default:var i=t-QP.ZERO;t>=QP.NUMPAD0&&(i=t-QP.NUMPAD0);var r=bP.getRubricsInfo();i>=0&&i<r.rubricsList.length&&qP.selectRubricItem(i)}}function tZ(e){var t=_P.assessmentPosition()+e,n=bP.getAssessmentStats();if(!(t<0||t>=n.length)){AP.checkUnsaved();var i=n[t];bP.setAssessmentId(i.id),iZ()}}function nZ(){rZ(_P.getCurrentCommentsValue(),".assessments-grade-rubrics--comments-preview")}function iZ(e){var t=_P.getCurrentAssessment(),n=_P.assessmentPosition(),i=bP.getAssessmentStats().length-1;_P.checkVisibility(".assessments-grade-left",0,n),_P.checkVisibility(".assessments-grade-right",i,n);var a={section:t.sectionTitle,name:t.details.name,type:t.type,rationale:t.details.guidance?t.details.guidance.value:"",question:t.details.instructions,partialPoints:t.task.arePartialPointsAllowed,points:_P.getPoints()};if(t.draft&&d().isString(t.draft.text)&&(a.answer=t.draft.text,a.draft=!0),t.answer){if(t.answer.status&&t.answer.status.pending)delete a.draft;else{var s=t.answer.attempt.points>0,c=s&&t.answer.attempt.points<t.details.points;a.correctIcon=c?"percent":s?"check":"close",a.correctIconTitle=c?"partial":s?"passed":"failed"}var u=t.answer.submittedAt,p=new Date(1e3*u.seconds+u.nanos/1e6);a.date=m.ZP.formatDateFullUS(p),0===t.details.points&&(delete a.draft,delete a.date,delete a.correctIcon);var f=t.answer.attempt.answer;f&&(a.answer=f)}var h=l()(GP(a)),g=l()(VP(a));if((a.answer||t.type===yP.ZP.GRADE_BOOK)&&_P.isRubricAssessment(t)&&0!==t.details.points){var v=d().cloneDeep(a);v.points=_P.getPoints(!0),t.rubric&&(v.adjustValue=t.rubric.adjustValue,v.comments=t.rubric.comments);var b=l()(KP(v));g.find(".assessments-grade-field-rubrics").append(b);var y=g.find(".assessments-grade-rubrics--content"),w=bP.getRubricsInfo(),_=null,P=d()(w.rubricsList).map((function(t,n){return e&&n===w.rubricsList.length-1&&(_=t.uuid),{rubric:t,rubricOrder:n>1?t.context?t.context.order+10:n+5e3:n}})).sort((function(e,t){return e.rubricOrder-t.rubricOrder})).filter((function(e){var n=e.rubric,i=e.rubricOrder;return!(!t.task.arePartialPointsAllowed&&i>1)&&!(n.context&&n.context.assessmentId!==t.id)})).map((function(e){return e.rubric})).value();d().each(P,(function(e,n){qP.renderRubricItem(t,n,e,y,_===e.uuid)})),g.find(".assessments-grade-rubrics--button").click(AP.addRubric);var Z=function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.promise.iterateAsync(t,(function(e){return fP.Z.changeRubric(!1,{weight:e.weight,message:e.message})}));case 2:AP.reloadStats().catch((function(e){var t=e.message;k.Z.error(t)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();g.find(".assessments-grade-rubrics--options").click((function(){HP.Z.openDialog(Z)}));var x=g.find(".assessments-grade-rubrics--adjust-input");x.blur((function(){AP.saveAdjustPoints(x,v)})).keydown((function(e){(e.keyCode||e.which)===QP.RETURN&&AP.saveAdjustPoints(x,v)}));var C=g.find(".assessments-grade-rubrics--adjust-textarea");C.change((function(){C.val()!==v.comments&&AP.applyRubric(!1)})).keyup((function(){nZ()}))}var S=bP.getContainer();if(S){var E=S.find(".assessments-grade-content");E.empty().append(h).append(g),a.answer&&m.ZP.markdown.render(a.answer).then((function(e){E.find(".assessments-grade-field-question").html(e)})),nZ(),a.rationale&&rZ(a.rationale,".assessments-grade-field-rationale")}}function rZ(e,t){var n=bP.getContainer();if(n){var i=n.find(t);m.ZP.markdown.render(e).then((function(e){return i.html(e)}))}}function aZ(e){bP.getContainer().remove(),document.removeEventListener("keydown",eZ,!1),l()(window).off("beforeunload",$P),WP&&y.Z.unsubscribe(WP),JP.redrawAssessments(),bP.setContainer(null),e()}const sZ={showGrading:function(e,t,n){var i=l()(zP());if(e.append(i),bP.setAssessmentId(t),ef.Z.getEduStartedAssignmentInfo()){var r=l()(YP());i.find(".content").append(r),bP.setContainer(i),WP=y.Z.subscribe("guides:grade:render_assessments",(function(e,t){iZ(t)})),AP.reloadStats().then((function(){XP(i,n)})).catch((function(e){var t=e.message;k.Z.error(t)}))}else n()}};var oZ=n(38260);var cZ=n(98053),lZ=n(9477),uZ=f().compile('<div class="assessment-output-container">\n  <div class="codio-assessment codio-assessment-{{typeClass}}">\n    <div class="content codio-button-result {{state}} {{#if isDyslexic}}dyslexic{{/if}}">\n      <div class="output"></div>\n    </div>\n  </div>\n  <button class="btn close-btn" title="close">\n    <i class="ss-icon">contract</i>\n  </button>\n</div>'),dZ=f().compile('\n<div class="assessment-output-container">\n  <div class="codio-assessment-{{typeClass}}">\n    <div class="content codio-button-result {{state}} {{#if isDyslexic}}dyslexic{{/if}}">\n      <div class="codio-button-result-icon codio-button-result-icon-{{iconState.iconName}}" title="{{iconState.title}}"></div>\n      <div class="last-run">\n        LAST RUN <span>on {{dateToLocaleStr timestamp}}</span>\n      </div>\n      {{#exists pointsInfo}}\n      <div><strong>Score :</strong> {{pointsInfo.points}} out of {{pointsInfo.maxPoints}}</div>\n      {{/exists}}\n      {{{ output }}}\n    </div>\n  </div>\n</div>\n'),pZ={},fZ="output",hZ="diff",mZ={};mZ[yP.ZP.CODE_OUTPUT_COMPARE]="compare",mZ[yP.ZP.TEST]="test",mZ[yP.ZP.SENSE_NETWORK]="sense-network";var gZ=function(e,t,n){var i=n===hZ?fZ:hZ,r=d().size(t)>1,a=cZ.Z.get(e);return a?a.expandOutputSwitchText=r&&"Show ".concat(i):a=new cZ.Z(e.find(".output"),{paths:[],isExpandedOutput:!0,expandOutputSwitchText:r&&"Show ".concat(i)}),e.data("view",n),e.find(".switch-view").html("Show ".concat(i)),a.content=t[n],a},vZ=function(e,t,n,i){y.Z.on(e,"click",".switch-view",(function(n){n.preventDefault(),bZ(e,t,i)})),y.Z.on(e,"click",".close-btn",(function(t){t.preventDefault(),y.Z.unsubscribe(pZ[e.id]),delete pZ[e.id],function(e){y.Z.off(e),e.remove()}(e),n()})),pZ[e.id]=y.Z.subscribe("guides:units:switch_output_view",(function(n,r){var a=cZ.Z.get(e);a&&r.iframeId===a.id&&bZ(e,t,i)}))},bZ=function(e,t,n){var i=e.data("view"),r=gZ(e,t,i===hZ?fZ:hZ);return(0,lZ.U)(r._container,n,!0).then((function(){return r._refresh(r)}))},yZ=n(51267),wZ=n(51751),_Z=n(34335),kZ=n(48503),PZ=[],ZZ=[],xZ=null;const CZ={init:function(e){xZ!==e&&(xZ=e,PZ=[],ZZ=[])},addNext:function(e){ZZ=[],d().last(PZ)!==e&&PZ.push(e)},getPrev:function(e){if(d().isEmpty(PZ))return-1;var t=PZ.pop();return ZZ.push(e),t},getNext:function(){return-1},hasHistoryPrev:function(){return!d().isEmpty(PZ)},hasHistoryNext:function(){return!1},clear:function(e){PZ=d().filter(PZ,(function(t){return t!==e})),ZZ=d().filter(ZZ,(function(t){return t!==e}))}};var SZ=n(8450);var EZ=n(44442).A,IZ=b.ZP.CourseManager,TZ=n(85099).tj,jZ=n(27726)._3,AZ=f().compile("{{#if showMessage}}\n  {{message}}\n{{else}}\n  Deadline {{id}} has been reached.\n  This deadline carries a penalty of {{penalty}}%. You can review your answers with no penalty.\n  However, if you decide to change any answers by pressing the Modify button beneath a question,\n  a {{penalty}}% penalty deduction will be applied to your overall results.\n  Once a modify button has been pressed once, the penalty deduction will be applied\n  and will be free to modify as many questions as you like with no additional penalty\n{{/if}}\n\n"),OZ=y.Z.create(n(10742)),DZ=y.Z.createSync(n(57066)),NZ=!1,MZ=function(e,t,n,r,a){var s=this;t=parseInt(t,10),d().isNaN(t)&&(t=0),this.tab=a.tab,this.step=t,this._filterSeq=0,this.container=e,this.reviewSkipDialog=null,this.collapsedPanelOnStart=!1,this.needCalculateTeacherInitialStep=Vn.ZP.isTeacher()&&!i.Z.currentProject.isTemporary,CZ.init("player"),this.module={},Vk.ZP.getMetadata().then((function(e){s.bindEvents();var t=i.Z.currentProject;t&&t.eduStartedAssignmentInfo&&e.hideMenu&&(m.ZP.isIframe()?_.ZP.detach():_.ZP.setItemsVisibility(!1))})),Vn.ZP.isPreview()&&Vn.ZP.setViewSwitcher(!0),OZ.playerOpen(Vn.ZP.showAsTeacher())};function FZ(e){e.container.find(".navigation-container .btn-group").removeClass("open")}var RZ=function(e,t){var n=e.container.find(".player-container"),i=e.container.find(".expand-view-container");t?(n.addClass("awayhidden"),i.removeClass("hide")):(i.addClass("hide"),n.removeClass("awayhidden"))};function LZ(e,t){var n=t.id;RZ(e,!0);var i=e.container.find(".expand-view-container");sZ.showGrading(i,n,RZ.bind(null,e,!1))}var UZ=function(e,t,n){RZ(e,!0),function(e,t,n){var i=t.outputs,r=t.view,a=t.timestamp,s=t.pointsInfo,o=t.type,c=t.state,u=t.iconState;oZ.Z.getCurrentTheme().then((function(t){var p=oZ.Z.getTheme(t),f=!d().isUndefined(p)&&p.dyslexic;e.empty();var h=l()(uZ({typeClass:mZ[o],isDyslexic:f,state:c})),m=d().mapValues(i,(function(e){return dZ({typeClass:mZ[o],timestamp:a,showTypeSwitcher:d().size(i)>1,pointsInfo:s,output:e,isDyslexic:f,state:c,switchText:r===hZ?"Show output":"Show diff",iconState:u})})),g=gZ(h,m,r);return vZ(h,m,n,t),e.append(h),(0,lZ.U)(g._container,t,!0).then((function(){return g._refresh(g)}))}))}(e.container.find(".expand-view-container"),n,RZ.bind(null,e,!1))};function BZ(e){var t=e.container.find(".guides-iframe");t.length>0&&e.item.contentType===Ne.ZP.CONTENT_TYPE_MARKDOWN&&yZ.ZP.updateIframeCss(t.parent())}function qZ(e){var t=GZ(e);t&&(t.scripts=e.metadata.scripts)}var HZ=MZ.prototype;function WZ(e,t){if(e.item&&e._model){var n=e.item;t?(function(e,t){return zZ.apply(this,arguments)}(e,n).catch((function(){})),function(e,t){var n=Kk.Z.getLayout();pP.runSection(e.container,t,Kk.Z.getPanel.bind(null,n))}(e,n)):(e.step=e.metadata.getSectionPosition(n.id),hx(e))}}function zZ(){return zZ=(0,r.Z)(o().mark((function e(t,n){var i,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=t.container.find("iframe.guides-iframe")).length>0)){e.next=4;break}return r=t.metadata.suppressPageNumbering,e.abrupt("return",yZ.ZP.renderBody({metadata:t.metadata,section:n,container:i.parent(),isScrollReset:!1,suppressPageNumbering:r,useSubmitButtons:t.metadata.useSubmitButtons,useMarkAsComplete:t.metadata.useMarkAsComplete,hideBackToDashboard:t.metadata.hideBackToDashboard}));case 4:case"end":return e.stop()}}),e)}))),zZ.apply(this,arguments)}function GZ(e){return TZ.get(e.container)}function VZ(e){return _Z.Z.setStep(e)}function KZ(e){var t;return e.children?(d().forEach(e.children,(function(e){if(t=KZ(e))return!1})),t):e}function YZ(e,t){var n;return d().forEach(e,(function(e){return"page"===e.type&&e.id===t?(n=e,!1):("chapter"!==e.type&&"section"!==e.type||!(n=e.id&&e.id===t?e.pageId?e:KZ(e):YZ(e.children,t)))&&void 0})),n}function JZ(e){var t=i.Z.currentProject,n=e.metadata;Mx(n);var r=Vn.ZP.showAsTeacher();if(r||!d().isEmpty(n.getSections().filter((function(e){return!e.teacherOnly})))){var a=e.step,s=n.getSection(a);if(!s){var o;if(t.isBookReader){var c=YZ(t.guides.bookStructure.children,t.bookAssignmentPages[0]);o=c&&n.getSectionPosition(c.pageId)||0}else{var l=n.getSection(0);o=l?n.getSectionPosition(l.id):-1}if(o>-1)return void XZ(e,o)}if(s&&s.teacherOnly&&!r){var u=yx(n,a);XZ(e,u)}else{var p=function(e,t){return!d().isEqual(e.item,t)}(e,s);if(p||!e.isRendered){if(!d().isUndefined(s)){var f={metadata:e.metadata,step:e.step,prevStep:e.prevStep};return VZ(a).then((function(){if(!e.layoutApplied){if(e.blockRender=function(e,t,n){return Kk.Z.set(e,t,n,Vn.ZP.isEditorOpen())}(f.metadata,f.step,f.prevStep),e.blockRender)return Promise.reject(new Error("Applying layout"));e.layoutApplied=!0}e.item=s,e.tab.setTitle("Guide"),e.isRendered=!0;var t=s.contentModel.then((function(t){e._model=t,e._onContentChangeDisposable&&e._onContentChangeDisposable.dispose(),e._onContentChangeDisposable=t.onDidChangeModelContent(e._itemUpdateHandler)}));QZ(e,e.container),OZ.treeAddFilter({plugin:"guides-player",filter:"hide",path:[".codio",Ne.ZP.GUIDES_FOLDER],seq:e._filterSeq++});var r=Kk.Z.getLayout(),o=Kk.Z.getLayoutInfo(n,e.prevStep,a);return yZ.ZP.renderPlayerItem(e.container,n,s,{anchor:e.anchor,layoutInfo:o}).then((function(){qZ(e),hx(e),Ax(e),function(e){var t=e.item;kZ.Z.breadcrumbsPage(t.id).then((function(t){e.container.find("header small").html(t||"")}))}(e),e.updateEditBtn(),pP.runSection(e.container,s,Kk.Z.getPanel.bind(null,r),!0)})).then((function(){if(jZ.setState(GZ(e)),!i.Z.ide.panels.isOpen(null,"guides-edit")){var t=s.paths;if(d().isEmpty(t))for(var r,o=a-1;o>-1;o--){var c=n.getSection(o);if(r=c.paths,!d().isEmpty(r)&&(!c.layout||c.layout.includes("-tree"))){t=r;break}}OZ.treeRemoveFilter({plugin:"guides-player-step",seq:e._filterSeq++}),t=d().filter(t,(function(e){return"{reset}"!==e})),t.length>0&&(OZ.treeAddFilter({plugin:"guides-player-step",filter:"hide",seq:e._filterSeq++}),OZ.treeAddFilter({plugin:"guides-player-step",filter:"show",path:t,seq:e._filterSeq++}),Kk.Z.getCurrentLayout().includes("-tree")&&OZ.treeOpenNode(void 0,{path:t}))}OZ.sectionRendered({id:s.id,anchor:e.anchor})})).catch((function(){})),t}))}var h=n.sectionsCount()?"".concat(a," step not found"):"No pages found";e.container.append(h)}}}else{!function(e,t){var n=new SZ.Z({title:t,type:Ne.yj.PAGE,isFakeSection:!0});e.item=n,e.tab.setTitle("Guide"),QZ(e,e.container),OZ.treeAddFilter({plugin:"guides-player",filter:"hide",path:[".codio",Ne.ZP.GUIDES_FOLDER],seq:e._filterSeq++}),yZ.ZP.renderPlayerItem(e.container,e.metadata,n,{suppressPageNumbering:!0}).catch((function(){}))}(e,"No pages are available for student")}}function QZ(e,t){if(0===t.children().length){var n=(p=d().filter(oZ.Z.themes(),{dyslexic:!1}),f=d().filter(oZ.Z.themes(),{dyslexic:!0}),h=d().range(12,31,2),yZ.ZP.playSettingsMenu(p,f,h)),r=e.metadata.hideSectionsToggle,a=""!==e.metadata.lexikonTopic.trim(),s=!0,o=i.Z.ide.panels,c=o.allPanels(),l=o.isOpen(null,"filetree");(d().size(c)<2||2===d().size(c)&&l&&l.active)&&(s=!1);var u=yZ.ZP.renderPlayer(n,a,s,r);e.unbindDDListeners&&e.unbindDDListeners(),e.unbindDDListeners=Qs(u.find(".guide-preferences-container")),t.append(u),function(e,t){i.Z.currentProject.examMode.forwardOnlyNavigation?e.container.find(".guides-button-prev").hide():y.Z.on(t,"click",".guides-button-prev",_x.bind(null,e));y.Z.on(t,"click",".guides-button-next",vx.bind(null,e)),y.Z.on(t,"click",".unitList-elem a",tx.bind(null,e)),y.Z.on(t,"click",".unitList-button-prev",nx.bind(null,e)),y.Z.on(t,"click",".unitList-button-next",nx.bind(null,e)),y.Z.on(t,"click",".js-guides-font-plus",Zx.bind(null,e,!0)),y.Z.on(t,"click",".js-guides-font-minus",Zx.bind(null,e,!1)),y.Z.on(t,"click",".js-change-font",Zx.bind(null,e,null)),y.Z.on(t,"click",".js-change-theme",Cx.bind(null,e)),y.Z.on(t,"click",".js-reset-style",Sx.bind(null,e)),y.Z.on(t,"click",".js-code-comments",Ex),y.Z.on(t,"click",".js-reset-section",Tx.bind(null,e)),y.Z.on(t,"click","#guides-settings-mark-complete:not(.disabled)",Ix),y.Z.on(t,"click",".lexikon-open",jx.bind(null,e)),y.Z.on(t,"click",".js-view-switch",fx.bind(null,e)),y.Z.on(t,"click",".guides-button-grading",ix.bind(null,e)),y.Z.on(t,"click",".guides-button-collapse",rx.bind(null,e)),y.Z.on(t,"click",".guides-editor-code-switch",ax.bind(null,e)),y.Z.on(t,"click",".guides-player-toggle-nav-book",dx.bind(null,e)),e._resetContent=y.Z.subscribe("guides:current_files:reset",Tx.bind(null,e)),e._switchUnitSubscription=y.Z.subscribe("guides:units:switch",px.bind(null,e,ex.bind(null,e))),e._backToDashSubscription=y.Z.subscribe("guides:units:back_to_dash",px.bind(null,e,ef.Z.goToDashboard.bind(null,e))),e._gotoAssessmentHandlerId=y.Z.subscribe("guides:assessment:goto",$Z.bind(null,e)),e._goToSectionHandlerId=y.Z.subscribe("guides:section:goto_title",px.bind(null,e,Px.bind(null,e))),e._goToSectionByIdHandlerId=y.Z.subscribe("guides:section:goto_id",(function(t,n){Px(e,n)})),e._goToNextSectionHandlerId=y.Z.subscribe("guides:section:goto_next",px.bind(null,e,bx.bind(null,e))),e._goToPreviousSectionHandlerId=y.Z.subscribe("guides:section:goto_prev",px.bind(null,e,kx.bind(null,e)));var n=i.Z.currentProject;(n.isUserAssignee||n.isOpenedByTeacher)&&(e._eduStartedAssignmentLoadedHandler=y.Z.subscribe("education:edu_started_assignment_info_loaded",Ox));e.showEditButton=!n.eduStartedAssignmentInfo&&n.isUserOwner,e._closeNavigationHandler=y.Z.subscribe("guides:book:nav_close",lx.bind(null,e)),e._openNavigationHandler=y.Z.subscribe("guides:book:nav_open",ux.bind(null,e)),e._mediaInitializedHandler=y.Z.subscribe("guides:media:initialized",e.updateEditBtn.bind(e)),e._mediaClosedHandler=y.Z.subscribe("guides:media:closed",e.updateEditBtn.bind(e)),e._mediaStoppedHandler=y.Z.subscribe("guides:media:stopped",e.updateEditBtn.bind(e))}(e,u),Ax(e),e.metadata.collapsedOnStart&&s&&!e.collapsedPanelOnStart&&(e.collapsedPanelOnStart=!0,OZ.collapsePanel({id:e.tab.panel.id}))}var p,f,h}function XZ(e,t,n,i){return n||e.step!==t||e.anchor!==i?(n||(e.prevStep=e.step),e.layoutApplied=!1,e.step=t,e.anchor=i,e.isRendered=!1,Vk.ZP.getMetadata().then((function(t){return e.metadata=t,JZ(e)})).then((function(){e.tab&&(e.tab.filename=""+e.step),EZ.execute("layout","save"),hx(e),e.updateEditBtn()})).catch((function(){}))):Promise.resolve()}function $Z(e,t,n){CZ.addNext(e.item.id),XZ(e,n.usageInfo.section.index)}function ex(e,t){var n=i.Z.currentProject.course;if(n){var r=t.unitId,a=d().find(e.module.units,{id:r}),s=n&&n.id;if(i.Z.currentProject.isLtiEnabled){var o="";return d().isEmpty(n.details.lti.url)||(o='<a href="'+n.details.lti.url+'" target="_blank">LMS System</a>'),void R.Z.showPrompt({buttons:R.Z.IDYES,title:"LTI Integration enabled",content:"LTI Integration enabled. Please open assignment through your LMS</br>"+o})}R.Z.showConfirm({title:"Are you sure you want to leave this assignment?",description:'You will be switching to the assignment "'+a.name+'".',onClose:function(e){if(e){if(a.forkPath)return i.Z.router.redirectTo("/"+a.forkPath);l()("div.ac").showFProgress("Processing. Please wait..."),IZ.createProjectFromUnit({id:a.id},s).then((function(e){var t="/"+i.Z.currentUser.get("details").get("lowerName")+"/"+e.pathName;i.Z.router.redirectTo(t)})).catch((function(e){var t=e.message;l()("div.ac").completeFProgress(),t&&k.Z.error("Error starting the assignment:"+m.ZP.safeHtml(t))}))}}})}}function tx(e,t){t.preventDefault();var n=l()(t.target),i=n.data("id");n.closest("li").hasClass("active")||ex(e,{unitId:i})}function nx(e,t){t.preventDefault(),ex(e,{unitId:l()(t.target).closest("button").data("id")})}function ix(e,t){t.preventDefault(),i.Z.ide.open("grading","")}function rx(e,t){t.preventDefault(),OZ.collapsePanel({id:e.tab.panel.id})}function ax(e,t){t.preventDefault(),OZ.backToEdit()}function sx(e,t){var n=e.find(".guides-editor-code-switch");t?n.removeClass("hide"):n.addClass("hide")}function ox(e,t){e.showEditButton=t,sx(e.container,t)}function cx(e,t){var n=e.container.find(".guides-player-toggle-nav-book"),i=n.is(":focus");n.attr("aria-expanded",t),i&&t?l()("#codio-book-navigation").focus():i||t||e.container.find(".player-container").focus()}function lx(e){cx(e,!1)}function ux(e){cx(e,!0)}function dx(){var e=l()("#codio-book-navigation");!e.length||e.hasClass("hide")?OZ.openBookNavigation():OZ.closeBookNavigation()}function px(e,t,n,i){var r=GZ(e);r&&i.iframeId===r.id&&t(i)}function fx(e){var t=e.container.find("#view-as-teacher").prop("checked");Vn.ZP.getViewSwitcher()!==t&&(Vn.ZP.setViewSwitcher(t),XZ(e,e.step,!0),OZ.changeView(t))}function hx(e){var t=e.container,n=e.metadata,i=e.step,r=t.find(".navigator-container"),a=t.find(".navigator.guides-button-prev"),s=t.find(".navigator.guides-button-next"),o=-1!==wx(n,i)||CZ.hasHistoryPrev(),c=-1!==yx(n,i)||CZ.hasHistoryNext();function l(e,t){t?e.removeClass(Ne.xu).removeAttr(Ne.xu):e.addClass(Ne.xu).attr(Ne.xu,!0)}l(a,o),l(s,c),c||o?r.show():r.hide()}function mx(e){var t=e.container,n=t.find(".navigator.guides-button-prev"),i=t.find(".navigator.guides-button-next");!n.is("[".concat(Ne.xu,"]"))&&n.addClass(Ne.xu),!i.is("[".concat(Ne.xu,"]"))&&n.addClass(Ne.xu)}function gx(e){var t=e.container,n=t.find(".navigator.guides-button-prev"),i=t.find(".navigator.guides-button-next");!n.is("[".concat(Ne.xu,"]"))&&n.removeClass(Ne.xu),!i.is("[".concat(Ne.xu,"]"))&&i.removeClass(Ne.xu)}function vx(e,t){t.preventDefault(),l()(t.target).closest("button").hasClass(Ne.xu)||(mx(e),bx(e))}function bx(e){function t(){if(!e.nextStepInProgress){var t=CZ.getNext(e.item.id),n=e.metadata.getSectionPosition(t),i=yx(e.metadata,e.step);-1===t?CZ.addNext(e.item.id):i=n,e.nextStepInProgress=XZ(e,i).finally((function(){e.nextStepInProgress=null}))}}if(i.Z.currentProject.examMode.forwardOnlyNavigation){var n=e.item;jZ.hasDraftedNotAnsweredAssessments(n.id).then((function(n){n?e.reviewSkipDialog||(e.reviewSkipDialog=R.Z.showConfirm({title:"Warning",buttons:[{title:"Review Answer",type:1,onClick:function(){return e.reviewSkipDialog.close(R.Z.IDNO)}},{title:"Skip Question",onClick:function(){return e.reviewSkipDialog.close(R.Z.IDYES)}}],description:["You will not be able to return to this page but there are assessments on this page that have not been answered/submitted. ",'If you wish to review and answer/submit the assessments click "Review Answer" but to proceed to the next page without answering/submitting click "Skip Question"'].join("<br/><br/>"),doNotCloseOpened:!0,width:550,onHide:function(){e.reviewSkipDialog=null,gx(e)},onClose:function(n){e.reviewSkipDialog=null,n?t():gx(e)}})):t()})).catch((function(e){var t=e.message;return k.Z.error(t)}))}else t()}function yx(e,t){t++;var n=e.getSections();if(Vn.ZP.showAsTeacher())return t<n.length?t:-1;for(;t<n.length;){if(!n[t].teacherOnly)return t;t++}return-1}function wx(e,t){if(t--,Vn.ZP.showAsTeacher())return t;for(var n=e.getSections();t>-1;){if(!n[t].teacherOnly)return t;t--}return-1}function _x(e,t){t.preventDefault(),l()(t.target).closest("button").hasClass(Ne.xu)||(mx(e),kx(e))}function kx(e){if(!i.Z.currentProject.examMode.forwardOnlyNavigation){var t=CZ.getPrev(e.item.id),n=e.metadata.getSectionPosition(t);XZ(e,-1!==n?n:wx(e.metadata,e.step))}}function Px(e,t){var n=t.sectionTitle,i=t.sectionId,r=t.optionalAnchor;if(n||i){var a,s=Vn.ZP.showAsTeacher();if(n){var o=e.metadata.getSections();a=d().findIndex(o,(function(e){return(!e.teacherOnly||s)&&e.title.toLowerCase()===n.toLowerCase()}))}else{var c=e.metadata.getSectionById(i);a=s||!c.teacherOnly?e.metadata.getSectionPosition(i):-1}var l=e.metadata.getSectionPosition(e.item.id);-1!==a&&(a!==e.step&&-1!==l&&CZ.addNext(e.item.id),XZ(e,a,void 0,r))}}function Zx(e,t,n){var i=GZ(e);if(!d().isUndefined(i)){var r=i.fontSize;if(d().isNull(t)){var a=l()(n.target).closest("a");r=parseInt(a.attr("data-size"),10)}else t?r+=2:r-=2;i.fontSize=r,Ax(e),xx(r)}return n.preventDefault(),!1}function xx(e){OZ[e?"projectSettingsUpdate":"projectSettingsRemove"]({arg:[{plugin:"editor",key:"font_size",value:e},{plugin:"terminal",key:"font_size",value:e}]})}function Cx(e,t){var n=l()(t.target).closest("a");if(!n.hasClass("active")){var i=n.attr("data-theme");oZ.Z.applyTheme(i),Ax(e)}}function Sx(e){var t=GZ(e);d().isUndefined(t)||(t.fontSize=null),oZ.Z.applyTheme(),Ax(e),xx()}HZ.updateContainerAndOptions=function(e,t){this.blockRender=null,this.tab=t.tab,this.container=e,this.bindEvents()},HZ.bindEvents=function(){var e=this;this._switchToEdit=[y.Z.subscribe("command:guides:switch_to_edit:show",ox.bind(null,e,!0)),y.Z.subscribe("command:guides:switch_to_edit:hide",ox.bind(null,e,!1)),y.Z.subscribe("panel:expand:#id",ox.bind(null,e,!0))];var t=d().debounce(BZ.bind(null,this),400),n=d().debounce(qZ.bind(null,this),400),i=d().debounce(WZ.bind(null,this,!0),400),r=WZ.bind(null,this,!1);this._sectionsUpdateHandler=r,this._itemUpdateHandler=i,this._styleCssChangesHandlerId=Vn.ZP.onFileChange(Ne.ZP.CSS_FILE,t),this._metadataChanged=[y.Z.subscribe("guides:theme_changed",t),y.Z.subscribe("settings:changed",t),y.Z.subscribe("guides:scripts_changed",(function(){n(),e._itemUpdateHandler()}))],this._sectionsUpdateHandlerId=y.Z.subscribe("guides:updated",this._sectionsUpdateHandler),this._onIframeClick=y.Z.subscribe("guides:iframe:click",FZ.bind(null,this)),this._onAssessmentGrade=y.Z.subscribe("guides:assessment:grade:#id",LZ.bind(null,this)),this._onExpandOutput=y.Z.subscribe("guides:assessment:expandOutput",UZ.bind(null,this)),y.Z.subscribe("project:penaltyUpdated",(function(){NZ=!1,Vk.ZP.getMetadata().then((function(e){Mx(e)}))}))};var Ex=function(){i.Z.ide.open("code-comments","")};function Ix(){var e=ef.Z.getEduStartedAssignmentInfo();!!e.started.completed&&e.started.completed.completed?OZ.markAsUncompleted():OZ.markAsCompleted()}function Tx(){if(Vn.ZP.isUnit()){var e=function(){var e=i.Z.ide.panels.getOpenedTabs("tree");return d().uniq(d().compact(d().map(e,"filename")))}();if(0!==e.length)new Promise((function(t,n){R.Z.showConfirm({title:"Restore current files content?",description:["These files content will be restored to the original content, all your"," changes will be lost: <br>",e.join("<br>")].join(""),onHide:function(){n(new Error("Restore current files content not confirmed"))},onClose:function(e){e?t():n(new Error("Restore current files content not confirmed"))}})})).then((function(){return M.Z.saveAllAndWait()})).then((function(){return l()("body").block(),DZ.beforeFileRestore(e),_Z.Z.resetState(e)})).then((function(){k.Z.info("Files have been reset.")})).catch((function(e){var t=e.message;t&&k.Z.error("Reset error:"+m.ZP.safeHtml(t))})).finally((function(){DZ.afterFileRestore(e),l()("body").unblock()}));else k.Z.info("Nothing is open for a restore.")}else k.Z.info("Not possible. The project is not a course unit.")}function jx(e){OZ.openLexikon({topic:e.metadata.lexikonTopic})}function Ax(e){Ox();var t=GZ(e);d().isUndefined(t)||d().defer((function(){oZ.Z.getCurrentTheme().then((function(t){e.container.find(".js-change-theme").removeClass("active"),e.container.find('.js-change-theme[data-theme="'+t+'"]').addClass("active")}));var n=t.fontSize||wZ.ZP.get("font_size");e.container.find(".js-change-font").removeClass("active"),e.container.find('.js-change-font[data-size="'+n+'"]').addClass("active")}))}function Ox(){if(i.Z.currentProject.eduStartedAssignmentInfo){var e=ef.Z.getCompleteBtnInfo();if(e){var t=l()("#guides-settings-mark-complete");if(e.show){e.disabled&&t.addClass(Ne.xu);var n=e.completed?"Mark as Uncompleted":"Mark as Completed",r=l()("<a>",{href:"javascript:void(0)",text:n});t.empty().append(r),t.removeClass("hide")}else t.addClass("hide")}}}function Dx(e){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.Z.currentProject,r=null,d().each(n.bookAssignmentPages,(function(e){return!(r=kZ.Z.searchItem(e,n.guides.bookStructure))})),!r){e.next=5;break}return e.abrupt("return",VZ(t.getSectionPosition(r.pageId)));case 5:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Mx(e){if(!NZ){var t=i.Z.currentProject.eduStartedAssignmentInfo,n=t&&t.started.completed;if(!(n&&n.completed)){var r=i.Z.currentProject.penalty,a=i.Z.currentProject.penaltyApprovedDate,s=i.Z.currentProject.penaltyExtendMin;if(!e.useMarkAsComplete&&r&&(!a||a&&a<new Date(r.date.getTime()+6e4*s))){NZ=!0;var o=AZ({id:r.id,penalty:r.percent,message:r.message,showMessage:!d().isEmpty(r.message)});R.Z.showConfirm({title:"Warning",description:o,width:900,buttons:R.Z.MB_OK})}}}}function Fx(){if(e=i.Z.currentProject,t=e.eduStartedAssignmentInfo,n=e.exists(Ne.ZP.GUIDES_ROOT_METADATA_FILE),r=e.guides&&!d().isEmpty(e.guides.metadata),!e||!(!t&&n||r))return Promise.reject({close:!0});var e,t,n,r;if(!this.blockRender){var s=jZ.fetchGuideState(),o=this;return Promise.all([this.getInitialStep(),Vk.ZP.getMetadata()]).then((function(e){var t=(0,a.Z)(e,2),n=t[0],i=t[1];return d().isUndefined(n)||(o.step=n),jZ.setState(GZ(o)),o.metadata=i,JZ(o)})).then((function(){return s.then(OZ.onActivatePlayer)}))}}function Rx(e){e.isRendered=!1,yZ.ZP.cleanup(),pP.pause(),e._onContentChangeDisposable&&e._onContentChangeDisposable.dispose(),e._onContentChangeDisposable=null}HZ.activate=function(){var e=this;if(!this.activating)return this.activating=!0,function(e){return Promise.all([Vk.ZP.getMetadata(),e.getInitialStep()]).then((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1],s=i.Z.currentProject;if(s.isBookReader&&d().isUndefined(r)){r=r||0;var o=n.getSection(r);if(!o)return Dx(n);var c=kZ.Z.searchItem(o.id,s.guides.bookStructure,!0);if(!(d().isEmpty(s.bookAssignmentPages)||c&&d().includes(s.bookAssignmentPages,c.id)))return Dx(n)}}))}(this).then(Fx.bind(this)).finally((function(){e.activating=!1}))},HZ.updateEditBtn=function(){sx(this.container,this.showEditButton)},HZ.afterActivate=function(){this.updateEditBtn()},HZ.getInitialStep=function(){var e,t=this;return this.needCalculateTeacherInitialStep?(e=jZ.fetchGuideState(),t.needCalculateTeacherInitialStep=!1,e.then((function(e){return t=e,_Z.Z.getTeacherInitialStep(t);var t}))):_Z.Z.getStep()},HZ.deactivate=function(){Rx(this)},HZ.beforeClose=function(){if(!function(e){return!Vn.ZP.isUnit()||e&&e.allowGuideClose}(this.metadata)){var e=new Error("Close guides is not allowed");return e.ignore=!0,Promise.reject(e)}},HZ.unbindEvents=function(){y.Z.unsubscribe(this._styleCssChangesHandlerId),y.Z.unsubscribe(this._sectionsUpdateHandlerId),y.Z.unsubscribe(this._onIframeClick),y.Z.unsubscribe(this._metadataChanged),y.Z.unsubscribe(this._switchToEdit),y.Z.unsubscribe(this._switchUnitSubscription),y.Z.unsubscribe(this._resetContent),y.Z.unsubscribe(this._backToDashSubscription),y.Z.unsubscribe(this._gotoAssessmentHandlerId),y.Z.unsubscribe(this._goToSectionHandlerId),y.Z.unsubscribe(this._goToSectionByIdHandlerId),y.Z.unsubscribe(this._goToNextSectionHandlerId),y.Z.unsubscribe(this._goToPreviousSectionHandlerId),y.Z.unsubscribe(this._eduStartedAssignmentLoadedHandler),y.Z.unsubscribe(this._closeNavigationHandler),y.Z.unsubscribe(this._openNavigationHandler),y.Z.unsubscribe(this._onAssessmentGrade),y.Z.unsubscribe(this._onExpandOutput),y.Z.unsubscribe(this._mediaInitializedHandler),y.Z.unsubscribe(this._mediaClosedHandler),y.Z.unsubscribe(this._mediaStoppedHandler)},HZ.close=function(){this.activating=!1,Vn.ZP.isUnit()||(_.ZP.setItemsVisibility(!0),OZ.treeRemoveFilter({plugin:"guides-player",seq:this._filterSeq++}),OZ.treeRemoveFilter({plugin:"guides-player-step",seq:this._filterSeq++})),this.item&&_Z.Z.setCurrentEditorSectionId(this.item.id),OZ.playerClose(),Rx(this),pP.cleanup(),this.unbindEvents(),this.unbindDDListeners&&this.unbindDDListeners(),Kk.Z.close();var e,t=i.Z.ide,n=t.isClosed,r=t.isClosing;this.blockRender||r||n||(OZ.renderedPlayerClose(),e=i.Z.ide.panels.isOpen(void 0,"filetree"),d().isUndefined(e)&&i.Z.ide.panels.addTreePanel(i.Z.ide.panels.child.children[0]))},HZ.focus=function(){this.container.find("iframe.guides-iframe").focus()},y.Z.subscribe("guides:removed",(function(){var e=i.Z.ide.panels.getAllOpened(void 0,"guides");d().each(e,(function(e){e&&e.panel.closeTab(e,!0).catch(m.ZP.error.checkErrorForIgnore)}))}));const Lx=MZ;n(84426);function Ux(){var e=l()(".btn-group.open"),t=l()(".guides-edit");t.length||(t=l()(".guides")),function(e,t){var n=t.find("> .dropdown-menu");n.width(n.width())}(0,e),function(e,t){var n=t.find(".dropdown-scrollable");if(0!==n.length){var i=t.find(".dropdown-menu").css("margin-bottom").replace("px",""),r=e.outerHeight()-e.find("header").outerHeight()-i;n.css("max-height",r)}}(t,e)}function Bx(e,t){var n=t.offset(),i=parseInt(t.data("offset-x"),10)||10,r=parseInt(t.data("offset-y"),10)||30,a=n.top+r;if(e.css("top",a),e.hasClass("pull-right")){var s=l()("body").outerWidth()-n.left+i;e.css("right",s)}else{var o=n.left+i;e.css("left",o)}}function qx(e,t){var n=l()(t.target);n.attr("aria-expanded",!0);var i=n.closest(".btn-group");if(Ux(),i.hasClass("dropdown-append-to-body")){var r=l()("body"),a=r.find(".dropdown-to-body");a.length||(a=l()("<div />"),r.append(a)),a.removeClass(),a.addClass("dropdown-to-body guides-edit guides-play"),a.addClass(i.attr("class").replace("dropdown-append-to-body",""));var s=i.find("> .dropdown-menu");Bx(s,i),a.append(s),a.data("parent",i)}}function Hx(e){var t=l()(e.target);t.attr("aria-expanded",!1);var n=t.closest(".btn-group");if(n.hasClass("dropdown-append-to-body")){var i=l()("body").children(".dropdown-to-body");n.append(i.children()),i.remove()}}function Wx(){l()("body").find(".btn-group.open").each((function(e,t){(t=l()(t)).hasClass("dropdown-append-to-body")||Ux(),t.hasClass("dropdown-to-body")&&Bx(t.children().first(),t.data("parent"))}))}const zx=function(e){y.Z.on(e,"dropdown.open",".dropdown-toggle",qx.bind(null,e)),y.Z.on(e,"dropdown.close",".dropdown-toggle",Hx),y.Z.on(window,"resize.panels",Wx)};var Gx=n(36008),Vx=n(72523).Yn,Kx=n(72523).Cs,Yx=n(72523).Tb,Jx=null;function Qx(){var e=i.Z.currentProject.files({isCaseSensitive:!1,filesSeparate:!0});return m.ZP.promise.defer().then((function(){var t=[],n=e.length;return d().forEach(e,(function(e){var i=e.path.toLowerCase(),r=m.ZP.path.getFileExtension(i);d().startsWith(i,Vx+"/")&&d().includes(Kx,r)&&(e.lowerPath=i,e.lowerName=e.name.toLowerCase(),e.selfScore=n-1,t.push(e))})),t}))}function Xx(e){e.addClass("media-source-dlg"),e.append(yZ.ZP.renderMediaUploadContainer());var t=e.find(".media-source-upload-input");y.Z.on(t,"change",$x),y.Z.on(e,"click",".media-source-btn",(function(e){e.preventDefault(),t.click()}))}function $x(e){if(e.preventDefault(),!d().isEmpty(this.files)){var t=this.files[0];if(!function(e){var t=m.ZP.path.getFileExtension(e.name);return d().includes(Kx,t)?!((e.size||e.fileSize)>Yx&&(k.Z.error("You exceed maximum file size."),1)):(k.Z.error("File should be .mp3 or .ogg"),!1)}(t))return;!function(){var e=Gx.Z.getDialog();if(e){Gx.Z.disable(),e.content().find(".media-source-btn").text("Uploading..."),e.preventClosing(!0)}}(),function(e){var t=Ut.validateItem(e.name,Vx);if(!t){var n=m.ZP.path.makePath(Vx,e.name);return i.Z.currentProject.uploadFile(n,e).then((function(){return n}))}return Promise.reject(new Error(t))}(t).then((function(e){Jx(e),Gx.Z.close()})).catch((function(e){var t=e.message;!function(){var e=Gx.Z.getDialog();if(e){Gx.Z.enable(),e.content().find(".media-source-btn").text("Upload File"),e.preventClosing(!1)}}(),k.Z.error(t)}))}}y.Z.subscribe("project:close",(function(){Gx.Z.close()}));const eC={open:function(e){var t={title:"Select or Upload File",searchPlaceholder:"enter first few letters of a file to select...",onSelect:Jx=e,getData:Qx,beforeRender:Xx};Gx.Z.open(t)}};var tC=n(72523);n(49085);var nC=n(72523).aI,iC=n(72523).Yn,rC=null,aC=null,sC=!1;function oC(e){e.preventDefault();var t=l()(this);eC.open((function(e){var n=e.substr(iC.length+1);t.closest(".media-source-container").find(".media-source-txt-input").val(n),bC(n),rC.play()}))}function cC(e){e.preventDefault();var t=l()(this).closest("form").trigger("change");t.trigger("change"),lC(t.find(".media-actions-container"),{time:rC?Math.round(rC.currentTime()):0})}function lC(e,t){var n=yZ.ZP.renderMediaActionItem(t),i=t.type||nC.FILE_OPEN;n.removeClass().addClass("media-action-item media-action-item-"+i);var r=n.find(".media-action-item-type");y.Z.on(r,"change",(function(e){e.preventDefault();var t=l()(this).val();n.removeClass().addClass("media-action-item media-action-item-"+t);var i=yZ.ZP.renderMediaActionTypeFields(t);n.find(".media-item-action-type-fields").empty().append(i)})),y.Z.on(n.find(".media-action-item-time"),"change",uC),e.append(n),rC&&pC()}function uC(){var e=l()(this).val();d().includes(e,"_")||pC()}function dC(){var e=wC(aC.find(".media-actions-container"),!0);return d().compact(e)}function pC(){!function(e){rC.markers.reset(e)}(dC())}function fC(e){e.preventDefault(),l()(this).closest("form").trigger("change"),l()(this).closest(".media-action-item").remove(),pC()}function hC(e,t){m.ZP.addErrorToInput(e,{title:t,noIcon:!0})}function mC(e,t){hC(e,d().capitalize(t)+" is required")}function gC(e){var t=e.find("[name=time]").val();if(!d().includes(t,"_"))return{time:t=cm().duration("00:"+t).asSeconds()}}function vC(e){var t={action:e.find("[name=action]"),tabType:e.find("[name=tab_type]"),time:e.find("[name=time]"),type:e.find(".media-action-item-type"),content:e.find("[name=content]"),panel:e.find("[name=panel]"),reference:e.find("[name=reference]"),lines:e.find("[name=lines]")},n=t.panel.val(),i={action:t.action.val(),tabType:t.tabType.val(),time:t.time.val(),type:t.type.val(),content:t.content.val()||"",panel:n?parseInt(n,10):void 0,reference:t.reference.val(),lines:t.lines.val()};if(d().includes(i.time,"_"))hC(t.time,"Wrong time format");else if(i.time=cm().duration("00:"+i.time).asSeconds(),function(e,t){var n=!d().isUndefined(t.panel)&&isNaN(t.panel),i=[nC.PAUSE,nC.CLOSE_ALL,nC.TERMINAL_CLOSE];if(!d().includes(i,t.type)&&n)return hC(e.panel,"Panel should be a number or empty"),!1;switch(t.type){case nC.FILE_OPEN:case nC.FILE_CLOSE:if(!t.content)return mC(e.content,"filename"),!1;break;case nC.RUN_COMMAND:if(!t.content)return mC(e.content,"command"),!1;break;case nC.HIGHLIGHT:if(!t.content)return mC(e.content,"filename"),!1;if(!t.reference&&!t.lines)return hC(e.reference,"Lines or Reference is required"),!1}return!0}(t,i))return d().omitBy(i,d().isUndefined)}function bC(e,t){aC.find(".media-player").removeClass("media-disabled"),i.Z.currentProject.eduStartedAssignmentInfo||(t=t||rC).src(Xk.getMediaPlayerSource(e))}function yC(){rC&&(rC.markers.destroy(),rC.dispose(),rC=null),aC=null}function wC(e,t){var n=[],i=t?gC:vC;return e.find(".media-action-item:not(.media-action-item-header)").each((function(){n.push(i(l()(this)))})),n}y.Z.subscribe("guides:settings:close",(function(){yC()}));const _C={renderMediaForm:function(e,t){var n=t?t.type:tC.vK.AUDIO;yC(),aC=e.find("#media");var i=yZ.ZP.renderMediaForm(t,n),r=t?t.actions:[],a=i.find(".media-actions-container");d().forEach(r,(function(e){lC(a,e)})),aC.find(".media-form").empty().append(i).show(),m.ZP.promise.defer().then((function(){!function(e){rC&&rC.dispose(),rC=Gk()("editor_media_player",{},(function(){aC.find(".media-player").removeClass("invisible"),e?bC(e.source,this):(aC.find(".media-player").addClass("media-disabled"),sC=!0),this.volume(.5),this.markers({markerTip:{display:!1},markers:dC()})}))}(t)}));var s=aC.find("form");return function(e){y.Z.on(e,"click",".add-action-btn",cC),y.Z.on(e,"click",".media-action-item-remove-btn",fC),y.Z.on(e,"click","input.media-source-input",oC),y.Z.on(e,"click",".media-source-txt-input, .change-source-btn",(function(t){t.preventDefault(),e.find(".media-source-input").click()})),y.Z.on(e,"click.disabled",".media-player-disabled",(function(e){e.preventDefault(),e.stopImmediatePropagation()}))}(s),function(e){var t="shown.bs.tab.guides.media",n=e.find('a[data-toggle="tab"]');y.Z.off(n,t),y.Z.on(n,t,(function(){"#media"===l()(this).attr("href")&&rC&&!sC&&(rC.load(),y.Z.off(n,t))}))}(e),s},collect:function(e){var t={type:e.find("#type"),name:e.find("#name"),source:e.find("#sourceTxt"),disabled:e.find("#disabled")},n={type:t.type.val(),name:t.name.val(),source:t.source.val(),disabled:t.disabled.is(":checked")};if(n.name)if(n.source){var i=wC(e);if(!d().some(i,d().isEmpty))return n.actions=i,n}else mC(t.source,"source");else mC(t.name,"name")}};var kC=n(96513),PC=n(27726).R0,ZC=n(44442).A,xC=Vk.ZP.Action,CC=null,SC=null,EC=null,IC=null,TC={"3-cell-left":"3-cell-guides-left"},jC=function(){},AC=function(){};function OC(e,t){switch(t=d().trim(t),e){case kC.Z.TYPE.FILE:return t;case kC.Z.TYPE.PREVIEW:return"#preview: "+t;case kC.Z.TYPE.TERMINAL:return"#terminal: "+t;case kC.Z.TYPE.TUTOR:return"#tutor: "+t;case"highlight":return t;case kC.Z.TYPE.VM:return"#vm: "+t;case kC.Z.TYPE.VM_SSH:return"#vmssh: "+t;default:throw new Error("Unknown type: "+e)}}function DC(e){var t=(e=l()(e)).find(".args > input").val(),n=e.find("input.file-type").val(),i={action:"open",path:OC(n,t),panel:parseInt(e.find(".panel > input").val(),10)};return"highlight"===n&&(i.ref=e.find('input[name="ref"]').val(),i.lineCount=parseInt(e.find('input[name="line-count"]').val(),10),i.panel=parseInt(e.find('input[name="panel"]').val(),10)),isNaN(i.panel)&&delete i.panel,i}function NC(e){var t;if(!(e=l()(e)).hasClass("media-form")||(t=_C.collect(e))){var n=function(e,t){var n=e.find(t);return n.length>0?n.is(":checked"):void 0},i=e.find("#layout").val(),r=n(e,"#showFileTree"),a=r?"-tree":"",s=n(e,"#guidesOnLeft")?"-guides-left":"",o=d().isUndefined(i)?void 0:"".concat(i).concat(a).concat(s),c=d().findKey(TC,(function(e){return e===o}))||o,u=e.find("#theme").val(),p=e.find("#scripts").val(),f=e.find('input[name="lexikon_topic"]').val(),h=e.find("#content-type").val(),m=e.find("#learningObjectives").val(),g=n(e,"#suppress-page-numbering"),v=n(e,"#hide-menu"),b=n(e,"#allow-guide-close"),y=n(e,"#close-all"),w=n(e,"#close-terminal-session"),_=n(e,"#teacher-only"),k=n(e,"#use-submit-buttons"),P=n(e,"#use-mark-as-complete"),Z=n(e,"#collapsed-on-start"),x=n(e,"#hide-sections-toggle"),C=n(e,"#hide-back-to-dashboard"),S=n(e,"#protect-layout"),E=e.find("ul.files"),I=E.length>0?d().map(E.children(),DC):void 0,T=e.find("input[name=step]").val();return{layout:c,actions:I,paths:r?T:"",theme:u,scripts:p,isCloseAll:y,closeTerminalSession:w,lexikonTopic:f,teacherOnly:_,media:t,contentType:h,suppressPageNumbering:g,learningObjectives:m,hideMenu:v,allowGuideClose:b,useSubmitButtons:k,useMarkAsComplete:P,collapsedOnStart:Z,hideSectionsToggle:x,hideBackToDashboard:C,protectLayout:S}}}function MC(e){return FC.apply(this,arguments)}function FC(){return(FC=(0,r.Z)(o().mark((function e(t){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=l()(this),i=NC(n)){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,jC(i);case 8:KC(),AC(),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(5);case 14:case"end":return e.stop()}}),e,this,[[5,12]])})))).apply(this,arguments)}function RC(e){CC=null,e.preventDefault(),AC()}function LC(e,t){var n=e.find("ul.files"),i=l()(yZ.ZP.fileInput(n.children("li").length)).hide();i.find(".args input").val(t||""),e.trigger("change"),n.append(i),i.velocity("fadeIn",{display:"flex",complete:function(){n.scrollTop(n[0].scrollHeight+120)}})}function UC(e){e.preventDefault();var t=l()(this).parent(),n=t.closest("form");t.velocity("fadeOut",{complete:function(){t.remove(),n.trigger("change")}})}function BC(){var e=l()(this);e.closest("form").trigger("change");var t=e.closest(".file-elem"),n=e.attr("data-type"),i=t.find(".input-container");i.empty(),i.append(yZ.ZP.inputArgs(n)),e.closest(".input-switch-type").find("input").val(n),t.find(".current-file-type").html(e.find("i").html())}function qC(e){var t=e.closest("#".concat(YC.CONFIGURE_LAYOUT));y.Z.on(t,"click",".add-btn",function(e){return e=l()(e),function(t){t.preventDefault(),LC(e)}}(e)),y.Z.on(e,"click",".remove-btn",UC),y.Z.on(e,"click",".switch-file-type .dropdown-menu a",BC),y.Z.on(e,"change","#layout",(function(){var t=e.find(".js-show-file-tree"),n=e.find(".js-show-folders"),i=e.find(".js-guides-on-left");this.value?(t.removeClass("hide"),i.removeClass("hide"),e.find("#showFileTree").is(":checked")?n.removeClass("hide"):n.addClass("hide")):(t.addClass("hide"),i.addClass("hide"),n.removeClass("hide"))})),HC(e,"#close-all",".js-close-terminal-session-container"),HC(e,"#showFileTree",".js-show-folders")}function HC(e,t,n){y.Z.on(e,"change.guides-settings",t,(function(){var t=e.find(n);l()(this).is(":checked")?t.removeClass("hide"):t.addClass("hide")}))}function WC(e){var t=SC.find("form");y.Z.off(t),t.remove();var n,i,r,a,s=(n=IC.layout||"",i=TC[n]||n,r=i.replace(/(-tree)?(-guides-left)?/g,""),{files:IC.actions,layout:r,showFileTree:d().includes(i,"-tree"),guidesOnLeft:d().includes(i,"-guides-left"),paths:IC.paths.join("; "),theme:EC.theme,scripts:EC.scripts.join("\n"),lexikonTopic:EC.lexikonTopic,suppressPageNumbering:EC.suppressPageNumbering,hideMenu:EC.hideMenu,allowGuideClose:EC.allowGuideClose,learningObjectives:IC.learningObjectives,teacherOnly:IC.teacherOnly,media:IC.media,contentType:IC.contentType,closeTerminalSession:IC.closeTerminalSession,useSubmitButtons:EC.useSubmitButtons,useMarkAsComplete:EC.useMarkAsComplete,collapsedOnStart:EC.collapsedOnStart,hideSectionsToggle:EC.hideSectionsToggle,hideBackToDashboard:EC.hideBackToDashboard,protectLayout:EC.protectLayout}),o=SC.find("#".concat(e));switch(e){case YC.ASSESSMENTS:o.find(".assessment-editor").length&&(o.find(".assessment-editor").remove(),PC.renderAssessmentsList());break;case YC.MEDIA:a=_C.renderMediaForm(SC,s.media);break;default:switch(a=yZ.ZP.settingsForm(e,s),o.append(a),e){case YC.CONFIGURE_LAYOUT:qC(a);break;case YC.GLOBAL:!function(e){e.find("#html-header").click((function(){VC(Ne.ZP.CONTENT_HEADER_FILE)})),e.find("#html-footer").click((function(){VC(Ne.ZP.CONTENT_FOOTER_FILE)}))}(a)}}return function(e,t){y.Z.on(t,"submit",MC),y.Z.on(t,"change",(function(){l()(this).data("changed",!0)})),y.Z.on(e,"click","#cancel-btn",RC)}(o,a),a}function zC(e){var t=CC===YC.ASSESSMENTS,n=t?".assessment-editor":"form",i=e.find("#".concat(CC)).find(n);return i.data("changed")?new Promise((function(e){var t=new R.Z({title:"Warning",content:l()("<h4>You have unsaved changes. Do you wish to save these?</h4>"),icon:"alert",width:500,buttons:[{title:"Yes",type:1,onClick:function(){return t.close(R.Z.IDOK)}},{title:"No",onClick:function(){return t.close(R.Z.IDCANCEL)}}],onClose:function(t){setTimeout((function(){e(t===R.Z.IDOK)}),100)}});t.preventClosing(!0)})).then((function(e){if(e){var n;if(t)PC.submitAssessment(i,!1,!0);else{var r=NC(i);n=r&&jC(r)}return n||Promise.reject(new Error("No data"))}})):Promise.resolve()}function GC(){return GC=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.Z.currentProject.exists(t)){e.next=3;break}return n=m.ZP.path.parse(t),e.abrupt("return",i.Z.currentProject.createFile(n.name,n.dir));case 3:case"end":return e.stop()}}),e)}))),GC.apply(this,arguments)}function VC(e){return function(e){return GC.apply(this,arguments)}(e).then((function(){!function(e){ZC.execute("file","open",{ext:"tree",filename:e})}(e)}))}function KC(){CC=null,SC=null,EC=null,IC=null}var YC={CONFIGURE_LAYOUT:"configure-layout",ASSESSMENTS:"assessments",MEDIA:"media",GLOBAL:"global"};const JC={show:function(e,t,n,i){t.find(".settings").remove(),jC=i.saveFunction,AC=i.closeFunction,EC=n.metadataLink,IC=n.sectionLink,SC=yZ.ZP.renderSettings(),PC.init(SC.find("#".concat(YC.ASSESSMENTS)),n.editor,EC,IC,AC),n.assessment||PC.renderAssessmentsList(),l()(t).append(SC),zx(SC),CC=e,WC(e),SC.find("#".concat(e)).removeClass("hide"),n.assessment&&PC.renderAssessmentEditor(n.assessment,!1)},refresh:function(e,t){var n=CC===YC.CONFIGURE_LAYOUT;if(n){var i=NC(l()(SC.find("form")[0]));e.isCloseAll&&i.actions.unshift(new xC({action:"close",path:"#tabs"}));var r=i.actions;r.push(t),IC.actions=r}else IC=e;var a=WC(CC);return n&&a.data("changed",!0),n},changeSettingsType:function(e){zC(SC).then((function(){CC=e,WC(e),SC.find(".settings-container").addClass("hide"),SC.find("#".concat(e)).removeClass("hide")}))},checkUnsaved:function(){return zC(SC)},activate:function(){PC.activate()},deactivate:function(){PC.cleanup()},getSettingsType:function(){return CC},addFileToOpenTab:LC};var QC=n(50352),XC=n(5085),$C=n(44442).A,eS=n(85099).tj,tS=Vk.ZP.Action,nS=y.Z.create(n(28755)),iS=y.Z.create(n(10742)),rS=n(27726)._3,aS=n(27726).R0,sS=m.ZP.KeyCode,oS=40,cS=function(e,t,n,i,r){d().isEmpty(t)||(t=d().toFinite(t)),d().isFinite(t)||(t=0),this.markdownEditor=r.markdownEditor,this.step=t,this._filterSeq=0,this.container=e,this.tab=r.tab,this.view=n,CZ.init("editor");var a=d().debounce(dS.bind(null,this),400);this._styleCssChangesHandlerId=Vn.ZP.onFileChange(Ne.ZP.CSS_FILE,a),this._metadataChanged=y.Z.subscribe("guides:theme_changed",a),this._onIframeClick=y.Z.subscribe("guides:iframe:click",uS.bind(null,this)),this._sectionAssessmentIds=[],this._sectionAssignmentsInlineWidgets=[],iS.treeAddFilter({plugin:"guides-editor",filter:"show",seq:this._filterSeq++}),iS.treeAddFilter({plugin:"guides-editor",filter:"show",path:[".codio",Ne.ZP.GUIDES_FOLDER],seq:this._filterSeq++})},lS=cS.prototype;function uS(e){e.container.find("nav.toolbar .btn-group").removeClass("open")}function dS(e){e.metadata&&e.metadata.theme&&e.step&&e.step.contentType===Ne.ZP.CONTENT_TYPE_MARKDOWN&&yZ.ZP.updateIframeCss(e.container.find(".guides-iframe").parent(),e.metadata.theme)}function pS(e,t,n){$S(e),CZ.clear(n.deleted);var i=e.item,r=i.id;(e.step=e.metadata.getSectionPosition(r),d().includes(n.deleted,r))?k.Z.info("The section "+m.ZP.safeHtml(i.title)+" was removed"):d().find(n.updated,{id:i.id})&&hS(e)}function fS(e,t,n){KS(e)&&YS(e),CZ.addNext(e.item.id),rE(e,n.usageInfo.section.index).then((function(){e.editor.setPosition(n.usageInfo.section.pos),"preview"!==e.view&&d().defer((function(){e.editor.scrollToLine(n.usageInfo.section.pos.lineNumber)}))}))}function hS(e){var t=e.item,n=t.title,i=e.metadata.suppressPageNumbering,r=QC.ZP.generateTitle(t,i);return e.container.find(".guides-editor-title span").html(d().escape(r)),e.container.find(".guides-editor-title-input").val(n),kZ.Z.breadcrumbsPage(t.id).then((function(t){e.container.find(".guides-editor-title small").html(t||"")}))}function mS(e){var t=function(e,t){e[t]&&(y.Z.unsubscribe(e[t]),delete e[t])};t(e,"_sectionChangedHandlerId"),t(e,"_gotoAssessmentHandlerId"),t(e,"_editAssessmentFromLibraryHandlerId"),t(e,"_assessmentDisconnectedHandler")}function gS(e){e._gotoAssessmentHandlerId=y.Z.subscribe("guides:assessment:goto",fS.bind(null,e)),e._sectionChangedHandlerId=y.Z.subscribe("guides:updated",pS.bind(null,e)),e._goToSectionHandlerId=y.Z.subscribe("guides:section:goto_title",RS.bind(null,e,pE.bind(null,e))),e._goToSectionByIdHandlerId=y.Z.subscribe("guides:section:goto_id",(function(t,n){pE(e,n)})),e._goToNextSectionHandlerId=y.Z.subscribe("guides:section:goto_next",RS.bind(null,e,uE.bind(null,e))),e._goToPreviousSectionHandlerId=y.Z.subscribe("guides:section:goto_prev",RS.bind(null,e,dE.bind(null,e))),e._bookItemRenamedHandlerId=y.Z.subscribe("guides:book:item_renamed",hS.bind(null,e)),e._closeNavigationHandler=y.Z.subscribe("guides:book:nav_close",NS.bind(null,e)),e._openNavigationHandler=y.Z.subscribe("guides:book:nav_open",MS.bind(null,e)),e._editAssessmentFromLibraryHandlerId=y.Z.subscribe("guides:assessment:edit",(function(t,n){GS(e,YC.ASSESSMENTS,n.assessment)})),e._assessmentDisconnectedHandler=y.Z.subscribe("guides:assessment:disconnected",(function(){gE(e,e.container)})),e._mediaSettingsOpenHandler=y.Z.subscribe("ribbon:media:open",(function(){return GS(e,YC.MEDIA)}))}function vS(){return vS=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.sectionsCount()){e.next=4;break}return e.next=3,kZ.Z.addPage({title:"New Page"});case 3:t.step=0;case 4:case"end":return e.stop()}}),e)}))),vS.apply(this,arguments)}function bS(){return bS=(0,r.Z)(o().mark((function e(t,n){var i,r,a,s,c,l,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.metadata=n,mS(t),gS(t),i=n.getSections(),r=_Z.Z.getCurrentEditorSectionId(),a=null!==r?n.getSectionPosition(r):-1,s=-1!==a?a:0,t.step=s,c=n.getSection(s),!d().isUndefined(c)){e.next=11;break}throw new Error("no step found");case 11:return Vn.ZP.setEditorOpen(!0),t.item=c,t.tab.rename(d().toString(s)),t.tab.setTitle("Guide Editor"),l=t.container,t.isRendered||(t.view=t.view||t.tab.view||"code",l=yZ.ZP.renderEditorItem(c,i,t.view),t.container.empty().append(l),JS(t),$S(t),OS(t,l)),t.isRendered=!0,t.editor&&(u=new B.yO(""),t.editor.setModel(u),t.editor.setOption("readOnly",!0)),hS(t),e.abrupt("return",c.contentModel.then((function(e){return t.editor?(t._model=e,t._sectionAssessmentIds=(0,QC.B5)(e.getValue(),t.item.contentType),gE(t,l),t._modelUpdateHandler=yS.bind(null,t),t._onChangeDisposable&&t._onChangeDisposable.dispose(),t._onChangeDisposable=t._model.onDidChangeModelContent(t._modelUpdateHandler),t.editor.setOption("readOnly",!!c.readOnly),iS.sectionRendered({id:c.id,anchor:t.anchor}),KS(t)?JC.activate():t.ribbon&&t.ribbon.show(),TS(t,e).then((function(){rS.getAssessments().then((function(n){CS(t,e,n)}))}))):Promise.reject({close:!0})})));case 21:case"end":return e.stop()}}),e)}))),bS.apply(this,arguments)}function yS(e){return wS.apply(this,arguments)}function wS(){return wS=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,QC.B5)(t._model.getValue(),t.item.contentType),t._sectionAssessmentIds.length===n.length&&0===d().difference(t._sectionAssessmentIds,n).length||(t._sectionAssessmentIds=n),e.abrupt("return",new Promise((function(e){rS.getAssessments().then((function(n){d().defer((function(){CS(t,t._model,n),e()}))}))})));case 3:case"end":return e.stop()}}),e)}))),wS.apply(this,arguments)}function _S(e,t,n,i){var r=t.getLineContent(n),a=new RegExp("\\{[^\\|]+\\|assessment\\}\\(".concat(i,"\\)"),"g").exec(r);if(a){var s=a.index+a[0].length-i.length-1,o=a.index+a[0].length-1,c=e.editor.getOffsetForColumn(n,s),l=e.editor.getOffsetForColumn(n,o),u=e.editor.getLayoutInfo().contentLeft,d=e.editor.getTopForPosition(n,s),p=e.editor.getScrollTop();return{left:c+u+10-e.editor.getScrollLeft(),top:d-p+1,width:l-c}}}function kS(e,t){return"<i aria-label='".concat(t,"' title='").concat(t,"' class='svg icon ").concat(e," guides-assessment-inline-widget-type'/>")}function PS(e){switch(e.type){case yP.PS:return"Standard Code Test";case yP.UF:return"Advanced Code Test";case yP.nh:return"Parsons Puzzle";case yP.aR:return"Multiple Choice";case yP.UX:return"Fill in the Blanks";case yP.D4:return"Free Text Autograde";case yP._N:return"Math Assessment";case yP.Rz:return"Sense.Network";case yP.V1:return"Free Text";case yP.Vf:return"Grade Book";case yP.FD:return"Random";default:return""}}function ZS(e,t,n,i){var r=_S(e,t,i,n.taskId),a=e.editor.getLineHandle(i),s=function(e){var t=PS(e);switch(e.type){case yP.PS:return kS("icon-coc",t);case yP.UF:return kS("icon-code-test",t);case yP.nh:return kS("icon-parsons",t);case yP.aR:return kS("icon-mcq",t);case yP.UX:return kS("icon-fib",t);case yP.D4:return kS("icon-free-text-auto",t);case yP._N:return kS("icon-math",t);case yP.Rz:return kS("icon-sense",t);case yP.V1:return kS("icon-free-text",t);case yP.Vf:return kS("icon-grade-book",t);case yP.FD:return kS("icon-random",t);default:return""}}(n),o=PS(n),c="Edit: ".concat(o,": ").concat(n.source.name),u="Edit: ".concat(s," ").concat(n.source.name),d=l()('<button class="guides-assessment-inline-widget btn-primary" title="'.concat(c,'">').concat(u,"</button>"));y.Z.on(d,"click",(function(t){t.preventDefault(),GS(e,YC.ASSESSMENTS,n)}));var p=d.get(0);p.style.left="".concat(r.left,"px"),p.style.top="".concat(r.top,"px"),p.style.width="".concat(r.width,"px");var f=e.editor.getOption("lineHeight")-5;p.style.lineHeight="".concat(f,"px");var h=m.ZP.GUID(4),g={getId:function(){return h},getDomNode:function(){return p},getPosition:function(){return null}};return e.editor.addOverlayWidget(g),{id:h,assessmentId:n.taskId,el:d,overlayWidget:g,lineHandle:a}}function xS(e){d().each(e._sectionAssignmentsInlineWidgets,(function(t){return function(e,t){var n=t.overlayWidget,i=t.el;e.editor&&e.editor.removeOverlayWidget(n),i&&i.remove()}(e,t)})),e._sectionAssignmentsInlineWidgets=[]}function CS(e,t,n){if(xS(e),e.item&&e.item.contentType!==Ne.ZP.CONTENT_TYPE_HTML){var i=t.getLinesContent();d().each(i,(function(i,r){var a=(0,QC.B5)(i,e.item.contentType);d().each(a,(function(i){var a=d().find(n,{taskId:i});a&&e._sectionAssignmentsInlineWidgets.push(ZS(e,t,a,r+1))}))}))}}function SS(e){d().each(e._sectionAssignmentsInlineWidgets,(function(t){if(t&&null!==t.lineHandle.getLineNumber()){var n=_S(e,e._model,t.lineHandle.getLineNumber(),t.assessmentId);if(!n)return;var i=t.el.get(0);i.style.left="".concat(n.left,"px"),i.style.top="".concat(n.top,"px"),i.style.width="".concat(n.width,"px")}}))}function ES(e,t){e.markDownEditorInstance.setModel(t)}function IS(e){return eS.get(e.container)}function TS(e,t){if(d().isUndefined(e.markDownEditorInstance)){var n={fileContent:t,container:e.container.find("div.main.guides-content-editor"),fileName:e.item.contentPath,tab:e.tab,view:e.view,showIcons:!1,renderFunction:function(t){return yZ.ZP.renderBody({metadata:e.metadata,section:e.metadata.getSection(e.step),container:t,isScrollReset:!1,theme:e.metadata.theme,suppressPageNumbering:e.metadata.suppressPageNumbering,useSubmitButtons:e.metadata.useSubmitButtons,useMarkAsComplete:e.metadata.useMarkAsComplete,hideBackToDashboard:e.metadata.hideBackToDashboard,skipFocusOnSectionChange:!0}).then((function(){rS.setState(IS(e)),function(e){var t=IS(e);t&&(t.scripts=e.metadata.scripts)}(e)}))}};e.markDownEditorInstance=e.markdownEditor(n),e.ribbon&&e.ribbon.clear(),e.ribbon=new XC.Z(e.container.find(".ribbon-panel-place"),t,e.editor)}return vE(e,"activate",e.editor).then((function(){return vE(e,"afterActivate",e.editor)}))}function jS(e,t,n){e.editor&&n&&e.editor.layout()}function AS(e){var t,n=e.editor;n&&(d().isUndefined(e._model)||(e.markDownEditorInstance&&e.markDownEditorInstance.afterActivate(e.editor),e._focusHandlerId=d().bind(e._editorFocusHandler,e),e._onFocusDisposable&&e._onFocusDisposable.dispose(),e._onFocusDisposable=n.onDidFocus(e._focusHandlerId),$S(e),t=i.Z.ide.panels.isOpen(void 0,"filetree"),d().isUndefined(t)&&i.Z.ide.panels.addTreePanel(i.Z.ide.panels.child.children[0])))}function OS(e,t){var n=y.Z.on.bind(y.Z,t);n("click",".next",uE.bind(null,e)),n("click",".guides-settings-global",VS.bind(null,e,YC.GLOBAL)),n("click",".guides-settings-configure-layout",VS.bind(null,e,YC.CONFIGURE_LAYOUT)),n("click",".guides-editor-title",iE.bind(null,e)),n("blur",".guides-editor-title-input",nE.bind(null,e)),n("keyup",".guides-editor-title-input",eE.bind(null,e)),n("submit",".guides-editor-title-form",tE.bind(null,e)),n("click",".guides-button-prev",cE(e,!1)),n("click",".guides-button-next",cE(e,!0)),n("click",".guides-button-add-page",lE.bind(null,e)),n("click",".preview-switch-type",LS.bind(null,e)),n("click",".guides-editor-preview-switch",US),n("change","#split_view",BS.bind(null,e));var i=t.find(".btn-group-assessment > .dropdown-menu");y.Z.on(i,"click",".assessment-create",WS.bind(null,e)),y.Z.on(i,"click",".assessment-view-existing",(function(){return GS(e,YC.ASSESSMENTS)})),y.Z.on(i,"click",".assessment-edit",zS.bind(null,e)),y.Z.on(t.find(".toolbar"),"keydown",".dropdown-toggle",(function(e){var t=e.which||e.keyCode;t!==sS.RETURN&&t!==sS.DOWN||(e.stopPropagation(),e.preventDefault(),l()(this).closest(".btn-group").toggleClass("open"))})),y.Z.on(window,"resize.panels",(function(){XS(e),QS(e)})),n("click",".guides-editor-toggle-nav-book",FS.bind(null,e))}function DS(e,t){var n=e.container.find(".guides-editor-toggle-nav-book"),i=n.is(":focus");n.attr("aria-expanded",t),i&&t?d().delay((function(){return l()("#codio-book-navigation").focus()}),100):i||t||e.container.find(".guides-editor-container").focus()}function NS(e){DS(e,!1)}function MS(e){DS(e,!0)}function FS(){var e=l()("#codio-book-navigation");!e.length||e.hasClass("hide")?iS.openBookNavigation():iS.closeBookNavigation()}function RS(e,t,n,i){var r=IS(e);r&&i.iframeId===r.id&&t(i)}function LS(e,t){var n=l()(t.target).closest("a");n.length||(n=l()(t.target).closest("button"));var i=n.data("type");"fullscreen"===i?function(e){var t=e.tab.panel;t.hasFocus||t.focus(),d().defer((function(){$C.execute("ide","fullscreen")}))}(e):"refresh"===i?function(e){var t=IS(e);t&&t.redraw()}(e):"preview"===i?(t.preventDefault(),t.stopPropagation(),iS.preview()):qS(e,i)}function US(){iS.preview()}function BS(e,t){qS(e,l()(t.currentTarget).is(":checked")?"splitview":"code")}function qS(e,t){M.Z.saveAllAndWait().then((function(){e.tab.switchType(t).then((function(){JS(e),$S(e),SS(e)}))}))}function HS(e){e.container.find(".guides-editor-title-form, .guides-editor-title").toggle()}function WS(e,t){var n=l()(t.currentTarget).data("type");"assessment-library"===n?aS.addFromLibrary():(t.preventDefault(),GS(e,YC.ASSESSMENTS,{type:n}))}function zS(e,t){var n=l()(t.currentTarget).data("taskid");rS.getAssessments().then((function(i){var r=d().find(i,{taskId:n});r&&(t.preventDefault(),GS(e,YC.ASSESSMENTS,r))}))}function GS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:YC.GLOBAL,n=arguments.length>2?arguments[2]:void 0,i=e.container.find(".guides-settings-".concat(t)),a=e.container.find(".content"),s=e.item,c=e.container.find(".main.guides-content-editor");function l(){return l=(0,r.Z)(o().mark((function t(n){var i,a,c,l,u,p;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=function(t){e.metadata[t]=d().isUndefined(n[t])?e.metadata[t]:n[t]},l=function(){var e="contentType";return s.setContentType(d().isUndefined(n[e])?s[e]:n[e])},c=function(e){s[e]=d().isUndefined(n[e])?s[e]:n[e]},a=function(){return a=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n[t="contentType"]&&s[t]!==n[t]){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,new Promise((function(e,t){R.Z.showConfirm({title:"Warning",buttons:R.Z.MB_OKCANCEL,description:"You are changing content type. Content will be lost.",onClose:function(n,i){i===R.Z.IDOK?e():t(new Error("changing content cancelled"))}})}));case 5:return e.abrupt("return",l().then((function(){iS.contentTypeChanged()})));case 6:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)},i=function(){return a.apply(this,arguments)},p={action:"close",path:"#tabs"},d().isUndefined(n.isCloseAll)&&(n.isCloseAll=d().some(s.actions,(function(e){return e.path.match(/^#tabs/)}))),d().isUndefined(n.actions)&&(n.actions=d().filter(s.actions,(function(e){return!e.path.match(/^#tabs/)}))),n.isCloseAll&&n.actions.unshift(p),c("actions"),c("layout"),c("paths"),c("teacherOnly"),c("media"),c("learningObjectives"),c("closeTerminalSession"),u("theme"),u("scripts"),u("lexikonTopic"),u("suppressPageNumbering"),u("hideMenu"),u("allowGuideClose"),u("useSubmitButtons"),u("useMarkAsComplete"),u("collapsedOnStart"),u("hideSectionsToggle"),u("hideBackToDashboard"),u("protectLayout"),t.abrupt("return",i().then((function(){e.metadata.save(),s.save(),$S(e)})));case 29:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}i.addClass("active"),c.hide(),e.ribbon&&e.ribbon.hide(),JC.show(t,a,{editor:e.editor,metadataLink:e.metadata,sectionLink:s,assessment:n},{saveFunction:function(e){return l.apply(this,arguments)},closeFunction:function(){return YS(e)}}),iS.settingsOpen()}var VS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:YC.GLOBAL,n=arguments.length>2?arguments[2]:void 0;n&&n.preventDefault(),KS(e)?t!==JC.getSettingsType()?(e.container.find(".guides-settings").removeClass("active"),JC.changeSettingsType(t),e.container.find(".guides-settings-".concat(t)).addClass("active")):JC.checkUnsaved().then((function(){return YS(e)})).catch((function(){})):GS(e,t)},KS=function(e){return e.container.find(".content > .settings").length>0};function YS(e){JC.deactivate();var t=e.container;t.find(".settings").remove();var n=t.find(".guides-settings.active");return t.find(".main.guides-content-editor").show(),e.ribbon&&e.ribbon.show(),"preview"!==e.view&&e.editor.layout(),n.removeClass("active"),iS.settingsClose(),JS(e),rE(e,e.step)}function JS(e){if(e.container){var t="preview"===e.tab.viewType,n=e.container.find(".btn-group-assessment"),i=e.container.find(".guides-editor-view-type-switch-container");KS(e)?(n.hide(),i.addClass("hide")):(i.removeClass("hide"),t?n.hide():n.show())}}function QS(e){var t=l()(".preview-switch-type.refresh");"splitview"===e.view?(t.css("top",e.container.find("header").outerHeight()+35),t.show()):t.hide()}function XS(e){var t=e.container.find(".navigation-container .header"),n=e.container.height()-t.height()-oS;e.container.find(".btn-group-assessment .dropdown-menu").first().css("max-height",n)}function $S(e){!function(e){var t,n,i=e.container.find("nav.toolbar"),r=i.find(".guides-button-prev"),a=i.find(".guides-button-next"),s=i.find(".guides-button-add-page"),o=e.metadata.sectionsCount(),c=e.step>0,l=e.step<o-1;function u(e,t){t?e.removeClass(Ne.xu).removeAttr(Ne.xu):e.addClass(Ne.xu).attr(Ne.xu,!0)}u(r,c),u(a,l),t=s,n=a,l?(t.addClass("hide"),n.removeClass("hide")):(n.addClass("hide"),t.removeClass("hide"))}(e),QS(e),function(e){if(e.container){var t="guides-editor-view-type-switch-container--ribbon",n=e.container.find(".guides-editor-view-type-switch-container");e.item&&e.item.contentType===Ne.ZP.CONTENT_TYPE_MARKDOWN?n.addClass(t):n.removeClass(t)}}(e),function(e){if(e.container){var t=e.container.find(".guides-editor-split-view-switch-container");e.item&&e.item.contentType===Ne.ZP.CONTENT_TYPE_HTML?t.addClass("hide"):t.removeClass("hide")}}(e)}function eE(e,t){if(13===t.keyCode&&(t.preventDefault(),nE(e)),27===t.keyCode){t.preventDefault();var n=e.container.find(".guides-editor-title span").text();e.container.find(".guides-editor-title-input").val(n),HS(e)}}function tE(e,t){t.preventDefault()}function nE(e){if(!e.container.find(".guides-editor-title-form").is(":visible"))return!1;var t=e.container.find(".guides-editor-title-input").val();if(""===t)return HS(e),!1;HS(e);var n=e.editor.getOption("readOnly");return e.editor.setOption("readOnly",!0),e.editor.setOption("domReadOnly",!1),e.metadata.renameNode(e.item.id,t).then((function(){hS(e)})).finally((function(){e.editor&&e.editor.setOption("readOnly",n)})),e.editor&&e.editor.focus(),!1}function iE(e){HS(e),e.container.find(".guides-editor-title-input").focus().select()}function rE(e,t,n,i){return aE.apply(this,arguments)}function aE(){return aE=(0,r.Z)(o().mark((function e(t,n,i,r){var a,s,c,l,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.markDownEditorInstance&&t._model){e.next=2;break}return e.abrupt("return");case 2:if(i=!d().isUndefined(i)&&i,a=t.step===n,t.step=n,t.anchor=r,!(s=t.metadata.getSection(n))){e.next=14;break}return _Z.Z.setCurrentEditorSectionId(s.id),c=Promise.resolve(),l=KS(t),u=JC.getSettingsType(),l&&(c=JC.checkUnsaved().then(JC.deactivate)),e.abrupt("return",c.then((function(){s.contentType===Ne.ZP.CONTENT_TYPE_HTML&&"splitview"===t.tab.viewType&&qS(t,"code");var e=s.contentType!==t.item.contentType;return t.item=s,l&&GS(t,u),sE(t,i,e,a)})));case 14:case"end":return e.stop()}}),e)}))),aE.apply(this,arguments)}function sE(e,t,n,i){return oE.apply(this,arguments)}function oE(){return oE=(0,r.Z)(o().mark((function e(t,n,i,r){var a,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.item,hS(t).then((function(){$S(t)})),gE(t,t.container),i&&rS.getAssessments(),t.tab.rename(d().toString(t.step)),t.tab.setTitle("Guide Editor"),e.next=8,a.contentModel;case 8:return s=e.sent,c=t.editor.getScrollTop(),t._onChangeDisposable&&t._onChangeDisposable.dispose(),t._model=s,e.next=14,yS(t);case 14:t._onChangeDisposable=t._model.onDidChangeModelContent(t._modelUpdateHandler),ES(t,t._model),SS(t),r&&(t.editor.setScrollTop(c),(l=t.markDownEditorInstance).syncScrollEditor&&l.syncScrollEditor()),t.editor.setOption("readOnly",!!a.readOnly),iS.sectionRendered({id:a.id,anchor:t.anchor}),t.ribbon&&(t.ribbon.swapDoc(s),a.contentType===Ne.ZP.CONTENT_TYPE_HTML?t.ribbon.hide():t.ribbon.show()),n&&iE(t);case 22:case"end":return e.stop()}}),e)}))),oE.apply(this,arguments)}function cE(e,t){return function(n){n.preventDefault(),l()(this).hasClass(Ne.xu)||function(e,t){t?uE(e):dE(e)}(e,t)}}function lE(){iS.bookAddPage({shouldEdit:!1,callback:function(e){iS.goToSectionById({sectionId:e.pageId})}})}function uE(e){var t=CZ.getNext(e.item.id),n=e.metadata.getSectionPosition(e.item.id)+1;-1===t?CZ.addNext(e.item.id):n=t,rE(e,n)}function dE(e){var t=CZ.getPrev(e.item.id),n=e.step-1;-1!==t&&(n=e.metadata.getSectionPosition(t)),rE(e,n)}function pE(e,t){var n=t.sectionTitle,i=t.sectionId,r=t.optionalAnchor;if(n||i){var a;if(t.focus&&e.focus(),n){var s=e.metadata.getSections();a=d().findIndex(s,(function(e){return e.title.toLowerCase()===n.toLowerCase()}))}else a=e.metadata.getSectionPosition(i);var o=e.metadata.getSectionPosition(e.item.id);-1!==a&&(a!==e.step&&-1!==o&&CZ.addNext(e.item.id),rE(e,a,void 0,r))}}function fE(e,t){xS(e),e._onChangeDisposable&&e._onChangeDisposable.dispose(),e._onChangeDisposable=null,e._onScrollDisposable&&e._onScrollDisposable.dispose(),e._onScrollDisposable=null,e._onFocusDisposable&&e._onFocusDisposable.dispose(),e._onFocusDisposable=null;var n=e.editor;n&&(n.setOption("wordWrap",null),n.setOption("domReadOnly",null),n.setOption("minimap",null),n.cleanup(),e.editor=null,e._focusHandlerId=null,e.markDownEditorInstance&&vE(e,"close"),delete e.markDownEditorInstance),hE(e),e.ribbon&&e.ribbon.clear(),t&&(e.isRendered=!1,aS.cleanup())}function hE(e){e.fsHandlerId&&y.Z.unsubscribe(e.fsHandlerId),e._sectionChangedHandlerId&&y.Z.unsubscribe(e._sectionChangedHandlerId),e._gotoAssessmentHandlerId&&y.Z.unsubscribe(e._gotoAssessmentHandlerId),e.settingsOpenHandlerId&&y.Z.unsubscribe(e.settingsOpenHandlerId),e.assessmentAddedHandlerId&&y.Z.unsubscribe(e.assessmentAddedHandlerId),e.contentTypeUpdatedHandlerId&&y.Z.unsubscribe(e.contentTypeUpdatedHandlerId),e._goToSectionHandlerId&&y.Z.unsubscribe(e._goToSectionHandlerId),e._goToSectionByIdHandlerId&&y.Z.unsubscribe(e._goToSectionByIdHandlerId),e._goToNextSectionHandlerId&&y.Z.unsubscribe(e._goToNextSectionHandlerId),e._goToPreviousSectionHandlerId&&y.Z.unsubscribe(e._goToPreviousSectionHandlerId),e._bookItemRenamedHandlerId&&y.Z.unsubscribe(e._bookItemRenamedHandlerId),e._closeNavigationHandler&&y.Z.unsubscribe(e._closeNavigationHandler),e._openNavigationHandler&&y.Z.unsubscribe(e._openNavigationHandler),e._editAssessmentFromLibraryHandlerId&&y.Z.unsubscribe(e._editAssessmentFromLibraryHandlerId),e._assessmentDisconnectedHandler&&y.Z.unsubscribe(e._assessmentDisconnectedHandler),e._mediaSettingsOpenHandler&&y.Z.unsubscribe(e._mediaSettingsOpenHandler),e._unbindAssessmentsManageEvents&&e._unbindAssessmentsManageEvents()}var mE=function(e,t,n){var i=Promise.resolve();KS(e)&&(i=YS(e)),i.then((function(){!function(e,t){var n=t.assessment;t.newAssessmentInfo=t.newAssessmentInfo||{};var i=t.newAssessmentInfo.toNewPage;if(i||e.item.contentType!==Ne.ZP.CONTENT_TYPE_HTML)if(i)uE(e);else{var r=e.editor.getPosition();if(t.newAssessmentInfo.insertAfter)r={lineNumber:e.editor.findNextMatch(t.newAssessmentInfo.insertAfter,{lineNumber:0,column:0}).range.startLineNumber+1,column:0};var a=t.newAssessmentInfo.prefix||"";e.editor.replaceRange(a+QC.ZP.generateAssessmentString(n)+"\n",r),t.newAssessmentInfo.duplicate&&GS(e,YC.ASSESSMENTS,n)}else if("code-output-compare"===n.type||"test"===n.type){var s='<button onclick="'+("codio.assessments.check('"+n.taskId+"')")+'">Run</button>\n',o='<pre data-codio-assessment-output="'+n.taskId+'"></pre>\n';e.editor.replaceRange(s+o,e.editor.getPosition())}}(e,n)}))};function gE(e,t){var n=t.find(".btn-group-assessment > .dropdown-menu"),r=e.item.contentType===Ne.ZP.CONTENT_TYPE_HTML;e.dfdShowAssessmentDd||(e.dfdShowAssessmentDd=Promise.all([b.ZP.AssessmentManager.listLibraries({userId:i.Z.currentUser.getAccountUid()}),b.ZP.OrganizationManager.getMyOrganizations()]).then((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1],s=!1,o=!1;d().each(r,(function(e){var t=e.dashboardSettings&&e.dashboardSettings.showMath;s=s||"codio"===e.details.slug||t;var n=e.integrations&&e.integrations.senseNetwork,i=n&&!d().isEmpty(n.apiKey);return o=o||i,!(s&&o)}));var c=i.Z.currentUser.get("details").get("type");return{showLibrary:!d().isEmpty(n)&&"STUDENT"!==c,showMath:s,showSense:o}})).catch((function(){return{}}))),e.dfdShowAssessmentDd.then((function(i){var a=e.item,s=yZ.ZP.renderAssessmentsDropdown(!a.readOnly,r,i.showLibrary&&!r,i.showMath,i.showSense);n.empty().append(s),XS(e),e._unbindAssessmentsManageEvents&&e._unbindAssessmentsManageEvents(),e._unbindAssessmentsManageEvents=Qs(t.find(".btn-group-assessment"))}))}function vE(e,t,n){return bE.apply(this,arguments)}function bE(){return(bE=(0,r.Z)(o().mark((function e(t,n,i){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.markDownEditorInstance)||!d().isFunction(r[n])){e.next=3;break}return e.abrupt("return",r[n].call(r,i));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yE(){var e=i.Z.ide.panels.getAllOpened(void 0,"guides-edit");d().each(e,(function(e){e&&e.panel.closeTab(e,!0).catch(m.ZP.error.checkErrorForIgnore)}))}lS._editorFocusHandler=function(){nS.focus({editor:this.editor,filename:this.fileName})},lS.activate=function(e){var t=this,n=i.Z.currentProject.exists(Ne.ZP.GUIDES_ROOT_METADATA_FILE);if(!n||Vn.ZP.isUnit()){var r=new Error(n?"":"Guides description file does not exists");return r.close=!0,Promise.reject(r)}rS.fetchGuideState().catch((function(e){var t=e.message;return k.Z.error(t)}));var a=this;return a.editor=e,this._onScrollDisposable&&this._onScrollDisposable.dispose(),this._onScrollDisposable=e.onDidScrollChange((function(){SS(t)})),e.setOption("wordWrap","on"),e.setOption("minimap",{enabled:!1}),hE(a),a.fsHandlerId=y.Z.subscribe("ide:fullscreen:#mode",jS.bind(null,a)),a.settingsOpenHandlerId=y.Z.subscribe("guides:settings:open",JS.bind(null,a)),a.contentTypeUpdatedHandlerId=y.Z.subscribe("guides:contentType_changed",(function(){a._sectionAssessmentIds=(0,QC.B5)(a._model.getValue(),a.item.contentType),rS.getAssessments().then((function(e){CS(a,a._model,e)})),gE(a,l()("body"))})),a.assessmentAddedHandlerId=y.Z.subscribe("guides:assessment:added",mE.bind(null,a)),Vk.ZP.getMetadata().then((function(e){return function(e,t){return vS.apply(this,arguments)}(a,e).then((function(){return function(e,t){return bS.apply(this,arguments)}(a,e)}))}))},lS.afterActivate=function(){return AS(this,this.parser)},lS.beforeDeactivate=function(){vE(this,"beforeDeactivate")},lS.deactivate=function(){vE(this,"deactivate"),fE(this)},lS.beforeClose=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!KS(this)){e.next=2;break}return e.abrupt("return",JC.checkUnsaved().then(JC.deactivate));case 2:case"end":return e.stop()}}),e,this)}))),lS.close=function(){this._model&&(this._onChangeDisposable&&this._onChangeDisposable.dispose(),this._onChangeDisposable=null,this._onScrollDisposable&&this._onScrollDisposable.dispose(),this._onScrollDisposable=null),iS.treeRemoveFilter({plugin:"guides-editor",seq:this._filterSeq++}),fE(this,!0),y.Z.unsubscribe(this._styleCssChangesHandlerId),y.Z.unsubscribe(this._metadataChanged),y.Z.unsubscribe(this._onIframeClick),Vn.ZP.setEditorOpen(!1),Vk.ZP.close(),this.ribbon&&this.ribbon.clear()},lS.switchType=function(e,t,n){var i=this;this.view!==n&&(this.view=n,vE(this,"close").then((function(){return delete i.markDownEditorInstance,i.container.find(".guides-content-editor").empty(),TS(i,i._model)})).then((function(){return vE(i,"setTab",i.tab)})).then((function(){rS.getAssessments().then((function(e){CS(i,i._model,e)}))})).then((function(){return $C.execute("layout","save")})))},lS.fileDrop=function(e,t,n){var i=n.path,r=n.type,a=m.ZP.path.isImage(i,r),s=KS(this),o=s||!a;if(o){if("dir"===r)return!0;if(l()(".settings-container.assessments-container .assessment-editor").length&&aS.fileDrop(i,n.event))return!0;var c=this;R.Z.showConfirm({title:"Confirmation",buttons:R.Z.MB_OKCANCEL,description:"Do you want the file to be added to Open Tabs?",onClose:function(e,t){if(t===R.Z.IDOK){var n=new tS({action:"open",panel:0,path:i});if(s&&JC.getSettingsType()===YC.CONFIGURE_LAYOUT){var r=c.container.find(".open-tabs-container").closest("form");JC.addFileToOpenTab(r,i)}else c.item.actions.push(n),c.item.save(),$S(c)}}})}else if(a){var u;return u=this.item.contentType===Ne.ZP.CONTENT_TYPE_MARKDOWN?"!["+m.ZP.path.getFileName(n.path)+"]("+n.path+")":'<img alt="'+m.ZP.path.getFileName(n.path)+'" src="'+n.path+'"/>',e.replaceRange(u+"\n",n.position,n.position),!0}return o},lS.focus=function(){this.editor&&this.editor.focus()},y.Z.subscribe("guides:removed",yE),y.Z.subscribe("guides:close",yE);const wE=cS;var _E=n(42982),kE=function(e){var t=i.Z.ide.panels.getOpenedTabs(e)[0];if(t&&!t.active)return i.Z.ide.panels.open(e)},PE=y.Z.create(n(10742)),ZE=Ne.ZP.BOOK_TYPES.PAGE,xE=null,CE=function(){return kE("guides-edit")||Promise.resolve()};const SE=function(e,t,n){var i={"Add Chapter":{label:"Add chapter",action:function(){PE.bookAddChapter()}},"Add Section":{label:"Add section",action:function(){PE.bookAddSection()}},"Add Page":{separator_after:!0,label:"Add page",action:function(){CE().then((function(){PE.bookAddPage({shouldEdit:!0,callback:function(e){PE.goToSectionById({sectionId:e.pageId})}})}))}},Rename:{label:"Rename",action:function(){var n=e.data.title&&d().trim(e.data.title),i=e.text;t.edit(e,n,(function(r,a,s){var o=r.text&&d().trim(r.text);n===o||s?t.rename_node(e,i):PE.bookRenameItem({id:r.id,title:o})}))}},Remove:{label:"Delete",separator_after:!0,action:function(){PE.bookRemoveItem({id:e.id,type:e.type,text:e.text})}},Duplicate:{label:"Duplicate",action:function(){xE=t.get_selected(),PE.bookCopyItems({ids:xE,id:e.id})}},Copy:{label:"Copy",action:function(){xE=t.get_selected()}}};xE&&(i.Paste={label:"Paste",action:function(){PE.bookCopyItems({ids:xE,id:e.id})}});var r=function(e,t){for(var n=e.get_parent(t.id),i=e.get_json(n),r=!1,a=!1,s=null,o=null,c=d().isArray(i)?i:i.children,l=0,u=c.length;l<u;l++)if(c[l].id===t.id){r=l!==u-1,(a=l>0)&&(s=c[l-1].id),r&&(o=c[l+1].id);break}return{canLevelUp:"#"!==n,canUp:a,canDown:r,downNode:o,upNode:s,parent:n}}(t,e),a=r.canUp&&!n;a&&(i.Up={label:"Up",action:function(){t.move_node(e,t.get_node(r.upNode),"before")}});var s=r.downNode&&!n;if(s&&(i.Down={label:"Down",action:function(){t.move_node(e,t.get_node(r.downNode),"after")}}),r.canLevelUp&&!n&&(i.LevelUp={label:"Level Up",action:function(){t.move_node(e,r.parent,"before")}}),e.type!==ZE&&!n){var o=e.data&&e.data.pageId,c=o?"Remove":"Add";i.LinkPage={separator_before:!0,label:c+" Content",action:function(){CE().then((function(){PE.bookLinkPage({id:e.id,link:!o})}))}}}return(a||s||r.canLevelUp)&&!n&&(i.Paste?i.Paste.separator_after=!0:i.Copy.separator_after=!0),n&&(delete i.Rename,delete i["Add Chapter"],delete i["Add Section"],delete i["Add Page"]),i};n(57568);var EE=y.Z.create(n(10742)),IE=n(68058).I_,TE=Ne.ZP.BOOK_TYPES.PAGE,jE=Ne.ZP.BOOK_TYPES.SECTION,AE=Ne.ZP.BOOK_TYPES.CHAPTER,OE=Ne.ZP.TREE_NAME;function DE(){return i.Z.currentProject.guid+":guides_tree_state"}function NE(e){IE.set(DE(),JSON.stringify(e))}var ME=function e(t,n){var r=this;if(!(this instanceof e))return new e(t);this.isEditor=n,this.scrollPosition=null,this.movingItems=[];var a=this,s={name:OE,core:{check_callback:function(){return n},multiple:n,themes:{dots:!1,responsive:!1},data:[],force_text:!0},types:{page:{valid_children:["none"],icon:"ss-icon ss-textfile",a_attr:{type:"page"}},section:{valid_children:[TE,jE],icon:"ss-icon ss-book",a_attr:{type:"section"}},chapter:{valid_children:[TE,jE],icon:"ss-icon ss-books",a_attr:{type:"chapter"}},"#":{valid_children:[TE,jE,AE]}},contextmenu:{select_node:!0,show_at_node:!1,items:function(e){if(n){var t=a.allSelected().length>1;return SE(e,a.tree,t)}}},dnd:{is_draggable:function(){return n},large_drag_target:!0,large_drop_target:!0},plugins:["types","guttericons","wholerow","multiline"]};n&&(s.plugins.push("contextmenu"),s.plugins.push("dnd")),this.container=t,this.treeContainer=l()('<div class="codio-book-tree"></div>'),this.container.append(this.treeContainer),this.treeDiv=this.treeContainer.jstree(s),this.tree=l().jstree.reference(this.treeDiv),this.container.on("scroll",(function(){a.scrollPosition=a.container.scrollTop()||0}));var o=d().debounce((function(e){var t=r.tree.get_node(e.parent),n=d().findIndex(t.children,(function(e){return d().includes(r.movingItems,e)}));EE.bookMoveItems({targetId:e.parent,ids:(0,_E.Z)(r.movingItems),position:-1!==n?n:void 0}),r.movingItems=[]}),500);this.treeDiv.on("move_node.jstree",(function(){var e=Array.prototype.slice.call(arguments)[1];a.movingItems.push(e.node.id),o(e)})).on("activate_node.jstree",(function(e,t){var n=a.allSelected(),r=t.node,s=r.data&&r.data.pageId,o=r.data&&r.data.anchor;!s||1!==n.length||r.a_attr.disabled||i.Z.currentProject.examMode.forwardOnlyNavigation||(kE("guides-edit")||kE("guides")||Promise.resolve()).then((function(){EE.goToSectionById({sectionId:s,optionalAnchor:o,focus:!0})}))})).on("after_open.jstree",(function(e,t){a.treeState[t.node.id]=!0,NE(a.treeState)})).on("after_close.jstree",(function(e,t){a.treeState[t.node.id]=!1,NE(a.treeState)})).on("hover_node.jstree",(function(e,t){var i=t.node;n&&a.nodeHovered(e,i)})).on("dehover_node.jstree",(function(e,t){var i=t.node;n&&a.nodeUnHovered(e,i)})).on("refresh.jstree",(function(){if(null!==a.scrollPosition&&a.container.scrollTop(a.scrollPosition),a.nodeToSelect){if(a.selectNode(a.nodeToSelect),n){var e=a.tree.get_node(a.nodeToSelect),t=e.data&&e.data.pageId,i=e.data&&e.data.anchor;t&&EE.goToSectionById({sectionId:t,optionalAnchor:i})}delete a.nodeToSelect}d().forEach(a.nodeAppearancesToWait,(function(e,t){var n=a.tree.get_node(t);n&&(delete a.nodeAppearancesToWait[t],e.resolve(n))}))})).on("loaded.jstree",(function(){a.loaded=!0,a.tree.refresh(!0)}))},FE=ME.prototype;function RE(e,t){var n=[],r=function(e){if(!e||!e.type)return{};var t={type:e.type.toLowerCase()};e.disabled&&(t.disabled=e.disabled);var n=i.Z.currentProject;return n.isBookReader&&!d().isEmpty(n.bookAssignmentPages)&&(d().includes(n.bookAssignmentPages,e.id)||(n.showAllBookPages?t.nonUnitPage=!0:t.disabled=!0)),t}(e);if(!d().isArray(e)){var a={text:e.title,id:e.id,type:e.type,data:{pageId:e.pageId,title:e.title,anchor:e.anchor},a_attr:r,li_attr:r};return e.children&&(d().each(e.children,(function(e){n.push(RE(e,t))})),a.children=n,a.state={opened:!d().isBoolean(t[e.id])||t[e.id]}),a}return d().each(e,(function(e){n.push(RE(e,t))})),n}FE.nodeHovered=function(e,t){var n=this;d().isInteger(this.hoverTimeoutTimer)&&clearTimeout(this.hoverTimeoutTimer),this.hoverTimeoutTimer=setTimeout((function(){return n.showTrashIcon(t)}),10)},FE.showTrashIcon=function(e){this.hoverTimeoutTimer=void 0;var t=this.tree.get_node(e.id,!0);if(t&&!t.find("input").length){var n=l()('\n<span aria-label="Delete" title="Delete" class="jstree-icon jstree-themeicon jstree-themeicon-custom jstree-themeicon-trash">\n  <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n</span>\n'),i=this;n.data({node:e}).click((function(e){e.preventDefault(),e.stopPropagation();var t=l()(this).data("node");t&&(i.selectNode(t.id),d().defer((function(){EE.bookRemoveItem({id:t.id,type:t.type,text:t.text})})))})),t.prepend(n)}},FE.nodeUnHovered=function(e,t){d().isInteger(this.hoverTimeoutTimer)&&clearTimeout(this.hoverTimeoutTimer),this.hoverTimeoutTimer=void 0;var n=this.tree.get_node(t.id,!0);n&&n.find(".jstree-themeicon-trash").remove()},FE._moveToVisible=function(e){var t=this.tree.get_node(e,!0);if(!t||t.is(":visible")){var n=t.offset().top,i=n+26,r=this.container.offset().top,a=r+this.container.height();if(n-r<0||i>a){var s=(this.container.scrollTop()||0)+n-r;this.container.scrollTop(s)}}},FE.selectNode=function(e){this.nodeToSelect=e,this.tree.deselect_all();var t=this.tree.get_node(e);t&&(this._moveToVisible(e),this.tree.select_node(t),t.type!==TE&&this.tree.open_node(t))},FE.waitNodeAppear=function(e){this.nodeAppearancesToWait||(this.nodeAppearancesToWait={});var t=this.tree.get_node(e);return t?Promise.resolve(t):(e in this.nodeAppearancesToWait||(this.nodeAppearancesToWait[e]=m.ZP.promise.deferred()),this.nodeAppearancesToWait[e].promise)},FE.treeToBook=function(e){e||(e=this.tree.get_json());var t=[],n=this;return d().each(e,(function(e){var i={title:e.data.title,id:e.id,type:e.type};e.data.pageId&&(i.pageId=e.data.pageId),e.type!==TE&&(i.children=n.treeToBook(e.children)),t.push(i)})),t},FE.createNodes=RE,FE.show=function(){this.treeContainer.removeClass("hide")},FE.hide=function(){this.treeContainer.addClass("hide")},FE.selected=function(){var e=this.tree.get_selected();return d().head(e)},FE.allSelected=function(){return this.tree.get_selected()},FE.markToOpen=function(e){this.treeState[e]=!0},FE.setData=function(e,t){var n;this.nodeToSelect=t,this.treeState||(this.treeState=(n=IE.get(DE()))?JSON.parse(n):{}),d().isEmpty(e)?this.treeContainer.addClass("hide"):(this.treeContainer.removeClass("hide"),this.tree.settings.core.data=RE(e,this.treeState),this.loaded&&this.tree.refresh(!0))},FE.deactivate=function(){this.loaded=!1,this.tree.destroy(),this.scrollPosition=null,this.movingItems=[]};const LE=ME;var UE=b.ZP.search,BE=f().compile('<div class="book-search-result">\n{{#if inProgress}}\n  <h3>Search in progress, please wait...</h3>\n{{/if}}\n{{#if noMatches}}\n  <h3>No matches found</h3>\n{{/if}}\n{{#if results}}\n  {{#each results}}\n    <div class="book-search-result-item" data-id="{{id}}">\n      <h4>{{title}}</h4>\n      <span>{{text}}</span>\n    </div>\n  {{/each}}\n{{/if}}\n</div>'),qE=y.Z.create(n(10742)),HE=/<codio\-search\-result\s+file='(.+?)'\s+line='(\d+?)'\s*>/,WE=function e(t){if(!(this instanceof e))return new e(t);this.container=t},zE=WE.prototype;function GE(e,t){var n=m.ZP.promise.deferred();return M.Z.saveAllAndWait().then((function(){return UE.search({pattern:t,flags:{regexp:!1,ignoreCase:!0,wholeWord:!1},locations:[".guides/content/**"]})})).then((function(t){!function(e,t){var n="log-entry/"+e.logEntryId,i=null,r="";b.ZP.standardCallbackTask({message:e.taskId}).then((function(e){t(e.totalMatches,e.moreResults,r),h.Z.unsubscribe(n,i)})).catch((function(e){var t=e.message;l().notify(t,{type:"error"}),h.Z.unsubscribe(n,i)})),i=h.Z.subscribeAll(n,(function(e){if(e){var t=e.split("\n");t.shift(),(e=t.join("\n"))&&e.length>0&&(r+=e)}}))}(t,(function(t,i,r){0===t?n.resolve([]):e._processSearchResult(r).then((function(e){e=d().compact(e),n.resolve(e)}))}))})).catch((function(){n.resolve([])})),n.promise}function VE(e){var t=m.ZP.promise.deferred();return d().defer((function(){var n=i.Z.currentProject.guides,r=[];n&&n.metadata&&n.metadata.sections&&d().each(n.metadata.sections,(function(t){if(t.content&&t.content.markdown){var n=t.content.markdown.split("\n"),i=d().findIndex(n,(function(t){return t&&d().includes(t.toLowerCase(),e)}));if(-1!==i){var a={line:i,text:n[i],title:t.title,id:t.id};r.push(a)}}})),t.resolve(r)})),t.promise}zE.updateContent=function(e){this.currentContent&&this.currentContent.hasClass("hide")||(this.currentContent&&this.currentContent.remove(),this.currentContent=l()(BE(e)),this.container.append(this.currentContent))},zE._processSearchResult=function(e){var t=e.split("\n"),n=d().filter(t,(function(e){return e.match(HE)})),i=d().map(n,(function(e){var t=e.match(HE),n=t[1],i=e.split("</codio-search-result>"),r=d().map(i,(function(e){return e.match(HE)?e.replace(HE,""):e})).join(""),a=r.indexOf(":")+1;return kZ.Z.pageInfoByName(n).then((function(e){if(e)return{file:n,line:t[2],text:r.substring(a,r.length),title:e.title,id:e.id}}))}));return Promise.all(i)},zE._bindResultClick=function(){this.currentContent.find(".book-search-result-item").click((function(){var e=l()(this).data("id");qE.goToSectionById({sectionId:e})}))},zE._detectSkipFileSearch=function(){var e=i.Z.currentProject.guides;return!!(e&&e.metadata&&e.metadata.sections)&&d().every(e.metadata.sections,(function(e){return e.content&&void 0!==e.content.markdown}))},zE.show=function(e){this.currentContent&&this.currentContent.removeClass("hide"),this.updateContent({inProgress:!0,text:e});var t,n=this;i.Z.currentProject.eduStartedAssignmentInfo?(void 0===this.skipFileSearch&&(this.skipFileSearch=this._detectSkipFileSearch()),t=function(e,t,n){var i=n?Promise.resolve([]):GE(e,t);return Promise.all([VE(t),i]).then((function(e){var t=(0,a.Z)(e,2),n=t[0],i=t[1];return n.concat(i)}))}(n,e,this.skipFileSearch)):t=GE(n,e),t.then((function(t){!function(e,t,n){d().isEmpty(n)?e.updateContent({noMatches:!0}):(e.updateContent({results:n,text:t}),e._bindResultClick())}(n,e,t)}))},zE.hide=function(){this.currentContent&&this.currentContent.addClass("hide")};const KE=WE;var YE=f().compile('<a class="add-chapter btn" href="javascript:void(0)">\n    <i class="ss-icon">books</i>\n    Add chapter\n</a>\n<a class="add-section btn" href="javascript:void(0)">\n    <i class="ss-icon">book</i>\n    Add section\n</a>\n<a class="add-page btn" href="javascript:void(0)">\n    <i class="ss-icon">textfile</i>\n    Add page\n</a>'),JE=y.Z.create(n(10742)),QE=function(e){this.content=l()(YE()),e.find("footer").html(this.content),this.container=e,this._bindEvents()},XE=QE.prototype;XE._bindEvents=function(){var e=this;y.Z.on(this.container,"click",".add-chapter",e._onAddChapter.bind(e)),y.Z.on(this.container,"click",".add-section",e._onAddSection.bind(e)),y.Z.on(this.container,"click",".add-page",e._onAddPage.bind(e))},XE._onAddChapter=function(){JE.bookAddChapter()},XE._onAddSection=function(){JE.bookAddSection()},XE._onAddPage=function(){(kE("guides-edit")||Promise.resolve()).then((function(){JE.bookAddPage({shouldEdit:!0,callback:function(e){JE.goToSectionById({sectionId:e.pageId})}})}))};const $E=QE;var eI=n(49067);var tI=y.Z.create(n(10742)),nI=f().compile('<div class="header-title">\n    <div class="left">\n        <h3 class="title guides-editor-nav-book-title">Unnamed book</h3>\n        <button class="btn guides-editor-nav-book-close" title="Close sections list" aria-label="Close sections list">\n            <i class="ss-icon">close</i>\n        </button>\n    </div>\n</div>\n{{#if isSearchAvailable}}\n<div class="toolbar">\n    <input aria-label="Search Content" type="text" name="search" id="codio-book-search" placeholder="Search Content" value="" class="input-xlarge" maxlength="200">\n    <i class="ss-icon book-search-close" aria-label="Remove search" title="Remove search">close</i>\n    {{#if isBookReader}}\n    <button class="btn guides-book-show-settings" title="Settings" aria-label="Settings">\n        <i class="ss-icon">settings</i>\n    </button>\n    {{/if}}\n</div>\n{{/if}}\n<div class="settings hide">\n    <form>\n        <label id="unit-structure-hidden-label">Hide non-assignment content</label>\n    <fieldset>\n        <label class="switch">\n            <span class="visuallyhidden">Hide non-assignment content</span>\n            <input\n              type="checkbox"\n              id="unit-structure-hidden"\n              {{#if isDisabledStructureHidden}}checked{{/if}}\n              {{#if disableSwitcher}}disabled{{/if}}\n              aria-describedby="unit-structure-hidden-label"\n            >\n            <span class="switch-label" aria-hidden="true"></span>\n            <span class="switch-handle" aria-hidden="true"></span>\n        </label>\n        <p class="help-block">Show content covered by assignment</p>\n    </fieldset>\n    </form>\n</div>\n<div class="actions {{#unless isEditor}}hide{{/unless}}">\n    <a class="add-chapter btn" href="javascript:void(0)">\n        <i class="ss-icon">books</i>\n        Add chapter\n    </a>\n    <a class="add-section btn" href="javascript:void(0)">\n        <i class="ss-icon">book</i>\n        Add section\n    </a>\n    <a class="add-page btn" href="javascript:void(0)">\n        <i class="ss-icon">textfile</i>\n        Add page\n    </a>\n</div>\n'),iI=function(e,t){var n=i.Z.currentProject;this.content=l()(nI({isBookReader:n.isBookReader,isDisabledStructureHidden:eI.ZP.isDisabledStructureHidden(),disableSwitcher:n.isBookReader&&!n.showAllBookPages,isSearchAvailable:!i.Z.currentProject.examMode.forwardOnlyNavigation,isEditor:t})),e.find("header").html(this.content),e.find(".book-search-close").hide(),this.container=e,this._bindEvents(t)},rI=iI.prototype;rI._bindEvents=function(e){var t=this;y.Z.on(this.container,"click",".guides-editor-toggle-nav-book",t._onToggle.bind(t)),y.Z.on(this.container,"change","#codio-book-search",t._onChange.bind(t)),y.Z.on(this.container,"keyup","#codio-book-search",t._onKeyUp.bind(t)),y.Z.on(this.container,"click",".book-search-close",t._onClearSearch.bind(t)),y.Z.on(this.container,"click",".guides-book-show-settings",t._onSettingsClick.bind(t)),y.Z.on(this.container,"click","#unit-structure-hidden",t._onToggleStructure.bind(t)),y.Z.on(this.container,"click",".guides-editor-nav-book-close",t._onToggle.bind(t)),e&&y.Z.on(this.container,"click",".title",t._onTitleEdit.bind(t))},rI._onSettingsClick=function(){this.container.find(".settings").toggleClass("hide")},rI._onToggleStructure=function(){var e=this.container.find("#unit-structure-hidden").prop("checked");eI.ZP.setDisabledStructureHidden(e),tI.bookRefreshTree()},rI._onTitleEdit=function(){y.Z.off(this.container,"click",".title");var e=this.container.find("h3.guides-editor-nav-book-title").text(),t=l()('<input id="book-title"/>');t.val(e),this.container.find("h3.guides-editor-nav-book-title").empty().append(t);var n=this;function i(e){var t=l()(e).val();n.setTitle(t),y.Z.on(n.container,"click",".title",n._onTitleEdit.bind(n))}this.container.find("#book-title").change((function(){var t=l()(this).val(),i=d().isEmpty(e)?e:t;n.setTitle(i),y.Z.on(n.container,"click",".title",n._onTitleEdit.bind(n)),tI.bookUpdateTitle(i)})).blur((function(){i(this)})).keyup((function(e){27===e.keyCode&&i(this)})).focus().select()},rI._onClearSearch=function(){this.clearEmitted=!0,this.container.find("#codio-book-search").val(""),this.container.find(".book-search-close").hide(),tI.bookClearSearch()},rI._onKeyUp=function(){this.clearEmitted=!1,this.container.find("#codio-book-search").val()?this.container.find(".book-search-close").show():this.container.find(".book-search-close").hide()},rI._onChange=function(){var e=this;d().delay((function(){if(!e.clearEmitted){var t=e.container.find("#codio-book-search").val();t?tI.bookSearch({text:t}):e._onClearSearch()}}),100)},rI._onToggle=function(){tI.closeBookNavigation()},rI.setTitle=function(e){this.container.find("h3.guides-editor-nav-book-title").text(e)};const aI=iI;var sI=n(44674),oI=f().compile('<div id="codio-book-navigation" tabindex="0" class="hide">\n    <header class="header"></header>\n    <div class="navigation-content"></div>\n</div>\n'),cI=y.Z.create(n(10742)),lI=null,uI=!0,dI=function(e){this.content=l()(oI()),this.tree=new LE(this.content.find(".navigation-content"),e),this.search=new KE(this.content.find(".navigation-content"),e),this.isEditor=e,e&&(this.actionBar=new $E(this.content)),this.toolBar=new aI(this.content,e),this._bindEvents()},pI=dI.prototype;function fI(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.tree.selected();return i&&e.tree.markToOpen(i),t(i).then((function(t){var i=e.tree.waitNodeAppear(t.id);return e._refreshTree().then((function(){return i})).then((function(i){if(n){var r=i.data.title&&d().trim(i.data.title),a=i.text;e.tree.tree.edit(i,r,(function(t,n,s){e.tree.selectNode(i.id);var o=t.text&&t.text.trim();r===o||s?e.tree.tree.rename_node(i,a):cI.bookRenameItem({id:t.id,title:o})}))}return t}))}))}pI._bindEvents=function(){var e=this,t=[],n=function(e){t.push(e)};n(y.Z.subscribe("guides:book:update_title",e._updateTitle.bind(e))),n(y.Z.subscribe("guides:book:add_chapter",e._addChapter.bind(e))),n(y.Z.subscribe("guides:book:add_section",e._addSection.bind(e))),n(y.Z.subscribe("guides:book:add_page",e._addPage.bind(e))),n(y.Z.subscribe("guides:book:remove_item",(function(t,n){e._removeItem(n.id,n.type,n.text)}))),n(y.Z.subscribe("guides:book:rename_item",(function(t,n){e._renameItem(n.id,n.title)}))),n(y.Z.subscribe("guides:book:moveItems",(function(t,n){e._moveItems(n.targetId,n.ids,n.position)}))),n(y.Z.subscribe("guides:book:search",(function(t,n){e._search(n.text)}))),n(y.Z.subscribe("guides:book:clear_search",(function(){e._toogleSearch()}))),n(y.Z.subscribe("guides:section:update",(function(t,n){kZ.Z.onSectionsUpdate(n.id),e._refreshTree()}))),n(y.Z.subscribe("guides:section:rendered",(function(t,n){e._activateItem(n.id,n.anchor)}))),n(y.Z.subscribe("guides:book:copy_items",(function(t,n){e._copyItems(n.id,n.ids)}))),n(y.Z.subscribe("guides:book:link_page",(function(t,n){e._linkPage(n.id,n.link)}))),n(y.Z.subscribe("guides:book:refresh_tree",(function(){Promise.all([Vk.ZP.getMetadata(),_Z.Z.getStep(),kZ.Z.load()]).then((function(t){var n=(0,a.Z)(t,3),i=n[0],r=n[1],s=n[2];r=r||0;var o=i.getSection(r),c=o&&kZ.Z.searchItem(o.id,s,!0);e._refreshTree(c?c.id:void 0)}))}))),n(y.Z.subscribe("guides:view:change",(function(){e._refreshTree()}))),this.unbind=t,lI&&e._activateItem(lI)},pI._updateTitle=function(e,t){kZ.Z.updateTitle(t)},pI._activateItem=function(e,t){var n=this;kZ.Z.nodeIdByPageIdAndAnchor(e,t).then((function(e){e&&n.tree.selectNode(e)}))},pI._unbindEvents=function(){d().each(this.unbind,(function(e){y.Z.unsubscribe(e)}))},pI._addChapter=function(){return fI(this,(function(e){return kZ.Z.addChapter("New Chapter",e)}))},pI._addSection=function(){return fI(this,(function(e){return kZ.Z.addSection("New Section",e)}))},pI._addPage=function(e,t){return fI(this,(function(e){var n=t&&t.options?t.options:{};return n.title=n.title||"New Page",kZ.Z.addPage(n,e)}),t&&t.shouldEdit).then((function(e){t&&t.callback&&t.callback(e)}))},pI._linkPage=function(e,t){var n=this;return kZ.Z.linkPage(e,t).then((function(){n._refreshTree(e)}))},pI._findFirstSibling=function(e,t){var n=this.tree.tree,i=n.get_parent(e.id),r=n.get_node(i);if(!r)return null;var a=r.children,s=a.indexOf(e.id);return a.length-1===s?this._findFirstSibling(r,t):this._findFirstNodeId(a[s+1],t)},pI._findFirstNodeId=function(e,t){var n=this.tree.tree.get_node(e);return t===e?this._findFirstSibling(n,t):n&&n.data&&n.data.pageId?n.id:d().isArray(n.children)&&n.state.opened&&n.children.length>0?this._findFirstNodeId(n.children[0],t):this._findFirstSibling(n,t)},pI._checkParentsExcluded=function(e,t){var n=this.tree.tree.get_parent(e);return n?n===t?null:this._checkParentsExcluded(n,t):e},pI._removeLastPageDialog=function(){var e=R.Z.showWarning({title:"Codio Guides must include at least one page",description:"If you wish to remove Guides from this assignment/project, close guides and manually delete the .guides folder in the file tree.",buttons:[{title:"Close Guides",type:1,onClick:function(){return cI.guidesClose(),e&&e.close()}},{title:"Cancel",onClick:function(){return e&&e.close()}}]})};function hI(e,t,n){var i=[];return d().each(e,(function(e){var r=e.pageId&&t.getSectionById(e.pageId);if(r||e.children){if(r&&r.teacherOnly&&!n)return!0;e.children&&(e.children=hI(e.children,t,n))}i.push(e)})),i}pI._removeItem=function(e,t,n){var i=this;kZ.Z.load().then((function(e){var r,a,s=e?kZ.Z.flatNodes(e.children):[],o=d().filter(s,(function(e){return e.pageId})),c=i.tree.allSelected(),l=d()(c).map((function(t){var n=(0,sI.d3)(t,e);return(n?kZ.Z.flatPages([n]):[]).map((function(e){return e.pageId}))})).flattenDeep().uniq().value();o.length>l.length?(c.length>1?(r="Delete multiple items",a="Are you sure you wish to delete items?"):(a='Are you sure you wish to delete the "'+n+'" '+t+"?",r="Delete the "+t+"?"),R.Z.showConfirm({title:r,description:a,onClose:function(e){e&&kZ.Z.removeItems(c).then((function(e){var t=function(e,t){var n=0;d().forEach(t,(function(t){var i=d().findIndex(e,(function(e){return e.id===t.id}));i>n&&(n=i)}));var i=d().keyBy(t,(function(e){return e.id})),r=null;return n+1<e.length&&(r=d().find(e,(function(e){return!!e.pageId&&!i[e.id]}),n+1)),r||(r=d().findLast(e,(function(e){return!!e.pageId&&!i[e.id]}),n)),r}(s,e),n=t?i.tree.tree.get_node(t.id):null;i._refreshTree(n)}))}})):i._removeLastPageDialog()}))},pI._renameItem=function(e,t){var n=this;kZ.Z.renameItem(e,t).then((function(){n._refreshTree(),cI.bookItemRenamed(e)})).catch((function(e){var t=e.message;return k.Z.error(t)}))},pI._moveItems=function(e,t,n){var i=this;kZ.Z.moveItems(e,t,n).then((function(){i._refreshTree()})).catch((function(e){var t=e.message;return k.Z.error(t)}))},pI._copyItems=function(e,t){var n=this;kZ.Z.copyItems(e,t).then((function(){n._refreshTree()})).catch((function(e){var t=e.message;return k.Z.error(t)}))},pI._search=function(e){this.tree.hide(),this.search.show(e)},pI._toogleSearch=function(){this.tree.show(),this.search.hide()},pI.activate=function(){var e=l()("div.ide");0===e.find("#codio-book-navigation").length&&e.append(this.content),this._refreshTree(),lI&&this._activateItem(lI)},pI.deactivate=function(){this.tree&&this.tree.deactivate(),this.content&&this.content.remove(),this._unbindEvents()},pI.isHidden=function(){return uI},pI.show=function(){l()("div.ide").find("#codio-book-navigation").removeClass("hide"),uI=!1,this.activate(),cI.panelSizeChange()},pI.hide=function(){l()("div.ide").find("#codio-book-navigation").addClass("hide"),uI=!0,cI.panelSizeChange()},pI._refreshTree=function(){var e=(0,r.Z)(o().mark((function e(t){var n,i,r,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.search.hide(),this.tree.show(),e.prev=2,e.next=5,Promise.all([kZ.Z.load(),Vk.ZP.getMetadata()]);case 5:n=e.sent,i=(0,a.Z)(n,2),r=i[0],s=i[1],c=r.children,this.isEditor||(c=hI(d().cloneDeep(c),s,Vn.ZP.showAsTeacher())),this.tree.setData(c,t),this.toolBar.setTitle(r.name),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(2),this.tree.setData([]),this.toolBar.setTitle("Book structure file broken."),k.Z.error(e.t0.message);case 20:case"end":return e.stop()}}),e,this,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),y.Z.subscribe("guides:section:rendered",(function(e,t){lI=t.id}));const mI=dI;var gI,vI=null,bI=null;function yI(){vI||(vI=new mI(gI)).activate()}function wI(){gI||_I()}function _I(e){e&&_Z.Z.setBookState(!1),vI&&vI.deactivate(),vI=null}function kI(){vI&&!vI.isHidden()&&vI.show()}function PI(){yI(),_Z.Z.setBookState(!0),vI.show()}function ZI(){vI&&vI.hide()}const xI=function(e){vI&&e!==gI&&(vI.deactivate(),vI=null),gI=e,yI(),_Z.Z.getBookState().then((function(e){e&&yI()})),bI||(bI=[y.Z.subscribe("guides:book:nav_open",PI),y.Z.subscribe("guides:book:nav_close",ZI),y.Z.subscribe("guides:editor:close",_I.bind(null,!1)),y.Z.subscribe("guides:player:close",wI.bind(null,!1)),y.Z.subscribe("guides:player:open",kI)])};var CI=null,SI=function e(t,n,i,r,a){if(!(this instanceof e))return new e(t,n,i,r,a);"guides-edit"===r?((a=a||{}).markdownEditor=e.markdownEditor,this.plugin=new wE(t,n,i,r,a),xI(!0)):(CI instanceof Lx?(this.plugin=CI,this.plugin.updateContainerAndOptions(t,a)):this.plugin=new Lx(t,n,i,r,a),xI(!1)),CI=this.plugin},EI=SI.prototype;d().each(["activate","afterActivate","beforeDeactivate","deactivate","beforeClose","close","focus","unfocus","getFile","switchType","fileDrop"],(function(e){EI[e]=function(){if(d().isFunction(this.plugin[e]))return this.plugin[e].apply(this.plugin,arguments)}}));const II=SI;var TI=n(44067),jI=n(81644),AI=y.Z.create({goToSection:"guides:section:goto_id",editAssessment:"guides:assessment:edit"});window.codioIDE=window.codioIDE||{},window.codioIDE.guides={getMetadata:function(){if(!i.Z.currentProject)throw new Error("project not found");return(0,jI.sd)()},getAssessments:function(){if(!i.Z.currentProject)throw new Error("project not found");return xh.ZP.assessments.getAssessments()},getBookStructure:function(){if(!i.Z.currentProject)throw new Error("project not found");return TI.Z.getBookStructure()},findAssessmentsIds:QC.ZP.findAssessmentsIds,openEditor:Vn.ZP.edit,isEditorOpen:Vn.ZP.isEditorOpen,goToSection:function(e){AI.goToSection(e)},openAssessmentEditor:function(e){AI.editAssessment(e)}},i.Z.register({info:qk,settings:Hk,hotkeys:Wk,get:function(){return Vn.ZP.getInitPromise().then((function(){return i.Z.get("view-markdown-code")().then((function(e){return II.markdownEditor=e,II}))}))}});const OI=JSON.parse('{"name":"qr-code-preview","description":"QR Code for Preview URL","codio":{"global":true,"noFile":true,"title":"QR Code for Preview URL","urls":"qr-code-preview"}}');n(80801);var DI=f().compile('<div id="qr-code-preview">\r\n\r\n    <h2>QR Code for Preview URL <small>{{project.name}}</small></h2>\r\n\r\n    <div class="qrCodeCanvas"></div>\r\n\r\n</div>\r\n'),NI=function e(t){if(!(this instanceof e))return new e(t);this.container=t,this.container.append(l()(DI({project:i.Z.currentProject},{allowProtoMethodsByDefault:!0,allowProtoPropertiesByDefault:!0}))),this.handler=y.Z.subscribe("project:rename",(function(){t.find("#qr-code-preview > h2 > small").html(i.Z.currentProject.name)}));var n="http://"+i.Z.currentProject.backendSubDomain+"."+Qi.Z.get("boxDomain");this.container.find(".qrCodeCanvas").empty().qrcode(n)};NI.prototype.close=function(){this.container&&this.container.empty(),this.handler&&y.Z.unsubscribe(this.handler)};const MI=NI;i.Z.register({info:OI,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MI);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),y.Z.subscribe("command:project:qr-code-preview",(function(){i.Z.ide.open("qr-code-preview")}));const FI=JSON.parse('{"name":"guides-deprecated","description":"Guides deprecation message","codio":{"urls":"tour","global":true}}');var RI=f().compile('<div>\n    <p>Annotations are not used anymore.</p>\n    <p>Please use guides.</p>\n    <p>\n        <a target="_blank" href="">Annotations to Guides migration</a>\n    </p>\n</div>');function LI(){var e=l()(RI());(0,R.Z)({title:"Annotations are deprecated",content:e,buttons:R.Z.MB_OK})}y.Z.subscribe("file:open:annotations.md",LI);const UI=LI;i.Z.register({info:FI,settings:{},get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UI);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),n(78705);var BI={};BI.info=n(73151),BI.settings={},BI.hotkeys={},i.Z.register(BI);const qI=JSON.parse('{"name":"codio-iframe-sample","description":"Iframe sample app","codio":{"global":true,"noFile":true,"title":"IFRAME Sample","urls":"iframe-sample"}}');window.addEventListener("message",WI,!1);var HI=function(e,t){var n=this._iframe=e;this._id=t,n.attr("data-client-id",t),n.data("client-instance",this),this._ready=m.ZP.promise.deferred(),this._readyPromise=this._ready.promise,this._isLoaded=!1,this._events={},this._dfd={},this._saveQueue=[]};function WI(e){try{var t=JSON.parse(e.data);if("iframe-extension"!==t.type)return;var n=t.codioId,i=l()('iframe[data-client-id="'+n+'"]').data("client-instance");d().isUndefined(i)||function(e,t){e.onMessage(t)}(i,t)}catch(e){}}var zI=HI.prototype;function GI(e,t,n,i){e.send("callback",{error:n,opId:t,msg:i})}function VI(e,t,n){e.then((function(e){GI(t,n,!1,e)})).catch((function(e){GI(t,n,!0,e)}))}function KI(){return KI=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.Z.currentProject){e.next=3;break}throw new Error("No Project Opened");case 3:if(t=(0,m.qg)(t),n.exists(t)){e.next=6;break}throw new Error("File does not exist");case 6:return e.abrupt("return",n.file(t).then((function(e){return{content:e.content,filename:t}})));case 7:case"end":return e.stop()}}),e)}))),KI.apply(this,arguments)}function YI(){return(YI=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.Z.currentProject){e.next=3;break}throw new Error("No Project Opened");case 3:if(t=(0,m.qg)(t),n.exists(t)){e.next=6;break}throw new Error("File does not exist");case 6:return e.abrupt("return",n.getBinaryFileContent(t).then((function(e){return{content:m.ZP.arrayBufferToBase64(e),filename:t}})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JI(){return(JI=(0,r.Z)(o().mark((function e(t){var n,r,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.Z.currentProject){e.next=3;break}throw new Error("No Project Opened");case 3:if(t=(0,m.qg)(t),n.exists(t)){e.next=6;break}throw new Error("File does not exist");case 6:return r=n.backendSubDomain,a=Qi.Z.get("boxDomain"),s="https://".concat(r,".").concat(a,"/").concat(t),e.abrupt("return",{filePath:s,filename:t});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function QI(){return(QI=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.Z.currentProject){e.next=3;break}throw new Error("No Project Opened");case 3:if(t=(0,m.qg)(t),n.exists(t)){e.next=6;break}throw new Error("File does not exist");case 6:return e.abrupt("return",n.deleteItems([t]));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XI(e){return $I.apply(this,arguments)}function $I(){return $I=(0,r.Z)(o().mark((function e(t){var n,r,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.Z.currentProject){e.next=3;break}throw new Error("No Project Opened");case 3:if(t=(0,m.qg)(t),!n.exists(t)){e.next=6;break}throw new Error("File exists");case 6:if(r=m.ZP.path.parse(t),a=r.name,!((s=r.dir).length>0)||n.exists(s)){e.next=12;break}return e.next=12,eT(s);case 12:return e.abrupt("return",n.createFile(a,s));case 13:case"end":return e.stop()}}),e)}))),$I.apply(this,arguments)}function eT(e){return tT.apply(this,arguments)}function tT(){return tT=(0,r.Z)(o().mark((function e(t){var n,r,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.ZP.path.parse(t),r=n.name,a=i.Z.currentProject){e.next=5;break}throw new Error("No Project Opened");case 5:if(t=(0,m.qg)(t),!a.exists(t)){e.next=8;break}throw new Error("File exists");case 8:if(!((s=n.dir).length>0)||a.exists(s)){e.next=12;break}return e.next=12,eT(s);case 12:return e.abrupt("return",a.createFolder(r,n.dir));case 13:case"end":return e.stop()}}),e)}))),tT.apply(this,arguments)}function nT(){return nT=(0,r.Z)(o().mark((function e(t,n){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.Z.currentProject){e.next=3;break}throw new Error("No Project Opened");case 3:return t=(0,m.qg)(t),a=Promise.resolve(),r.exists(t)||(a=XI(t)),e.abrupt("return",a.then((function(){return r.file(t)})).then((function(e){if(e.content===n)return Promise.reject(new Error("File content does not changed"));e.content=n})).then(m.ZP.promise.delay(50)).then((function(){return M.Z.saveAllAndWait()})));case 7:case"end":return e.stop()}}),e)}))),nT.apply(this,arguments)}function iT(e,t,n){return fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],t,{type:n})}))}function rT(){return rT=(0,r.Z)(o().mark((function e(t,n){var a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.Z.currentProject){e.next=3;break}throw new Error("No Project Opened");case 3:return t=(0,m.qg)(t),s=Promise.resolve(),a.exists(t)||(s=XI(t)),e.abrupt("return",s.then((function(){var e="scratch-".concat(m.ZP.GUID(),".tmpfile");return iT("data:text/plain;base64,"+n,e,"text/plain").then(function(){var n=(0,r.Z)(o().mark((function n(r){var a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,nr("upload",r,e,(function(){}));case 2:return a=n.sent,n.abrupt("return",a.promise.then((function(e){return i.Z.currentProject.uploadFromS3File(t,e.Bucket,e.Key)})));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})));case 7:case"end":return e.stop()}}),e)}))),rT.apply(this,arguments)}function aT(e,t){var n=t.args,i=t.opId;VI(function(e,t){return nT.apply(this,arguments)}(n.file,n.content),e,i)}function sT(e,t){var n=t.args,i=t.opId;VI(function(e){return KI.apply(this,arguments)}(n),e,i)}function oT(e){if(!e._activeSave){var t=e._saveQueue.length-1;if(e._saveQueue.length>0){var n=e._saveQueue.pop(),i=n.args,r=n.opId,a=function(e,t){return rT.apply(this,arguments)}(i.path,i.content);e._activeSave=a,a.finally((function(){var n=d().take(e._saveQueue,t);e._saveQueue=d().slice(e._saveQueue,t),d().forEach(n,(function(t){var n=t.opId;VI(Promise.resolve(),e,n)})),VI(a,e,r),delete e._activeSave,oT(e)}))}}}function cT(e,t){var n=t.args,i=t.opId;VI(function(e){return YI.apply(this,arguments)}(n),e,i)}function lT(e,t){var n=t.args,i=t.opId;VI(function(e){return JI.apply(this,arguments)}(n),e,i)}function uT(e,t){var n=t.args,i=t.opId;VI(function(e){return QI.apply(this,arguments)}(n),e,i)}function dT(e,t,n){e.send("event",{eventId:t,msg:n})}function pT(e,t,n,i){var r=y.Z.subscribe(t,i);e._events[n]=r}Object.defineProperties(zI,{id:{get:function(){return this._id}},iframe:{get:function(){return this._iframe}},ready:{get:function(){return this._readyPromise}},filename:{get:function(){return this._filename},set:function(e){this._filename=e,this.send("setFileName",e)}}}),zI.loadComplete=function(){this._isLoaded||(this._isLoaded=!0,this._ready.resolve())},zI.send=function(e,t){!function(e,t){e._readyPromise.then((function(){var n=JSON.stringify(t);e._iframe[0].contentWindow.postMessage(n,"*")}))}(this,{action:e,args:t})},zI.action=function(e,t){var n=this,i=m.ZP.GUID();this.send("action",{action:e,eventId:i,msg:t}),this._dfd[i]=m.ZP.promise.deferred();var r=2e4;return"callSave"===e&&(r=3e5),setTimeout((function(){n._dfd[i].reject(new Error("action timeout exception "+e))}),r),this._dfd[i].promise},zI.hasChanges=function(){return this.action("hasChanges")},zI.callSave=function(){var e=this;return this.action("callSave").then((function(){if(e._activeSave)return e._activeSave}))},zI.onMessage=function(e){var t=e.args;switch(e.action){case"getFile":sT(this,t);break;case"saveFile":aT(this,t);break;case"subscribeFileChange":!function(e,t){var n=t.filename,i=t.eventId;pT(e,"file:change:"+n,i,(function(t,r){dT(e,i,{content:r,filename:n})}))}(this,t);break;case"unsubscribeFileChange":case"unsubscribeProjectUpdate":!function(e,t){y.Z.unsubscribe(e._events[t]),delete e._events[t]}(this,t);break;case"subscribeProjectUpdate":!function(e,t){var n=t.eventId;pT(e,"project:permissionsUpdated:#projectId",n,(function(){var t=i.Z.currentProject.readOnly;dT(e,n,{readOnly:t})}))}(this,t);break;case"createFile":!function(e,t){var n=t.args,i=t.opId;VI(XI(n),e,i)}(this,t);break;case"deleteFile":uT(this,t);break;case"loaded":!function(e){e.loadComplete(),e.send("loaded",e.filename),e.send("setFileOptions",{readOnly:i.Z.currentProject.readOnly})}(this);break;case"saveBinaryFile":!function(e,t){e._saveQueue.push(t),oT(e)}(this,t);break;case"getBinaryFile":cT(this,t);break;case"getBinaryFilePath":lT(this,t);break;case"action":!function(e,t){var n=t.eventId,i=e._dfd[n];i&&i.resolve(t.result)}(this,t)}},zI.close=function(){y.Z.unsubscribe(d().values(this._events))};const fT=HI;var hT=function(){var e=l()('<div class="iframe-extension-containers"></div>');return l()("body").append(e),hT=function(){return e},e};function mT(e,t){var n=this;this._container=e,this._id=m.ZP.GUID(),this._ready=m.ZP.promise.deferred(),this._readyPromise=this._ready.promise;var i=function(e,t,n,i){var r=l()('<iframe title="Content Plugin">'),a="?codioId="+t;e.indexOf("?")>-1&&(a=a.replace("?","&"));var s=e.split("#"),o=s[0]+a;return s[1]&&(o+="#"+s[1]),r.addClass("iframe-extension-iframe"),r.attr("allow","camera *;microphone *"),hT().append(r),n.showFProgress("Loading file..."),m.ZP.waitAddress(s[0]).then((function(){r[0].addEventListener("load",(function(){n.hideFProgress(),i()})),r.attr("src",o)})),r}(t,this.id,e,(function(){n._ready.resolve()}));this._iframe=i,i.data("instance",this),this._client=new fT(i,this.id),this._hidden=!0,this.refresh()}var gT=mT.prototype;Object.defineProperties(gT,{container:{get:function(){return this._container}},id:{get:function(){return this._id}},hidden:{get:function(){return this._hidden}},filename:{get:function(){return this._filename},set:function(e){this._filename=e,this._client.filename=e}},ready:{get:function(){return this._readyPromise}}}),gT.hide=function(){this.hidden||(this._iframe.removeClass("iframe-extension-iframe--visible"),this._iframe.css({top:"-1000000px",left:"-1000000px"})),this._hidden=!0},gT.show=function(){var e=this;this.hidden&&this.ready.then((function(){e._iframe.addClass("iframe-extension-iframe--visible"),e._hidden=!1,e.refresh()}))},gT.appendTo=function(e){this._container=e,this.refresh()},gT.refresh=function(){if(!this.hidden){var e=this._container[0].getBoundingClientRect(),t={top:e.top,left:e.left,width:e.right-e.left,height:e.bottom-e.top};this._iframe.css({top:t.top,left:t.left,width:t.width,height:t.height})}},gT.close=function(){this._client.close(),this._iframe.remove()},gT.hasChanges=function(){return this._client.hasChanges()},gT.callSave=function(){var e=this;return this._container.showFProgress("Saving and closing"),this.hide(),this._client.callSave().finally((function(){e._container.hideFProgress(),e.show()}))},mT.get=function(e){return l()("#"+e).data("instance")},mT.find=function(e){return e.find("iframe.iframe-extension").data("instance")};const vT=mT;var bT=function e(t,n,i,r,a){if(!(this instanceof e))return new e(t,n,i,r,a);this._options=a||{},this._tab=a.tab,this._isFile=a.isFile,this._contentLocation=a.content,this.container=l()('<div class="iframe-extension-helper">'),this.filename=n,t.append(this.container),this._iframe=new vT(this.container,this._contentLocation),this._iframe.filename=this.filename,function(e){e._eventHandlers=[];var t=e._eventHandlers.push.bind(e._eventHandlers);e._isFile||t(y.Z.subscribe("ide:fullscreen:#mode",wT.bind(null,e)));t(y.Z.subscribe("tab:activated:preview",yT.bind(null,e))),t(y.Z.subscribe("panel:size:change",yT.bind(null,e))),t(y.Z.subscribe("command:layout:save",yT.bind(null,e))),t(y.Z.subscribe("command:education:save_before_completed",_T.bind(null,e)))}(this)};function yT(e){e.refresh()}function wT(e,t,n){"enter"===t.mode?(n!==e&&e.hide(),e.refresh()):e._iframe.show()}function _T(e){e.hasChanges().then((function(t){t&&e.callSave()}))}var kT=bT.prototype;kT.enterFullscreen=function(){this._iframe.refresh()},kT.leaveFullscreen=function(){this._iframe.show(),this.refresh()},kT.hide=function(){this._iframe.hide()},kT.setTab=function(e){this.tab=e},kT.activate=function(){},kT.refresh=function(){this._iframe&&this._iframe.refresh()},kT.afterActivate=function(){this._iframe&&this._iframe.show()},kT.deactivate=function(){this._iframe&&this._iframe.hide()},kT.close=function(){y.Z.unsubscribe(this._eventHandlers),this._iframe&&(this._iframe.close(),this._iframe=null),this.container&&this.container.remove()},kT.destroyIframe=function(){this._iframe&&(this._iframe.close(),this._iframe=null)},kT.recreateIframe=function(){this._iframe=new vT(this.container,this._contentLocation),this._iframe.filename=this.filename,this.afterActivate()},kT.hasChanges=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._iframe){e.next=2;break}return e.abrupt("return",this._iframe.hasChanges());case 2:return e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e,this)}))),kT.callSave=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._iframe){e.next=2;break}return e.abrupt("return",this._iframe.callSave());case 2:case"end":return e.stop()}}),e,this)})));const PT=bT;var ZT=function e(t,n,i,r,a){if(!(this instanceof e))return new e(t,n,i,r,a);(a=a||{}).content="//codio.test/ext/iframe/sample/static/test.html",e._sc.constructor.call(this,t,n,i,r,a)};(0,n(20294).ED)(ZT,PT);const xT=ZT;i.Z.register({info:qI,get:function(){return xT}});const CT=JSON.parse('{"name":"Codio Crunch","description":"Codio Crunch","codio":{"fileExt":["crunch"],"view":"code"}}');var ST=function e(t){if(!(this instanceof e))return new e(t);(t=t||{}).content=Qi.Z.get("crunchContentUrl");var n=t.container,i=t.filename,r=t.view,a=t.ext;t.isFile=!0,e._sc.constructor.call(this,n,i,r,a,t)};(0,n(20294).ED)(ST,PT);const ET=ST;i.Z.register({info:CT,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ET);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const IT=JSON.parse('{"name":"Codio Flode","description":"Codio Flode","codio":{"fileExt":["flode"],"view":"code"}}');var TT=function e(t){if(!(this instanceof e))return new e(t);(t=t||{}).content=Qi.Z.get("flodeContentUrl");var n=t.container,i=t.filename,r=t.view,a=t.ext;t.isFile=!0,e._sc.constructor.call(this,n,i,r,a,t)};(0,n(20294).ED)(TT,PT);const jT=TT;i.Z.register({info:IT,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jT);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const AT=JSON.parse('{"name":"Codio Blockly","description":"Codio Blockly","codio":{"fileExt":["blockly"],"view":"code"}}');var OT=function e(t){if(!(this instanceof e))return new e(t);(t=t||{}).content=Qi.Z.get("blocklyContentUrl");var n=t.container,i=t.filename,r=t.view,a=t.ext;t.isFile=!0,e._sc.constructor.call(this,n,i,r,a,t)};(0,n(20294).ED)(OT,PT);const DT=OT;i.Z.register({info:AT,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",DT);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const NT=JSON.parse('{"name":"Codio Flow","description":"Codio Blockly","codio":{"fileExt":["flow"],"view":"code"}}');var MT=function e(t){if(!(this instanceof e))return new e(t);(t=t||{}).content=Qi.Z.get("flowContentUrl");var n=t.container,i=t.filename,r=t.view,a=t.ext;t.isFile=!0,e._sc.constructor.call(this,n,i,r,a,t)};(0,n(20294).ED)(MT,PT);const FT=MT;i.Z.register({info:NT,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",FT);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const RT=JSON.parse('{"name":"Codio Lexikon","description":"Codio Lexikon","codio":{"global":true,"title":{"targets":"Lexikon"},"urls":"lexikon"}}'),LT=JSON.parse('{"key_lexikon":{"key":{"mac":"Cmd+Alt+L","win":"Ctrl+Alt+L"},"desc":"Open Lexikon"}}');var UT=n(20294).ED,BT=n(44442).A,qT=function e(t,n,i,r,a){if(!(this instanceof e))return new e(t,n,i,r,a);var s="index.html";a.topic&&a.topic.length>0&&(s+="?topic="+a.topic),s=encodeURI(s),a.content=Qi.Z.get("lexiconContentUrl")+s,e._sc.constructor.call(this,t,n,i,r,a)};UT(qT,PT),y.Z.subscribe("command:Codio Lexikon:key_lexikon",(function(){BT.execute("file","open",{ext:"lexikon",filename:"",title:"Lexikon"})})),y.Z.subscribe("Codio Lexikon:open_lexikon:#topic",(function(e){BT.execute("file","open",{ext:"lexikon",title:"Lexikon",filename:"",topic:e.topic})}));const HT=qT;i.Z.register({info:RT,hotkeys:LT,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HT);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const WT=JSON.parse('{"name":"Codio Scratch","description":"Codio Scratch","codio":{"fileExt":["sb3"],"view":"code","sync":false}}');var zT=function e(t){if(!(this instanceof e))return new e(t);t=t||{};var n=Qi.Z.get("scratchContentUrl"),r=new URL(window.location.protocol+n),a=Qi.Z.get("scratchBackpackUrl"),s=(0,Gt.p)(),o=i.Z.currentUser.getAccountUid(),c=r.searchParams;c.set("backpack_host",a),c.set("username",o),c.set("token",s),r.search=c.toString(),t.content=r.toString();var l=t.container,u=t.filename,d=t.view,p=t.ext;t.isFile=!0,e._sc.constructor.call(this,l,u,d,p,t)};(0,m.ED)(zT,PT),zT.prototype.beforeClose=function(){var e=this,t=m.ZP.promise.deferred();return i.Z.currentProject.readOnly?t.resolve():this.hasChanges().then((function(n){return n?function(){var e=m.ZP.promise.deferred(),t=new R.Z({title:"Warning",content:l()("<h4>You have unsaved changes. Do you wish to save these?</h4>"),icon:"alert",width:500,buttons:[{title:"Yes",type:1,onClick:function(){return t.close(R.Z.IDOK)}},{title:"No",onClick:function(){return t.close(R.Z.IDNO)}}],onClose:function(t){setTimeout((function(){var n=null;switch(t){case R.Z.IDOK:n=!0;break;case R.Z.IDNO:n=!1;break;case R.Z.IDCANCEL:n=null}e.resolve(n)}),100)}});return e.promise}().then((function(n){switch(n){case!0:return e.callSave().then(t.resolve);case!1:return t.resolve();case null:var i=new Error("show unsaved cancelled");return i.ignore=!0,t.reject(i)}})):t.resolve()})).catch((function(e){e&&e.message&&k.Z.error(e.message),t.reject(e)})),t.promise};const GT=zT;i.Z.register({info:WT,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",GT);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const VT=JSON.parse('{"name":"Codio Jeroo","description":"Codio Jeroo","codio":{"fileExt":["jev","jsc"],"view":"code","sync":false}}');var KT=function e(t){if(!(this instanceof e))return new e(t);var n={domain:i.Z.currentProject.backendSubDomain,boxDomain:Qi.Z.get("boxDomain")};(t=t||{}).content="https://".concat(n.domain,"-7501.").concat(n.boxDomain,"/?fileName=").concat(t.filename);var r=t.container,a=t.filename,s=t.view,o=t.ext;t.isFile=!0,e._sc.constructor.call(this,r,a,s,o,t)};(0,m.ED)(KT,PT);const YT=KT;i.Z.register({info:VT,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",YT);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const JT=JSON.parse('{"name":"Codio Jupyter","description":"Codio Juyter","codio":{"fileExt":["ipynb"],"view":"code","sync":false}}');var QT=function e(t){if(!(this instanceof e))return new e(t);var n={domain:i.Z.currentProject.backendSubDomain,boxDomain:Qi.Z.get("boxDomain")};(t=t||{}).content="https://".concat(n.domain,"-3000.").concat(n.boxDomain,"/notebooks/").concat(t.filename);var r=t.container,a=t.filename,s=t.view,o=t.ext;t.isFile=!0,e._sc.constructor.call(this,r,a,s,o,t),this.bindEvents()};(0,m.ED)(QT,PT);var XT=QT.prototype;XT.showLoader=function(){this.container.showFProgress("Loading file..."),this.destroyIframe()},XT.hideLoader=function(){this.container.hideFProgress(),this.recreateIframe()},XT.bindEvents=function(){var e=this._eventHandlers.push.bind(this._eventHandlers);e(y.Z.subscribe("command:education:mark_as_uncompleted",this.showLoader.bind(this))),e(y.Z.subscribe("command:education:mark_as_completed",this.showLoader.bind(this))),e(y.Z.subscribe("education:set_completed",this.hideLoader.bind(this)))};const $T=QT;i.Z.register({info:JT,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$T);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const ej=JSON.parse('{"name":"Codio Pencilcode","description":"Codio Pencilcode","codio":{"fileExt":["pencilcode"],"view":"code","sync":false}}');var tj=m.ZP.path,nj=function e(t){if(!(this instanceof e))return new e(t);var n={domain:i.Z.currentProject.backendSubDomain,boxDomain:Qi.Z.get("boxDomain")};t=t||{};var r=tj.getFileName(t.filename);t.content="https://".concat(n.domain,"-8008.").concat(n.boxDomain,"/edit/").concat(r);var a=t.container,s=t.filename,o=t.view,c=t.ext;t.isFile=!0,e._sc.constructor.call(this,a,s,o,c,t)};(0,m.ED)(nj,PT);const ij=nj;i.Z.register({info:ej,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ij);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const rj=JSON.parse('{"name":"Codio Pyret","description":"Codio Pyret","codio":{"fileExt":["pyret","arr"],"view":"code","sync":false}}');var aj=function e(t){if(!(this instanceof e))return new e(t);(t=t||{}).content=Qi.Z.get("pyretContentUrl");var n=t.container,i=t.filename,r=t.view,a=t.ext;t.isFile=!0,e._sc.constructor.call(this,n,i,r,a,t)};(0,m.ED)(aj,PT),aj.prototype.beforeClose=function(){var e=this,t=m.ZP.promise.deferred();return i.Z.currentProject.readOnly?t.resolve():this.hasChanges().then((function(n){return n?function(){var e=m.ZP.promise.deferred(),t=new R.Z({title:"Warning",content:l()("<h4>You have unsaved changes. Do you wish to save these?</h4>"),icon:"alert",width:500,buttons:[{title:"Yes",type:1,onClick:function(){return t.close(R.Z.IDOK)}},{title:"No",onClick:function(){return t.close(R.Z.IDNO)}}],onClose:function(t){setTimeout((function(){var n=null;switch(t){case R.Z.IDOK:n=!0;break;case R.Z.IDNO:n=!1;break;case R.Z.IDCANCEL:n=null}e.resolve(n)}),100)}});return e.promise}().then((function(n){switch(n){case!0:return e.callSave().then(t.resolve);case!1:return t.resolve();case null:var i=new Error("show unsaved cancelled");return i.ignore=!0,t.reject(i)}})):t.resolve()})).catch(t.reject),t.promise};const sj=aj;i.Z.register({info:rj,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sj);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});const oj=JSON.parse('{"name":"PDF","description":"pdf","codio":{"fileExt":["pdf"],"view":"code","sync":false}}');var cj=function e(t){if(!(this instanceof e))return new e(t);var n=i.Z.currentProject.backendSubDomain+"."+Qi.Z.get("boxDomain");(t=t||{}).content="https://".concat(n,"/").concat(t.filename);var r=t.container,a=t.filename,s=t.view,o=t.ext;t.isFile=!0,e._sc.constructor.call(this,r,a,s,o,t)};(0,m.ED)(cj,PT);const lj=cj;i.Z.register({info:oj,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lj);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),y.Z.subscribe("app:timeChunkMsSpent",(function(e,t){var n=i.Z.currentProject;if(n&&(!i.Z.currentUser||!i.Z.currentUser.incognitoLogin)){var r=n.writableCopy,a=n.isOpenedByTeacher;!n.isUserAssignee||a||r||b.ZP.CourseManager.incrementTimeSpent(n.guid,t).catch((function(){b.ZP.CourseManager.incrementTimeSpent(n.guid,t).catch((function(e){k.Z.error(e.message)}))}))}})),y.Z.subscribe("app:timeChunkMsSpent",(function(e,t){if(!i.Z.currentUser||!i.Z.currentUser.incognitoLogin){var n=i.Z.currentProject;n&&b.ZP.ProjectManager.incrementTimeSpent(n.guid,t).catch((function(){b.ZP.ProjectManager.incrementTimeSpent(n.guid,t).catch((function(e){k.Z.error(e.message)}))}))}}));var uj="codio-migrated-to-lxc",dj="info-shown",pj="https://codio.com/home/stacks/63e76d5d-0791-4183-b1f4-34bf2e59e81b/?tab=details",fj="https://docs.codio.com/common/develop/ide/boxes/installsw/install-software.html#installing-software-packages";y.Z.subscribe("project:open:#projectId",(function(){var e=i.Z.currentProject,t=e.getPluginData(uj)[dj];if(e&&e.migrated&&!t){var n="/"+e.path+"/install-software",r="/"+e.path+"/project-settings#tab-stack";R.Z.showPrompt({buttons:R.Z.IDYES,icon:"alert",title:"Generation 1 stacks are no longer available",width:540,content:["Your archived project has been automatically migrated to the Generation 2 ",'<a target="_blank" href="',pj,'">Empty Stack</a>.<br/>',"You can change the stack used with this project ","(go to Project>Settings>",'<a href="',r,'">Stack Settings</a>)'," or ",'<a href="',n,'">install components</a> as required ','<a target="_blank" href="',fj,'">(see Installing Software)</a>.'].join(""),onClose:function(t){t&&e.setPluginData(uj,dj,!0)}})}}));const hj=JSON.parse('{"name":"view-pdf","description":"Pdf viewer","codio":{"fileExt":["pdf"],"view":"none","no-auto-loading":true,"close-extension-ide-tab":true}}'),mj={};function gj(e){var t=e.filename,n="//"+i.Z.currentProject.backendDomain+"/"+t;window.open(n)}gj.info=hj,gj.settings=mj;const vj=gj;var bj={};bj.info=hj,bj.settings=mj,bj.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vj);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(bj);const yj=JSON.parse('{"name":"view-jsonc","description":"json with comments code editor","codio":{"view":"code","fileExt":["codio-menu","codio","codio-jupyter"]}}');var wj={};wj.info=yj,wj.get=function(){return i.Z.loadModule((function(e){Promise.all([n.e(2988),n.e(4943),n.e(131)]).then(function(){var t=[n(40131)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.Z.register(wj);const _j=JSON.parse('{"name":"view-html-code","description":"html code editor","codio":{"view":"code","fileExt":["html","htm","shtml","xhtml","mdoc","jsp","asp","aspx","jshtm"]}}');var kj={};kj.info=_j,kj.get=function(){return i.Z.loadModule((function(e){Promise.all([n.e(2988),n.e(4943),n.e(5710)]).then(function(){var t=[n(15710)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.Z.register(kj);const Pj=JSON.parse('{"name":"view-txt-code","description":"txt code editor","codio":{"view":"code","fileExt":["txt"]}}');var Zj={};Zj.info=Pj,Zj.get=function(){return i.Z.loadModule((function(e){Promise.all([n.e(2988),n.e(4943),n.e(2913)]).then(function(){var t=[n(92913)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.Z.register(Zj);var xj=location.hostname,Cj="codio.com"===xj||"codio.co.uk"===xj?"ee8711023afa04b80a6b921ddb3939c1171e0f62":"hzz6oifn";function Sj(e){d().isFunction(window.Intercom)&&b.ZP.OrganizationManager.getMyOrganizations().then((function(e){if(!i.Z.currentUser.incognitoLogin){var t=i.Z.currentUser,n=t.get("details"),r=n.get("created_at");r=r?Math.round(r/1e3):void 0,r=isNaN(r)?void 0:r;var a=d().map(e,(function(e){var t=e.createdTimestampMs;return t=t?Math.round(t/1e3):void 0,t=isNaN(t)?void 0:t,{company_id:e.id,name:e.details.name,created_at:t}})),s={app_id:Cj,email:n.get("email"),user_id:t.account,username:t.name(),name:n.getName(),is_suspended:t.isSuspended(),is_staff:t.isStaff(),created_at:r,project_count:t.projectCount,referrer:n.get("referrer"),companies:a};return console.debug("INTERCOM",s),s}})).then((function(t){t&&window.Intercom(e,t)})).catch((function(e){var t=e.message;k.Z.error(t)}))}y.Z.subscribe("app:started",(function(){Sj("boot")})),y.Z.subscribe("route:changed",(function(){i.Z.currentUser.isAnonymous()||i.Z.currentUser.incognitoLogin?d().isFunction(window.Intercom)&&window.Intercom("shutdown"):Sj("update")}));const Ej={show:function(){if(window.Intercom)return window.Intercom("show"),!0}};var Ij=f().compile('<div class="support-dlg-content">\n  {{#each urls}}\n  <div class="support-dlg-option-container">\n    <input id="external_support_{{@index}}" type="radio" name="support_option" value="{{url}}" {{#if isDefault}}checked{{/if}}>\n    <label for="external_support_{{@index}}">{{text}}</label>\n  </div>\n  {{/each}}\n  <div class="support-dlg-option-container">\n    <input id="codio_support" type="radio" name="support_option" value="codio">\n    <label for="codio_support">To report a problem trying to access the Codio platform</label>\n  </div>\n</div>\n'),Tj=m.ZP.promise.deferred();function jj(){var e=i.Z.currentProject;e&&e.eduStartedAssignmentInfo&&!e.isOpenedByTeacher?Tj.promise.then((function(e){if(d().isEmpty(e))Aj();else var t=l()(Ij({urls:e})),n=new R.Z({title:"You want to contact Support",content:t,buttons:R.Z.MB_OKCANCEL,width:600,onClose:function(e){if(e===R.Z.IDOK){var t=n.content().find('[name="support_option"]:checked').val();"codio"===t?Aj():window.open(t,"_blank")}}})})):Aj()}function Aj(){Ej.show()||window.open("mailto:help@codio.com","_blank")}var Oj=function(){var e=i.Z.currentProject;if(e&&e.eduStartedAssignmentInfo&&!e.isOpenedByTeacher){var t=e.course.details.contactUrlsList||[];t[e.course.details.defaultContactUrlIndex]&&(t[e.course.details.defaultContactUrlIndex].isDefault=!0),d().isEmpty(t)?b.ZP.OrganizationManager.get(e.course.organizationId).then((function(e){return Tj.resolve(e.details.contactUrls||[])})).catch((function(e){return Tj.reject(e)})):Tj.resolve(t)}return Tj.promise};function Dj(){return(Dj=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oj();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}y.Z.subscribe("project:open",d().defer.bind(d(),(function(){return Dj.apply(this,arguments)}))),y.Z.subscribe("project:close",(function(){Tj=m.ZP.promise.deferred()})),y.Z.subscribe("command:support:show",jj);const Nj=JSON.parse('{"name":"code-comments","description":"Comment student code","codio":{"global":true,"noFile":true,"title":"Code comments","urls":"code-comments"}}');var Mj=n(39562),Fj={};Fj.info=Nj,Fj.hotkeys={},Fj.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mj.ZP);case 1:case"end":return e.stop()}}),e)}))),i.Z.register(Fj);const Rj=JSON.parse('{"name":"grading","description":"Grading","codio":{"global":true,"noFile":true,"title":"Grading","urls":"grading"}}');var Lj=f().compile('<div class="assignments-grading-rubrics-tab-title">\r\n  <h3>ASSIGN A GRADE</h3>\r\n</div>\r\n<div class="assignments-grading-rubric-table-container">\r\n  <div class="assignments-grading-rubrics-table">\r\n    <div class="assignments-grading-rubrics-table-row grading-rubrics-table-header">\r\n      <div class="assignments-grading-rubrics-table-cell"></div>\r\n      {{#each template.pointsList}}\r\n      <div class="assignments-grading-rubrics-table-cell">\r\n      <span class="assignments-grading-rubrics-table-cell-content">\r\n        {{this}}\r\n      </span>\r\n      </div>\r\n      {{/each}}\r\n    </div>\r\n    {{#eachWithIndex template.rubricsList}}\r\n    <div class="assignments-grading-rubrics-table-row" data-index={{index}}>\r\n      <div class="assignments-grading-rubrics-table-cell">\r\n      <span class="assignments-grading-rubrics-table-cell-content">\r\n        {{title}}\r\n      </span>\r\n        <div class="assignments-grading-rubrics-table-percent">\r\n          {{weight}}%\r\n        </div>\r\n      </div>\r\n      {{#each gradesList}}\r\n      <div class="assignments-grading-rubrics-table-cell is-grade-cell {{#unless ../../readOnly}}is-clickable{{/unless}}" data-cell-id="{{id}}">\r\n        <span class="assignments-grading-rubrics-table-cell-content">\r\n          {{value}}\r\n        </span>\r\n      </div>\r\n      {{/each}}\r\n    </div>\r\n    {{/eachWithIndex}}\r\n  </div>\r\n</div>\r\n<div class="assignments-grading-rubric-footer">\r\n  <span>Result grade is&nbsp;</span>\r\n  <span class="assignments-grading-rubric-footer-value">0</span>\r\n</div>\r\n<div class="assignments-grading-rubrics-footer-buttons">\r\n  {{#if readOnly}}\r\n  <button class="btn assignments-grading-rubrics-footer-button assignments-grading-rubrics-footer-cancel-button">Close</button>\r\n  {{else}}\r\n  <button class="btn btn-primary assignments-grading-rubrics-footer-button assignments-grading-rubrics-footer-apply-button">Apply</button>\r\n  <button class="btn assignments-grading-rubrics-footer-button assignments-grading-rubrics-footer-cancel-button">Cancel</button>\r\n  {{/if}}\r\n</div>\r\n'),Uj=f().compile('<div class="assignments-grading-rubric-no-template">\r\n  Looks like you do not choose grading template for this assignment. <br />Go to&nbsp;\r\n  <a href="/home/teacher/{{courseId}}" data-target="dashboard" >course assignments page</a>\r\n  &nbsp;and choose template on assignment settings screen\r\n</div>'),Bj=function(){function e(t){(0,Zn.Z)(this,e),this.container=t,this.activeRow=0,this.readOnly=!0,this.content=null}return(0,xn.Z)(e,[{key:"generateRubricsContent",value:function(e,t,n){return t?l()(Lj({grades:n.rubrics,template:t,readOnly:this.readOnly})):l()(Uj({courseId:e}))}},{key:"bindEvents",value:function(e,t){var n=this;y.Z.on(this.content,"click",".assignments-grading-rubrics-table-cell.is-clickable",(function(){var t=l()(this),i=t.closest(".assignments-grading-rubrics-table-row");n.activeRow=i.data("index"),n.updateActiveRow(),i.find(".assignments-grading-rubrics-table-cell").removeClass("is-active"),t.addClass("is-active"),n.updatePercentAndApplyBtnState(e)})),y.Z.on(this.content,"click",".assignments-grading-rubrics-footer-cancel-button",(function(){t(n.calculateResult(e),!1),n.close()})),y.Z.on(this.content,"click",".assignments-grading-rubrics-footer-apply-button",(function(){t(n.calculateResult(e),!0),n.close()}))}},{key:"updateActiveRow",value:function(){var e=this.content.find(".assignments-grading-rubrics-table-row:not(.grading-rubrics-table-header)");e.removeClass("is-active"),this.readOnly?e.addClass("is-active"):e.eq(this.activeRow).addClass("is-active")}},{key:"setGrades",value:function(e){var t=e.rubrics,n=d().map(t,(function(e){return".assignments-grading-rubrics-table-cell[data-cell-id="+e+"]"}));this.content.find(n.join(",")).addClass("is-active")}},{key:"pointsView",value:function(e){return this.calculateResult(e).percent}},{key:"updatePercentAndApplyBtnState",value:function(e){var t=this.collectGrades();this.content.find(".assignments-grading-rubric-footer-value").text(this.pointsView(e));var n=this.content.find(".assignments-grading-rubrics-footer-apply-button");this.readOnly||(e&&t.length===e.rubricsList.length?n.prop("disabled",!1):n.prop("disabled",!0))}},{key:"showRubrics",value:function(e,t,n,i,r){this.activeRow=0,this.readOnly=n,this.content=this.generateRubricsContent(i,e,t),this.content.find(".assignments-grading-rubric-footer-value").text(this.pointsView(this.content)),!this.readOnly&&this.bindEvents(e,r),this.container.empty().append(this.content).show(),this.updateActiveRow(),this.setGrades(t),this.updatePercentAndApplyBtnState(e)}},{key:"collectGrades",value:function(){return this.content.find(".assignments-grading-rubrics-table-cell.is-active").map((function(){return String(l()(this).data("cell-id"))})).get()}},{key:"calculateResult",value:function(e){var t=this.collectGrades(),n={grades:t,percent:0,points:0},i=e?d().max(e.pointsList):0;if(!e||!i)return n;var r=d().sumBy(e.rubricsList,(function(n){var i=d().findIndex(n.gradesList,(function(e){return d().includes(t,e.id)}));return-1===i?0:(n.weight||0)*e.pointsList[i]/100}));return{points:Math.round(r),percent:Math.round(100*r/i),grades:t}}},{key:"close",value:function(){y.Z.off(this.content),this.content=null,this.container&&this.container.empty()}}]),e}();const qj=Bj,Hj='<tr class="assignments-grading-table-grade-row" data-grade-type="{{gradeInfo.type}}">\r\n  <td class="assignments-grading-table-header-gradingType">\r\n    {{#if gradeInfo.teacherOrOverride}}\r\n      {{#if gradeInfo.grade}}\r\n        {{gradeInfo.teacherName}}{{#equals gradeInfo.type "Override"}} *{{/equals}}\r\n      {{else}}\r\n        {{#equals gradeInfo.type "Teacher"}}\r\n        {{gradeInfo.type}}\r\n        {{/equals}}\r\n      {{/if}}\r\n    {{else}}\r\n      {{gradeInfo.type}}\r\n    {{/if}}\r\n  </td>\r\n  {{#equals gradeInfo.type "Override"}}\r\n  <td></td>\r\n  {{/equals}}\r\n  {{#unless isFinalGrade}}\r\n  <td>\r\n    {{gradeInfo.weight}}\r\n  </td>\r\n  {{/unless}}\r\n  <td>\r\n    {{#if gradeInfo.grade}}{{gradeInfo.grade.grade}}{{/if}}\r\n  </td>\r\n  <td class="assignments-grading-table-comment-icon-cell">\r\n    {{#if gradeInfo.grade}}{{#if gradeInfo.grade.comments}}<i class="ss-icon">comment</i>{{/if}}{{/if}}\r\n  </td>\r\n  <td>\r\n    {{#if gradeInfo.grade}}{{#if gradeInfo.grade.datetime}}\r\n      {{formatTimestamp gradeInfo.grade.datetime \'MMM Do h:mma\'}}\r\n    {{/if}}{{/if}}\r\n  </td>\r\n  {{#if isTeacher}}\r\n  <td>\r\n    {{#if gradeInfo.teacherOrOverride}}\r\n    {{#if gradeInfo.grade}}\r\n    <button class="btn assignments-grading-button assignments-grading-edit-button">Edit</button>\r\n    {{else}}\r\n      {{#equals gradeInfo.type "Teacher"}}\r\n      <button class="btn assignments-grading-button assignments-grading-edit-button">Add Grade</button>\r\n      {{else}}\r\n      <button class="btn assignments-grading-button assignments-grading-edit-button">Override Grade</button>\r\n      {{/equals}}\r\n    {{/if}}\r\n    {{/if}}\r\n  </td>\r\n  {{/if}}\r\n</tr>\r\n{{#if gradeInfo.grade}}{{#if gradeInfo.grade.comments}}\r\n<tr class="assignments-grading-table-comment-row assignments-grading-table-comment-row--{{gradeInfo.type}}">\r\n  <td colspan="{{#if isFinalGrade}}5{{else}}6{{/if}}">\r\n    <div class="assignments-grading-comments" {{#if gradeInfo.grade.renderedCommentsId}}id="{{gradeInfo.grade.renderedCommentsId}}"{{/if}}>\r\n      {{gradeInfo.grade.comments}}\r\n    </div>\r\n  </td>\r\n</tr>\r\n{{/if}}{{/if}}\r\n{{#equals gradeInfo.type "Override"}}\r\n{{#if gradeInfo.grade}}\r\n<tr class="assignments-grading-table-hintRow">\r\n  <td colspan="5">\r\n    * Result grade overridden manually\r\n  </td>\r\n</tr>\r\n{{/if}}\r\n{{/equals}}\r\n';var Wj=f().compile(Hj),zj=f().compile('<tr class="assignments-grading-table-grade-row assignments-grading-table-grade-row--edit" data-grade-type="{{gradeInfo.type}}">\r\n  <td class="assignments-grading-table-header-gradingType">\r\n    {{#if gradeInfo.grade}}\r\n      {{gradeInfo.teacherName}}\r\n    {{else}}\r\n      {{gradeInfo.type}}\r\n    {{/if}}\r\n  </td>\r\n  <td></td>\r\n  <td>\r\n    <input\r\n      class="assignments-grading-input-field"\r\n      type="number"\r\n      {{#if hasGradingTemplate}}\r\n        {{#exists rubricSelectedValue}}\r\n          value="{{rubricSelectedValue}}"\r\n        {{else}}\r\n          value="{{#exists gradeInfo.grade}}{{gradeInfo.grade.grade}}{{else}}0{{/exists}}"\r\n        {{/exists}}\r\n      {{else}}\r\n          value="{{#exists gradeInfo.grade}}{{gradeInfo.grade.grade}}{{else}}0{{/exists}}"\r\n      {{/if}}\r\n      {{#exists gradeInfo.grade}}\r\n      value="{{gradeInfo.grade.grade}}"\r\n      {{/exists}}\r\n      min="0"\r\n      max="100"\r\n      {{#equals gradeInfo.type "Teacher"}}{{#if hasGradingTemplate}}readonly{{/if}}{{/equals}}\r\n      placeholder="100"\r\n    />\r\n  </td>\r\n  <td class="assignments-grading-table-comment-icon-cell">\r\n    <select id="feedback-{{gradeInfo.type}}" title="Format">\r\n      <option {{#equals gradeInfo.format 0}}selected{{/equals}} value="0">Text</option>\r\n      <option {{#equals gradeInfo.format 1}}selected{{/equals}} value="1">Markdown</option>\r\n      <option {{#equals gradeInfo.format 2}}selected{{/equals}} value="2">Html</option>\r\n    </select>\r\n  </td>\r\n  <td>\r\n    {{#unless gradeInfo.grade}}\r\n      <button class="btn assignments-grading-button assignments-grading-cancel-button">Cancel</button>\r\n    {{else}}\r\n      {{#equals gradeInfo.type "Teacher"}}\r\n      <button class="btn assignments-grading-button assignments-grading-cancel-button">Cancel</button>\r\n      {{else}}\r\n      <button class="btn assignments-grading-button assignments-grading-remove-button">Remove</button>\r\n      {{/equals}}\r\n    {{/unless}}\r\n  </td>\r\n  <td>\r\n    <button class="btn assignments-grading-button assignments-grading-done-button">Done</button>\r\n  </td>\r\n</tr>\r\n<tr class="assignments-grading-table-comment-row--edit assignments-grading-table-comment-row--{{gradeInfo.type}}">\r\n  <td colspan="6">\r\n    <textarea\r\n      class="assignments-grading-table-comment-ta"\r\n      placeholder="place your comment here..."\r\n      maxlength="4000"\r\n    >{{#exists gradeInfo}}{{#if gradeInfo.grade}}{{gradeInfo.grade.comments}}{{/if}}{{/exists}}</textarea>\r\n  </td>\r\n</tr>\r\n'),Gj=f().compile('<div class="assignments-grading-header">\r\n  <div class="assignments-grading-assignmentName">Grade for "{{ aSettings.name }}"</div>\r\n  {{#if isCompleted}}\r\n  <div class="assignments-grading-completedDate">Completed date: {{ completedDate }}</div>\r\n  {{/if}}\r\n</div>\r\n{{#if gradingEnabled}}\r\n<div class="assignments-grading-panel">\r\n  <div class="assignments-grading-panel-header">\r\n    Grade Components\r\n  </div>\r\n  <div class="assignments-grading-panel-inner">\r\n    <table class="assignments-grading-table">\r\n      {{> gradeHeader isTeacher=isTeacher}}\r\n      <tbody>\r\n      {{#each grades}}\r\n      {{> grade gradeInfo=this isTeacher=../isTeacher}}\r\n      {{/each}}\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</div>\r\n{{/if}}\r\n<div class="assignments-grading-panel assignments-grading-panel-final">\r\n  <div class="assignments-grading-panel-header">\r\n    Grade Adjustments\r\n  </div>\r\n  <div class="assignments-grading-panel-inner">\r\n    <table class="assignments-grading-table assignments-grading-table-final">\r\n      {{> gradeHeader isTeacher=isTeacher isFinalGrade=true}}\r\n      <tbody>\r\n      {{#if showCombinedGrade}}\r\n      <tr class="assignments-grading-table-grade-row" data-grade-type="Combined">\r\n        <td class="assignments-grading-table-header-gradingType">Combined Grade</td>\r\n        <td></td>\r\n        <td>\r\n          <div class="assignments-grading-table-gradeView">\r\n            {{#if gradesInfo}}\r\n            {{#if gradesInfo.grade}}{{ gradesInfo.grade.value }}{{/if}}\r\n            {{/if}}\r\n          </div>\r\n        </td>\r\n        <td class="assignments-grading-table-comment-icon-cell">\r\n        </td>\r\n        <td></td>\r\n        {{#if isTeacher}}\r\n        <td></td>\r\n        {{/if}}\r\n      </tr>\r\n      {{/if}}\r\n      {{#if showLatePenalty}}\r\n      <tr class="assignments-grading-table-grade-row" data-grade-type="Penalty">\r\n        <td class="assignments-grading-table-header-gradingType">Late Penalty</td>\r\n        <td></td>\r\n        <td>\r\n          <div class="assignments-grading-table-gradeView">\r\n            {{#if gradesInfo}}\r\n            {{#if latePenalty}}-{{ latePenalty }}{{/if}}\r\n            {{/if}}\r\n          </div>\r\n        </td>\r\n        <td class="assignments-grading-table-comment-icon-cell">\r\n        </td>\r\n        <td></td>\r\n        {{#if isTeacher}}\r\n        <td class="form-fieldset assignments-grading-penaltyDisabled">\r\n          <label class="toggle">\r\n            <input type="checkbox" id="set_penalty_disabled" {{#if penaltyInfo.penaltyDisabled}}checked{{/if}}/>\r\n            <span class="toggle-label"></span>\r\n            <span class="toggle-handle"></span>\r\n          </label>\r\n          <label class="form-label" for="set_penalty_disabled">Do not apply penalty</label>\r\n        </td>\r\n        {{/if}}\r\n      </tr>\r\n      {{/if}}\r\n      {{#if showFinalGrade}}\r\n      <tr class="assignments-grading-table-grade-row" data-grade-type="Final">\r\n        <td class="assignments-grading-table-header-gradingType assignments-grading-table-header-finalGrade">Final Grade</td>\r\n        <td></td>\r\n        <td>\r\n          <div\r\n            class="assignments-grading-table-gradeView {{#if penaltyInfo.hasPenalty}}assignments-grading-table-gradeView--penalty{{/if}}"\r\n            title="{{ penaltyInfo.title }}"\r\n          >\r\n            {{#if gradesInfo}}\r\n            {{#if gradesInfo.gradeFinal}}{{ gradesInfo.gradeFinal.value }}{{ else }}{{ gradesInfo.grade.value }}{{/if}}\r\n            {{/if}}\r\n          </div>\r\n        </td>\r\n        <td class="assignments-grading-table-comment-icon-cell">\r\n        </td>\r\n        <td></td>\r\n        {{#if isTeacher}}\r\n        <td></td>\r\n        {{/if}}\r\n      </tr>\r\n      {{/if}}\r\n\r\n      {{#if gradesInfo}}\r\n      {{#if gradesInfo.comments}}\r\n      <tr class="assignments-grading-table-comment-row grading-table-comment-row--Final">\r\n        <td></td>\r\n        <td colspan="5">{{ gradesInfo.comments.value }}</td>\r\n      </tr>\r\n      {{/if}}\r\n      {{/if}}\r\n      {{#unless pairProgrammingEnabled}}\r\n      {{> grade gradeInfo=overrideGrade isTeacher=isTeacher isFinalGrade=true}}\r\n      {{/unless}}\r\n      <tr class="assignments-grading-table-grade-row" data-grade-type="ExtraCredit">\r\n        <td class="assignments-grading-table-header-gradingType">\r\n          Extra Credit\r\n        </td>\r\n        <td></td>\r\n        <td>\r\n          {{#if extraCredit}}\r\n          {{ extraCredit }}\r\n          {{/if}}\r\n        </td>\r\n        <td></td>\r\n        <td></td>\r\n        <td>\r\n          {{#if extraCredit}}\r\n          <button class="btn assignments-grading-button extraCredit-edit-button">Edit</button>\r\n          {{ else }}\r\n          <button class="btn assignments-grading-button extraCredit-edit-button">Add Extra Credit</button>\r\n          {{/if}}\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</div>\r\n\r\n'),Vj=f().compile('<div class="assignments-grading-container"></div>\n<div class="assignments-rubrics-container"></div>\n'),Kj=f().compile('<tr class="assignments-grading-table-grade-row assignments-grading-table-grade-row--edit">\n  <td class="assignments-grading-table-header-gradingType">\n      Extra Credit\n  </td>\n  <td></td>\n  <td>\n    <input\n      class="assignments-grading-input-field"\n      type="number"\n      {{#exists extraCredit}}\n      value="{{extraCredit}}"\n      {{/exists}}\n      min="0"\n      max="100"\n      placeholder="0"\n    />\n  </td>\n  <td></td>\n  <td>\n      <button class="btn assignments-grading-button extraCredit-remove-button">Remove</button>\n  </td>\n  <td>\n      <button class="btn assignments-grading-button extraCredit-done-button">Done</button>\n  </td>\n</tr>\n'),Yj="Assessments",Jj="Script",Qj="Teacher",Xj="Override",$j="Final";ho.Z.registerPartial("grade",Hj),ho.Z.registerPartial("gradeHeader",'<thead>\r\n  <tr class="assignments-grading-table-header-row">\r\n    <td class="assignments-grading-table-header-gradingType">\r\n      {{#if isFinalGrade}}Adjustment{{else}}Grade Component{{/if}}\r\n    </td>\r\n    {{#if isFinalGrade}}\r\n    <td></td>\r\n    {{else}}\r\n    <td class="assignments-grading-table-header-weight">Weight</td>\r\n    {{/if}}\r\n    <td class="assignments-grading-table-header-grade">Grade</td>\r\n    <td class="assignments-grading-table-header-comments">Comments</td>\r\n    <td class="assignments-grading-table-header-time">Time</td>\r\n    {{#if isTeacher}}\r\n    <td class="assignments-grading-table-header-actions">Actions</td>\r\n    {{/if}}\r\n  </tr>\r\n</thead>\r\n');var eA=function(){function e(t){if((0,Zn.Z)(this,e),!(this instanceof e))return new e(t);this.content=null,this.gradesInfo=null,this.template=null,this.extraCredit=null,this.gradesProcessed=[],this.container=t,this.container.append(l()(Vj())),this.rubrics=new qj(t.find(".assignments-rubrics-container")),this.showGrading()}var t;return(0,xn.Z)(e,[{key:"getASettings",value:function(e){return e.projectBased?e.projectBased.settings:e.bookBased.settings}},{key:"showGrading",value:function(){var e=this,t=i.Z.currentProject;if(t&&(t.isOpenedByTeacher||t.isUserAssignee)&&t.eduStartedAssignmentInfo){var n,r=t.eduStartedAssignmentInfo.assignment,s=this.getASettings(r).gradingTemplate;n=s?b.ZP.GradingTemplateManager.get(t.course.organizationId,s).then((function(e){return e?e[0]:null})).catch((function(){return null})):Promise.resolve(null),Promise.all([b.ZP.CourseManager.getGrades(t.course.id,t.eduStartedAssignmentInfo.started.assignmentId,t.eduStartedAssignmentInfo.started.assignee),n]).then((function(t){var n=(0,a.Z)(t,2),i=n[0],r=n[1];return e.template=r,e.initGrades(i).then((function(){return e.render()}))})).catch((function(e){k.Z.error(e.message)}))}}},{key:"render",value:function(){var e=this;this.generateGradingContent().then((function(t){e.container.find(".assignments-grading-container").empty().append(t)}))}},{key:"reloadGradesOnSetGrade",value:function(){var e=this,t=i.Z.currentProject;b.ZP.CourseManager.getGrades(t.course.id,t.eduStartedAssignmentInfo.started.assignmentId,t.eduStartedAssignmentInfo.started.assignee).then((function(t){return e.initGrades(t).then((function(){return e.render()}))})).catch((function(e){k.Z.error(e.message)}))}},{key:"renderGradeEdit",value:function(e){return l()(zj({hasGradingTemplate:!!this.template,gradeInfo:e,isFinalGrade:e.type===Xj||e.type===$j}))}},{key:"getGradeOverride",value:function(){var e=(this.gradesInfo||{}).gradeOverrideMap,t=i.Z.currentProject.eduStartedAssignmentInfo.started.assignee;return e&&t.userId?e[t.userId]:null}},{key:"generateGradingContent",value:function(){var e=this,t=i.Z.currentProject,n=t.eduStartedAssignmentInfo.assignment,r=t.isOpenedByTeacher,a=this.getASettings(n),s=a.grading,o=s.assessments.enabled||s.script.enabled||s.custom.enabled,c=i.Z.currentProject.pairProgramming,u=c&&c.enabled,p=t.eduStartedAssignmentInfo.started,f=p.completed&&p.completed.completed,h=f&&m.ZP.formatDateFullUSWithoutTZ(p.completed.completedAt),g=this.gradesInfo?this.gradesInfo.grade.value-this.gradesInfo.gradeFinal.value:null,v=this.gradesInfo&&this.hasGrade(s,this.gradesInfo),b=this.gradesInfo&&!d().isEmpty(this.gradesInfo.gradeOverrideMap),y=!d().isEmpty(a.penalty)||this.gradesInfo&&this.gradesInfo.customPenalty&&d().isNumber(this.gradesInfo.customPenalty.value),w=v&&!b;return this.processGrade(Xj,null,this.getGradeOverride()).then((function(i){var s=l()(Gj({isTeacher:r,isLtiEnabled:t.isLtiEnabled,hasGradingTemplate:!!e.template,aSettings:a,gradingEnabled:o,gradesInfo:e.gradesInfo,grades:e.gradesProcessed,overrideGrade:i,penaltyInfo:e.getPenaltyInfo(n,e.gradesInfo),extraCredit:e.extraCredit,pairProgrammingEnabled:u,isCompleted:f,completedDate:h,showCombinedGrade:y&&v&&!b,showFinalGrade:w,latePenalty:g,showLatePenalty:!b}));return e.content=s,e.bindEvents(),e.putRenderedContent(i),d().each(e.gradesProcessed,(function(t){return e.putRenderedContent(t)})),s}))}},{key:"initGrades",value:function(e){var t=this;this.gradesProcessed=[],this.gradesInfo=e?e[0]:null;var n=i.Z.currentProject.eduStartedAssignmentInfo.assignment,r=this.getASettings(n).grading;return Promise.all([this.processGrade(Yj,r.assessments,this.gradesInfo&&this.gradesInfo.assessmentsGrade),this.processGrade(Jj,r.script,this.gradesInfo&&this.gradesInfo.scriptGrade),this.processGrade(Qj,r.custom,this.gradesInfo&&this.gradesInfo.teacherGrade)]).then((function(e){var n=(0,a.Z)(e,3),i=n[0],r=n[1],s=n[2];t.gradesProcessed.push(i,r,s),t.gradesProcessed=d().compact(t.gradesProcessed),t.extraCredit=t.getExtraCredit(t.gradesInfo)}))}},{key:"processGrade",value:function(e,t,n){return n=n||{},t&&!t.enabled?Promise.resolve(null):(n.type=e,t&&(n.weight=t.weight||0),n.grade&&n.grade.datetime&&(n.grade.datetime=new Date(1e3*n.grade.datetime.seconds+n.grade.datetime.nanos/1e6)),n.teacherOrOverride=e===Qj||e===Xj,(n.teacherOrOverride||e===Jj)&&n.grade&&d().isString(n.grade.comments)?m.ZP.renderFeedback(n.grade.comments,n.format+1).then((function(e){return n.grade.renderedComments=e,n.grade.renderedCommentsId=m.ZP.GUID(),n})):Promise.resolve(n))}},{key:"putRenderedContent",value:function(e){e&&e.grade&&e.grade.renderedCommentsId&&this.content.find("#".concat(e.grade.renderedCommentsId)).html(e.grade.renderedComments)}},{key:"renderGrade",value:function(e){return l()(Wj({hasGradingTemplate:!!this.template,gradeInfo:e,isFinalGrade:e.type===Xj||e.type===$j,isTeacher:i.Z.currentProject.isOpenedByTeacher}))}},{key:"renderExtraCreditEdit",value:function(e){return l()(Kj({extraCredit:e}))}},{key:"validateGrade",value:(t=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=parseInt(t,10))>=0&&t<=100){e.next=4;break}throw new Error("Your grade exceeds the limit from 0 to 100.");case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"setGrade",value:function(e,t,n,r){return this.validateGrade(e).then((function(){var a=i.Z.currentProject;return b.ZP.CourseManager.setTeacherAssignmentGrade({courseId:a.course.id,assignmentId:a.eduStartedAssignmentInfo.started.assignmentId,assignee:a.eduStartedAssignmentInfo.started.assignee,grade:e,comments:t,rubrics:r,format:n})}))}},{key:"setOverride",value:function(e,t,n,r,a){return this.validateGrade(e).then((function(){var s=i.Z.currentProject,o=s.eduStartedAssignmentInfo.started.assignee;return b.ZP.CourseManager.setAssignmentGradeOverride({courseId:s.course.id,assignmentId:s.eduStartedAssignmentInfo.started.assignmentId,studentId:o.userId,grade:e,comments:t,remove:!!a,rubrics:r,format:n})}))}},{key:"setExtraCredit",value:function(e,t){return this.validateGrade(e).then((function(){var n=i.Z.currentProject,r=n.eduStartedAssignmentInfo.started.assignee;return b.ZP.CourseManager.setAssignmentExtraCredit({courseId:n.course.id,assignmentId:n.eduStartedAssignmentInfo.started.assignmentId,assignee:r,extraCredit:e,remove:!!t})}))}},{key:"setPenaltyDisabled",value:function(e){var t=i.Z.currentProject,n=t.eduStartedAssignmentInfo.started.assignee;return b.ZP.CourseManager.setPenaltyDisabled({courseId:t.course.id,assignmentId:t.eduStartedAssignmentInfo.started.assignmentId,assignee:n,penaltyDisabled:e})}},{key:"bindEvents",value:function(){var e=this;y.Z.on(this.content,"click",".assignments-grading-table-comment-icon-cell",(function(){var e=l()(this).closest(".assignments-grading-table-grade-row");if(!e.hasClass("assignments-grading-table-grade-row--edit")){var t=e.data("grade-type");e.siblings(".assignments-grading-table-comment-row--"+t).toggleClass("active")}})),y.Z.on(this.content,"click",".assignments-grading-edit-button",(function(){var t=l()(this).closest(".assignments-grading-table-grade-row"),n=t.data("grade-type"),i=n===Xj,r=e.getGradeOverride(),a=e.gradesInfo?e.gradesInfo.teacherGrade:null,s=i?r:a;t.siblings(".assignments-grading-table-comment-row--"+n).remove(),t.replaceWith(e.renderGradeEdit(s||{type:n,teacherOrOverride:!0})),l()("#feedback-".concat(n)).selectize()})),y.Z.on(this.content,"click",".assignments-grading-cancel-button",(function(){var t=l()(this).closest(".assignments-grading-table-grade-row--edit"),n=t.data("grade-type"),i=n===Xj,r=e.getGradeOverride(),a=e.gradesInfo?e.gradesInfo.teacherGrade:null,s=i?r:a;t.siblings(".assignments-grading-table-comment-row--"+n).remove(),t.replaceWith(e.renderGrade(s||{type:n,teacherOrOverride:!0})),e.putRenderedContent(s)})),y.Z.on(this.content,"click",".assignments-grading-remove-button",(function(){e.setOverride(0,"",0,[],!0).then((function(){e.reloadGradesOnSetGrade()})).catch((function(e){k.Z.error(e.message)}))})),y.Z.on(this.content,"click",".assignments-grading-done-button",(function(){var t=l()(this).closest(".assignments-grading-table-grade-row--edit"),n=t.data("grade-type"),r=i.Z.currentProject.isOpenedByTeacher,a=n===Xj,s=e.getGradeOverride(),o=e.gradesInfo?e.gradesInfo.teacherGrade:null,c=a?s:o,u=t.find(".assignments-grading-input-field"),d=u.val(),p=t.siblings(".assignments-grading-table-comment-row--"+n).find(".assignments-grading-table-comment-ta").val(),f=parseInt(t.find("#feedback-".concat(n)).val(),10),h=[];if(e.template&&r&&!a){var m=c&&c.rubricsList||[];h=u.data("rubrics")||m}(a?e.setOverride.bind(e):e.setGrade.bind(e))(d,p,f,h).then((function(){e.reloadGradesOnSetGrade()})).catch((function(e){k.Z.error(e.message)}))})),y.Z.on(this.content,"click",".extraCredit-edit-button",(function(){var t=l()(this).closest(".assignments-grading-table-grade-row"),n=e.getExtraCredit(e.gradesInfo);t.replaceWith(e.renderExtraCreditEdit(n))})),y.Z.on(this.content,"click",".extraCredit-remove-button",(function(){e.setExtraCredit(0,!0).then((function(){e.reloadGradesOnSetGrade()})).catch((function(e){k.Z.error(e.message)}))})),y.Z.on(this.content,"click",".extraCredit-done-button",(function(){var t=l()(this).closest(".assignments-grading-table-grade-row--edit").find(".assignments-grading-input-field").val();e.setExtraCredit(t,!1).then((function(){e.reloadGradesOnSetGrade()})).catch((function(e){k.Z.error(e.message)}))})),y.Z.on(this.content,"click",".assignments-grading-input-field",(function(t){var n=l()(this),r=n.closest(".assignments-grading-table-grade-row--edit").data("grade-type")===Qj;if(e.template&&r){t.preventDefault();var a=e.gradesInfo?e.gradesInfo.teacherGrade:null,s=a&&a.rubricsList||[],o={rubrics:n.data("rubrics")||s,percent:n.val()};e.container.find(".assignments-grading-container").hide(),e.rubrics.showRubrics(e.template,o,!r,i.Z.currentProject.course.id,e.onRubricChanged.bind(e,n))}})),y.Z.on(this.content.find("input.assignments-grading-percent-input"),"keydown",(function(e){return e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105})),y.Z.on(this.content,"click","#set_penalty_disabled",(function(){var t=l()(this),n=t.is(":checked");e.setPenaltyDisabled(n).then((function(){e.reloadGradesOnSetGrade()})).catch((function(e){t.prop("checked",!n),k.Z.error(e.message)}))}))}},{key:"onRubricChanged",value:function(e,t,n){n&&e.val(t.percent).data("rubrics",t.grades),this.container.find(".assignments-grading-container").show()}},{key:"getCurrentPenalty",value:function(e,t){var n=e.projectBased?e.projectBased.settings:e.bookBased.settings;if(d().isEmpty(n.penalty))return null;var i=t||new Date,r=d()(n.penalty).map((function(e){return e.applyAfter=new Date(e.applyAfter),e})).filter((function(e){return e.applyAfter.getTime()<i.getTime()})).value();return d().maxBy(r,(function(e){return e.applyAfter.getTime()}))}},{key:"getPenaltyInfo",value:function(e,t){var n,i=!1,r="",a=t&&t.penaltyDisabled,s=e.projectBased?e.projectBased.settings:e.bookBased.settings;if(t)(i=!!t.penalty&&!this.getGradeOverride())&&(r=(n=d().find(s.penalty,(function(e){return e.id.toString()===t.penalty.value})))?"#".concat(n.id," ").concat(m.ZP.formatDateFullUS(n.applyAfter)," ").concat(n.percent,"%"):t.penalty.value);else{var o=new Date;(n=o&&this.getCurrentPenalty(e,o))&&(i=!0,r="#".concat(n.id," ").concat(m.ZP.formatDateFullUS(n.applyAfter)," ").concat(n.percent,"%"))}return{hasPenalty:i&&!a,penaltyDisabled:a,title:r}}},{key:"hasGrade",value:function(e,t){var n=i.Z.currentProject.eduStartedAssignmentInfo.started.assignee,r=t&&t.gradeOverride,a=r&&n&&n.userId&&r[n.userId];return t&&(a||e.assessments.enabled&&!!t.assessmentsGrade||e.script.enabled&&!!t.scriptGrade||e.custom.enabled&&!!t.teacherGrade)}},{key:"getExtraCredit",value:function(e){var t=(e||{}).extraCredit;return t&&t.grade&&t.grade.grade}},{key:"close",value:function(){y.Z.off(this.content),this.container&&this.container.empty(),this.gradesProcessed=null,this.gradesInfo=null,this.template=null,this.extraCredit=null,this.content=null,this.rubrics=null}}]),e}();const tA=eA;i.Z.register({info:Rj,get:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.Z.currentUser||"STUDENT"!==i.Z.currentUser.get("details").get("type")){e.next=2;break}throw new Error("Not allowed");case 2:return e.abrupt("return",tA);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});var nA=n(18566),iA=n.n(nA);var rA=f().compile('<div class="got-to-call-footer-text-chat">\n  <button\n    class="call-footer-text-chat-button call-footer-btn btn invisible"\n    title="Chat"\n    aria-label="Chat"\n    id="callToggleChatBtn"\n  >\n    <i class="ss-icon">chat</i>\n    <span class="call-footer-btn-text">Chat</span>\n  </button>\n</div>\n<div class="call-footer-video-chat">\n  <button\n    id="callToggleMicBtn"\n    class="call-footer-video-chat-button call-footer-btn btn"\n    title="Turn on microphone"\n    aria-label="Turn on microphone"\n  >\n    <i class="ss-icon">mic</i>\n    <div class="call-footer-btn-off"></div>\n  </button>\n  <button\n    id="callToggleCallBtn"\n    class="call-footer-video-chat-button call-footer-btn btn"\n    title="Start the call"\n    aria-label="Start the call"\n  >\n    <i class="ss-icon">call</i>\n  </button>\n  <button\n    id="callToggleCamBtn"\n    class="call-footer-video-chat-button call-footer-btn btn"\n    title="Turn on camera"\n    aria-label="Turn on camera"\n  >\n    <i class="ss-icon">facetime</i>\n    <div class="call-footer-btn-off"></div>\n  </button>\n</div>\n<div class="call-footer-settings">\n  <button\n    id="callToggleSettingsBtn"\n    class="call-footer-settings-button call-footer-btn btn"\n    title="Settings"\n    aria-label="Settings"\n    disabled\n  >\n    <i class="ss-icon">settings</i>\n  </button>\n</div>\n'),aA=y.Z.create(n(30011)),sA=function(e){return e.find(".call-footer-btn-off").hasClass("hide")},oA=function(){function e(t){(0,Zn.Z)(this,e),this.container=t,this.init()}return(0,xn.Z)(e,[{key:"init",value:function(){this.container.append(l()(rA())),this.bindEvents()}},{key:"toggleMic",value:function(e){var t=l()(e.currentTarget);t.find(".call-footer-btn-off").toggleClass("hide"),aA.publishMic({needPublish:sA(t)})}},{key:"toggleCam",value:function(e){var t=l()(e.currentTarget);t.find(".call-footer-btn-off").toggleClass("hide"),aA.publishCam({needPublish:sA(t)})}},{key:"toggleSettings",value:function(e){var t=l()(e.currentTarget);t.hasClass("call-btn--active")?aA.showSettings({show:!1}):(t.addClass("call-btn--active"),aA.showSettings({show:!0}))}},{key:"toggleChat",value:function(e){var t=l()(e.currentTarget);t.hasClass("call-btn--active")?(t.removeClass("call-btn--active"),aA.showChat({show:!1})):(t.addClass("call-btn--active"),aA.showChat({show:!0}))}},{key:"bindEvents",value:function(){var e=this;y.Z.on(this.container,"click.call-footer","#callToggleCallBtn",(function(){aA.togglePublishStream()})),y.Z.on(this.container,"click.call-footer","#callToggleMicBtn",this.toggleMic.bind(this)),y.Z.on(this.container,"click.call-footer","#callToggleCamBtn",this.toggleCam.bind(this)),y.Z.on(this.container,"click.call","#callToggleSettingsBtn",this.toggleSettings.bind(this)),y.Z.on(this.container,"click.call","#callToggleChatBtn",this.toggleChat.bind(this)),this.footerEvents=[y.Z.subscribe("call:settings:closed",(function(){e.container.find("#callToggleSettingsBtn").removeClass("call-btn--active")})),y.Z.subscribe("call:chat:closed",(function(){e.container.find("#callToggleChatBtn").removeClass("call-btn--active")}))]}},{key:"needPublishAudio",value:function(){var e=this.container.find("#callToggleMicBtn");return sA(e)}},{key:"needPublishVideo",value:function(){var e=this.container.find("#callToggleCamBtn");return sA(e)}},{key:"disableButtons",value:function(){this.container.find("button:not(.call-footer-text-chat-button)").attr("disabled",!0)}},{key:"enableCallButtons",value:function(){this.container.find(".call-footer-video-chat button").attr("disabled",!1)}},{key:"enableSettingBtn",value:function(){this.container.find("#callToggleSettingsBtn").attr("disabled",!1)}},{key:"hideChatBtn",value:function(){this.container.find("#callToggleChatBtn").addClass("invisible")}},{key:"showChatBtn",value:function(){this.container.find("#callToggleChatBtn").removeClass("invisible")}},{key:"destroy",value:function(){this.container&&this.container.remove(),this.footerEvents&&y.Z.unsubscribe(this.footerEvents),this.container=null}}]),e}();const cA=oA;var lA=f().compile('<div id="inline-modal-{{id}}" class="inline-modal">\n  <button class="inline-modal-close-btn" title="Close" aria-label="Close">×</button>\n  <div class="inline-modal-body"></div>\n</div>'),uA=function(){function e(t,n,i){(0,Zn.Z)(this,e),this.container=t,this.content=n,this.closeCallback=i,this.id=m.ZP.GUID(2),this.modalContainer=l()(lA({id:this.id})),this.modalContainer.find(".inline-modal-body").append(this.content),this.bindEvents()}return(0,xn.Z)(e,[{key:"bindEvents",value:function(){var e=this;y.Z.on(this.modalContainer,"click.inline-modal",".inline-modal-close-btn",(function(){e.close()}))}},{key:"open",value:function(){this.container.append(this.modalContainer)}},{key:"close",value:function(){this.modalContainer.detach(),this.closeCallback&&this.closeCallback()}},{key:"destroy",value:function(){this.modalContainer.remove(),this.container=null,this.modalContainer=null,this.content=null}}]),e}();const dA=uA;function pA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pA(Object(n),!0).forEach((function(t){(0,cs.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hA=y.Z.create(n(30011)),mA=f().compile('<fieldset class="call-settings-content">\n  <div>\n    <label for="microphoneSource">Microphone</label>\n    <select id="microphoneSource" class="call-settings-select">\n      {{#each audioInput}}\n      <option value="{{deviceId}}" {{#equals selectedAudioSrcId deviceId}}selected{{/equals}}>{{label}}</option>\n      {{/each}}\n    </select>\n  </div>\n  <div>\n    <label for="cameraSource">Camera</label>\n    <select id="cameraSource" class="call-settings-select">\n      {{#each videoInput}}\n      <option value="{{deviceId}}" {{#equals selectedVideoSrcId deviceId}}selected{{/equals}}>{{label}}</option>\n      {{/each}}\n    </select>\n  </div>\n</fieldset>'),gA=function(){function e(t,n,i,r){(0,Zn.Z)(this,e),this.container=t,this.initModal(n,i,r)}return(0,xn.Z)(e,[{key:"initModal",value:function(e,t,n){var i=d().groupBy(n,"kind");this.content=l()(mA(fA(fA({},i),{},{selectedVideoSrcId:e,selectedAudioSrcId:t}))),this.bindSettingsEvents(this.content),this.settingsModal=new dA(this.container,this.content,this.onSettingsClose.bind(this))}},{key:"bindSettingsEvents",value:function(){var e=this;y.Z.on(this.container,"change.call-settings","#microphoneSource",(function(e){var t=l()(e.currentTarget).val();hA.changeMicrophoneSource({deviceId:t})})),y.Z.on(this.container,"change.call-settings","#cameraSource",(function(e){var t=l()(e.currentTarget).val();hA.changeCameraSource({deviceId:t})})),this.openSettingsHandler=y.Z.subscribe("call:showSettings",(function(t,n){n.show?(e.settingsModal.open(),e.content.find(":input").first().focus()):e.settingsModal.close()}))}},{key:"onSettingsClose",value:function(){hA.settingsClosed()}},{key:"destroy",value:function(){this.openSettingsHandler&&y.Z.unsubscribe(this.openSettingsHandler),y.Z.off(this.container,".call-settings")}}]),e}();const vA=gA;var bA=function(e){return d().map(e,(function(e){return wA(e.connection)})).filter((function(e){return!!e})).sort()},yA=function(e){var t=e.data?e.data.split(",actualName="):[];return{userName:t[1]||"",gravatarId:t[0].replace("gravatarId=","")||""}},wA=function(e,t){return yA(e).userName||t},_A=function(e){return"".concat("call-stream-").concat(e)},kA=m.ZP.promise.deferred(),PA={},ZA=null,xA=null,CA=!1,SA=!1,EA={},IA=function(){return PA},TA=function(){return ZA},jA=function(){return xA},AA=function(e){xA=e},OA=function(){return CA},DA=function(e){CA=e},NA=function(){return SA},MA=function(){kA=m.ZP.promise.deferred(),PA={},ZA=null,xA=null,SA=!1,EA={}};var FA=y.Z.create(n(30011)),RA=m.ZP.KeyCode,LA=f().compile('<div class="call-text-chat-close-button-container">\n  <button class="call-text-chat-close-button" aria-label="Close chat">\n    <i class="ss-icon call-text-chat-close-button-icon">close</i>\n  </button>\n</div>\n<div class="call-text-chat-history"></div>\n<div class="call-text-chat-footer">\n  <textarea\n    class="call-text-chat-ta"\n    rows="1"\n    aria-labelledby="callChatSendBtn"\n    placeholder="Enter your message here..."\n  ></textarea>\n  <button\n    id="callChatSendBtn"\n    class="btn call-text-chat-send-btn"\n    type="button"\n    aria-label="Send a message"\n    disabled\n  >\n    <i class="ss-icon">send</i>\n  </button>\n</div>\n'),UA=f().compile('<div class="call-text-chat-history-message">\n  <div class="call-text-chat-history-message-info">\n    <img\n      class="call-text-chat-history-message-info-img"\n      src="{{imageSrc}}"\n      alt="Avatar of {{userName}}"\n    >\n    <div class="call-text-chat-history-message-info-name">\n      {{userName}}\n    </div>\n    <div class="call-text-chat-history-message-info-date">\n      on {{formatDateFullUS timestamp}}\n    </div>\n  </div>\n  <div class="call-text-chat-history-message-text">{{message}}</div>\n</div>\n'),BA=function(){function e(t){(0,Zn.Z)(this,e),this.container=t,this.init()}return(0,xn.Z)(e,[{key:"init",value:function(){var e=l()(LA({}));this.container.append(e),this.bindEvents()}},{key:"bindEvents",value:function(){var e=this;y.Z.on(this.container,"click.call-chat",".call-text-chat-send-btn",(function(){e.sendMessage(e.container.find(".call-text-chat-ta").val())})),y.Z.on(this.container,"keydown.call-chat",".call-text-chat-ta",this.onKeyDown.bind(this)),y.Z.on(this.container,"input.call-chat",".call-text-chat-ta",this.onChange.bind(this)),y.Z.on(this.container,"click.call-chat",".call-text-chat-close-button",this.toggleChat.bind(this,{show:!1})),TA().on("signal:msg",this.drawMessage.bind(this)),this.showChatHandler=y.Z.subscribe("call:showChat",this.toggleChat.bind(this)),this.publishStartedHandler=y.Z.subscribe("call:publishStarted",(function(){e.enableControls()})),this.publishStoppedHandler=y.Z.subscribe("call:publishStopped",(function(){e.disableControls()}))}},{key:"onKeyDown",value:function(e){var t=l()(e.target),n=this.container.find(".call-text-chat-send-btn"),i=e.which||e.keyCode;e.shiftKey||i!==RA.RETURN||!t.val()||n.attr("disabled")||this.sendMessage(t.val())}},{key:"onChange",value:function(e){var t=l()(e.target);this.disableSendButton(""===t.val())}},{key:"disableControls",value:function(){this.disableInput(!0),this.disableSendButton(!0)}},{key:"enableControls",value:function(){var e=this.container.find(".call-text-chat-ta");this.disableInput(!1),e.val()&&this.disableSendButton(!1)}},{key:"disableInput",value:function(e){this.container.find(".call-text-chat-ta").attr("disabled",e)}},{key:"disableSendButton",value:function(e){this.container.find(".call-text-chat-send-btn").attr("disabled",e)}},{key:"sendMessage",value:function(e){var t=this;TA().signal({type:"msg",data:e},(function(e){e?k.Z.error("Error sending signal: ".concat(e.name," ").concat(e.message)):(t.container.find(".call-text-chat-ta").val(""),t.disableSendButton(!0))}))}},{key:"isScrolledToBottom",value:function(){var e=this.container.find(".call-text-chat-history"),t=e.get(0).scrollHeight-e.outerHeight();return Math.ceil(e.scrollTop())>=t}},{key:"drawMessage",value:function(e){var t,n,i=this.isScrolledToBottom(),r=yA(e.from),a=r.userName,s=r.gravatarId,o=e.data,c="//www.gravatar.com/avatar/".concat(s),u=l()(UA({imageSrc:c,userName:a||"Anonymous",timestamp:Date.now(),message:o}));if(this.container.find(".call-text-chat-history").append(u),i){var d=this.container.find(".call-text-chat-history");d.scrollTop(d.get(0).scrollHeight)}TA().connection.id!==e.from.id&&(t="New message from ".concat(a),n={body:o,icon:c},"Notification"in window&&("granted"===Notification.permission?new Notification(t,n):"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){"granted"===e&&new Notification(t,n)}))))}},{key:"toggleChat",value:function(e,t){t.show?this.container.removeClass("hide"):(this.container.addClass("hide"),FA.chatClosed())}},{key:"destroy",value:function(){this.container.remove(),this.container=null,TA().off("signal:msg"),this.showChatHandler&&y.Z.unsubscribe(this.showChatHandler),this.publishStartedHandler&&y.Z.unsubscribe(this.publishStartedHandler),this.publishStoppedHandler&&y.Z.unsubscribe(this.publishStoppedHandler)}}]),e}();const qA=BA;var HA=function(e){if("OT_USER_MEDIA_ACCESS_DENIED"===e.name){return"Permission denied for the A/V connection. "+"<a href='".concat("https://docs.codio.com/common/develop/ide/editing/av-chat.html#permissions",'\' target="_blank">Click here</a>')+" to read how to re-enable permissions on your browser"}return e.message},WA=y.Z.create(n(30011)),zA=function(){var e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.Z.currentProject){e.next=3;break}return e.abrupt("return",Promise.reject(new Error("No project")));case 3:return e.prev=3,e.next=6,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 6:e.next=13;break;case 8:throw e.prev=8,e.t0=e.catch(3),(t=new Error(e.t0.message)).name="OT_USER_MEDIA_ACCESS_DENIED",t;case 13:return e.abrupt("return",(n=void 0,n=i.Z.currentProject.guid,b.Od.loadSession(n)));case 14:case"end":return e.stop()}var n}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}(),GA=function(){var e=TA();e.on("streamCreated",(function(e){var t=e.stream;!function(e){PA[e.id]=e}(t),WA.sessionStreamCreated({stream:t})})),e.on("streamDestroyed",(function(e){var t,n=e.stream;t=n.id,delete PA[t],WA.sessionStreamDestroyed({stream:n})})),e.on("exception",(function(e){return VA(HA(e))})),e.on("streamPropertyChanged",(function(e){WA.streamPropertyChanged({event:e})}))},VA=function(e){e&&k.Z.error(e.message||e)},KA=function(){NA()||(SA=!0,zA().then((function(e){var t=e.apiKey,n=e.sessionId,i=e.token,r=iA().initSession(t,n);!function(e){ZA=e,kA.resolve()}(r),r.connect(i,VA),GA()})).catch((function(e){MA(),VA(HA(e)),WA.destroyCall()})))};function YA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function JA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YA(Object(n),!0).forEach((function(t){(0,cs.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var QA=y.Z.create(n(30011)),XA=f().compile('<div class="call">\n  <div class="call-top">\n    <div class="call-video-chat"></div>\n    <div class="call-connection-info"></div>\n  </div>\n  <div class="call-divider hide" tabindex="0" role="separator"></div>\n  <div class="call-bottom">\n    <div class="call-resize-chat"></div>\n    <div class="call-text-chat hide"></div>\n    <div class="call-footer"></div>\n  </div>\n</div>'),$A=f().compile('<div id="{{id}}" class="call-video-chat-item">\n  <div class="call-video-chat-item-info">\n    <div class="call-video-chat-item-info-status">\n      <i class="ss-icon">mic</i>\n      <div class="call-video-chat-item-info-status-off {{#if hasAudio}}hide{{/if}}"></div>\n    </div>\n    <div class="call-video-chat-item-info-name">{{userName}}</div>\n  </div>\n</div>\n'),eO={insertMode:"append",width:"100%",height:"100%"},tO=!1,nO=m.ZP.KeyCode,iO=[nO.UP,nO.DOWN],rO=function(){function e(t){(0,Zn.Z)(this,e),this.container=t,this.callActivated=!1,this.activate()}return(0,xn.Z)(e,[{key:"activate",value:function(){var e=this;this.callActivated||(this.callActivated=!0,NA()||KA(),kA.promise.then((function(){return e.activateCall()})).catch(this.handleError))}},{key:"addVideoChatItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=l()($A({id:e,userName:t,hasAudio:n}));this.container.find(".call-video-chat").append(i)}},{key:"removeVideoChatItem",value:function(e){this.container.find("#".concat(e)).remove()}},{key:"addSubscriberIdToVideoChatItem",value:function(e,t){this.container.find("#".concat(e)).data("subscriberId",t)}},{key:"getSubscriberIdByVideoChatElId",value:function(e){return this.container.find("#".concat(e)).data("subscriberId")}},{key:"getPublishOptions",value:function(){return{showControls:!1,publishAudio:this.footer&&this.footer.needPublishAudio(),publishVideo:this.footer&&this.footer.needPublishVideo()}}},{key:"activateCall",value:function(){var e=this,t=l()(XA());this.footer=new cA(l()(t.find(".call-footer"))),this.container.find(".call-loading").remove(),this.container.append(t);var n=i.Z.currentUser,r=n.displayName(),a=_A(n.getAccountUid());this.addVideoChatItem(a,r),this.footer.disableButtons(),this.bindEvents(),d().defer((function(){e.initPublisher(a),e.updateConnectionsInfo(),e.resize()}))}},{key:"initChat",value:function(){this.chat=new qA(this.container.find(".call-text-chat"))}},{key:"initPublisher",value:function(e){var t=this,n=iA().initPublisher(e,JA(JA({},eO),this.getPublishOptions()),(function(e){e?(t.handleError(HA(e)),function(e){return"OT_USER_MEDIA_ACCESS_DENIED"===e.name}(e)&&QA.destroyCall()):(t.bindPublisherEvents(),t.initSettingsModal(),t.initChat(),t.footer.enableCallButtons())}));AA(n)}},{key:"initSettingsModal",value:function(){var e=this;iA().getDevices((function(t,n){if(t)e.handleError(t);else{e.footer.enableSettingBtn();var i=jA(),r=i.getVideoSource().deviceId,a=i.getAudioSource().deviceId;e.settings=new vA(e.container.find(".call-video-chat"),r,a,n),e.bindSettingsEvents()}}))}},{key:"handleError",value:function(e){e&&k.Z.error(e.message||e)}},{key:"bindEvents",value:function(){this.bindSessionEvents(),this.bindFooterEvents(),this.bindChatEvents();var e=d().debounce(this.resize.bind(this),200,{maxWait:1e3});this.resizeListenerId=y.Z.subscribe("panel:size:change",e),this.bindResizeEvents()}},{key:"updateConnectionsInfo",value:function(){var e=this.container.find(".call-connection-info");if(this.isOnCall())!e.hasClass("hide")&&e.addClass("hide");else{var t=function(e){var t="There is no one else on the call.<br/>Click the green call button to start the call.<br/>Others in this project will be notified that there is an active call to join.",n=[];if(d().size(e)&&(n=bA(e)),n.length>0){var i;if(1===n.length)i="".concat(n[0]," is on the call.");else{var r=n.reduce((function(e,t,i){return"".concat(e,", ").concat(i===n.length-1?"and ":"").concat(t)}));i="".concat(r," are on the call.")}t="".concat(i,"<br/>Click the green call button to join the call.")}return t}(IA());e.html(t),e.removeClass("hide")}}},{key:"isOnCall",value:function(){return OA()}},{key:"subscribeStream",value:function(e){var t=this,n=_A(e.id);this.addVideoChatItem(n,wA(e.connection),e.hasAudio);var i=TA().subscribe(e,n,JA(JA({},eO),{},{showControls:!1}),(function(e){e?t.handleError(e):(t.addSubscriberIdToVideoChatItem(n,i.id),function(e){EA[e.id]=e}(i))}))}},{key:"unsubscribeStream",value:function(e){var t=_A(e.id),n=this.getSubscriberIdByVideoChatElId(t);this.removeVideoChatItem(t);var i=EA[n];!function(e){delete EA[e]}(i);var r=TA();i&&r.unsubscribe(i)}},{key:"bindSessionEvents",value:function(){var e=this;this.sessionEvents=[y.Z.subscribe("call:session:streamCreated",(function(t,n){var i=n.stream;e.updateConnectionsInfo(),e.isOnCall()&&e.subscribeStream(i),e.resize()})),y.Z.subscribe("call:session:streamDestroyed",(function(t,n){var i=n.stream;e.updateConnectionsInfo(),e.unsubscribeStream(i),e.resize()})),y.Z.subscribe("call:session:streamPropertyChanged",(function(t,n){var i=n.event,r=i.stream;TA().getSubscribersForStream(i.stream).length&&e.toggleStreamMicStatus(r.id,r.hasAudio)}))]}},{key:"toggleStreamMicStatus",value:function(e,t){var n=_A(e),i=this.container.find("#".concat(n)).find(".call-video-chat-item-info-status-off");i.removeClass("hide"),t&&i.addClass("hide")}},{key:"bindFooterEvents",value:function(){var e=this;this.footerEvents=[y.Z.subscribe("call:publishMic",(function(t,n){var r=n.needPublish,a=i.Z.currentUser;e.toggleStreamMicStatus(a.getAccountUid(),r);var s=jA();s&&s.publishAudio(r)})),y.Z.subscribe("call:publishCam",(function(e,t){var n=t.needPublish,i=jA();i&&i.publishVideo(n)})),y.Z.subscribe("call:togglePublishStream",(function(){e.isOnCall()?e.unpublish():e.publish()})),y.Z.subscribe("call:showChat",(function(t,n){var i=n.show;e.showResize(i),e.resize()}))]}},{key:"bindChatEvents",value:function(){var e=this;this.chatEvents=[y.Z.subscribe("call:chat:closed",(function(){e.showResize(!1),e.resize()}))]}},{key:"bindResizeEvents",value:function(){var e=this.container.find(".call-divider");this.resizeEvents=[y.Z.on(e,"mousedown",this.mouseDownHandler.bind(this)),y.Z.on(e,"keydown",this.keyDownHandler.bind(this))]}},{key:"unbindResizeEvents",value:function(){d().forEach(this.resizeEvents,(function(e){y.Z.off(e)})),delete this.resizeEvents}},{key:"bindSettingsEvents",value:function(){this.settingsEvents=[y.Z.subscribe("call:settings:changeMicrophoneSource",(function(e,t){var n=t.deviceId;jA().setAudioSource(n).catch((function(){}))})),y.Z.subscribe("call:settings:changeCameraSource",(function(e,t){var n=t.deviceId;jA().setVideoSource(n).catch((function(){}))}))]}},{key:"resize",value:function(){var e=this.container.find(".call-video-chat"),t=e.width(),n=e.height(),i=this.container.find(".call-video-chat-item");if(t&&n){var r=function(e,t,n){var i=function e(t,n,i){return 1.32*t/Math.ceil(i/t)>n||t===i?t:e(++t,n,i)}(1,e/t,n),r=e/i-10,a=r/1.33,s=t-10;return a>s&&(r=1.33*(a=s)),{width:r,height:a}}(t,n,i.length),a=r.width,s=r.height;i.width(a),i.height(s)}}},{key:"bindPublisherEvents",value:function(){var e=this,t=jA();if(t){var n=IA();t.on("streamCreated",(function(){if(e.container.find(".call").addClass("call--connected"),d().each(n,e.subscribeStream.bind(e)),e.footer.showChatBtn(),d().isEmpty(n)){var t=i.Z.currentProject.guid;b.Od.startCall(t)}DA(!0),QA.publishStarted(),e.updateConnectionsInfo(),e.resize()})),t.on("streamDestroyed",(function(t){t.preventDefault(),e.container.find(".call").removeClass("call--connected"),d().each(n,e.unsubscribeStream.bind(e)),e.footer.hideChatBtn(),DA(!1),QA.publishStopped(),e.updateConnectionsInfo(),e.resize()}))}}},{key:"showResize",value:function(e){var t=e?"removeClass":"addClass";this.container.find(".call-divider")[t]("hide"),e||this.container.find(".call-top, .call-bottom").height("50%")}},{key:"publish",value:function(){var e=TA(),t=jA();e.publish(t,this.handleError)}},{key:"unpublish",value:function(){var e=TA(),t=jA();e&&e.unpublish(t)}},{key:"unbindEvents",value:function(){var e=jA();e&&e.off(),this.sessionEvents&&y.Z.unsubscribe(this.sessionEvents),this.footerEvents&&y.Z.unsubscribe(this.footerEvents),this.settingsEvents&&y.Z.unsubscribe(this.settingsEvents),this.resizeListenerId&&y.Z.unsubscribe(this.resizeListenerId),this.chatEvents&&y.Z.unsubscribe(this.chatEvents),this.unbindResizeEvents()}},{key:"close",value:function(){this.callActivated=!1;var e=jA();e&&e.destroy(),this.unbindEvents(),AA(null),QA.publishStopped(),this.container&&this.container.empty(),this.container=null,this.footer&&this.footer.destroy(),this.footer=null,this.settings&&this.settings.destroy(),this.settings=null,this.chat&&this.chat.destroy(),this.chat=null,this.sessionEvents=null,this.footerEvents=null,this.settingsEvents=null,this.resizeListenerId=null,this.chatEvents=null}},{key:"mouseDownHandler",value:function(e){var t=this.container.find(".call-top"),n=this.container.find(".call-bottom"),i=this.container.find(".call");tO=!0,y.Z.on(i,"mousemove",(function(e){sO(e,t,n)})),y.Z.on(i,"mouseup",(function(e){uO(e,i)})),aO(e)}},{key:"keyDownHandler",value:function(e){var t=this.container.find(".call-top"),n=this.container.find(".call-bottom"),i=e.which||e.keyCode;if(iO.includes(i)){switch(i){case nO.UP:oO(10,t,n);break;case nO.DOWN:oO(-10,t,n)}aO(e)}}}]),e}(),aO=function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1},sO=function(e,t,n){if(tO){var i=t.height()-e.pageY+t.offset().top;oO(i,t,n),aO(e)}},oO=function(e,t,n){var i=cO(t,-e),r=cO(n,e);d().isNumber(i)&&d().isNumber(r)&&(lO(t,i),lO(n,r))};function cO(e,t){return e.height()+t}function lO(e,t){e.css("height",t+"px")}var uO=function(e,t){tO&&(tO=!1),t.off("mouseup mousemove")};const dO=rO;var pO=y.Z.create(n(30011)),fO=f().compile('<div id="codio-call" class="call-panel">\n  <button class="call-panel-close-btn" type="button" aria-label="Close call" title="Close call">\n    <i class="ss-icon call-panel-close-btn-icon">close</i>\n  </button>\n  <div class="call-loading">\n    Loading...\n  </div>\n</div>\n'),hO=null,mO=null,gO=[];iA().setLogLevel(iA().NONE);var vO=function(e){kO().then((function(t){var n=i.Z.currentProject;if(t&&n){var r=!d().isEmpty(n.permissions);pO.updateMenuItemsVisibility({visible:r,active:e})}})).catch((function(e){var t=e.message;k.Z.error(t)}))},bO=function(){var e=OA();return d().size(IA())>0||e},yO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;kO().then((function(t){t&&(KA(),d().delay((function(){(NA()||TA())&&wO()}),e))})).catch((function(e){var t=e.message;k.Z.error(t)}))},wO=function(){var e=l()("div.ide-container");if(0===e.find("#codio-call").length){var t=l()(fO());e.append(t),mO=new dO(t),y.Z.on(t,"click",".call-panel-close-btn",_O),gO=[y.Z.subscribe("ide:fullscreen:enter",(function(){return t.addClass("hide")})),y.Z.subscribe("ide:fullscreen:leave",(function(){return t.removeClass("hide")}))],pO.callPanelSwitched()}},_O=function(){mO&&mO.close(),mO=null,gO&&y.Z.unsubscribe(gO),l()("div.ide-container").find("#codio-call").remove(),pO.callPanelSwitched()},kO=function(){return hO||(hO=b.ZP.OrganizationManager.getMyOrganizations().then((function(e){var t=i.Z.currentProject.course;return t?!e.find((function(e){return e.id===t.organizationId})).details.hideAVCall:d().some(e,(function(e){return!e.details.hideAVCall}))}))),hO};(function(){y.Z.subscribe("project:open",(function(){var e=i.Z.currentProject,t=e&&e.projectCallStartDate;vO(),t&&yO(1e3)})),y.Z.subscribe("project:permissionsUpdated",vO),y.Z.subscribe("project:callStarted",yO),y.Z.subscribe("project:close",(function(){var e=TA();e&&e.disconnect(),MA()})),y.Z.subscribe("call:publishStarted",(function(){vO(bO())})),y.Z.subscribe("call:publishStopped",(function(){vO(bO())})),y.Z.subscribe("call:session:streamCreated",(function(){vO(bO())})),y.Z.subscribe("call:session:streamDestroyed",(function(){vO(bO())})),y.Z.subscribe("command:call:open",wO),y.Z.subscribe("call:destroy",_O)})();const PO=JSON.parse('{"name":"pair-programming","description":"Pair programming"}');var ZO={},xO=d().partial(xf.Z.request,"CollaborationManager");ZO.getActiveCollaborationUsers=function(e){return xO("getActiveCollaborationUsers",{projectId:e})},ZO.driverTransferRequest=function(e){return xO("driverTransferRequest",{projectId:e.projectId})},ZO.updateCollaborationDriver=function(e,t,n){return xO("updateCollaborationDriver",{projectId:e,userId:t,grant:n})},ZO.getCurrentDriverId=function(e){return xO("getCurrentDriverId",{projectId:e})};const CO=ZO;var SO=f().compile('<div class="collaboration-active-users"></div>\n<div class="collaboration-controls">\n  <div class="form-fieldset">\n    <label class="toggle">\n      <input\n        type="checkbox"\n        id="shared-focus"\n        role="switch"\n        {{#if enforcedSharedFocus}}disabled{{/if}}\n        {{#if sharedFocusEnabled}}checked{{/if}}\n      />\n      <span class="toggle-label" aria-hidden="true"></span>\n      <span class="toggle-handle" aria-hidden="true"></span>\n    </label>\n    <label class="form-label" for="shared-focus">Shared focus</label>\n  </div>\n  <div class="form-fieldset">\n    <label class="toggle">\n      <input\n        type="checkbox"\n        id="driver"\n        role="switch"\n        {{#if driver}}checked{{/if}}\n      />\n      <span class="toggle-label" aria-hidden="true"></span>\n      <span class="toggle-handle" aria-hidden="true"></span>\n    </label>\n    <label class="form-label" for="driver">Driver (Editing control)</label>\n  </div>\n</div>\n<a href="https://docs.codio.com/students/courses/pair-programming.html" target="_blank" class="main-form-help-link">\n  <i class="ss-icon">info</i> <span class="help-link-text">Need a little help?</span>\n</a>\n'),EO=f().compile('<div class="collaboration-active-users-list" tabindex="0" aria-describedby="collaboration-active-users-list-info">\n  <span id="collaboration-active-users-list-info">\n    Pair programming with:\n    {{#each activeUsers}}\n    <span class="collaboration-active-users-list-user-name {{#if this.isDriver}}driver{{/if}}">\n      {{ this.shortName }}\n    </span>\n    {{/each}}\n  </span>\n</div>\n'),IO=f().compile('<h4 class="driver-transfer-dialog">{{requestorUserName}} has requested driver access</h4>'),TO=y.Z.create(n(90101)),jO="granted",AO="denied",OO=function(){function e(t){var n=this;if((0,Zn.Z)(this,e),!(this instanceof e))return new e(t);this.container=t,this.currentDriverId="",this.activeUsers=[],this._applingFlag=!1,this.activityFunction=d().debounce((function(){n.setInactive()}),15e3),this.sharedFocusEnabled=!1;var r=i.Z.currentProject.pairProgramming;this.enforcedSharedFocus=r&&r.enforcedSharedFocus;var a=i.Z.currentProject.guid;CO.getCurrentDriverId(a).then((function(e){n.currentDriverId=e.currentDriverId,TO.driverUpdated(n.currentDriverId),n.activityFunction(),n.render()})).then((function(){return n.updateUsersList()}))}return(0,xn.Z)(e,[{key:"bindEvents",value:function(e){var t=this;y.Z.on(e.find("#shared-focus"),"click",(function(){t.sharedFocusEnabled=e.find("#shared-focus").prop("checked"),t.subscribeDriverCursorPositionEvent()})),y.Z.on(e.find("#driver"),"click",(function(){t.updateCollaboration(e.find("#driver").prop("checked"))})),y.Z.subscribe("project:driverTransferReq",(function(n,r){t.updateUsersList();var a=r.eventUserId===i.Z.currentUser.account,s=t.currentDriverId===i.Z.currentUser.account;a&&t.currentDriverId===i.Z.currentUser.account&&e.find("#driver").prop("checked",!0),!a&&s&&t.showDialog(r)})),y.Z.subscribe("project:collaborationDriverUpdate",(function(n,r){if(t.updateUsersList(),t._applingFlag=!1,r.status===jO){t.currentDriverId=r.requestorUserId;var a=r.requestorUserId===i.Z.currentUser.account;e.find("#driver").prop("checked",a),t.updateReadOnly(),t.drawActiveUsersList(),t.activityFunction(),TO.driverUpdated(t.currentDriverId)}if(r.status===AO&&r.requestorUserId===i.Z.currentUser.account){var s=r.requestorUserId!==i.Z.currentUser.account;e.find("#driver").prop("checked",s),r.eventUserId!==i.Z.currentUser.account&&k.Z.info("Driver has denied access")}})),y.Z.subscribe("file:editor:activate",(function(){t.currentDriverId&&t.updateReadOnly()})),y.Z.subscribe("file:editor:change",(function(){t.activityFunction(),d().isEmpty(t.currentDriverId)&&!t._applingFlag&&(CO.updateCollaborationDriver(i.Z.currentProject.guid,i.Z.currentUser.account,!0),t._applingFlag=!0)})),y.Z.subscribe("project:collaborationActiveUsersUpdate",(function(e,n){t.currentDriverId!==n.currentDriverId&&(t.currentDriverId=n.currentDriverId,TO.driverUpdated(t.currentDriverId),t.updateReadOnly()),t.updateUsersList()})),y.Z.subscribe("guides:codioAssessmentBtnClick",(function(){t.currentDriverId||CO.updateCollaborationDriver(i.Z.currentProject.guid,i.Z.currentUser.account,!0)})),this.subscribeDriverCursorPositionEvent()}},{key:"subscribeDriverCursorPositionEvent",value:function(){var e=this;this.enforcedSharedFocus||this.sharedFocusEnabled?this.driverCursorPositionHandler=y.Z.subscribe("shareman:cursors",(function(t,n){n.forEach((function(t){e.currentDriverId===t.userId&&i.Z.ide.open("tree",t.file,{})}))})):y.Z.unsubscribe(this.driverCursorPositionHandler)}},{key:"setInactive",value:function(){this.currentDriverId===i.Z.currentUser.account&&(this._applingFlag=!0,CO.updateCollaborationDriver(i.Z.currentProject.guid,"",!0))}},{key:"updateUsersList",value:function(){var e=this,t=i.Z.currentProject.guid;return CO.getActiveCollaborationUsers(t).then((function(t){var n=i.Z.currentUser.account;e.activeUsers=t.filter((function(e){return e.userId!==n})).map((function(e){return e.shortName=e.lastName?"".concat(e.firstName," ").concat(e.lastName.charAt(0)):e.displayName,e})),e.drawActiveUsersList()})).catch((function(e){var t=e.message;return k.Z.error(t)}))}},{key:"updateReadOnly",value:function(){var e=!d().isEmpty(this.currentDriverId)&&this.currentDriverId!==i.Z.currentUser.account;TO.setReadOnlyForNavigator(e)}},{key:"updateCollaboration",value:function(e){return!1===e?this.setInactive():this.currentDriverId?(this.currentDriverId===i.Z.currentUser.account?this.container.find("#driver").prop("checked",!0):(k.Z.info("Please wait for driver to grant access"),this.container.find("#driver").prop("checked",!1)),void CO.driverTransferRequest({projectId:i.Z.currentProject.guid})):(this._applingFlag=!0,CO.updateCollaborationDriver(i.Z.currentProject.guid,i.Z.currentUser.account,!0),void this.container.find("#driver").prop("checked",!0))}},{key:"showDialog",value:function(e){var t=i.Z.currentProject.guid,n=new R.Z({title:"Driver role transfer",content:l()(IO({requestorUserName:e.requestorUserName})),width:500,onClose:function(){},buttons:[{title:"Grant",type:1,onClick:function(){CO.updateCollaborationDriver(t,e.eventUserId,!0),n.close()}},{title:"Decline",onClick:function(){CO.updateCollaborationDriver(t,e.eventUserId,!1),n.close()}}]})}},{key:"render",value:function(){var e=l()(SO({driver:this.currentDriverId===i.Z.currentUser.account,enforcedSharedFocus:this.enforcedSharedFocus,sharedFocusEnabled:this.enforcedSharedFocus||this.sharedFocusEnabled}));this.bindEvents(e),this.container.empty().append(e)}},{key:"drawActiveUsersList",value:function(){var e=l()(EO({activeUsers:this.activeUsers.map((function(e){return{shortName:e.shortName.toUpperCase(),isDriver:e.isDriver}}))}));this.container.find(".collaboration-active-users").empty().append(e)}}]),e}();const DO=OO;var NO={};NO.info=PO,NO.hotkeys={},NO.get=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",DO);case 1:case"end":return e.stop()}}),e)}))),y.Z.subscribe("ide:open",(function(){var e=i.Z.currentProject.pairProgramming;if(e&&e.enabled&&!i.Z.currentProject.writableCopy){var t=l()('<div class="collaboration-bar">');t.insertBefore(".ide-container"),new DO(t)}})),i.Z.register(NO);var MO=n(64440),FO=n.n(MO);const RO=JSON.parse('{"prefix":"mdi","icons":{"autorenew":{"body":"<path fill=\\"currentColor\\" d=\\"M12 6v3l4-4l-4-4v3a8 8 0 0 0-8 8c0 1.57.46 3.03 1.24 4.26L6.7 14.8A5.9 5.9 0 0 1 6 12a6 6 0 0 1 6-6m6.76 1.74L17.3 9.2c.44.84.7 1.8.7 2.8a6 6 0 0 1-6 6v-3l-4 4l4 4v-3a8 8 0 0 0 8-8c0-1.57-.46-3.03-1.24-4.26Z\\"/>"},"console":{"body":"<path fill=\\"currentColor\\" d=\\"M20 19V7H4v12h16m0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16m-7 14v-2h5v2h-5m-3.42-4L5.57 9H8.4l3.3 3.3c.39.39.39 1.03 0 1.42L8.42 17H5.59l3.99-4Z\\"/>"},"pencil-outline":{"body":"<path fill=\\"currentColor\\" d=\\"m14.06 9l.94.94L5.92 19H5v-.92L14.06 9m3.6-6c-.25 0-.51.1-.7.29l-1.83 1.83l3.75 3.75l1.83-1.83c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75Z\\"/>"},"web":{"body":"<path fill=\\"currentColor\\" d=\\"M16.36 14c.08-.66.14-1.32.14-2c0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2c0-.68.06-1.35.16-2h4.68c.09.65.16 1.32.16 2c0 .68-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.923 7.923 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8.008 8.008 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2c0 .68.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.65 15.65 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2Z\\"/>"},"bug-outline":{"body":"<path fill=\\"currentColor\\" d=\\"M20 8h-2.81c-.45-.8-1.07-1.5-1.82-2L17 4.41L15.59 3l-2.17 2.17a6.002 6.002 0 0 0-2.83 0L8.41 3L7 4.41L8.62 6c-.75.5-1.36 1.21-1.81 2H4v2h2.09c-.06.33-.09.66-.09 1v1H4v2h2v1c0 .34.03.67.09 1H4v2h2.81A5.988 5.988 0 0 0 15 20.18c.91-.52 1.67-1.28 2.19-2.18H20v-2h-2.09c.06-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.03-.67-.09-1H20V8m-4 7a4 4 0 0 1-4 4a4 4 0 0 1-4-4v-4a4 4 0 0 1 4-4a4 4 0 0 1 4 4v4m-2-5v2h-4v-2h4m-4 4h4v2h-4v-2Z\\"/>"},"format-list-bulleted":{"body":"<path fill=\\"currentColor\\" d=\\"M7 5h14v2H7V5m0 8v-2h14v2H7M4 4.5A1.5 1.5 0 0 1 5.5 6A1.5 1.5 0 0 1 4 7.5A1.5 1.5 0 0 1 2.5 6A1.5 1.5 0 0 1 4 4.5m0 6A1.5 1.5 0 0 1 5.5 12A1.5 1.5 0 0 1 4 13.5A1.5 1.5 0 0 1 2.5 12A1.5 1.5 0 0 1 4 10.5M7 19v-2h14v2H7m-3-2.5A1.5 1.5 0 0 1 5.5 18A1.5 1.5 0 0 1 4 19.5A1.5 1.5 0 0 1 2.5 18A1.5 1.5 0 0 1 4 16.5Z\\"/>"},"wrench":{"body":"<path fill=\\"currentColor\\" d=\\"m22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9c-2-2-5-2.4-7.4-1.3L9 6L6 9L1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4Z\\"/>"},"eye":{"body":"<path fill=\\"currentColor\\" d=\\"M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z\\"/>"},"chevron-right":{"body":"<path fill=\\"currentColor\\" d=\\"M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.42Z\\"/>"},"chevron-left":{"body":"<path fill=\\"currentColor\\" d=\\"M15.41 16.58L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.42Z\\"/>"},"music-circle-outline":{"body":"<path fill=\\"currentColor\\" d=\\"M16 9h-3v5.5a2.5 2.5 0 0 1-2.5 2.5A2.5 2.5 0 0 1 8 14.5a2.5 2.5 0 0 1 2.5-2.5c.57 0 1.08.19 1.5.5V7h4v2m-4-7a10 10 0 0 1 10 10a10 10 0 0 1-10 10A10 10 0 0 1 2 12A10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8a8 8 0 0 0 8 8a8 8 0 0 0 8-8a8 8 0 0 0-8-8Z\\"/>"},"view-dashboard-edit":{"body":"<path fill=\\"currentColor\\" d=\\"M21 13.1c-.1 0-.3.1-.4.2l-1 1l2.1 2.1l1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8l-6.1 6V23h2.1l6.1-6.1l-2.1-2M21 9h-8V3h8v6m-8 9.06V11h8v.1c-.76 0-1.43.4-1.81.79L13 18.06M11 13H3V3h8v10m0 8H3v-6h8v6Z\\"/>"},"order-bool-ascending-variant":{"body":"<path fill=\\"currentColor\\" d=\\"M4 13c-1.11 0-2 .89-2 2v4c0 1.11.89 2 2 2h4c1.11 0 2-.89 2-2v-4c0-1.11-.89-2-2-2m.2 1.5l1.06 1.05l-3.99 3.95l-2.53-2.55l1.07-1.05l1.47 1.49M4 3c-1.11 0-2 .89-2 2v4c0 1.11.89 2 2 2h4c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2M4 5h4v4H4m8-4h10v2H12m0 12v-2h10v2m-10-8h10v2H12Z\\"/>"},"format-bold":{"body":"<path fill=\\"currentColor\\" d=\\"M13.5 15.5H10v-3h3.5A1.5 1.5 0 0 1 15 14a1.5 1.5 0 0 1-1.5 1.5m-3.5-9h3A1.5 1.5 0 0 1 14.5 8A1.5 1.5 0 0 1 13 9.5h-3m5.6 1.29c.97-.68 1.65-1.79 1.65-2.79c0-2.26-1.75-4-4-4H7v14h7.04c2.1 0 3.71-1.7 3.71-3.79c0-1.52-.86-2.82-2.15-3.42Z\\"/>"},"format-italic":{"body":"<path fill=\\"currentColor\\" d=\\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8Z\\"/>"},"format-header-pound":{"body":"<path fill=\\"currentColor\\" d=\\"M3 4h2v6h4V4h2v14H9v-6H5v6H3V4m10 4h2.31l.32-3h2l-.32 3h2l.32-3h2l-.32 3H23v2h-1.9l-.2 2H23v2h-2.31l-.32 3h-2l.32-3h-2l-.32 3h-2l.32-3H13v-2h1.9l.2-2H13V8m4.1 2l-.2 2h2l.2-2h-2Z\\"/>"},"format-strikethrough-variant":{"body":"<path fill=\\"currentColor\\" d=\\"M23 12v2h-4.39c1 2.14.95 8-6.23 8c-8.33.05-8.01-6.5-8.01-6.5l3.97.05c.03 3.37 3.16 3.37 3.78 3.33c.64-.05 3.03-.04 3.22-2.38c.08-1.09-1.02-1.92-2.22-2.5H1v-2h22m-3.59-4.11l-3.98-.03s.17-2.77-3.28-2.78C8.7 5.06 9 7.28 9 7.56c.04.28.34 1.66 3 2.32H5.71S2.22 3.15 10.74 2c8.71-1.2 8.69 5.91 8.67 5.89Z\\"/>"},"format-list-numbered":{"body":"<path fill=\\"currentColor\\" d=\\"M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 0 1 .75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25Z\\"/>"},"table":{"body":"<path fill=\\"currentColor\\" d=\\"M5 4h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2m0 4v4h6V8H5m8 0v4h6V8h-6m-8 6v4h6v-4H5m8 0v4h6v-4h-6Z\\"/>"},"format-quote-close":{"body":"<path fill=\\"currentColor\\" d=\\"M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4Z\\"/>"},"code-tags":{"body":"<path fill=\\"currentColor\\" d=\\"m14.6 16.6l4.6-4.6l-4.6-4.6L16 6l6 6l-6 6l-1.4-1.4m-5.2 0L4.8 12l4.6-4.6L8 6l-6 6l6 6l1.4-1.4Z\\"/>"},"alert-box-outline":{"body":"<path fill=\\"currentColor\\" d=\\"M19 19H5V5h14m0-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2m-8 12h2v2h-2v-2m0-8h2v6h-2V7\\"/>"},"binoculars":{"body":"<path fill=\\"currentColor\\" d=\\"M11 6h2v7h-2V6M9 20a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-5l2-9h4v7a1 1 0 0 1-1 1v6m1-15H7V3h3v2m5 15v-6a1 1 0 0 1-1-1V6h4l2 9v5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1M14 5V3h3v2h-3Z\\"/>"},"link-variant":{"body":"<path fill=\\"currentColor\\" d=\\"M10.59 13.41c.41.39.41 1.03 0 1.42c-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0a5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24a2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0a5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24a2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24a.973.973 0 0 1 0-1.42Z\\"/>"},"image-search-outline":{"body":"<path fill=\\"currentColor\\" d=\\"M15.5 9c.7 0 1.29-.24 1.77-.73c.49-.48.73-1.07.73-1.77c0-.67-.24-1.27-.73-1.77c-.48-.5-1.07-.73-1.77-.73c-.67 0-1.27.23-1.77.73S13 5.83 13 6.5c0 .7.23 1.29.73 1.77c.5.49 1.1.73 1.77.73m3.81-.09l3.1 3.09L21 13.41l-3.14-3.1c-.78.47-1.58.69-2.39.69c-1.25 0-2.31-.42-3.17-1.3c-.85-.87-1.3-1.93-1.3-3.2c0-1.23.45-2.3 1.33-3.17C13.2 2.45 14.27 2 15.5 2c1.27 0 2.33.45 3.2 1.33c.88.87 1.3 1.94 1.3 3.17c0 .83-.22 1.63-.69 2.41M16.5 18h-11l2.75-3.5l1.97 2.33l2.72-3.52L16.5 18m1.5-5l2 2v5c0 .55-.19 1-.59 1.4c-.41.39-.88.6-1.41.6H4c-.55 0-1-.21-1.4-.6c-.39-.4-.6-.85-.6-1.4V6c0-.53.21-1 .6-1.41C3 4.19 3.45 4 4 4h5.5c-.3.64-.47 1.31-.5 2H4v14h14v-7Z\\"/>"},"file-document-multiple-outline":{"body":"<path fill=\\"currentColor\\" d=\\"M16 0H8C6.9 0 6 .9 6 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6l-6-6m4 18H8V2h7v5h5v11M4 4v18h16v2H4c-1.1 0-2-.9-2-2V4h2m6 6v2h8v-2h-8m0 4v2h5v-2h-5Z\\"/>"},"console-network":{"body":"<path fill=\\"currentColor\\" d=\\"M17 3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-4v2h1a1 1 0 0 1 1 1h7v2h-7a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1H2v-2h7a1 1 0 0 1 1-1h1v-2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10M7 7l4 4l-4 4h2.85l3.28-3.28c.37-.39.37-1.02 0-1.42L9.83 7H7m10 6h-3v2h3v-2Z\\"/>"},"lock":{"body":"<path fill=\\"currentColor\\" d=\\"M12 17a2 2 0 0 0 2-2a2 2 0 0 0-2-2a2 2 0 0 0-2 2a2 2 0 0 0 2 2m6-9a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h1V6a5 5 0 0 1 5-5a5 5 0 0 1 5 5v2h1m-6-5a3 3 0 0 0-3 3v2h6V6a3 3 0 0 0-3-3Z\\"/>"},"file-plus":{"body":"<path fill=\\"currentColor\\" d=\\"M14 2H6c-1.11 0-2 .89-2 2v16c0 1.11.89 2 2 2h7.81c-.53-.91-.81-1.95-.81-3c0-3.31 2.69-6 6-6c.34 0 .67.03 1 .08V8l-6-6m-1 7V3.5L18.5 9H13m10 11h-3v3h-2v-3h-3v-2h3v-3h2v3h3v2Z\\"/>"},"tune-vertical":{"body":"<path fill=\\"currentColor\\" d=\\"M7 3H5v6h2V3m12 0h-2v10h2V3M3 13h2v8h2v-8h2v-2H3v2m12-6h-2V3h-2v4H9v2h6V7m-4 14h2V11h-2v10m4-6v2h2v4h2v-4h2v-2h-6Z\\"/>"},"trash-can-outline":{"body":"<path fill=\\"currentColor\\" d=\\"M9 3v1H4v2h1v13a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6h1V4h-5V3H9M7 6h10v13H7V6m2 2v9h2V8H9m4 0v9h2V8h-2Z\\"/>"},"content-copy":{"body":"<path fill=\\"currentColor\\" d=\\"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z\\"/>"},"calendar-month":{"body":"<path fill=\\"currentColor\\" d=\\"M9 10v2H7v-2h2m4 0v2h-2v-2h2m4 0v2h-2v-2h2m2-7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h1V1h2v2h8V1h2v2h1m0 16V8H5v11h14M9 14v2H7v-2h2m4 0v2h-2v-2h2m4 0v2h-2v-2h2Z\\"/>"},"check":{"body":"<path fill=\\"currentColor\\" d=\\"M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59L21 7Z\\"/>"},"check-bold":{"body":"<path fill=\\"currentColor\\" d=\\"m9 20.42l-6.21-6.21l2.83-2.83L9 14.77l9.88-9.89l2.83 2.83L9 20.42Z\\"/>"},"floppy":{"body":"<path fill=\\"currentColor\\" d=\\"M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5.5L18.5 3H17v6a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V3H5m7 1v5h3V4h-3m-5 8h10a1 1 0 0 1 1 1v6H6v-6a1 1 0 0 1 1-1Z\\"/>"},"close-thick":{"body":"<path fill=\\"currentColor\\" d=\\"M20 6.91L17.09 4L12 9.09L6.91 4L4 6.91L9.09 12L4 17.09L6.91 20L12 14.91L17.09 20L20 17.09L14.91 12L20 6.91Z\\"/>"},"arrow-up-bold":{"body":"<path fill=\\"currentColor\\" d=\\"M15 20H9v-8H4.16L12 4.16L19.84 12H15v8Z\\"/>"},"arrow-down-bold":{"body":"<path fill=\\"currentColor\\" d=\\"M9 4h6v8h4.84L12 19.84L4.16 12H9V4Z\\"/>"},"connection":{"body":"<path fill=\\"currentColor\\" d=\\"M21.4 7.5c.8.8.8 2.1 0 2.8l-2.8 2.8l-7.8-7.8l2.8-2.8c.8-.8 2.1-.8 2.8 0l1.8 1.8l3-3l1.4 1.4l-3 3l1.8 1.8m-5.8 5.8l-1.4-1.4l-2.8 2.8l-2.1-2.1l2.8-2.8l-1.4-1.4l-2.8 2.8l-1.5-1.4l-2.8 2.8c-.8.8-.8 2.1 0 2.8l1.8 1.8l-4 4l1.4 1.4l4-4l1.8 1.8c.8.8 2.1.8 2.8 0l2.8-2.8l-1.4-1.4l2.8-2.9Z\\"/>"},"cloud-upload":{"body":"<path fill=\\"currentColor\\" d=\\"M11 20H6.5q-2.28 0-3.89-1.57Q1 16.85 1 14.58q0-1.95 1.17-3.48q1.18-1.53 3.08-1.95q.63-2.3 2.5-3.72Q9.63 4 12 4q2.93 0 4.96 2.04Q19 8.07 19 11q1.73.2 2.86 1.5q1.14 1.28 1.14 3q0 1.88-1.31 3.19T18.5 20H13v-7.15l1.6 1.55L16 13l-4-4l-4 4l1.4 1.4l1.6-1.55Z\\"/>"},"plus-thick":{"body":"<path fill=\\"currentColor\\" d=\\"M20 14h-6v6h-4v-6H4v-4h6V4h4v6h6v4Z\\"/>"},"directions-fork":{"body":"<path fill=\\"currentColor\\" d=\\"M3 4v8.5l3-3L9 13c1 1 1 2 1 2v6h4v-7s0-1-.53-2S12 10 12 10L9 6.58L11.5 4M18 4l-4.46 4.47L14 9s.93 1 1.47 2c.21.4.33.79.4 1.13L21 7\\"/>"},"play":{"body":"<path fill=\\"currentColor\\" d=\\"M8 5.14v14l11-7l-11-7Z\\"/>"},"debug-step-into":{"body":"<path fill=\\"currentColor\\" d=\\"M12 22a2 2 0 0 1-2-2a2 2 0 0 1 2-2a2 2 0 0 1 2 2a2 2 0 0 1-2 2m1-20v11l4.5-4.5l1.42 1.42L12 16.84L5.08 9.92L6.5 8.5L11 13V2h2Z\\"/>"},"debug-step-out":{"body":"<path fill=\\"currentColor\\" d=\\"M12 22a2 2 0 0 1-2-2a2 2 0 0 1 2-2a2 2 0 0 1 2 2a2 2 0 0 1-2 2m1-6h-2V6l-4.5 4.5l-1.42-1.42L12 2.16l6.92 6.92l-1.42 1.42L13 6v10Z\\"/>"},"debug-step-over":{"body":"<path fill=\\"currentColor\\" d=\\"M12 14a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m11.46-5.14l-1.59 6.89L15 14.16l3.8-2.38A7.972 7.972 0 0 0 12 8c-3.95 0-7.23 2.86-7.88 6.63l-1.97-.35C2.96 9.58 7.06 6 12 6c3.58 0 6.73 1.89 8.5 4.72l2.96-1.86Z\\"/>"},"refresh":{"body":"<path fill=\\"currentColor\\" d=\\"M17.65 6.35A7.958 7.958 0 0 0 12 4a8 8 0 0 0-8 8a8 8 0 0 0 8 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18a6 6 0 0 1-6-6a6 6 0 0 1 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35Z\\"/>"},"cog":{"body":"<path fill=\\"currentColor\\" d=\\"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z\\"/>"}},"width":24,"height":24}');FO().addCollection(RO,"codio");n(83902);var LO=window.codioIDE||{};LO.getFileContent=function(){var e=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.Z.currentProject){e.next=2;break}throw new Error("project not found");case 2:if(i.Z.currentProject.exists(t)){e.next=4;break}throw new Error("file not found");case 4:return e.next=6,i.Z.currentProject.unixFile(t);case 6:return n=e.sent,e.abrupt("return",n.content);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),LO.getFileTreeStructure=function(){if(!i.Z.currentProject)throw new Error("project not found");return i.Z.currentProject.children},LO.isAuthorAssignment=function(){if(!i.Z.currentProject)throw new Error("project not found");return!!i.Z.currentProject.authorAssignment},n(57982),i.Z.start(Pn)},49088:(e,t,n)=>{"use strict";n.d(t,{T:()=>s,p:()=>c});var i=n(93443),r=n(33105),a=null,s=function(){return new Promise((function(e,t){r.Z.apiRequest({object:"AccountManager",method:"fetchAccessToken",data:{},callback:function(n){n&&!n.error?(o(n.response.message),e()):t(new Error(n?n.message:"No data"))}})}))},o=function(e){a=e},c=function(){return a};i.Z.subscribe("session:logout",(function(){a=null}))},59050:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(96486),r=n.n(i),a=n(93443),s=n(49721),o=n(33105),c=n(20294),l=n(70199),u=n(44442),d=n(54565),p=n(49088),f=a.Z.create(n(45151)),h={},m=null,g=!1;var v=function(e,t,n){if(e.error)n(new Error(e.message));else{if(m=(m=new l.Z(e.response))||new l.Z({details:{name:"anon"}}),f.accountLoad({name:"my"},m),g)return g=!1,void t(b());t(m)}},b=function(){return new Promise((function(e,t){o.Z.apiRequest({object:"AccountManager",method:"getMyInfo",callback:function(n){return v(n,e,t)}})}))};h.isAnon=function(e){return"anon"===(e=e||m).get("details").get("name")},h.getMyAccount=function(e){return e=!!r().isUndefined(e)||e,!m||e||g?(this.accountP||(this.accountP=b()),this.accountP):Promise.resolve(m)},h.validateAccessToken=function(){return new Promise((function(e,t){o.Z.apiRequest({object:"AccountManager",method:"getMyInfo",data:{},params:{session_id:(0,p.p)()},callback:function(n,i){i||n&&n.error?t(new Error("token not valid")):e()}})}))},h.loadUserProjectsList=function(e){o.Z.apiRequest({object:"ProjectManager",method:"getProjects",data:{},callback:function(t){var n=[],i=!t||t.error;i?i&&t&&"No Projects"===t.message&&(i=!1,n=[]):n=t.response.projects,e&&e(n,i)}})},h.getFile=function(e,t){return new Promise((function(n,i){void 0===t&&(t=!0);var r=s.Z.currentProject.backendSubDomain,a=d.Z.get("boxDomain"),l="https://".concat(r,".").concat(a,"/").concat(e);o.Z.loadBinaryFile({url:l,callback:function(e){e.error?i(new Error(e.message)):n(t?c.ZP.decode64(e.response):e.response)}})}))},h.getFileBuffer=function(e,t){return new Promise((function(n,i){o.Z.apiRequest({object:"ProjectStructureManager",method:"getFile",data:{projectId:e,path:t},callback:function(e){e.error?i(new Error(e.message)):n(e.response.content)}})}))},u.Z.hotkey.plugin("account",n(66056));const y=h},33105:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(52308),r=n.n(i),a=n(96486),s=n.n(a),o=n(54565),c=n(1650),l=n(49088),u={},d=o.Z.get("serverUrl"),p=4e4;function f(e,t,n,i){var r,a={error:t,message:"Web Client Error",response:void 0,code:void 0,source:void 0};if(void 0!==n&&void 0!==n.status&&void 0!==n.statusText&&(0===n.status&&""===e?(e='{"code":0,"source":"ACv2.Server.Core","error":"Aborted"}',a.message="Aborted"):"error"===n.statusText&&0===n.status?a.message="We are very sorry, but one of our services seems to be unavailable right now. Please check status.codio.com for more info.":a.message=n.statusText+"("+n.status+")"),s().isPlainObject(e)&&0===e.code&&(a.error=!0,a.message=e.message),i){if(t)a.error=!0;else{if(s().isString(e))try{r=JSON.parse(e)}catch(e){}else r=e;r?(a.code=r.code,a.source=r.source,0===r.code?(a.error=!0,r.response&&r.response.code&&(a.message=r.response.code,a.code=r.response.code),r.response&&r.response.message&&(a.message=r.response.message),r.response&&r.response.additionalInfo&&(a.additionalInfo=r.response.additionalInfo),r.message&&(a.message=r.message)):a.response=r.response):(a.error=!0,a.message="Error json parse")}i(a),e=null}}function h(e,t,n,i){var r={error:t,message:"Web Client Error",response:void 0,code:void 0,source:void 0};void 0!==n&&void 0!==n.status&&void 0!==n.statusText&&(0===n.status&&""===e?(e='{"code":0,"source":"ACv2.Server.Core","error":"Aborted"}',r.message="Aborted"):"error"===n.statusText&&0===n.status?r.message="We are very sorry, but one of our services seems to be unavailable right now. Please check status.codio.com for more info.":r.message=n.statusText+"("+n.status+")"),s().isPlainObject(e)&&0===e.code&&(r.error=!0,r.message=e),i&&(t?r.error=!0:r.response=e,i(r),e=null)}u.timeout=function(e){return void 0!==e&&(p="default"===e?4e4:e),p},u.loadBinaryFile=function(e){var t=e.url;try{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.withCredentials=!0,n.onload=function(){var t=!1;0===n.status&&(t=!0),h(n.response,t,n,e.callback)},n.onerror=function(){h(n.textStatus,!0,n,e.callback)},n.ontimeout=function(){h("Timeout",!0,n,e.callback)},n.onabort=function(){h("Aborted",!0,n,e.callback)},n.send()}catch(t){h(void 0,!0,void 0,e.callback)}},u.apiRequest=function(e){var t=e.options||{};if(e&&e.object&&e.method){var n={object:e.object,method:e.method,data:e.data},i=e.serverUrl||d,a=(0,l.p)();a&&(e.params=e.params||{},i!==d&&(e.params.session_id=a)),e.params&&(n.params=e.params);try{r().ajax({url:i,type:"POST",data:JSON.stringify(n),header:{},options:t,control:e.control,contentType:"application/json; charset=UTF-8",success:function(t,n,i){var r=!1;0===i.status&&(r=!0),f(t,r,i,e.callback)},error:function(t,n){f(n,!0,t,e.callback)}})}catch(t){f(void 0,!0,void 0,e.callback)}}},u.fileRequest=function(e,t){if(s().isObject(e)&&(t=e,e=void 0),t&&t.object&&t.method){var n=new XMLHttpRequest;n.upload.addEventListener("progress",(function(e){e.lengthComputable&&s().isFunction(t.onProgress)&&t.onProgress(e.loaded/e.total*100)}),!1),n.addEventListener("abort",(function(){s().isFunction(t.onAbort)&&t.onAbort()}),!1);var i=d+"file";e&&(i=e,t.session_id=(0,l.p)()),n.open("POST",i),n.onreadystatechange=function(){if(4===this.readyState){var e=200!==this.status;t.control&&delete t.control,f(this.response,e,n,t.callback)}};var r=new FormData;return s().forOwn(t,(function(e,t){s().isFunction(e)||"control"===t||r.append(t,e)})),s().isObject(t.control)&&(t.control.abort=function(){n.abort()}),n.send(r),n}f("params required",!0,null,t.callback)},u.pingTaskStatus=function(e,t){var n=e.taskId,i=e.callback,r="tasks/"+n,a=null;t||(a=setInterval((function(){u.apiRequest({object:"TaskManager",method:"getTaskStatus",data:{id:n},callback:function(e){e&&e.response&&"PROCESSING"!==e.response.status&&o&&o(e.response)}})}),15e3));var o=function(e){if(null!==a&&clearInterval(a),o=null,"ERROR"===e.status)i({error:!0,message:e.errorMessage,code:e.code});else if("COMPLETED"===e.status){var t={};t.response={message:e.result},i(t)}else i({error:!0,message:"Unknown response status: "+e.status})},l=c.Z.subscribeLast(r,(function(e,t){0!==t&&(c.Z.unsubscribe(r,l),e.taskStatus&&s().assign(e,e.taskStatus),o&&o(e))}))};const m=u},60989:(e,t,n)=>{"use strict";n.d(t,{od:()=>i,Od:()=>r,ZP:()=>Ct});var i={};n.r(i),n.d(i,{add:()=>ht,changeCollapsedState:()=>_t,edit:()=>vt,get:()=>mt,makeObsolete:()=>yt,makeResolved:()=>wt,moveToPath:()=>kt,remove:()=>gt,update:()=>bt});var r={};n.r(r),n.d(r,{loadSession:()=>Zt,startCall:()=>xt});var a=n(96486),s=n.n(a),o=n(49721),c=n(76638),l=n(45113),u={};function d(e,t,n){var i=[];return s().each(e,(function(e){var r=e.pageId&&s().find(t,{id:e.pageId});if(e.pageId&&!r||e.children){if(e.pageId&&!r){if(!n[e.pageId])return!0;delete e.pageId}e.children&&(e.children=d(e.children,t,n))}i.push(e)})),i}u.convertProjectData=function(e,t){var n=JSON.parse(e.project.fullJson),i=e.edu&&!!e.edu.book,r=e.edu&&!!e.edu.authorAssignment,a=i&&{bookWriter:!0,name:e.edu.book.book.settings.name},o=r?e.edu.authorAssignment.course:null;return s().assign(n,o,{bookData:a},{isAuthorProject:i||r},function(e,t,n){if(!t.edu||!t.edu.startedAssignment)return null;var i=t.edu.startedAssignment,r=i.assignment,a=r.projectBased||r.bookBased;a.groups&&(a.groups=a.groups.map((function(e){return e.userIds=e.userIds||[],e})));var o=(0,l.bz)(r),c=function(e){var t=e.edu.startedAssignment,n=t.assignment,i=t.started;return i.assignee.groupId?{isGroup:!0,group:(n.projectBased?n.projectBased.groups:n.bookBased.groups).find((function(e){return e.id===i.assignee.groupId}))}:{isGroup:!1,userId:i.assignee.userId}}(t),u=c.isGroup?c.group.id:c.userId,h=c.isGroup?"penaltiesPerGroup":"penaltiesPerStudent",m=s().get(o,"".concat(h,".").concat(u,".extend"),0),g=function(e){var t=e.assignment.bookBased;if(!t)return null;var n=e.course.bookSettingsMap||[];return{bookWriter:!1,pages:t.pages,name:t.settings.name,showAllPages:s().get(n[t.bookId],"showAllPages")}}(i),v={};if(i.assignmentVersion.guides){var b=function(e){var t=e.started,n=e.assignmentVersion,i=t.randomAssessments,r=s()(i).mapKeys((function(e){return e.id})).mapValues((function(){return!0})).value(),a=n.guides;if(!a)return null;var o={},c=a.playbackMetadataJson;o.metadata=s().defaults({},f(c)),o.metadata.sections=s().map(a.sections,(function(e){var t=e.playbackMetadataJson;if(e.media){var n=e.media.playbackMetadataJson;e.media=s().defaults({source:e.media.url,disabled:!1},f(n))}(e=s().omit(e,["playbackMetadataJson"])).type=s().isEmpty(e.content.htmlRelativePath)?"markdown":"html";var i=s().defaults(e,f(t));return s().some(i.assessmentIds,(function(e){return r[e]}))&&(i.files.unshift({path:"#tabs",action:"close"}),i.closeTerminalSession=!0),i}));var l,u=[],d=!1;s().forEach(o.metadata.sections,(function(e){var t=s().clone(e);delete e.contentWebp,t.contentWebp&&(d=!0,t.content=t.contentWebp),delete t.contentWebp,u.push(t)})),o.assessments=s().map(a.assessments,(function(e){return function(e){var t={};return t.id=e.id,t.taskId=e.id,t.source=s().defaults({},e.details),t.source.points=e.points,function(e,t){var n=null;if(t.task.multipleChoice)n=t.task.multipleChoice,e.type=p.MULTIPLE_CHOICE,e.source.multipleResponse=n.isMultipleResponse,e.source.isRandomized=n.isRandomized,e.source.expectedAnswerIds=n.expectedAnswerIds,e.source.answers=s().map(n.options,(function(e){return{_id:e.id,answer:e.answer}}));else if(t.task.fillInBlanks){n=t.task.fillInBlanks,e.type=p.FIB;var i=s().flatMap(n.texts,(function(e){return[e,0]}));i.pop(),e.source.showValues=!s().isEmpty(n.selectableAnswers),e.source.expectedAnswers=n.expectedAnswers,e.source.tokens={blank:s().isEmpty(n.selectableAnswers)?void 0:n.selectableAnswers,text:i,regexPositions:s().isEmpty(n.regexPositions)?[]:n.regexPositions}}else t.task.codeTest?(n=t.task.codeTest,e.type=p.TEST):t.task.codeOutputCompare?(n=t.task.codeOutputCompare,e.type=p.COMPARE,e.source.feedbacks=n.feedbacks,e.source.expectedOutputs=n.expectedOutputs):t.task.custom?(n=t.task.custom,e.type=p.CUSTOM):t.task.freeText?(n=t.task.freeText,e.type=p.FREE_TEXT,e.source.previewType=n.previewType):t.task.freeTextAuto?(n=t.task.freeTextAuto,e.type=p.FREE_TEXT_AUTO,e.source.previewType=n.previewType):t.task.mathStack?(n=t.task.mathStack,e.type=p.MATH,e.source.question=n.question):t.task.gradeBook?(n=t.task.gradeBook,e.type=p.GRADE_BOOK):t.task.jupyterNotebook?(n=t.task.jupyterNotebook,e.type=p.JUPYTER_NOTEBOOK):t.task.parsonsPuzzle?(n=t.task.parsonsPuzzle,e.type=p.PARSONS_PUZZLE,e.source.initial=n.initial,e.source.options=n.options,e.source.grader=n.grader):t.task.senseNetwork&&(n=t.task.senseNetwork,e.type=p.SENSE_NETWORK,e.source.gradable=n.gradable,e.source.filename=n.filename);n&&(e.source.arePartialPointsAllowed=n.arePartialPointsAllowed)}(t,e),t}(e)})),o.bookStructure=a.bookStructure?function(e){var t;try{t=JSON.parse(e)}catch(e){t={}}return t}(a.bookStructure):{children:[]},d&&((l=s().clone(o)).metadata=s().clone(o.metadata),l.metadata.sections=u);return{result:o,resultWebp:l}}(i);v.guides=b.result,v.guidesWebp=b.resultWebp}var y=n&&v.guidesWebp||v.guides,w=y?s()(y.metadata.sections).map("id").keyBy((function(e){return e})).value():{};if(y&&y.bookStructure){if(g){var _=(k=y.bookStructure.children,P=s().keyBy(g.pages,(function(e){return e})),Z=function e(t){var n=[];return s().each(t,(function(t){t.children?n=n.concat(t,e(t.children)):n.push(t)})),n},s()(k).thru(Z).map((function(e){return P[e.id]&&e.pageId})).compact().value());y.metadata.sections=s().filter(y.metadata.sections,(function(e){return s().includes(_,e.id)}))}y.bookStructure.children=d(s().cloneDeep(y.bookStructure.children),y.metadata.sections,w)}var k,P,Z;var x=i.assignmentVersion.codioMenuFilterJson&&JSON.parse(i.assignmentVersion.codioMenuFilterJson),C=i.started.penaltyDisabled?null:function(e,t){if(!e)return null;var n=new Date,i=s()(e).map((function(e){return e.date=new Date(e.applyAfter),e})).filter((function(e){return e.date.getTime()+6e4*t<n.getTime()})).value();return s().maxBy(i,(function(e){return e.date.getTime()}))}(o.penalty,m);return{guides:y,eduStartedAssignmentInfo:i,penaltyInfo:{penalty:C,penaltyApprovedDate:i.started.penaltyApprovedDate,penaltyExtendMin:m},bookData:g,codioMenuFilter:x,assignee:c}}(n.ownerId,e,t)||{},{authorAssignment:e.edu&&e.edu.authorAssignment})};var p={TEST:"test",MULTIPLE_CHOICE:"multiple-choice",FIB:"fill-in-the-blanks",MATH:"math-stack",COMPARE:"code-output-compare",CUSTOM:"custom",FREE_TEXT:"free-text",FREE_TEXT_AUTO:"free-text-auto",GRADE_BOOK:"grade-book",JUPYTER_NOTEBOOK:"jupyter-notebook",PARSONS_PUZZLE:"parsons-puzzle",SENSE_NETWORK:"sense-network",SEARCH:"search"};function f(e){try{return JSON.parse(e)}catch(e){return{}}}const h=u;var m=n(54565),g=n(20294),v={},b=m.Z.get("eduServer"),y=s().partial(c.Z.request,"ProjectManager"),w=s().partial(c.Z.request2,b,"project"),_=s().partial(c.Z.request,"ImportManager"),k=s().partial(c.Z.fileRequest,"ImportManager"),P=c.Z.pluck;v.create=function(e,t,n){return y("createProject",{name:e,account:t,is_public:n.isPublic,description:n.desc,type:n.type,stack:n.stack}).then(c.Z.standardCallbackTask)},v.createFromPack=function(e,t,n){return y("createProjectFromPack",{name:e,account:t,is_public:n.isPublic,description:n.desc,pack:n.pack,credentials:n.credentials,areDefaultsFromStarterPack:n.areDefaultsFromStarterPack}).then(c.Z.standardCallbackTask)},v.import=function(e,t,n,i){var r;if("file"===n)r=k("importFromZip",{file:t,filename:e,isPublic:i.isPublic,desc:i.desc,stack:i.stack});else if("ftp"===n||"sftp"===n)r=_("importFromFtp",{url:t,type:n,path:i.path,fileName:e,is_public:i.isPublic,description:i.desc,credentials:i.credentials,mode:i.mode,stack:i.stack});else{r=_("git"===n?"importFromGit":"importFromHG",{url:t,fileName:e,is_public:i.isPublic,credentials:i.credentials,description:i.desc,stack:i.stack})}return r.then(c.Z.standardCallbackTask)},v.update=function(e){return y("updateProject",{project:e}).then(P("guid"))},v.remove=function(e){return y("removeProject",{guid:e}).then(P("guid"))},v.getProject=function(e){return y("getProject",{guid:e,loadStructure:!0})},v.subscribe=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};if(s().includes(t,":")){var a=t.split(":");t=a[0]}return g.ZP.hasWebpSupport().then((function(a){return w("subscribeToProject",{accountName:e,projectName:t,projectId:n,ssoToken:i,hasWebpSupport:a}).then((function(e){return r("loadProject:waitProjectData"),c.Z.onlyNsCallbackTask({message:e})})).then((function(e){return r("loadProject:convertProjectData"),h.convertProjectData(e)}))}))},v.getInfoByName=function(e,t){return y("getProjectByName",{accountName:e,projectName:t})},v.getByIds=function(e){return y("getProjectsList",{guids:e}).then(P("projects"))},v.all=function(e){return y("getProjects",{account:e}).then(P("projects"))},v.shared=function(){return y("getSharedProjects",{}).then(P("shared"))},v.permissions=function(e){return y("getPermissionForProject",{projectId:e})},v.public=function(e){return y("getPublicProjects",{name:e}).then(P("public"))},v.fork=function(e,t,n){return y("fork",{guid:e,name:t,type:n}).then(c.Z.standardCallbackTask)},v.checkProjectClonable=function(e){return y("checkProjectClonable",{projectId:e})},v.git=function(e,t,n,i){var r,a=o.Z.currentProject;return y("git",{accountName:e,projectName:t,command:n,credentials:i}).then((function(e){return(r=e).command=n,a.checkout(r.currentBranch)})).then((function(){return r}))},v.getGitCredentialsList=function(e,t){return y("getGitCredentialsList",{accountName:e,projectName:t}).then((function(e){var t={};return s().each(e,(function(e){t[e.remote]={user:e.username,pass:e.password}})),t}))},v.assignAlwaysOn=function(e,t){return y("assignAlwaysOn",{projectId:e,organizationId:t})},v.unassignAlwaysOn=function(e){return y("unassignAlwaysOn",{projectId:e})},v.getUsedAlwaysOnBoxSlots=function(e){return y("getUsedAlwaysOnBoxSlots",{organizationId:e})},v.changeStack=function(e,t,n){return y("changeStack",{projectId:e,stack:t,isLatestStack:n})},v.regenerateSecureDomain=function(e){return y("regenerateSecureDomain",{guid:e})},v.fetchContainerServer=function(e){return y("fetchContainerServerForProject",{projectId:e}).then(P("message"))},v.incrementTimeSpent=function(e,t){return y("incrementTimeSpent",{projectId:e,timeChunk:t}).then(P("message"))},v.getEnvVariables=function(){return y("getEnvVariables",{})},v.setEnvVariables=function(e){return y("setEnvVariables",{variables:e})};const Z=v;var x={},C=s().partial(c.Z.request,"BuildManager");x.export=function(e){return C("build",{guid:e})};const S=x;var E={},I=s().partial(c.Z.request,"SshPtyManager");E.deleteServer=function(e,t){return I("deleteServer",{uid:e,host:t})},E.saveServer=function(e,t){return I(e?"createServer":"updateServer",t)},E.fetchServers=function(){return I("getServers")};const T=E;var j={},A=s().partial(c.Z.request,"ForwardingManager");j.addForwarding=function(e,t){return A("addForwarding",{projectId:e,forwardingPort:t})},j.removeForwarding=function(e,t){return A("removeForwarding",{projectId:e,forwardingPort:t})},j.forwardingList=function(e){return A("forwardingList",{projectId:e})};const O=j;var D=n(70199),N={},M=s().partial(c.Z.request,"AccountManager"),F=c.Z.pluck;N.register=function(e,t,n,i,r,a){return M("register",{email:e,user_name:t,password:n,actual_name:i,organizationInvitationToken:r,projects:a||[]},{})},N.registerOAuth=function(e,t,n,i,r,a){return M("registerOAuth",{email:e,user_name:t,actual_name:n,sign_up_token:i,organizationInvitationToken:r,projects:a||[]},{})},N.login=function(e,t,n){return M("login",{type:"password",user_name:e,password:t,oauthToken:n}).then(F("session_id"))},N.logout=function(){return M("logout")},N.removeAccount=function(){return M("removeAccount")},N.initiateResetPassword=function(e){return M("initiateResetPassword",{username_or_email:e})},N.all=function(e,t){return M("getAccounts",{mask:e||"",ids:t})},N.findById=function(e){return M("getAccount",{id:e})},N.findByUsername=function(e){return M("getAccount",{name:e}).then((function(e){return new D.Z(e)}))},N.findByEmail=function(e){return M("getAccountByEmail",{email:e}).then((function(e){if(!e)throw new Error("User not found");return new D.Z(e)}))},N.checkSession=function(){return M("checkSession",{})},N.resendActivation=function(e){return M("resendActivation",{username_or_email:e})},N.continueOAuthImport=function(e,t){var n={oauthSession:e};return t&&(n.projectName=t),M("continueOAuthImport",n)},N.markSessionExpired=function(){return M("markSessionExpired")},N.upgradeSessionToStrict=function(){return M("upgradeSessionToStrict")},N.getGravatarInfos=function(e){return M("getGravatarInfos",{ids:e})};const R=N;var L=n(31706),U=n(52308),B=n.n(U);function q(e){B().notify(e.message,{type:"error"})}function H(e,t,n){var i=["SearchTextManager",t,{projectId:o.Z.currentProject.guid}];return i[2][n]=e,i}const W={search:function(e){var t=H(e,"beginSearch","searchParams");return c.Z.request.apply(null,t).catch(q)},statusReplace:function(e){var t={id:e};return c.Z.request("TaskManager","getTaskStatus",t).catch(q)},statusSearch:function(e,t){var n={logEntryId:e,streamPosition:t};return c.Z.request("SearchTextManager","getSearchStatus",n).catch(q)},replace:function(e){var t=H(e,"beginReplace","replaceParams");return c.Z.request.apply(null,t).catch(q)}};var z={},G=s().partial(c.Z.request,"DeployManager");z.createTarget=function(e){return e.destination.type=e.destination.type.toUpperCase(),e.source?e.source.type=e.source.type.toUpperCase():e.source={type:"PROJECT"},G("createTarget",e)},z.getTarget=function(e){return G("getTarget",{uid:e},null,{noSpinner:!0}).then((function(e){return e.destination.type=e.destination.type.toUpperCase(),e.source.type=e.source.type.toUpperCase(),e}))},z.setDefault=function(e,t){return G("setDefaultTarget",{uid:e,projectGuid:t},null,{noSpinner:!0})},z.getDefault=function(e){return G("getDefaultTarget",{projectGuid:e},null,{noSpinner:!0})},z.getProjectTargets=function(e){return G("getProjectTargets",{projectGuid:e})},z.saveTarget=function(e,t){return delete(t=t||{}).id,t.destination&&(t.destination.type=t.destination.type.toUpperCase()),t.source?t.source.type=t.source.type.toUpperCase():t.source={type:"PROJECT"},G("saveTarget",B().extend(t,{uid:e}))},z.deleteTarget=function(e){return G("deleteTarget",{uid:e})},z.getDestinationProperties=function(e){return G("getDestinationProperties",{type:e})},z.deploy=function(e,t,n){return G("deploy",{uid:e,paths:t,credentials:n},null,{noSpinner:!0})},z.getDeploymentInfo=function(e){return G("getDeploymentInfo",{logEntryId:e},null,{noSpinner:!0})},z.getDeployEntriesByProject=function(e){return G("getDeployEntriesByProject",{projectGuid:e})};const V=z;var K={},Y=s().partial(c.Z.request,"ContainerManager");function J(e,t,n){s().isUndefined(n)||(e[t]=n)}K.reset=function(e){return Y("reset",{projectId:e}).then(c.Z.standardCallbackTask)},K.restart=function(e){return Y("restart",{projectId:e}).then(c.Z.standardCallbackTask)},K.run=function(e,t,n){var i={cmd:t};return J(i,"cwd",n.cwd),J(i,"args",n.args),J(i,"env",n.env),J(i,"timeout",n.timeout),Y("run",{run:i,projectId:e}).then(c.Z.standardCallbackTask)};const Q=K;var X={},$=s().partial(c.Z.request,"OrganizationManager");X.create=function(e){return $("create",e)},X.updateDetails=function(e,t,n,i){return $("updateDetails",{id:e,name:t,email:n,description:i})},X.get=function(e,t){return $("getOrganization",{id:e,name:t})},X.getOrganizationByInvitationToken=function(e){return $("getOrganizationByInvitationToken",{invitationToken:e})},X.resetInvitationToken=function(e){return $("resetInvitationToken",{organizationId:e})},X.addSelfByInvitationToken=function(e){return $("addSelfByInvitationToken",{invitationToken:e})},X.remove=function(e){return $("remove",{id:e})},X.getMyOrganizations=function(e){return void 0===e&&(e={}),$("getMyOrganizations",e)},X.getMembers=function(e){return $("getMembers",e)},X.addMembers=function(e){return $("addMembers",e)},X.removeMembers=function(e){return $("removeMembers",e)},X.createTeam=function(e,t,n,i){return $("createTeam",{orgId:e,name:t,description:n,memberIds:i})},X.updateTeam=function(e,t,n,i){return $("updateTeam",{orgId:e,id:t,name:n,description:i})},X.removeTeam=function(e,t){return $("removeTeam",{orgId:e,teamId:t})},X.getOrganizationTeams=function(e,t){return $("getOrganizationTeams",{id:e,name:t})},X.getTeam=function(e){return $("getTeam",e)},X.getOrganizationsWhereLastOwner=function(){return $("getOrganizationsWhereLastOwner")},X.isMemberOf=function(e,t){return $("isMemberOf",{organization:e,team:[t]}).then((function(e){return e[t]}))},X.isOrganizationNameTaken=function(e){return $("isOrganizationNameTaken",{name:e})},X.isTeamNameTaken=function(e,t,n){return $("isTeamNameTaken",{orgId:e,orgName:t,teamName:n})};const ee=X;var te={},ne=s().partial(c.Z.request,"SubscriptionManager");te.getSubscriptions=function(){return ne("getSubscriptions")};const ie=te;var re={},ae=s().partial(c.Z.request,"GigaBoxesManager");re.isSlotOffered=function(e){return ae("isSlotOffered",{projectId:e})},re.isSlotOfferedOnStart=function(e,t){return c.Z.standardCallbackTask({message:e}).then((function(){return ae("isSlotOffered",{projectId:t})}))};const se=re;var oe=Object.freeze({GUIDES_BUTTON:0,GUIDES_BUTTON_TERMINAL:1,MENU_BUTTON:2,LINK_WITH_COMMAND:3,GUIDES_CHECK_ASSESSMENT:4}),ce={},le=s().partial(c.Z.request,"UserEventManager");ce.EventType=oe,ce.create=function(e,t){var n=s().omitBy(t,s().isNil);return le("create",{type:e,details:n})};const ue=ce;var de={},pe=s().partial(c.Z.eduRequest,"class"),fe=s().partial(c.Z.eduRequest,"unit");de.create=function(e){return pe("create",e,{})},de.find=function(e){return s().isString(e)||s().isRegExp(e)?pe("find",{name:e},{}):pe("find",{},{})},de.getBySlug=function(e,t){return pe("findOne",{slug:t,owner:{id:e}},{})},de.get=function(e){return pe("findOne",{id:e},{})},de.update=function(e,t){return t.id=e,pe("update",t,{})},de.remove=function(e){return pe("delete",{id:e},{})},de.addMembers=function(e){return pe("addMembers",e,{})},de.removeMembers=function(e){return pe("removeMembers",e,{})},de.selectCourse=function(e,t){return de.update(e,{course:t})},de.getPermissions=function(e){return pe("getPermissions",{id:e},{})},de.setPermissions=function(e,t){return pe("setPermissions",{id:e,permissions:t},{})},de.isTeacher=function(){return pe("isTeacher",{},{})},de.isStudent=function(){return pe("isStudent",{},{})},de.getGrades=function(e,t,n){return pe("getGrades",{id:e,unitId:t,userId:n},{})},de.setGrade=function(e,t,n,i){return pe("setGrade",{id:e,unitId:t,userId:n,grade:i.grade,comment:i.comment,mandatory:i.mandatory,percent:i.percent,rubrics:i.rubrics},{})},de.getForksAndUnitsInfo=function(){return fe("getForksAndUnitsInfo",{},{})},de.setForkApprovePenaltyDate=function(e){return fe("setForkApprovePenaltyDate",{projectId:e},{})};const he=de;var me=n(9605),ge=n(70885),ve={INVALID_ARGUMENT:3,NOT_FOUND:5,ALREADY_EXIST:6,PERMISSION_DENIED:7,EMPTY_GUIDES:"EMPTY_GUIDES",METADATA_PARSING:"METADATA_PARSING",BOOK_PARSING:"BOOK_PARSING",RANDOM_ASSESSMENT:"RANDOM_ASSESSMENT",ASSESSMENT_PARSING:"ASSESSMENT_PARSING",CODIO_MENU_PARSING:"CODIO_MENU_PARSING",CONTENT:"CONTENT",ASSESSMENT_PARAMETER_GENERATION_ERROR:"ASSESSMENT_PARAMETER_GENERATION_ERROR",ASSESSMENT_PARAMETER_RENDERING_ERROR:"ASSESSMENT_PARAMETER_RENDERING_ERROR"},be={ERRORS_CODES:ve,ERROR_TEXT_BY_CODE:s().invert(ve),convertPublishError:function(e){var t=e.split("::"),n=(0,ge.Z)(t,2),i=n[0],r=n[1];switch(i){case ve.ASSESSMENT_PARAMETER_RENDERING_ERROR:case ve.ASSESSMENT_PARAMETER_GENERATION_ERROR:return new Error(r);case ve.METADATA_PARSING:case ve.ASSESSMENT_PARSING:return new Error("Metadata parse error, check integrity of ".concat(r||"metadata",", revert to a previously functional version or <<<intercom>>>contact support with course and assignment name<<</intercom>>>."));case ve.RANDOM_ASSESSMENT:return new Error("Check random assessment search");case ve.BOOK_PARSING:return new Error("Book data parse error, check integrity of .guides/book.json");case ve.CODIO_MENU_PARSING:return new Error(".codio-menu file is not a valid JSON");case ve.CONTENT:return new Error("A recent renaming was not properly populated. Reverting recent re-naming of files in .guides/content, or reverting the assignment to a previous version.");default:return Error(i)}}};const ye=be;var we=function(e){return new Date(1e3*e.seconds+e.nanos/1e6)},_e={},ke=m.Z.get("eduServer"),Pe=s().partial(c.Z.request2,ke,"course"),Ze=s().partial(c.Z.request2,ke,"module"),xe=s().partial(c.Z.request2,ke,"unit"),Ce=s().partial(c.Z.fileRequest2,ke+"/file","course");_e.create=function(e){return Pe("create",e,{})},_e.find=function(e){return s().isString(e)||s().isRegExp(e)?Pe("find",{name:e},{}):Pe("find",{},{})},_e.addModule=function(e,t){var n=Pe;return"zip"===t.source.type&&(n=Ce.bind(null,t.source.source),delete t.source.source),n("addModule",{course:{id:e},module:t},{})},_e.removeModule=function(e,t){return Pe("removeModule",{courseId:e,moduleId:t},{})},_e.getModule=function(e){return Pe("getModule",{id:e},{})},_e.getModuleByProject=function(e){return Pe("getModule",{codio_project:e},{})},_e.getBySlug=function(e,t){return Pe("findOne",{slug:t,owner:{id:e}},{})},_e.get=function(e){return Pe("findOne",{id:e},{})},_e.reorderModules=function(e,t){return Pe("reorderModules",{id:e,modules:t},{})},_e.update=function(e,t){return t.id=e,Pe("update",t,{})},_e.updateModule=function(e,t){t.id=e;var n=Pe;return"zip"===t.source.type&&(n=Ce.bind(null,t.source.source),delete t.source.source),n("updateModule",t,{})},_e.refreshModuleSource=function(e){return Pe("refreshModuleSource",{id:e},{})},_e.remove=function(e){return Pe("delete",{id:e},{})},_e.getOwner=function(e){return"organization"===e.type?ee.get(e.id).then((function(e){return{name:e.details.name,slug:e.details.slug}})):"user"===e.type?R.findById(e.id).then((function(e){return{name:e.details.name,slug:e.details.name}})):void 0},_e.createProjectFromModule=function(e){return Pe("createProjectFromModule",e).then((function(e){return new me.Z(e)}))},_e.isUnitFork=function(e){return Ze("isUnitFork",{projectId:e},{})},_e.isUnitTeacher=function(e){return Ze("isUnitTeacher",{projectId:e},{})},_e.setCompleted=function(e){return Pe("setCompleted",e)},_e.findUnitFork=function(e){return xe("findOne",{projectId:e})},_e.incrementForkTimeSpent=function(e,t,n){return Ze("updateForkStat",{projectId:e,chunkSpentSeconds:t,unitId:n})},_e.getPermissions=function(e){return Pe("getPermissions",{id:e},{})},_e.setPermissions=function(e,t){return Pe("setPermissions",{id:e,permissions:t},{})},_e.restoreContent=function(e,t){return Pe("restoreContent",{projectId:e,items:t},{}).then((function(e){return c.Z.onlyNsCallbackTask({message:e})}))},_e.findModuleByProject=function(e,t,n){return Ze("findModuleByProject",{projectId:e,unitId:t,classId:n},{})},_e.getUnitById=function(e){return Ze("getUnitById",{id:e})},_e.testAutograde=function(e,t,n){return Ze("testAutograde",{projectId:e,script:t,env:n},{})},_e.createProjectFromUnit=function(e,t){return Ze("createProjectFromUnit",{unit:e,classId:t||void 0}).then((function(e){return s().isString(e)?c.Z.onlyNsCallbackTask({message:e}):e}))},_e.incrementTimeSpent=function(e,t){return Pe("incrementTimeSpent",{projectId:e,chunckSpentSeconds:t})},_e.getGrades=function(e,t,n){return Pe("getGrades",{courseId:e,assignmentId:t,assignee:n})},_e.setTeacherAssignmentGrade=function(e){var t=e.courseId,n=e.assignmentId,i=e.assignee,r=e.grade,a=e.comments,s=e.rubrics,o=e.format;return Pe("setTeacherAssignmentGrade",{courseId:t,assignmentId:n,assignee:i,grade:r,comments:a,rubrics:s,format:o})},_e.setAssignmentGradeOverride=function(e){var t=e.courseId,n=e.assignmentId,i=e.studentId,r=e.grade,a=e.comments,s=e.remove,o=e.rubrics,c=e.format;return Pe("setAssignmentGradeOverride",{courseId:t,assignmentId:n,studentId:i,grade:r,comments:a,remove:s,rubrics:o,format:c})},_e.setAssignmentExtraCredit=function(e){return Pe("setAssignmentExtraCredit",e)},_e.setPenaltyDisabled=function(e){return Pe("setPenaltyDisabled",e)},_e.findOne=function(e,t,n,i,r){var a={courseId:e,assignmentId:t,studentId:n,groupId:i,view:r};return r&&(a.view=r),Pe("findOne",a)},_e.applyAssessmentGradingRubrics=function(e,t,n,i,r){return Pe("applyAssessmentGradingRubrics",{assignmentId:e,assignee:t,assessmentId:n,remove:i,rubric:r})},_e.changeAssessmentGradingRubrics=function(e,t,n){return Pe("changeAssessmentGradingRubrics",{assignmentId:e,remove:t,rubric:n})},_e.loadAssessmentGradingRubricsForCopy=function(){return Pe("loadAssessmentGradingRubricsForCopy",{})},_e.loadAssessmentGradingRubrics=function(e){return Pe("loadAssessmentGradingRubrics",e)},_e.initiatePublishAssignment=function(e,t,n,i){return Pe("publishAssignment",{assignmentId:e,changelog:t,updateStack:n||!1,updateGigabox:i||!1}).then((function(e){return{publishResultsList:e.publishResultsList.map((function(e){return e.createdAt=we(e.createdAt),e})),taskId:e.taskId}}))},_e.waitPublishAssignmentComplete=function(e){return c.Z.onlyNsCallbackTask({message:e}).catch((function(e){var t=e.message;throw ye.convertPublishError(t)}))},_e.assignmentWritableCopy=function(e,t){return Pe("assignmentWritableCopy",{assignmentId:e,assignee:t},{}).then((function(e){return e.task&&e.task.taskId?c.Z.onlyNsCallbackTask({message:e.task.taskId}):e.existing}))},_e.resetAssignment=function(e,t){return Pe("resetAssignment",{assignmentId:e,assignee:t})},_e.updatePenaltyApprovedDate=function(e){return Pe("updatePenaltyApprovedDate",{projectId:e})},_e.ensureAssignmentStarted=function(e,t){return Pe("ensureAssignmentStarted",{assignmentId:e,ssoToken:t}).then((function(e){return e.task&&e.task.taskId?c.Z.onlyNsCallbackTask({message:e.task.taskId}):e.existing}))},_e.pushSurveyAnswers=function(e,t,n){return Pe("pushSurveyAnswers",{surveyId:e,assignmentId:t,answers:n})};const Se=_e;var Ee={},Ie=s().partial(c.Z.eduRequest,"module");Ee.publishAuthorProject=function(e){return Ie("publishAuthorProject",{projectId:e},{}).then((function(e){return c.Z.onlyNsCallbackTask({message:e})}))};const Te=Ee;var je={},Ae=s().partial(c.Z.eduRequest,"studentsProject");je.create=function(e){return Ae("create",e,{})},je.remove=function(e){return Ae("delete",{id:e},{})},je.batchCreate=function(e){return Promise.all(s().map(e,(function(e){return je.create(e)})))},je.batchRemove=function(e){return Promise.all(s().map(e,(function(e){return je.remove(e)})))},je.findByClass=function(e){return Ae("find",{class:e},{})},je.find=function(e){return Ae("find",e,{})},je.findOne=function(e){return Ae("findOne",e,{})},je.createProject=function(e){return Ae("createProject",{id:e}).then(c.Z.standardCallbackTask).then((function(e){return new me.Z(e)}))},je.update=function(e,t){return t.id=e,Ae("update",t,{})},je.markAsCompleted=function(e){return Ae("markAsCompleted",{id:e})};const Oe=je;var De={},Ne=s().partial(c.Z.eduRequest,"permissions");De.getPermissions=function(e){return Ne("getPermissions",e,{})},De.setPermissions=function(e,t){return s().isString(name)||s().isRegExp(name)?Ne("setPermissions",{id:e,permissions:t},{}):Ne("setPermissions",{},{})};const Me=De;var Fe={},Re=s().partial(c.Z.eduRequest,"gradingTemplate");Fe.get=function(e,t){return Re("find",{organizationId:e,templateId:t},{})};const Le=Fe;var Ue={},Be=s().partial(c.Z.request,"StacksManager");Ue.all=function(){return Be("getAllStacks",{},{})},Ue.my=function(){return Be("getMyStacks",{},{})},Ue.popular=function(){},Ue.create=function(e){return Be("createStack",e,{}).then(c.Z.standardCallbackTask)},Ue.publishVersion=function(e){return Be("publishVersion",e,{}).then(c.Z.standardCallbackTask)},Ue.update=function(e){return Be("updateStack",e,{})},Ue.updateVersion=function(e){return Be("updateVersion",e,{}).then(c.Z.standardCallbackTask)},Ue.getById=function(e){return Be("getStackById",{id:e},{})},Ue.getByVersionId=function(e){return Be("getStackByVersionId",{id:e},{})},Ue.getStacksByVersionIds=function(e){return Be("getStacksByVersionIds",{ids:e},{})},Ue.remove=function(e){return Be("deleteStack",{id:e},{})},Ue.changeOwner=function(e,t,n){return Be("changeStackOwner",{id:e,ownerId:t,ownerType:!0===n?"ORGANIZATION":"USER"},{})};const qe=Ue;var He={},We=s().partial(c.Z.request,"StacksManager");He.all=function(){return We("getAllPacks",{},{})},He.my=function(){return We("getMyPacks",{},{})},He.popular=function(){},He.create=function(e){return We("createPack",e,{}).then(c.Z.standardCallbackTask)},He.update=function(e){return We("updatePack",e,{}).then(c.Z.standardCallbackTask)},He.getById=function(e){return We("getPackById",{id:e},{})},He.remove=function(e){return We("deletePack",{id:e},{})},He.changeOwner=function(e,t,n){return We("changePackOwner",{id:e,ownerId:t,ownerType:!0===n?"ORGANIZATION":"USER"},{})};const ze=He;var Ge=n(4942),Ve=n(15861),Ke=n(87757),Ye=n.n(Ke),Je=n(21459);function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){(0,Ge.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $e={},et=m.Z.get("eduServer"),tt=s().partial(c.Z.request2,et,"socrates"),nt=s().partial(c.Z.request2,et,"assessments");$e.getLibrary=function(e){return tt("loadLibrary",{libraryId:e.libraryId,orgSlug:e.orgSlug,slug:e.librarySlug})},$e.listLibraries=function(e){return tt("listLibrary",{organizationId:e.organizationId,userId:e.userId})},$e.updateAssessment=function(e){return tt("saveAssessment",{libraryId:e.libraryId,projectId:e.projectId,assessmentId:e.assessmentId,source:e.source,type:e.type,parametersScript:e.parameters})},$e.loadTags=function(e){return tt("loadTags",e)},$e.searchInLibrary=function(e){return tt("searchInLibrary",{libraryId:e.libraryId,search:e.search})},$e.loadAssessment=function(e){return tt("loadAssessment",{assessmentId:e})},$e.addToProject=function(e){return tt("addToProject",{projectId:e.projectId,assessmentId:e.assessmentId})},$e.validateJupyter=function(e){return nt("validateJupyter",{projectId:e},{})},$e.validateFibAssessment=function(){var e=(0,Ve.Z)(Ye().mark((function e(t,n){return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nt("validateFibAssessment",{projectId:t,assessment:n},{}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$e.fetchGuideState=function(e){return nt("fetchGuideState",e,{})},$e.fetchDraft=function(e){return nt("fetchDraft",e,{})},$e.removeDraft=function(e){return nt("removeDraft",e,{})},$e.removeAnswers=function(e){return nt("removeAnswers",e,{})},$e.saveState=function(e){return nt("saveState",e,{})},$e.compileMath=function(e){return nt("compileMath",e,{})};$e.check=function(e){return nt("check",e,{}).then((function(t){return function(e,t,n){return e.isTask?c.Z.onlyNsCallbackTask({message:e.taskId}).then((function(i){var r=Je.ZP.convertCheckTaskResult(i,t);return n?Xe({usedAttempts:e.usedAttempts},r):r})):n?Xe({usedAttempts:e.usedAttempts},e.attempt):e}(t,e.type||e.assessment.type,!e.assessment)}))},$e.removeResult=function(e){return nt("removeResult",e,{})},$e.submitJupyter=function(e){return nt("submitJupyter",e,{}).then((function(e){return c.Z.onlyNsCallbackTask({message:e})}))},$e.submitGradeBook=function(e){return nt("submitGradeBook",e,{})};const it=$e;var rt={},at=s().partial(c.Z.request,"ImageUploaderManager");rt.sign=function(e){return at("sign",{request:e},{})};const st=rt;var ot={},ct=s().partial(c.Z.eduRequest,"educationOrganizations");ot.find=function(e){return ct("find",e,{})};const lt=ot;var ut=function(e){var t=s().omit(e,["commentsList"]);return t.comments=e.commentsList.map((function(e){var t=s().clone(e);return t.createdAt=we(t.createdAt),t.lastEditedAt=we(t.lastEditedAt),t})),t},dt=function(e){var t=e.commentThread,n=e.usersList;return{thread:ut(t),users:n}},pt=m.Z.get("eduServer"),ft=s().partial(c.Z.request2,pt,"codeComments"),ht=function(e){return delete e.collapsed,ft("add",e,{}).then(dt)},mt=function(e){return ft("get",{projectId:e},{}).then((function(e){var t=e.commentThreads,n=e.users;return{commentThreads:t=t.map(ut),users:n}}))},gt=function(e){return ft("remove",{id:e},{})},vt=function(e,t){return ft("edit",{id:e,comment:t},{}).then(dt)},bt=function(e,t){return ft("update",{items:e,projectId:t},{})},yt=function(e){return ft("makeObsolete",{threadIds:e},{})},wt=function(e){return ft("makeResolved",{threadIds:e},{})},_t=function(e,t){return ft("collapse",{threadId:e,collapsed:t},{})},kt=function(e,t){return ft("moveToPath",{items:e,projectId:t},{})},Pt=s().partial(c.Z.request,"OpenTokManager"),Zt=function(e){return Pt("loadSession",{projectId:e})},xt=function(e,t){return Pt("startCall",{projectId:e,target:t})};const Ct={ProjectManager:Z,SSHManager:T,ForwardingManager:O,BuildManager:S,AccountManager:R,ProjectStructureManager:L.Z,search:W,DeployManager:V,containerManager:Q,OrganizationManager:ee,SubscriptionManager:ie,ClassManager:he,CourseManager:Se,ModuleManager:Te,StudentsProjectManager:Oe,EducationManager:Me,GradingTemplateManager:Le,StacksManager:qe,PacksManager:ze,ImageUploaderManager:st,GigaBoxesManager:se,AssessmentManager:it,EducationOrganizationsManager:lt,standardCallbackTask:c.Z.standardCallbackTask,CodeCommentsManager:i,UserEventManager:ue,OpenTokManager:r}},57866:(e,t,n)=>{"use strict";n.d(t,{MJ:()=>w,rQ:()=>y,xG:()=>b});var i=n(96486),r=n.n(i),a=n(99469),s=n(5945),o=n(37371),c=n(76638),l=n(49088),u=n(54565),d=n(20294),p=u.Z.get("zeusUri");var f,h,m,g=(f=o.cP,h=window.__GRPCWEB_DEVTOOLS__||function(){},m=f(p),h([m]),m),v=function(){var e=(0,l.p)();return{authorization:"Bearer ".concat(e)}};function b(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=new s.StoreProjectDataRequest;return r.setProjectId(e),r.setWorkspace(t),r.setKey(n),r.setValue(function(e){var t=new a.StringValue;void 0!==e&&t.setValue(e);return t}(i)),new Promise((function(e,t){g.storeProjectData(r,v(),(function(n,i){n?t(new Error(n.message)):e(i)}))}))}function y(e,t){var n=new s.ProjectDataRequest;return n.setProjectId(e),n.setWorkspace(t),function(e){var t=[],n=d.ZP.promise.deferred();return e.on("data",(function(e){t.push({key:e.getKey(),value:e.getValue()})})),e.on("end",(function(){return n.resolve(t)})),e.on("error",(function(e){return n.reject(e)})),e.on("status",(function(e){0===e.code?n.resolve(t):n.reject(new Error(e.details))})),n.promise}(g.fetchProjectData(n,v()))}function w(e,t){var n=new s.GenerateVariantForAssessmentRequest;n.setProjectId(e),n.setScriptPath(t);var i=d.ZP.promise.deferred();return g.generateVariantForAssessment(n,v(),(function(e,t){e?i.reject(new Error(e.message)):c.Z.onlyNsCallbackTask({message:t.getTaskId()}).then((function(e){return i.resolve(e)})).catch((function(e){return i.reject(new Error(_(e)))}))})),i.promise}var _=function(e){var t=["ASSESSMENT_PARAMETER_GENERATION_ERROR","TIMEOUT_ERROR"],n=r().some(t,(function(t){return r().startsWith(e,"".concat(t,":"))}))?e.replace(/^\s*.*?::/,""):e;return r().escape(n)}},21459:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>l,a4:()=>o,q4:()=>c});var i=n(96486),r=n.n(i),a=n(76900),s="Terminated by timeout",o=function(e){var t=e?e.lastIndexOf(s):-1;return-1!==t?"".concat(e.substr(0,t)).concat("Code execution has been terminated by a timeout - this is often the result of a code error, such as an endless loop."):e},c=function(e){return-1!==e.lastIndexOf(s)};const l={convertCheckTaskResult:function(e,t){switch(t){case a.ZP.CODE_OUTPUT_COMPARE:case a.ZP.TEST:return function(e){var t;e.expectedOutputsList&&(t=r().map(e.expectedOutputsList,(function(e){return{output:e.output,returnCode:e.returnCode&&e.returnCode.value}})));var n=e.runResult,i={points:e.points,guidance:e.guidance,result:{expectedOutputs:t,code:n&&(n.returnCode||n.code||0),stdout:n&&o(n.stdout),stderr:n&&o(n.stderr),status:"DONE",answer:e.answer},submittedAt:e.submittedAt&&new Date(e.submittedAt)};return r().isString(e.feedback)&&(i.feedback=e.feedback),i.format=e.format,i}(e);case a.ZP.FREE_TEXT_AUTO:return function(e){var t={points:e.points,guidance:e.guidance,comments:e.runResult&&o(e.runResult.stdout)+o(e.runResult.stderr),result:{answer:e.answer,status:"DONE"},submittedAt:e.submittedAt&&new Date(e.submittedAt)};return r().isString(e.feedback)&&(t.feedback=e.feedback),t.format=e.format,t}(e);case a.ZP.SENSE_NETWORK:return function(e){return{points:e.points,guidance:e.guidance,result:{status:"DONE",graded:e.graded,preExecFailed:e.preExecFailed},submittedAt:e.submittedAt&&new Date(e.submittedAt)}}(e)}return e}}},76638:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(96486),r=n.n(i),a=n(33105),s=n(54565),o=n(20294),c=s.Z.get("serverUrl"),l=s.Z.get("eduServer"),u=function(e,t,n,i,s,o){var c='"'+t+":"+n+'"';return new Promise((function(l,u){a.Z.apiRequest({object:t,method:n,data:i||{},params:s||{},options:o,serverUrl:e,callback:function(e){if(r().isEmpty(e)||e.error){var t=new Error(e.message);return e.code&&(t.code=e.code),e.additionalInfo&&(t.additionalInfo=e.additionalInfo),console.debug("REQUEST:",c,"Failed!",t.message),u(t)}l(e.response)}})}))},d=function(e,t){if(!e.message)return Promise.reject(new Error("task id is not defined"));var n=o.ZP.promise.deferred();return a.Z.pingTaskStatus({taskId:e.message,callback:function(e){if(e.error){var t=r().compact([e.code,e.message]).join("::");n.reject(new Error(t))}else n.resolve(e.response.message)}},t),n.promise};const p={request:r().partial(u,c),eduRequest:r().partial(u,l),fileRequest:function(e,t,n){return new Promise((function(i,s){a.Z.fileRequest({object:e,method:t,file:n.file,fileName:n.filename,is_public:n.isPublic,description:n.desc,stack:n.stack,callback:function(e){if(r().isEmpty(e)||e.error){var t=new Error(e.message);t.message,s(t)}i(e.response)}})}))},fileRequest2:function(e,t,n,i,s){return new Promise((function(o,c){var l={object:t,method:i,data:JSON.stringify(s),file:n,callback:function(e){if(location,r().isEmpty(e)||e.error){var t=new Error(e.message);return location,t.message,c(t)}o(e.response)}};a.Z.fileRequest(e,l)}))},request2:u,pluck:function(e){return r().partialRight(r().result,e)},standardCallbackTask:d,onlyNsCallbackTask:function(e){return d(e,!0)}}},31706:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(96486),r=n.n(i),a=n(76638),s=n(33105),o={},c=r().partial(a.Z.request,"ProjectStructureManager");o.uploadFile=function(e,t,n,i,a,o){return new Promise((function(c,l){s.Z.fileRequest({object:"ProjectStructureManager",method:"multipartUploadFile",file:n,projectId:t,path:e,onProgress:i,onAbort:a,control:o,callback:function(e){if(location,r().isEmpty(e)||e.error){var t=new Error(e.message);return location,t.message,l(t)}c(e.response)}})}))},o.syncStructure=function(e){return c("syncStructure",{projectId:e})},o.removePath=function(e,t){return c("removePath",{projectId:e,path:r().isString(t)?[t]:t})},o.createFile=function(e,t){return c("createFile",{projectId:e,path:t})},o.moveItem=function(e,t,n){return c("moveItem",{projectId:e,sourcePath:t,destinationPath:n})},o.copyItem=function(e,t,n){return c("copyItem",{projectId:e,sourcePath:t,destinationPath:n})},o.makeDirectory=function(e,t){return c("makeDirectory",{projectId:e,path:t})},o.uploadFromS3File=function(e,t,n,i){return c("uploadFileFromS3",{guid:e,path:t,key:i,bucket:n}).then(a.Z.standardCallbackTask)};const l=o},49721:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(70885),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(15861),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(87757),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(96486),lodash__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__),jquery__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(52308),jquery__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__),sha1__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(88690),sha1__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(sha1__WEBPACK_IMPORTED_MODULE_3__),core_extension__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(18098),core_router__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(88392),core_settings__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(44442),core_events__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(93443),_ns__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1650),core_account__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(59050),core_tools__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(20294),core_cookie__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(54137),core_notifications__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(97137),_access_token__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(49088),core_ns_lib_events_channel__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(33468),core_time_tracking__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(61170),core_loading_spinner__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(56690),_pendo__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(73380),_hubspot__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(70803),_sentry__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(23318),app={running:!1,currentProject:null,ide:null,currentEditor:null,router:null,online:!1,ns:_ns__WEBPACK_IMPORTED_MODULE_8__.Z,collaborationDriverId:null};function disableHistoryWithBackspace(){var e=/INPUT|TEXTAREA/i,t=/RADIO|CHECKBOX|SUBMIT/i;jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).bind("keydown keypress",(function(n){var i;if(8===n.keyCode){var r=n.srcElement||n.target;if(e.test(n.target.tagName)){var a=!1;r.attributes.type&&(a=t.test(r.attributes.type.value)),i=r.readOnly||r.disabled||a}else i=!0}else i=!1;i&&n.preventDefault()}))}function bindSupportLink(){jquery__WEBPACK_IMPORTED_MODULE_2___default()("body").on("click",'a[href="mailto:help@codio.com"]',(function(){return core_events__WEBPACK_IMPORTED_MODULE_7__.Z.publish("command:support:show"),!1}))}function executeCustomScripts(user){var idSha1=sha1__WEBPACK_IMPORTED_MODULE_3___default()(user.account);lodash__WEBPACK_IMPORTED_MODULE_1___default().forEach(user.customScripts,(function(script){var evalScript=["(function(window, document, codio) {",script,"})(window, document, {",'userId: "',user.account,'",','email: "',user.get("details").get("email"),'",','anonymousId: "',idSha1,'",','type: "',user.get("details").get("type"),'"})'].join("");try{eval(evalScript)}catch(e){}}))}app._currentUser=null,Object.defineProperty(app,"currentUser",{get:function(){return this._currentUser},set:function(e){this._currentUser=e,_sentry__WEBPACK_IMPORTED_MODULE_18__.Z.setUser({id:e.account})}}),app.start=function(){var e=(0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_19__.Z)(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark((function e(t){var n,i,r,a,s,o,c;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.running){e.next=2;break}return e.abrupt("return",this);case 2:return(n=core_tools__WEBPACK_IMPORTED_MODULE_10__.ZP.getURLParameter("referrer"))&&!core_cookie__WEBPACK_IMPORTED_MODULE_11__.Z.cookie("referrer")&&(i=core_tools__WEBPACK_IMPORTED_MODULE_10__.ZP.url.parse(window.location.href).host,core_cookie__WEBPACK_IMPORTED_MODULE_11__.Z.cookie("referrer",n,{domain:i.split(":")[0],path:"/",expires:30})),disableHistoryWithBackspace(),this.running=!0,r=this,e.prev=7,e.next=10,Promise.all([core_account__WEBPACK_IMPORTED_MODULE_9__.Z.getMyAccount(!0),(0,_access_token__WEBPACK_IMPORTED_MODULE_13__.T)()]);case 10:a=e.sent,s=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_20__.Z)(a,1),o=s[0],(0,_ns__WEBPACK_IMPORTED_MODULE_8__.I)(),o.isAnonymous()&&(window.location="/p/login?externalPath=true&nextPath="+window.location.pathname),o.customScripts&&o.customScripts.length&&executeCustomScripts(o),_pendo__WEBPACK_IMPORTED_MODULE_17__.j(o),_hubspot__WEBPACK_IMPORTED_MODULE_21__.j(o),o.ipConsents&&(window.location="/p/ip-consent-agreement?externalPath=true&nextPath="+window.location.pathname),r.currentUser=o,r.startRouting(t),core_settings__WEBPACK_IMPORTED_MODULE_6__.Z.hotkey.refresh(),core_events__WEBPACK_IMPORTED_MODULE_7__.Z.publish("app:started"),bindSupportLink(),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(7),c=e.t0.message,lodash__WEBPACK_IMPORTED_MODULE_1___default().includes(c,"Locked")?core_notifications__WEBPACK_IMPORTED_MODULE_12__.Z.locked():lodash__WEBPACK_IMPORTED_MODULE_1___default().includes(c,"User not passed")?window.location="/p/login?externalPath=true&nextPath="+window.location.pathname:core_notifications__WEBPACK_IMPORTED_MODULE_12__.Z.serverError(c);case 30:case"end":return e.stop()}}),e,this,[[7,26]])})));return function(t){return e.apply(this,arguments)}}(),app.startRouting=function(e){this.router=new core_router__WEBPACK_IMPORTED_MODULE_5__.Z,this.router.map((function(t){t("/:username/:project").to(e,(function(t){t("/").to({}),t("/:extension/").to(e.extension),t("/:extension/*path").to(e.extension)}))})),this.router.startRouting()},lodash__WEBPACK_IMPORTED_MODULE_1___default().forEach(Object.keys(core_extension__WEBPACK_IMPORTED_MODULE_4__.Z),(function(e){app[e]=core_extension__WEBPACK_IMPORTED_MODULE_4__.Z[e]})),core_events__WEBPACK_IMPORTED_MODULE_7__.Z.subscribe("collaboration:driverUpdated",(function(e,t){app.collaborationDriverId=t||null}));const __WEBPACK_DEFAULT_EXPORT__=app},20184:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>X,jF:()=>J});var i=n(96486),r=n.n(i),a=n(15861),s=n(87757),o=n.n(s),c=n(52308),l=n.n(c),u=n(177),d=n.n(u),p=n(93443),f=n(97137),h={af:"Afghanistan",ax:"Åland Islands",al:"Albania",dz:"Algeria",as:"American Samoa",ad:"Andorra",ao:"Angola",ai:"Anguilla",aq:"Antarctica",ag:"Antigua and Barbuda",ar:"Argentina",am:"Armenia",aw:"Aruba",au:"Australia",at:"Austria",az:"Azerbaijan",bs:"Bahamas",bh:"Bahrain",bd:"Bangladesh",bb:"Barbados",by:"Belarus",be:"Belgium",bz:"Belize",bj:"Benin",bm:"Bermuda",bt:"Bhutan",bo:"Bolivia, Plurinational State of",bq:"Bonaire, Sint Eustatius and Saba",ba:"Bosnia and Herzegovina",bw:"Botswana",bv:"Bouvet Island",br:"Brazil",io:"British Indian Ocean Territory",bn:"Brunei Darussalam",bg:"Bulgaria",bf:"Burkina Faso",bi:"Burundi",kh:"Cambodia",cm:"Cameroon",ca:"Canada",cv:"Cape Verde",ky:"Cayman Islands",cf:"Central African Republic",td:"Chad",cl:"Chile",cn:"China",cx:"Christmas Island",cc:"Cocos (Keeling) Islands",co:"Colombia",km:"Comoros",cg:"Congo",cd:"Congo, the Democratic Republic of the",ck:"Cook Islands",cr:"Costa Rica",ci:"Côte d'Ivoire",hr:"Croatia",cu:"Cuba",cw:"Curaçao",cy:"Cyprus",cz:"Czech Republic",dk:"Denmark",dj:"Djibouti",dm:"Dominica",do:"Dominican Republic",ec:"Ecuador",eg:"Egypt",sv:"El Salvador",gq:"Equatorial Guinea",er:"Eritrea",ee:"Estonia",et:"Ethiopia",fk:"Falkland Islands (Malvinas)",fo:"Faroe Islands",fj:"Fiji",fi:"Finland",fr:"France",gf:"French Guiana",pf:"French Polynesia",tf:"French Southern Territories",ga:"Gabon",gm:"Gambia",ge:"Georgia",de:"Germany",gh:"Ghana",gi:"Gibraltar",gr:"Greece",gl:"Greenland",gd:"Grenada",gp:"Guadeloupe",gu:"Guam",gt:"Guatemala",gg:"Guernsey",gn:"Guinea",gw:"Guinea-Bissau",gy:"Guyana",ht:"Haiti",hm:"Heard Island and McDonald Islands",va:"Holy See (Vatican City State)",hn:"Honduras",hk:"Hong Kong",hu:"Hungary",is:"Iceland",in:"India",id:"Indonesia",ir:"Iran, Islamic Republic of",iq:"Iraq",ie:"Ireland",im:"Isle of Man",il:"Israel",it:"Italy",jm:"Jamaica",jp:"Japan",je:"Jersey",jo:"Jordan",kz:"Kazakhstan",ke:"Kenya",ki:"Kiribati",kp:"Korea, Democratic People's Republic of",kr:"Korea, Republic of",kw:"Kuwait",kg:"Kyrgyzstan",la:"Lao People's Democratic Republic",lv:"Latvia",lb:"Lebanon",ls:"Lesotho",lr:"Liberia",ly:"Libya",li:"Liechtenstein",lt:"Lithuania",lu:"Luxembourg",mo:"Macao",mk:"Macedonia, the former Yugoslav Republic of",mg:"Madagascar",mw:"Malawi",my:"Malaysia",mv:"Maldives",ml:"Mali",mt:"Malta",mh:"Marshall Islands",mq:"Martinique",mr:"Mauritania",mu:"Mauritius",yt:"Mayotte",mx:"Mexico",fm:"Micronesia, Federated States of",md:"Moldova, Republic of",mc:"Monaco",mn:"Mongolia",me:"Montenegro",ms:"Montserrat",ma:"Morocco",mz:"Mozambique",mm:"Myanmar",na:"Namibia",nr:"Nauru",np:"Nepal",nl:"Netherlands",nc:"New Caledonia",nz:"New Zealand",ni:"Nicaragua",ne:"Niger",ng:"Nigeria",nu:"Niue",nf:"Norfolk Island",mp:"Northern Mariana Islands",no:"Norway",om:"Oman",pk:"Pakistan",pw:"Palau",ps:"Palestine, State of",pa:"Panama",pg:"Papua New Guinea",py:"Paraguay",pe:"Peru",ph:"Philippines",pn:"Pitcairn",pl:"Poland",pt:"Portugal",pr:"Puerto Rico",qa:"Qatar",re:"Réunion",ro:"Romania",ru:"Russian Federation",rw:"Rwanda",bl:"Saint Barthélemy",sh:"Saint Helena, Ascension and Tristan da Cunha",kn:"Saint Kitts and Nevis",lc:"Saint Lucia",mf:"Saint Martin (French part)",pm:"Saint Pierre and Miquelon",vc:"Saint Vincent and the Grenadines",ws:"Samoa",sm:"San Marino",st:"Sao Tome and Principe",sa:"Saudi Arabia",sn:"Senegal",rs:"Serbia",sc:"Seychelles",sl:"Sierra Leone",sg:"Singapore",sx:"Sint Maarten (Dutch part)",sk:"Slovakia",si:"Slovenia",sb:"Solomon Islands",so:"Somalia",za:"South Africa",gs:"South Georgia and the South Sandwich Islands",ss:"South Sudan",es:"Spain",lk:"Sri Lanka",sd:"Sudan",sr:"Suriname",sj:"Svalbard and Jan Mayen",sz:"Swaziland",se:"Sweden",ch:"Switzerland",sy:"Syrian Arab Republic",tw:"Taiwan, Province of China",tj:"Tajikistan",tz:"Tanzania, United Republic of",th:"Thailand",tl:"Timor-Leste",tg:"Togo",tk:"Tokelau",to:"Tonga",tt:"Trinidad and Tobago",tn:"Tunisia",tr:"Turkey",tm:"Turkmenistan",tc:"Turks and Caicos Islands",tv:"Tuvalu",ug:"Uganda",ua:"Ukraine",ae:"United Arab Emirates",gb:"United Kingdom",us:"United States",um:"United States Minor Outlying Islands",uy:"Uruguay",uz:"Uzbekistan",vu:"Vanuatu",ve:"Venezuela, Bolivarian Republic of",vn:"Viet Nam",vg:"Virgin Islands, British",vi:"Virgin Islands, U.S.",wf:"Wallis and Futuna",eh:"Western Sahara",ye:"Yemen",zm:"Zambia",zw:"Zimbabwe"};const m={contains:function(e){return void 0!==h[e]},getArray:function(e){var t=[];return l().each(h,(function(n,i){var r={code:n,title:i};e&&e.toUpperCase()===n.toUpperCase()&&(r.selected=!0),t.push(r)})),t},getObject:function(){return h}};var g=n(48547),v=n.n(g),b=n(48708),y=n.n(b);n(9644);const w=JSON.parse('{"details":"http://github.com/adamcooke/vat-rates","version":"336934","rates":[{"name":"Italy","code":"IT","country_code":"IT","periods":[{"effective_from":"0000-01-01","rates":{"super_reduced":4,"reduced":10,"standard":22}}]},{"name":"Greece","code":"EL","country_code":"GR","periods":[{"effective_from":"0000-01-01","rates":{"reduced1":6.5,"reduced2":13,"standard":23}}]},{"name":"Latvia","code":"LV","country_code":"LV","periods":[{"effective_from":"0000-01-01","rates":{"reduced":12,"standard":21}}]},{"name":"Poland","code":"PL","country_code":"PL","periods":[{"effective_from":"0000-01-01","rates":{"reduced1":5,"reduced2":8,"standard":23}}]},{"name":"Slovenia","code":"SI","country_code":"SI","periods":[{"effective_from":"0000-01-01","rates":{"reduced":9.5,"standard":22}}]},{"name":"Sweden","code":"SE","country_code":"SE","periods":[{"effective_from":"0000-01-01","rates":{"reduced1":6,"reduced2":12,"standard":25}}]},{"name":"Denmark","code":"DK","country_code":"DK","periods":[{"effective_from":"0000-01-01","rates":{"standard":25}}]},{"name":"Belgium","code":"BE","country_code":"BE","periods":[{"effective_from":"0000-01-01","rates":{"reduced1":6,"reduced2":12,"standard":21,"parking":12}}]},{"name":"Netherlands","code":"NL","country_code":"NL","periods":[{"effective_from":"0000-01-01","rates":{"reduced":6,"standard":21}}]},{"name":"France","code":"FR","country_code":"FR","periods":[{"effective_from":"0000-01-01","rates":{"super_reduced":2.1,"reduced1":5.5,"reduced2":10,"standard":20}}]},{"name":"Portugal","code":"PT","country_code":"PT","periods":[{"effective_from":"0000-01-01","rates":{"reduced1":6,"reduced2":13,"standard":23,"parking":13}}]},{"name":"Cyprus","code":"CY","country_code":"CY","periods":[{"effective_from":"0000-01-01","rates":{"reduced1":5,"reduced2":9,"standard":19}}]},{"name":"Ireland","code":"IE","country_code":"IE","periods":[{"effective_from":"0000-01-01","rates":{"super_reduced":4.8,"reduced1":9,"reduced2":13.5,"standard":23,"parking":13.5}}]},{"name":"Bulgaria","code":"BG","country_code":"BG","periods":[{"effective_from":"0000-01-01","rates":{"reduced":9,"standard":20}}]},{"name":"United Kingdom","code":"UK","country_code":"GB","periods":[{"effective_from":"2011-01-04","rates":{"standard":20,"reduced":5}}]},{"name":"Luxembourg","code":"LU","country_code":"LU","periods":[{"effective_from":"2015-01-01","rates":{"super_reduced":3,"reduced1":8,"reduced2":14,"standard":17,"parking":12}},{"effective_from":"0000-01-01","rates":{"super_reduced":3,"reduced1":6,"reduced2":12,"standard":15,"parking":12}}]},{"name":"Estonia","code":"EE","country_code":"EE","periods":[{"effective_from":"0000-01-01","rates":{"reduced":9,"standard":20}}]},{"name":"Lithuania","code":"LT","country_code":"LT","periods":[{"effective_from":"0000-01-01","rates":{"reduced1":5,"reduced2":9,"standard":21}}]},{"name":"Romania","code":"RO","country_code":"RO","periods":[{"effective_from":"0000-01-01","rates":{"reduced1":5,"reduced2":9,"standard":24}}]},{"name":"Germany","code":"DE","country_code":"DE","periods":[{"effective_from":"0000-01-01","rates":{"reduced":7,"standard":19}}]},{"name":"Croatia","code":"HR","country_code":"HR","periods":[{"effective_from":"0000-01-01","rates":{"reduced1":5,"reduced2":13,"standard":25}}]},{"name":"Spain","code":"ES","country_code":"ES","periods":[{"effective_from":"0000-01-01","rates":{"super_reduced":4,"reduced":10,"standard":21}}]},{"name":"Slovakia","code":"SK","country_code":"SK","periods":[{"effective_from":"0000-01-01","rates":{"reduced":10,"standard":20}}]},{"name":"Czech Republic","code":"CZ","country_code":"CZ","periods":[{"effective_from":"0000-01-01","rates":{"reduced":15,"standard":21}}]},{"name":"Finland","code":"FI","country_code":"FI","periods":[{"effective_from":"0000-01-01","rates":{"reduced1":10,"reduced2":14,"standard":24}}]},{"name":"Hungary","code":"HU","country_code":"HU","periods":[{"effective_from":"0000-01-01","rates":{"reduced1":5,"reduced2":18,"standard":27}}]},{"name":"Malta","code":"MT","country_code":"MT","periods":[{"effective_from":"0000-01-01","rates":{"reduced1":5,"reduced2":7,"standard":18}}]},{"name":"Austria","code":"AT","country_code":"AT","periods":[{"effective_from":"0000-01-01","rates":{"reduced":10,"standard":20,"parking":12}}]}]}');var _,k,P=(_=w,k={},r().each(_.rates,(function(e){var t=e.country_code.toLowerCase(),n=new Date,i=0;r().each(e.periods,(function(e){if(new Date(e.effective_from)<n)return i=e.rates.standard,!1})),k[t]=i/100+1})),k);const Z={getMultiplier:function(e,t){var n=1,i=!1;return P[e]&&(i=!0,t&&0!==t.length||(n=P[e])),{multiplier:n,isVatCountry:i}}};var x,C=n(98296),S=n.n(C),E=n(76638),I=n(54565),T=p.Z.create(n(14823)),j=r().partial(E.Z.request,"SubscriptionManager");function A(){return j("getSubscriptions")}const O={generateBraintreeClientToken:function(){return j("generateBraintreeClientToken",{}).then((function(e){return e.message}))},savePaymentDetails:function(e){return j("savePaymentDetails",e).catch((function(e){"BRAINTREE"===e.code&&("2000"===e.additionalInfo.code&&(e.message="There was a problem processing your credit card, please contact your bank for more information."));return e}))},changePlan:function(e,t){return j("changePlan",{organizationId:t,planId:e}).catch((function(e){"BRAINTREE"===e.code&&("2000"===e.additionalInfo.code&&(e.message="There was a problem processing your credit card, please contact your bank for more information."));return e})).then((function(){T.billingUpdated()}))},cancel:function(e){return j("stopRecurringPayments",{organizationId:e}).then((function(){e||T.billingUpdated()}))},getPersonalPlans:function(){return j("getPlans",{customerType:"USER"})},getOrganizationPlans:function(){return j("getPlans",{customerType:"ORGANIZATION"})},getPaymentDetails:function(e){return j("getPaymentDetails",{organizationId:e})},getTransactionHistory:function(e){return j("getTransactionHistory",{organizationId:e}).then((function(t){var n=t||null;return r().each(n,(function(t,n,i){i[n].dateString=S()(new Date(t.date)).format("Do MMMM YYYY"),i[n].amount=t.amount.toFixed(2)+" USD";var r=t,a=I.Z.get("serverUrl");if(a+="pdf?object=SubscriptionManager&method=getReceipt&transaction=",a+=r.id,e&&(a+="&organizationId="+e),i[n].receipt=a,r.isSuccessful="OK"===r.status,!r.isSuccessful){switch(r.status){case"PROCESSOR_DECLINED":i[n].errorStatus="Processor declined";break;case"FAILED_OTHER":i[n].errorStatus="Failed"}r.errorMessage&&(i[n].errorStatus+=" ("+r.errorMessage+")"),i[n].amount=(0).toFixed(2)+" USD"}switch(i[n].isRefund=!1,r.transactionType){case"SALE":i[n].transactionType="Sale";break;case"CREDIT":i[n].transactionType="Credit",i[n].isRefund=!0}})),n}))},invalidateSubscriptionsCache:function(){return x=A()},getCachedSubscriptions:function(){return x||(x=A()),x},getPlanUpgradeInfo:function(e){return j("getPlanUpgradeInfo",{organizationId:e})}};var D=d().compile('<form action="/" method="post" class="ac-form-vertical ac-clearfix form-subscription">\n  <fieldset>\n    <div class="credit-card-input no-js ac-pull-left" id="skeuocard">\n      <label for="cc_type">Card Type</label>\n      <select name="cc_type">\n        <option value="">...</option>\n        <option value="visa">Visa</option>\n        <option value="discover">Discover</option>\n        <option value="mastercard">MasterCard</option>\n        <option value="maestro">Maestro</option>\n        <option value="jcb">JCB</option>\n        <option value="unionpay">China UnionPay</option>\n        <option value="amex">American Express</option>\n        <option value="dinersclubintl">Diners Club</option>\n      </select>\n\n      <label for="cc_number">Card Number</label>\n      <input type="text" name="cc_number" id="cc_number" placeholder="XXXX XXXX XXXX XXXX" maxlength="19" size="19" data-encrypted-name="number">\n\n      <label for="cc_exp_month">Expiration Month</label>\n      <input type="text" name="cc_exp_month" id="cc_exp_month" placeholder="00" data-encrypted-name="expMonth">\n      <label for="cc_exp_year">Expiration Year</label>\n      <input type="text" name="cc_exp_year" id="cc_exp_year" placeholder="00" data-encrypted-name="expYear">\n\n      <label for="cc_name">Cardholder\'s Name</label>\n      <input type="text" name="cc_name" id="cc_name" placeholder="John Doe">\n\n      <label for="cc_cvc">Card Validation Code</label>\n      <input type="text" name="cc_cvc" id="cc_cvc" placeholder="123" maxlength="3" size="3" data-encrypted-name="cvv">\n    </div>\n\n    <div class="ac-control-group">\n      <div class="ac-controls-subscription">\n        <select id="field-customer-countryCode" name="customer[countryCode]" class="ac-window-prompt-input ac-input-medium select-country" data-required="true">\n          <option value="">Select country...</option>\n          {{#each countries}}\n          <option value="{{code}}" {{#if selected}}selected="selected"{{/if}}>\n            {{title}}\n          </option>\n          {{/each}}\n        </select>\n      </div>\n\n      <div class="ac-control-group hide" id="vat-control-group">\n        <label class="ac-control-label-subscription" for="field-vat-number">VAT Number (if you have one):</label>\n        <div class="ac-controls-subscription">\n          <input type="text" id="field-vat-number" name="creditCard[vatNumber]" value="{{vatNumber}}" placeholder="VAT number..." class="ac-window-prompt-input ac-input-medium" maxlength="16">\n        </div>\n      </div>\n    </div>\n  </fieldset>\n</form>\n');function N(e){var t=e,n=t.find('#skeuocard input[name="cc_number"]'),i=t.find('#skeuocard input[name="cc_exp_month"]'),a=t.find('#skeuocard input[name="cc_exp_year"]'),s=t.find('#skeuocard input[name="cc_cvc"]'),o=t.find('#skeuocard input[name="cc_name"]'),c=t.find("#field-customer-countryCode"),l=t.find("#field-vat-number"),u={country:c.val(),vatNumber:l.val()},d=n.val();return r().includes(d,"*")?u.card=null:u.card={number:d,cardholderName:o.val(),expirationMonth:i.val(),expirationYear:a.val(),cvv:s.val()},u}function M(e){return F.apply(this,arguments)}function F(){return F=(0,a.Z)(o().mark((function e(t){var n,i,r,a,s,c,u,d,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.form,i=N(n),r=!1,a=function(e){r||(f.Z.error(e),r=!0)},s=new Date,c=s.getFullYear(),u=s.getMonth()+1,i.card&&(d=i.card,(p=t.skeuocard)&&p.product&&p.product.number.isValid(d.number)||a("Sorry, but your card number is invalid. Please check it is correct and try again."),(d.expirationYear<c||d.expirationYear===c&&d.month<u)&&a("Your card has expired. Please check the expiry date."),0===d.cardholderName.length&&a("Cardholder must not be empty."),0===d.cvv.length&&a("CVV number must not be empty."),l().isNumeric(d.cvv)||a("CVV must be a numbers.")),m.contains(i.country)||a("Country not selected. Please select your country."),!r){e.next=11;break}throw new Error;case 11:return e.abrupt("return",L(t));case 12:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function R(e,t){var n=new(v().api.Client)({clientToken:e}),i=r().pick(t,["number","expirationYear","expirationMonth","cardholderName","cvv"]);return new Promise((function(e,t){n.tokenizeCard(i,(function(n,i){n?t(n):e(i)}))}))}function L(e){return U.apply(this,arguments)}function U(){return U=(0,a.Z)(o().mark((function e(t){var n,i,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.form,i=N(n),r={countryCode:i.country,vatNumber:i.vatNumber,paymentMethodNonce:null},null!==i.card){e.next=5;break}return e.abrupt("return",r);case 5:return e.abrupt("return",t.tokenPromise.then((function(e){return R(e,i.card)})).then((function(e){return r.paymentMethodNonce=e,t.tokenPromise=O.generateBraintreeClientToken(),r})));case 6:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function B(e,t){var n=e.find("#vat-control-group"),i=e.find("#field-vat-number").val(),a=e.find("#field-customer-countryCode").val(),s=Z.getMultiplier(a,i);s.isVatCountry?n.removeClass("hide"):n.addClass("hide"),r().isFunction(t)&&t(s.multiplier,a,i)}function q(e,t){var n=p.Z.on.bind(p.Z,e),i=B.bind(null,e,t);n("change","#field-customer-countryCode",i),n("keyup","#field-vat-number",i),e.find("#field-customer-countryCode").change()}const H=function(e,t){var n=function(e,t){(e=e||{}).card=e.card||{},e.countries=m.getArray(e.countryCode);var n=l()(D(e)),i=e.card.expirationMonth,r=e.card.expirationYear;n.find("#field-customer-countryCode").selectize({dropdownParent:"body"});var a=new(y())(n.find("#skeuocard"),{initialValues:{number:e.card.maskedNumber,expMonth:i,expYear:r,name:e.card.cardholderName,cvc:e.card.cvv}});return n.find("fieldset.cc-number").before('<div class="card-number-msg">Your Card Number:</div>'),q(n,t),{form:n,sCard:a}}(e,t),i=n.form,r={form:i,skeuocard:n.sCard,tokenPromise:O.generateBraintreeClientToken()};return{form:i,get:L.bind(null,r),getNotEncrypted:N.bind(null,i),validate:M.bind(null,r)}};var W=d().compile('{{#if transactions}}\n<table>\n  <thead>\n    <tr>\n      <th class="date">Date</th>\n      <th class="card">Payment Method</th>\n      <th class="type">Type</th>\n      <th class="amount">Amount</th>\n      <th class="action"></th>\n    </tr>\n  </thead>\n  <tbody>\n    {{#each transactions}}\n    <tr class="receipt-item {{#if isRefund}}refund{{/if}}" data-id="{{id}}">\n      <td class="date">{{dateString}}</td>\n      <td class="card"><i class="ss-icon">creditcard</i> {{card}}</td>\n      <td class="transaction-type">{{transactionType}}</td>\n      <td class="amount">$ {{amount}}</td>\n      <td class="receipt">\n        {{#if isSuccessful}}\n          <a href="{{receipt}}" class="qtip-here" title="Download receipt" target="_blank">\n            <i class="ss-icon circular-icon">pdf</i>\n          </a>\n        {{else}}\n          {{errorStatus}}\n        {{/if}}\n      </td>\n    </tr>\n    {{/each}}\n  </tbody>\n</table>\n{{else}}\n  <p>No payments have been made yet.</p>\n{{/if}}\n');const z={payment:"",paymentList:function(e){var t=l()(W(e));return t.find(".qtip-here").qtip(),t},card:H,subscription:""},G={EXPIRING:"EXPIRING",EXPIRED:"EXPIRED",PAST_DUE:"PAST_DUE",NO_SUBSCRIPTION:"NO_SUBSCRIPTION",ACTIVE:"ACTIVE"};var V=function(e){var t=Y(e).status,n=[G.ACTIVE,G.EXPIRING,G.PAST_DUE];return r().includes(n,t)};function K(e,t,n){return{status:e,expirationDate:t,nextPaymentDate:n}}var Y=function(e){if(e){var t,n=e.expirationTimestamp,i=n?new Date(n):null,r=e.nextPaymentTimestamp,a=r?new Date(r):null;switch(e.state){case"ACTIVE":t=G.ACTIVE;break;case"PAST_DUE":t=G.PAST_DUE;break;case"EXPIRING":t=G.EXPIRING;break;default:t=G.EXPIRED}return K(t,i,a)}return K(G.NO_SUBSCRIPTION,null,null)},J=function(){return"eduTrial"};var Q=Z.getMultiplier;const X={ui:z,api:O,status:G,hasUsableSubscription:V,subscriptionStatus:Y,hasAnyUsableSubscription:function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];if(V(n))return!0}return!1},getEduPlanId:J,groupOrgPlans:function(e){e=r().cloneDeep(e);var t=[],n=r().groupBy(e,"name");return r().each(n,(function(e){var n=r().cloneDeep(e[0]);n.allowedMembers=function(e){var t=[];return r().each(e,(function(e){var n=r().cloneDeep(e);n.users=e.allowedMembers,t.push(n)})),t}(e),n.price=n.allowedMembers[0].price,t.push(n)})),t},getVatMultiplier:Q}},54565:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(96486),r=n.n(i),a=window.CODIO_CONFIG,s={},o={};s.get=function(e){return e?r().has(a,e)?a[e]:void 0:o};const c=s},54137:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(52308),r=n.n(i),a={},s=/\+/g;function o(e){return e}function c(e){return decodeURIComponent(e.replace(s," "))}var l=a.cookie=function(e,t,n){if(void 0!==t){if(n=r().extend({},l.defaults,n),null===t&&(n.expires=-1),r().isNumeric(n.expires)){var i=n.expires,a=n.expires=new Date;a.setDate(a.getDate()+i)}return t=l.json?JSON.stringify(t):String(t),document.cookie=[encodeURIComponent(e),"=",l.raw?t:encodeURIComponent(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}for(var s=l.raw?o:c,u=document.cookie.split("; "),d=0,p=u.length;d<p;d++){var f=u[d].split("=");if(s(f.shift())===e){var h=s(f.join("="));return l.json?JSON.parse(h):h}}return null};l.defaults={},a.remove=function(e,t){return null!==a.cookie(e)&&(a.cookie(e,null,t),!0)};const u=a},43553:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(96486),r=n.n(i),a={},s={};a.bind=function(e,t,n){s[t]=s[t]||{},s[t][e]=s[t][e]||[];for(var i=0;i<s[t][e].length;i++)if(s[t][e][i]===n)return null;return s[t][e].push(n),!0},a.one=function(e,t,n){var i=this;return a.bind(e,t,(function r(){n&&n.apply(i,arguments),a.unbind(e,t,r)}))},a.unbind=function(e,t,n){if(s[t]&&s[t][e]&&n){var i=s[t][e].indexOf(n);-1!==i&&s[t][e].splice(i,1)}return s[t]&&s[t][e]&&!n&&(s[t][e].length=0),!0},a.dispatch=function(e,t){if(e){var n=[].slice.call(arguments,2);if(s[t]){var i=r().clone(s[t][e]);if(i)for(var a=0,o=i.length;a<o;a++)i[a].apply(window,n)}}else console.error("Message should be passed")};const o=a},87167:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>i,ZL:()=>kt,yV:()=>_t,yO:()=>A,ZP:()=>dt});var i={};n.r(i),n.d(i,{ML:()=>ke,SQ:()=>Se,Hn:()=>we,e6:()=>ve});var r={};n.r(r),n.d(r,{editor:()=>tt,emmet:()=>nt});var a=n(49721),s=n(93443),o=n(44442),c=n(15671),l=n(43144),u=n(97326),d=n(60136),p=n(82963),f=n(61120),h=n(45616),m=n(33108),g=n(60674);const v=function(){function e(){if((0,c.Z)(this,e),this.constructor===e)throw new Error("Cannot construct TextModelBase instances directly.")}return(0,l.Z)(e,[{key:"getValue",value:function(){throw new Error("Abstract Method getValue has no implementation")}},{key:"setValue",value:function(){throw new Error("Abstract Method setValue has no implementation")}},{key:"getLineContent",value:function(){throw new Error("Abstract Method getLineContent has no implementation")}},{key:"onDidChangeModelContent",value:function(){throw new Error("Abstract Method onDidChangeModelContent has no implementation")}},{key:"isDisposed",value:function(){throw new Error("Abstract Method isDisposed has no implementation")}},{key:"dispose",value:function(){throw new Error("Abstract Method dispose has no implementation")}},{key:"model",get:function(){throw new Error("Abstract Method get model has no implementation")}},{key:"replaceRange",value:function(){throw new Error("Abstract Method replaceRange has no implementation")}},{key:"pushEditOperations",value:function(){throw new Error("Abstract Method pushEditOperations has no implementation")}},{key:"findNextMatch",value:function(){throw new Error("Abstract Method findNextMatch has no implementation")}},{key:"getPositionAt",value:function(){throw new Error("Abstract Method getPositionAt has no implementation")}},{key:"getLanguageId",value:function(){throw new Error("Abstract Method getLanguageId has no implementation")}},{key:"setEOL",value:function(){throw new Error("Abstract Method setEOL has no implementation")}},{key:"pushEOL",value:function(){throw new Error("Abstract Method pushEOL has no implementation")}},{key:"getLineCount",value:function(){throw new Error("Abstract Method getLineCount has no implementation")}},{key:"findMatches",value:function(){throw new Error("Abstract Method findMatches has no implementation")}},{key:"uri",get:function(){throw new Error("Abstract Method uri has no implementation")}},{key:"getFullModelRange",value:function(){throw new Error("Abstract Method getFullModelRange has no implementation")}},{key:"getValueInRange",value:function(){throw new Error("Abstract Method getValueInRange has no implementation")}},{key:"getOptions",value:function(){throw new Error("Abstract Method getOptions has no implementation")}},{key:"updateOptions",value:function(){throw new Error("Abstract Method updateOptions has no implementation")}},{key:"getWordAtPosition",value:function(){throw new Error("Abstract Method getWordAtPosition has no implementation")}},{key:"getLinesContent",value:function(){throw new Error("Abstract Method getLinesContent has no implementation")}},{key:"getLineLength",value:function(){throw new Error("Abstract Method getLineLength has no implementation")}}]),e}();var b=n(96486),y=n.n(b);const w=JSON.parse('{"editorSettingsChanged":"editor:settings:changed","saveFile":"editor:save:#filename","saveAllFiles":"editor:saveall"}'),_=JSON.parse('{"line_numbers":{"type":"boolean","default":true,"desc":"Show line numbers."},"visible_tabs":{"type":"boolean","default":false,"desc":"Visible tabs."},"smart_indent":{"type":"boolean","default":true,"desc":"Whether to use the context-sensitive indentation that the mode provides (or just indent the same as the line before)."},"font_size":{"default":15,"type":"int","desc":"Font size."},"wrap":{"default":false,"type":"boolean","desc":"Scroll or wrap for long lines."},"tab_size":{"default":4,"type":"int","desc":"Tab size."},"navigate_within_soft_tabs":{"default":null,"type":"boolean","desc":"Navigate within soft tabs."},"highlight_active":{"default":true,"type":"boolean","desc":"Highlight active line."},"ruler":{"default":0,"type":"int","desc":"Show vertical ruler."},"theme":{"default":"default","type":"list","values":{"3024-day":"3024-day","3024-night":"3024-night","ambiance":"ambiance","base16-dark":"base16-dark","base16-light":"base16-light","blackboard":"blackboard","bold":"bold","cobalt":"cobalt","default":"default","dyslexic":"dyslexic","earthsong":"earthsong","eclipse":"eclipse","elegant":"elegant","erlang-dark":"erlang-dark","frontier":"frontier","juicy":"juicy","lesser-dark":"lesser-dark","mbo":"mbo","mellow":"mellow","midnight":"midnight","monokai":"monokai","neat":"neat","night":"night","ocean-dark":"ocean-dark","ocean-light":"ocean-light","paraiso-dark":"paraiso-dark","paraiso-light":"paraiso-light","pastel":"pastel","pastel-on-dark":"pastel-on-dark","peacock":"peacock","rubyblue":"rubyblue","solarized light":"solarized light","solarized dark":"solarized dark","the-matrix":"the-matrix","tomorrow-night-bright":"tomorrow-night-bright","tomorrow-night-eighties":"tomorrow-night-eighties","twilight":"twilight","vibrant-ink":"vibrant-ink","xq-dark":"xq-dark","xq-light":"xq-light","zenburn":"zenburn"},"desc":"Editor theme."},"indent_with_tabs":{"default":false,"type":"boolean","desc":"Use tabs for indentation."},"linting":{"type":"boolean","default":false,"desc":"Enable linting (TypeScript, JavaScript, JSON & CSS)."},"match_brackets":{"type":"boolean","default":true,"desc":"Show matching brackets to be highlighted whenever the cursor is next to them."},"auto_close_brackets":{"type":"boolean","default":true,"desc":"Auto-close brackets and quotes when typed."},"show_trailing_space":{"type":"boolean","default":false,"desc":"Show whitespace."},"continue_comments":{"type":"boolean","default":true,"desc":"Prefix new lines inside C-like block comments with an asterisk when Enter is pressed."},"keymap":{"type":"list","default":"default","desc":"Default key map to use","values":{"default":"default","vim":"vim","emacs":"emacs"}},"automatic_completions":{"type":"boolean","default":true,"desc":"Show completions automatic after 2 symbols types or special symbol used."},"spellcheck":{"type":"boolean","default":true,"desc":"Highlight spell mistakes in markdown files. Only English. Opened files have to be reloaded."},"minimap":{"type":"boolean","default":false,"desc":"Show minimap."}}'),k=JSON.parse('{"key_autocomplete":{"key":{"win":"Ctrl+Space","mac":"Shift+Space"},"desc":"Show auto-completions."},"key_toggleComment":{"key":{"win":"Ctrl+/","mac":"Cmd+/"},"desc":"Toggle comment."},"key_go_line_start":{"key":{"win":"Alt+Left","mac":"Cmd+Left"},"desc":"Go to start of line."},"key_go_line_end":{"key":{"win":"Alt+Right","mac":"Cmd+Right"},"desc":"Go to end of line."},"key_select_all":{"key":{"win":"Ctrl+A","mac":"Cmd+A"},"desc":"Select all."},"key_remove_selected_line":{"key":"Ctrl+Shift+K","desc":"Delete selected or active line."},"key_delete_line":{"key":{"win":"Alt+Shift+K","mac":"Cmd+Delete"},"desc":"Empty line."},"key_del_group_before":{"key":"Ctrl+Backspace","desc":"Delete word before caret."},"key_del_group_after":{"key":"Ctrl+Delete","desc":"Delete word after caret."},"key_del_line_left":{"key":{"win":"Ctrl+Shift+Backspace","mac":"Cmd+Backspace"},"desc":"Delete line before caret."},"key_kill_line":{"key":{"win":"Alt+Shift+Backspace","mac":"Ctrl+K"},"desc":"Delete line after caret."},"key_go_doc_end":{"key":{"win":"Ctrl+End","mac":"Cmd+End"},"desc":"Go to end of document."},"key_find":{"key":{"win":"Ctrl+F","mac":"Cmd+F"},"desc":"Find."},"key_go_doc_start":{"key":{"win":"Ctrl+Home","mac":"Cmd+Up"},"desc":"Go to beginning of document."},"key_go_group_left":{"key":{"win":"Ctrl+Left","mac":"Alt+Left"},"desc":"Go left."},"key_go_group_right":{"key":{"win":"Ctrl+Right","mac":"Alt+Right"},"desc":"Go right"},"key_redo":{"key":{"win":"Ctrl+Y","mac":"Cmd+Y"},"desc":"Redo."},"key_undo":{"key":{"win":"Ctrl+Z","mac":"Cmd+Z"},"desc":"Undo."},"key_indent_less":{"key":{"win":"Ctrl+[","mac":"Cmd+["},"desc":"Indent less."},"key_indent_more":{"key":{"win":"Ctrl+]","mac":"Cmd+]"},"desc":"Indent more"},"key_replace":{"key":{"win":"Shift+Ctrl+F","mac":"Cmd+Alt+F"},"desc":"Replace."},"key_replace_all":{"key":{"win":"Shift+Ctrl+R","mac":"Shift+Cmd+Alt+F"},"desc":"Replace all."},"key_save_single":{"key":{"win":"Ctrl+Shift+Alt+S","mac":"Cmd+Shift+Alt+S"},"desc":"Save current file."},"key_save":{"key":{"win":"Ctrl+Shift+S","mac":"Cmd+Shift+S"},"desc":"Save all open files."},"key_save_all":{"key":{"win":"Ctrl+S","mac":"Cmd+S"},"desc":"Save all open files."},"key_jump_to_line":{"key":{"win":"Alt+G","mac":"Alt+G"},"desc":"Jumps to a specific line."},"key_indentLess":{"key":"Shift+Tab","desc":"Remove indentation."},"key_insertTab":{"key":{"win":"Ctrl+Alt+T","mac":"Cmd+Alt+T"},"desc":"Insert Tab symbol"},"key_toggle:line_numbers":{"desc":"Show line numbers: Toggle."},"key_toggle:visible_tabs":{"desc":"Visible Tabs: Toggle."},"key_toggle:wrap":{"desc":"Word wrap: Toggle."},"key_toggle:highlight_active":{"desc":"Highlight active line: Toggle."},"key_toggle:indent_with_tabs":{"desc":"Use tabs for indentation: Toggle."},"key_toggle:linting":{"desc":"Code linting: Toggle."},"key_toggle:folding":{"desc":"Code folding: Toggle."},"key_toggle:match_brackets":{"desc":"Show matching brackets: Toggle."},"key_toggle:auto_close_brackets":{"desc":"Auto Close brackets: Toggle."},"key_toggle:auto_close_tags_when_opening":{"desc":"Auto close tags on opening: Toggle."},"key_toggle:auto_close_tags_when_closing":{"desc":"Auto close on close: Toggle."},"key_toggle:show_trailing_space":{"desc":"Show trailing whitespace: Toggle."},"key_toggle:continue_comments":{"desc":"Continue comments: Toggle."},"key_toggle:automatic_completions":{"desc":"Automatic Completions: Toggle."},"key_find_next":{"key":"Enter","desc":"Find next.","readonly":true},"key_find_prev":{"key":"Shift+Enter","desc":"Find previous.","readonly":true}}');var P=s.Z.create(w);o.Z.plugin("editor",_),o.Z.hotkey.plugin("editor",k);var Z,x=(Z=document.createElement("style"),document.head.append(Z),function(e){return Z.textContent=e}),C={},S=function(){var e=E();y().isEqual(e,C)||(C=e,P.editorSettingsChanged(e))};s.Z.subscribe("settings:changed",S),s.Z.subscribe("settings:loaded",S);var E=function(){return function(e){var t=y().toInteger(e.ruler),n=e.font_size>10?e.font_size:10;return x(".codeEditorFontSize { font-size: ".concat(n,"px; }")),{hover:{above:!1},lineNumbersMinChars:2,lineNumbers:e.line_numbers?"on":"off",renderWhitespace:e.visible_tabs?"all":"selection",autoIndent:e.smart_indent?"full":"none",fontSize:n,wordWrap:e.wrap?"on":"off",tabSize:isNaN(e.tab_size)?4:e.tab_size,stickyTabStops:e.navigate_within_soft_tabs,renderLineHighlight:e.highlight_active?"line":"none",rulers:0===t?[]:[{column:t}],theme:e.theme,insertSpaces:!e.indent_with_tabs,folding:!1,keyMap:e.keymap,linting:e.linting,matchBrackets:e.match_brackets?"always":"never",showTrailingSpace:e.show_trailing_space,autoClosingBrackets:e.auto_close_brackets?"languageDefined":"never",quickSuggestions:e.automatic_completions,comments:{ignoreEmptyLines:e.continue_comments,insertSpace:e.continue_comments},spellcheck:e.spellcheck,contextmenu:!0,minimap:{enabled:e.minimap}}}(o.Z.get("editor"))};const I={get:E};function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,f.Z)(e);if(t){var r=(0,f.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,p.Z)(this,n)}}g.IO.get(m.Ui).updateValues([["files.eol","\n"]]);var j=function(e){(0,d.Z)(n,e);var t=T(n);function n(e,i,r){var a;return(0,c.Z)(this,n),(a=t.call(this))._model=h.editor.createModel(e,i,r?h.Uri.file(r):void 0),a._settingsChangeHandler=s.Z.subscribe("editor:settings:changed",a._onSettingsChanged.bind((0,u.Z)(a))),a._applyOptions(),a}return(0,l.Z)(n,[{key:"_onSettingsChanged",value:function(e,t){!this._model.isAttachedToEditor()&&!this._model.isDisposed()&&this._applyOptions(t)}},{key:"_applyOptions",value:function(e){void 0===e&&(e=I.get()),this._model&&this._model.updateOptions({tabSize:e.tabSize,insertSpaces:e.insertSpaces})}},{key:"getValue",value:function(){return this._model.getValue()}},{key:"setValue",value:function(e){this._model.setValue(e)}},{key:"getLineContent",value:function(e){return this._model.getLineContent(e)}},{key:"onDidChangeModelContent",value:function(e){return this._model.onDidChangeContent(e)}},{key:"isDisposed",value:function(){return this._model.isDisposed()}},{key:"dispose",value:function(){return this._settingsChangeHandler&&s.Z.unsubscribe(this._settingsChangeHandler),this._settingsChangeHandler=null,this._model.dispose()}},{key:"model",get:function(){return this._model}},{key:"replaceRange",value:function(e,t,n){n=n||t,this._model.pushEditOperations([],[{range:{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column},text:e}],we.dropSelectionCursorStateComputer())}},{key:"pushEditOperations",value:function(e,t,n){this._model.pushEditOperations(e,t,n)}},{key:"findNextMatch",value:function(e,t,n,i,r,a){return this._model.findNextMatch(e,t,n,i,r,a)}},{key:"getPositionAt",value:function(e){return this._model.getPositionAt(e)}},{key:"getLanguageId",value:function(){return this._model.getLanguageId()}},{key:"setEOL",value:function(e){this._model.setEOL(e)}},{key:"pushEOL",value:function(e){this._model.pushEOL(e)}},{key:"getLineCount",value:function(){return this._model.getLineCount()}},{key:"findMatches",value:function(e,t,n,i,r,a,s){return this._model.findMatches(e,t,n,i,r,a,s)}},{key:"uri",get:function(){return this._model.uri}},{key:"getFullModelRange",value:function(){return this._model.getFullModelRange()}},{key:"getValueInRange",value:function(e){return this._model.getValueInRange(e)}},{key:"getOptions",value:function(){return this._model.getOptions()}},{key:"updateOptions",value:function(e){!this._model.isDisposed()&&this._model.updateOptions(e)}},{key:"getWordAtPosition",value:function(e){return this._model.getWordAtPosition(e)}},{key:"getLinesContent",value:function(){return this._model.getLinesContent()}},{key:"getLineLength",value:function(e){return this._model.getLineLength(e)}}]),n}(v);const A=j;var O=n(4942),D=n(52308),N=n.n(D),M=n(46447),F=n(23238);const R=function(){function e(){if((0,c.Z)(this,e),this.constructor===e)throw new Error("Cannot construct EditorBase instances directly.")}return(0,l.Z)(e,[{key:"getEditor",value:function(){throw new Error("getEditor not implemented.")}},{key:"setPlaceholder",value:function(){throw new Error("setPlaceholder not implemented.")}},{key:"runCommand",value:function(){throw new Error("runCommand not implemented.")}},{key:"scrollToLine",value:function(){throw new Error("scrollToLine not implemented.")}},{key:"scrollToPosition",value:function(){throw new Error("scrollToPosition not implemented.")}},{key:"setScrollTop",value:function(){throw new Error("setScrollTop not implemented.")}},{key:"setScrollPosition",value:function(){throw new Error("setScrollPosition not implemented.")}},{key:"scrollIntoView",value:function(){throw new Error("scrollIntoView not implemented.")}},{key:"close",value:function(){throw new Error("close not implemented.")}},{key:"setOption",value:function(){throw new Error("setOption not implemented.")}},{key:"getOption",value:function(){throw new Error("getOption not implemented.")}},{key:"connect",value:function(){throw new Error("connect not implemented.")}},{key:"cleanup",value:function(){throw new Error("cleanup not implemented.")}},{key:"isVisible",value:function(){throw new Error("isVisible not implemented.")}},{key:"onDidFocus",value:function(){throw new Error("onDidFocus not implemented.")}},{key:"hasFocus",value:function(){throw new Error("hasFocus not implemented.")}},{key:"focus",value:function(){throw new Error("focus not implemented.")}},{key:"onDidChangeModelContent",value:function(){throw new Error("onDidChangeModelContent not implemented.")}},{key:"onDidScrollChange",value:function(){throw new Error("onDidScrollChange not implemented.")}},{key:"onDidChangeModel",value:function(){throw new Error("onDidChangeModel not implemented.")}},{key:"getPosition",value:function(){throw new Error("getPosition not implemented.")}},{key:"setPosition",value:function(){throw new Error("setPosition not implemented.")}},{key:"getLineCount",value:function(){throw new Error("getLineCount not implemented.")}},{key:"replaceRange",value:function(){throw new Error("replaceRange not implemented.")}},{key:"saveViewState",value:function(){throw new Error("saveViewState not implemented.")}},{key:"restoreViewState",value:function(){throw new Error("restoreViewState not implemented.")}},{key:"onDidChangeCursorPosition",value:function(){throw new Error("onDidChangeCursorPosition not implemented.")}},{key:"getSelection",value:function(){throw new Error("getSelection not implemented.")}},{key:"setModel",value:function(){throw new Error("setModel not implemented.")}},{key:"getModel",value:function(){throw new Error("getModel not implemented.")}},{key:"setModelLanguage",value:function(){throw new Error("setModelLanguage not implemented.")}},{key:"getLineContent",value:function(){throw new Error("getLineContent not implemented.")}},{key:"layout",value:function(){throw new Error("layout not implemented.")}},{key:"getLayoutInfo",value:function(){throw new Error("getLayoutInfo not implemented.")}},{key:"getScrollLeft",value:function(){throw new Error("getScrollLeft not implemented.")}},{key:"getScrollTop",value:function(){throw new Error("getScrollTop not implemented.")}},{key:"getScrollWidth",value:function(){throw new Error("getScrollWidth not implemented.")}},{key:"getScrollHeight",value:function(){throw new Error("getScrollHeight not implemented.")}},{key:"getTopForLineNumber",value:function(){throw new Error("getTopForLineNumber not implemented.")}},{key:"getTopForPosition",value:function(){throw new Error("getTopForPosition not implemented.")}},{key:"getOffsetForColumn",value:function(){throw new Error("getOffsetForColumn not implemented.")}},{key:"getContent",value:function(){throw new Error("getContent not implemented.")}},{key:"getVisibleRanges",value:function(){throw new Error("getVisibleRanges not implemented.")}},{key:"findNextMatch",value:function(){throw new Error("findNextMatch not implemented.")}},{key:"deltaDecorations",value:function(){throw new Error("deltaDecorations not implemented.")}},{key:"highlight",value:function(){throw new Error("highlight not implemented.")}},{key:"addContentWidget",value:function(){throw new Error("addContentWidget not implemented.")}},{key:"removeContentWidget",value:function(){throw new Error("removeContentWidget not implemented.")}},{key:"layoutContentWidget",value:function(){throw new Error("layoutContentWidget not implemented.")}},{key:"addOverlayWidget",value:function(){throw new Error("addOverlayWidget not implemented.")}},{key:"removeOverlayWidget",value:function(){throw new Error("removeOverlayWidget not implemented.")}},{key:"layoutOverlayWidget",value:function(){throw new Error("layoutOverlayWidget not implemented.")}},{key:"setModelMarkers",value:function(){throw new Error("setModelMarkers not implemented.")}},{key:"changeViewZones",value:function(){throw new Error("changeViewZones not implemented.")}},{key:"getLineHandle",value:function(){throw new Error("getLineHandle not implemented.")}},{key:"getValueInRange",value:function(){throw new Error("getValueInRange not implemented.")}},{key:"onMouseMove",value:function(){throw new Error("onMouseMove not implemented.")}},{key:"onMouseLeave",value:function(){throw new Error("onMouseLeave not implemented.")}},{key:"onMouseDown",value:function(){throw new Error("onMouseDown not implemented.")}},{key:"getSelections",value:function(){throw new Error("getSelections not implemented.")}},{key:"getLineDecorations",value:function(){throw new Error("getLineDecorations not implemented.")}},{key:"getContribution",value:function(){throw new Error("getContribution not implemented.")}},{key:"addAction",value:function(){throw new Error("addAction not implemented.")}},{key:"setHiddenAreas",value:function(){throw new Error("setHiddenAreas not implemented.")}},{key:"hasTextFocus",value:function(){throw new Error("hasTextFocus not implemented.")}},{key:"createDecorationsCollection",value:function(){throw new Error("createDecorationsCollection not implemented.")}}]),e}();h.languages.register({id:"codioSettings"}),h.languages.register({id:"codio-search"}),h.languages.setMonarchTokensProvider("codio-search",{defaultToken:"",tokenPostfix:".codio.search",symbols:/[=><!~?:&|+\-*\/\^%]+/,tokenizer:{root:[[/^(\S.*):$/,{token:"keyword",next:"@search_result"}]],search_result:[[/^(\s*)(\d+)(:|-)/,"number"],[/^\s*$/,"@rematch","@pop"]]}});var L=n(72678),U={cobol:["cobol","cbl",".cob",".cpy"],d:["d"],erlang:["erl","hrl"],fortran:["f90","f95","f03","f","for"],groovy:["groovy"],haskell:["hl","hsl","hs"]};Object.keys(U).forEach((function(e){n(5989)("./".concat(e)).then((function(t){h.languages.register({id:e,extensions:U[e]}),(0,L.registerRulesForLanguage)(e,new t.default)}))}));var B=n(15861),q=n(87757),H=n.n(q);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=n(22190),V=function(e,t){var n=e.getColorTheme()._tokenTheme._match(t);return n._fontStyle>0||n._foreground>1||n._background>2},K=function(e,t){for(var n="",i=t[0].length-1;i>=0;i-=1){var r=t[0][i];if("."===r)break;n=r+n}for(var a=t.length-1;a>=0;a-=1)for(var s=t[a],o=s.length-1;o>=0;o-=1){if("."===s[o]){var c=s.slice(0,o);if(V(e,c+"."+n))return c+"."+n;if(V(e,c))return c}}return""},Y=function(){function e(t){(0,c.Z)(this,e),this._ruleStack=t}return(0,l.Z)(e,[{key:"ruleStack",get:function(){return this._ruleStack}},{key:"clone",value:function(){return new e(this._ruleStack)}},{key:"equals",value:function(t){return!!(t&&t instanceof e&&t===this&&t._ruleStack===this._ruleStack)}}]),e}();function J(e,t,n,i){return Promise.all(Array.from(n.keys()).map(function(){var r=(0,B.Z)(H().mark((function r(a){var s;return H().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.loadGrammar(n.get(a));case 2:s=r.sent,e.languages.setTokensProvider(a,{getInitialState:function(){return new Y(G.INITIAL)},tokenize:function(e,t){var n=s.tokenizeLine(e,t.ruleStack);return{endState:new Y(n.ruleStack),tokens:n.tokens.map((function(e){return z(z({},e),{},{scopes:i?K(i,e.scopes):e.scopes[e.scopes.length-1]})}))}}});case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()))}var Q=n(44156),X=new Map;X.set("bat","source.batchfile"),X.set("clojure","source.clojure"),X.set("coffeescript","source.coffee"),X.set("c","source.c"),X.set("cpp","source.cpp"),X.set("csharp","source.cs"),X.set("css","source.css"),X.set("dart","source.dart"),X.set("dockerfile","source.dockerfile"),X.set("fsharp","source.fsharp"),X.set("ocaml","source.fsharp"),X.set("go","source.go"),X.set("groovy","source.groovy"),X.set("handlebars","text.html.handlebars"),X.set("html","text.html.basic"),X.set("ini","source.ini"),X.set("java","source.java"),X.set("javascript","source.js"),X.set("json","source.json"),X.set("julia","source.julia"),X.set("less","source.css.less"),X.set("lua","source.lua"),X.set("objective-c","source.objc"),X.set("perl","source.perl"),X.set("php","source.php"),X.set("powershell","source.powershell"),X.set("pug","source.pug"),X.set("python","source.python"),X.set("r","source.r"),X.set("razor","text.html.cshtml"),X.set("ruby","source.ruby"),X.set("rust","source.rust"),X.set("scss","source.css.scss"),X.set("shell","source.shell"),X.set("sql","source.sql"),X.set("swift","source.swift"),X.set("typescript","source.ts"),X.set("vb","source.asp.vb.net"),X.set("xml","text.xml"),X.set("yaml","source.yaml"),X.set("codioSettings","source.ini");var $={"source.batchfile":"batchfile","source.c":"c","source.clojure":"clojure","source.coffee":"coffeescript","source.cpp":"cpp","source.cs":"csharp","source.css":"css","source.dart":"dart","source.dockerfile":"docker","source.fsharp":"fsharp","source.go":"go","source.groovy":"groovy","text.html.handlebars":"Handlebars","text.html.basic":"html","source.ini":"ini","source.java":"java","source.js":"JavaScript","source.json":"JSON","source.julia":"julia","source.css.less":"less","source.lua":"lua","text.html.markdown":"markdown","source.objc":"objective-c","source.perl":"perl","source.php":"php","source.powershell":"powershell","text.pug":"pug","source.python":"MagicPython","source.r":"r","text.html.cshtml":"cshtml","source.ruby":"ruby","source.rust":"rust","source.css.scss":"scss","source.shell":"shell-unix-bash","source.sql":"sql","source.swift":"swift","source.ts":"TypeScript","source.asp.vb.net":"asp-vb-net","text.xml":"xml","source.yaml":"yaml"},ee=n(97137),te=n(10297);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=n(22190),ae=n(35930),se=g.IO.get(Q.Z),oe=fetch(te).then((function(e){return ae.loadWASM(e)})),ce=oe.then((function(){return{createOnigScanner:function(e){return new ae.OnigScanner(e)},createOnigString:function(e){return new ae.OnigString(e)}}})),le={name:"Empty grammar",scopeName:"",patterns:[]},ue=function(){var e=(0,B.Z)(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ie(ie({},le),{},{scopeName:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=new re.Registry({onigLib:ce,loadGrammar:function(e){var t,i,r;if(t=X,i=e,Array.from(t.keys()).find((function(e){return t.get(e)===i}))){var a=$[e];r=n(57293)("./".concat(a,".tmLanguage.json")).then((function(e){return e.default}))}else r=ue(e);return r}}),pe=function(){var e=(0,B.Z)(H().mark((function e(t){var n;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Map).set(t,X.get(t)),e.prev=2,e.next=5,oe;case 5:return e.next=7,J(h,de,n,se);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),ee.Z.error("Error applying grammar for ".concat(t));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();Array.from(X.keys()).forEach((function(e){h.languages.onLanguage(e,(function(){return y().defer(pe.bind(null,e))}))})),h.languages.register({id:"ocaml",extensions:[".ml",".mli",".mll",".mly"],aliases:["ocaml","oCaml","Objective Caml"],mimetypes:["text/x-ocaml"]}),h.languages.register({id:"asm-intel-x86-generic",aliases:["x86 and x86_64 Assembly","asm-intel-x86-generic"],extensions:[".asm",".nasm",".yasm",".inc",".s"]}),h.languages.register({id:"elm",aliases:["Elm","elm"],extensions:[".elm"]}),h.languages.register({id:"lisp",aliases:["Lisp","lisp"],extensions:[".lisp",".cl",".asd",".ros",".lsp",".el",".fnl"]});var fe=n(49989),he="codio.custom.action",me={"editor:key_autocomplete":"editor.action.triggerSuggest","editor:key_toggleComment":"editor.action.commentLine","editor:key_go_line_start":he,"editor:key_go_line_end":he,"editor:key_select_all":"editor.action.selectAll","editor:key_remove_selected_line":he,"editor:key_delete_line":"editor.action.deleteLines","editor:key_del_group_before":"deleteWordLeft","editor:key_del_group_after":"deleteWordRight","editor:key_del_line_left":"deleteAllLeft","editor:key_kill_line":"deleteAllRight","editor:key_go_doc_end":"cursorBottom","editor:key_find":"actions.find","editor:key_find_next":"editor.action.nextMatchFindAction","editor:key_go_doc_start":"cursorTop","editor:key_go_group_left":"cursorWordLeft","editor:key_go_group_right":"cursorWordEndRight","editor:key_redo":"redo","editor:key_undo":"undo","editor:key_indent_less":"editor.action.outdentLines","editor:key_indent_more":"editor.action.indentLines","editor:key_replace":"editor.action.startFindReplaceAction","editor:key_find_prev":"editor.action.previousMatchFindAction","editor:key_replace_all":"editor.action.startFindReplaceAction","editor:key_save_single":"","editor:key_save":"","editor:key_save_all":"","editor:key_jump_to_line":"editor.action.gotoLine","editor:key_indentLess":"editor.action.outdentLines","editor:key_insertTab":he,"emmet:expand_abbreviation":he,"emmet:expand_abbreviation_with_tab":he,"emmet:match_pair_outward":he,"emmet:match_pair_inward":he,"emmet:wrap_with_abbreviation":he,"emmet:next_edit_point":he,"emmet:prev_edit_point":he,"emmet:merge_lines":he,"emmet:split_join_tag":he,"emmet:remove_tag":he,"emmet:evaluate_math_expression":he,"emmet:increment_number_by_1":he,"emmet:decrement_number_by_1":he,"emmet:increment_number_by_01":he,"emmet:decrement_number_by_01":he,"emmet:increment_number_by_10":he,"emmet:decrement_number_by_10":he,"emmet:select_next_item":he,"emmet:select_previous_item":he,"emmet:reflect_css_value":he},ge={Ctrl:h.KeyMod.CtrlCmd,Cmd:h.KeyMod.CtrlCmd,Shift:h.KeyMod.Shift,Alt:h.KeyMod.Alt,WinCtrl:h.KeyMod.WinCtrl,Unknown:h.KeyCode.Unknown,Backspace:h.KeyCode.Backspace,Tab:h.KeyCode.Tab,Enter:h.KeyCode.Enter,PauseBreak:h.KeyCode.PauseBreak,CapsLock:h.KeyCode.CapsLock,Esc:h.KeyCode.Escape,Space:h.KeyCode.Space,PageUp:h.KeyCode.PageUp,PageDown:h.KeyCode.PageDown,End:h.KeyCode.End,Home:h.KeyCode.Home,Left:h.KeyCode.LeftArrow,Up:h.KeyCode.UpArrow,Right:h.KeyCode.RightArrow,Down:h.KeyCode.DownArrow,Insert:h.KeyCode.Insert,Delete:h.KeyCode.Delete,0:h.KeyCode.Digit0,1:h.KeyCode.Digit1,2:h.KeyCode.Digit2,3:h.KeyCode.Digit3,4:h.KeyCode.Digit4,5:h.KeyCode.Digit5,6:h.KeyCode.Digit6,7:h.KeyCode.Digit7,8:h.KeyCode.Digit8,9:h.KeyCode.Digit9,A:h.KeyCode.KeyA,B:h.KeyCode.KeyB,C:h.KeyCode.KeyC,D:h.KeyCode.KeyD,E:h.KeyCode.KeyE,F:h.KeyCode.KeyF,G:h.KeyCode.KeyG,H:h.KeyCode.KeyH,I:h.KeyCode.KeyI,J:h.KeyCode.KeyJ,K:h.KeyCode.KeyK,L:h.KeyCode.KeyL,M:h.KeyCode.KeyM,N:h.KeyCode.KeyN,O:h.KeyCode.KeyO,P:h.KeyCode.KeyP,Q:h.KeyCode.KeyQ,R:h.KeyCode.KeyR,S:h.KeyCode.KeyS,T:h.KeyCode.KeyT,U:h.KeyCode.KeyU,V:h.KeyCode.KeyV,W:h.KeyCode.KeyW,X:h.KeyCode.KeyX,Y:h.KeyCode.KeyY,Z:h.KeyCode.KeyZ,Meta:h.KeyCode.Meta,ContextMenu:h.KeyCode.ContextMenu,F1:h.KeyCode.F1,F2:h.KeyCode.F2,F3:h.KeyCode.F3,F4:h.KeyCode.F4,F5:h.KeyCode.F5,F6:h.KeyCode.F6,F7:h.KeyCode.F7,F8:h.KeyCode.F8,F9:h.KeyCode.F9,F10:h.KeyCode.F10,F11:h.KeyCode.F11,F12:h.KeyCode.F12,F13:h.KeyCode.F13,F14:h.KeyCode.F14,F15:h.KeyCode.F15,F16:h.KeyCode.F16,F17:h.KeyCode.F17,F18:h.KeyCode.F18,F19:h.KeyCode.F19,F20:h.KeyCode.F20,F21:h.KeyCode.F21,F22:h.KeyCode.F22,F23:h.KeyCode.F23,F24:h.KeyCode.F24,NumLock:h.KeyCode.NumLock,ScrollLock:h.KeyCode.ScrollLock,";":h.KeyCode.Semicolon,"=":h.KeyCode.Equal,",":h.KeyCode.Comma,"-":h.KeyCode.Minus,".":h.KeyCode.Period,"/":h.KeyCode.Slash,"`":h.KeyCode.Backquote,"[":h.KeyCode.BracketLeft,"\\":h.KeyCode.Backslash,"]":h.KeyCode.BracketRight,"'":h.KeyCode.Quote,OEM_8:h.KeyCode.OEM_8,IntlBackslash:h.KeyCode.IntlBackslash,NUMPAD_0:h.KeyCode.Numpad0,NUMPAD_1:h.KeyCode.Numpad1,NUMPAD_2:h.KeyCode.Numpad2,NUMPAD_3:h.KeyCode.Numpad3,NUMPAD_4:h.KeyCode.Numpad4,NUMPAD_5:h.KeyCode.Numpad5,NUMPAD_6:h.KeyCode.Numpad6,NUMPAD_7:h.KeyCode.Numpad7,NUMPAD_8:h.KeyCode.Numpad8,NUMPAD_9:h.KeyCode.Numpad9,NUMPAD_MULTIPLY:h.KeyCode.NumpadMultiply,NUMPAD_ADD:h.KeyCode.NumpadAdd,NUMPAD_SEPARATOR:h.KeyCode.NUMPAD_SEPARATOR,NUMPAD_SUBTRACT:h.KeyCode.NumpadSubtract,NUMPAD_DECIMAL:h.KeyCode.NumpadDecimal,NUMPAD_DIVIDE:h.KeyCode.NumpadDivide,IN_COMPOSITION:h.KeyCode.KEY_IN_COMPOSITION,ABNT_C1:h.KeyCode.ABNT_C1,ABNT_C2:h.KeyCode.ABNT_C2,AudioVolumeMute:h.KeyCode.AudioVolumeMute,AudioVolumeUp:h.KeyCode.AudioVolumeUp,AudioVolumeDown:h.KeyCode.AudioVolumeDown,BrowserSearch:h.KeyCode.BrowserSearch,BrowserHome:h.KeyCode.BrowserHome,BrowserBack:h.KeyCode.BrowserBack,BrowserForward:h.KeyCode.BrowserForward,MediaTrackNext:h.KeyCode.MediaTrackNext,MediaTrackPrevious:h.KeyCode.MediaTrackPrevious,MediaStop:h.KeyCode.MediaStop,MediaPlayPause:h.KeyCode.MediaPlayPause,LaunchMediaPlayer:h.KeyCode.LaunchMediaPlayer,LaunchMail:h.KeyCode.LaunchMail,LaunchApp2:h.KeyCode.LaunchApp2};const ve={getStartPosition:function(e){return e.getStartPosition()},getEndPosition:function(e){return e.getEndPosition()},isEmpty:function(e){return e.isEmpty()},fromPositions:function(e,t){return h.Range.fromPositions(e,t)},containsPosition:function(e,t){return h.Range.containsPosition(e,t)}};var be=n(77277),ye={detectLanguage:function(e,t){try{var n=h.editor.createModel(e,void 0,h.Uri.file(t)),i=n.getLanguageId();return n.dispose(),n=null,i}catch(e){return"plaintext"}},dropSelectionCursorStateComputer:function(){return function(e){return e.map((function(e){var t=e.range,n=t.endColumn,i=t.endLineNumber;return new h.Selection(i,n,i,n)}))}},findMatchesByRegex:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Number.MAX_SAFE_INTEGER,s=e.model;return i=i||s.getFullModelRange(),be.pM._doFindMatchesMultiline(s,i,new be.sz(r,t),n,a)}};const we=ye;var _e={setModelLanguage:function(e,t){h.editor.setModelLanguage(e.model,t)},removeAllMarkers:function(e){h.editor.removeAllMarkers(e)},addKeybindingRules:function(e){return h.editor.addKeybindingRules(e)}};const ke=_e;function Pe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Se={register:function(e,t,n,i){h.languages.register({id:e,extensions:t,aliases:n,mimetypes:i})},registerCompletionItemProvider:function(e,t,n){return h.languages.registerCompletionItemProvider(e,{triggerCharacters:t,provideCompletionItems:n})},registerHoverProvider:function(e,t){return h.languages.registerHoverProvider(e,{provideHover:t})},getJsonDiagnosticsOptions:function(){return h.languages.json.jsonDefaults.diagnosticsOptions},updateJsonDiagnosticsOptions:function(e){h.languages.json.jsonDefaults.setDiagnosticsOptions(Ce(Ce({},h.languages.json.jsonDefaults.diagnosticsOptions),e))},createWordRegex:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n="(-?\\d*\\.\\d\\w*)|([^",i=Pe("`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?");try{for(i.s();!(e=i.n()).done;){var r=e.value;t.indexOf(r)>=0||(n+="\\"+r)}}catch(e){i.e(e)}finally{i.f()}return n+="\\s]+)",new RegExp(n,"g")},getLanguageConfiguration:function(e){var t=h.languages.getLanguages().find((function(t){return t.id===e}));return t&&t.loader?new Promise((function(e,n){t.loader().then((function(t){return e(t)}),n)})):Promise.resolve({conf:null,language:null})}};var Ee,Ie,Te,je,Ae=n(1432),Oe=["ide:key_esc","emmet:expand_abbreviation_with_tab"],De=["editor:key_find_next","editor:key_find_prev"],Ne=function(e){if(1===e.chords.length)return Me(e.chords[0]);if(2===e.chords.length){var t=Me(e.chords[0]);return Me(e.chords[1])<<16|t}throw"Can not decode monaco editor keybinding"},Me=function(e){var t=[];return e.ctrlKey&&t.push(2===Ae.OS?ge.WinCtrl:ge.Ctrl),e.metaKey&&t.push(2===Ae.OS?ge.Ctrl:ge.WinCtrl),e.shiftKey&&t.push(ge.Shift),e.altKey&&t.push(ge.Alt),t.push(e.keyCode),y().reduce(t,(function(e,t){return e|t}),0)},Fe=function(e){return ke.addKeybindingRules(e)},Re=function(e){return e.split("-").map((function(e){return e=2===Ae.OS&&"Ctrl"===e?"WinCtrl":e,ge[e]})).reduce((function(e,t){return e|t}))},Le=function(e){return!!me[e]},Ue=function(e){return me[e]&&me[e]===he},Be=function(e){var t=me[e];return t&&!Ue(e)?t:"codio.".concat(e)},qe=y().debounce(function(){var e=o.Z.hotkey.getCompiledInfo(),t=y()(e).filter((function(e){var t="".concat(e.plugin,":").concat(e.command);return Le(t)&&!Ue(t)&&!function(e){return De.includes(e)}(t)})).map((function(e){var t="".concat(e.plugin,":").concat(e.command),n=Re(e.shortcut);return{command:Be(t),keybinding:n}})).value();Ee=Fe(t)}.bind(void 0),1e3);Ie=y().omit(me,De),Te=y().keyBy(Ie,(function(e){return e})),je=y()(fe.W.getDefaultKeybindings()).filter((function(e){return Te[e.command]})).map((function(e){var t=e.keybinding;return{command:null,keybinding:Ne(t)}})).value(),Fe(je),s.Z.subscribe("settings:hotkey:updated",(function(){Ee&&Ee.dispose(),Ee=null,y().defer((function(){return qe()}))}));var He=function(){function e(t,n){(0,c.Z)(this,e),this._model=t,this._lineNumber=n,this._currentLineNumber=n,this._onChangeContentDisposableHandler=this._model.onDidChangeContent(this._onChangeContent.bind(this))}return(0,l.Z)(e,[{key:"_originalLineChanged",value:function(){this._currentLineNumber=null,this._unbind()}},{key:"_onChangeContent",value:function(e){if(e.isFlush)return this._originalLineChanged();for(var t=0;t<e.changes.length;t++){var n=e.changes[t];if(!(n.range.startLineNumber>this._currentLineNumber)){if(n.range.startLineNumber===this._currentLineNumber||n.range.startLineNumber<this._currentLineNumber&&n.range.endLineNumber>=this._currentLineNumber){this._originalLineChanged();break}var i=n.range.endLineNumber-n.range.startLineNumber+1,r=n.text.split("\n").length;this._currentLineNumber+=r-i}}}},{key:"getLineNumber",value:function(){return this._currentLineNumber}},{key:"_unbind",value:function(){this._onChangeContentDisposableHandler&&this._onChangeContentDisposableHandler.dispose(),this._onChangeContentDisposableHandler=null}},{key:"destroy",value:function(){this._unbind(),this._model=null}}]),e}();const We=He;var ze=[],Ge=function(){var e=(0,B.Z)(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ze.includes(t)){e.next=3;break}return ze.push(t),e.abrupt("return",n(85520)("./".concat(t,".json")).then((function(e){h.editor.defineTheme(t,e)})).catch((function(){})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(e){return e.replace(/\s+/g,"-").toLowerCase()},Ke=function(){var e=(0,B.Z)(H().mark((function e(t,n){var i,r;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ve(n),r=t.getContainerDomNode(),e.next=4,Ge(n);case 4:(i=r.classList).remove.apply(i,ze),"dyslexic"===n?t.updateOptions({fontFamily:'"OpenDyslexic Mono", monospace'}):t.updateOptions({fontFamily:'"Source Code Pro", Monaco, Menlo, Consolas, "Courier New", monospace'}),r.classList.add(n),document.fonts&&document.fonts.ready&&y().isFunction(document.fonts.ready.then)?document.fonts.ready.then((function(){h.editor.remeasureFonts()})):h.editor.remeasureFonts(),h.editor.setTheme(n);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qe=y().debounce((function(e){h.languages.typescript.javascriptDefaults.setDiagnosticsOptions(Je(Je({},h.languages.typescript.javascriptDefaults.getDiagnosticsOptions()),{},{noSemanticValidation:!0,noSyntaxValidation:!0,noSuggestionDiagnostics:!0})),h.languages.typescript.typescriptDefaults.setDiagnosticsOptions(Je(Je({},h.languages.typescript.typescriptDefaults.getDiagnosticsOptions()),{},{noSemanticValidation:!e,noSyntaxValidation:!e,noSuggestionDiagnostics:!e})),h.languages.css.cssDefaults.setOptions(Je(Je({},h.languages.css.cssDefaults.options),{},{validate:e})),h.languages.css.lessDefaults.setOptions(Je(Je({},h.languages.css.lessDefaults.options),{},{validate:e})),h.languages.css.scssDefaults.setOptions(Je(Je({},h.languages.css.scssDefaults.options),{},{validate:e})),h.languages.json.jsonDefaults.setDiagnosticsOptions(Je(Je({},h.languages.json.jsonDefaults.diagnosticsOptions),{},{validate:e}))}),100),Xe=n(31957),$e=s.Z.create(w),et=function(){$e.saveAllFiles()};s.Z.subscribe("command:editor:key_save_single",(function(){var e=a.Z.ide.panels.focus.activeTab();e.filename||e.extension.then((function(e){y().isFunction(e.getFile)&&$e.saveFile({filename:e.getFile()})})),$e.saveFile({filename:e.filename})})),s.Z.subscribe("command:editor:key_save",et),s.Z.subscribe("command:editor:key_save_all",et);var tt={key_go_line_start:function(e){var t={lineNumber:e.getPosition().lineNumber,column:1};e.setPosition(t),e.revealPosition(t)},key_go_line_end:function(e){var t=e.getPosition(),n=e.getModel().getLineMaxColumn(t.lineNumber),i={lineNumber:t.lineNumber,column:n};e.setPosition(i),e.revealPosition(i)},key_insertTab:function(e){var t=e.getSelections(),n=[];if(0===t.length){var i=e.getPosition();n.push({range:{startLineNumber:i.lineNumber,startColumn:i.column,endLineNumber:i.lineNumber,endColumn:i.column},text:"\t"})}else t.forEach((function(e){return n.push({range:e,text:"\t"})}));e.executeEdits("custom-command",n,we.dropSelectionCursorStateComputer())},key_remove_selected_line:function(e){var t=e.getSelections().pop();t&&(t.startColumn=1,t.endColumn=e.getModel().getLineMaxColumn(t.endLineNumber),t.endLineNumber<e.getModel().getLineCount()&&(t.endLineNumber+=1,t.endColumn=1),e.getModel().pushEditOperations([],[{range:t,text:""}],we.dropSelectionCursorStateComputer()))}},nt={expand_abbreviation:Xe.Nw.expandAction,expand_abbreviation_with_tab:{run:Xe.Nw.expandAction,precondition:"hasEmmetAbbreviation"},match_pair_outward:Xe.Nw.balanceActionOutward,match_pair_inward:Xe.Nw.balanceActionInward,wrap_with_abbreviation:Xe.Nw.wrapWithAbbreviationAction,next_edit_point:function(e){return Xe.Nw.goToEditPointAction(e,1)},prev_edit_point:function(e){return Xe.Nw.goToEditPointAction(e,-1)},merge_lines:Xe.Nw.mergeLines,split_join_tag:Xe.Nw.splitJoinTagAction,remove_tag:Xe.Nw.removeTagAction,evaluate_math_expression:Xe.Nw.evaluateMathAction,increment_number_by_1:function(e){return Xe.Nw.incrementNumberAction(e,1)},decrement_number_by_1:function(e){return Xe.Nw.incrementNumberAction(e,-1)},increment_number_by_01:function(e){return Xe.Nw.incrementNumberAction(e,.1)},decrement_number_by_01:function(e){return Xe.Nw.incrementNumberAction(e,-.1)},increment_number_by_10:function(e){return Xe.Nw.incrementNumberAction(e,10)},decrement_number_by_10:function(e){return Xe.Nw.incrementNumberAction(e,-10)},select_next_item:function(e){return Xe.Nw.selectItemAction(e,!1)},select_previous_item:function(e){return Xe.Nw.selectItemAction(e,!0)},reflect_css_value:Xe.Nw.reflectCssValue},it=n(42982);const rt=function(e,t){if(e&&(function(e){e.deltaDecorations(e.highlightMarkers||[],[]),e.highlightMarkers=[]}(e),e&&!y().isUndefined(t)&&!y().isUndefined(t.ref)&&0!==t.ref.length)){var n=function(e,t){var n=parseInt(e,10);if(y().isNaN(n)){var i=t.findNextMatch(e,{lineNumber:1,column:1});return i?i.range.startLineNumber:null}return n}(t.ref,e);if(null!==n)!function(e,t,n){if(e){var i=Math.max(1,t),r=Math.min(e.getLineCount(),i+n-1),a=[],s=[];i>1&&(a=e.deltaDecorations([],[{range:ve.fromPositions({lineNumber:1,column:1},{lineNumber:i-1,column:1}),options:{isWholeLine:!0,inlineClassName:"code-highlight-hide"}}])),r<e.getLineCount()&&(s=e.deltaDecorations([],[{range:ve.fromPositions({lineNumber:r+1,column:1},{lineNumber:e.getLineCount(),column:1}),options:{isWholeLine:!0,inlineClassName:"code-highlight-hide"}}])),e.highlightMarkers=[].concat((0,it.Z)(a),[s]),e.setPosition({lineNumber:i,column:1}),e.scrollIntoView({lineNumber:i,column:1},{lineNumber:r,column:1})}}(e,n,t.count||1)}};var at=function(){function e(t,n){var i=this;(0,c.Z)(this,e),this._editor=t,this._text=n,this._toDispose=[this._editor.onDidChangeModelContent((function(){return i._redrawPlaceholder()})),this._editor.onDidChangeModel((function(){return i._redrawPlaceholder()})),this._editor.onDidChangeConfiguration((function(e){i._widget&&e.hasChanged(h.editor.EditorOption.fontInfo)&&i._redrawPlaceholder()}))],this._redrawPlaceholder()}return(0,l.Z)(e,[{key:"_redrawPlaceholder",value:function(){this._removePlaceholder(),this._editor.getValue()||this._addPlaceholder()}},{key:"_addPlaceholder",value:function(){if(this._text){var e=this._editor.getOption(h.editor.EditorOption.fontSize),t=this._editor.getOption(h.editor.EditorOption.lineHeight),n=this._text;this._widget={domNode:null,getId:function(){return"monaco.editor.placeholder"},getDomNode:function(){return this.domNode||(this.domNode=document.createElement("div"),this.domNode.style.width="max-content",this.domNode.style.pointerEvents="none",this.domNode.style.opacity=.5,this.domNode.style.fontSize="".concat(e,"px"),this.domNode.style.lineHeight="".concat(t,"px"),this.domNode.innerHTML=n),this.domNode},getPosition:function(){return{position:{lineNumber:1,column:1},preference:[0]}},suppressMouseDown:!1},this._editor.addContentWidget(this._widget)}}},{key:"_removePlaceholder",value:function(){this._widget&&this._editor.removeContentWidget(this._widget),this._widget=null}},{key:"setText",value:function(e){this._text=e,this._redrawPlaceholder()}},{key:"dispose",value:function(){this._removePlaceholder(),this._toDispose&&(this._toDispose.forEach((function(e){return e.dispose()})),this._toDispose=null),this._editor=null}}]),e}();const st=at;var ot=function(){function e(t){(0,c.Z)(this,e),this._editor=t,this._hasEmmetAbbreviation=t.createContextKey("hasEmmetAbbreviation",!1),this._bindEvents(),this._updateHasEmmetAbbreviation()}return(0,l.Z)(e,[{key:"_bindEvents",value:function(){this._events=[this._editor.onDidChangeCursorPosition(this._onDidChangeCursorPositionUpdate.bind(this)),this._editor.onDidChangeModel(this._onDidChangeModelUpdate.bind(this)),this._editor.onDidChangeModelContent(this._onDidChangeModelContentUpdate.bind(this))]}},{key:"_onDidChangeCursorPositionUpdate",value:function(){this._updateHasEmmetAbbreviation()}},{key:"_onDidChangeModelUpdate",value:function(){this._updateHasEmmetAbbreviation()}},{key:"_onDidChangeModelContentUpdate",value:function(){this._updateHasEmmetAbbreviation()}},{key:"_updateHasEmmetAbbreviation",value:function(){var e=!!this._editor.getModel()&&Xe._y.hasAbbreviation(this._editor);this._hasEmmetAbbreviation.set(e)}},{key:"dispose",value:function(){this._editor=null,this._hasEmmetAbbreviation=null,this._events.forEach((function(e){return e.dispose()}))}}]),e}();const ct=ot;function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,f.Z)(e);if(t){var r=(0,f.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,p.Z)(this,n)}}window.monaco=h;var ut=function(e){(0,d.Z)(n,e);var t=lt(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,c.Z)(this,n),(r=t.call(this))._runtimeOptions=a,r._editorContainer=N()('<div class="monaco-editor-container"/>'),e&&e.append(r._editorContainer),r._debounceHotkeyChanged=y().debounce(r._onHotkeysChanged.bind((0,u.Z)(r)),500),r._createEditor(),r._settingsChangeHandler=s.Z.subscribe("editor:settings:changed",r._onSettingsChanged.bind((0,u.Z)(r))),r._hotkeysChangeHandler=s.Z.subscribe("settings:hotkey:updated",r._debounceHotkeyChanged),r._disposableActions=[],r}return(0,l.Z)(n,[{key:"_createEditor",value:function(){this._editor=h.editor.create(this._editorContainer[0]),this._placeholder=new st(this._editor,""),this._preconditions=new ct(this._editor),this._applyOptions(),this._debounceHotkeyChanged(),this._bindKeyDown()}},{key:"getEditor",value:function(){return this._editor}},{key:"setPlaceholder",value:function(e){this._placeholder.setText(e)}},{key:"_bindKeyDown",value:function(){this._onKeyDownDisposable=this._editor.onKeyDown((function(e){var t=e.keyCode,n=e.ctrlKey,i=e.metaKey,r=e.shiftKey;69!==t||i||n||r||e.preventDefault()}))}},{key:"_onSettingsChanged",value:function(e,t){this._applyOptions(t)}},{key:"_applyOptions",value:function(e){void 0===e&&(e=I.get());var t=y().cloneDeep(this._runtimeOptions);y().defaults(t,e),Ke(this._editor,t.theme),delete t.theme,Qe(t.linting),delete t.linting,this._applyKeyMap(t.keyMap),delete t.keyMap,this._editor.updateOptions(t),this._model&&this._model.updateOptions({tabSize:t.tabSize,insertSpaces:t.insertSpaces})}},{key:"_applyKeyMap",value:function(e){switch(e){case"vim":this._vimMode||(this._emacsMode&&this._emacsMode.dispose(),this._emacsMode=null,this._vimMode=(0,M.vM)(this._editor));break;case"emacs":this._vimMode&&this._vimMode.dispose(),this._vimMode=null,this._emacsMode=new F.Wp(this._editor),this._emacsMode.start();break;default:this._vimMode&&this._vimMode.dispose(),this._vimMode=null,this._emacsMode&&this._emacsMode.dispose(),this._emacsMode=null}}},{key:"_onHotkeysChanged",value:function(){var e=this;this._editor&&(this._disposableActions.forEach((function(e){return e.dispose()})),this._disposableActions=[],o.Z.hotkey.getCompiledInfo().forEach((function(t){var n,i="".concat(t.plugin,":").concat(t.command),a=Re(t.shortcut);if(Le(i)){if(Ue(i)){var s=r[t.plugin]?r[t.plugin][t.command]:null;n=s?e._editor.addAction({id:Be(i),label:i,keybindings:a?[a]:void 0,run:s.run||s,precondition:s.precondition||void 0}):null}}else(function(e){return Oe.includes(e)})(i)||(n=e._editor.addAction({id:Be(i),label:t.description||i,keybindings:a?[a]:void 0,run:t.callback}));n&&e._disposableActions.push(n)})))}},{key:"runCommand",value:function(e){e=y().trimStart(e,"command:"),this._editor&&Le(e)&&this._editor.trigger("codioEditor.runCommand",Be(e))}},{key:"scrollToLine",value:function(e){this._editor&&this._editor.revealLineInCenter(e)}},{key:"scrollToPosition",value:function(e){this._editor&&this._editor.revealPosition(e)}},{key:"setScrollTop",value:function(e){this._editor&&this._editor.setScrollTop(e)}},{key:"setScrollPosition",value:function(e,t){this._editor&&this._editor.setScrollPosition({scrollTop:e,scrollLeft:t})}},{key:"scrollIntoView",value:function(e,t){this._editor&&this._editor.revealRangeInCenter(h.Range.fromPositions(e,t))}},{key:"close",value:function(){this._placeholder&&this._placeholder.dispose(),this._placeholder=null,this._settingsChangeHandler&&s.Z.unsubscribe(this._settingsChangeHandler),this._settingsChangeHandler=null,this._debounceHotkeyChanged=null,this._hotkeysChangeHandler&&s.Z.unsubscribe(this._hotkeysChangeHandler),this._hotkeysChangeHandler=null,this._preconditions&&this._preconditions.dispose(),this._preconditions=null,this._editor&&this._editor.dispose(),this._editor=null,this._editorContainer&&this._editorContainer.remove(),this._editorContainer=null,this._onKeyDownDisposable&&this._onKeyDownDisposable.dispose(),this._onKeyDownDisposable=null}},{key:"setOption",value:function(e,t){y().isNull(t)?(delete this._runtimeOptions[e],this._editor&&this._applyOptions()):(this._runtimeOptions[e]=t,this._editor&&this._editor.updateOptions((0,O.Z)({},e,t)))}},{key:"getOption",value:function(e){return this._editor?this._editor.getOption(h.editor.EditorOption[e]):null}},{key:"connect",value:function(e){e.append(this._editorContainer),this._editor&&this._editor.layout()}},{key:"cleanup",value:function(){this._editorContainer&&this._editorContainer.detach()}},{key:"isVisible",value:function(){return this._editorContainer.is(":visible")}},{key:"onDidFocus",value:function(e){return this._editor?this._editor.onDidFocusEditorWidget(e):null}},{key:"hasFocus",value:function(){return!!this._editor&&this._editor.hasWidgetFocus()}},{key:"focus",value:function(){this._editor&&this._editor.focus()}},{key:"onDidChangeModelContent",value:function(e){return this._editor?this._editor.onDidChangeModelContent(e):null}},{key:"onDidScrollChange",value:function(e){return this._editor?this._editor.onDidScrollChange(e):null}},{key:"onDidChangeModel",value:function(e){return this._editor?this._editor.onDidChangeModel(e):null}},{key:"getPosition",value:function(){return this._editor?this._editor.getPosition():null}},{key:"setPosition",value:function(e){this._editor&&this._editor.setPosition(e)}},{key:"setSelections",value:function(e){this._editor&&this._editor.setSelections(e)}},{key:"getLineCount",value:function(){return this._editor?this._editor.getModel().getLineCount():0}},{key:"replaceRange",value:function(e,t,n){n=n||t,this._editor&&this._editor.executeEdits("codio-editor",[{range:{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column},text:e}],we.dropSelectionCursorStateComputer())}},{key:"executeEdits",value:function(e,t){this._editor&&this._editor.executeEdits("codio-editor",e,t||we.dropSelectionCursorStateComputer())}},{key:"saveViewState",value:function(){return this._editor?this._editor.saveViewState():null}},{key:"restoreViewState",value:function(e){this._editor&&this._editor.restoreViewState(e)}},{key:"onDidChangeCursorPosition",value:function(e){return this._editor?this._editor.onDidChangeCursorPosition(e):null}},{key:"getSelection",value:function(){return this._editor?this._editor.getSelection():null}},{key:"setModel",value:function(e){this._model=e,this._editor&&this._editor.setModel(e.model)}},{key:"getModel",value:function(){return this._model}},{key:"setModelLanguage",value:function(e){this._editor&&!this._editor.getModel()&&h.editor.setModelLanguage(this._editor.getModel(),e)}},{key:"getLineContent",value:function(e){return this._editor?this._editor.getModel().getLineContent(e):""}},{key:"layout",value:function(){this._editor&&this._editor.layout()}},{key:"getLayoutInfo",value:function(){return this._editor?this._editor.getLayoutInfo():null}},{key:"getScrollLeft",value:function(){return this._editor?this._editor.getScrollLeft():0}},{key:"getScrollTop",value:function(){return this._editor?this._editor.getScrollTop():0}},{key:"getScrollWidth",value:function(){return this._editor?this._editor.getScrollWidth():0}},{key:"getScrollHeight",value:function(){return this._editor?this._editor.getScrollHeight():0}},{key:"getTopForLineNumber",value:function(e){return this._editor?this._editor.getTopForLineNumber(e):0}},{key:"getTopForPosition",value:function(e,t){return this._editor?this._editor.getTopForPosition(e,t):0}},{key:"getOffsetForColumn",value:function(e,t){return this._editor?this._editor.getOffsetForColumn(e,t):0}},{key:"getContent",value:function(){return this._editor?this._editor.getModel().getValue():""}},{key:"getVisibleRanges",value:function(){return this._editor?this._editor.getVisibleRanges():null}},{key:"findNextMatch",value:function(e,t,n,i,r,a){return this._editor?this._editor.getModel().findNextMatch(e,t,n,i,r,a):null}},{key:"deltaDecorations",value:function(e,t){return this._editor?this._editor.deltaDecorations(e,t):[]}},{key:"highlight",value:function(e){this._editor&&rt(this,e)}},{key:"addContentWidget",value:function(e){this._editor&&this._editor.addContentWidget(e)}},{key:"removeContentWidget",value:function(e){this._editor&&this._editor.removeContentWidget(e)}},{key:"layoutContentWidget",value:function(e){this._editor&&this._editor.layoutContentWidget(e)}},{key:"addOverlayWidget",value:function(e){this._editor&&this._editor.addOverlayWidget(e)}},{key:"removeOverlayWidget",value:function(e){this._editor&&this._editor.removeOverlayWidget(e)}},{key:"layoutOverlayWidget",value:function(e){this._editor&&this._editor.layoutOverlayWidget(e)}},{key:"setModelMarkers",value:function(e,t){this._editor&&h.editor.setModelMarkers(this._editor.getModel(),e,t)}},{key:"changeViewZones",value:function(e){this._editor&&this._editor.changeViewZones(e)}},{key:"getLineHandle",value:function(e){return this._editor?new We(this._editor.getModel(),e):null}},{key:"getValueInRange",value:function(e){return this._editor?this._editor.getModel().getValueInRange(e):""}},{key:"onMouseMove",value:function(e){return this._editor?this._editor.onMouseMove(e):null}},{key:"onMouseLeave",value:function(e){return this._editor?this._editor.onMouseLeave(e):null}},{key:"onMouseDown",value:function(e){return this._editor?this._editor.onMouseDown(e):null}},{key:"getSelections",value:function(){return this._editor?this._editor.getSelections():[]}},{key:"getLineDecorations",value:function(e){return this._editor?this._editor.getLineDecorations(e):[]}},{key:"getContribution",value:function(e){return this._editor?this._editor.getContribution(e):null}},{key:"addAction",value:function(e){return this._editor?this._editor.addAction(e):null}},{key:"setHiddenAreas",value:function(e){this._editor&&this._editor.setHiddenAreas(e)}},{key:"hasTextFocus",value:function(){return!!this._editor&&this._editor.hasTextFocus()}},{key:"createDecorationsCollection",value:function(e){return this._editor?this._editor.createDecorationsCollection(e):null}}]),n}(R);const dt=ut;var pt=n(70885),ft=n(84581),ht=n.n(ft),mt=n(20294);function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bt=null,yt={enabled:!0,suggest:!0},wt=function(){function e(t,n){var i=this;(0,c.Z)(this,e),this._highlights=null,this._typos=[],this._editor=t,this._suggestActions=[];var r=vt(vt({},yt),n),a=y().debounce(this._onContentChange.bind(this),500,{maxWait:1e4});this._onContentChangeDisposable=t.onDidChangeModelContent(a),this._onChangeModelDisposable=t.onDidChangeModel(this._checkTypoAndRefreshAll.bind(this)),this._refreshAllOnReady=!1,this._enabled=r.enabled,this._suggest=r.suggest,this._typoReady=this._initTypo();var s=function(){var e=(0,B.Z)(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i._typoReady;case 2:i._initSuggestForContextMenu(),i._refreshAllOnReady&&i._refreshAllHighlights();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();s()}var t,i;return(0,l.Z)(e,[{key:"_initTypo",value:(i=(0,B.Z)(H().mark((function e(){var t,i,r,a;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!bt){e.next=2;break}return e.abrupt("return",bt);case 2:return e.next=4,Promise.all([n.e(2988).then(n.t.bind(n,92807,17)),n.e(2988).then(n.t.bind(n,8944,17))]);case 4:return t=e.sent,i=(0,pt.Z)(t,2),r=i[0],a=i[1],bt=new(ht())("en_US",r.default,a.default),e.abrupt("return",bt);case 10:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"init",value:(t=(0,B.Z)(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._checkTypoAndRefreshAll();case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_initSuggestForContextMenu",value:function(){if(this._editor){var e=this._editor.getContribution("editor.contrib.contextmenu");if(e){this._originalOnContextMenu=e._onContextMenu;var t=this;e._onContextMenu=function(){t._addSuggestActions(arguments[0].target.position),t._originalOnContextMenu.apply(e,arguments)}}}}},{key:"_addSuggestActions",value:function(e){var t=this;if(this._suggest&&e){this._cleanupSuggestActions();var n=y().find(this._typos,(function(t){var n=t.range;return ve.containsPosition(n,e)}));n&&(this._suggestActions=y().map(bt.suggest(n.word),(function(e){return t._createSuggestAction(n,e)})))}}},{key:"_cleanupSuggestActions",value:function(){y().each(this._suggestActions,(function(e){return e.dispose()})),this._suggestActions=[]}},{key:"_createSuggestAction",value:function(e,t){var n=this;return this._editor.addAction({id:mt.ZP.GUID(4),label:t,precondition:null,contextMenuGroupId:"spellingContextMenuGroup",contextMenuOrder:1,run:function(){n._editor&&n._editor.replaceRange(t,ve.getStartPosition(e.range),ve.getEndPosition(e.range))}})}},{key:"_onContentChange",value:function(){this._checkTypoAndRefreshAll()}},{key:"_checkTypoAndRefreshAll",value:function(){bt?this._refreshAllHighlights():this._refreshAllOnReady=!0}},{key:"_refreshAllHighlights",value:function(){var e=this;if(this._editor&&this._editor.getModel()&&this._enabled){this._typos=[];var t=we.findMatchesByRegex(this._editor.getModel(),Se.createWordRegex(),!0).map((function(t){var n=t.matches[0];return bt.check(n)?null:(e._typos.push({word:n,range:t.range}),{range:t.range,options:{className:"squiggly-error",isWholeLine:!1}})})).filter((function(e){return!!e}));this._highlights&&this._highlights.clear(),this._highlights=this._editor.createDecorationsCollection(t)}}},{key:"cleanup",value:function(){if(this._onContentChangeDisposable&&this._onContentChangeDisposable.dispose(),this._onContentChangeDisposable=null,this._onChangeModelDisposable&&this._onChangeModelDisposable.dispose(),this._onChangeModelDisposable=null,this._cleanupSuggestActions(),this._editor){var e=this._editor.getContribution("editor.contrib.contextmenu");e&&this._originalOnContextMenu&&(e._onContextMenu=this._originalOnContextMenu),this._highlights&&this._highlights.clear(),this._editor=null}this._highlights=null,this._typoReady=null,this._originalOnContextMenu=null,this._typos=null,this._suggestActions=null}},{key:"enableSpellchecker",value:function(e){this._enabled!==e&&(this._enabled=e,e?this._checkTypoAndRefreshAll():(this._highlights&&this._highlights.clear(),this._highlights=null))}},{key:"enableSuggest",value:function(e){this._suggest!==e&&(this._suggest=e,e||this._cleanupSuggestActions())}}]),e}();const _t=wt,kt=h.MarkerSeverity;s.Z.subscribe("command:editor:key_toggle:#param",(function(e){a.Z.currentUser.isAnonymous()||o.Z.hotkey.execute("settings","update:user",{plugin:"editor",key:e.param,value:!o.Z.get("editor")[e.param]})})),s.Z.subscribe("command:editor",(function(e){a.Z.currentEditor&&a.Z.currentEditor.editor&&a.Z.currentEditor.editor.runCommand(e)}))},93443:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var i=n(52308),r=n.n(i),a=n(96486),s=n.n(a),o=n(20294),c=n(16301),l=n.n(c);function u(e){this._value=e}u.prototype=Object.create(String.prototype,{constructor:{value:u}}),u.prototype.toString=function(){return this._value};var d=l().delimeter=":",p=[],f=0;o.ZP.getURLParameter("DEBUG");function h(e){var t="[[-DLIMTER_CHNGE--]]",n="\\"+d,i=e.split(n).join(t).split(d);return s().each(i,(function(e,n,i){i[n]=e.split(t).join(d)})),i}function m(e,t,n){return function(i,r){if(i=function(e,t,n){var i=h(e=new u(e));for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&i[r]!==n[r])return!1;for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(void 0===i[t[r]])return!1;e[r]=i[t[r]]}return e}(i,e,t),!1!==i)return n(i,r)}}const g={subscribe:function(e,t){var n=function(e,t){for(var n=h(e),i=!1,r=[],a={},s={},o=0,c=n.length;o<c;++o){var l=n[o];"#"===l[0]&&l.length>1?(i=!0,a[l.substr(1)]=o):i&&(s[o]=l),i||r.push(n[o])}var u=t;return i?(u=m(a,s,t),p[++f]={callback:u,original:t,originalTopic:e,topic:r.join(d)}):{callback:u,topic:r.join(d)}}(e,t);return n.token=l().subscribe(n.topic,n.callback),n.token},unsubscribe:function e(t){s().isArray(t)?s().each(t,(function(t){e(t)})):(!function(e){for(var t=p.length;t>=1;t--)if(p[t]){var n=p[t].original===e,i=p[t].token===e;(n||i)&&(l().unsubscribe(p[t].callback),p.splice(t,1))}}(t),l().unsubscribe(t))},publish:function(e,t){return l().publish(e,t)},publishSync:function(e,t){return l().publishSync(e,t)}};var v=o.ZP.str;function b(e){return function(){var t=Array.prototype.slice.call(arguments),n=t.shift(),i=r()(n);return i[e].apply(i,t)}}var y={sync:"publishSync",async:"publish"};function w(e,t){return s().includes(e,"#")?function(n,i){var r=function(e,t){return s().isObject(t)?(s().forEach(t,(function(t,n){"command"!==n&&(t=v.escapeColon(t)),e=e.replace("#"+n,t)})),e):e}(e,n);g[y[t]](r,i)}:function(n){g[y[t]](e,n)}}var _={};_.bind=b("bind"),_.unbind=b("unbind"),_.on=b("on"),_.one=b("one"),_.off=b("off"),_.trigger=b("trigger"),_.create=function(e,t){t=void 0!==t&&t,s().isString(e)&&(e=JSON.parse(e));var n={};return s().forOwn(e,(function(e,i){var r=t?"sync":"async";s().isObject(e)&&(r=e.type,e=e.event),n[i]=w(e,r)})),e=null,n},_.createSync=function(e){return _.create(e,!0)},["subscribe","unsubscribe","publish"].forEach((function(e){_[e]=g[e]}));const k=_},71e3:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(96486),r=n.n(i),a=n(49721),s=n(44442);function o(e,t){t=t||"Executing: "+e,s.Z.hotkey.execute("file","open",{ext:"terminal",filename:t.toLowerCase(),title:t,view:"backend"}),r().delay((function(){a.Z.ide.panels.focus.activeTab().extension.then((function(t){t&&t.termPromise&&t.termPromise.then((function(t){t.exec(e)})).catch((function(){}))}))}))}},18098:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(92826),r=n(42982),a=n(96486),s=n.n(a),o=n(44442),c={},l={},u={},d={};function p(e){var t=e.info.name;if(e.settings&&o.Z.plugin(t,e.settings),e.hotkeys&&o.Z.hotkey.plugin(t,e.hotkeys),s().has(e.info.codio,"view")&&(e.view=!0,function(e){var t=e.info.codio;s().isArray(t.view)||(t.view=[t.view]);s().map(t.view,(function(n){void 0!==t.fileExt&&(s().isArray(t.fileExt)||(t.fileExt=[t.fileExt]),s().map(t.fileExt,(function(t){u[t]=u[t]||{},u[t][n]=e}))),void 0!==t.fileName&&(s().isArray(t.fileName)||(t.fileName=[t.fileName]),s().map(t.fileName,(function(t){l[t]=l[t]||{},l[t][n]=e})))}))}(e)),s().has(e.info.codio,"urls")){var n=e.info.codio.urls;s().isArray(n)||(n=[n]),s().map(n,(function(t){d[t]=e}))}return e}var f={register:function(e){return!(!e.info&&e.info.name)&&(c[e.info.name]=e,p(e))},get:function(e){return function(){if(!s().has(c,e))throw new Error("Unrecognized extension: "+e+".");return c[e].get()}},getViews:function(){return s().filter(c,{view:!0})},create:function(e){var t=s().toArray(arguments).slice(1);return f.get(e)().then((function(e){return(0,i.Z)(e,(0,r.Z)(t))}))},getByUrl:function(e){return d[e]},getByExt:function(e){return void 0!==e?u[e]:u},getByFilename:function(e){return void 0!==e?l[e]:l},getExt:function(e){return c[e]},loadModule:function(e){return new Promise((function(t,n){e((function(e){void 0!==e?t(e.default):n(new Error("Module was not loaded"))}))}))}};const h=f},15094:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var i=n(15861),r=n(15671),a=n(43144),s=n(87757),o=n.n(s),c=n(96486),l=n.n(c),u=n(49721),d=n(20294),p=n(56609),f=n(93443),h=n(87167),m={};const g=function(e,t){m[e]=t},v=function(e){return m[e]},b=function(){return l().keys(m)},y=function(e,t){var n=m[e];n&&(1===n.links||t)&&delete m[e]},w=function(e,t){m[t]=m[e],delete m[e]},_=function(){l().forEach(m,(function(e){return e.close(!0)})),m={}};var k=f.Z.create(n(17133)),P=d.ZP.path.parse,Z=function(){function e(t,n){var i=this;(0,r.Z)(this,e);var a=v(t);if(a)return a.links+=1,a;n=n||{};var s=P(t),o=s.name,c=s.dir,l=s.path,d=s.extension;this._name=o,this._dir=c,this._path=l,this._extension=d,this._fullFilePath=t,this._extra=n,this.status=new Promise((function(e,t){i.statusResolve=e,i.statusReject=t})),this.links=1,this._bindEvents();var f=h.Zo.Hn.detectLanguage("",this._fullFilePath);if(this._model=new h.yO("",f),g(this._fullFilePath,this),n.enableSharejs)p.Z.attachFile(this._model,t).then((function(){return i._onFileLoaded()})).catch(this._onFileLoaded.bind(this)).finally(this._bindChange.bind(this));else{var m={decodeContents:n.decodeContents};u.Z.currentProject.getBinaryFileContent(t,m).then((function(e){i._unbindChange(),i._model.setValue(e),i._bindChange(),i.statusResolve()})).catch((function(e){return i.statusReject(e)}))}this._synchronization=v(t).status}var t;return(0,a.Z)(e,[{key:"_unbindChange",value:function(){this._model._onChangeDisposable&&this._model._onChangeDisposable.dispose(),this._model._onChangeDisposable=null}},{key:"_bindChange",value:function(){this._unbindChange(),this._model._onChangeDisposable=this._model.onDidChangeModelContent(this._fileChanged.bind(this))}},{key:"_fileChanged",value:function(){k.fileChange({name:this._fullFilePath},this._model.getValue())}},{key:"_cleanOnRemove",value:function(e){var t=e.file;(t===this._fullFilePath||l().startsWith(this._fullFilePath,t+"/"))&&this.close(!0)}},{key:"_onFileLoaded",value:function(e){e?this.statusReject(e):this.statusResolve()}},{key:"_bindEvents",value:function(){var e=this;this._removeSubscriptionId=f.Z.subscribe("item:deleted:#file",this._cleanOnRemove.bind(this)),this.updateHandlerId=f.Z.subscribe("file:prop:update:"+this._fullFilePath,(function(t,n){e._model&&l().assign(e._model,n),k.filePropUpdated({path:e._fullFilePath})}))}},{key:"model",get:function(){return this._model}},{key:"synchronization",get:function(){return this._synchronization}},{key:"name",get:function(){return this._name}},{key:"dir",get:function(){return this._dir}},{key:"path",get:function(){return this._path}},{key:"fullFilePath",get:function(){return this._fullFilePath}},{key:"extension",get:function(){return this._extension}},{key:"content",get:function(){return this._model.getValue()},set:function(e){this._model.setValue(e)}},{key:"rename",value:function(e){var t=this,n=this._fullFilePath,i=d.ZP.promise.deferred(),r=this._fullFilePath;return this._extra.enableSharejs?(p.Z.detachFile(this._fullFilePath).then((function(){return p.Z.attachFile(t._model,e).then((function(){t.onAfterRename(e),w(n,e),i.resolve()}))})).catch((function(e){return i.reject(e)})),i.promise.then((function(){return k.fileRename({from:r,to:e})}))):(this.onAfterRename(e),i.resolve())}},{key:"onAfterRename",value:function(e){this._fullFilePath=e;var t=P(e),n=t.name,i=t.dir,r=t.path,a=t.extension;this._name=n,this._dir=i,this._path=r,this._extension=a;var s=h.Zo.Hn.detectLanguage("",this._fullFilePath);h.Zo.ML.setModelLanguage(this._model,s),this._bindChange()}},{key:"close",value:(t=(0,i.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1===this.links,!t&&!n){e.next=19;break}return this._unbindChange(),e.prev=3,y(this._fullFilePath,!0),e.next=7,p.Z.detachFile(this._fullFilePath);case 7:e.next=14;break;case 9:throw e.prev=9,e.t0=e.catch(3),g(this._fullFilePath,this),e.t0;case 14:return e.prev=14,this.afterClose(!0),e.finish(14);case 17:e.next=21;break;case 19:this.links-=1,this.afterClose();case 21:case"end":return e.stop()}}),e,this,[[3,9,14,17]])}))),function(e){return t.apply(this,arguments)})},{key:"afterClose",value:function(e){e&&this._model&&!this._model.isDisposed()&&this._model.dispose(),f.Z.unsubscribe(this._removeSubscriptionId),f.Z.unsubscribe(this.updateHandlerId)}}],[{key:"updateCacheOnRename",value:function(e,t){var n=b(),i=l().filter(n,(function(t){return 0===t.indexOf(e+"/")}));return d.ZP.promise.iterateAsync(i,(function(n){var i=v(n);return i.rename(i.fullFilePath.replace(e,t))}))}},{key:"cached",value:function(e){return!!v(e)}},{key:"getFile",value:function(e){return v(e)||null}},{key:"content",value:function(t){return e.cached(t)?v(t).model.getValue():null}}]),e}();f.Z.subscribe("project:close",_);const x=Z},65236:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(20637);function r(e,t){return void 0===t?i.Z.highlightAuto(e).value:i.Z.getLanguage(t)?i.Z.highlight(e,{language:t}).value:i.Z.highlightAuto(e).value}},70803:(e,t,n)=>{"use strict";n.d(t,{j:()=>i});var i=function(e){e.incognitoLogin||"STUDENT"!==e.get("details").get("type")&&r()},r=function(){!function(e,t,n,i){if(!e.getElementById(n)){var r=e.createElement(t),a=e.getElementsByTagName(t)[0];r.id=n,r.src="//js.hs-analytics.net/analytics/"+Math.ceil(new Date/i)*i+"/2227229.js",a.parentNode.insertBefore(r,a)}}(document,"script","hs-analytics",3e5)}},2774:(e,t,n)=>{"use strict";n.d(t,{V5:()=>i,Xd:()=>s,fs:()=>r,rc:()=>o,y4:()=>c,zI:()=>a});var i={SINGLE:"single",VERTICAL:"vertical",HORIZONTAL:"horizontal",TABS:"tabs",TAB:"tab"},r={FILE:"file",DIR:"dir"},a={RENAME:"rename",OVERWRITE:"overwrite",OVERWRITE_ALL:"overwrite_all",SKIP:"skip",SKIP_ALL:"skip_all"},s=".settings",o=30,c=3},6836:(e,t,n)=>{"use strict";n.d(t,{n:()=>A});var i=n(52308),r=n.n(i),a=n(96486),s=n.n(a),o=n(49721),c=n(93443),l=n(20294),u=n(2774).V5,d=c.Z.create(n(10270)),p=l.ZP.KeyCode,f="width",h="height",m=[p.UP,p.DOWN,p.LEFT,p.RIGHT];function g(e,t){return s().map(e,(function(e){var n=e.width()+t;return n>27&&n}))}function v(e,t){s().forEach(e,(function(e,n){e.css("width",t[n]+"px")}))}function b(e,t){return s().map(e,(function(e){var n=e.height()+t;return n>27&&n}))}function y(e,t){s().forEach(e,(function(e,n){e.css("height",t[n]+"px")}))}var w=function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1};function _(e){var t=[u.VERTICAL,u.HORIZONTAL,u.SINGLE];return e.type&&s().includes(t,e.type)}function k(e){var t=[u.VERTICAL,u.HORIZONTAL];return e.type&&s().includes(t,e.type)}function P(e){return e.type&&e.type===u.HORIZONTAL}function Z(e){return e.type&&e.type===u.VERTICAL}function x(e,t){!s().isUndefined(e)&&_(e)&&!1!==t.call(null,e)&&(x(e.children[0],t),x(e.children[1],t))}function C(e,t,n){!s().isUndefined(e)&&_(e)&&e!==t&&(n.call(null,e),C(e.panel,t,n))}function S(e){var t=o.Z.ide.panels.child;e.fixed=!1,x(t,(function(e){if(e!==t&&e.panel!==t){var n=e.template.parent();n.width(n.width()),n.height(n.height()),n.addClass("flex-fixed")}}))}function E(e,t,n){var i=[];return t===f?function e(t){P(t)&&(i=i.concat(t.children),e(t.children[0]),e(t.children[1])),Z(t)&&(i.push(t.children[n]),e(t.children[n]))}(e):t===h&&function e(t){Z(t)&&(i=i.concat(t.children),e(t.children[0]),e(t.children[1])),P(t)&&(i.push(t.children[n]),e(t.children[n]))}(e),s().uniq(i)}function I(e,t,n){var i=j(e,t);if(k(e)){var r=function(e,t){return E(e,t,1)}(e,n);s().forEach(r,(function(e){i.push(e.template.parent())}))}return i.reverse()}function T(e,t,n){var i=j(e,t);if(k(e)){var r=function(e,t){return E(e,t,0)}(e,n);s().forEach(r,(function(e){i.push(e.template.parent())}))}return i.reverse()}function j(e,t){var n=[];return C(e,t,(function(e){n.push(e.template.parent())})),n}var A=function(e,t){var n=r()(e.template).children(".divider"),i=!1,a=null,l=null,u=[],_=null,k=null,C=[],E=function(e){if(i){var n=0;t===f?(n=l.width()-e.pageX+l.offset().left,j(n)):t===h&&(n=l.height()-e.pageY+l.offset().top,A(n)),w(e)}},j=function(e){var t=g(u,-e),n=g(C,e);s().every(t)&&s().every(n)&&(v(u,t),v(C,n),a.width=l.css("width"),_.width=k.css("width"))},A=function(e){var t=b(u,-e),n=b(C,e);s().every(t)&&s().every(n)&&(y(u,t),y(C,n),a.height=l.css("height"),_.height=k.css("height"))},O=function(){d.panelResizeEnd(a),d.panelResizeEnd(_),i&&M()},D=function(e,t){e?j(t):A(t)},N=function(n,i){u=I(n,e,t),C=T(i,e,t),l=s().last(u),k=s().last(C)},M=function(){x(o.Z.ide.panels.child,(function(e){var t=e.template.parent();e.width=t.css("width"),e.height=t.css("height"),Z(e.panel)&&t.css("height",""),P(e.panel)&&t.css("width",""),e.panel===o.Z.ide.panels.child&&(t.css("height",""),t.css("width","")),e.fixed||t.removeClass("flex-fixed")})),a=null,_=null,l=null,k=null,u=[],C=[],i=!1,r()("div.resizable-iframeFix").remove()};c.Z.on(n,"mousedown",(function(n){if(a=e.children[0],_=e.children[1],!a.collapsed&&!_.collapsed){i=!0,N(a,_),S(e);var s=function(e,t,n){var i=o.Z.ide.panels.child.template,a=0,s=0,c={top:0,left:0},l="auto";n===f?(s=e.height(),a=i.width(),c.top=e.offset().top,c.left=i.offset().left,l="col-resize"):n===h&&(s=i.height(),a=e.width(),c.top=i.offset().top,c.left=e.offset().left,l="row-resize");var u=r()('<div class="resizable-iframeFix" style="background: #fff;"></div>');return u.css({width:a+"px",height:s+"px",position:"absolute",opacity:"0.001",zIndex:1e3,cursor:l}).css(c),u.appendTo("div.ac")}(l,0,t);c.Z.on(s,"mousemove",E),c.Z.on(s,"mouseup",O),d.panelResizeStart(a),d.panelResizeStart(_),w(n)}})),c.Z.on(n,"keydown",(function(n){a=e.children[0],_=e.children[1];var i=n.which||n.keyCode;if(!a.collapsed&&!_.collapsed&&m.includes(i)){N(a,_),S(e);var r=t===f;switch(i){case p.UP:case p.LEFT:D(r,10);break;case p.DOWN:case p.RIGHT:D(r,-10)}d.panelResizeEnd(a),d.panelResizeEnd(_),M(),w(n)}}))}},56690:(e,t,n)=>{"use strict";var i=n(52308),r=n.n(i),a=n(43553),s=null,o=0,c=function e(){if(!(s=s&&0!==s.length?s:r()("#anonymous-spinner")))return a.Z.one("rendered","renderer",e);o++,s.data("hidden")||1!==o||(s.data("hidden",!0),s.fadeTo(400,1))},l=function(){null!==s&&(--o<0&&(o=0),s.data("hidden")&&0===o&&(s.data("hidden",!1),s.fadeTo(400,0)))};a.Z.bind("show","loading-spinner",c),a.Z.bind("hide","loading-spinner",l)},87122:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>$e});var i=n(4942),r=n(96486),a=n.n(r),s=n(52308),o=n.n(s),c=n(177),l=n.n(c),u=n(75121),d=n.n(u),p=n(44442).A,f=function(e){this.options=e,h(this,e),this.filterName=e.title};function h(e,t){var n=t.title;e.type="item",e.id=t.id||g(n),e.title=n,e.command=t.command||null,e.hotkey=t.hotkey||null,e.onOff=!a().isUndefined(t.onOff)&&t.onOff,e.fullScreenHide=t.fullScreenHide,a().isBoolean(e.onOff)?(e.onOffValue=e.onOff,e.toggle=!1):(e.onOff=a().defaults(e.onOff,{defaultValue:!1,toggle:!0}),e.onOffValue=e.onOff.defaultValue,e.toggle=e.onOff.toggle,e.onOff=!0),e.url=t.url||null,e.params=t.params,e.context=a().isUndefined(t.context)?"all":t.context,e.divider="divider"===n,e.disabled=!a().isUndefined(t.disabled)&&t.disabled,e.noDefaults=t.noDefaults,e.external=t.external,e.dashboard=t.dashboard,e.visible=a().isUndefined(t.visible)?!!a().isUndefined(e.visible)||e.visible:t.visible}var m=f.prototype;m.clickHandler=function(){if(!this.disabled&&(this.toggle&&o()("#file-menu [data-id="+this.id+"]").toggleClass("on"),this.command)){var e=this.command.split(":"),t=e.shift(),n=e.join(":");return p.execute(t,n,this.params),!1}},m.find=function(e){return a().find(this.items,{id:e})},m.update=function(e){this.options=a().defaults(e,this.options),h(this,this.options)};var g=function(e){return a().uniqueId(e.toLowerCase().replace(/\s/g,"_")+"_")};const v=f;var b=n(44442).A,y=function(e,t){this.options=t,w(this,e,t,!0),this.filterName=e};function w(e,t,n,i){e.type="group",e.id=n.id||P(t),e.title=t,e.sub=n.sub,e.fullScreenHide=n.fullScreenHide,i&&(e.items=k(n.items)),e.context=a().isUndefined(n.context)?"all":n.context,e.disabled=!a().isUndefined(n.disabled)&&n.disabled,e.btnGroup=n.btnGroup,e.icon=n.icon,e.command=n.command,e.noDefaults=n.noDefaults,e.visible=a().isUndefined(n.visible)?!!a().isUndefined(e.visible)||e.visible:n.visible}var _=y.prototype;_.find=function(e){return this.id===e?this:a().find(this.items,{id:e})},_.clickHandler=function(){if(!this.disabled&&(this.toggle&&o()("#file-menu [data-id="+this.id+"]").toggleClass("on"),this.command)){var e=this.command.split(":"),t=e.shift(),n=e.join(":");b.execute(t,n,this.params)}},_.update=function(e){var t=a().isArray(e.items);this.options=a().defaults(e,this.options),w(this,e.title||this.title,this.options,t)};var k=function(e){return a().map(e,(function(e,t){var n;return e.group?(a().isString(t)?e.sub=!1:(t=e.title,e.sub=!0),n=new y(t,e)):n=new v(e),n}))},P=function(e){return a().uniqueId(e.toLowerCase().replace(/\s/g,"_")+"_")};const Z=y;var x=function(e){this.groups=I(e)},C=x.prototype;function S(e,t){return function(e){var t=!0,n=a().findLastIndex(e,(function(e){return!e.divider&&e.visible}));return a()(e).map((function(e,i){return(t||i>n)&&e.divider&&(e.visible=!1),t=e.visible?e.divider:t,e})).compact().value()}(a()(t).map((function(t){t=a().cloneDeep(t);var n,i=(n=t.filterName,a().trim(n).toLowerCase().replace(/\.+$/g,"").replace(/\s/g,"_"));return!1===e[i]&&(t.visible=!1),t instanceof Z&&(t.items=S(e[i]||{},t.items)),t})).compact().value())}function E(e,t,n){for(var i=0,r=e.length;i<r;i++){var a=e[i];if(a.id===t)return{items:e,item:a,position:i,parent:n};if(a.items){var s=E(a.items,t,a);if(s)return s}}}C.toArray=function(){return e=this.filter,t=this.groups,a().isEmpty(e)?t:S(e,t);var e,t},C.find=function(e){var t=E(this.groups,e);return!!t&&t.item},C.setFilter=function(e){this.filter=e},C.findLevelAndPosition=function(e){return E(this.groups,e)||!1},C.findGroup=function(e){return a().find(this.groups,{id:e})};var I=function(e){var t=!1,n=!1;return a().map(e,(function(e,i){var r;return e.group?(t||e.btnGroup?!n&&e.btnGroup&&(n=!0):t=!0,r=new Z(i,e)):r=new v(e),r}))};const T=x;var j=n(8246),A=n(49721),O=n(60989),D=n(93443),N=n(58471),M=n(95611),F=D.Z.create(n(17780));const R={logout:function(){return M.Z.saveAllAndWait().then((function(){return O.ZP.AccountManager.logout()})).then((function(e){return F.logout(),e}))}};var L=n(98348),U=n(20294),B=n(68058),q=n(97137);const H=JSON.parse('{"Codio":{"id":"codio-menu","group":true,"noDefaults":true,"context":{"session":"registered"},"items":[{"title":"Dashboard","command":"goto:dashboard","noDefaults":true,"dashboard":true,"context":{"session":"registered","route":["ide"]}},{"title":"Account...","url":"/home/settings/overview","external":true},{"title":"Subscription...","url":"/home/billing","external":true},{"title":"Create Project...","command":"project:create"},{"title":"divider","fullScreenHide":true},{"title":"Preferences","fullScreenHide":true,"group":true,"items":[{"title":"User","id":"SettingsUser","command":"settings:user:open"},{"title":"Project","id":"SettingsProject","context":{"route":["ide"],"project":["WRITE_FILES","OWNER","ADMIN"]},"command":"settings:project:open"},{"title":"Environment Variables","id":"EnvironmentVariables","context":{"session":"registered","project":["OWNER"]},"command":"userenv:open"}]}]},"Project":{"group":true,"context":{"route":["ide"]},"items":[{"id":"ProjectPreferences","title":"Settings...","command":"project:preferences","context":{"session":"registered","project":["OWNER","ADMIN"]}},{"title":"Stack","group":true,"context":{"session":"registered","project":["OWNER","ADMIN"]},"items":[{"title":"Info","context":{"session":"registered"},"command":"file:open","params":{"ext":"stack-info","filename":""}},{"id":"StackSettings","title":"Settings...","command":"project:preferences-tab:stack"},{"title":"Create New...","command":"stack-create:open","context":{"generation":2,"session":"registered"}}]},{"id":"ProjectPermissions","title":"Permissions...","command":"project:permissions","noDefaults":true,"context":{"session":"registered","project":["OWNER","ADMIN"],"isBook":false}},{"title":"divider","context":{"session":"registered","project":["OWNER","ADMIN"]}},{"id":"ProjectContainerInfo","title":"Box Info","noDefaults":true,"command":"container:info","context":{"session":"registered","project":["OWNER","ADMIN"]}},{"id":"ProjectContainerRestart","title":"Restart Box...","noDefaults":true,"command":"container:restart","context":{"session":"registered","project":["OWNER","ADMIN"]}},{"id":"ProjectContainerReset","title":"Reset Box...","noDefaults":true,"command":"container:reset","context":{"session":"registered","readOnlyAccess":false,"project":["OWNER","ADMIN"]}},{"title":"divider","context":{"session":"registered","project":["OWNER","ADMIN"]}},{"title":"Resync File Tree","command":"file:sync_structure","context":{"session":"registered","project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"divider","noDefaults":true,"context":{"session":"registered","project":["OWNER","ADMIN"]}},{"id":"fork","title":"Create Copy...","command":"project:fork"},{"title":"Share...","command":"project:share"},{"id":"exportAsZip","title":"Export as Zip","command":"project:export:zip"},{"title":"divider"},{"title":"QR Code for Preview URL","command":"project:qr-code-preview"},{"title":"divider"},{"id":"deleteProject","title":"Delete...","noDefaults":true,"command":"project:delete","context":{"session":"registered","project":"OWNER"}},{"title":"Exit","command":"project:close"}]},"File":{"fullScreenHide":true,"group":true,"context":{"route":["ide"]},"items":[{"title":"New File...","command":"ide:new_file","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"New Folder...","command":"ide:new_folder","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"divider","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"Save All Files","command":"editor:key_save_all","context":{"session":"registered","project":["WRITE_FILES","OWNER","ADMIN"],"manual_save":true}},{"title":"divider","context":{"session":"registered","project":["WRITE_FILES","OWNER","ADMIN"],"manual_save":true}},{"title":"Open File...","command":"ide:key_quick_open"},{"title":"divider"},{"title":"Rename Item...","command":"ide:rename_item","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"Delete Item...","command":"ide:delete_item","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"divider","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"Upload...","command":"ide:upload_item","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"Close File","command":"ide:tab_close"},{"title":"Close All Files","command":"ide:tab_close_all"}]},"Edit":{"group":true,"context":{"route":["ide"],"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]},"items":[{"title":"Undo","command":"editor:key_undo"},{"title":"Redo","command":"editor:key_redo"},{"title":"divider"},{"title":"Show completions","command":"editor:key_autocomplete"}]},"Find":{"group":true,"context":{"route":["ide"]},"items":[{"title":"Find...","command":"editor:key_find"},{"title":"Find Next","command":"editor:key_find_next"},{"title":"Find Previous","command":"editor:key_find_prev"},{"title":"divider"},{"title":"Replace...","command":"editor:key_replace","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"divider","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"Find in Project","command":"search:key_searchProject"},{"title":"Replace in Project","command":"search:key_replaceProject","context":{"readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}}]},"View":{"group":true,"context":{"route":["ide"]},"items":[{"id":"goToCall","title":"Go to Call","context":{"session":"registered"},"command":"call:open","visible":false},{"id":"menu-item-file-tree","fullScreenHide":true,"title":"File Tree","command":"file:open","onOff":{"defaultValue":false,"toggle":false},"params":{"ext":"filetree","title":"Filetree"}},{"title":"divider","fullScreenHide":true},{"title":"Panels","fullScreenHide":true,"group":true,"items":[{"title":"Split Horizontal","command":"ide:panel_split_horizontal"},{"title":"Split Vertical","command":"ide:panel_split_vertical"},{"title":"Join with Closest","command":"ide:panel:join"},{"title":"Close","command":"ide:panel_close"}]},{"title":"Layouts","fullScreenHide":true,"group":true,"items":[{"title":"Default","command":"ide:layout_default"},{"title":"2 Columns","command":"ide:layout_2_columns"},{"title":"2 Rows","command":"ide:layout_2_rows"},{"title":"divider"},{"title":"Showcase","command":"ide:layout_showcase"}]},{"title":"divider","fullScreenHide":true},{"id":"menu-item-fullscreen","title":"Full screen","command":"ide:fullscreen","onOff":{"defaultValue":false,"toggle":false}},{"title":"divider","noDefaults":true,"context":{"session":"registered"}},{"id":"editor_font_size","title":"Editor Font Size","noDefaults":true,"context":{"session":"registered"},"group":true,"items":[]},{"id":"editor_tab_size","title":"Tab size","noDefaults":true,"context":{"session":"registered"},"group":true,"items":[]},{"id":"editor_indent_with_tabs","title":"Soft tabs","noDefaults":true,"context":{"session":"registered"},"onOff":{"defaultValue":false,"toggle":false}},{"id":"editor_navigate_within_soft_tabs","title":"Navigate within soft tabs","noDefaults":true,"context":{"session":"registered"},"onOff":{"defaultValue":null,"toggle":false}},{"id":"editor_wrap","title":"Wrap","noDefaults":true,"context":{"session":"registered"},"onOff":{"defaultValue":false,"toggle":false}},{"id":"editor_theme","title":"Editor Theme","noDefaults":true,"context":{"session":"registered"},"group":true,"items":[]},{"title":"divider","noDefaults":true},{"id":"terminal_theme","title":"Terminal Theme","noDefaults":true,"context":{"session":"registered"},"group":true,"items":[]},{"id":"terminal_font_size","title":"Terminal Font Size","noDefaults":true,"context":{"session":"registered"},"group":true,"items":[]},{"title":"divider","noDefaults":true},{"id":"menu-item-guides-play-view","title":"Play Guide","command":"guides:play"}]},"Tools":{"fullScreenHide":true,"group":true,"context":{"route":["ide"]},"items":[{"title":"Terminal","noDefaults":true,"command":"terminal:backend-connection","context":{"project":["OWNER","ADMIN"]}},{"title":"Install Software","noDefaults":true,"command":"install-software:install-software","context":{"readOnlyAccess":false,"project":["OWNER","ADMIN"]}},{"title":"Debugger Settings","noDefaults":true,"command":"file:open","params":{"ext":"debugger","filename":""},"context":{"project":["OWNER","ADMIN"]}},{"title":"Code Playback","noDefaults":true,"command":"file:open","params":{"ext":"change-player"},"context":{"project":["OWNER","ADMIN"]}},{"title":"JUnit","noDefaults":true,"command":"junit:open","context":{"generation":2,"project":["OWNER","ADMIN","WRITE_FILES"]}},{"id":"menu-item-guides","title":"Guide","noDefaults":true,"group":true,"items":[{"id":"menu-item-guides-play","title":"Play","command":"guides:pre_play"},{"id":"menu-item-guides-edit","title":"Edit","command":"guides:pre_edit","context":{"readOnlyAccess":false,"project":["OWNER","ADMIN","WRITE_FILES"]}},{"id":"menu-item-guides-edit-css","title":"Add Custom CSS","command":"guides:add_custom_css","context":{"readOnlyAccess":false,"project":["OWNER","ADMIN","WRITE_FILES"]}},{"id":"menu-item-guides-edit-css-reset","title":"Reset Custom CSS","command":"guides:remove_custom_css","context":{"readOnlyAccess":false,"project":["OWNER","ADMIN","WRITE_FILES"]}}]},{"title":"Deployment","id":"Deployment","noDefaults":true,"group":true,"context":{"session":"registered","project":["OWNER","ADMIN"]},"items":[{"title":"Deploy...","command":"deployment:deploy"},{"title":"Manage Targets","command":"deployment:manage_targets"}]},{"title":"Git","noDefaults":true,"group":true,"context":{"session":"registered","project":["OWNER","ADMIN"]},"items":[{"title":"Remotes...","command":"git:remotes-show"},{"title":"divider"},{"title":"Pull","command":"git:pull"},{"title":"Push","command":"git:push"},{"title":"Create Branch...","command":"git:show-create-branch"},{"title":"Switch Branch...","command":"git:show-switch-branch"},{"title":"Delete Branch...","command":"git:show-delete-branch"}]},{"title":"SSH","noDefaults":true,"group":true,"context":{"session":"registered"},"items":[{"title":"Quick Connect...","command":"terminal:show-connect-dialog"},{"title":"Connections Manager","command":"terminal:show-connections-manager"}]},{"id":"menu-item-beautify","title":"Beautify","command":"code-beautifier:key_format_code"},{"title":"Command bar...","command":"ide:key_quick_run"},{"title":"Lexikon","command":"Codio Lexikon:key_lexikon"},{"title":"Virtual Machine","id":"virtual-machine","noDefaults":true,"group":true,"context":{"project":["OWNER","ADMIN"]},"items":[{"id":"virtual-machine-extension","title":"Open","noDefaults":true,"command":"vm:open","context":{"project":["OWNER","ADMIN"]}},{"id":"virtual-machine-extension-ssh","title":"Open ssh","noDefaults":true,"command":"vm:open-ssh","context":{"project":["OWNER","ADMIN"]}},{"id":"virtual-machine-extension-publish","title":"Publish","noDefaults":true,"command":"vm:publish","context":{"project":["OWNER","ADMIN"]}}]}]},"Education":{"id":"education","noDefaults":true,"group":true,"context":{"session":"registered","route":["ide"]},"disabled":true,"visible":true,"items":[]},"Help":{"group":true,"items":[{"title":"Shortcuts","command":"shortcuts:show","fullScreenHide":true},{"title":"divider","fullScreenHide":true},{"title":"Help center","url":"https://docs.codio.com","external":true,"context":{"uType":["INDIVIDUAL"]}},{"title":"Help Center","url":"https://docs.codio.com","external":true,"context":{"uType":["TEACHER"]}},{"title":"Help center","url":"https://docs.codio.com/student","external":true,"context":{"uType":["STUDENT"]}},{"title":"Blog","url":"https://codio.com/blog","external":true},{"title":"Codio.com","url":"https://codio.com","external":true},{"title":"divider"},{"title":"System Status","url":"https://status.codio.com","external":true},{"title":"Support","command":"support:show"}]},"Run":{"group":true,"id":"menu-run-button","btnGroup":true,"command":"run:execute","icon":"console","fullScreenHide":true,"context":{"route":["ide"],"session":"registered","project":["OWNER","ADMIN"]},"items":[]},"Preview":{"group":true,"id":"menu-preview-button","btnGroup":true,"command":"preview:execute","icon":"web","fullScreenHide":true,"context":{"route":["ide"],"session":"registered","project":["OWNER","ADMIN"]},"items":[]},"Debugger":{"group":true,"id":"menu-debug-button","btnGroup":true,"command":"debugger:execute","icon":"bug-outline","fullScreenHide":true,"context":{"route":["ide"],"session":"registered","project":["OWNER","ADMIN"]},"items":[]}}');var W=n(85284),z=n(240),G=n.n(z);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=n(44442).A,J=l().compile('<div id="file-menu">\n  {{#if showLogo}}\n  <a id="logo" href="{{dashboardUrl}}" target="_self" data-target="dashboard" tabindex="0" aria-label="Go to dashboard">\n    <div aria-hidden="true" id="anonymous-spinner">loading...</div>\n  </a>\n  {{/if}}\n  <div class="menu-wrapper menu">\n    <div id="menu-items" {{#if hideItems}}class="hide"{{/if}}>\n      <ul class="nav" role="menubar" aria-label="Codio Menu">\n        {{#each groups}}\n          {{#visibleForContext this}}\n            {{> menuGroup this}}\n          {{/visibleForContext}}\n        {{/each}}\n      </ul>\n    </div>\n  </div>\n  {{#if showStatus}}\n    {{> userMenu this}}\n  {{/if}}\n</div>\n'),Q=l().compile('<span class="menu-cursors-presence-item menu-cursors-presence-item-{{index}}" title="{{userName}} - {{file}} ({{cursor.lineNumber}}:{{cursor.column}})">\n    {{#if gravatarExists}}\n        <img src="//www.gravatar.com/avatar/{{gravatarId}}" alt="{{userName}}"/>\n    {{else}}\n        {{userNameSlug}}\n    {{/if}}\n</span>\n'),X=D.Z.create(n(32006)),$=U.ZP.KeyCode,ee="",te=o()("#content"),ne=null,ie=new T(H),re=null,ae=!1,se=null,oe=!1,ce=".codio-menu",le=!0,ue=!0,de=!1,pe=!1,fe=[],he={},me=!1,ge={visible:!1,active:!1};function ve(){var e=A.Z.currentProject;e&&e.isAdmin&&(e&&e.eduStartedAssignmentInfo&&!e.isOpenedByTeacher||(e.exists(ce)?e.file(ce).then((function(e){ke(function(e){if(a().isUndefined(e))return{};var t=function(e){try{return JSON.parse(e)}catch(e){return-1}}((n=e,(new(G())).strip(n)));var n;if(-1===t)return ye=!0,we(),{};ye=!1;return t}(e.content))})):ke(a().cloneDeep(A.Z.currentProject.codioMenuFilter))))}function be(){ke({}),le=!0,ue=!0}var ye=!1,we=a().debounce((function(){ye&&q.Z.errorHiding("File "+ce+" contains invalid JSON")}),2e3,{maxWait:1e4});function _e(e){return a().forIn(e,(function(e,t,n){var i,r=(i=t,a().trim(i).toLowerCase().replace(/[-\.]/g,"").replace(/\s/g,"_"));n[r]=e,r!==t&&delete n[t],a().isObject(e)&&(n[r]=_e(n[r]))})),e}function ke(e){var t=_e(e);le=void 0===t.status||!!t.status,ue=void 0===t.logo||!!t.logo,ie.setFilter(t)}j.Z.registerPartial("menuGroup",'{{#if visible}}\n    {{#if btnGroup}}\n\n      <li class="dropdown{{#if sub}}-submenu{{/if}} {{#if fullScreenHide}}fullScreenHide{{/if}}{{#if disabled}} disabled{{/if}}" data-type="group" data-title="{{title}}" data-id="{{id}}">\n        <div class="btn-group">\n          <button\n            aria-controls="{{id}}"\n            aria-haspopup="true"\n            aria-expanded="false"\n            aria-label="{{title}}"\n            class="btn-menu{{#if disabled}} disabled{{/if}}"\n          >\n            {{#if icon}}\n              <span aria-hidden="true" class="iconify" data-icon="@codio:mdi:{{icon}}"></span>\n            {{/if}}\n            <span>{{title}}</span>\n          </button>\n\n          <button aria-hidden="true" tabindex="-1" class="btn-menu dropdown-toggle{{#if disabled}} disabled{{/if}}" data-toggle="dropdown" data-click="block">\n            <i class="caret" data-click="block">dropdown</i>\n          </button>\n\n          <ul id="{{id}}" class="dropdown-menu" role="menu">\n            {{#each items}}\n              {{#visibleForContext this}}\n                {{#equals type "item"}}\n                  {{> menuItem this}}\n                {{else}}\n                  {{> menuGroup this}}\n                {{/equals}}\n              {{/visibleForContext}}\n            {{/each}}\n          </ul>\n        </div>\n      </li>\n\n    {{else}}\n\n      <li role="presentation" class="dropdown{{#if sub}}-submenu{{/if}} {{#if fullScreenHide}}fullScreenHide{{/if}}{{#if disabled}} disabled{{/if}}" data-type="group" data-title="{{title}}" data-id="{{id}}">\n        <a\n          role="menuitem"\n          aria-haspopup="true"\n          aria-expanded="false"\n          href="javascript:void(0)"\n          class="dropdown-toggle {{#if disabled}} disabled{{/if}}"\n          data-toggle="dropdown"\n        >\n          {{#if icon}}\n            <i class="ss-icon">{{icon}}</i>\n          {{/if}}\n          {{title}}\n        </a>\n        <ul class="dropdown-menu" role="menu">\n          {{#each items}}\n            {{#visibleForContext this}}\n              {{#equals type "item"}}\n                {{> menuItem this}}\n              {{else}}\n                {{> menuGroup this}}\n              {{/equals}}\n            {{/visibleForContext}}\n          {{/each}}\n        </ul>\n      </li>\n\n    {{/if}}\n{{/if}}\n'),j.Z.registerPartial("menuItem",'{{#if visible}}\n    {{#if divider}}\n      <li role="separator" data-comp="{{component}}" data-id="{{id}}" class="divider {{#if fullScreenHide}}fullScreenHide{{/if}}"></li>\n    {{else}}\n      <li role="presentation" data-comp="{{component}}" data-id="{{id}}" class="{{#if disabled}}disabled{{/if}}{{#if onOffValue}} on{{/if}}{{#if fullScreenHide}} fullScreenHide{{/if}}">\n        <a role="menuitem" tabindex="-1" href="{{#if url}}{{url}}{{else}}javascript:void(0){{/if}}" {{#if external}}target="_blank"{{/if}} {{#if dashboard}}data-target="dashboard"{{/if}}>\n          <span class="text">\n            <i class="ss-icon">checkmark</i>\n            {{title}}\n          </span>\n          <span class="hotkey">{{{hotkey command hotkey}}}</span>\n        </a>\n      </li>\n    {{/if}}\n{{/if}}\n'),j.Z.registerPartial("userMenu",'<div class="user-menu">\n  <button type="button" id="menu-publish-btn" class="btn publish-btn hide" title="Publish" aria-label="Publish">\n      <i class="ss-icon">up</i>\n      <span>Publish</span>\n  </button>\n  <button type="button" id="user-menu-call-btn" class="btn user-menu-call-btn hide" title="Go to Call" aria-label="Go to Call">\n    <i class="ss-icon">call</i>\n  </button>\n  <div id="menu-cursors-presence"></div>\n  <div id="menu-cursors-presence-separator">&nbsp;</div>\n  <button id="menu-make-writable-copy" class="btn hide" title="Writable Copy" aria-label="Writable Copy">Writable Copy</button>\n  <div class="hint hint-bottom updates-main updates-main-hide">\n    <i id="updates-available" class="ss-icon">downloadcloud</i>\n    <span class="hint-text"><nobr>Updates available!<br>Please reload</nobr></span>\n  </div>\n\n  <div id="online-indicator" class="offline" title="Offline"></div>\n\n  <div class="user-name">\n    <a id="userlink" href="{{dashboardUrl}}" target="_self" data-target="dashboard" tabindex="0" aria-label="{{username}}\'s projects">\n      {{username}}\n    </a>\n  </div>\n\n  <div class="gravatar">\n    <a href="{{dashboardUrl}}" target="_self" data-target="dashboard" tabindex="0" id="gravatar-menu" title="Courses on dashboard" aria-label="{{#if isTeacher}}Courses on dashboard{{else}}My Courses on dashboard{{/if}}">\n      <img id="gravatar-img" src="//www.gravatar.com/avatar/{{gravatarHash}}" alt="User logo">\n    </a>\n  </div>\n\n  <div class="user-logout">\n    <a id="logout" href="javascript:void(0)" title="Logout" tabindex="0" aria-label="Logout">\n      <i class="ss-icon">exit</i>\n    </a>\n  </div>\n</div>\n');var Pe=function(){N.Z.showConfirm({title:"Sign Out",description:"Are you sure you wish to sign out?",onClose:function(e){if(!e)return!0;R.logout().then((function(e){var t=B.I_.get("dummy_login_as_path")||"/home";window.location.href=e.restored?t:"/p/login"}),(function(e){var t=e&&e.message?e.message:e;q.Z.error(t)}))}})};function Ze(){Y.execute("education","writable")}function xe(){Ee(!0),X.showPublishDialog()}function Ce(){ne&&(me?ne.find("#menu-make-writable-copy").removeClass("hide"):ne.find("#menu-make-writable-copy").addClass("hide"))}function Se(){if(ne){var e=A.Z.currentProject;e&&e.isAuthorProject&&!e.isBook&&e.needPublish?ne.find("#menu-publish-btn").removeClass("hide"):ne.find("#menu-publish-btn").addClass("hide")}}function Ee(e){ne.find("#menu-publish-btn").prop("disabled",e)}function Ie(e){var t=o()(e.target);if("block"!==t.data("click")){var n=t.closest("li"),i=n.data("id"),r=n.closest("ul");"menubar"===r.attr("role")&&r.hasClass("nav")&&(M.Z.saveAllAndWait(),Ae(te),n.find("a").first().attr("aria-expanded","true"));var s=ie.find(i);return s&&a().isFunction(s.clickHandler)?s.clickHandler.call(s):void 0}}var Te=function e(t,n,i){var r=n+i;if(a().isArray(t)&&r>=0&&r<t.length){var s=t[r],o=ne&&ne.hasClass("fullScreen");return s.disabled||s.divider||o&&s.fullScreenHide?e(t,r,i):s}return!1},je=function(){te.find(".open").removeClass("open"),Ae(te)},Ae=function(e){e.find('a[aria-expanded="true"]').attr("aria-expanded","false"),e.find('button[aria-expanded="true"]').attr("aria-expanded","false")},Oe=function(e,t){var n,i=te.find("li[data-id='"+e+"']"),r=i.find(".btn-group");Ae(i.parent()),0!==r.length?(n=i.find("button").first().focus(),t&&r.addClass("open")):(n=i.find("a").first().focus(),t&&i.addClass("open")),n&&n.attr("aria-expanded")&&n.attr("aria-expanded","true")};function De(e){return te.find("li[data-id='"+e+"']").find(".btn-group").length}function Ne(e,t,n,i){if(e.parent)if($.LEFT===t)Oe(e.parent.id,!1);else{var r=Te(e.item.items,-1,1);r?Oe(r.id,!a().isEmpty(r.items)):Oe(e.parent.id,!1)}else{var s=i?0:$.LEFT===t?-1:1,c=Te(e.items,e.position,s),l=!te.find(".open").length;l||(l=De(c.id)),c&&function(e,t,n){var i=te.find("li[data-id='"+e+"']"),r=te.find("li[data-id='"+t+"']"),a=function(e,t){var i,r=e,a=e.find(".btn-group");0!==a.length&&(r=o()(a[0])),t?r.removeClass("open"):!n&&r.addClass("open"),t||(i=r!==e?r.find("button").first().focus():r.find("a").first().focus(),!n&&i.attr("aria-expanded")&&i.attr("aria-expanded","true"))};Ae(te),a(i,!0),a(r,!1)}(n,c.id,l)}}function Me(e,t,n){if(e.parent){var i=Te(e.items,e.position,$.UP===t?-1:1);n.removeClass("open"),i?Oe(i.id,!a().isEmpty(i.items)):Oe(e.parent.id,!1)}else{var r=e.item.items,s=Te(r,$.UP===t?r.length:-1,$.UP===t?-1:1);s&&Oe(s.id,!a().isEmpty(s.items))}}var Fe=function(e){var t=o()(e.target),n=t.attr("id"),i=!1;if("logo"!==n&&"gravatar-menu"!==n||(i=!0,t=o()(document.activeElement)),"block"!==t.data("click")){var r=t.closest("li"),s=r.data("id"),c=ie.findLevelAndPosition(s);if(c&&c.items){var l=function(e,t){var n=e.which||e.keyCode;return $.TAB===n&&(t.closest("ul").hasClass("dropdown-menu")?n=e.shiftKey?$.UP:$.DOWN:je()),n}(e,t);switch(l){case $.LEFT:case $.RIGHT:Ne(c,l,s,i);break;case $.SPACE:c.parent||De(c.item.id)||(Oe(c.item.id,!0),Me(c,$.DOWN,r));break;case $.DOWN:case $.UP:c.parent||Oe(c.item.id,!0),Me(c,l,r);break;case $.RETURN:case $.ESC:!function(e){je(),e===$.ESC&&a().defer((function(){se&&o()(se).focus(),se=null}))}(l)}}}},Re=function(e){var t,n,i,r;ne&&ne.remove(),te.prepend(e),ne=e,pe&&Ye(),fe&&Je(),Ce(),Se(),n=(t=ge).visible,i=t.active,(r=ne.find("#user-menu-call-btn")).removeClass("hide user-menu-call-btn--active"),n?i&&r.addClass("user-menu-call-btn--active"):r.addClass("hide")},Le=function(e){if(!oe){var t=ne&&ne.hasClass("fullScreen");a().isUndefined(e)||(ee=e);var n,i=A.Z.currentUser.get("details").get("email"),r=o()(J({dashboardUrl:(0,U.Xm)("/home"),groups:ie.toArray(),topic:ee,signedIn:!A.Z.currentUser.isAnonymous(),username:A.Z.currentUser.name(),gravatarHash:i?d()(i):"",online:A.Z.online,hideItems:ae,showStatus:le,showLogo:ue}));n=r,D.Z.on(n,"click","#menu-items li",Ie),D.Z.on(n.find("#logout"),"click",Pe),D.Z.on(n,"focus","#logo",je),D.Z.on(n,"focus","#gravatar-menu",je),D.Z.on(n.find("#menu-make-writable-copy"),"click",Ze),D.Z.on(n.find("#menu-publish-btn"),"click",xe),D.Z.on(n.find("#user-menu-call-btn"),"click",(function(){X.openCall()})),D.Z.on(n,"mouseover",'a[role="menuitem"]',(function(e){var t=o()(e.target);Ae(t.closest("ul")),t.attr("aria-expanded")&&t.attr("aria-expanded","true")})),D.Z.on(n,"mouseout",'a[role="menuitem"]',(function(e){var t=o()(e.target);Ae(t.closest("ul"))})),D.Z.on(n,"keydown",(function(e){a().defer((function(){Fe(e)}))})),D.Z.on(n.find(".updates-main"),"click",(function(){location.reload()})),a().isNull(re)&&(re=D.Z.subscribe("settings:changed",(function(){Ue()}))),Re(r),ne&&t&&ne.addClass("fullScreen")}},Ue=a().debounce(Le,400,{maxWait:2e3}),Be=function(){a().isNull(re)||D.Z.unsubscribe(re),ne&&ne.hide(),ee=""},qe=function(){Ke("menu-item-fullscreen"),ne&&ne.removeClass("fullScreen")},He=function(e){if(e){var t=A.Z.getByUrl(e.extensionName);t&&!0===t.info.codio.noFullscreen?Ge("menu-item-fullscreen"):ze("menu-item-fullscreen")}else ze("menu-item-fullscreen")};function We(){ne&&ne.is(":visible")&&Ue()}var ze=function(e){var t=ie.find(e);t&&(t.disabled=!1,(t=ne&&ne.find('li[data-id="'+e+'"]'))&&t.prop("disabled",!1).removeClass("disabled"))},Ge=function(e){var t=ie.find(e);t&&(t.disabled=!0,(t=ne&&ne.find('li[data-id="'+e+'"]'))&&t.prop("disabled",!0).addClass("disabled"))},Ve=function(e){var t=ie.find(e);t&&t.onOff&&(t.onOffValue=!0,ne&&ne.find('li[data-id="'+e+'"]').addClass("on"))},Ke=function(e){var t=ie.find(e);t&&t.onOff&&(t.onOffValue=!1,ne&&ne.find('li[data-id="'+e+'"]').removeClass("on"))};function Ye(){ne&&ne.find("#online-indicator").addClass("hide")}function Je(){if(ne){var e=a().filter(fe,(function(e){return!he[e.userId]})).map((function(e){return e.userId}));e&&e.length>0&&O.ZP.AccountManager.getGravatarInfos(e).then((function(e){a().each(e,(function(e){he[e.id]=e})),Je()}));var t=ne.find("#menu-cursors-presence");t.empty(),a().each(fe,(function(e){if(e.userId!==A.Z.currentUser.account){var n=he[e.userId]||{};e.userNameSlug=e.userName[0],e.gravatarExists=n.gravatarExists||!1,e.gravatarId=n.gravatarId||"";var i=o()(Q(e));i.click((function(){A.Z.ide.open("tree",e.file,{highlight:{ref:e.cursor.lineNumber,column:e.cursor.column,selectionOnly:!0}})})),t.append(i)}}))}}l().registerHelper("visibleForContext",(function(e,t){return L.Z.inContext(e.context,ee,W,e.noDefaults)?t.fn(this):t.inverse(this)})),l().registerHelper("hotkey",(function(e,t){return a().isString(e)||a().isString(t)?(t=t||Y.getCurrentKey(e),a().isUndefined(t)?"":U.ZP.formatCommand(t)):""})),D.Z.subscribe("shareman:connect",(function(){pe=!0,Ye()})),D.Z.subscribe("events-channel:updateAvailable",(function(){pe=!1,ne&&ne.find(".updates-main").removeClass("updates-main-hide")})),D.Z.subscribe("shareman:disconnect",(function(){ne&&ne.find("#online-indicator").removeClass("hide").addClass("offline")})),D.Z.subscribe("shareman:cursors",(function(e,t){fe=t,Je()})),D.Z.subscribe("ide:fullscreen:enter",(function(){Ve("menu-item-fullscreen"),ne&&ne.addClass("fullScreen")})),D.Z.subscribe("ide:fullscreen:leave",qe),D.Z.subscribe("ide:close",qe),D.Z.subscribe("tab:activated",(function(e,t){He(t)})),D.Z.subscribe("tab:closed",(function(){He()})),D.Z.subscribe("project:permissionsUpdated:#projectId",(function(){Le()})),D.Z.subscribe("panel:focus:change",(function(e,t){var n=t&&t.activeTab();He(n)})),D.Z.subscribe("command:account:logout",Pe),D.Z.subscribe("menu:update:#id",(function(e,t){var n=e.id,i=t,r=ie.find(n);r&&(r.update(i),We())})),D.Z.subscribe("project:preferencesUpdated",(function(){Le()}));D.Z.subscribe("command:ide:key_menu_focus",function(e){var t=ne&&ne.hasClass("fullScreen"),n=ie.toArray();t&&(n=a().filter(n,(function(e){return!e.fullScreenHide})));var i=n[e];i.disabled||i.divider||(je(),se=document.activeElement,Oe(i.id,!0))}.bind(null,1));var Qe=null;a().forEach(["guides:player:open","guides:view:change"],(function(e){D.Z.subscribe(e,(function(e,t){t&&("guides:view:change"===e||"guides:player:open"===e)?be():ve();var n=A.Z.currentProject,i=t||n.isAdmin&&!n.eduStartedAssignmentInfo;"guides:player:open"===e&&i&&(de=!0,Qe||(Qe=D.Z.subscribe("file:change:"+ce,Xe))),Ue()}))})),D.Z.subscribe("menu:filter",(function(){ke(a().cloneDeep(A.Z.currentProject.codioMenuFilter)),Ue()})),D.Z.subscribe("guides:player:close_rendered",(function(){be(),de=!1,Ue()}));var Xe=a().debounce((function(){de&&(ve(),Ue())}),500,{maxWait:2e3});D.Z.subscribe("education:writableCopyMenuVisibility",(function(e,t){var n=t.state;me=n,Ce()})),D.Z.subscribe("education:updatePublishBtnVisibility",(function(){Se()})),D.Z.subscribe("education:publishDialogClosed",(function(){Ee(!1)})),D.Z.subscribe("call:updateMenuItemsVisibility",(function(e,t){var n=t.visible,i=t.active;ge=K(K({},ge),{},{visible:n,active:i});var r=ie.find("goToCall");r&&(r.update({visible:n}),We())})),a().forEach(["file:change","item:created","item:deleted","item:moved"],(function(e){D.Z.subscribe(e,(function(){A.Z.currentProject.setNeedPublish(!0).then((function(){return Se()}))}))}));const $e={show:Le,hide:Be,detach:function(){oe=!0,Be()},setItems:function(e,t){var n=ie.findGroup(e);n&&(n.update({items:t}),We())},enableItem:ze,disableItem:Ge,itemOn:Ve,itemOff:Ke,switchItemInGroup:function(e,t){var n=ie.findGroup(e);n&&(a().forEach(n.items,(function(e){Ke(e.id)})),Ve(t))},setTitle:function(e,t){var n=ie.findGroup(e);n&&(n.title=t,ne&&ne.is(":visible")&&Le())},setItemsVisibility:function(e){ae=!e,We()},setVisibility:function(e,t){var n=ie.find(e);n&&(n.visible=t,ne&&ne.is(":visible")&&Le())}}},97137:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var i=n(4942),r=n(52308),a=n.n(r),s=n(96486),o=n.n(s),c=n(177),l=n.n(c);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=l().compile("<blockquote class='critical-error-rectangle-speech-border'>\n    <div class='critical-error-rectangle-speech-content'>\n        <h1>404 <small>Page Not Found</small></h1>\n        <div class='critical-error-content'>\n            <p>\n                Opps! It looks like you've floated out a little too far into space.\n            </p>\n            <p>\n                Come back to Codio's&nbsp;\n                <a href='/home'>mission control</a>&nbsp;\n                and create new code projects.\n            </p>\n            <p>\n                To boldly go where no developer has gone before.\n            </p>\n        </div>\n    </div>\n</blockquote>\n<section class='critical-error-links font-sansN3'>\n    <div class='critical-error-robot'></div>\n    <section class=\"links\">\n        <a href=\"/home\"><span>&laquo;</span> back to homepage</a>\n        | <a href=\"http://status.codio.com\" target=\"_blank\">Platform Status</a>\n    </section>\n</section>"),f=l().compile("<blockquote class='critical-error-rectangle-speech-border'>\n    <div class='critical-error-rectangle-speech-content'>\n        <h1>403 <small>Not allowed</small></h1>\n        <div class='critical-error-content'>\n            <p>You are not allowed to access the page or resource.</p>\n            {{#if hasMessage}}\n            <section class=\"additional-message\">\n                <h2>Additional info</h2>\n                <p>{{message}}</p>\n            </section>\n            {{/if}}\n        </div>\n    </div>\n</blockquote>\n<section class='critical-error-links font-sansN3'>\n    <div class='critical-error-robot'></div>\n    <section class=\"links\">\n        <a href=\"/home\"><span>&laquo;</span> back to homepage</a>\n        | <a href=\"http://status.codio.com\" target=\"_blank\">Platform Status</a>\n    </section>\n</section>\n"),h=l().compile('<blockquote class=\'critical-error-rectangle-speech-border\'>\n    <div class=\'critical-error-rectangle-speech-content\'>\n        <h1><small>Oops, something went wrong</small></h1>\n        <div class=\'critical-error-content\'>\n            <p>The page or resource that you are trying to access cannot be shown right now. Sorry \'bout that!</p>\n            <p>Please check the <a href="http://status.codio.com" target="_blank">Status Site</a> for details of any known system issues.</p>\n            {{#if hasMessage}}\n            <section class="additional-message">\n                <h2>Additional info</h2>\n                <p>{{message}}</p>\n            </section>\n            {{/if}}\n        </div>\n    </div>\n</blockquote>\n<section class=\'critical-error-links font-sansN3\'>\n    <div class=\'critical-error-robot\'></div>\n    <section class="links">\n        <a href="/home"><span>&laquo;</span> back to homepage</a>\n        | <a href="http://status.codio.com" target="_blank">Platform Status</a>\n    </section>\n</section>\n'),m=l().compile("<blockquote class='critical-error-rectangle-speech-border'>\n    <div class='critical-error-rectangle-speech-content'>\n        <h1>402 <small>Payment Required</small></h1>\n        <div class='critical-error-content'>\n            <p>The page or resource that you are trying to access cannot be shown right now. Sorry 'bout that!</p>\n            {{#if hasMessage}}\n            <section class=\"additional-message\">\n                <h2>Additional info</h2>\n                <p>{{message}}</p>\n            </section>\n            {{/if}}\n        </div>\n    </div>\n</blockquote>\n<section class='critical-error-links font-sansN3'>\n    <div class='critical-error-robot'></div>\n    <section class=\"links\">\n        <a href=\"/home\"><span>&laquo;</span> back to homepage</a>\n        | <a href=\"http://status.codio.com\" target=\"_blank\">Platform Status</a>\n    </section>\n</section>\n"),g=l().compile("<div class='critical-error-rectangle-speech-content'>\n    <h1><small>Unit completed</small></h1>\n    <div class='critical-error-content'>\n        <p>\n            {{#if isIframe}}\n            Access to the assignment has been disabled, you can select another assignment.\n            If you require access to this assignment, contact your course instructor/teacher.\n            {{else}}\n            Access to the assignment has been disabled, Close this browser tab and return to\n            your LMS that will be open in another browser tab\n            If you require access to the assignment, contact your course instructor/teacher.\n            {{/if}}\n        </p>\n    </div>\n</div>\n"),v=l().compile('<blockquote class=\'critical-error-rectangle-speech-border\'>\n    <div class=\'critical-error-rectangle-speech-content\'>\n        <h1>423 <small>Locked</small></h1>\n        <div class=\'critical-error-content\'>\n            <p>Sorry, but your account has been temporarily suspended. Please contact us <a href="mailto:help@codio.com">help@codio.com</a> to find out more and to discuss this further.</p>\n            {{#if hasMessage}}\n            <section class="additional-message">\n                <h2>Additional info</h2>\n                <p>{{message}}</p>\n            </section>\n            {{/if}}\n        </div>\n    </div>\n</blockquote>\n<section class=\'critical-error-links font-sansN3\'>\n    <div class=\'critical-error-robot\'></div>\n    <section class="links">\n        <a href="/home"><span>&laquo;</span> back to homepage</a>\n        | <a href="http://status.codio.com" target="_blank">Platform Status</a>\n    </section>\n</section>\n'),b=l().compile('<blockquote class=\'critical-error-rectangle-speech-border\'>\n    <div class=\'critical-error-rectangle-speech-content\'>\n        <h1><small>Oops, something went wrong</small></h1>\n        <div class=\'critical-error-content\'>\n            <p>The page or resource that you are trying to access cannot be shown right now. Sorry \'bout that!</p>\n            <p>Please check the <a href="http://status.codio.com" target="_blank">Status Site</a> for details of any known system issues.</p>\n            {{#if hasMessage}}\n            <section class="additional-message">\n                <h2>Additional info</h2>\n                <p>{{message}}</p>\n            </section>\n            {{/if}}\n        </div>\n    </div>\n</blockquote>\n<section class=\'critical-error-links font-sansN3\'>\n    <div class=\'critical-error-robot\'></div>\n    <section class="links">\n        <a href="/home"><span>&laquo;</span> back to homepage</a>\n        | <a href="http://status.codio.com" target="_blank">Platform Status</a>\n    </section>\n</section>\n'),y="critical-error",w={};function _(){a()("#body-loading").removeClass("in");var e=a()("#"+y);return 0===e.length&&(e=a()("<div>",{id:y})),e.show()}const k={notFound:function(e){var t=_(),n=p({hasMessage:!o().isEmpty(e),message:e});t.html(n),a()("div.ac").append(t)},notAllowed:function(e){var t=_(),n=f({hasMessage:!o().isEmpty(e),message:e});t.html(n),a()("div.ac").append(t)},serverError:function(e,t){var n=h({hasMessage:!o().isEmpty(e),message:e}),i=_();i.html(n),t?t.append(i):a()("div.ac").append(i)},serverUnavailable:function(e,t){this.error5and4xx(e,t,b)},locked:function(e,t){this.error5and4xx(e,t,v)},error5and4xx:function(e,t,n){var i=n({hasMessage:!o().isEmpty(e),message:e}),r=_();r.html(i),t?t.append(r):a()("div.ac").append(r)},paymentRequired:function(e,t){var n=m({hasMessage:!o().isEmpty(e),message:e}),i=_();i.html(n),t?t.append(i):a()("body").append(i)},unitNoAccessCompleted:function(e,t,n){if(!t)return this.serverUnavailable(n);var i=g({isIframe:e}),r=_();r.html(i),r.html(i),a()("div.ac").append(r)},notify:function(e,t){var n=d(d({},t),{},{fadeOut:{enabled:!1},showImmediately:!1}),i=a().notify.call(null,e,n);i.$element.attr("role","alert"),i.show();var r=Math.random()+"",s=i.hide;return i.hide=function(){s.apply(this,arguments),w[r]=void 0},w[r]=i,i},hideCritical:function(){return _().hide()},error:function(e){return this.notify(e,{type:"error"})},errorHiding:function(e){return this.notify(e,{type:"error"})},info:function(e){return this.notify(e,{type:"info"})},success:function(e){return this.notify(e,{type:"success"})},closeAllNotifications:function(){o().each(w,(function(e,t){e.hide(),w[t]=void 0}))},hideError:function(){_().hide().empty()}}},1650:(e,t,n)=>{"use strict";n.d(t,{I:()=>b,Z:()=>y});var i=n(54565),r=(n(28190),n(43440)),a=n.n(r),s=n(96486),o=n.n(s),c=(n(13986),function(){});c.prototype.postMessage=function(e){var t=e.split("\n"),n=t.shift(),i=parseInt(t.shift(),10),r="GZIP"===t[0];r&&t.shift();var a=t.join("\n");if(r){for(var s=atob(a),o=s.length,c=new Uint8Array(o),l=0;l<o;l++)c[l]=s.charCodeAt(l);a=function(e){for(var t=0,n="";t<e.length;){var i=e[t++];if(i>127)if(i>191&&i<224){if(t>=e.length)throw new Error("UTF-8 decode: incomplete 2-byte sequence");i=(31&i)<<6|63&e[t++]}else if(i>223&&i<240){if(t+1>=e.length)throw new Error("UTF-8 decode: incomplete 3-byte sequence");i=(15&i)<<12|(63&e[t++])<<6|63&e[t++]}else{if(!(i>239&&i<248))throw new Error("UTF-8 decode: unknown multibyte start 0x"+i.toString(16)+" at index "+(t-1));if(t+2>=e.length)throw new Error("UTF-8 decode: incomplete 4-byte sequence");i=(7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++]}if(i<=65535)n+=String.fromCharCode(i);else{if(!(i<=1114111))throw new Error("UTF-8 decode: code point 0x"+i.toString(16)+" exceeds UTF-16 reach");i-=65536,n+=String.fromCharCode(i>>10|55296),n+=String.fromCharCode(1023&i|56320)}}return n}(new Zlib.Gunzip(c).decompress())}if(!a||"{"!==a[0]&&"["!==a[0])"null"===a&&(a=null);else try{a=JSON.parse(a)}catch(e){}var u={type:"event",message:{channelId:n,version:i,data:a}};this.onmessage&&this.onmessage({data:u})};const l=c;var u=[n(30296)],d=function(e,t,n){this.url=e,this.params=n,this.writable=!1,this.pendingMessages=[],this.subs={},this.authCb=[],this.waitAuth=!0,this.session=t,this.initWorker(),this.connect()},p=d.prototype;p.initWorker=function(){var e,t=u.join(";\n")+"/* jshint worker:true */\n/* jslint bitwise: true */\n// Worker for process ungzip hermes action in background.\n// It process incoming string and return ns message in format.\n// {type: 'event', message: {\n// channelId: \"channel id\",\n//   version: \"message version\",\n//   data: \"message data\"\n// }}\n\n// convert Uint8Array to UTF-8 string\n//\n// data - The Uint8Array\nfunction decodeUtf8(bytes) {\n  var i = 0,\n    s = '';\n  while (i < bytes.length) {\n    var c = bytes[i++];\n    if (c > 127) {\n      if (c > 191 && c < 224) {\n        if (i >= bytes.length) {\n          throw new Error('UTF-8 decode: incomplete 2-byte sequence');\n        }\n        c = (c & 31) << 6 | bytes[i++] & 63;\n      } else if (c > 223 && c < 240) {\n        if (i + 1 >= bytes.length) {\n          throw new Error('UTF-8 decode: incomplete 3-byte sequence');\n        }\n        c = (c & 15) << 12 | (bytes[i++] & 63) << 6 | bytes[i++] & 63;\n      } else if (c > 239 && c < 248) {\n        if (i + 2 >= bytes.length) {\n          throw new Error('UTF-8 decode: incomplete 4-byte sequence');\n        }\n        c = (c & 7) << 18 | (bytes[i++] & 63) << 12 | (bytes[i++] & 63) << 6 | bytes[i++] & 63;\n      } else {\n        throw new Error('UTF-8 decode: unknown multibyte start 0x' + c.toString(16) + ' at index ' + (i - 1));\n      }\n    }\n    if (c <= 0xffff) {\n      s += String.fromCharCode(c);\n    } else if (c <= 0x10ffff) {\n      c -= 0x10000;\n      s += String.fromCharCode(c >> 10 | 0xd800);\n      s += String.fromCharCode(c & 0x3ff | 0xdc00);\n    } else {\n      throw new Error('UTF-8 decode: code point 0x' + c.toString(16) + ' exceeds UTF-16 reach');\n    }\n  }\n  return s;\n}\nvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nvar REGEX_SPACE_CHARACTERS = /<%= spaceCharacters %>/g;\n\n// custom base64 decode function for Safari\n// https://bugs.webkit.org/show_bug.cgi?id=55663\nfunction decode(input) {\n  input = String(input).replace(REGEX_SPACE_CHARACTERS, '');\n  var length = input.length;\n  if (length % 4 === 0) {\n    input = input.replace(/==?$/, '');\n    length = input.length;\n  }\n  if (length % 4 === 1 ||\n  // http://whatwg.org/C#alphanumeric-ascii-characters\n  /[^+a-zA-Z0-9]/.test(input)) {\n    return;\n  }\n  var bitCounter = 0;\n  var bitStorage;\n  var buffer;\n  var output = '';\n  var position = -1;\n  while (++position < length) {\n    buffer = TABLE.indexOf(input.charAt(position));\n    bitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n    // Unless this is the first of a group of 4 characters…\n    if (bitCounter++ % 4) {\n      // …convert the first 8 bits to a single ASCII character.\n      output += String.fromCharCode(0xff & bitStorage >> (-2 * bitCounter & 6));\n    }\n  }\n  return output;\n}\nvar base64decode = decode;\ntry {\n  base64decode = !atob ? decode : atob;\n} catch (e) {}\nthis.onmessage = function (e) {\n  var data = e.data;\n  var parts = data.split('\\n');\n  var channelId = parts.shift();\n  var version = parseInt(parts.shift(), 10);\n  var isArchived = parts[0] === 'GZIP';\n  if (isArchived) {\n    parts.shift();\n  }\n  var rawData = parts.join('\\n');\n  if (isArchived) {\n    var source = base64decode(rawData);\n    var len = source.length;\n    var bytes = new Uint8Array(len);\n    for (var i = 0; i < len; i++) {\n      bytes[i] = source.charCodeAt(i);\n    }\n    /* globals Zlib */\n    var gunzip = new Zlib.Gunzip(bytes);\n    var plain = gunzip.decompress();\n    rawData = decodeUtf8(plain);\n  }\n  if (rawData && (rawData[0] === '{' || rawData[0] === '[')) {\n    try {\n      rawData = JSON.parse(rawData);\n    } catch (ex) {}\n  } else if (rawData === 'null') {\n    rawData = null;\n  }\n  postMessage({\n    type: 'event',\n    message: {\n      channelId: channelId,\n      version: version,\n      data: rawData\n    }\n  });\n};",n=window.URL.createObjectURL(new Blob([t]));try{e=new Worker(n)}catch(t){e=new l}this.worker=e;var i=this;e.onmessage=function(e){var t=e.data,n=t.message;"event"===t.type?i.subs[n.channelId]&&(o().isNumber(n.version)&&(i.subs[n.channelId].version=n.version),o().each(i.subs[n.channelId].callbacks,(function(e){e&&e(n.data,n.version)}))):t.type},e.onerror=function(e){}},p.connect=function(){if(!this.primus){var e="WebSocket"in window,t=o().extend(this.params,{reconnect:{retries:1/0,max:"30000 ms"},strategy:["online","timeout","disconnect"],websockets:e,pingTimeout:3e4,transport:{transports:["websocket"]}}),n=this,i=this.primus=new(a())(this.url,t),r=0;i.on("open",(function(){n.auth(n.session,r>=1,(function(){n.writable=!0,o().each(n.pendingMessages,(function(e){n.write(e)})),n.pendingMessages.length=0,r>1&&n.reconnect()})),r++})),i.on("data",(function(e){n.handleMessage(e)})),i.on("readyStateChange",(function(e){e!==open&&(n.writable=!1)})),i.on("error",(function(e){e&&"close"===e.type&&(n.writable=!1)}))}},p.handleMessage=function(e){var t,n,i;0===e.indexOf("SUBSCRIBED")?(t=e.split(" "),i=parseInt(t.pop(),10),t.shift(),n=t.join(" "),this.subs[n]&&(this.subs[n].version=i,this.subs[n].active=!0)):0===e.indexOf("AUTHENTICATED")?(this.waitAuth=!1,o().each(this.authCb,(function(e){e()})),this.authCb=[]):this.worker.postMessage(e)},p.reconnect=function(){var e=this;o().each(this.subs,(function(t,n){e.subscribe(n,void 0,t.params,t.auth,!0)}))},p.auth=function(e,t,n){(t||this.session!==e)&&(this.waitAuth=!0,this.write("AUTH "+e,!0),this.session=e),this.waitAuth&&o().isFunction(n)?this.authCb.push(n):n&&n()},p.subscribe=function(e,t,n,i,r){var a=!1;this.subs[e]||(a=!0,this.subs[e]={params:n,callbacks:{},auth:i});var s=this.guid();return"function"==typeof t&&(this.subs[e].callbacks[s]=t),(a||r)&&(n=n?" "+n:"",i?this.write("AUTHSUB "+i+" "+e+n):this.write("SUB "+e+n)),s},p.subscribeAuthLast=function(e,t,n){return this.subscribe(e,n,"LAST",t)},p.subscribeLast=function(e,t){return this.subscribe(e,t,"LAST")},p.subscribeAll=function(e,t){return this.subscribe(e,t,"ALL")},p.subscribeFrom=function(e,t,n){return this.subscribe(e,n,"FROM "+t)},p.unsubscribe=function(e,t){var n=this;this.subs[e]&&(o().isFunction(t)?o().each(this.subs[e].callbacks,(function(t,i){delete n.subs[e].callbacks[i]})):o().isString(t)&&delete this.subs[e].callbacks[t],0!==o().keys(this.subs[e].callbacks).length&&t||(this.write("UNSUB "+e),delete this.subs[e]))},p.write=function(e,t){this.primus&&(this.writable||t)?this.primus.write(e):this.pendingMessages.push(e)},p.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()};const f=d;var h=n(93443),m=n(49088);function g(){var e=(0,m.p)();return e||(e="00000000-0000-0000-0000-000000000000"),e}var v=new f(i.Z.get("nsServer"),g()),b=function(){v.auth(g())};h.Z.subscribe("session:logout",b),b();const y=v},33468:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(96486),r=n.n(i),a=n(49721),s=n(97137),o=n(93443),c=n(1650),l=n(177),u=n.n(l);var d=n(54565),p=o.Z.create(n(22026)),f=!1,h=null,m=u().compile('<strong>Attention!</strong> We\'ve released a new version of the Codio IDE.\nPlease reload the page at your earliest convenience to get the latest and greatest Codio,\nand to avoid any possible issues.\nCheck out the <a href="https://docs.codio.com/instructors/getstarted/support/changelog.html#changelog" target="_blank">changelog</a> for what\'s new.\n')();c.Z.subscribeLast("events/maintenance",(function(e){if(r().isObject(e)&&null!==o.Z){if((f=e.maintenance)&&e.fs)if(a.Z.currentProject&&a.Z.currentProject.userFileServer){var t=a.Z.currentProject.userFileServer.replace("-file-server","");f=r().includes(e.fs,t)}else f=!1;f&&function(e){h&&(h.$alert.remove(),h.hide());var t=e.message,n={id:"client-maintenance-notice"+e.state,type:"info",fadeOut:{enabled:!0,delay:54e4}};switch(e.state){case"warn":break;case"prepare":n.fadeOut.delay=6e4;break;case"start":case"done":n.fadeOut.enabled=!1,window.location.reload()}h=s.Z.notify(t,n)}(e)}})),c.Z.subscribeLast("events/versions",(function(e){if(r().isObject(e)&&null!==o.Z){var t=e.major,n=e.version,i=e.component;if(r().isEmpty(i)||"client"===i){var a=d.Z.get("currentVersion")!==n;a&&p.updateAvailable(),a&&t&&s.Z.notify(m,{id:"client-release-notice",type:"info",fadeOut:{enabled:!1}})}}}));const g={isMaintenance:function(){return f}}},73380:(e,t,n)=>{"use strict";n.d(t,{j:()=>k});var i=n(70885),r=n(15861),a=n(4942),s=n(87757),o=n.n(s),c=n(88690),l=n.n(c),u=n(96486),d=n.n(u),p=n(60989),f=n(20184);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=["ACTIVE","EXPIRING","PAST_DUE"],v="trial",b="paid",y=(0,f.jF)(),w=function(e,t){!function(e,t,n,i,r){var a,s,o,c,l;for((r=e[i]=e[i]||{})._q=[],s=0,o=(a=["initialize","identify","updateOptions","pageLoad","track"]).length;s<o;++s)!function(e){r[e]=r[e]||function(){r._q[e===a[0]?"unshift":"push"]([e].concat([].slice.call(arguments,0)))}}(a[s]);(c=t.createElement(n)).async=!0,c.src="https://cdn.pendo.io/agent/static/fcd14a0a-2c76-4f09-6b03-a09c4eebcbf5/pendo.js",(l=t.getElementsByTagName(n)[0]).parentNode.insertBefore(c,l)}(window,document,"script","pendo"),pendo.initialize({visitor:e,account:t})},_=function(e,t){if(d().isEmpty(e))return null;var n,i=d()(t).map((function(e,t){return m(m({},e),{},{orgId:t})})).filter((function(e){return g.includes(e.state)})).groupBy((function(e){return e.planId===y?v:b})).value(),r=i[b]||[],a=i[v]||[],s=d().isEmpty(r)?a:r,o=d().map(s,"orgId"),c=d().isEmpty(o)?e:d().filter(e,(function(e){return o.includes(e.id)}));return{organization:n=d().sortBy(c,(function(e){return e.createdTimestampMs}))[0],subscription:t[n.id]||null}},k=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,a,s,c,u,d,f,h,m,g,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.incognitoLogin){e.next=2;break}return e.abrupt("return");case 2:if(!("TEACHER"!==(n=t.get("details").get("type"))||t.customScripts&&t.customScripts.some((function(e){return e.includes("pendo.io")})))){e.next=5;break}return e.abrupt("return");case 5:return r=null,e.prev=6,e.next=9,Promise.all([p.ZP.OrganizationManager.getMyOrganizations(),p.ZP.SubscriptionManager.getSubscriptions()]);case 9:a=e.sent,s=(0,i.Z)(a,2),c=s[0],u=s[1],r=_(c,u),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(6);case 18:if(r&&r.organization){e.next=20;break}return e.abrupt("return");case 20:f=(d=r).organization,h=d.subscription,m=t.get("details").get("email"),g={id:m,email:m,full_name:t.displayName(),role:n,organization_name:f.details.name},v={id:l()(f.id),name:f.details.name,type:f.details.type},h&&(v.max_users=h.memberLimit,h.expirationTimestamp&&(v.license_expires_date=new Date(h.expirationTimestamp).toISOString()),v.plan=h.planId),w(g,v);case 26:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}()},83902:()=>{RegExp.escape||(RegExp.escape=function(e){return String(e).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")})},98348:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Je});var i=n(70885),r=n(15861),a=n(87757),s=n.n(a),o=n(96486),c=n.n(o),l=n(49721),u=n(59050),d=n(52308),p=n.n(d),f=n(177),h=n.n(f),m=n(60989),g=n(20294),v=n(15094),b=n(44442),y=n(54565),w=n(1650),_=n(56609),k=n(97137),P=n(11533),Z=n.n(P),x=n(95611),C=n(43553),S=n(93443),E=n(58471);var I=n(67277),T=h().compile('<div class="export-dialog">\r\n  <div class="export-wait-message">Your download will begin in a few moments.</div>\r\n  <div class="exporting-message"><i class="icon icon-spinner" /><span>Preparing...</span>\r\n  </div>\r\n  <div class="export-link">If your download does not begin automatically, click <a\r\n    target="_blank" aria-label="start download of project">here</a>.\r\n  </div>\r\n</div>\r\n'),j=h().compile('<div class="export-dialog">\n  <p>\n    This file `{{name}}` cannot be opened as it is either a&nbsp;binary&nbsp;file or is larger&nbsp;than&nbsp;500Kb.\n  </p>\n  <div>\n    Would you like to download this file?\n  </div>\n  <a class="file-download-link" target="_blank"></a>\n</div>\n'),A=null,O="download"in document.createElement("a");function D(e,t){var n=encodeURIComponent(e),i=t?"?codio_download_name=".concat(encodeURIComponent(t)):"";return y.Z.get("backendSchema")+g.ZP.path.join(l.Z.currentProject.backendDomain,n)+i}function N(e){var t=new E.Z({title:e,content:T(),width:270,onClose:function(){t=null},buttons:[{title:"Close",onClick:function(){return t&&t.close()},type:1}]});return t}function M(e){return m.ZP.BuildManager.export(e).then(m.ZP.standardCallbackTask)}S.Z.subscribe("command:project:export:zip",(function(e,t){!function(e){C.Z.dispatch("show","loading-spinner");var t=N("Export");M(e||l.Z.currentProject.guid).then((function(e){C.Z.dispatch("hide","loading-spinner");var n=t.content();if(n){n.find(".exporting-message").hide();var i=n.find(".export-link");i.show(),i.find("a").attr("href",e),window.open(e,"_blank")}})).catch((function(e){t.close(),e&&k.Z.error(e.message)}))}(t&&t.guid)})),S.Z.subscribe("command:project:export:file",(function(){var e,t;e=N("Download"),t=A,x.Z.saveAllAndWait().then((function(){var n=e.content();if(n){n.find(".exporting-message").hide();var i=n.find(".export-link");i.show();var r=i.find("a");if(O){var a=g.ZP.path.parse(t).name;r.attr("href",D(t,a)).attr("download",a)}else r.attr("href",D(t));r[0].click()}})).catch((function(t){e.close(),t&&k.Z.error(t.message)}))})),S.Z.subscribe("filetree:select:#file",(function(e){A=e.file})),S.Z.subscribe("shareman:error",(function(e,t){var n=[I.S.ERR_BINARY_FILE,I.S.ERR_SIZE_LIMIT];t&&t.path&&c().includes(n,t.message)&&function(e){var t=new E.Z({title:"Open File",content:j({name:c().escape(e)}),width:350,onClose:function(){t=null},buttons:[{title:"Download",onClick:function(){t&&t.content().find(".file-download-link")[0].click()},type:1},{title:"Cancel",onClick:function(){return t&&t.close()}}]}),n=t.content().find(".file-download-link");if(O){var i=g.ZP.path.parse(e).name;n.attr("href",D(e,i)).attr("download",i)}else n.attr("href",D(e))}(t.path)}));var F=S.Z.create(n(60936));function R(e){e.preventClosing(!1);var t=e.content(),n=e.buttons()[0];e.buttons()[1].enable(),n.enable(!0),t.find(":input").prop("disabled",!1)}S.Z.subscribe("command:project:delete",(function(){var e=l.Z.currentProject;if(e&&e.isAdmin){var t="Do you want to delete ".concat(e.name," Project?"),n="";if(e.authorAssignment){var i=e.authorAssignment.assignment.settings;t="Do you want to discard your changes to '".concat(i.name,"'?"),n="Discarding changes will revert the assignment to the last published state."}E.Z.showConfirm({description:t,description2:n,captcha:!0,onClose:(e.guid,function(e){var t,n=this;return!e||(l.Z.currentProject.deleteProject=!0,(t=this).preventClosing(!0),t.buttons()[0].disable("Deleting...","loading"),t.buttons()[1].disable(),t.content().find(":input").prop("disabled",!0),l.Z.currentProject.unsubscribeNS(),l.Z.currentProject.remove().then((function(){n.close(E.Z.IDCANCEL),g.ZP.goBackOrLocation("/"+l.Z.currentUser.name())})).catch(c().bind(R,null,n)),!1)})})}}));var L=n(31706),U=function(){};U.prototype.postMessage=function(e){var t=Z().create().diff(e.children,e.data),n=[];!function e(t,i){c().isPlainObject(t)?(i=""===i?i:i+"/",c().each(t,(function(t,n){e(t,i+n)}))):c().isArray(t)&&(0===t[1]&&0===t[2]||(1===t[0]||c().isString(t[0]))&&c().isPlainObject(t[1])&&c().isEmpty(t[1]))&&n.push(i)}(t,"");var i={type:"event",message:{diff:t,deletedFiles:n,data:e.data}};this.onmessage&&this.onmessage({data:i})};const B=U;var q=n(14462),H=n(96643),W=S.Z.create(n(60936)),z=[q,H],G=null,V=null,K=null,Y=null,J=null,Q=null,X=!1;var $=c().debounce((function(){X=!1,L.Z.syncStructure(K.guid)}),3e3,{maxWait:6e4});function ee(e){e&&e.length>600?X=!0:e.length>300&&$(),X?$():e&&c().each(e,te)}function te(e){switch(e.event){case"add":if(!K.exists(e.relativePath)){var t=e.dir?{}:1;ie(e.relativePath,t),W.itemCreated({path:e.relativePath},t)}break;case"unlink":K.exists(e.relativePath)&&(re(e.relativePath),W.itemDeleted({path:e.relativePath}));break;case"move":if(K.exists(e.relativeFrom)){ie(e.relativePath,re(e.relativeFrom));var n=g.ZP.path.parse(e.relativePath);W.itemMoved({from:e.relativeFrom,to:e.relativePath},n.name)}}}function ne(e,t){var n=Y,i=e?e.split("/"):[];if(i.pop(),0===i.length)return n;for(var r=0;r<i.length;r++){var a=i[r];if(c().has(n,a))n=n[a];else{if(!t)return null;n[a]={},n=n[a]}}return n}function ie(e,t){if(null!==t){var n=g.ZP.path.parse(e);ne(e,!0)[n.name]=t}}function re(e){var t=g.ZP.path.parse(e),n=ne(e);if(n){var i=c().cloneDeep(n[t.name]);return delete n[t.name],i}return null}!function(){var e=z.join(";\n")+"/* jshint worker:true */\n// Worker for process in background diff for two different project\n// structure snapshots\n// Incoming data: {\n//     children: \"current structure\",\n//     data: \"new structure\"\n// }\n//\n// Outgoing data: {\n//    type: 'event', message: {\n//        diff: \"structure diff\",\n//        deletedFiles: \"deleted files\",\n//        data: \"new data\"\n//    }\n// }\n//\nthis.onmessage = function (e) {\n  var data = e.data;\n\n  /* globals jsondiffpatch, _ */\n  var jsonDiffPatch = jsondiffpatch.create();\n  var diff = jsonDiffPatch.diff(data.children, data.data);\n  var deletedFiles = [];\n  function checkItem(item, path) {\n    if (_.isPlainObject(item)) {\n      path = path === '' ? path : path + '/';\n      _.each(item, function (child, key) {\n        checkItem(child, path + key);\n      });\n    } else {\n      if (_.isArray(item) && (item[1] === 0 && item[2] === 0 || (item[0] === 1 || _.isString(item[0])) && _.isPlainObject(item[1]) && _.isEmpty(item[1]))) {\n        deletedFiles.push(path);\n      }\n    }\n  }\n  checkItem(diff, '');\n  postMessage({\n    type: 'event',\n    message: {\n      diff: diff,\n      deletedFiles: deletedFiles,\n      data: data.data\n    }\n  });\n};",t=window.URL.createObjectURL(new Blob([e]));try{Q=new Worker(t)}catch(e){Q=new B}Q.onmessage=function(e){var t=e.data,n=t.message;"event"===t.type?(n.diff&&(Y=n.data,W.fileStructureUpdated()),c().each(n.deletedFiles,(function(e){te({event:"unlink",relativePath:e})}))):t.type},Q.onerror=function(e){}}();var ae=function(){if(null!==K){var e=K.guid;K=null,Y=null,null!==J&&clearInterval(J),J=null,w.Z.unsubscribe("project-structure/"+e,G),w.Z.unsubscribe("project-structure-events/"+e,V)}};const se=ae,oe=function(){return Y},ce=function(e){if(K){var t=K.guid;return m.ZP.ProjectStructureManager.removePath(t,e).then((function(){c().each(e,(function(e){te({event:"unlink",relativePath:e})}))}))}},le=function(e){if(K){var t=K.guid;return m.ZP.ProjectStructureManager.createFile(t,e).then((function(){var t=e.split("/");!function e(n,i){var r=n?"".concat(n,"/").concat(i):i;if(K.exists(r)&&t.length>0)return e(r,t.shift());te({dir:t.length>0,event:"add",relativePath:r}),c().delay((function(){t.length>0&&e(r,t.shift())}),10)}("",t.shift())}))}},ue=function(e,t){if(K){var n=K.guid;return m.ZP.ProjectStructureManager.moveItem(n,e,t).then((function(){return g.ZP.promise.iterateAsync(e,(function(e,n){var i=Promise.resolve();return v.Z.cached(e)&&(i=v.Z.getFile(e).rename(t[n])),i.then((function(){return v.Z.updateCacheOnRename(e,t[n])}))}))})).then((function(){for(var n=0,i=e.length;n<i;n++)te({event:"move",relativeFrom:e[n],relativePath:t[n]})}))}},de=function(e,t){if(K){var n=K.guid;return m.ZP.ProjectStructureManager.copyItem(n,e,t).then((function(){for(var n=0,i=t.length;n<i;n++){te({event:"add",dir:"dir"===K.getFileInfo(e[n]).type,relativePath:t[n]})}}))}},pe=function(e){if(K){var t=K.guid;return m.ZP.ProjectStructureManager.makeDirectory(t,e).then((function(){te({dir:!0,event:"add",relativePath:e})}))}},fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return new Promise((function(n){ae(),K=e;var i=e.guid;t("loadProject:waitStructure"),J=setTimeout((function(){t("loadProject:runFailOver"),m.ZP.ProjectManager.getProject(K.guid).then((function(i){Y||(t("loadProject:runFailOverDone"),console.warn("fallover load project structure done"),J=null,Y=i.children,W.fileStructureUpdated(),n(e))}))}),15e3),G=w.Z.subscribeLast("project-structure/"+i,(function(i){null!==i&&(t("loadProject:processStructure"),Y?function(e){Q.postMessage({children:Y,data:e})}(i):(null!==J&&clearTimeout(J),J=null,Y=i,W.fileStructureUpdated(),n(e)))})),V=w.Z.subscribe("project-structure-events/"+i,ee)}))};var he=S.Z.create(n(60936));S.Z.subscribe("project:dataUpdate:#projectId",(function(e,t){var n,i,r,a;n=e.projectId,i=t.oldProject,r=t.newProject,(a=c().filter(["name","description","is_public","is_box_clonable","is_box_always_on","is_private_preview_allowed","dynamic_port_protection","secureBackendDomain"],(function(e){return i[e]!==r[e]}))).length&&he.preferencesUpdated({projectId:n},a),l.Z.currentProject&&i.name!==r.name&&he.projectRenamed({projectId:n},{oldName:i.name,newName:r.name})}));var me=n(44442).A,ge=S.Z.create(n(60936)),ve=h().compile("Sorry, but you no longer have access to this project, as your permissions to read/write to this project have been revoked by the owner.")(),be=h().compile("You no longer have permission to write to this project, as the project owner has changed your permissions to read-only.")(),ye=h().compile("Sorry, but you no longer have access to this project, as it has been made private by the owner.")();S.Z.subscribe("project:dataUpdate:#guid",(function(e,t){!function(e,t,n){var i=t.is_public!==n.is_public,r=t.isReadOnly!==n.isReadOnly;if(Z().create().diff(t.permissions_v2,n.permissions_v2)||i||r){var a=l.Z.currentProject;m.ZP.ProjectManager.permissions(e).then((function(t){var n=a._project["access-control"];n!==t&&(null===t?(me.execute("project","close",{}),i?k.Z.info(ve):k.Z.info(ye)):"READ"!==t||"WRITE_FILES"!==n&&"ADMIN"!==n||k.Z.info(be),a._project["access-control"]=t),ge.permissionsUpdated({projectId:e},i)})).catch((function(e){me.execute("project","close",{}),k.Z.info(e.message)}))}}(e.guid,t.oldProject,t.newProject)}));const we=JSON.parse('{"cells":[],"metadata":{},"nbformat":4,"nbformat_minor":2}');var _e=b.Z.hotkey,ke=S.Z.create(n(60936)),Pe=S.Z.create(n(28755)),Ze=h().compile('<table border="0" width="100%" height="100%" cellpadding="0" cellspacing="0" bgcolor="#f0f0f0">\n    <tr>\n        <td align="center" valign="top" bgcolor="#f0f0f0" style="background-color: #f0f0f0;">\n            <table width="600" cellpadding="0" cellspacing="0" border="0" class="container" bgcolor="#ffffff">\n                <tr>\n                    <td class="header">\n                        <div>&nbsp;</div>\n                    </td>\n                </tr>\n                <tr>\n                    <td class="logo">\n                        <a href="https://codio.com"><img src="https://codio-public.s3.amazonaws.com/logo.png" title="Codio" /></a>\n                    </td>\n                </tr>\n                <tr>\n                    <td class="container-padding" bgcolor="#ffffff" style="background-color: #ffffff; padding-left: 30px; padding-right: 30px;">\n                        <br>\n                        <center><p>{{{ message }}}</p></center>\n                        <br>\n                        {{#if maintenance}}\n                        \x3c!-- ### BEGIN CONTENT ### --\x3e\n                        <p>Codio is currently offline while we perform some <strong>important maintenance</strong>, and make some exciting new changes. If this has caused you any inconvenience, we apologise and ask that you bear with us for a very short while.</p>\n                        <p><strong>We expect to be back up and running very soon</strong>. To find out the status, we strongly recommend that you check out our <a href="http://status.codio.com">status</a> page where you can subscribe to updates.</p>\n                        <p>In the meantime, if you have questions or queries, you can <a href="https://twitter.com/codiohq">tweet us</a> or email <a href="mailto:help@codio.com">help@codio.com</a></p>\n                        \x3c!-- ### END CONTENT ### --\x3e\n                        {{/if}}\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <table border="0" width="100%" height="100%" cellpadding="0" cellspacing="0" bgcolor="#fbfbfb" class="footer">\n                            <tr>\n                                <td class="social">\n                                    Follow us: &nbsp;  &nbsp; <a href="http://www.twitter.com/codiohq" class="twitter"><img src="http://cl.ly/image/3F1s2K34012V/twitter.png" width="20" height="20" border="0" /> Twitter</a> &nbsp; <a href="http://www.facebook.com/codiohq" class="facebook"><img src="http://cl.ly/image/3P3M3S1T093M/facebook.png" width="20" height="20" border="0" />  Facebook</a>\n                                </td>\n                                <td class="subscription">\n                                    <a href="https://codio.com">codio.com</a> |\n                                    <a href="mailto:help@codio.com">help@codio.com</a>\n                                </td>\n                            </tr>\n                        </table>\n                    </td>\n                </tr>\n            </table>\n        </td>\n    </tr>\n</table>'),xe={},Ce=null,Se=null,Ee=function(e){this._project=e,this._updateProjectHandlers={},this._isOff=!1},Ie=Ee.prototype;function Te(){var e=["<strong>Attention!</strong><br/>","This project is currently being migrated across to an all singing, all ","dancing, and all new fileserver. As a result, it has been disabled","in order to minimise any potential issues during migration. This will ","only take a few minutes. So why not get yourself a cuppa!"].join(" ");p()("body").block({content:p()(Ze({message:e,maintenance:!1})),className:"ui-maintenance fullscreen"})}function je(e){if(e&&this.eduStartedAssignmentInfo){var t=this.eduStartedAssignmentInfo.started.assignmentId,n=e.result;if(n&&n.codeCommentsEvent&&n.codeCommentsEvent===this.assignmentProjectId)return void(n.codeCommentsEventInitiatedBy!==l.Z.currentUser.getAccountUid()&&ke.commentsUpdated({updateId:g.ZP.GUID()}));if(c().includes(n.excludeUsers,l.Z.currentUser.getAccountUid()))return;if(n.includeUsers&&!c().includes(n.includeUsers,l.Z.currentUser.getAccountUid()))return;if(n&&"penalty"===n.status){var i=n.penalties[t];i&&(this.penalty=i,this.penalty.date=new Date(this.penalty.applyAfter)),i&&ke.penaltyUpdated(this.penalty)}else if(n&&"started"!==n.status&&"access"!==n.status){if(c().includes(n.assignments,t)){var r="complete"===n.status,a=this.examMode.timedMode.enabled&&r;"no-access"===n.status||a?(s=["<strong>Attention!</strong><br/>","This project is currently disabled. Ask your teacher about additional time."].join(" "),p()("body").block({content:p()(Ze({message:s,maintenance:!1})),className:"ui-maintenance fullscreen"})):"complete"===n.status&&(this.eduStartedAssignmentInfo.started.completed?this.eduStartedAssignmentInfo.started.completed.completed=!0:this.eduStartedAssignmentInfo.started.completed={completed:!0},ke.completedStateUpdated())}}else p()("body").unblock()}var s}function Ae(e){if(e){if(e.projectCall)return void(e.target!==this.guid&&ke.callStarted());if(e.collaboration)return e.status?void ke.collaborationDriverUpdate(e):void ke.driverTransferReq(e);if(e.collaborationActiveUsersUpdate)return void ke.collaborationActiveUsersUpdate(e);if(e.codeCommentsEvent&&e.codeCommentsEvent===this.assignmentProjectId)return void(e.codeCommentsEventInitiatedBy!==l.Z.currentUser.getAccountUid()&&ke.commentsUpdated({updateId:g.ZP.GUID()}));if(!0===e.migrate){var t=["We are about to migrate this project to a new bigger and better","fileserver. This will require that we disable the project for a","few minutes. This will begin in 30 seconds..."].join(" ");switch(e.state){case"prepare":k.Z.notify(t,{id:"client-migration-notice",type:"info",fadeOut:{enabled:!0,delay:3e4}});break;case"start":Te();break;case"done":p()("body").unblock()}return}if(!0===e.delete)return this.unsubscribeNS(),void(l.Z.ide.isClosed||(_e.execute("project","close",{}),k.Z.info("This project was removed.")));if(!0===e.rename)return void ke.renaming();if(!0===e.shutdown)return k.Z.info("Project container was stopped by inactivity timeout, please reload tab"),void ke.shutdown()}var n=this._project.name!==e.name,i=c().cloneDeep(this._project);if(n&&!c().isEmpty(this._project.ownerId)){e.path=this._project.owner.toLowerCase()+"/"+e.pathName;var r=window.location.pathname.replace("/"+i.pathName,"/"+e.pathName);l.Z.router.replaceWith(r,void 0,!1)}c().assign(this._project,e),function(e,t){var n=c().cloneDeep(e);delete n["access-control"],delete n.accessTime;var i=c().cloneDeep(t);return delete i["access-control"],delete i.accessTime,!!Z().create().diff(n,i)}(i,this._project)&&ke.projectDataUpdate({projectId:e.guid},{oldProject:i,newProject:this._project})}function Oe(e,t,n,i){n=n||[];var r,a=""===(i=i||"")?"":i+"/";if(t.filesSeparate){var s=[],o=[];c().forOwn(e,(function(e,t){c().isNumber(e)?s.push(t):".git"!==t&&o.push(t)})),De(s,t.isCaseSensitive),De(o,t.isCaseSensitive),r=s.concat(o)}else De(r=c().keys(e),t.isCaseSensitive);c().forEach(r,(function(r){var s=e[r];c().isObject(s)?Oe(s,t,n.concat(r),a+r):t.callback(r,n,i)}))}function De(e,t){t?e.sort():e.sort(Ne)}function Ne(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function Me(e){void 0!==e.file1&&delete xe[e.file1],void 0!==e.file2&&delete xe[e.file2]}function Fe(){xe={}}c().forEach(["name","guid","type","description","is_box_clonable","is_box_always_on","is_private_preview_allowed","forks","branches","currentBranch","deployTargets","sshHost","sshPort","userFileServer","pathName","always_on_box_slot_owner_id","created","stackVersionId","archive_state","gigaBoxSlot","isReadOnly","guides","isLatestStack","penalties","dynamicPreviewCookie","start_container_task_id","needPublish","projectCallStartDate"],(function(e){Object.defineProperty(Ie,e,{get:function(){return this._project[e]}})})),c().forIn({isPublic:"is_public",isFreePrivate:"is_free_private",isPrivateBitbucket:"is_private_bitbucket",permissions:"permissions_v2"},(function(e,t){Object.defineProperty(Ie,t,{get:function(){return this._project[e]}})})),c().forEach(["shared","recent"],(function(e){Object.defineProperty(Ie,e,{get:function(){var t=this._project[e];return!c().isUndefined(t)&&t}})})),Object.defineProperty(Ie,"codioMenuFilter",{get:function(){var e=this._project.codioMenuFilter;return c().isObject(e)?e:{}}}),Object.defineProperty(Ie,"dynamic_port_protection",{get:function(){var e=this._project.dynamic_port_protection;return!!c().isUndefined(e)||e}}),Object.defineProperty(Ie,"_plugins",{get:function(){var e=this._project.pluginsData;return c().isObject(e)?e:{}}}),Object.defineProperty(Ie,"children",{get:function(){var e=oe();return c().isUndefined(e)?{}:e}}),Object.defineProperty(Ie,"generation",{get:function(){return"lxc"===this._project.version?2:1}}),Object.defineProperty(Ie,"migrated",{get:function(){return this._project.migrated_from_lxc}}),Object.defineProperty(Ie,"isFork",{get:function(){var e=this._project.isFork,t=!!this._project.parentProject;return!c().isUndefined(e)&&(e&&t)}}),Object.defineProperty(Ie,"runMode",{get:function(){var e=this._project.runMode;return c().isUndefined(e)?0:e}}),Object.defineProperty(Ie,"parent",{get:function(){var e=this._project.parentProject;return{ownerId:e.ownerId,owner:e.owner,href:e.owner?"/".concat(e.ownerPath,"/").concat(e.pathName):"/".concat(this._project.parent),name:e.name}}}),Object.defineProperty(Ie,"backendDomain",{get:function(){return this._project.backendDomain+"."+y.Z.get("boxDomain")}}),Object.defineProperty(Ie,"secureBackendDomain",{get:function(){if(this._project.isPublic||!this._project.is_private_preview_allowed||!this._project.secureBackendDomain)return"";var e=this._project.secureBackendDomain,t=y.Z.get("boxDomain");return y.Z.get("backendSchema")+e+"."+t}}),Object.defineProperty(Ie,"backendSubDomain",{get:function(){return this._project.backendDomain}}),Object.defineProperty(Ie,"access",{get:function(){return{control:this._project["access-control"],context:null}}}),Object.defineProperty(Ie,"owner",{get:function(){var e=this._project;return{name:e.owner,id:e.ownerId}}}),Object.defineProperty(Ie,"isPrivate",{get:function(){return!this.isPublic}}),Object.defineProperty(Ie,"isAdmin",{get:function(){return"OWNER"===this.access.control||"ADMIN"===this.access.control}}),Object.defineProperty(Ie,"isAuthor",{get:function(){return this.isAuthorProject}}),Object.defineProperty(Ie,"isUserOwner",{get:function(){return this.owner.id===l.Z.currentUser.getAccountUid()}}),Object.defineProperty(Ie,"isUserAssignee",{get:function(){var e=l.Z.currentUser.getAccountUid();return this.assigneeInfo&&(!this.assigneeInfo.isGroup&&this.assigneeInfo.userId===e||this.assigneeInfo.isGroup&&this.assigneeInfo.group.userIds.includes(e))}}),Object.defineProperty(Ie,"isOwner",{get:function(){return"OWNER"===this.access.control}}),Object.defineProperty(Ie,"readOnly",{get:function(){return"READ"===this.access.control||this.isReadOnly}}),Object.defineProperty(Ie,"href",{get:function(){return"/"+this.path}}),Object.defineProperty(Ie,"path",{get:function(){return this.owner.name?[this.ownerName,this.pathName].join("/"):["projects",this.guid].join("/")}}),Object.defineProperty(Ie,"ownerName",{get:function(){return c().has(this.owner,"name")?this.owner.name:this.owner}}),Object.defineProperty(Ie,"sortedBookPages",{get:function(){return this._sortedBookPages},set:function(e){this._sortedBookPages=e}}),Object.defineProperty(Ie,"penalty",{get:function(){return this._penalty},set:function(e){this._penalty=e}}),Object.defineProperty(Ie,"assignmentProjectId",{get:function(){return this.eduStartedAssignmentInfo&&this.eduStartedAssignmentInfo.started?this.eduStartedAssignmentInfo.started.projectId:this.guid}}),Object.defineProperty(Ie,"writableCopy",{get:function(){var e=(this.eduStartedAssignmentInfo||{}).started;return e&&this.owner.id&&(e.assignee.groupId||e.assignee.userId!==this.owner.id)}}),Ie.exists=function(e){return c().isObject(this.getFileInfo(e))},Ie.subscribeNS=function(e){if(Ce=w.Z.subscribe("project/"+this.guid,Ae.bind(this)),this.eduStartedAssignmentInfo){var t="course/"+this.course.id;Se=w.Z.subscribe(t,je.bind(this))}return this.userFileServer||Te(),fe(this,e)},Ie.unsubscribeNS=function(){if(Ce){if(w.Z.unsubscribe("project/"+this.guid,Ce),this.eduStartedAssignmentInfo){var e="course/"+this.course.id;w.Z.unsubscribe(e,Se)}se(this),Ce=null}},Ie.checkArchivedState=function(){var e=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="Unpacking project failed.","BROKEN"!==t.archive_state){e.next=3;break}throw new Error(n);case 3:if("NORMAL"!==t.archive_state){e.next=5;break}return e.abrupt("return",t);case 5:return p()("div.ac").showFProgress("Unpacking project..."),e.abrupt("return",new Promise((function(e,i){var r=w.Z.subscribe("project/"+t.guid,(function(a){a&&("NORMAL"===a.archive_state?(w.Z.unsubscribe("project/"+t.guid,r),t._project.userFileServer=a.userFileServer,"lxc"!==t._project.version&&(t._project.version=a.version,t._project.migrated_from_lxc=a.migrated_from_lxc,t._project.stackVersionId=a.stackVersionId),p()("div.ac").showFProgress("Loading project..."),c().delay((function(){e(t)}),100)):"BROKEN"===a.archive_state&&(w.Z.unsubscribe("project/"+t.guid,r),i(n)))}))})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie.getFileInfoInsensitive=function(e){if("/"===e||""===e)return this;var t=e?e.split("/"):[],n=function e(n,i){var r=c().head(t);if(!c().isString(r))return[];var a=c()(i).keys().find((function(e){return e.toLowerCase()===r.toLowerCase()}));if(c().isUndefined(a))return[];var s=e(c().tail(t),i[a]);return[a].concat(s)}(0,this.children);return g.ZP.realName(n.join("/"))},Ie.getFileInfo=function(e){if("/"===e||""===e)return this;for(var t=e?e.split("/"):[],n=this.children,i=0;i<t.length;i++){var r=t[i];if(!c().has(n,r))return;n=n[r]}return{name:g.ZP.realName(t[t.length-1]),type:c().isNumber(n)?"file":"dir"}},Ie.getPluginData=function(e){return this._plugins[e]||{}},Ie.setPluginData=function(){var e=(0,r.Z)(s().mark((function e(t,n,i){var r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=c().cloneDeep(this.getPluginData(t)))[n]=i,(a=c().cloneDeep(this._plugins))[t]=r,this.readOnly){e.next=6;break}return e.abrupt("return",this.update({pluginsData:a}));case 6:this._project.pluginsData=a;case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}(),Ie.files=function(e){e=e||{},e=c().clone(e),e=c().defaults(e,{isCaseSensitive:!0,filesSeparate:!1});var t=[];return e.callback=function(e,n,i){e=g.ZP.realName(e),i=""===i?"":i+"/";var r=g.ZP.realName(i+e);t.push({name:e,path:r})},Oe(this.children,e),t},Ie.getBinaryFileContent=function(){var e=(0,r.Z)(s().mark((function e(t,n){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.exists(t)){e.next=2;break}throw new Error(t+" does not exist.");case 2:return n=c().defaults(n||{},{decodeContents:!1}),i=n.decodeContents,e.abrupt("return",u.Z.getFile(t,i).catch((function(){return new Error("Error load file. "+t)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),Ie.getBinaryFileBuffer=function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.exists(t)){e.next=2;break}throw new Error(t+" does not exist.");case 2:return e.abrupt("return",u.Z.getFileBuffer(this.guid,t).catch((function(){throw new Error("Error load file.")})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Ie.getFile=function(){var e=(0,r.Z)(s().mark((function e(t,n){var i,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.exists(t)){e.next=2;break}throw new Error(t+" does not exist.");case 2:if(!(i=v.Z.getFile(t))){e.next=9;break}return e.next=6,g.ZP.promise.getState(i.status);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=null;case 10:if(e.t0!==g.ZP.promise.STATES.FULFILLED){e.next=15;break}return e.abrupt("return",v.Z.content(t));case 15:return e.next=17,this.file(t,n);case 17:return r=e.sent,e.abrupt("return",r.content);case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),Ie.file=function(e,t){t=c().defaults(t||{},{enableSharejs:!0,decodeContents:!0});var n=new v.Z(e,t);return n.synchronization.then((function(){return n})).catch((function(){return n}))},Ie.unixFile=function(e,t){return this.file(e,t).then((function(t){return t.model.nonUnixLineBreaks&&(t.content(t.content),Pe.filePropUpdate({path:e},{nonUnixLineBreaks:!1})),t}))},Ie.fileContent=function(){var e=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=v.Z.content(t))){e.next=3;break}return e.abrupt("return",n);case 3:return e.abrupt("return",this.getFile(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Ie.createFolder=function(e,t){var n=(c().isEmpty(t)?"":t+"/")+e;return pe(n)},Ie.createFile=function(){var e=(0,r.Z)(s().mark((function e(t,n){var i,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(c().isEmpty(n)?"":n+"/")+t,e.next=3,le(i);case 3:if(a=e.sent,c().endsWith(t,".ipynb")){e.next=6;break}return e.abrupt("return",a);case 6:return e.next=8,this.file(i);case 8:return o=e.sent,e.abrupt("return",new Promise((function(e,t){o.content=JSON.stringify(we,null,1),c().defer((0,r.Z)(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,x.Z.saveAllAndWait();case 3:return n.next=5,o.close(!0);case 5:e(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),t(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])}))))})).then((function(){return a})));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),Ie.renameItem=function(e,t){return x.Z.saveAllAndWait().then((function(){return ue([e],[t])}))},Ie.moveItems=function(e,t){return ue(e,t)},Ie.copyItems=function(e,t){return de(e,t)},Ie.deleteItems=function(e){e.sort();var t={},n=[];return e.forEach((function(e,i){if(0===i)t[e]=!0,n.push(e);else{var r=e.split("/");r.pop();var a=r.join("/");t[a]||(n.push(e),t[e]=!0)}})),ce(n)},Ie.getImageDataURI=function(){var e=(0,r.Z)(s().mark((function e(t){var n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={enableSharejs:!1,decodeContents:!1},void 0===xe[t]){e.next=3;break}return e.abrupt("return",xe[t]);case 3:return i=g.ZP.path.getFileExtension(t),e.abrupt("return",this.getBinaryFileContent(t,n).then((function(e){var n=g.ZP.arrayBufferToBase64(e),r="data:image/"+i+";base64,"+n;return xe[t]=r,r})).catch((function(){throw new Error(t)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Ie.checkout=function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentBranch!==t){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",this.update({currentBranch:t}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Ie.getShareFile=function(e){return _.Z.getDocuments()[e]},Ie.update=function(e){var t=this;c().defaults(e,{guid:this.guid});var n=(new Date).getTime();return new Promise((function(i,r){t._updateProjectHandlers[n]=S.Z.subscribe("project:dataUpdate:#projectId",(function(){t._updateProjectHandlers[n]&&(S.Z.unsubscribe(t._updateProjectHandlers[n]),delete t._updateProjectHandlers[n]),i()})),m.ZP.ProjectManager.update(e).catch((function(i){e.name!==t._project.name&&ke.renameFailed(),S.Z.unsubscribe(t._updateProjectHandlers[n]),r(i)}))}))},Ie.assignAlwaysOn=function(e){return m.ZP.ProjectManager.assignAlwaysOn(this.guid,e)},Ie.unassignAlwaysOn=function(){return m.ZP.ProjectManager.unassignAlwaysOn(this.guid)},Object.defineProperty(Ie,"protectLayoutAllowed",{get:function(){return["guides","search","change-player","code-comments","grading","call"]}}),Object.defineProperty(Ie,"protectLayoutValue",{get:function(){var e=this;return e.eduStartedAssignmentInfo&&e.guides&&e.guides.metadata&&!e.isOpenedByTeacher&&e.guides.metadata.protectLayout||!1}}),Ie.temporaryDisableProtectLayout=function(){var e=this.protectLayout;if(!this.protectLayoutDisabled){var t=this;this.protectLayoutDisabled=!0,this.protectLayout=!1,c().delay((function(){t.protectLayout=e,t.protectLayoutDisabled=!1}),250)}},Ie.setNeedPublish=function(){var e=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=l.Z.currentProject).isAuthorProject&&!n.isBook&&n.needPublish!==t){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this.update({guid:n.guid,needPublish:t}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),_e.plugin("project",n(57328)),Ie.isOff=function(){return this._isOff},Ie.export=function(){return M(this.guid)},Ie.remove=function(){var e=this;return m.ZP.ProjectManager.remove(this.guid).then((function(){l.Z.currentProject=null,F.deleted({projectId:e.guid})}))},Ie.setPermissions=function(e){for(var t={accountId:null,orgId:null,permission:null,teamId:null},n=0,i=e.length;n<i;n++)e[n]=c().defaults(e[n],t);return this.update({permissions_v2:e})},Ie.uploadFile=function(e,t,n,i,r){var a=l.Z.currentProject.guid;return m.ZP.ProjectStructureManager.uploadFile(e,a,t,n,i,r)},Ie.uploadFromS3File=function(e,t,n){return m.ZP.ProjectStructureManager.uploadFromS3File(l.Z.currentProject.guid,e,t,n)},S.Z.subscribe("command:project:create",(function(){location.assign("/home/projects/new")})),S.Z.subscribe("command:goto:dashboard",(function(){g.ZP.goBackOrLocation("/home")})),S.Z.subscribe("item:created:#file1",Me),S.Z.subscribe("item:moved:#file1:#file2",Me),S.Z.subscribe("item:deleted:#file1",Me),S.Z.subscribe("project:open",Fe),S.Z.subscribe("project:close",Fe),S.Z.subscribe("project:shutdown",(function(){l.Z.currentProject._isOff=!0}));const Re=Ee;var Le=function(e){this._project=e},Ue=Le.prototype;c().forEach(["name","guid","description","is_box_clonable","is_box_always_on","is_private_preview_allowed","dynamic_port_protection","always_on_box_slot_owner_id","stackVersionId"],(function(e){Object.defineProperty(Ue,e,{get:function(){return this._project[e]}})})),c().forIn({isPublic:"is_public",isFreePrivate:"is_free_private",isPrivateBitbucket:"is_private_bitbucket"},(function(e,t){Object.defineProperty(Ue,t,{get:function(){return this._project[e]}})})),Object.defineProperty(Ue,"runMode",{get:function(){var e=this._project.runMode;return c().isUndefined(e)?0:e}}),Object.defineProperty(Ue,"isPrivate",{get:function(){return!this.isPublic}}),Ue.update=function(e){return c().defaults(e,{guid:this.guid}),m.ZP.ProjectManager.update(e)},Ue.assignAlwaysOn=function(e){return m.ZP.ProjectManager.assignAlwaysOn(this.guid,e)},Ue.unassignAlwaysOn=function(){return m.ZP.ProjectManager.unassignAlwaysOn(this.guid)};const Be=Le;var qe=n(9605),He=n(68058),We=S.Z.create(n(37791));var ze=function(e,t,n){return 1===arguments.length&&(n=e),function(e,t){var n=t?function(e){return t.indexOf(e.guid)}:function(e){return(e.name+"").toLowerCase()};return e.sort((function(e,t){var i=n(e),r=n(t);return i<r?-1:i>r?1:i===r?0:void 0}))}(c().map(n,(function(t){return c().isUndefined(e)||(t[e]=!0),new qe.Z(t)})),t)},Ge=function(e){return m.ZP.ProjectManager.all(e).then(ze)},Ve=function(){var e=(0,r.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.Z.currentUser.getAccountUid(),n=He.I_.get(t+"-recent-projects"),!c().isEmpty(n)){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",m.ZP.ProjectManager.getByIds(n).then((function(e){return ze("recent",n,e)})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(e,t){if(!e||"all"===e)return!0;c().defaults(e,{session:"all",project:"all",projectType:"all",exceptType:[],route:"all",generation:"all",readOnlyAccess:!0,isBook:"all",uType:"all"});var n=l.Z.currentProject,i=l.Z.currentUser.isAnonymous()?"anonymous":"registered",r=l.Z.currentUser.get("details").get("type"),a=c().isNull(n)?"all":n.access.control,s=c().isNull(n)?"all":n.generation,o=c().isNull(n)?"all":n.type;return!("all"!==e.uType&&!c().includes(e.uType,r))&&(!("all"!==e.session&&!c().includes(e.session,i))&&(!("all"!==e.project&&!c().includes(e.project,a))&&(!(!e.readOnlyAccess&&n.isReadOnly)&&(("all"===e.generation||e.generation===s)&&(!("all"!==e.projectType&&!c().includes(e.projectType,o))&&("all"!==e.exceptType&&!c().includes(e.exceptType,o)&&(!("all"!==e.route&&!c().includes(e.route,t))&&(function(e){var t=l.Z.currentProject,n=c().isNull(t)?"all":t.isBook||!1;return"all"===e.isBook||e.isBook===n}(e)&&!0))))))))},Ye={};Ye.all=function(e){return!l.Z.currentUser.isAnonymous()&&g.ZP.equalNames(l.Z.currentUser.name(),e)?Promise.all([Ge(e),m.ZP.ProjectManager.shared().then((function(e){var t=[];return c().forEach(e,(function(e){c().forEach(e.projects,(function(e){t.push(e)}))})),ze("shared",null,t)})),Ve()]).then((function(e){var t=(0,i.Z)(e,3);return{own:t[0],shared:t[1],recent:t[2]}})):function(e){return m.ZP.ProjectManager.public(e).then(ze)}(e).then((function(e){return{public:e}}))},Ye.remove=function(e){return function(e){return m.ZP.ProjectManager.remove(e).then((function(){We.deleted({projectId:e})}))}(e)},Ye.load=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=window.sessionStorage.getItem("codio_sso_token");return m.ZP.ProjectManager.subscribe(e,t,n,a,r).then((function(e){r("loadProject:subscribeDone");var t=l.Z.currentUser.get("details").get("type"),n=new Re(e);n.isAuthorProject=e.isAuthorProject,n.eduStartedAssignmentInfo=e.eduStartedAssignmentInfo,n.isTemporary=n.eduStartedAssignmentInfo&&n.eduStartedAssignmentInfo.started&&n.eduStartedAssignmentInfo.started.isTemporary,n.isOpenedByTeacher=n.eduStartedAssignmentInfo&&n.eduStartedAssignmentInfo.isTeacher&&"TEACHER"===t,n.course=n.course||n.eduStartedAssignmentInfo&&n.eduStartedAssignmentInfo.course,n.isBook=!!e.bookData,n.isBookWriter=n.isBook&&e.bookData.bookWriter,n.isBookReader=n.isBook&&!e.bookData.bookWriter,n.eduStartedAssignmentInfo&&n.guides&&n.guides.metadata&&!n.isOpenedByTeacher&&(n.protectLayout=n.guides.metadata.protectLayout||!1),n.showAllBookPages=n.isBook&&e.bookData.showAllPages,n.bookName=n.isBook&&e.bookData.name,n.bookAssignmentPages=n.isBook&&e.bookData.pages,n.isLtiEnabled=n.course&&n.course.details.lti&&n.course.details.lti.enabled,n.penalty=n.eduStartedAssignmentInfo&&e.penaltyInfo.penalty,n.penalty&&(n.penalty.date=new Date(n.penalty.date)),n.penaltyApprovedDate=n.eduStartedAssignmentInfo&&new Date(e.penaltyInfo.penaltyApprovedDate),n.penaltyExtendMin=n.eduStartedAssignmentInfo&&e.penaltyInfo.penaltyExtendMin,n.examMode={shuffleQuestionsOrder:!1,singleLogin:!1,forwardOnlyNavigation:!1,timedMode:{enabled:!1,duration:0}},n.assigneeInfo=e.assignee;var a=n.eduStartedAssignmentInfo&&(n.eduStartedAssignmentInfo.assignment.projectBased||n.eduStartedAssignmentInfo.assignment.bookBased);if(n.eduStartedAssignmentInfo&&!n.isOpenedByTeacher&&a&&a.settings&&a.settings.examMode){var s=a.settings.examMode;n.examMode={shuffleQuestionsOrder:s.shuffleQuestionsOrder||!1,singleLogin:s.singleLogin||!1,forwardOnlyNavigation:s.forwardOnlyNavigation||!1,timedMode:s.timedMode||{enabled:!1,duration:0}}}if(n.eduStartedAssignmentInfo&&a){n.pairProgramming=a.settings.groupWork?c().get(a.settings.groupWork,"pairProgramming"):{enabled:!1,enforcedSharedFocus:!1}}return n.authorAssignment=e.authorAssignment,i?n:function(e){var t=l.Z.currentUser.getAccountUid(),n=e.owner.id;if(!n)return e;if(t!==n)return e;var i=e.guid,r=c().without(He.I_.get(t+"-recent-projects")||[],i);return r.unshift(i),He.I_.set(t+"-recent-projects",r),e}(n)}))},Ye.loadInfo=function(e,t){return m.ZP.ProjectManager.getInfoByName(e,t).then((function(e){return new Be(e)}))},Ye.create=function(e,t){var n=l.Z.currentUser.name();return m.ZP.ProjectManager.create(e,n,t)},Ye.createFromPack=function(e,t){var n=l.Z.currentUser.name();return m.ZP.ProjectManager.createFromPack(e,n,t)},Ye.import=function(e,t,n,i){return m.ZP.ProjectManager.import(e,t,n,i)},Ye.inContext=function(e,t,n,i){c().isArray(e)||(e=[e]),i||c().map(n,(function(t){e.push(t)}));var r=!1;return c().map(e,(function(e){r=r||Ke(e,t)})),r};const Je=Ye},88392:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(52308),r=n.n(i),a=n(96486),s=n.n(a),o=n(18356),c=n.n(o),l=n(93443),u=n(97137),d=["a[target!=_blank]","[href]",":not([href^=#])",":not([href^=http])",':not([href^="mailto:"])',':not([href="javascript:void(0)"])',":not([data-toggle^=tab])",":not([data-toggle^=collapse])",":not([data-target=dashboard])"].join(""),p=!1,f=l.Z.create(n(96205)),h=function(){s().bindAll(this,["startRouting","map","handleUrl","pushState","replaceState","redirectTo","replaceWith","getQueryString","getURL","getRawUrl","getState","getFullRawUrl","_runHandlers","_abort"]),this.recognizer=new(c()),this.location=window.location,this.history=window.history},m=h.prototype;function g(e){return"/"+s().filter(s().map(e,(function(e){return e.handler.generate&&e.handler.generate(e.params)}))).join("/")}function v(e){if(e&&0!==e.length)for(var t=e[0],n=1,i=e.length;n<i;++n){var r=e[n];s().assign(r.params,t.params),t=r}}function b(e){var t=r()(this).attr("href");return e.replaceState(t),e.handleUrl(),!1}m.startRouting=function(){var e=this;l.Z.on(window,"popstate",(function(){p?e.handleUrl():p=!0})),document.addEventListener("click",(function(t){if(r()(t.target).is(d))b.call(t.target,e,t),t.stopPropagation(),t.preventDefault();else{var n=r()(t.target).closest(d);0!==n.length&&(b.call(n,e,t),t.stopPropagation(),t.preventDefault())}}),!0),this.handleUrl()},m.map=function(e){this.recognizer.map(e,(function(e,t){e.add(t)}))},m.handleUrl=function(e){!p&&(p=!0);var t=this.getRawUrl(),n=this._currentUrl;if(n!==t){var i=this.recognizer.recognize(t),r=g(i);if(v(i),n!==r){this._currentUrl=r;var a=this.getQueryString(),o=a?this.recognizer.parseQueryString(a):{};if(!e){if(s().isEmpty(i))return this.redirectTo("/"),window.location.reload();var c;n&&(g(c=this.recognizer.recognize(n)),v(c));var l=this;this._runHandlers({exitMatches:c,entryMatches:i,exit:n,enter:this._currentUrl,urlParams:o}).then((function(){f.routeChanged({exit:n,enter:l._currentUrl,enterMatches:i[0],urlParams:o})}))}}}},m.pushState=function(e,t){r().extend(t,{path:e}),this.history.pushState(t,null,e)},m.replaceState=function(e,t){r().extend(t,{path:e}),this.history.state,this.history.replaceState(t,null,e)},m.redirectTo=function(e,t,n){this.replaceState(e,t),this.handleUrl(n)},m.replaceWith=function(e,t,n){this.replaceState(e,t),(n=!!s().isUndefined(n)||n)&&this.handleUrl()},m.getQueryString=function(){var e=this.location.href,t=e.indexOf("?");return t>-1?e.slice(t+1):void 0},m.getURL=function(){return this._currentUrl},m.getRawUrl=function(){return this.location.pathname},m.getState=function(){return this.history.state},m.getFullRawUrl=function(){return this.location.pathname+this.location.search+this.location.hash},m._runHandlers=function(e){var t=e.entryMatches,n=e.exitMatches;if(e.entryMatches&&e.exitMatches){var i=function(e,t){for(var n=Math.min(e.length,t.length),i=0,r=0;r<n&&s().isEqual(e[r],t[r]);++r)i=r+1;var a=e.slice(i),o=t.slice(i);return[a,o]}(e.entryMatches,e.exitMatches);t=i[0],n=i[1]}n=n||[];var r=s().map(n.reverse(),(function(t){var n={path:e.exit,newPath:e.enter,params:t.params,urlParams:e.urlParams};if(e.exit,s().isFunction(t.handler.exit)){var i=t.handler.exit(n);if(i&&s().isFunction(i.then))return i}})),a=this;return Promise.all(r).then((function(){t=t||[],s().each(t,(function(t){var n={path:e.enter,oldPath:e.exit,params:t.params,urlParams:e.urlParams};if(e.enter,!1===(t.handler.enter&&t.handler.enter(n)))return!1})),s().isEmpty(e.entryMatches)&&u.Z.notFound()})).catch((function(){a._abort(e)}))},m._abort=function(e){this._currentUrl=e.exit,this.replaceState(e.exit)};const y=h},23318:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(18620),r=n(53078),a=n(4179),s=n(53610);var o=n(54565).Z.get("sentry");o&&/Trident\/[78]\.0|Edge?\/(1{2}[2-9]|1[2-9]\d|[2-9]\d{2}|\d{4,})(\.\d+|)(\.\d+|)|Firefox\/(1{2}[3-9]|1[2-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Chrom(ium|e)\/(10[3-9]|1[1-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Maci.+ Version\/(14\.([1-9]|\d{2,})|(1[5-9]|[2-9]\d|\d{3,})\.\d+)([,.]\d+|)( \(\w+\)|)( Mobile\/\w+|) Safari\/|Chrome.+OPR\/(9[89]|\d{3,})\.\d+\.\d+|(CPU[ +]OS|iPhone[ +]OS|CPU[ +]iPhone|CPU IPhone OS|CPU iPad OS)[ +]+(12[._]([2-9]|\d{2,})|(1[3-9]|[2-9]\d|\d{3,})[._]\d+)([._]\d+|)|Android:?[ /-](4(\.([4-9]|\d{2,})|)|([5-9]|\d{2,})(\.\d+|))(\.\d+|)|Mobile Safari.+OPR\/(7[3-9]|[89]\d|\d{3,})\.\d+\.\d+|Android.+Firefox\/(1{2}[5-9]|1[2-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Android.+Chrom(ium|e)\/(1{2}[5-9]|1[2-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Android.+(UC? ?Browser|UCWEB|U3)[ /]?(15\.([5-9]|\d{2,})|(1[6-9]|[2-9]\d|\d{3,})\.\d+)\.\d+|SamsungBrowser\/([2-9]\d|\d{3,})\.\d+|Android.+MQ{2}Browser\/(13(\.([1-9]|\d{2,})|)|(1[4-9]|[2-9]\d|\d{3,})(\.\d+|))(\.\d+|)|K[Aa][Ii]OS\/(2\.([5-9]|\d{2,})|([3-9]|\d{2,})\.\d+)(\.\d+|)/.test(navigator.userAgent)&&i.S1({dsn:o.url,replaysSessionSampleRate:0,replaysOnErrorSampleRate:.5,integrations:[new s.I,new r.U],release:o.release,environment:o.environment,allowUrls:o.whitelistUrls,attachStacktrace:!0,ignoreErrors:["SockJS has already been closed","Script error","Cannot transition directly from connected to connecting","Subscription needed","Loading chunk","Object doesn't support property or method 'composedPath'","e.composedPath is not a function","Unknown message state","Failed to execute 'importScripts' on 'WorkerGlobalScope'","Unexpected usage at te.loadForeignModule"]});const c=o?a:{captureException:function(e,t){console.error(e,t)},captureMessage:function(e,t){console.error(e,t)},setUser:function(){},withScope:function(){return{setExtra:function(){}}}}},44442:(e,t,n)=>{"use strict";n.d(t,{Z:()=>B,A:()=>j});var i=n(96486),r=n.n(i),a=n(52308),s=n.n(a),o=n(93443);const c=function(e){var t,n={section:/^\s*\[\s*([^\]]*)\s*\]\s*$/,param:/^\s*([\w\.\-\_]+)\s*=\s*(.*?)\s*$/,comment:/^\s*;.*$/},i={},r=e.split(/\r\n|\r|\n/),a=null;return r.forEach((function(e){n.comment.test(e)||(n.param.test(e)?(t=e.match(n.param),a?i[a][t[1]]=t[2]:i[t[1]]=t[2]):n.section.test(e)&&(t=e.match(n.section),i[t[1]]=i[t[1]]||{},a=t[1]))})),i};var l=n(20294);const u=JSON.parse('["ide:tab_close_all","ide:tab_close_others","ide:tab_close_left","ide:tab_close_right","ide:tab_close","ide:upload_item","ide:delete_item","ide:rename_item","ide:new_folder","ide:new_file","ide:deploy-preview","file:open","ide:panel_split_horizontal","ide:panel_split_vertical","ide:panel:join","ide:panel_close","ide:layout_default","ide:layout_2_columns","ide:layout_2_rows","ide:layout_showcase","git:command-line"]');n(6874);var d,p=o.Z.create(n(89261)),f=!1,h={},m={},g={},v=navigator.platform.toUpperCase().indexOf("MAC")>=0?"mac":"win",b=[],y={},w=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"];function _(e,t,n){if(!(d&&-1!==u.indexOf(e+":"+t)||f)){if(n instanceof s().Event){var i=function(e,t){var n=s()(e).closest(".modal").length>0||s()(e).closest(".search-dialog").length>0,i=s()(e).closest(".monaco-editor").length>0,r=/textarea/i.test(e.nodeName)&&e.classList.contains("monaco-mouse-cursor-text"),a="emmet:expand_abbreviation_with_tab"===t||"editor:key_indentLess"===t;if(/textarea|select/i.test(e.nodeName)&&!r||s().inArray(e.type,w)>-1||n||!i&&a){var o=s()(e).data("allowed-hotkeys");return!(!o||-1===o.split(",").indexOf(t))}return!0}(n.target,e+":"+t);if(!i)return}var a={arg:n,pass:null};return p.hotkeySync({plugin:e,command:t},a),void 0!==a.arg&&(r().isFunction(a.arg.preventDefault)||r().isFunction(a.arg.stopPropagation))&&(r().isFunction(a.arg.preventDefault)&&a.arg.preventDefault(),r().isFunction(a.arg.stopPropagation)&&a.arg.stopPropagation()),!1}}function k(){var e={};return y={},P(g,e),P(m,e),P(h,e),e}function P(e,t){r().forEach(e,(function(e,n){t[n]=t[n]||{},r().forEach(e,(function(e,i){var a=function(e){r().isObject(e)&&(e=e.key,r().isObject(e)&&(e=e[v]));return e}(e);void 0===a||r().has(y,a)||r().has(t[n],i)||(t[n][i]=a,y[a]=!0)}))}))}function Z(e,t){function n(e,t){return e>t?1:e<t?-1:e===t?0:void 0}return e.sort((function(e,i){var a=r().indexOf(t,e.toLowerCase()),s=r().indexOf(t,i.toLowerCase()),o=-1!==a,c=-1!==s;return o&&!c?-1:c&&!o?1:a||s?n(a,s):n(e,i)}))}function x(e){return e.split(/[+\-]/)}function C(e){var t=x(e=e.replace(/cmd/i,"meta"));return(t=Z(t,["alt","ctrl","meta","shift"])).join("+")}function S(e){return e=r().cloneDeep(e),r().forEach(e,(function(t,n){if(r().has(h,n))return r().forEach(t,(function(t,i){r().isString(t)&&0!==t.length||delete e[n][i],r().has(h[n],i)||delete e[n][i]})),!0;delete e[n]})),e}function E(e){var t="";return void 0!==e&&(t=r().isObject(e)?e[v]:e),t}function I(){function e(e,t,n){return g[e]&&g[e][t]?g[e][t]:m[e]&&m[e][t]?m[e][t]:E(n.key)}var t={};return r().forEach(h,(function(n,i){t[i]={},r().forEach(n,(function(n,r){var a;t[i][r]={desc:n.desc,isMacKeyDefined:null==n||null===(a=n.key)||void 0===a?void 0:a.mac,key:e(i,r,n)}}))})),t}var T={plugin:function(e,t){if(r().has(h,e))return!1;h[e]=t},user:function(e){var t=S(e);r().isEqual(t,m)||(m=t,T.refresh())},project:function(e){var t=S(e);r().isEqual(t,g)||(g=t,T.refresh())},compiledDescription:r().once(I),getCurrentKey:function(e){var t=T.compiledDescription(),n=e.split(":"),i=n.shift(),a=n.shift();if(r().has(t,i)&&r().has(t[i],a)){var s=l.ZP.os(),o=t[i][a];return r().has(o,s)?o[s].key:o.key}},descriptions:function(){var e={};return r().forEach(h,(function(t,n){e[n]={},r().forEach(t,(function(t,i){e[n][i]={type:"hotkey",desc:t.desc,default:E(t.key),readonly:!!t.readonly}}))})),e},emulateKey:function(e){if(!r().includes(["alt","control","meta","shift"],e.key.toLowerCase())){var t=C(r()([e.code?e.code.replace(/^(Key|Arrow)/,""):void 0,e.altKey?"Alt":void 0,e.ctrlKey?"Ctrl":void 0,e.metaKey?"Meta":void 0,e.shiftKey?"Shift":void 0]).compact().join("+"));o.Z.publish("hotkey:emulated:"+t.toLowerCase())}},execute:_,refresh:function(){T.compiledDescription=r().once(I),o.Z.unbind(document,"keydown.shortcuts"),r().forEach(b,(function(e){o.Z.unsubscribe(e)})),b=[];var e=k();r().forEach(e,(function(e,t){r().forEach(e,(function(e,n){var i=C(e),r=_.bind(null,t,n);o.Z.on(document,"keydown.shortcuts",null,i,r),b.push(o.Z.subscribe("hotkey:emulated:"+i.toLowerCase(),r))}))})),p.hotkeysUpdated()},getCompiledInfo:function(){var e=k(),t=T.compiledDescription();return r().flatMap(e,(function(e,n){return r().map(e,(function(e,i){var r,a,s=_.bind(null,n,i);return{plugin:n,shortcut:(r=e,a=x(r),(a=Z(a,["shift","cmd","ctrl","alt"])).join("-")),isMacKeyDefined:!!t[n][i].isMacKeyDefined,description:t[n][i].desc,command:i,callback:s}}))}))}};o.Z.subscribe("ide:fullscreen:enter",(function(){d=!0})),o.Z.subscribe("ide:fullscreen:leave",(function(){d=!1})),o.Z.subscribe("share:connect",(function(){f=!1})),o.Z.subscribe("share:disconnect",(function(){f=!0}));const j=T;var A=o.Z.create(n(89261)),O={},D={},N={},M={},F=!0;function R(e,t,n,i){n=function(e,t){if(void 0===e)return;switch(e.type){case"int":return parseInt(t,10);case"float":return parseFloat(t);case"list":var n=e.values;if(n&&r().includes(n,t))return t;break;case"string":return t.toString();case"boolean":return r().isBoolean(t)?t:"false"!==t&&("true"===t||void 0)}return}(t[i],n),void 0!==n&&(e[i]=n)}const L={project:function(e){var t=c(e||"");j.project(t),r().isEqual(M,t)||(M=t,F||A.settingsChanged({type:"project"})),F&&(F=!1,A.settingsLoaded())},user:function(e){var t=c(e||"");j.user(t),r().isEqual(N,t)||(N=t,A.settingsChanged({type:"user"}))},plugin:function e(t,n){return!Object.prototype.hasOwnProperty.call(O,e)&&(O[t]=r().clone(n),D[t]={},r().forEach(n,(function(e,n){Object.prototype.hasOwnProperty.call(e,"default")&&(D[t][n]=e.default)})),!0)},descriptions:function(){var e=j.descriptions(),t=r().cloneDeep(O);return r().merge(t,e),t},shortcut:function(){},get:function(e){var t=r().cloneDeep(D[e]||{});if(void 0===t)return{};var n=N[e]||{},i=M[e]||{},a=O[e];return r().forEach(n,R.bind(null,t,a)),r().forEach(i,R.bind(null,t,a)),t},getUser:function(e){var t=r().cloneDeep(N[e]||{});return void 0===t?{}:t},getProject:function(e){var t=r().cloneDeep(M[e]||{});return void 0===t?{}:t}};function U(e,t,n,i,r){void 0!==e&&e!==t&&(r&&(e=r(e)),i.push(n,"=",e,"\n"))}o.Z.subscribe("account:load:my",(function(e,t){t.isAnonymous()||void 0===t.get("details").get("settings")&&function(e){var t=e.get("ide-settings").getEditorSettings(),n=function(e){var t=["[editor]\n"];return U(e.theme,"pastel_on_dark","theme",t),U(e.fontSize,"12px","font_size",t,(function(e){return e.replace("px","")})),U(e.softWrap,"free","soft_wrap",t),U(e.tabSize,4,"tab_size",t),U(e.navigateWithinSoftTabs,null,"navigate_within_soft_tabs",t),U(e.codeFolding,2,"code_folding",t,(function(e){switch(e){case 0:return"manual";case 1:return"begin";default:return"begin_end"}})),U(e.gutter,!0,"gutter",t),U(e.lineSelection,!0,"line_selection",t),U(e.showInvisibles,!1,"show_invisibles",t),U(e.highlightActive,!0,"highlight_active",t),U(e.showIndentGuides,!0,"show_indent_guides",t),U(e.persistentHScroll,!0,"persistent_HScroll",t),U(e.animateScroll,!0,"animate_scroll",t),U(e.showPrintMargin,!1,"show_print_margin",t),U(e.useSoftTabs,!0,"use_soft_tabs",t),U(e.highlightSelectedWord,!0,"highlight_selected_word",t),U(e.enableBehaviours,!0,"enable_behaviours",t),U(e.fadeFoldWidgets,!0,"fade_fold_widgets",t),U(e.useIncrementalSearch,!0,"use_incremental_search",t),t.join("")}(t);e.get("details").set("settings",n),e.saveSection("details"),B.user(n)}(t)}));const B={plugin:L.plugin,hotkey:j,shortcuts:L.shortcuts,defaultContent:function(e){if(""===s().trim(e)||"[editor]"===s().trim(e)){e="";var t=L.descriptions();r().each(t,(function(t,n){r().isEmpty(t)||(e+="["+n+"]\n; enter your "+n+" preferences here...\n\n")}))}return e},get:L.get,getUser:L.getUser,getProject:L.getProject,user:L.user,project:L.project,descriptions:L.descriptions};o.Z.subscribe("account:load:my",(function(e,t){var n=t.get("details").get("settings");L.user(n)})),j.plugin("settings",n(67660))},56609:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ae});var i=n(96486),r=n.n(i),a=n(54565),s=n(93443),o=n(15861),c=n(87757),l=n.n(c),u=n(97137),d=n(20294),p=n(49721),f=n(23318),h=(n(28190),n(43440)),m=n.n(h);const g="0",v="1",b="2",y="3",w="4",_="6",k="5";var P=n(86048),Z=n(67277),x=s.Z.create(n(80093)),C=function(e,t,n){this.url=e,this.params=n,this.writable=!1,this.pendingMessages=[],this.authCb=[],this.waitAuth=!0,this.id=0,this._waitMessages={},this._session=t,this.connect()},S=C.prototype;S.updateSession=function(e){this._session=e},S.connect=function(){if(!this.primus){var e="WebSocket"in window,t=r().extend(this.params,{reconnect:{retries:1/0,max:"2000 ms",min:"200 ms"},strategy:["online","timeout","disconnect"],websockets:e,pingTimeout:25e3,transport:{transports:["websocket"]}}),n=this,i=this.primus=new(m())(this.url,t),a=!1;i.on("open",(function(){n.auth(n._session,a).then((function(){a&&n._rejectOutdatedWaiting().catch((function(){})),n.writable=!0,r().each(n.pendingMessages,(function(e){var t=e.message;n.primus.write(t)})),n.pendingMessages.length=0,n.params.onConnectionState&&(a?n.params.onConnectionState("reconnect"):n.params.onConnectionState("connected"))})).catch((function(e){return x.error({message:e.message})})),a=!0})),i.on("data",(function(e){n.handleMessage(e).catch((function(){}))})),i.on("readyStateChange",(function(e){"open"!==e&&n.writable&&(n.params.onConnectionState&&n.params.onConnectionState("disconnected"),n.writable=!1)})),i.on("error",(function(e){e&&"close"===e.type&&(n.writable=!1),n.params.onConnectionState&&n.params.onConnectionState("disconnected")}))}},S._rejectOutdatedWaiting=(0,o.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],r().forOwn(this._waitMessages,(function(e,n){r().find(i.pendingMessages,(function(e){return e.id===n}))||t.push(n)})),n=[],r().each(t,(function(e){var t=i._waitMessages[e],r=t&&t.deferred;if(r){var a=new Error("Unknown message state");a.extra=t.extra,a.data="",r.reject(a),n.push(r.promise)}delete i._waitMessages[e]})),e.abrupt("return",Promise.all(n));case 5:case"end":return e.stop()}}),e,this)}))),S._convertError=function(e){return r().includes(e,"File too large")?Z.S.ERR_SIZE_LIMIT:r().includes(e,"Can't open binary file")?Z.S.ERR_BINARY_FILE:e},S.handleMessage=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,r,a,s,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=JSON.parse(t),i=n.i,r=n.e,a=this._waitMessages[i],!(s=a&&a.deferred)){e.next=11;break}return r?((o=new Error(r)).extra=a.extra,o.data=n,s.reject(o),P.Z.isNormalizeError(r)||(c=this._convertError(r),x.error({message:c,path:n.d}))):(a.extra&&(n.extra=a.extra),s.resolve(n)),delete this._waitMessages[i],e.abrupt("return",s.promise);case 11:this.params.onMessage&&this.params.onMessage(n);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),S._registerWaitMessage=function(e,t){var n=d.ZP.promise.deferred();return this._waitMessages[e]={deferred:n,extra:t},n},S.auth=function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n&&r().isEqual(this.session,t)){e.next=4;break}return this.waitAuth=!0,this.session=t,e.abrupt("return",this.write(g,t,null,!0));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),S.write=function(e,t,n,i){t.i=this.id,this.id++;var r=this._registerWaitMessage(t.i,n),a=e+JSON.stringify(t);if(a.length>576716800){var s=new Error("Message too big");return s.i=t.i,r.reject(s),r.promise}return this.primus&&(this.writable||i)?this.primus.write(a):this.pendingMessages.push({message:a,id:t.i}),r.promise};const E=C;var I=n(5358),T=function(e,t){this.doc=e,this.submitFunction=t,this.opHandler={}},j=T.prototype;j.hasNonUnixLineBreaks=function(){return this.doc.file.nonUnixLineBreaks},j.clearNonUnixLineBreaks=function(){this.doc.file.nonUnixLineBreaks=!1},j.getLength=function(){return this.doc.file.content.length},j.get=function(){return this.doc.file.content},j.insert=function(e,t){this.submitFunction({p:e,i:t})},j.remove=function(e,t){this.submitFunction({p:e,d:t})},j.replace=function(e){this.submitFunction({p:0,d:this.doc.file.content.length}),this.submitFunction({p:0,i:e})},j.onReplace=function(e){this.opHandler.onReplace&&this.opHandler.onReplace(e)},j.onOp=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.i?this.opHandler.onInsert&&this.opHandler.onInsert(n.p,n.i):n.d&&this.opHandler.onRemove&&this.opHandler.onRemove(n.p,n.d)}};const A=T;var O=n(87167),D=s.Z.create(n(80093)),N=function(e,t,n){this._model=e,this._modelCopy=new O.yO(e.getValue()),this._ctx=t,this._file=n,this._skipChangeEvent=!1,this._attach()},M=N.prototype;M.getModelValue=function(){return this._model.getValue()},M._applyToShareMan=function(e){var t=e.range,n=e.text,i=e.rangeLength,r=e.rangeOffset,a=t.startLineNumber,s=t.startColumn,o=t.endLineNumber,c=t.endColumn,l=this;if(p.Z.currentProject&&p.Z.currentProject.readOnly)return l._replaceHandler(l._ctx.get()),void l._modelCopy.setValue(l._ctx.get());if(!0!==this._ctx.deleted){this._modelCopy.replaceRange(n,{lineNumber:a,column:s},{lineNumber:o,column:c});var u=r;if(!(o===a&&c===s)){var d=0;d=i,this._ctx.hasNonUnixLineBreaks()&&0===u&&d===this._modelCopy.getValue().length&&(d=this._ctx.get().length,this._ctx.clearNonUnixLineBreaks()),d&&this._ctx.remove(u,d)}n&&this._ctx.insert(u,n)}},M._changeHandler=function(e){var t=this,n=e.changes;if(!this._skipChangeEvent){if(this._model.getValue().length>a.Z.get("fileSizeLimit"))return D.error({message:"File size limit reached."});try{n.forEach((function(e){return t._applyToShareMan(e)}))}catch(e){f.Z.captureMessage("apply error",{extra:{id:p.Z.currentUser.account,projectId:p.Z.currentProject.guid,projectName:p.Z.currentProject.pathName,url:window.location.href,err:e,changes:n}}),this._ctx.replace(this._model.getValue())}}},M._attach=function(){this._changeHandlerDisposable&&this._changeHandlerDisposable.dispose(),this._changeHandlerDisposable=this._model.onDidChangeModelContent(this._changeHandler.bind(this)),this._ctx.opHandler={onInsert:this._insertHandler.bind(this),onRemove:this._removeHandler.bind(this),onReplace:this._replaceHandler.bind(this)}},M.detach=function(){this._changeHandlerDisposable&&this._changeHandlerDisposable.dispose(),this._changeHandlerDisposable=null,this._ctx.opHandler={}},M._insertHandler=function(e,t){var n=this._model.getPositionAt(e);this._skipChangeEvent=!0,this._model.replaceRange(t,n),this._skipChangeEvent=!1,this._modelCopy.replaceRange(t,n)},M._removeHandler=function(e,t){var n=this._model.getPositionAt(e),i=this._model.getPositionAt(e+t);this._skipChangeEvent=!0,this._model.replaceRange("",n,i),this._skipChangeEvent=!1,this._modelCopy.replaceRange("",n,i)},M._replaceHandler=function(e){if(this._model.getValue()!==e){var t=this._model.getValue().length,n=this._model.getPositionAt(0),i=this._model.getPositionAt(t);this._skipChangeEvent=!0,this._model.replaceRange(e,n,i),this._skipChangeEvent=!1,this._modelCopy.replaceRange(e,n,i)}};const F=N;var R=n(95611),L=n(20294)._v,U=s.Z.create(n(80093)),B=r().debounce((function(){R.Z.saveAllAndWait()}),3e4,{maxWait:6e4});var q=function(e,t,n){this.file=e,this.model=t,this.shareMan=n,this._opQueue=[],this._pendingQueue=[],this._pendingDfd=null,this._queue=new I.SequentialTaskQueue,this._init(this.file)},H=q.prototype;H.reinit=function(e){if(this._queue.cancel(),e){this._pendingDfd&&(this._pendingDfd.reject(),this._pendingDfd=null);var t=Date.now()-new Date(e.lastModified),n=L.wasSleep();n=n||t>15e3;var i=this.adapter.getModelValue();i!==e.content&&(this._opQueue=[],n?(this.file.content=e.content,this.setDirty(e.changed),this.context.onReplace(e.content)):(this._submitOp({p:0,d:e.content.length}),this._submitOp({p:0,i}))),this.version=e.version}},H.detach=function(){this.adapter.detach()},H.havePendingChanges=function(){return 0!==this._opQueue.length||0!==this._pendingQueue.length},H._init=function(e){this.model.setValue(e.content);var t=new O.yO(e.content);t.setEOL(0),t.getValue()!==e.content&&(U.filePropUpdate({path:e.path},{nonUnixLineBreaks:!0}),e.nonUnixLineBreaks=!0),this.changed=e.changed,this.version=e.version,this._debouncesSubmit=r().debounce(this.submit.bind(this),400,{maxWait:1500}),this.context=new A(this,this._submitOp.bind(this)),this.adapter=new F(this.model,this.context,e.path),this._queue.cancel(),e.changed&&this.setDirty(e.changed)},H.setDirty=function(e,t){this._queue.queue.length>0&&(e=!0),t&&t!==this.version&&(e=!0),e!==this.changed&&(this.changed=e,U.dirty({path:this.file.path},{dirty:this.changed}))};var W=null;function z(e,t,n){var i=[];return r().each(e,(function(e){var a=function(e,t,n){return r().reduce(t,(function(e,t){var i=[];return r().each(e,(function(e){i=i.concat(P.Z.transform(e,t,n))})),i}),[e])}(e,t,n);i=i.concat(a)})),i}H._submitOp=function(e){if(L.wasSleep())return W||(W=window.setTimeout((function(){L.wasSleep()?(f.Z.captureMessage("restore connection issue after sleep",{extra:{id:p.Z.currentUser.account,projectId:p.Z.currentProject.guid,projectName:p.Z.currentProject.pathName,url:window.location.href,data:e,sleep:L.wasSleepTimer()}}),window.alert("Sorry, we can't recover connection to our servers, it might a browser bug or a connection to the Internet is not available.\nWe will reload the tab."),window.location.reload()):W=null}),1e4)),void this.setDirty(!1);this.setDirty(!0),this._opQueue.push(e),this._debouncesSubmit()},H.save=function(){return this.submit(),R.Z.saveAllAndWait()},H._submitToShareman=function(e){var t=this,n={id:d.ZP.GUID()};this.shareMan.write(b,{p:this.file.projectId,d:this.file.path,o:e,v:this.version},n).then((function(){if(t._applyOpToSnapshot(t._pendingQueue),t._pendingQueue=[],t._pendingDfd&&t._pendingDfd.resolve(),t._pendingDfd=null,t._opQueue.length>0)return t._submitWithTransformation();B()})).catch((function(e){var n=e&&e.message?e.message:e;if(P.Z.isNormalizeError(n))return t._waitTillVersionApplied(e.data.v).then((function(){return t._submitToShareman(t._pendingQueue)}));"Unknown message state"!==n&&f.Z.captureMessage("apply op error",{extra:{id:p.Z.currentUser.account,projectName:p.Z.currentProject.pathName,path:t.file.path,projectId:t.file.projectId,url:window.location.href,error:e}}),e.data&&e.data.f&&t._revertCmChanges(e.data.f,t._pendingQueue),t._pendingDfd&&t._pendingDfd.resolve(),t._pendingDfd=null,t._pendingQueue=[]}))},H._submitWithTransformation=function(){if(this._pendingDfd)return this._debouncesSubmit(),this._pendingDfd.promise;var e=this._pendingQueue=this._opQueue;return this._opQueue=[],r().isEmpty(e)?Promise.resolve():(this._pendingDfd=d.ZP.promise.deferred(),this._submitToShareman(e),this._pendingDfd.promise)},H._waitTillVersionApplied=function(e){var t=this;return this.version===e?Promise.resolve():new Promise((function(n){var i=0,r=setInterval((function(){i++,t.version!==e&&5e3!==i||(clearInterval(r),n())}),100)}))},H.submit=function(){var e=this;return this._pendingDfd?this._pendingDfd.promise.then((function(){return e._submitWithTransformation()})).catch((function(){return e._submitWithTransformation()})):this._submitWithTransformation()},H.wait=function(){if(this._pendingDfd)return this._pendingDfd.promise},H._revertCmChanges=function(e){var t=this.file.content;e&&e.content&&(this.file.content=e.content,this.version=e.version,this.setDirty(e.changed)),this.context.onReplace(t)},H._applyOpToSnapshot=function(e,t){var n=this.file.content;return this.file.content=P.Z.apply(n,e),void 0!==t&&(this._pendingQueue.length>0&&(this._pendingQueue=z(this._pendingQueue,e)),this._opQueue.length>0&&(this._opQueue=z(this._opQueue,e))),this.version=t||this.version+1,2===e.length&&n.length===e[0].d&&r().isString(e[1].i)},H.applyOp=function(e,t){r().isUndefined(t)&&t<=this.version||(this.setDirty(!0),this._applyOpToSnapshot(e,t)?this.context.onReplace(this.file.content):(this._pendingQueue.length>0&&(e=z(e,this._pendingQueue)),this._opQueue.length>0&&(e=z(e,this._opQueue)),this.context.onOp(e)))};const G=q;n(56386);var V=s.Z.create(n(80093)),K="disconnected",Y="connected",J=function(e,t){this.waitFirstConnDfd=d.ZP.promise.deferred();var n=this;this.state=K,this.documents={},this.connection=new E(e,t,{onConnectionState:n.onConnectionState.bind(n),onMessage:n.onMessage.bind(n)}),R.Z.initWithShareman(this),s.Z.subscribe("item:deleted:#file",Q._cleanOnRemove.bind(this))},Q=J.prototype;Q._cleanOnRemove=function(e){var t=e.file,n=this;r().each(this.documents,(function(e){r().startsWith(e.file.path,t+"/")&&n.detach(e.file.path)}))},Q.updateSession=function(e){this.connection.updateSession(e)},Q.onConnectionState=function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==K){e.next=5;break}V.disconnected(),this.state=K,e.next=12;break;case 5:return e.next=7,d.ZP.promise.getState(this.waitFirstConnDfd.promise);case 7:e.sent===d.ZP.promise.STATES.PENDING&&this.waitFirstConnDfd.resolve(),this.state=Y,p.Z.currentProject&&this.cursors(p.Z.currentProject.guid).catch((function(){})),this._reconnectDocs().then((function(){d.ZP.sleep.wasSleep(!0),V.connected()})).catch((function(){d.ZP.sleep.wasSleep(!0),V.connected()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Q._reconnectDocs=function(){var e=this,t=r().map(this.documents,(function(t){return e.connection.write(v,{d:t.file.path}).then((function(e){t.reinit(e.f)})).catch((function(e){return u.Z.error(e.message),Promise.resolve()}))}));return Promise.all(t)},Q.detach=function(e){var t=this,n=this.documents[e];return n?this.saveAll(n.file.projectId).then((function(){return t.connection.write(w,{d:e})})).then((function(){n&&n.detach(),delete t.documents[e]})):Promise.resolve()},Q.attach=function(e,t){var n=null;function i(){null!==n&&(clearTimeout(n),n=null)}this.waitFirstConnDfd.promise.then((function(){n=setTimeout((function(){n&&f.Z.captureMessage("long file opening(> 10s)",{extra:{id:p.Z.currentUser.account,projectId:p.Z.currentProject.guid,projectName:p.Z.currentProject.pathName,url:window.location.href,path:e}}),n=null}),11e3)}));var r=this;return this.connection.write(v,{d:e}).then((function(n){i(),r.documents[e]=new G(n.f,t,r)})).catch((function(e){throw i(),e}))},Q._generatePermanentIndex=function(e){return this._uuidToIndex||(this._uuidToIndex={}),this._uuidToIndex[e.r]||(this._freeIndexes&&0!==this._freeIndexes.length||(this._freeIndexes=[1,2,3,4,5]),this._uuidToIndex[e.r]=this._freeIndexes.shift()),this._uuidToIndex[e.r]},Q._processCursors=function(e){var t=this,n=r()(e.c).filter((function(e){return e.r!==p.Z.currentUser.account})).map((function(e){var n={userId:e.r,userName:e.u,file:e.d,cursor:{lineNumber:e.l,column:e.c}};return n.index=t._generatePermanentIndex(e),e.s&&(n.selection={lineNumber:e.s,column:e.h}),n})).value();V.cursors(n)},Q.onMessage=function(e){var t=e.d,n=this.documents[t];if(-3!==e.i||r().isEmpty(e.c)){if(n)if(-1===e.i)n.applyOp(e.o,e.v);else if(-2===e.i)if(e.e)P.Z.isNormalizeError(e.e)||u.Z.error(e.e);else if(n.setDirty(e.m.changed,e.m.version),e.m.sizeLimit){var i=p.Z.ide.panels.isOpen(e.d);i&&(i.panel.closeTab(i).catch(d.ZP.error.checkErrorForIgnore),V.error({message:Z.S.ERR_SIZE_LIMIT,path:e.d}))}}else this._processCursors(e)},Q.waitConnectionOrTimeout=function(){var e=this;return new Promise((function(t){var n=function(){return t(e.canWrite())};e.waitFirstConnDfd.promise.then(n),r().delay(n,5e3)}))},Q.write=function(e,t,n){return this.connection.write(e,t,n)},Q.canWrite=function(){return this.state===Y},Q.saveAll=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=p.Z.currentProject)&&!n.readOnly){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this.connection.write(y,{p:t}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Q.cursor=function(){var e=(0,o.Z)(l().mark((function e(t,n,i,r,a){var s,o,c=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((s=p.Z.currentProject)&&!s.readOnly){e.next=3;break}return e.abrupt("return");case 3:return o=a?{f:a||!1}:{d:n,l:i.lineNumber,c:i.column},r&&(o.s=r.lineNumber,o.h=r.column),e.abrupt("return",R.Z.waitPendingDocsSaved().then((function(){return c.connection.write(_,{p:t,c:o})})));case 6:case"end":return e.stop()}}),e)})));return function(t,n,i,r,a){return e.apply(this,arguments)}}(),Q.cursors=function(e){var t=this;return this.connection.write(k,{p:e}).then((function(e){return t._processCursors(e)}))},Q.getDocuments=function(){return this.documents};const X=J;var $=null,ee={},te=null,ne=r().debounce(re,2e4,{maxWait:6e4});ne.cursorsCount=0;var ie=null;function re(){if(ie){var e=ie,t=e.projectId,n=e.cursor,i=e.selection,r=e.fileName,a=e.unset;$.cursor(t,r,n,i,a).catch((function(){}))}}ee.detachFile=function(e){return $.detach(e)},ee.attachFile=function(e,t){return $.attach(t,e)},ee.start=function(e,t,n,i){if(r().includes(t,":")){var s=t.split(":");t=s[0]}te={s:i,p:t,a:e,u:n},$=new X(a.Z.get("sharemanServer"),te)},ee.waitConnectionOrTimeout=function(){return $.waitConnectionOrTimeout()},ee.getDocuments=function(){return $.getDocuments()},ee.cursors=function(e){return $.cursors(e)},ee.cursor=function(e){return $.cursor(e)},ee.canWrite=function(){return $.canWrite()},s.Z.subscribe("project:dataUpdate:#projectId",(function(e,t){te.p=t.newProject.pathName,$.updateSession(te)})),s.Z.subscribe("file:editor:cursorActivity",(function(e,t){ie=t,ne()})),s.Z.subscribe("shareman:cursors",(function(e,t){var n;(n=t.length)!==ne.cursorsCount&&(ne.flush(),(ne=n>1?r().debounce(re,400,{maxWait:2e3}):1===n?r().debounce(re,600,{maxWait:4e3}):r().debounce(re,2e4,{maxWait:6e4})).cursorsCount=n)}));const ae=ee},95611:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i,r=n(52308),a=n.n(r),s=n(96486),o=n.n(s),c=n(93443),l=n(49721),u=["terminal","filetree","project-settings","deployment","guides"];function d(e){if(!i)return!1;var t=i.getDocuments();return e?t[e]&&t[e].havePendingChanges():o().some(t,(function(e){return e.havePendingChanges()}))}function p(){return l.Z.currentProject&&i&&!l.Z.currentProject.readOnly?new Promise((function(e){o().delay(e,5e3),o().delay((function(){var t=i.getDocuments(),n=o().map(t,(function(e){return e.submit()}));Promise.all(n).then((function(){i.saveAll(l.Z.currentProject.guid).then(e)}))}),0)})):Promise.resolve()}c.Z.subscribe("editor:saveall",p),c.Z.subscribe("panel:focus:change",(function(e,t){var n=t&&t.activeTab();o().isObject(n)&&o().includes(u,n.extensionName)&&p()})),a()(window).on("blur",p),a()(window).on("beforeunload",(function(){if(d()&&!l.Z.currentProject.deleteProject)return p(),"Changes you made may still be saving -- wait a few seconds and then try again."}));const f={initWithShareman:function(e){i=e},isDirty:d,saveAllAndWait:p,waitPendingDocsSaved:function(){var e=i.getDocuments(),t=o().map(e,(function(e){return e.wait()}));return Promise.all(t)}}},67277:(e,t,n)=>{"use strict";n.d(t,{S:()=>i});var i={ERR_BINARY_FILE:"ERR_BINARY_FILE",ERR_SIZE_LIMIT:"ERR_SIZE_LIMIT"}},56386:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>w});var i=n(52308),r=n.n(i),a=n(96486),s=n.n(a),o=n(177),c=n.n(o),l=n(93443),u=n(97137),d=n(49721),p=n(33468);var f=n(67277),h=c().compile('<div class="ui-blocker-content">\n    <span>{{{message}}}</span>\n</div>'),m=[],g=[],v=!0;l.Z.subscribe("shareman:connect",(function(){v=!0,d.Z.online=!0,b()})),l.Z.subscribe("shareman:disconnect",(function(){d.Z.online&&(d.Z.online=!1,!d.Z.ide.isClosed&&v&&y("There is no connection with the server. Please refresh your browser when your Internet re-connects.",!0))}));var b=function(e){s().forEach(g,(function(e){e.editor.readOnly(e.readOnly)})),g.length=0,d.Z.online&&!p.Z.isMaintenance()&&s().delay((function(){r()("body").unblock(),e||0===r()(".ui-sharejs-critical-error").length||u.Z.info("Connection with the server has been restored.")}),1e3)},y=function(e,t){0===r()(".ui-sharejs-critical-error").length&&(s().forEach(m,(function(e){!function(e){g.push({editor:e,readOnly:e.readOnly()}),e.readOnly(!0)}(e)})),!t&&p.Z.isMaintenance()||r()("body").block({content:r()(h({message:e})),className:"ui-sharejs-critical-error fullscreen"}))};l.Z.subscribe("shareman:error",(function(e,t){var n=[f.S.ERR_BINARY_FILE,f.S.ERR_SIZE_LIMIT,"Project not found","Not allowed.","Missing type","Projects are only available if you have an active subscription"];if(d.Z.currentProject){var i=t.message;if(!s().includes(n,i)){var r="Got error from ACv2.Server.Core: ";s().isString(i)&&0===i.indexOf(r)&&(i=i.substring(33,i.length)),u.Z.error(i)}}}));const w={block:y,unblock:b}},86048:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(96486),r=n.n(i),a={};function s(e,t,n){return r().isString(t.i)?function(e,t,n){return t.p<e||t.p===e&&n?e+t.i.length:e}(e,t,n):function(e,t){return e<=t.p?e:e<=t.p+t.d?t.p:e-t.d}(e,t)}a.apply=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e=r().isString(i.i)?e.slice(0,i.p)+i.i+e.slice(i.p):e.slice(0,i.p)+e.slice(i.p+i.d)}return e},a.transform=function(e,t,n){return r().isString(e.i)?function(e,t,n){return[{i:e.i,p:s(e.p,t,n)}]}(e,t,n):r().isString(t.i)?function(e,t){if(e.p>=t.p)return[{p:s(e.p,t),d:e.d}];if(e.p+e.d<=t.p)return[{d:e.d,p:e.p}];var n=t.p-e.p,i=e.d-n;return[{p:e.p,d:n},{p:t.p+t.i.length-n,d:i}]}(e,t):function(e,t){if(e.p>=t.p+t.d)return[{d:e.d,p:e.p-t.d}];if(e.p+e.d<=t.p)return[{d:e.d,p:e.p}];if(e.p>=t.p&&e.p+e.d<=t.p+t.d)return[];var n=e.p+e.d-(t.p+t.d);return[{p:s(e.p,t),d:n}]}(e,t)},a.isNormalizeError=function(e){return r().includes(e,"need normalize to")};const o=a},9605:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(96486),r=n.n(i),a=n(60989),s=n(20294),o=n(93443).Z.create(n(60936)),c=function(e){this.name=e.name,this.currentBranch=e.currentBranch,this.guid=e.guid,this.description=e.description,this.type=e.type,this.shared=!r().isUndefined(e.shared)&&e.shared,this.recent=!r().isUndefined(e.recent)&&e.recent,this.isPublic=e.is_public,this.isFreePrivate=e.freePrivate,this.isClonable=e.is_box_clonable,this.isAlwaysOn=e.is_box_always_on,e.runMode?this.runMode=e.runMode:this.runMode=0,this.isFork=!r().isUndefined(e.isFork)&&(e.isFork&&!!e.parentProject),this.forks=e.forks,this.branches=e.branches,this.access={control:e["access-control"],context:e.accessContext},this.owner={name:e.owner,id:e.ownerId},this.permissions=e.permissions_v2,this.isAdmin="OWNER"===this.access.control,this.path=[this.ownerName,e.pathName].join("/"),this.slug=e.pathName,this.href="/"+this.path,this.color=s.ZP.getRandomColor(e.guid),this.lastAccess=e.accessTime},l=c.prototype;l.update=function(e){return e.guid=this.guid,a.ZP.ProjectManager.update(e).then((function(e){o.preferencesUpdated({projectId:e.guid})}))},Object.defineProperty(l,"isPrivate",{get:function(){return!this.isPublic}}),Object.defineProperty(l,"ownerName",{get:function(){return r().has(this.owner,"name")?this.owner.name:this.owner}});const u=c},68058:(e,t,n)=>{"use strict";n.d(t,{I_:()=>p,nP:()=>f});var i=n(96486),r=n.n(i),a="AC_LOCAL_STORAGE";function s(e){var t,n;try{n=new Date,(this.storage=window[e+"Storage"]).setItem(n,n),t=this.storage.getItem(n)!==n.toString(),this.storage.removeItem(n),t&&(this.storage=!1)}catch(e){}}var o=s.prototype;o.set=function(e,t){return this.storage.setItem(u(e),l(t))},o.clear=function(){r()(this.storage).filter(d).forEach(this._removeItem)},o.get=function(e){return c(this._getItem(u(e)))},o.remove=function(e){return this._removeItem(u(e))},o._getItem=function(e){return this.storage.getItem(e)},o._removeItem=function(e){this.storage.removeItem(e)};var c=function(e){if(!r().isEmpty(e))try{return JSON.parse(e)}catch(e){}},l=function(e){if(r().isUndefined(e))return"";try{return JSON.stringify(e)}catch(e){}},u=function(e){return a+"-"+e},d=function(e){return 0===e.indexOf(a)},p=new s("local"),f=new s("session")},8246:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(96486),r=n.n(i),a=n(98296),s=n.n(a),o=n(41663),c=n.n(o),l=n(177),u=n.n(l),d=n(11700);n.n(d)()();var p={},f=c().tz.guess();p.registerPartial=function(e,t){u().registerPartial(e,u().compile(t))},u().registerHelper("eachWithIndex",(function(e,t){for(var n="",i=0,r=e.length;i<r;i++){var a=e[i];a.index=i,n+=t.fn(a)}return n})),u().registerHelper("eachObject",(function(e,t){var n="",i=0;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n+=t.fn({items:e[r],_key:r,_index:i++}));return n})),u().registerHelper("exists",(function(e,t){return void 0!==e?t.fn(this):t.inverse(this)})),u().registerHelper("equals",(function(e,t,n){return e===t?n.fn(this):n.inverse(this)})),u().registerHelper("notequals",(function(e,t,n){return e!==t?n.fn(this):n.inverse(this)})),u().registerHelper("tolower",(function(e){return r().isString(e)?e.toLowerCase():""})),u().registerHelper("toupper",(function(e){return r().isString(e)?e.toUpperCase():""})),u().registerHelper("fromNow",(function(e){return s()(e).fromNow()})),u().registerHelper("jsDateToStr",(function(e){if(e)return s()(e).format("Do MMMM YYYY")})),u().registerHelper("codioProject",(function(e){if(e&&-1!==e.indexOf("/")){var t=e.split("/"),n=t.pop(),i=t.join("/")+"/ <strong>"+n+"</strong>";return new(u().SafeString)(i)}return e})),u().registerHelper("formatTimestamp",(function(e,t){return s()(e).format(t)})),u().registerHelper("userTimezoneAbbr",(function(){return s()().tz(s().tz.guess()).format("z")})),u().registerHelper("formatSeconds",(function(e,t){return s()(1e3*e).format(t)})),u().registerHelper("formatDateFullUSWithTz",(function(e){return e?s()(e).format("MMM Do YYYY h:mma (UTC Z)")+" "+f:""})),u().registerHelper("formatDateFullUS",(function(e){return e?s()(e).format("MMM Do YYYY h:mma"):""})),u().registerHelper("dateToLocaleStr",(function(e){return new Date(e).toLocaleString()})),u().registerHelper("origin",(function(){return location.origin})),u().registerHelper("lookup",(function(e,t){return e&&e[t]})),u().registerHelper("add1",(function(e){return e+1})),u().registerHelper("math",(function(e,t,n){return{"+":(e=parseFloat(e))+(n=parseFloat(n)),"-":e-n,"*":e*n,"/":e/n,"%":e%n}[t]})),u().registerHelper("logoImage",(function(e,t,n){var i,a,s;if(r().isEmpty(e)){if(1!==(t=t.trim()).length)if(t.indexOf(" ")>0){var o=t.split(" ");t=o[0][0]+o[1][0]}else t=t[0]+t[1];i='<span class="logoEl">'+t+"</span>"}else 0===e.indexOf("http://")?e=e.replace("http://","//"):0===e.indexOf("https://")&&(e=e.replace("https://","//")),i='<img class="logoEl" src="'+e+'" />';return new(u().SafeString)((a=i,s=["logoImage"],r().isBoolean(n)&&n&&s.push("logoImage--large"),'<div class="'+s.join(" ")+'">'+a+"</div>"))})),u().registerHelper("guidesTemplate",(function(e,t){var n="input-args-"+e,i=u().partials[n];return i?new(u().SafeString)(i(t)):"Partial not loaded"})),u().registerHelper("includes",(function(e,t,n){return r().isString(e)&&r().includes(e,t)?n.fn(this):n.inverse(this)})),u().registerHelper("notIncludes",(function(e,t,n){return r().isString(e)&&r().includes(e,t)?n.inverse(this):n.fn(this)}));const h=p},61170:(e,t,n)=>{"use strict";var i=n(52308),r=n.n(i),a=n(96486),s=n.n(a),o=n(93443),c=o.Z.create(n(86575));function l(){return Date.now()}var u=3e4,d=!!s().isUndefined(document.hasFocus)||document.hasFocus(),p=null,f=!0,h=l(),m=l(),g=function(e){0!==(e=Math.round(e/1e3||0))&&(console.debug("ANALYTICS: [timing] emitting timechunk",e),m=l(),c.timeChunkMsSpent(u>e?e:u))},v=function(){console.debug("ANALYTICS: [timing] interval triggered"),l()-h<=6e5?g(u):(console.debug("ANALYTICS: [timing] INACTIVITY_TIMEOUT has been exceeded!"),f=!1,y())},b=function(){s().isNull(p)&&(p=setInterval(v,u))},y=function(){s().isNull(p)||(clearInterval(p),p=null)},w=function(){h=l(),b()},_=s().debounce(w,1e3,{maxWait:6e4}),k=function(){console.debug("ANALYTICS: [timing] focus"),d=!0,f=!0,m=l(),h=l(),y(),b()},P=function(){console.debug("ANALYTICS: [timing] blur"),d=!1,f&&(y(),f=!1,h=l(),g(l()-m))};d&&b();var Z,x,C=r()(window);C.click(_).keyup(_),void 0!==document.hidden?(Z="hidden",x="visibilitychange"):void 0!==document.msHidden?(Z="msHidden",x="msvisibilitychange"):void 0!==document.webkitHidden&&(Z="webkitHidden",x="webkitvisibilitychange"),void 0===document.addEventListener||void 0===document[Z]?C.focus(k).blur((function(){r()("iframe").is(":focus")||P()})):document.addEventListener(x,(function(){document[Z]?P():k()}),!1),o.Z.subscribe("route:changed",w),o.Z.subscribe("tab:activated",w),o.Z.subscribe("tab:focus",w),o.Z.subscribe("vm:ping",w)},20294:(e,t,n)=>{"use strict";n.d(t,{xD:()=>G,ZP:()=>se,qg:()=>ae,yU:()=>ne,Xm:()=>Q,ED:()=>V,ET:()=>h.Z,z6:()=>re,_v:()=>D,Bd:()=>P});var i=n(15861),r=n(87757),a=n.n(r),s=n(52308),o=n.n(s),c=n(96486),l=n.n(c),u=(n(62102),n(32156)),d=n.n(u),p=n(75121),f=n.n(p),h=n(97373),m=n(25715),g=n.n(m),v=n(98296),b=n.n(v),y=n(41663),w=n.n(y),_=n(79791),k={startsWith:function(e,t){return e.substr(0,t.length)===t},escapeColon:function(e){return l().isString(e)?e.replace(/:/g,"\\:"):e},bold:function(e){return"<b>"+e+"</b>"}};const P=k;var Z=n(18356),x=n.n(Z),C=n(65236),S=n(97137),E=Date.now(),I=6e4,T=function(e){var t=Date.now(),n=t-E;return(e||n<I)&&(E=t),n},j=function(e){return T(e)>I};if(window.Worker){var A=function(){setInterval((function(){postMessage({})}),1e4)}.toString();A=A.substring(A.indexOf("{")+1,A.lastIndexOf("}"));var O=new Blob([A],{type:"application/javascript"});new Worker(URL.createObjectURL(O)).onmessage=function(){T()}}else window.setInterval(T,1e4),o()(window).on("focus",(function(){j(!0)}));const D={SLEEP_DETECT_TIMEOUT:I,wasSleep:j,wasSleepTimer:T};var N=n(54565),M=n(42982),F={PENDING:"pending",FULFILLED:"fulfilled",REJECTED:"rejected"},R=function(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return{resolve:e,reject:t,promise:n}};const L={STATES:F,getState:function(e){var t={};return Promise.race([e,t]).then((function(e){return e===t?F.PENDING:F.FULFILLED})).catch((function(){return F.REJECTED}))},deferred:R,defer:function(e){return new Promise((function(t){l().defer((function(){return t(e)}))}))},iterateAsync:function(e,t){return l().reduce(e,(function(e,n,i){return e.then((function(){return t(n,i)}))}),Promise.resolve()).then((function(){}))},delay:function(e,t){return new Promise((function(n){l().delay((function(){return n(t)}),e)}))},allSeries:function(e){if(!e.length)return Promise.resolve();var t=0,n=function(){var r=(0,i.Z)(a().mark((function i(){return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e[t];case 2:if(!((t+=1)>=e.length)){i.next=5;break}return i.abrupt("return");case 5:return i.abrupt("return",n());case 6:case"end":return i.stop()}}),i)})));return function(){return r.apply(this,arguments)}}();return n()},mapSeries:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e.length)return Promise.resolve();var i=R(),r=[];return function e(a){var s=a.slice(0,n),o=l().map(s,t);Promise.all(o).then((function(t){r.push.apply(r,(0,M.Z)(t));var s=a.slice(n);s.length?e(s):i.resolve(r)})).catch((function(e){return i.reject(e)}))}((0,M.Z)(e)),i.promise}};const U={checkErrorForIgnore:function(e){e.ignore||e.message&&S.Z.error(e.message)}};var B=new(x()),q=w().tz.guess(),H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",W=new RegExp("(/|\\\\|\\|\\?|'|%|\\*|<|>|\")","i");var z={youtubeLinkRegex:"(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?",path:h.Z,url:g(),markdown:_.ZP,str:P},G=(z.getURLParameter=function(e){return z.getURLParameterFromString(location.search.replace(/^\?/,""),e)},z.getURLParameterFromString=function(e,t){var n=B.parseQueryString(e);return l().isUndefined(n[t])?null:n[t]},z.encode64=function(e){var t,n,i,r,a,s,o,c="",l=0;for(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}(e);l<e.length;)r=(t=e.charCodeAt(l++))>>2,a=(3&t)<<4|(n=e.charCodeAt(l++))>>4,s=(15&n)<<2|(i=e.charCodeAt(l++))>>6,o=63&i,isNaN(n)?s=o=64:isNaN(i)&&(o=64),c=c+H.charAt(r)+H.charAt(a)+H.charAt(s)+H.charAt(o);return c},z.decode64=function(e){var t,n,i,r,a,s,o="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=H.indexOf(e.charAt(c++))<<2|(r=H.indexOf(e.charAt(c++)))>>4,n=(15&r)<<4|(a=H.indexOf(e.charAt(c++)))>>2,i=(3&a)<<6|(s=H.indexOf(e.charAt(c++))),o+=String.fromCharCode(t),64!==a&&(o+=String.fromCharCode(n)),64!==s&&(o+=String.fromCharCode(i));return function(e){var t,n,i,r="",a=0;for(t=n=0;a<e.length;)(t=e.charCodeAt(a))<128?(r+=String.fromCharCode(t),a++):t>191&&t<224?(n=e.charCodeAt(a+1),r+=String.fromCharCode((31&t)<<6|63&n),a+=2):(n=e.charCodeAt(a+1),i=e.charCodeAt(a+2),r+=String.fromCharCode((15&t)<<12|(63&n)<<6|63&i),a+=3);return r}(o)},z.arrayBufferToBase64=function(e){return btoa(new Uint8Array(e).reduce((function(e,t){return e+String.fromCharCode(t)}),""))},z.XML2JSON=function(e){var t={};try{t=o().xml2json(e)}catch(e){}return t},z.GUID=function(e){function t(){var e=Math.floor(65536*Math.random()).toString(16),t="0000";return t.substring(0,4-e.length)+e}if(e){for(var n=t(),i=0;i<e;i++)n+="-"+t();return n+""}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}),V=(z.addErrorToInput=function(e,t){var n=(e=o()(e)).attr("title");e.prop("invalid",!0),e.data("inputErrorCallback")&&e.data("inputErrorCallback")(),!t&&(t={}),o().isPlainObject(t)||(!t&&(t=""),t={title:t});var i='<div class="input-error"><i class="ss-icon error">alert</i>'+t.title+"</div>",r=e.parents(".control-group");0===r.length&&0===(r=e.parents("fieldset")).length&&(r=e.parent()),r.addClass("error");var a=o()(i);i=a.attr("title",t.title);var s=!1!==t.toEnd?"after":"before",c=t.events||["keyup","blur","change"];function u(i){i&&13===i.keyCode||(r.removeClass("error"),a.remove(),a=null,t.cm?l().each(c,(function(e){t.cm.off(e,u)})):e.unbind(c,u),e.data("inputErrorCallback",null),e.prop("invalid",!1),n?e.attr("title",n):e.removeAttr("title"),e.removeClass("no-icon-error input-error-border"))}t.cm||(l().each(c,(function(e,t){c[t]=e+".errorInput"})),c=c.join(" ")),t.noIcon?(e.addClass("no-icon-error"),e.attr("title",t.title)):t.showErrorOn?t.showErrorOn[s](i):t.append?r.append(i):"after"===s&&e.data("selectize")?(i.addClass("input-error-selectized"),e.data("selectize").$wrapper.after(i)):e[s](i),e.addClass("input-error-border"),t.cm?l().each(c,(function(e){t.cm.on(e,u)})):e.one(c,u),e.data("inputErrorCallback",u),t.noFocus||(t.cm?t.cm.focus():e.focus())},z.validateEmail=function(e){return new RegExp("[\\w\\.+]{1,}[@][\\w\\-]{1,}([.]([\\w\\-]{1,})){1,5}$","ig").test(e)},z.validateMandatory=function(e){return o().trim(e).length>0},z.validateUsername=function(e){return e.replace(/[^a-z0-9\-]+/gi)===e},z.isProjectNameNotValid=function(e){var t;return e?e.length>80&&(t="Project name is too long and cannot be more than 80 characters"):t="Name cannot be empty",t},z.isNameNotValid=function(e){var t;return e?/[^a-z0-9A-Z-_ \.]+/gi.test(e)?t="Name contains invalid characters":e.length>80&&(t="Name is too long and cannot be more than 80 characters"):t="Name cannot be empty",t},z.isItemNameValid=function(e){return null!=e&&""!==e&&!W.test(e)},z.os=function(){var e=navigator.platform.toLowerCase();return-1!==e.indexOf("mac")?"mac":-1!==e.indexOf("win")?"windows":-1!==e.indexOf("linux")?"linux":"unknown"},z.formatKey=function(e){return"mac"===z.os()&&(e=e.replace(/Ctrl/g,"<i>^</i>").replace(/Cmd/g,"<i>⌘</i>").replace(/Shift/g,"<i>⇧</i>").replace(/Alt/g,"<i>⌥</i>")),e},z.formatCommand=function(e){var t=e.indexOf("+")>-1?"+":"-",n=e.split(t);return l().reduce(n,(function(e,t){return e.push(z.formatKey(t)),e}),[]).join("mac"===z.os()?"":"+")},z.inherit=function(e,t){function n(){}n.prototype=t&&t.prototype,e.prototype=new n,e._sc=t.prototype,e._sc.constructor=t}),K=(z.equalNames=function(e,t){return e.toLowerCase()===t.toLowerCase()},z.truncate=function(e,t){var n=e;return n&&t>0&&e.length>t&&(n=o().trim(e).substring(0,t).trim(this)+"..."),n||""},document.createTextNode("test")),Y=document.createElement("span");Y.appendChild(K);z.safeHtml=function(e){return K.nodeValue=e,Y.innerHTML},z.validateHostname=function(e){return!(!/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])(:\d{1,5})*$/.test(e)&&!/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(:\d{1,5})*$/.test(e))},z.isDirectoryUploadSupport=function(){var e=navigator.userAgent.toLowerCase();return/webkit/.test(e)&&/chrome/.test(e)},z.getOrg=function(e){if(0!==e.indexOf("/home/orgs/"))throw new Error("Not an applicable path");return e.split("/")[3]},z.getTeam=function(e){var t=e.split("/");if(0!==e.indexOf("/home/orgs/")||"teams"!==t[4])throw new Error("Not an applicable path");return t[5]},z.showFastFade=function(e,t){var n=L.deferred(),i=o()(e).css("display");return o()(e).css("display","none"),o()(e).append(t),o()(e).velocity("fadeIn",{duration:200,display:i,complete:function(){n.resolve(t)}}),n.promise},z.hideFastFade=function(e,t){var n=L.deferred();return e?t?o()(e).velocity("fadeOut",{duration:t,complete:function(){n.resolve()}}):n.resolve():n.reject(new Error("Container not passed")),n.promise},z.getRandomColor=function(e){return"#"+f()(e).slice(0,6)},z.getVal=function(e,t,n){var i,r=e.find('[name="'+t+'"]');if("date"===n){var a=r.data("datepicker");if(!(a=a||r.parent().data("datepicker")))return;if(i=a.getDate(),isNaN(i.getTime()))return}else i=r.val();return i},z.realName=function(e){return l().isString(e)?e.replace(/\uFF0E/g,".").replace(/\uFF04/g,"$"):e},z.mongoName=function(e){return l().isString(e)?e.replace(/\./g,"．").replace(/\$/g,"＄"):e},z.redirect=function(e,t){return{enter:function(n){n.urlParams&&(t=t+"?"+o().param(n.urlParams)),e.router.redirectTo(t)}}},z.toHTML=function(e){return z.markdown.render(e,{breaks:!0,sanitize:!0,smartLists:!0,allowedTags:"iframe|br",highlight:C.Z}).catch((function(e){console.error(e),S.Z.error("Unable to parse and render markdown")}))},z.hashCode=function(e,t,n){var i,r,a=void 0===n?2166136261:n;for(i=0,r=(e=l().isString(e)?e:"").length;i<r;i++)a^=e.charCodeAt(i),a+=(a<<1)+(a<<4)+(a<<7)+(a<<8)+(a<<24);return t?("0000000"+(a>>>0).toString(16)).substr(-8):a>>>0};function J(e){if(!e){S.Z.info("All available Giga box slots are currently in use. Your project will run on the standard plan limits")}}z.checkGigaBoxStatusOnStart=function(e,t){if(e.gigaBoxSlot){var n=e.start_container_task_id;t.GigaBoxesManager.isSlotOfferedOnStart(n,e.guid).then(J)}},z.checkGigaBoxStatus=function(e,t){e.gigaBoxSlot&&t.GigaBoxesManager.isSlotOffered(e.guid).then(J)};var Q=function(e){var t=document.referrer&&document.referrer.match(/https?:\/\/([^\/]+)\/?([^\/]+)?/),n=t&&t[1]||"",i=t&&t[2]||"home";return n===location.hostname&&"home"===i?document.referrer:e};z.getBackToDashboardUrl=Q;z.goBackOrLocation=function(e){location.assign(Q(e))},z.dropHelper=function(e){return function(t,n,i){var r=h.Z.isImage(i.path,i.type);if(r){var a=e(i);t.replaceRange(a+"\n",i.position,i.position)}return r}};function X(e){if(e.disabled||!o()(e).is(":visible"))return!1;var t=e.getAttribute("aria-hidden");if(!0===t||"true"===t)return!1;if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}z.hasWebpSupport=l().once((function(){return new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=function(){e(2===t.height)}}))}));var $=null,ee=[];function te(e,t){var n=null;return(t?l().forEachRight:l().each)(e,(function(e){if(n=X(e)?e:te(o()(e).children(),t))return!1})),n}z.trapFocus=function(e,t,n){if(ee.length&&ee[ee.length-1].html===t)if(o()(n.target).closest(e).length)$=n.target;else{if(!X(n.target))return;var i=te(t.find(e));i&&($===i&&(i=te(t.find(e),!0)),i&&o()(i).focus())}},z.addTrapFocus=function(e,t){var n=l().debounce(z.trapFocus.bind(null,e,t),500);return document.addEventListener("focus",n,!0),ee.push({trapFunction:n,html:t}),n},z.removeTrapFocus=function(e){e&&e.cancel&&e.cancel(),e&&document.removeEventListener("focus",e,!0),ee=l().remove(ee,(function(t){return t.trapFunction===e}))};z.findFocusable=te,z.KeyCode={TAB:9,RETURN:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,HOME:36,END:35,ZERO:48,PLUS:107,NUMPAD0:96,PAGE_UP:33,PAGE_DOWN:34};var ne=z.formatDateFullUS=function(e){return e?b()(e).format("MMM Do YYYY h:mma (UTC Z)")+" "+q:""},ie=(z.formatDateFullUSWithoutTZ=function(e){return e?b()(e).format("MMM Do YYYY h:mma"):""},z.isIframe=function(){try{return window.self!==window.top}catch(e){return!0}},z.fullscreenSupport=function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled},z.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},z.toggleIframeFullscreen=function(){if(z.getFullscreenElement())document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else{var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},z.b64EncodeUnicode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))},z.b64DecodeUnicode=function(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},z.renderFeedback=function(e,t){return 3===t?Promise.resolve(d()(e,{allowedTags:d().defaults.allowedTags.concat(["h1","h2","img","span","p","pre","details","summary"]),allowedAttributes:{"*":["style"]},allowedStyles:{"*":{color:[/^#(0x)?[0-9a-f]+$/i,/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/],"background-color":[/^#(0x)?[0-9a-f]+$/i,/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/],"text-align":[/^left$/,/^right$/,/^center$/],"font-size":[/^\d+(?:px|em|%)$/]}}})):2===t?z.toHTML(e):Promise.resolve(l().map(e.split("\n"),(function(e){return e=l().escape(e),"<p>".concat(e,"</p>")})).join(""))},z.waitAddress=function(){var e=(0,i.Z)(a().mark((function e(t,n){var i,r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 3e4,i=500,r=z.url.parse(t),l().isUndefined(n)&&(n=L.deferred(),l().delay(n.resolve,3e4,t)),c=void 0,c=(a=t).split(".",1)[0],l().includes(a,N.Z.get("boxDomain"))&&c.split("-").length>2||n.resolve(t),s="//"+r.hostname+"/codio_is_alive_check",e.next=8,L.getState(n.promise);case 8:return e.sent!==L.STATES.FULFILLED&&o().ajax(s).fail((function(){l().delay(ie,i,t,n)})).done((function(){n.resolve(t)})),e.abrupt("return",n.promise);case 11:case"end":return e.stop()}var a,c}),e)})));return function(t,n){return e.apply(this,arguments)}}()),re=function(e){return e&&e.replace(/\s+/g,"")};function ae(e){return(e=l().trim(e)).replace(/^\/+/,"")}z.sleep=D,z.getProjectIdeUrl=function(e){var t=e.projectId,n=e.ownerSlug,i=e.projectSlug;return n?"/".concat(n,"/").concat(i):"/projects/".concat(t)},z.promise=L,z.error=U;const se=z},38299:(e,t,n)=>{"use strict";n.d(t,{y:()=>a});var i=n(52308),r=n.n(i),a=function(e){e.find("img.svg").each((function(){var e=r()(this),t=e.attr("id"),n=e.attr("class"),i=e.attr("src"),a=e.attr("viewBox");r().get(i,(function(i){var s=r()(i).find("svg");void 0!==t&&(s=s.attr("id",t)),void 0!==n&&(s=s.attr("class",n+" replaced-svg")),s=(s=s.removeAttr("xmlns:a")).attr("viewBox",a),e.replaceWith(s)}),"xml")}))}},79791:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>Z,xh:()=>P});var i=n(15861),r=n(87757),a=n.n(r),s=n(52308),o=n.n(s),c=n(96486),l=n.n(c),u=n(68212),d=n(96906),p=n.n(d),f=n(49721),h=n(20294),m=n(65236),g="-hide-clipboard",v=function(e){var t=o()(e);return t.find("img.raw-image").each((function(){var e=o()(this);f.Z.currentProject.getImageDataURI(e.attr("src")).then((function(t){e.attr("src",t)})).catch((function(){}))})),t.find("a").each((function(){"#"===o()(this).attr("href")[0]||o()(this).attr("target","_blank")})),t};function b(e,t){if("image"===e[t].type){var n=e[t].src,i=e[t].title,r=e[t].alt,a=n.match(new RegExp(h.ZP.youtubeLinkRegex));if(a){var s=r&&r.match(/(\d+)\s*x\s*(\d+)/),o=s&&s[1]||640,c=s&&s[2]||480;return['<iframe allowFullScreen="allowFullScreen" src="//www.youtube.com/embed/',a[1],'?wmode=opaque"',' width="',o,'"',' height="',c,'"',' frameborder="0"></iframe>'].join("")}return n.match(/^http(s)?:\/\//)?['<img src="',l().escape(n),'" alt="',l().escape(r),'"',i?' title="'+l().escape(i)+'"':"",' class="guides-image"',">"].join(""):['<img src="',l().escape(n),'" alt="',l().escape(r),'"',i?' title="'+l().escape(i)+'"':"",' class="raw-image guides-image"',">"].join("")}}function y(e,t,n,i,r){if("code"===e[t].type){if(e[t].block){var a=l().uniqueId("code-"),s='<span class="btn-clipboard" title="Copy to clipboard"'+'data-clipboard-target="#'.concat(a,'"></span>');return'<div class="code-block">'.concat(s,'<pre><code id="').concat(a,'">')+"".concat(u.utils.escapeHtml(e[t].content),"</code></pre></div>").concat(r.getBreak(e,t))}return"<code>"+u.utils.escapeHtml(e[t].content)+"</code>"}}function w(e,t,n,i,r){if("fence"===e[t].type){var a,s,o,c=e[t],d="",p=n.langPrefix,f="",h=!1;if(c.params){if(s=(a=c.params.split(/\s+/g)).join(" "),u.utils.has(r.rules.fence_custom,a[0]))return r.rules.fence_custom[a[0]](e,t,n,i,r);l().includes(s,g)&&(h=!0,s=s.replace(g,"")),f=u.utils.escapeHtml(u.utils.replaceEntities(u.utils.unescapeMd(s))),d=' class="'.concat(p).concat(f,'"')}o=n.highlight&&n.highlight.apply(n.highlight,[c.content].concat(f.trim()))||u.utils.escapeHtml(c.content);var m=l().uniqueId("code-"),v=h?"":'<span class="btn-clipboard" title="Copy to clipboard"'+'data-clipboard-target="#'.concat(m,'"></span>');return'<div class="code-block">'.concat(v,'<pre><code id="').concat(m,'" ').concat(d,">").concat(o)+"</code></pre></div>".concat(r.getBreak(e,t))}}function _(e){e.renderer.rules.paragraph_open=function(e,t,n){return e[t].lines&&0===e[t].level?n.noDataLine?"<p>":'<p class="codio-md-line" data-line="'+e[t].lines[0]+'">':e[t].tight?"":"<p>"},e.renderer.rules.heading_open=function(e,t){var n;return e[t].lines&&0===e[t].level?(n=e[t].lines[0],"<h"+e[t].hLevel+' class="codio-md-line" data-line="'+n+'">'):"<h"+e[t].hLevel+">"}}function k(e,t){return l().isArray(e)||(e=[e]),function(){var n,i=[].slice.call(arguments);return l().each(e,(function(e){if(n=e.apply(null,i),!l().isUndefined(n))return!1})),l().isUndefined(n)?t.apply(null,i):n}}var P=function(e,t,n,i){t=l().defaults(t,{html:!1,xhtmlOut:!1,breaks:!0,typographer:!0,highlight:m.Z});var r=new u.Remarkable("full",t);n=n||[],l().isArray(n)||(n=[n]),n.push(b),n.push(y),n.push(w),r.renderer.rules.image=k(n,r.renderer.rules.image.bind(r.renderer)),r.renderer.rules.code=k(n,r.renderer.rules.code.bind(r.renderer)),r.renderer.rules.fence=k(n,r.renderer.rules.fence.bind(r.renderer)),r.use(p()),r.use(_),r.use(u.linkify),i=i||[],l().each(i,(function(e){r.use(e,t)})),!1===t.footnote?(r.block.ruler.disable(["footnote"]),r.inline.ruler.disable(["footnote_inline"])):r.renderer.rules.footnote_ref=function(e,t){var n=Number(e[t].id+1).toString(),i="fnref"+n;return e[t].subId>0&&(i+=":"+e[t].subId),'<sup class="footnote-ref"><a href="#fn'+n+'" id="'+i+'" class="footnote-ref-link">['+n+"]</a></sup>"};var a=r.render(e);return!0!==t.asString&&(a=v(a)),a};const Z={convertExternalLinks:v,isReadme:function(e){var t=e&&e.toLowerCase();return"readme.md"===t||"readme.markdown"===t},render:function(){var e=(0,i.Z)(a().mark((function e(t,n,i,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P(t,n,i,r));case 1:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}()}},97373:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(96486),r=n.n(i),a="/",s={},o=["png","apng","avif","gif","jpg","jpeg","jfif","pjpeg","pjp","svg","webp","bmp","ico","cur","tif","tiff"];s.parse=function(e){var t=e.split(a),n={name:t.pop(),dir:t.join(a)};return n.extension=s.getFileExtension(n.name),n},s.escape=function(e){return(e||"").replace(/[^a-z0-9]/gi,"-")},s.getFileExtension=function(e){var t=e.lastIndexOf(".");return(t<0?"":e.substring(t+1)).toLowerCase()},s.getFileName=function(e){var t=e.lastIndexOf(".");return t<0?e:e.substring(0,t)},s.makePath=function(e,t){return e?e+"/"+t:t},s.join=function(){return r().map(arguments,(function(e){if(function(e){if(!r().isString(e))throw new TypeError("Arguments to path.join must be strings");return e}(e))return(e=e.replace(/^\//,"")).indexOf("//")!==e.length-2&&(e=e.replace(/\/$/,"")),e})).join(a)},s.replaceProjectName=function(e,t){var n=e.indexOf("/home/projects")>-1,i=e.split(a),r=n?3:2;return i.length>r&&(i[r]=this.escape(t).toLowerCase()),i.join(a)},s.isImage=function(e,t){var n=r().toLower(e);return r().some(o,(function(e){return r().endsWith(n,e)}))&&"dir"!==t};const c=s},44952:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(15861),r=n(87757),a=n.n(r),s=n(96486),o=n.n(s),c=n(97373),l=n(44442),u=n(49721),d=n(54565),p=n(93443),f={interpolate:/{{([\s\S]+?)}}/g},h=null;function m(){return(m=(0,i.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.Z.ide.panels.focus&&u.Z.ide.panels.focus.activeTab()){e.next=3;break}return e.abrupt("return");case 3:if(!o().includes(["tutorial","tour"],t.extensionName)){e.next=5;break}return e.abrupt("return",t.extension.then((function(e){return e.filename})));case 5:return e.abrupt("return",t.filename);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}p.Z.subscribe("filetree:select:#file",(function(e){h=e.file}));const g={interpolate:function(e){return function(){return m.apply(this,arguments)}().then((function(t){return function(e,t){var n=u.Z.currentProject;t&&n.exists(t)||(t=null!==h?h:"");var i=c.Z.parse(t),r=l.Z.get("preview"),a="";r&&!o().isUndefined(r.index_file)&&(a=r.index_file);var s={filepath:t,path:i.dir,filename:i.name,filename_no_ext:c.Z.getFileName(i.name),domain:n.backendDomain,index:a};return function(e,t,n){for(var i=80;i<1e4;i++)e["domain"+i]=[t,"-",i,".",n].join("")}(s,n.backendSubDomain,d.Z.get("boxDomain")),o().template(e,f)(s)}(e,t)})).catch((function(){return e}))}}},70199:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(96486),r=n.n(i),a=n(33105),s=function(){this.uid="details",this.details=[]},o=s.prototype;o.init=function(e){e&&(this.details=e)},o.get=function(e){return this.details[e]},o.getName=function(){return this.details.actual_name||this.details.name},o.set=function(e,t){this.details[e]=t},o.clean=function(){this.details=[]},o.getData=function(){return this.details};const c=s;var l=function(){this.uid="projects",this.accountProjects=[]},u=l.prototype;u.init=function(e){e&&(this.accountProjects=e)},u.clean=function(){this.accountProjects=[]},u.projects=function(){return this.accountProjects},u.getData=function(){return this.accountProjects};const d=l;var p=function(){this.uid="ide-settings",this.ideSettings={}},f=p.prototype;f.init=function(e){e&&(this.ideSettings=e)},f.get=function(e){return this.ideSettings[e]},f.set=function(e,t){this.ideSettings[e]=t},f.getEditorSettings=function(){return this.ideSettings["code-editor-settings"]||{}},f.setEditorSettings=function(e){this.ideSettings["code-editor-settings"]=e},f.getData=function(){return this.ideSettings};const h=p;var m=function(){this.uid="userSettings",this.settings={}},g=m.prototype;g.init=function(e){e&&(this.settings=e)},g.get=function(e){return this.settings[e]},g.set=function(e,t){this.settings[e]=t},g.clean=function(){this.settings={}},g.getData=function(){return this.settings};var v=["groups","openedFileSessions","subscription"],b={details:c,projects:d,"ide-settings":h,userSettings:m};var y=function(e){this.account={},this.processors={};var t=this;e.account&&(t.account=e.account),e.projectCount&&(t.projectCount=e.projectCount),e.privateAccess&&(t.privateAccess=e.privateAccess),this.incognitoLogin=!!e.incognitoLogin,e&&(r().forOwn(b,(function(n,i){var a=new n;a.init&&!r().includes(v,i)&&a&&a.init(e[i]),t.set(i,a)})),r().forEach(v,(function(n){t.set(n,e[n])}))),e.ipConsents&&(t.ipConsents=e.ipConsents),e.customScripts&&(t.customScripts=e.customScripts)},w=y.prototype;w.get=function(e){return this.processors[e]},w.set=function(e,t){this.processors[e]=t},w.getAccountUid=function(){return this.account},w.hasPrivateAccess=function(){return this.privateAccess},w.isInTrial=function(){var e=this.get("details").get("trialExpirationTimestamp");return e&&(new Date).getTime()<e},w.isDummy=function(){var e=this.get("details");return e&&!0===e.get("is_dummy")},w.isAnonymous=function(){var e=this.get("details");return!e||"anon"===e.get("name")},w.isSuspended=function(){var e=this.get("details");return!(!e||!0!==e.get("is_suspended"))},w.isStaff=function(){var e=this.get("details");return e&&e.get("is_staff")},w.name=function(){var e=this.get("details");return e?e.get("name"):""},w.slug=function(){var e=this.get("details");return e?e.get("lowerName"):""},w.displayName=function(){var e=this.get("details");if(e){var t=e.get("actual_name"),n=e.get("firstName"),i=e.get("lastName");return t&&t.trim()||n&&i&&r().compact([n,i]).join(" ").trim()||this.name()}return""},w.saveSection=function(e,t){var n;n=this.processors[e].getData?this.processors[e].getData():this.processors[e],a.Z.apiRequest({object:"AccountManager",method:"save",data:{section:e,content:n},callback:function(e){!function(e,t){t&&t(e)}(e,t)}})},w.updatePassword=function(e,t){a.Z.apiRequest({object:"AccountManager",method:"updatePassword",data:{password:e},callback:function(e){t&&t(!e.error)}})};const _=y},71970:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var i=n(15861),r=n(42982),a=n(15671),s=n(43144),o=n(4942),c=n(87757),l=n.n(c),u=n(96486),d=n.n(u),p=n(15094),f=n(49721),h=n(93443),m=n(20294),g=n(87167),v=n(28755),b=n(58471),y=n(44442),w=n(12953);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=h.Z.create(v),Z={error:8,warning:4};const x=function(){function e(){(0,a.Z)(this,e);var t=this.constructor.instance;if(t)return t;this.constructor.instance=this,this._init()}return(0,s.Z)(e,[{key:"_init",value:function(){h.Z.subscribe("settings:loaded",this._onSettingsLoaded.bind(this))}},{key:"_enableLSP",value:function(){this._createProviders(),this._bindEditorEvents()}},{key:"_convertRange",value:function(e){return{endLineNumber:e.end.line+1,endColumn:e.end.character+1,startLineNumber:e.start.line+1,startColumn:e.start.character+1}}},{key:"_prepareAnnotation",value:function(e,t,n){var i=this;if(!t.textEdit){for(var r=t.insertText||t.label,a=/[\w$]+/,s=e.startColumn;s>1&&a.test(n.charAt(s-2));)--s;return e.startColumn=s,k(k({},t),{},{range:e,insertText:r})}var o,c=t.textEdit;o=c.range?this._convertRange(c.range):c.replace?this._convertRange(c.replace):c.insert?this._convertRange(c.insert):e,delete t.textEdit;var l=t.additionalTextEdits?d().map(t.additionalTextEdits,(function(e){return{text:e.newText,range:i._convertRange(e.range)}})):void 0;return k(k({},t),{},{range:o,insertText:c.newText,additionalTextEdits:l})}},{key:"_commonCompletionProviderCallback",value:function(){var e=this;return this._editor?new Promise((function(t){var n=e._editor.editor().getPosition(),i=e._editor.model().getLineContent(n.lineNumber);P.hint({position:n,cb:function(r){if(r&&0!==r.length){var a=g.Zo.e6.fromPositions(n,n),s=d().map(r,(function(t){return e._prepareAnnotation(a,t,i)}));t({suggestions:s})}else t(null)},fileName:e._editor?e._editor.fileName:"",curLine:i})})):null}},{key:"_commonHoverProviderCallback",value:function(e,t){var n=this;return this._editor?new Promise((function(e){P.hover({position:t,cb:function(t){if(Array.isArray(t)){var n=t.map((function(e){return e.value?{value:e.value}:{value:e}})).filter((function(e){return!!e}));e({contents:n})}else e({value:t})},fileName:n._editor?n._editor.fileName:""})})):null}},{key:"_createProviders",value:function(){var e=this,t=w.B.map((function(t){return g.Zo.SQ.registerCompletionItemProvider(t,["."],e._commonCompletionProviderCallback.bind(e))})),n=w.B.map((function(t){return g.Zo.SQ.registerHoverProvider(t,e._commonHoverProviderCallback.bind(e))}));this._providers=[].concat((0,r.Z)(t),(0,r.Z)(n))}},{key:"_prepareDiagnostics",value:function(e){return e.map((function(e){return{startLineNumber:e.from.lineNumber,startColumn:e.from.column,endLineNumber:e.to.lineNumber,endColumn:e.to.column,message:e.message,severity:Z[e.severity]}}))}},{key:"_runValidate",value:function(){var e=this;if(this._editor.model()&&!this._editor.model().isDisposed()){var t=this._editor.model().getValue();0!==t.length?P.lint({text:t,cb:function(t){var n=e._prepareDiagnostics(t);e._editor&&e._editor.editor().setModelMarkers("LSP",n)},fileName:this._editor.fileName}):this._cleanDiagnostics()}else this._cleanDiagnostics()}},{key:"_bindEditorEvents",value:function(){var e=d().debounce(this._runValidate.bind(this),500,{maxWait:1e4});this._unbindEditorEvents(),this._editor&&(this._onChangeContentDisposable=this._editor.editor().onDidChangeModelContent(e),this._updateDiagnosticsHandler=h.Z.subscribe("lsp:diagnostics:updated:".concat(this._editor.fileName),this._runValidate.bind(this)))}},{key:"_unbindEditorEvents",value:function(){this._updateDiagnosticsHandler&&h.Z.unsubscribe(this._updateDiagnosticsHandler),this._onChangeContentDisposable&&this._onChangeContentDisposable.dispose(),this._onChangeContentDisposable=null}},{key:"_disableLSP",value:function(){d().each(this._providers,(function(e){return e.dispose()})),this._unbindEditorEvents()}},{key:"_onSettingsLoaded",value:function(){var e=this;y.Z.get("codio-lsp").enable_lsp_support&&this._enableLSP(),h.Z.subscribe("settings:changed",(function(){var t=y.Z.get("codio-lsp").enable_lsp_support;t&&!e._providers?e._enableLSP():!t&&e._providers&&e._disableLSP()}))}},{key:"_cleanDiagnostics",value:function(){g.Zo.ML.removeAllMarkers("LSP")}},{key:"setEditor",value:function(e){this._cleanDiagnostics(),this._editor=e;var t=y.Z.get("codio-lsp").enable_lsp_support;this._unbindEditorEvents(),t&&this._bindEditorEvents()}}]),e}();h.Z.subscribe("file:editor:focus",(function(e,t){f.Z.currentEditor=t})),h.Z.subscribe("file:editor:out",(function(){f.Z.currentEditor=null}));var C=h.Z.create(v),S=new x;const E=function(){function e(t){var n=this;(0,a.Z)(this,e),(0,o.Z)(this,"_showLineBreaksDialog",(function(){return new Promise((function(e,t){var i=!1;n.wnd=b.Z.showConfirm({title:"Mixed line endings",doNotCloseOpened:!0,description:"<p>The file you are opening(<code>"+n.fileName+'</code>) contains mixed line endings, which can cause problems when editing your code and using source control management. We strongly recommend that you use Linux line endings only, as this will avoid problems.</p><p>Would you like us to change the line endings in this file for you? If you choose "No", the file will be opened in read-only mode.</p>',onHide:function(){n.wnd=null,i?e():t(new Error("Mixed line endings. RO mode"))},onClose:function(e){i=!!e}})}))})),this._options=t;var i=t.fileContent;if(d().isUndefined(t.readOnly)?this._readOnly=f.Z.currentProject&&f.Z.currentProject.readOnly:this._readOnly=t.readOnly,i instanceof p.Z)this._model=i.model;else if(i instanceof g.yO)this._model=i;else if(d().isString(i)){var r=g.Zo.Hn.detectLanguage(i,t.fileName);this._model=new g.yO(i,r)}t.language&&g.Zo.ML.setModelLanguage(this._model,t.language),this._highlight=t.highlight,this.fileName=t.filename,this._lspSupport=!0,this._container=t.container,this._handlerFilePropUpdatedId=h.Z.subscribe("file:prop:updated:"+this.fileName,(function(){var e=f.Z.currentProject;n._model.nonUnixLineBreaks?n.readOnly(!0):n._model&&e&&!e.readOnly&&n.readOnly(!1)})),this._cursorMarkers={widgets:[],decorations:[]},this._cursorPositionHandler=h.Z.subscribe("shareman:cursors",(function(e,t){n._cleanCursorMarkers(),d().each(t,(function(e){return n.drawPresence(e)}))})),h.Z.subscribe("shareman:connect",(function(){n._editor&&n._editor.setOption("readOnly",n._readOnly)})),h.Z.subscribe("shareman:disconnect",(function(){n._editor&&n._editor.setOption("readOnly",!0)})),h.Z.subscribe("project:permissionsUpdated:#projectId",(function(){if(f.Z.currentProject){var e=f.Z.currentProject.access.control;n._readOnly=!(d().includes(["OWNER","ADMIN","WRITE_FILES"],e)&&!f.Z.currentProject.isReadOnly),n._editor&&n.readOnly(n._readOnly)}})),h.Z.subscribe("collaboration:setReadOnlyForNavigator",(function(e,t){n._editor&&n.readOnly(t)})),this._debouncedChanges=d().debounce((function(){return n._editorCursorActivity()}),500,{maxWait:1e4}),C.open(this)}var t;return(0,s.Z)(e,[{key:"lspSupport",get:function(){return this._lspSupport}},{key:"_cleanCursorMarkers",value:function(){var e=this;this._editor&&(d().each(this._cursorMarkers.widgets,(function(t){return e._editor.removeContentWidget(t)})),this._cursorMarkers.decorations&&this._editor.deltaDecorations(this._cursorMarkers.decorations,[])),this._cursorMarkers={widgets:[],decorations:[]}}},{key:"cleanup",value:function(){this.wnd&&(this.wnd.close(),this.wnd=null),this._handlerFilePropUpdatedId&&h.Z.unsubscribe(this._handlerFilePropUpdatedId),this._editor&&(this._cleanCursorMarkers(),this._editor._lspSupport=null,this.fileName&&C.deactivate({filename:this.fileName,editor:this._editor}),this._editor.setModel(new g.yO("")),this._focusDisposableHandler&&this._focusDisposableHandler.dispose(),this._focusDisposableHandler=null,this._changeDisposableHandler&&this._changeDisposableHandler.dispose(),this._changeDisposableHandler=null,this._debounceChangeContentDisposableHaldler&&this._debounceChangeContentDisposableHaldler.dispose(),this._debounceChangeContentDisposableHaldler=null,this._deactivateCursorTracking(),S.setEditor(null),this._editor&&this._editor.cleanup(),this._editor=null)}},{key:"editor",value:function(){return this._editor}},{key:"model",value:function(){return this._model}},{key:"container",value:function(){return this._container}},{key:"drawPresence",value:function(e){if(e.userId!==f.Z.currentUser.account&&this.fileName===e.file&&this._editor){var t=m.ZP.GUID(4),n={domNode:null,getId:function(){return t},getDomNode:function(){if(!this.domNode){this.domNode=document.createElement("span");var t=document.createElement("span"),n=document.createElement("span"),i=0===e.cursor.lineNumber?"cursor-presence-line-0":"";n.className="cursor-presence-top cursor-presence-top-".concat(e.index," ").concat(i),n.setAttribute("data-name",e.userName),t.className="cursor-presence cursor-presence-".concat(e.index),this.domNode.append(t),this.domNode.append(n)}return this.domNode},getPosition:function(){return{position:e.cursor,preference:[0]}}};if(this._editor.addContentWidget(n),this._cursorMarkers.widgets.push(n),e.selection){var i,a=this._editor.deltaDecorations([],[{range:g.Zo.e6.fromPositions(e.cursor,e.selection),options:{inlineClassName:"cursor-presence-selection-".concat(e.index)}}]);(i=this._cursorMarkers.decorations).push.apply(i,(0,r.Z)(a))}}}},{key:"readOnly",value:function(e){return d().isUndefined(e)||(this._readOnly=e,this._editor&&(this._editor.setOption("readOnly",e),e?this._deactivateCursorTracking():this._activateCursorTracking())),this._readOnly}},{key:"_deactivateCursorTracking",value:function(){this._changeCursorPositionDisposableHandler&&this._changeCursorPositionDisposableHandler.dispose(),this._changeCursorPositionDisposableHandler=null,C.cursorActivity({projectId:f.Z.currentProject.guid,unset:!0})}},{key:"_activateCursorTracking",value:function(){this._changeCursorPositionDisposableHandler||(this._changeCursorPositionDisposableHandler=this._editor.onDidChangeCursorPosition(this._editorCursorActivity.bind(this)),this._editorCursorActivity())}},{key:"_editorFocusHandler",value:function(){C.focus({editor:this._editor,filename:this.fileName})}},{key:"_editorCursorActivity",value:function(){if(f.Z.currentProject&&this._editor&&this.fileName){var e=this._editor.getSelection(),t={fileName:this.fileName,cursor:g.Zo.e6.getStartPosition(e),projectId:f.Z.currentProject.guid};g.Zo.e6.isEmpty(e)||(t.selection=g.Zo.e6.getEndPosition(e)),C.cursorActivity(t)}}},{key:"_highlightCode",value:function(){if(this._editor)if(this._highlight&&!0===this._highlight.selectionOnly){var e={lineNumber:this._highlight.ref,column:this._highlight.column||1};this._editor.setPosition(e),this._editor.scrollToPosition(e)}else this._highlight&&this.editor().highlight(this._highlight)}},{key:"_activateEditorStage2",value:(t=(0,i.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=this._options.file)&&n instanceof p.Z)){e.next=9;break}return e.next=4,m.ZP.promise.getState(n.status);case 4:if(e.sent!==m.ZP.promise.STATES.REJECTED){e.next=9;break}return(i=new Error("Open file error")).close=!0,e.abrupt("return",Promise.reject(i));case 9:this._editor=t,S.setEditor(this),this._readOnly?this._editor.setOption("readOnly",this._readOnly):this._editor.setOption("readOnly",!1),this._focusDisposableHandler&&this._focusDisposableHandler.dispose(),this._focusDisposableHandler=this._editor.onDidFocus(this._editorFocusHandler.bind(this)),this._debounceChangeContentDisposableHaldler&&this._debounceChangeContentDisposableHaldler.dispose(),this._debounceChangeContentDisposableHaldler=this._editor.onDidChangeModelContent(this._debouncedChanges),f.Z.currentProject.pairProgramming&&f.Z.currentProject.pairProgramming.enabled&&(this._changeDisposableHandler&&this._changeDisposableHandler.dispose(),this._changeDisposableHandler=this._editor.onDidChangeModelContent((function(){return C.change()}))),this._readOnly||this._activateCursorTracking(),this._editorFocusHandler();case 19:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"activate",value:function(e){var t=this;this._lineBreaksState||(this._model&&this._model.nonUnixLineBreaks?this._lineBreaksState=this._showLineBreaksDialog():this._lineBreaksState=Promise.resolve());var n=this._activateEditorStage2.bind(this,e);return this._lineBreaksState.then((function(){t._model&&t._model.nonUnixLineBreaks&&(C.filePropUpdate({path:t.fileName},{nonUnixLineBreaks:!1}),t._model.pushEOL(0))})).catch((function(){t._model&&t._model.nonUnixLineBreaks&&(t._readOnly=!0)})).then(n).catch(n)}},{key:"afterActivate",value:function(){d().isObject(this._editor)&&this._model&&(this._editor.connect&&this._editor.connect(this._container),this._editor.setModel(this._model),this._highlightCode(),this._editor.setPlaceholder("Your code goes here..."),C.activate({filename:this.fileName,editor:this._editor,codeEditor:this}),this.focus())}},{key:"setOptions",value:function(e){this._highlight=e.highlight,this._highlightCode()}},{key:"focus",value:function(){d().isObject(this._editor)&&(this._container.closest(".panel-container").hasClass("focus")&&this._editor.focus(),this._editorCursorActivity())}},{key:"deactivate",value:function(){C.out(this._editor),this.cleanup()}},{key:"beforeClose",value:function(){}},{key:"close",value:function(){C.close(this),this.cleanup(),this._cursorPositionHandler&&h.Z.unsubscribe(this._cursorPositionHandler)}},{key:"enterFullscreen",value:function(){}},{key:"leaveFullscreen",value:function(){}},{key:"layout",value:function(){this._editor&&this._editor.layout()}}]),e}()},58471:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var i=n(83933),r=n(52308),a=n.n(r),s=n(177),o=n.n(s),c=n(47821);var l=o().compile('<form action="/" method="post" class="form-horizontal">\n    <div class="window-prompt-description"></div>\n    <div class="control-group">\n        <div class="controls window-prompt-input-div">\n            <input type="text" class="window-prompt-input input-xlarge" autofocus />\n        </div>\n    </div>\n\n    <div class="window-prompt-rule"></div>\n</form>\n'),u=function(e){e=e||{};var t=a()("<div/>");t.append(e.content||l());var n=e.rule,r="window-prompt-alert",s=t.find(".window-prompt-input");t.find(".window-prompt-description").html(e.description||"");var o=t.find(".window-prompt-rule");function u(){if(n){var t=s.val(),i=!0;switch(a().type(n)){case"function":var c=n(t);i=!1,void 0!==c&&!1!==c&&!0!==c?o.html(c||""):!1===c?o.html(e.ruleTitle||""):i=!0;break;case"regexp":i=t===t.replace(n)}i?(s.removeClass(r),o.hide()):(s.addClass(r),o.show())}}o.html(e.ruleTitle||""),s.attr("placeholder",e.placeholder||""),s.val(e.defaultValue),s.bind("keypress keyup change",(function(){u()}));var d=new i.Z({title:e.title||"Prompt",buttons:e.buttons||i.Z.MB_OKCANCEL,doNotCloseOpened:e.doNotCloseOpened,content:t,width:e.width,height:e.height,icon:null===e.icon?null:e.icon||"question",onShow:function(){s.focus()},onClose:function(t){u();var n=t===i.Z.IDOK;return(!n||!s.hasClass(r))&&c.Z.onCloseParams(e.onClose,d,n,s.val())}});return u(),d};var d=n(70580),p=n(96486),f=n.n(p);var h=o().compile('<div class="window-tabs tab-content">\n  {{#each tabs}}\n    <div class="tab-pane fade{{#if this.active}} active in{{/if}}" id="window-tab-pane-{{id}}">\n      {{{this.content}}}\n    </div>\n  {{/each}}\n</ul>\n'),m=o().compile('<ul class="nav nav-tabs window-tabs">\n  {{#each tabs}}\n    <li{{#if this.active}} class="active"{{/if}}>\n      <a href="#window-tab-pane-{{id}}" data-toggle="tab">\n        <i class="ss-icon">{{this.icon}}</i>{{this.label}}\n      </a>\n    </li>\n  {{/each}}\n</ul>\n'),g=function(e){e=e||{};var t=new i.Z({buttons:i.Z.MB_OK,content:a()(h({tabs:e.tabs||[]})),doNotCloseOpened:e.doNotCloseOpened,width:e.width,height:e.height,onClose:function(n){var r=n===i.Z.MB_OK;for(var s in n=!0,e.tabs)if(Object.prototype.hasOwnProperty.call(e.tabs,s)){var o=e.tabs[s];if("function"===a().type(o.onClose)&&!o.onClose.call(t,r)){n=!1;break}}return n&&(n=c.Z.onCloseParams(e.onClose,t,r)),n},onShow:function(){for(var t=0;t<e.tabs.length;t++)f().isFunction(e.tabs[t].self.bind)&&e.tabs[t].self.bind(e.tabs[t],this)},onHide:function(){for(var t=0;t<e.tabs.length;t++)f().isFunction(e.tabs[t].self.unbind)&&e.tabs[t].self.unbind(e.tabs[t],this)}});function n(t){for(var n=e.tabs.length-1;n>=0;n--)if(t==="window-tab-pane-"+e.tabs[n].id)return e.tabs[n]}var r=a()(m({tabs:e.tabs||[]}));if(r.find("a").on("shown.tab",(function(e){var i=n(a()(this).attr("href").substr(1));i&&i.onShow&&i.onShow.call(t,e),e.relatedTarget&&(i=n(a()(e.relatedTarget).attr("href").substr(1)))&&i.onHide&&i.onHide.call(t,e),a()(window).trigger("resize.modal")})),r.find("li.active").length<1)r.find("li:first a").tab("show");else{var s=n(r.find("li.active a").tab("show").attr("href").substr(1));s&&s.onShow&&s.onShow.call(t,{})}return t.dialogHeader.addClass("window-tabs"),t.dialogHeader.html(r),t};var v=n(20294);var b=o().compile('<form action="/" method="post" class="ac-form-horizontal">\n\n    <p>This repository either does not exist or requires authentication. Please check the repo URL is correct and/or authentication here...</p>\n\n    <div class="ac-control-group">\n        <label class="ac-control-label" for="git-user-name">User name:</label>\n        <div class="ac-controls">\n            <input type="text" name="git-user-name" id="git-user-name" required autofocus placeholder="Your username..." value="{{name}}" class="ac-input-xlarge" maxlength="100">\n        </div>\n    </div>\n\n    <div class="ac-control-group">\n        <label class="ac-control-label" for="git-user-password">User password:</label>\n        <div class="ac-controls">\n            <input type="password" name="git-user-password" id="git-user-password" required autofocus placeholder="Your password..." value="{{password}}" class="ac-input-xlarge" maxlength="100">\n        </div>\n    </div>\n\n</form>'),y=function(e){var t="",n="";if((e=e||{}).repoUrl){var r=v.ZP.url.parse(e.repoUrl);if(f().isString(r.auth)){var s=r.auth.split(":");t=s[0],n=s[1]||""}}t=e.username||t,n=e.password||n;var o=a()(b({name:t,password:n})),c=new i.Z({title:"Repository authentication required",content:o,buttons:i.Z.MB_OKCANCEL,focusOn:o.find("#git-user-name").focus(),icon:e.icon||"lock",onClose:function(r){if(r!==i.Z.IDOK)f().isFunction(e.onClose)&&e.onClose(!0);else{var s=c.content().find("#git-user-name");t=a().trim(s.val());var o=c.content().find("#git-user-password");n=a().trim(o.val()),f().isFunction(e.onClose)&&e.onClose(!1,t,n)}}})};var w=o().compile('<div class="window-warning">\n  <h4 class="window-warning-description"></h4>\n</div>\n'),_=function(e){e=e||{};var t=a()("<div/>");t.append(e.content||w()),t.find(".window-warning-description").html(e.description||"");return new i.Z({title:e.title||"Warning",buttons:e.buttons||i.Z.MB_OKCANCEL,doNotCloseOpened:e.doNotCloseOpened,content:t,width:e.width,height:e.height,onClose:e.onClose||function(){},icon:e.icon||"alert",onHide:e.onHide||function(){}})};i.Z.showPrompt=u,i.Z.showConfirm=d.i,i.Z.showTabbed=g,i.Z.showRepoAuthWindow=y,i.Z.showWarning=_;const k=i.Z},47821:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(52308),r=n.n(i);const a={onCloseParams:function(e,t){var n;if("function"===r().type(e)){var i=Array.prototype.slice.call(arguments);i.shift(),i.shift(),n=e.apply(t,i)}return n}}},70580:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p,i:()=>d});var i=n(52308),r=n.n(i),a=n(177),s=n.n(a),o=n(83933),c=n(20294),l=n(47821);var u=s().compile('<div class="window-confirm">\n\n  <h4 class="window-confirm-description"></h4>\n  <div class="window-confirm-description-2"></div>\n\n  <form action="/" method="post" class="window-confirm-captcha-form">\n\n    <p>\n      To complete this action, please enter the number exactly as you see below.\n    </p>\n    <label for="confirmation-code">\n      Confirmation code:\n      <strong class="window-confirm-captcha"></strong>\n    </label>\n    <input type="text" name="confirmation_code" id="confirmation-code" required autofocus autocomplete="off" class="window-confirm-input">\n\n  </form>\n\n</div>\n'),d=function(e){e=e||{};var t=r()("<div/>");t.append(e.content||u());var n=t.find(".window-confirm-captcha-form"),i=n.find(".window-confirm-input"),a=e.captcha,s=i.val(),d=e.captchaValue;t.find(".window-confirm-description").html(e.description||""),t.find(".window-confirm-description-2").html(e.description2||""),i.attr("placeholder",e.placeholder||"Enter Number"),a?(d?(s=(0,c.z6)(d.toLowerCase()),n.find("p").hide(),n.find("label").hide()):s=parseInt(89999*Math.random(),10)+1e4,n.find(".window-confirm-captcha").text(s)):n.hide();var p=new o.Z({title:e.title||"Confirm",buttons:e.buttons||o.Z.MB_YESNO,doNotCloseOpened:e.doNotCloseOpened,captcha:a,content:t,width:e.width,height:e.height,onHide:e.onHide,focusOn:t.find("#confirmation-code").focus(),icon:e.icon||"warning",ariaDescribedBy:e.ariaDescribedBy,onShow:function(){a?i.focus():this.buttons()[0].element.focus()},onClose:function(t){var n=t===o.Z.IDYES||t===o.Z.IDOK;return void 0!==s&&s.toString()!==(0,c.z6)(i.val()).toLowerCase()&&n?(c.ZP.addErrorToInput(i,"Wrong confirmation code."),!1):l.Z.onCloseParams(e.onClose,p,n,t)}});return p};const p={showConfirm:d}},83933:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var i=n(52308),r=n.n(i),a=n(96486),s=n.n(a),o=n(177),c=n.n(o),l=n(93443),u=n(20294),d=n(43553),p=(n(88541),n(47821));var f,h=l.Z.create(n(84151)),m=c().compile('<div\n    id="{{dialogId}}"\n    role="dialog"\n    aria-modal="true"\n    aria-labelledby="{{dialogId}}_label"\n    {{#if ariaDescribedBy}}aria-describedby="{{dialogId}}_descr"{{/if}}\n    class="modal {{#if showFade}}fade{{/if}}"\n>\n    <div tabindex="0"></div>\n    <div class="modal-entry">\n        <div class="modal-header events" data-event-id="modal-title">\n            <button type="button" class="close" tabindex="0" aria-label="Close dialog">\n                <i class="ss-icon" aria-hidden="true">close</i>\n            </button>\n            {{#if icon}}\n            <i class="ss-icon icon">{{icon}}</i>\n            {{/if}}\n            <h3 id="{{dialogId}}_label">{{title}}</h3>\n        </div>\n        <div class="modal-body" {{#if ariaDescribedBy}}id="{{dialogId}}_descr"{{/if}}>\n        </div>\n        <div class="modal-footer events"></div>\n    </div>\n    <div tabindex="0"></div>\n</div>\n'),g=[];function v(e){e.params.doNotCloseOpened||s().each(g,(function(e){e.close(k.IDCANCEL)})),!1!==e.params.showLoading&&f.modalmanager("loading");var t=r()(e.dialog[0]).on("shown.modal",(function(){var t=e.dialog.find(".modal-entry"),n=t.find("input[autofocus]");if(n.length)n.focus();else{var i=u.ZP.findFocusable(t);i&&r()(i).focus()}e.params.onShow&&r().proxy(e.params.onShow,e)()})).on("hide",(function(){u.ZP.removeTrapFocus(e.trapFunction),r()(e.documentActiveElement).focus(),h.onClose()})).on("hidden.modal",(function(){s().remove(g,(function(t){return t===e})),e.params.onHide&&r().proxy(e.params.onHide,e)()})).modal({width:e.params.width,height:e.params.height,keyboard:e.params.keyboard,focusOn:e.params.focusOn,modalOverflow:e.params.modalOverflow,manager:f});if(e.modal=t.data("modal"),e.params.height){e.dialogContent.css("max-height","none");var n=e.params.height;s().isString(n)&&n.indexOf("%")>-1&&(n=(n=parseInt(n,10))*f.height()/100),n-=e.dialogHeader.height()+e.buttonsPane.height(),e.dialogContent.css("height",n+"px")}l.Z.bind(e.dialogHeader.find("button.close"),"click",(function(){e.close(k.IDCANCEL)})),e.onPopStateChanged=function(){e.params&&e.params.closeOnHistoryBack&&e.close(k.IDCANCEL)},d.Z.bind("popstate","dispatcher",e.onPopStateChanged),g.push(e)}function b(e,t,n){void 0!==n&&(e.element.addClass(n),e.disabledWithClass||(e.disabledWithClass=n)),e.element.addClass("disabled").prop("disabled",!0),t&&(e.oldTitle||(e.oldTitle=e.element.html()),w(e,t)),e.disabled=!0}function y(e,t){void 0===t&&(t=!0),e.disabledWithClass&&(e.element.removeClass(e.disabledWithClass),delete e.disabledWithClass),e.element.removeClass("disabled").prop("disabled",!1),e.disabled=!1,t&&function(e){e.oldTitle&&(w(e,e.oldTitle),delete e.oldTitle)}(e),delete e.oldTitle}function w(e,t){e.title=t,e.element.html(t)}function _(e){for(var t,n=e.buttons(),i=0,r=n.length;i<r;i++){var a=n[i],s=a.element.is(":visible");if(1===a.type&&s&&!a.element.hasClass("disabled")){t=n[i];break}}t&&t.onClick.call(e)}var k=function e(t){if(!(this instanceof e))return new e(t);!f&&(f=r()("div.ac")),this.params=t=t||{},this.documentActiveElement=document.activeElement;var n=m({showFade:!!s().isUndefined(t.showTransition)||t.showTransition,title:this.params.title=t.title,icon:this.params.icon=t.icon,dialogId:u.ZP.hashCode(this.params.title,!0),ariaDescribedBy:t.ariaDescribedBy||!1}),i=this.dialog=r()(n);this.dialogHeader=i.find(".modal-header"),this.buttonsPane=i.find(".modal-footer");var a=this.dialogContent=i.find(".modal-body");this.modal=null,a.append(t.content),this.buttons(t.buttons),void 0===this.params.keyboard&&(this.params.keyboard=!0),void 0===this.params.closeOnHistoryBack&&(this.params.closeOnHistoryBack=!0),function(e,t){var n=t.find("form:first");(n=0!==n.length?n:t).on("submit",(function(t){t.preventDefault(),_(e)})),e.params.focusOn||(e.params.focusOn=e.buttonsPane)}(this,a),i.addClass(t.className),this.trapFunction=u.ZP.addTrapFocus(".modal-entry",i),v(this)};k.MB_OK=2,k.MB_OKCANCEL=1,k.MB_YESNO=4,k.MB_YESNOCANCEL=3,k.MB_CANCEL=5,k.IDOK=0,k.IDCANCEL=1,k.IDYES=2,k.IDNO=3;var P=k.prototype;P.content=function(e){return e&&this.params&&this.dialogContent&&(this.params.content=e,this.dialogContent.empty().append(e)),this.dialogContent},P.title=function(e){return void 0!==e&&(this.params.title=e,this.dialogHeader.find("> h3").html(e)),this.params.title},P.buttons=function(e){if(void 0!==e){var t=this,n=this.buttonsPane,i=r()("<div/>"),a=function(e,t){var n=t;if(!r().isArray(t))switch(n=[],t){case k.MB_OK:n=[{title:"Ok",class:"mb-ok",onClick:function(){e.close(k.IDOK)},type:1}];break;case k.MB_OKCANCEL:n=[{title:"Ok",class:"mb-ok",onClick:function(){e.close(k.IDOK)},type:1},{title:"Cancel",class:"mb-cancel",onClick:function(){e.close(k.IDCANCEL)}}];break;case k.MB_CANCEL:n=[{title:"Cancel",class:"mb-cancel",onClick:function(){e.close(k.IDCANCEL)}}];break;case k.MB_YESNO:n=[{title:"Yes",class:"mb-yes",onClick:function(){e.close(k.IDYES)},type:1},{title:"No",class:"mb-no",onClick:function(){e.close(k.IDNO)}}];break;case k.MB_YESNOCANCEL:n=[{title:"Yes",class:"mb-yes",onClick:function(){e.close(k.IDYES)},type:1},{title:"No",class:"mb-no",onClick:function(){e.close(k.IDNO)}},{title:"Cancel",class:"mb-cancel",onClick:function(){e.close(k.IDCANCEL)}}]}return n}(this,e);n.empty(),l.Z.off(n,"click.windowButtons"),l.Z.on(n,"click.windowButtons",(function(e){var n=r()(e.target).data("pos");if(void 0!==n){var i=a[n];i&&!i.element.hasClass("disabled")&&i.onClick&&i.onClick.call(t)}})),d=function(){_(t)},p=!1,n.off("keydown.enterKey keyup.enterKey").on("keydown.enterKey",(function(e){p||13!==e.keyCode||document.activeElement===e.target||(p=!0,d(e))})).on("keyup.enterKey",(function(e){p&&13===e.keyCode&&(p=!1,e._stopEvent=!0)}));for(var s=0,o=a.length;s<o;s++){var c=a[s],u=c.type?"btn-primary":"";c.css&&(u+=" "+c.css),c.element=r()('<button class="btn '+u+'" data-pos="'+s+'"></button>'),c.element.html(c.title),i.append(c.element),c.setTitle||(c.setTitle=w.bind(null,c)),c.disable||(c.disable=b.bind(null,c)),c.enable||(c.enable=y.bind(null,c))}n.append(i.children()),this.params.buttons=a}var d,p;return this.params.buttons},P.close=function(e){if(!1!==p.Z.onCloseParams(this.params.onClose,this,e)){var t=this;d.Z.unbind("popstate","dispatcher",this.onPopStateChanged),u.ZP.removeTrapFocus(this.trapFunction),this.dialog.on("hidden",(function(){t.dialog&&t.dialog.remove(),t.dialog=null,t.params=null,t.dialogHeader=null,t.buttonsPane=null,t.dialogContent=null})),this.dialog.modal("hide"),h.onClose()}},P.preventClosing=function(e){if(this.modal){var t=this.modal.options;e?(t.keyboard=!1,t.backdrop="static"):(t.keyboard=this.params.keyboard,t.backdrop=!0);var n=this.dialog.find(".close");e?n.hide():n.show()}};const Z=k},39562:(e,t,n)=>{"use strict";n.d(t,{_V:()=>ae,ng:()=>ue,cp:()=>le,G_:()=>z,Eo:()=>se,ZP:()=>pe,wq:()=>J,L2:()=>ie,qz:()=>ce});var i=n(44925),r=n(15861),a=n(87757),s=n.n(a),o=n(52308),c=n.n(o),l=n(96486),u=n.n(l),d=n(177),p=n.n(d),f=n(49721),h=n(58471),m=n(93443),g=n(97137),v=n(20294),b=n(8246),y=n(60989),w=function(e,t){return e.comments=e.comments.map((function(e){return e.author=t[e.authorUserId],e})),e},_=function(e){var t=e.thread,n=e.users,i=u().keyBy(n,"id");return w(t,i)},k=function(e){return y.od.makeObsolete(e)},P=n(4942),Z=n(15671),x=n(43144);const C='<div class="comment {{#if editMode}}editMode{{/if}}" {{#exists comment.id}}data-id="{{comment.id}}" id="{{comment.id}}"{{/exists}} data-new={{#if newMode}}true{{else}}false{{/if}}>\n  <div class="header">\n    <div class="icon">\n      <i class="ss-icon icon-main">comment</i>\n      <i class="ss-icon icon-shadow">comment</i>\n    </div>\n    <div class="title">\n      <strong>{{#if comment.authorUserId}}{{#exists comment.author}}{{comment.author.actualName}}{{else}}Deleted User{{/exists}}{{else}}Instructor{{/if}}</strong>\n      {{#exists comment.createdAt}} on {{#exists comment.lastEditedAt}}{{formatDateFullUS comment.lastEditedAt}}{{else}}{{formatDateFullUS comment.createdAt}}{{/exists}}{{/exists}}\n    </div>\n    {{#unless editMode}}\n    {{#equals userId comment.authorUserId}}\n    <div class="btn-group threedots-menu">\n      <btn class="btn dropdown-toggle" data-toggle="dropdown" />\n      <ul class="dropdown-menu" role="menu">\n        <li class="action-item edit" role="menuitem">Edit comment</li>\n        <li class="action-item remove" role="menuitem">Delete comment</li>\n      </ul>\n    </div>\n    {{/equals}}\n    {{#unless disableResolving}}\n    {{#if showResolveBtn}}\n    <button class="resolve-btn" title="Mark comment as resolved">\n      <i class="ss-icon">check</i>\n    </button>\n    {{/if}}\n    {{/unless}}\n    {{/unless}}\n  </div>\n  <div class="comment-area">\n    {{#if editMode}}\n    <textarea class="message-ta" rows="2" placeholder="Your comment" aria-label="Comment"></textarea>\n    {{else}}\n    <div class="message"></div>\n    {{/if}}\n  </div>\n  {{#if editMode}}\n  <div class="footer">\n    <button type="button" class="btn btn-primary btn-small save-btn">{{#exists comment.createdAt}}Save{{else}}Create{{/exists}}</button>\n    <button type="button" class="btn btn-small cancel-btn">Cancel</button>\n  </div>\n  {{/if}}\n</div>\n',S='<div class="comments-list" data-thread-id="{{thread.id}}" data-temporary="{{thread.temporary}}">\n  {{#each thread.comments}}\n    {{> comment comment=this userId=../userId showResolveBtn=@first disableResolving=../disableResolving}}\n  {{/each}}\n  {{#if canAdd}}\n  <div class="footer">\n    <button type="button" class="btn btn-primary btn-small add-comment-btn">Add comment</button>\n  </div>\n  {{/if}}\n</div>\n';function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var I=p().compile('<div class="all-comments-list">\n  {{#each threads}}\n  {{> thread thread=this}}\n  {{/each}}\n</div>'),T=p().compile('<div class="no-comments">\n  <h1>There are no code comments yet.</h1>\n</div>\n');b.Z.registerPartial("thread",'<div class="thread" data-thread-id="{{thread.id}}">\n  <div class="header">\n    {{thread.path}}\n    {{#or thread.isObsolete thread.isResolved}}\n    <span class=\'comment-tag\'>{{#if thread.isObsolete}}Obsolete{{else}}Resolved{{/if}}</span>\n    {{else}}\n    <button class="btn go-to-code" title="Go to code">\n      <i class="ss-icon">navigate</i>\n    </button>\n    {{/or}}\n  </div>\n  <div class="lines">\n    {{#each thread.lines}}\n    {{> line data=this thread=../thread}}\n    {{/each}}\n  </div>\n</div>\n'),b.Z.registerPartial("comment",C),b.Z.registerPartial("line",'<div class="line">\n  <div class="line-gutter">\n    <div class="line-number">{{data.lineNumber}}</div>\n    {{#if data.showWidget}}\n    <div class="code-line-icon">\n      <i class="ss-icon">comment</i>\n    </div>\n    {{/if}}\n  </div>\n  <div class="code-line-doc-area">\n    <div class="code-line {{#if data.isHighlight}}is-highlighted{{/if}}">{{data.code}}</div>\n    {{#if data.showWidget}}\n    {{> commentsList thread=thread disableResolving=true}}\n    {{/if}}\n  </div>\n</div>'),b.Z.registerPartial("commentsList",S);var j="codeContextBefore",A="code",O="codeContextAfter",D={view:"code"},N={md:D,markdown:D},M=function(){function e(t){var n=this;(0,Z.Z)(this,e),this.opened=!0,this.container=t,this.container.showFProgress("Loading comments..."),this.scrollPos=0,this.debounceOnScroll=u().debounce(this.onScroll.bind(this),200),this._commentsUpdateId=m.Z.subscribe("project:commentsUpdated",(function(e,t){var i=t.updateId;return n.loadComments(i)})),this.loadComments()}return(0,x.Z)(e,[{key:"loadComments",value:function(){var e=this;z(void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0).then((function(t){var n=t.commentThreads;e.opened&&(e.threads=n,e.content=e.renderThreads(n),e.container.empty(),e.container.append(e.content),e.bindEvents())})).catch((function(e){return g.Z.error(e.message)})).finally((function(){return e.container.completeFProgress()}))}},{key:"renderThreads",value:function(e){if(u().isEmpty(e))return c()(T());var t=u().sortBy(e,["path","lineNumber"]),n=this.prepareThreads(t),i=c()(I({threads:n}));return u().each(t,(function(e){u().each(e.comments,(function(e){v.ZP.toHTML(e.comment).then((function(t){return i.find("#".concat(e.id," .message")).html(t)}))}))})),i}},{key:"prepareThreads",value:function(e){var t=this;return u().map(e,(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,P.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({lines:[].concat(t.blockToLines(e,j),t.blockToLines(e,A),t.blockToLines(e,O))},e)}))}},{key:"blockToLines",value:function(e,t){var n=t===A,i=e.context[t].split("\n"),r=1;switch(t){case j:r=e.lineNumber-i.length;break;case A:r=e.lineNumber;break;case O:r=e.lineNumber+e.lineCount}return i.map((function(e,t){var a=t===i.length-1;return{lineNumber:r+t+1,code:e,isHighlight:n,showWidget:n&&a}}))}},{key:"bindEvents",value:function(){m.Z.on(this.content,"click.comments",".go-to-code",this.onGoToCommentCode.bind(this)),m.Z.on(this.content,"scroll.comments",this.debounceOnScroll)}},{key:"activate",value:function(){var e=this;u().defer((function(){return e.content&&e.content.scrollTop(e.scrollPos)}))}},{key:"onGoToCommentCode",value:function(e){e.preventDefault();var t=c()(e.currentTarget).closest(".thread").data("threadId"),n=u().find(this.threads,(function(e){return e.id===t}));n&&f.Z.ide.helpers.openFileAndGoToLine(n.path,n.lineNumber+n.lineCount+1,1,N[v.ZP.path.getFileExtension(n.path)])}},{key:"onScroll",value:function(e){e.preventDefault(),this.container&&(this.scrollPos=this.content.scrollTop())}},{key:"close",value:function(){this.opened=!1,this.container=null,this.debounceOnScroll=null,this.threads=null,this.scrollPos=0,m.Z.off(this.content,"click.comments",".go-to-code"),m.Z.off(this.content,"scroll.comments"),m.Z.unsubscribe(this._commentsUpdateId)}}]),e}();const F=M;var R=["id","temporary"],L=m.Z.create(n(91775)),U=p().compile(S);b.Z.registerPartial("comment",C);var B=null,q=null,H=null,W={};m.Z.subscribe("project:commentsUpdated",(function(e,t){var n=t.updateId;return z(void 0,n)}));var z=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return n&&!W[n]&&(q=null,B=null,H=null,W[n]=!0),q?e?(q[e]=q[e]||[],Promise.resolve({commentThreadsMap:q[e],commentThreads:H})):Promise.resolve({commentThreadsMap:q,commentThreads:H}):(B=B||(t=f.Z.currentProject.assignmentProjectId,y.od.get(t).then((function(e){var t=e.commentThreads,n=e.users,i=u().keyBy(n,"id");return t.map((function(e){return w(e,i)}))}))),B.then((function(t){return H=t,V(),e?(q[e]=q[e]||[],{commentThreadsMap:q[e],commentThreads:H}):{commentThreadsMap:q,commentThreads:H}})).catch((function(e){return g.Z.error(e.message)})))},G=function(e){H=u().filter(H,(function(t){return t.id!==e.id})),V()},V=function(){q=u()(H).filter((function(e){return!e.isObsolete&&!e.isResolved})).groupBy((function(e){return e.path})).omitBy((function(e,t){return!f.Z.currentProject.exists(t)})).value()},K=function(e,t){t.preventDefault();var n=c()(t.currentTarget),i=n.closest(".comment").data("id"),r=u().find(e.comments,(function(e){return e.id===i}));if(n.hasClass("remove")){X((function(){var t;(t=r.id,y.od.remove(t)).then((function(){1===e.comments.length?G(e):e.comments=u().filter(e.comments,(function(e){return e.id!==i})),L.commentsUpdated()})).catch((function(e){return g.Z.error(e.message)}))}))}else n.hasClass("edit")&&(r.editMode=!0,L.commentThreadUpdated(e))},Y=function(e,t){t.preventDefault();var n=c()(t.currentTarget).closest(".comment"),i=n.data("id"),r=n.find(".message-ta").val(),a=J.bind(null,e,i);r?Q(a):J(e,i)},J=function(e,t){var n=u().findIndex(e.comments,(function(e){return e.id===t})),i=e.comments[n];i.editMode=!1,e.temporary&&!i.createdAt?(G(e),L.threadRemoved(e)):(i.createdAt||e.comments.splice(n,1),L.commentThreadUpdated(e))},Q=function(e){h.Z.showConfirm({title:"Discard changes confirmation",description:"Are you sure you want to discard you unsaved changes?",onClose:function(t){return t&&e(),!0}})},X=function(e){h.Z.showConfirm({title:"Delete comment confirmation",description:"Are you sure you want to delete comment?",onClose:function(t){return t&&e(),!0}})},$=function(e,t){t.preventDefault();var n=c()(t.currentTarget),i=n.closest(".comment"),r=n.closest(".comment").data("id"),a=u().find(e.comments,(function(e){return e.id===r})),s=i.find(".message-ta"),o=s.val();o?(i.removeClass("editMode"),i.closest(".comments-list").data("temporary",!1),a.comment=o,oe(e,a).then((function(t){(H=u().filter(H,(function(t){return t.id!==e.id}))).push(t),V(),L.commentsUpdated()})).catch((function(e){return g.Z.error(e.message)}))):v.ZP.addErrorToInput(s,"Comment can not be empty")},ee=function(e,t){t.preventDefault(),re(e),L.commentThreadUpdated(e)},te=function(e,t){var n;t.preventDefault(),(n=[e.id],y.od.makeResolved(n)).then((function(){e.isResolved=!0,V(),L.commentsUpdated()})).catch((function(e){return g.Z.error(e.message)}))},ne=function(e,t){m.Z.on(e,"click",".action-item",K.bind(null,t)),m.Z.on(e,"click",".cancel-btn",Y.bind(null,t)),m.Z.on(e,"click",".save-btn",$.bind(null,t)),m.Z.on(e,"click",".add-comment-btn",ee.bind(null,t)),m.Z.on(e,"click",".resolve-btn",te.bind(null,t))},ie=function(){return{id:v.ZP.GUID(8),comment:"",authorUserId:f.Z.currentUser.getAccountUid(),author:{actualName:f.Z.currentUser.get("details").get("actual_name")},editMode:!0,newMode:!0}},re=function(e){e.comments.push(ie())},ae=function(){var e=(0,r.Z)(s().mark((function e(t){var n,i,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.Z.currentUser.getAccountUid(),i=!t.comments.some((function(e){return!e.createdAt})),r=c()(U({thread:t,canAdd:i,userId:n})),ne(r,t),a=[],t.id&&(a=u()(t.comments).filter((function(e){return!!e.id})).map((function(e){return r.find("#".concat(e.id," .message-ta")).val(e.comment),v.ZP.toHTML(e.comment).then((function(t){return r.find("#".concat(e.id," .message")).html(t)}))}))),e.abrupt("return",Promise.all(a).then((function(){return u().defer((function(){return r.find(".comment.editMode .message-ta").focus()})),r})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(e,t,n,i,r,a){var s=ie(),o={id:v.ZP.GUID(8),projectId:f.Z.currentProject.assignmentProjectId,path:e,lineNumber:t,lineCount:n,comments:[s],context:{code:i,codeContextBefore:r,codeContextAfter:a},temporary:!0};return H.push(o),V(),o},oe=function(e,t){if(t.createdAt)return function(e,t){return y.od.edit(e,t).then(_)}(t.id,t.comment).catch((function(e){return g.Z.error(e.message)}));var n=u().clone(e);delete n.comments,delete n.isObsolete,delete n.isResolved;var r=n.id,a=n.temporary,s=(0,i.Z)(n,R);if(a){if(q&&q[s.path]){var o=u()(q[s.path]).filter((function(e){return!e.temporary})).find((function(e){return e.lineNumber===s.lineNumber}));o&&(s.threadId=o.id)}}else s.threadId=r;return s.threadId&&(delete s.context,delete s.path,delete s.lineNumber,delete s.lineCount),s.comment=t.comment,function(e){return y.od.add(e).then(_)}(s).catch((function(e){return g.Z.error(e.message)}))},ce=function(e,t,n){if(t.length||n.length){var i=Promise.resolve();t.length&&(i=k(t));var r,a,s=Promise.resolve();n.length&&(r=n,a=f.Z.currentProject.assignmentProjectId,s=y.od.update(r,a)),Promise.all([i,s]).then((function(){var e=u().map(n,(function(e){return e.threadId})).concat(t),i=u().keyBy(n,"threadId"),r=u().filter(H,(function(t){return u().includes(e,t.id)}));u().each(r,(function(e){if(u().includes(t,e.id))e.isObsolete=!0;else{var n=i[e.id];e.lineNumber=n.lineNumber,n.context&&(e.context=n.context)}})),V(),L.commentsUpdated()})).catch((function(e){return g.Z.error(e.message)}))}},le=function(e){e&&z().then((function(){H=(H=H.filter((function(e){return!e.temporary}))).map((function(e){return e.comments=u()(e.comments).filter((function(e){return e.createdAt})).map((function(e){return delete e.editMode,e})).value(),e})),V()}))},ue=function(e,t){e.collapsed=t,function(e,t){return y.od.changeCollapsedState(e,t)}(e.id,t).catch((function(e){return g.Z.error(e.message)}))};m.Z.subscribe("project:close",(function(){q=null,B=null,H=null,W={}}));var de=function(e){var t=e.oldName,n=e.newName;z().then((function(e){var i=e.commentThreadsMap,r=u().keys(i),a=u().filter(r,(function(e){return e===t||0===e.indexOf("".concat(t,"/"))}));if(a.length){var s=u().map(a,(function(e){return{threadIds:u()(i[e]).filter((function(e){return!e.temporary})).map((function(e){return e.id})).value(),destPath:e===t?n:e.replace(t,n)}}));u().isEmpty(s)||function(e,t){return y.od.moveToPath(e,t)}(s,f.Z.currentProject.assignmentProjectId).then((function(){var e=u()(s).map((function(e){return e.threadIds})).flattenDeep().value(),t=u()(s).map((function(e){return u().reduce(e.threadIds,(function(t,n){return t[n]=e.destPath,t}),{})})).flattenDeep().value();u()(H).filter((function(t){return u().includes(e,t.id)})).each((function(e){e.path=t[e.id]})),V(),L.commentsUpdated()})).catch((function(e){return g.Z.error(e.message)}))}}))};m.Z.subscribe("item:moved:#oldName:#newName",(function(e){return u().delay((function(){return de(e)}),100)})),m.Z.subscribe("item:deleted:#path",(function(e){var t=e.path;z().then((function(e){var n=e.commentThreadsMap,i=u().keys(n),r=u().filter(i,(function(e){return e===t||0===e.indexOf("".concat(t,"/"))}));if(r.length){var a=u()(r).map((function(e){return u().map(n[e],(function(e){return e.id}))})).flatten().value();k(a).then((function(){u().each(H,(function(e){u().includes(a,e.id)&&(e.isObsolete=!0)})),V()})).catch((function(e){return g.Z.error(e.message)}))}}))}));const pe=F},82244:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>m});var i=n(15861),r=n(87757),a=n.n(r),s=n(96486),o=n.n(s),c=n(49721),l=n(93443),u="codio-debugger",d=l.Z.create(n(86868)),p=[];function f(){return h.apply(this,arguments)}function h(){return(h=(0,i.Z)(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.Z.currentProject){e.next=3;break}throw new Error("No Project");case 3:return n=o().cloneDeep(t.getPluginData(u)),e.abrupt("return",n.points||[]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const m={breakpoints:function(){return f()},listen:function(){if(!(p.length>0)){var e=[],t=function(){f().then((function(t){var n=e;e=[];var i=!1;o().each(n,(function(e){o().remove(t,(function(t){return t.path===e.path&&t.line===e.data.line})),e.data.state&&(t.push({active:e.active,line:e.data.newLine?e.data.newLine:e.data.line,path:e.path}),!i&&(i=!!e.data.newLine))})),function(e){var t=c.Z.currentProject;if(!t)throw new Error("No Project");return t.setPluginData(u,"points",e)}(t).then((function(){d.breakpointUpdate(),i&&d.breakpointChangeWarning()})).catch((function(e){}))}))},n=o().debounce(t,250,{maxWait:1e4}),i=l.Z.subscribe("file:editor:breakpoint:#path",(function(i,r){var a=r.items.map((function(e){return{path:i.path,data:e,active:!0}}));e=e.concat(a),r.force?t():n()})),r=l.Z.subscribe("command:debug:breakpoint-state:#path",(function(t,i){e.push({path:t.path,data:i,active:i.active}),n()})),a=l.Z.subscribe("command:debug:start",t),s=l.Z.subscribe("command:debug:restart",t);p.push(i,r,a,s)}}}},42052:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(15861),r=n(87757),a=n.n(r),s=n(96486),o=n.n(s),c=n(93443),l="/",u="\\",d="*",p='"',f="\n",h="{",m="}",g=new RegExp("package\\s+([a-zA-Z_]{1}[a-zA-Z0-9_]*(\\.[a-zA-Z_]{1}[a-zA-Z0-9_]*)*)\\s*;","m"),v=new RegExp("\\s*(public|private)?(static)?\\s*class\\s+(\\w+)\\s*((extends\\s+\\w+)|(implements\\s+\\w+( ,\\w+)*))?\\s*\\{","m"),b=new RegExp("\\s*new\\s+(\\w+)\\s*\\(\\w*\\)\\s*\\{","m"),y={},w={};function _(e){for(var t="",n=!1,i=!1,r=!1,a=0,s=e.length;a<s;a++){var o=e[a];o!==p||n||e[a-1]!==u&&((i=!i)||(o=" ")),i||o!==l||(e[a+1]===l&&(n=!0,r=!1),e[a+1]===d&&(n=!0,r=!0)),n&&(r?o===d&&e[a+1]===l&&(n=!1,o="  ",a++):o===f&&(n=!1)),(i||n)&&o!==f&&(o=" "),t+=o}return t}function k(e){for(var t=0,n=0,i=e.length;n<i;n++){var r=e[n];if(r===m){if(0===t)return n;t--}else r===h&&t++}return e.length}function P(e){for(var t=[],n=e,i=n.match(v),r=0,a=0,s=0;i;)a=i.index+i[0].length,s=k(n=n.substring(a,n.length)),t.push({name:i[3],start:a+r,end:a+s+r}),r+=a,i=n.match(v);var c=e,l=c.match(b);for(r=0;l;)a=l.index+l[0].length,s=k(c=c.substring(a,c.length)),t.push({start:a+r,end:a+s+r}),r+=a,l=c.match(b);t=o().sortBy(t,"start");var u={},d=[];return o().each(t,(function(e,t){if(0===t)u[e.name]=e,u[e.name].anon=1,d.push(u[e.name]);else{var n,i=null;if(o().each(d,(function(t){t.start<e.start&&t.end>e.end&&(i=t)})),i)e.name?n=i.name+"$"+e.name:(n=i.name+"$"+i.anon,i.anon++),u[n]=e,u[n].anon=1,u[n].name=n,d.push(u[n])}})),d}function Z(e,t){for(var n=e.split("\n"),i="",r=0;r<t-1;r++)n[r]&&(i+=n[r]+"\n");var a=n[t];return a&&(i+=a.substring(0,a.length/2)),i.length}function x(e){delete w[e]}function C(e){if(!y[e]){var t=[];o().each(["item:moved:","item:moved:#from:","item:deleted:","file:change:"],(function(n){t.push(c.Z.subscribe(n+e,x.bind(null,e)))})),y[e]=t}}function S(e){return w[e]}function E(e,t,n){w[e]={packageName:t,advancedClassInformation:n}}function I(){return(I=(0,i.Z)(a().mark((function e(t,n,i){var r,s,c,l,u,d,p,f,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(n),r=n,n&&(s=n.split("/"),r=s[s.length-1]),c={packageName:"",className:"",fileName:r,path:n},(l=S(n))?(u=l.advancedClassInformation,l.packageName&&(c.packageName=l.packageName)):(d=_(t),(p=d.match(g))&&(c.packageName=p[1]),u=P(d),E(n,c.packageName,u)),f=u[0],void 0!==i&&(h=Z(t,i),o().each(u,(function(e){e.start<=h&&e.end>=h&&(f=e)}))),f&&(c.className=f.name),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const T={parseClassInformation:function(e,t,n){return I.apply(this,arguments)},parseLocalVariableInformation:function(e,t){var n=e.indexOf(" = "),i=!1;e[n+=3]===h&&(n++,i=!0);var r=e.substring(n,e.length);if(i){var a=r.lastIndexOf(m);-1!==a&&(r=r.substring(0,a))}var s=-1!==r.indexOf("Internal exception during operation");if(i&&!s){var c=/^\s*([a-zA-Z_$0-9]+): (.*)$/,l=o().compact(r.split("\n"));r=o().map(l,(function(e){var t=e.match(c);if(t)return{name:t[1],value:t[2]};var n=e.split(": ");return void 0!==n[1]?{name:n[0],value:n[1]}:{name:"",value:n[0]}}))}return{name:t,value:r}}}},4728:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>g,aO:()=>m});var i=n(15861),r=n(87757),a=n.n(r),s=n(96486),o=n.n(s),c=n(49721),l=n(93443),u="codio-debugger",d=l.Z.create(n(86868)),p=null;function f(){return f=(0,i.Z)(a().mark((function e(t){var n,i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.Z.currentProject){e.next=3;break}throw new Error("No Project");case 3:return i=o().cloneDeep(n.getPluginData(u)),r=i.watches||[],r=o().filter(r,(function(e){return e.uuid===t})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function h(){return(h=(0,i.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.Z.currentProject){e.next=3;break}throw new Error("No Project");case 3:return e.abrupt("return",n.setPluginData(u,"watches",t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m={CHANGE:"change",REMOVE:"remove",ADD:"add"};const g={ACTIONS:m,watches:function(e){return function(e){return f.apply(this,arguments)}(e)},listen:function(){p||(p=l.Z.subscribe("command:debug:edit-watch:#uuid",(function(e,t){var n=c.Z.currentProject;if(!n)throw new Error("No Project");if(t||t.state){var i=n.getPluginData(u).watches||[],r=t.state||m.ADD,a=t.watch;if(!o().isEmpty(a)){if(r===m.ADD)i.push({active:!0,watch:a,uuid:e.uuid});else if(r===m.REMOVE)o().remove(i,(function(t){return t.uuid===e.uuid&&t.watch===a}));else{if(r!==m.CHANGE)return;var s=t.old,l=o().findIndex(i,(function(t){return t.uuid===e.uuid&&t.watch===s}));if(-1===l)return;i[l].watch=a}return function(e){return h.apply(this,arguments)}(i).then((function(){d.updateWatch({uuid:e.uuid})}))}}})))}}},97044:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>i});const i={ALLOW_SOURCE_SELECTION:!1,DEPLOYMENT:"deployment",DEPLOY:"deploy",DEPLOY_TARGETS:"targets",DELIMETER:":",DEPLOYER_EDIT:1,DEPLOYER_CREATE:2,DEPLOYER_MANAGE:3,DEPLOYER_HISTORY:4,DESTINATION_TYPE_CODIO:"CODIO",DESTINATION_TYPE_FTP:"FTP",DESTINATION_TYPE_SFTP:"SFTP",DESTINATION_TYPE_RSYNC:"RSYNC",DESTINATION_TYPE_PARSE:"PARSE",DESTINATION_TYPE_NODEJITSU:"NODEJITSU",DESTINATION_TYPE_GIT:"GIT"}},5706:(e,t,n)=>{"use strict";n.r(t);var i=n(52308),r=n.n(i),a=n(96486),s=n.n(a),o=n(177),c=n.n(o),l=n(93443),u=n(97137),d=n(60989),p=n(49721),f=n(58471),h=n(95611),m=n(97044),g=n(50826),v=n(82943);var b=n(68058).I_,y=null,w=null,_=[{path:"",type:""}],k=c().compile('<form action="/" method="post" class="form-horizontal" id="deploy_info_dialog">\r\n    <p>Did you know that your deploys can be even faster? Blazingly fast even!</p>\r\n    <p>You are about to deploy over FTP/SFTP, which will deploy your entire project. If your project is large, then this could take a bit more time to complete.</p>\r\n    <p>If you deploy over Rsync, we will only deploy files that are new or have changed since the last deploy, thus making the deployment very fast.</p>\r\n    <p><a href="https://docs.codio.com/common/develop/ide/tools/deployment.html#rsync-target-type" target="_blank">Click here for more info.</a></p>\r\n\r\n\r\n    <label class="checkbox show-again">\r\n        <input type="checkbox" name="show-again" id="show-again" value="true">\r\n        Don\'t show me this message again\r\n    </label>\r\n</form>\r\n')();function P(e,t){if(!w){for(var n=[],i=0;i<t.length;i++)n.push(t[i].path);n.sort();var r="",a=[];n.forEach((function(e,t){0===t?(r=e,a.push(e)):0===e.indexOf(r)&&"/"===e.charAt(r.length)||(a.push(e),r=e)})),0!==a.length&&(u.Z.notify("Deployment started..."),w=new v.Z(e,{onComplete:function(e,t,n){x(e,null,n),Z()},onFail:function(e){x(!0,e),Z()},paths:n}))}}function Z(){w&&w.close(),w=null}function x(e,t,n){if(e)if(t)u.Z.error(t);else{t="Deployment to <span>"+n.name+'</span> failed! <a id="deploy-go-to-history" href="javascript:void(0)">View log.</a>';var i=u.Z.error(t),a=r()("#deploy-go-to-history");l.Z.on(a,"click",(function(){i.hide(),p.Z.ide.open("deployment","targets","Manage Targets","4:"+n.uid)}))}else u.Z.success("Deployment to <span>"+n.name+"</span> completed!")}function C(e){var t=e?e.destination.type:"";return b.get("skip-deploy-info")||t!==m.ZP.DESTINATION_TYPE_FTP&&t!==m.ZP.DESTINATION_TYPE_SFTP?Promise.resolve():new Promise((function(e,t){y=new f.Z({title:"Before you deploy...",buttons:[{title:"Continue",type:1,onClick:function(){return y.close(f.Z.IDOK)}},{title:"Abort",onClick:function(){return y.close(f.Z.IDCANCEL)}}],content:k,onClose:function(n){if(n===f.Z.IDOK)return e();t(new Error("deploy canceled"))},onHide:function(){y.content().find("#show-again").is(":checked")&&b.set("skip-deploy-info",!0),t(new Error("deploy canceled")),y=null}})}))}function S(e){var t,n=p.Z.currentProject;!p.Z.currentUser.isAnonymous()&&n&&n.isAdmin&&!y&&d.ZP.DeployManager.getProjectTargets(n.guid).then((function(e){return C(t=s().find(e.targets,(function(t){return t.uid===e.defaultTarget})))})).then((function(){t?g.ZP.canDeployFiles(t)?P(t.uid,e):u.Z.error("Unable to deploy on "+t.destination.type+" target type."):u.Z.error("There is no default target")})).catch((function(){}))}l.Z.subscribe("command:deployment:deploy-files:#id",(function(e,t){y||d.ZP.DeployManager.getTarget(e.id).then((function(e){return C(e)})).then((function(){return h.Z.saveAllAndWait()})).then((function(){t&&t.arg&&t.arg.tab?P(e.id,[{type:"file",path:t.arg.tab.filename}]):P(e.id,_)})).catch((function(){}))})),l.Z.subscribe("filetree:select",(function(e,t){_=t}));var E=function(e,t){"tree"===e.extension&&(_=[{type:"file",path:t.filename}])};l.Z.subscribe("tab:activated:#extension",E),l.Z.subscribe("tab:focus:#extension",E),l.Z.subscribe("command:deployment:deploy-file:#path",(function(e){S([{path:e.path,type:"file"}])})),l.Z.subscribe("command:deployment:key_deploy_current_file",(function(){var e;S((e=p.Z.ide.panels.focus&&p.Z.ide.panels.focus.activeTab())&&"tree"===e.extensionName?[{path:e.filename,type:"file"}]:_)})),l.Z.subscribe("ide:close",Z)},50826:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>h});var i=n(96486),r=n.n(i),a=n(60989),s=n(49721),o=n(93443),c=n(97137),l=n(97044),u=o.Z.create(n(38830)),d={title:"No targets. Create one now.",command:"file:open",params:{ext:"deployment",filename:"targets",title:"Manage Targets",view:2}},p=[l.ZP.DESTINATION_TYPE_CODIO,l.ZP.DESTINATION_TYPE_FTP,l.ZP.DESTINATION_TYPE_SFTP,l.ZP.DESTINATION_TYPE_RSYNC];var f=function(e){return r().includes(p,e.destination.type)};const h={updateMenu:function(){a.ZP.DeployManager.getProjectTargets(s.Z.currentProject.guid).then((function(e){!function(e){var t=[];r().forEach(e.targets,(function(n){var i=n.uid===e.defaultTarget,r="deployment:"+(i?"remove":"set")+"-default:",a={id:n.uid,title:n.name,command:r+n.uid,onOff:{defaultValue:i,toggle:!1}};t.push(a)})),0===t.length&&t.push(d);u.updateMenuTargets({items:t})}(e),function(e){var t=[];r().forEach(e.targets,(function(n){if(f(n)){var i="deployment:deploy-files:",r=n.uid===e.defaultTarget?" (default)":"",a={title:n.name+r,command:i+n.uid,safeTitle:!1};t.push(a)}})),0===t.length&&t.push(d);u.updateFiletreeDeployFiles({nodes:t}),u.updateTabDeployFile({nodes:t})}(e)})).catch((function(e){var t=e.message;c.Z.error(t)}))},canDeployFiles:f,hasDeployPermission:function(){return s.Z.currentUser&&!s.Z.currentUser.isAnonymous()&&s.Z.currentProject&&s.Z.currentProject.isAdmin}}},82943:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var i=n(15861),r=n(87757),a=n.n(r),s=n(98296),o=n.n(s),c=n(93443),l=n(60989),u=n(2514),d=n(52308),p=n.n(d),f=n(83940),h=n(96486),m=n.n(h),g=n(49721),v={},b=[["applications","_default","link"],["global","parseVersion"]];v.validateConfig=function(e,t){var n=e?e+"/"+v.CONFIG_FILE:v.CONFIG_FILE;if(g.Z.currentProject.exists(n))g.Z.currentProject.getFile(n).then((function(e){var n;i=[];try{n=JSON.parse(e)}catch(e){n={}}var r=[].concat(b),a=f.Z.getFieldValueByName(n,r[0]);m().isUndefined(a)||(r.push(["applications",a,"applicationId"]),r.push(["applications",a,"masterKey"])),p().each(r,(function(e,t){var r=f.Z.getFieldValueByName(n,t);m().isEmpty(r)&&i.push('"'+t.join(".")+'" may not be null.')})),0===i.length?t(!0):t(!1,i.join("<br/>"))})).catch((function(){t(!1,"Unable to get "+n+" from server.")}));else{var i="Config file not found. Make sure to define additional properties in "+n+" file.";t(!1,i)}},v.CONFIG_FILE="config/global.json";const y=v;var w=n(97044),_=n(1650),k=c.Z.create(n(38830)),P=/\[[0-9]{2}m/g,Z=function(e,t){this.options=t||{},this.target=null,this.closed=!1,e&&this.start(e)},x=Z.prototype;function C(e,t){!this.closed&&this.options[e]&&this.options[e].apply(this,t)}function S(){C.call(this,"onFail",arguments)}function E(){C.call(this,"onUpdate",arguments)}function I(){C.call(this,"onComplete",arguments)}function T(){C.call(this,"onStart",arguments)}function j(){return A.apply(this,arguments)}function A(){return(A=(0,i.Z)(a().mark((function e(){var t,n,i,r,s=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.call(this),t=null,n=null,this.log=[],e.prev=4,e.next=7,l.ZP.DeployManager.deploy(this.target.uid,this.options.paths,this.options.credentials);case 7:if(i=e.sent,!this.closed){e.next=10;break}return e.abrupt("return");case 10:return this.startTime=o()(),t="deploy/"+i.logId,n=_.Z.subscribeAll(t,(function(e){O.call(s,e,"IN_PROGRESS")})),e.prev=13,e.next=16,l.ZP.standardCallbackTask({message:i.taskId});case 16:(r=e.sent)&&O.call(this,void 0,r.status),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),O.call(this,void 0,"FAIL");case 23:return e.prev=23,_.Z.unsubscribe(t,n),e.finish(23);case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(4),S.call(this,"Unable to deploy at this time. Please try again.");case 31:case"end":return e.stop()}}),e,this,[[4,28],[13,20,23,26]])})))).apply(this,arguments)}function O(e,t){if(!this.closed){var n="FAIL"===t,i="Started "+this.fromStartedTime()+" ago...\n";e&&this.log.push(e),i+=this.log.join("\n").replace(P,""),"IN_PROGRESS"===t?E.call(this,i):I.call(this,n,i,this.target)}}function D(e,t,n){k.deployDefaultComplete({error:e,log:t,target:n})}x.start=function(e){var t=this;l.ZP.DeployManager.getTarget(e).then((function(e){t.target=e;var n=null;switch(e.destination?e.destination.type:null){case w.ZP.DESTINATION_TYPE_NODEJITSU:n=u.Z;break;case w.ZP.DESTINATION_TYPE_PARSE:n=y;break;default:j.call(t)}if(n){var i=e.source&&e.source.path;n.validateConfig(i,(function(e,n){e?j.call(t):S.call(t,n)}))}})).catch((function(){S.call(t,"Unable to fetch target data. Please try again.")}))},x.fromStartedTime=function(){return this.startTime&&o()().from(this.startTime,!0)},x.getTarget=function(){return this.target},x.close=function(){this.target=null,this.startTime=null,this.options=null,this.closed=!0},c.Z.subscribe("deployment:default:deploy",(function(){l.ZP.DeployManager.getDefault(g.Z.currentProject.guid).then((function(e){e&&e.message?function(e){var t=new Z(e,{onUpdate:function(e){k.deployDefaultProcessing(e)},onComplete:function(e,n,i){D(e,n,i),t.close()},onFail:function(e){D(!0,e),t.close()}})}(e.message):D(!0,"There is no default target")})).catch((function(){D(!0,"Error getting project default target")}))}));const N=Z},2514:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var i=n(52308),r=n.n(i),a=n(177),s=n.n(a),o=n(97137),c=n(20294),l=n(58471),u=n(96486),d=n.n(u),p=n(76638),f=d().partial(p.Z.request,"JitsuManager"),h={createToken:function(e,t){return f("createToken",{user:e,password:t},null,{noSpinner:!0})}};const m=h;var g=n(83940),v=n(49721);var b=s().compile('<form action="/" method="post" class="form-horizontal">\r\n\r\n    <p>\r\n        Please provide your Nodejitsu username and password to generate an API Token. These details are not stored on our servers and simply passed directly to the Nodejitsu API.\r\n    </p>\r\n\r\n    <div class="control-group">\r\n        <label class="control-label" for="user-name">Username:</label>\r\n        <div class="controls">\r\n            <input type="text" value="{{username}}" name="Username" id="user-name" required autofocus placeholder="Your Nodejitsu username..." class="input-xlarge">\r\n        </div>\r\n    </div>\r\n\r\n    <div class="control-group">\r\n        <label class="control-label" for="user-password">Password:</label>\r\n        <div class="controls">\r\n            <input type="password" name="Password" id="user-password" required placeholder="Your Nodejitsu password..." class="input-xlarge" >\r\n        </div>\r\n    </div>\r\n\r\n</form>'),y={},w=[["name"],["subdomain"],["scripts","start"],["version"]];function _(e){e.preventClosing(!1);var t=e.content();e.buttons()[0].enable(!0),e.buttons()[1].enable(),t.find(":input").prop("disabled",!1)}y.validateConfig=function(e,t){var n=e?e+"/"+y.CONFIG_FILE:y.CONFIG_FILE;if(v.Z.currentProject.exists(n))v.Z.currentProject.getFile(n).then((function(e){var n;i=[];try{n=JSON.parse(e)}catch(e){n={}}r().each(w,(function(e,t){var r=g.Z.getFieldValueByName(n,t);d().isEmpty(r)&&i.push('"'+t.join(".")+'" may not be null.')})),0===i.length?t(!0):t(!1,i.join("<br/>"))})).catch((function(){t(!1,"Unable to get "+n+" from server.")}));else{var i="Config file not found. Make sure to define additional properties in "+n+" file.";t(!1,i)}},y.generateApiToken=function(e){var t=new l.Z({title:"Generate Nodejitsu API Token",buttons:[{title:"Generate",type:1,onClick:function(){!function(e,t){var n=e.content().find("form");if(!function(e){var t=!0,n=e.find("input[required]");return r().each(n,(function(e,n){return null!==this.value&&""!==this.value||(c.ZP.addErrorToInput(n,this.name+" is required"),t=!1),t})),t}(n))return;!function(e){e.preventClosing(!0);var t=e.buttons()[0];t.disable("Generating...","loading"),e.buttons()[1].disable(),e.content().find(":input").prop("disabled",!0)}(e);var i=n.find("#user-name").val(),a=n.find("#user-password").val();m.createToken(i,a).then((function(n){if(_(e),Object.prototype.hasOwnProperty.call(n,"error")){var i=d().has(n.error,"error")?n.error.error:n.error;o.Z.error("Unable to generate token. "+i)}else t(n.token);e.close(l.Z.IDOK)})).catch((function(){_(e),e.close(l.Z.IDCANCEL),o.Z.error("Unable to generate token. Please check your Nodejitsu username and password, then try again.")}))}(this,e)}},{title:"Cancel",onClick:function(){return t.close(l.Z.IDCANCEL)}}],content:r()(b({username:r()("#deploymentTargetNodejitsuUserName").val()}))})},y.CONFIG_FILE="./package.json";const k=y},83940:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(96486),r=n.n(i),a=n(52308),s=n.n(a),o=n(49721),c=n(54565),l={getFieldValueByName:function(e,t){if(s().isArray(t)&&0!==t.length){for(var n=e,i=0;i<t.length;i++){var a=t[i];if(!r().has(n,a))return;n=n[a]}return n}},getCodioDeployUrl:function(){var e=o.Z.currentProject.path.split("/"),t=c.Z.get("deploy");r().isUndefined(t)&&(t={codio:{schema:"http",domain:"cod.io"}});var n=t.codio;return[n.schema,"://",e[0].toLowerCase(),".",n.domain,"/",e[1].toLowerCase(),"/"].join("")}};const u=l},45113:(e,t,n)=>{"use strict";n.d(t,{LK:()=>l,Q4:()=>p,bz:()=>c,c1:()=>u,co:()=>a,rx:()=>o});var i=n(96486),r=n.n(i),a={READ_ONLY:"ON_COMPLETED_READ_ONLY",READ_ONLY_AFTER_RELEASE_GRADES:"ON_COMPLETED_AND_RELEASE_GRADES_READ_ONLY",NO_ACCESS:"ON_COMPLETED_NO_ACCESS",NONE:"ON_COMPLETED_NONE"},s={restrictionOnDisabled:"ON_DISABLED_NO_ACCESS",restrictionOnCompleted:a.READ_ONLY};function o(e){return r().defaults(c(e),s)}function c(e){return e.projectBased?e.projectBased.settings:e.bookBased.settings}function l(e,t,n){var i=c(t);return e.archived||i.isDisabled&&!function(e,t){var n=d(e,t);if(n&&e.end){return new Date(e.end.time).getTime()+6e4*n>Date.now()}return!1}(i,n)}function u(e){return r().defaults(function(e){return e.projectBased?e.projectBased.id:e.bookBased.id}(e),"")}function d(e,t){var n=r().get(e,"penaltiesPerStudent",{}),i=r().get(e,"penaltiesPerGroup",{}),a=t.groupId?i:n,s=t.groupId||t.userId;return r().get(a,s,{}).extend||0}var p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;if(0===e.penalty.length)return null;var i=6e4*d(e,t);return r()(e.penalty).filter((function(e){return new Date(e.applyAfter).getTime()+i<n.getTime()})).maxBy((function(e){return new Date(e.applyAfter).getTime()}))}},72375:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ut});var i,r=n(15861),a=n(87757),s=n.n(a),o=n(96486),c=n.n(o),l=n(52308),u=n.n(l),d=n(177),p=n.n(d),f=n(49721),h=n(60989),m=n(93443),g=n(44442),v=n(97137),b=n(58471),y=n(20294),w=n(76638),_=n(70885),k=n(95611),P=n(4942),Z=(i={},(0,P.Z)(i,0,"processing"),(0,P.Z)(i,1,"successful"),(0,P.Z)(i,2,"error"),i),x={SIMPLE:"SIMPLE",WITH_STACK:"WITH_STACK"};const C={PUBLISH_TYPE:x,PUBLISH_STATUS:Z,PUBLISH_STATUS_PROCESSING:0,PUBLISH_STATUS_SUCCESSFUL:1,PUBLISH_STATUS_ERROR:2};var S=p().compile('<div class="simple-publish">\n  <label for="assignment-changelog" class="assignment-publish-changelog-label">Changelog</label>\n  <textarea id="assignment-changelog" rows="6" placeholder="Assignment versions changelog..."></textarea>\n  {{#if isGigaBoxChanged}}\n  <div class="assignment-publish-change-gigabox-label">\n    <label class="checkbox">\n      <input type="checkbox" id="assignment-publish-change-gigabox" checked />\n      Propagate gigabox settings to the assignment settings\n    </label>\n  </div>\n  {{/if}}\n</div>\n'),E=p().compile('<div class="assignment-started-publish">\n  <h3>Students have started this assignment</h3>\n  <div>\n    Changes to assessment items Grading and Execution tab might overwrite previous student submissions.<br/>\n    Existing files outside .guides will not be updated but you can add new files.\n  </div>\n  <div class="safe-changes closed">\n    <h4 class="safe-changes-toggle">\n      <i class="ss-icon opened">navigatedown</i>\n      <i class="ss-icon closed">navigateright</i>\n      What are safe changes?\n    </h4>\n    <ul class="safe-changes-list">\n      <li>files inside .guides (Guides text, images, auto-grading scripts, etc)</li>\n      <li>page layout</li>\n      <li>assessments in General, Metadata or Files tabs</li>\n      <li>adding new files outside of .guides</li>\n      <li>adding new assessments</li>\n    </ul>\n  </div>\n  <div class="assignment-changelog-container">\n    <label for="assignment-changelog" class="assignment-publish-changelog-label">Changelog</label>\n    <textarea id="assignment-changelog" rows="4" placeholder="Assignment versions changelog..."></textarea>\n  </div>\n  <div>\n    If you made changes to the stack (like installing software or libraries) and&nbsp;\n    <a href=\'https://docs.codio.com/common/develop/stacks/update-stack.html#update-stack-from-the-ide\' target=\'_blank\'>\n      published a new Stack version\n    </a>\n    , assignments set to&nbsp;\n    <a href=\'https://docs.codio.com/develop/develop/stacks/stack-planning.html#use-latest-version\' target=\'_blank\'>\n      "Use Latest Version"\n    </a>\n    &nbsp;have received the update.\n  </div>\n  <br/>\n  <div>\n    If you created a new stack, switched stacks or do not have the assignment setup\n    to use the latest version, use the Publish with stack update button to update all student stacks.\n  </div>\n  {{#if isGigaBoxChanged}}\n  <div class="assignment-publish-change-gigabox-label">\n    <label class="checkbox">\n      <input type="checkbox" id="assignment-publish-change-gigabox" checked />\n      Propagate gigabox settings to the assignment settings\n    </label>\n  </div>\n  {{/if}}\n</div>\n'),I=p().compile("<div class=\"versions-publish\">\n    {{#if itemsList}}\n    <section class='versions-container'>\n        <ul class='versions-list'>\n            {{#each itemsList}}\n            <li class='versions-item'>\n                <span class='versions-item-circle'></span>\n                <div class='versions-item-block'>\n                    <div class='versions-item-status versions-item-status-{{status}}'>{{statusText}}</div>\n                    <div class='versions-item-actions'>\n                        <h3 class='versions-item-label'>{{versionLabel}}</h3>\n                    </div>\n                    <div class='versions-item-message complete'>\n                        {{publisherText}}\n                        {{#if stackVersion}}\n                        <div class='versions-item-stackVersion'>\n                            Stack Version: {{stackVersion}}\n                        </div>\n                        {{/if}}\n                        {{#if changelog}}\n                        <div class='versions-item-changelog'>\n                            Changelog: {{changelog}}\n                        </div>\n                        {{/if}}\n                    </div>\n                </div>\n            </li>\n            {{/each}}\n        </ul>\n    </section>\n    {{else}}\n    <div class=\"publish-list-loader\">\n        <i class=\"icon icon-spinner\"></i>\n    </div>\n    {{/if}}\n</div>\n"),T=null,j=null,A={},O={},D=m.Z.create(n(10));function N(e,t){var n=c().compact(c().uniq(e.map((function(e){return c().replace(e.stackVersionId,/:latest$/,"")})))),i=c().compact(c().uniq(e.map((function(e){return e.userId}))));t&&!n.includes(t)&&n.push(t);var r=c().filter(n,(function(e){return!O[e]})),a=c().filter(i,(function(e){return!A[e]}));return c().isEmpty(r)&&c().isEmpty(a)?Promise.resolve():Promise.all([c().isEmpty(a)?[]:h.ZP.AccountManager.all(null,a),c().isEmpty(r)?[]:h.ZP.StacksManager.getStacksByVersionIds(r)]).then((function(e){var t=(0,_.Z)(e,2),n=t[0];t[1].forEach((function(e){e.versions.forEach((function(t){O[t.id]=e}))})),n.forEach((function(e){return A[e.id]=e}))}))}function M(e){e.preventDefault(),u()(this).closest(".safe-changes").toggleClass("closed")}function F(e,t){var n=[{title:"Publish",type:1,onClick:function(){return T.close(x.SIMPLE)}},{title:"Close",type:0,onClick:function(){return T.close()}}];e&&n.splice(1,0,{title:"Publish with stack update",type:0,css:"btn-danger",onClick:function(){T.close(x.WITH_STACK)}});var i={isGigaBoxChanged:t},r=u()(S(i)),a=u()(E(i)),s=e?a:r;s.on("click",".safe-changes-toggle",M),T=new b.Z({title:"Publish Assignment",className:"publish-assignment-dialog",content:s,buttons:n,width:e?650:300,onHide:function(){D.publishDialogClosed(),s.off("click"),T=null},onClose:function(e){if(e===x.SIMPLE||e===x.WITH_STACK)return function(e,t,n){var i,r=f.Z.currentProject;h.ZP.CourseManager.initiatePublishAssignment(r.authorAssignment.assignment.id,e,t,n).then((function(e){return N(i=e.publishResultsList).then((function(){L(i)})),h.ZP.CourseManager.waitPublishAssignmentComplete(e.taskId)})).then((function(e){if(e){var t=c().trimEnd(e.stackVersionId,":latest");N(i,t).then((function(){U(i,e),f.Z.currentProject.setNeedPublish(!1).then((function(){return D.updatePublishBtnVisibility()}))}))}})).catch((function(e){v.Z.error(function(e){var t=/(.*)(<<<intercom>>>)(.*)(<<<\/intercom>>>)(.*)/;if(t.test(e)){var n=e.replace(t,"$1"),i=e.replace(t,"$5");return n+'<a href="mailto:help@codio.com">'+e.replace(t,"$3")+"</a>"+i}return e}(e.message)),U(i)}))}(s.find("#assignment-changelog").val(),e===x.WITH_STACK,s.find("#assignment-publish-change-gigabox").prop("checked")),function(){var e=f.Z.currentProject.authorAssignment.course.id,t=[{title:"Return to dashboard",type:1,onClick:function(){return location.assign("/home/teacher/".concat(e,"?tab=edit"))}},{title:"Close",type:0,onClick:function(){return j.close()}}],n=u()(S());j=new b.Z({title:"Versions",className:"publish-assignment-dialog versions",content:I(),buttons:t,width:650,onHide:function(){n.off("click"),j=null}})}(),!1}})}function R(e){return e.map((function(e){var t;t=e.createdAt?y.ZP.formatDateFullUSWithoutTZ(e.createdAt):e.taskId;var n=null;if(e.userId){var i=A[e.userId],r=i&&i.actual_name||"Unknown";n="Published by: ".concat(r)}var a,s=e.stackVersionId,o=c().replace(e.stackVersionId,/:latest$/,""),l=O[o];if(a=l&&l.versions.find((function(e){return e.id===o})),l){var u=l.name;if(c().includes(e.stackVersionId,":latest"))s="latest of ".concat(u);else if(a){var d=y.ZP.formatDateFullUSWithoutTZ(a.timestamp);s="".concat(a.version," (").concat(d,") of ").concat(u)}}return{versionLabel:t,stackVersion:s,changelog:e.changelog,publisherText:n,statusText:Z[e.status].toUpperCase(),status:Z[e.status]}}))}function L(e){j&&j.content(I({itemsList:R(e)}))}function U(e,t){var n=c().cloneDeep(e),i=c().head(n);t?(i.status=C.PUBLISH_STATUS_SUCCESSFUL,i.stackVersionId=t.stackVersionId):i.status=C.PUBLISH_STATUS_ERROR,L(n)}function B(){var e=f.Z.currentProject.authorAssignment,t={assignment:{stats:!0}},n=e.assignment.id;k.Z.saveAllAndWait().then((function(){return h.ZP.CourseManager.findOne(e.course.id,n,null,null,t)})).then((function(t){if(!t)throw new Error("No course found");var i=c().find(t.unitsList,{id:e.unit.id}),r=c().find(i.assignmentsList,(function(e){return e.projectBased&&e.projectBased.id===n})),a=c().get(r,"projectBased.settings.gigaBoxSlot.boxType"),s=f.Z.currentProject,o=s.gigaBoxSlot&&s.gigaBoxSlot.boxType||void 0;F(c().get(r,"projectBased.stats.startedStudentsCount.value",!1),a!==o)})).catch((function(e){v.Z.error(e.message)}))}m.Z.subscribe("publish:showDialog",(function(){B()}));m.Z.subscribe("project:open",(function(){var e=f.Z.currentProject,t=c().get(e,"authorAssignment.assignment.versionIds",[]);!e.needPublish&&c().isEmpty(t)&&f.Z.currentProject.setNeedPublish(!0).then((function(){return D.updatePublishBtnVisibility()}))}));const q={showDialog:B};var H=p().compile('<div class="timed-mode-countdown">\n  Time remaining <span id="timedCountdown"></span>\n</div>'),W=p().compile('<div class="timed-countdown-block ui-blocker-content">\n  <span>\n    <span class="spinner" />\n    {{{message}}}\n  </span>\n</div>'),z=u()("#toolbars"),G=u()("#content"),V=null,K=null,Y=function(){var e=f.Z.currentProject;if(K){var t=e.eduStartedAssignmentInfo.assignment,n=t.projectBased?t.projectBased.settings:t.bookBased.settings,i=n.end,r=e.examMode.timedMode,a=e.eduStartedAssignmentInfo.started.assignee,s=a.userId||a.groupId,o=n.extendedExamTimesPerStudent,l=n.extendedExamTimesPerGroup,d=n.penaltiesPerStudent,p=n.penaltiesPerGroup,h=a.userId?o:l,m=c().get(h,s,{}),g=m.extend&&r.enabled?m.extend:0,v=a.userId?d:p,b=c().get(v,s,{}),y=b.extend?6e4*b.extend:0,w=i&&i.time?new Date(i.time).getTime()+y:Number.MAX_VALUE,_=e.created+6e4*(r.duration+g),k=Math.min(w,_),P=Math.max(k-Date.now(),0);if(P){var Z=Math.floor(P/6e4),x=Math.floor(Z/1440),C=Math.floor(Z/60-24*x),S=Z-60*C-1440*x;K.find("#timedCountdown").html("".concat(x," days ").concat(C," hours ").concat(S," minutes"))}else G.block({content:u()(W({message:"Completing assignment..."})),className:"ui-blocker-with-message fullscreen"})}},J=function(e,t){var n=f.Z.currentProject;t&&K&&(V&&clearInterval(V),V=null,K&&K.remove(),K=null,G.unblock());var i=n.examMode;K||!i.timedMode.enabled||t||(K=u()(H()),Y(),z.prepend(K),V=setInterval(Y,6e4))},Q=n(45113);var X=p().compile("<h4 class='centered'>\n  You will have until {{formatDateFullUS untilDate}} to complete this assignment.<br/>\n  If you do not complete your assignment before then, it will automatically be marked as complete.\n</h4>"),$=p().compile('<h4>\n  This assignment only allows a single login per user. Please make sure you have....\n</h4>\n<ol class="startAssignment--singleLogin">\n  <li>Closed other tabs or browsers with Codio</li>\n  <li>Stable Internet connection</li>\n  <li>Enough power in your device</li>\n  <li>Plenty of time</li>\n</ol>\n<br/>\n<strong>\n  Once you start this assignment, if your computer gets disconnected from\n  the network and reconnects with a new IP address, you will be locked out.\n</strong>'),ee=function(e,t){var n=u()('<div class="startAssignment-content centered"></div>'),i=e.examMode,r=i.timedMode,a=i.singleLogin;return r.enabled&&n.append(function(e,t){var n=e.end,i=e.examMode.timedMode,r=n&&n.time?new Date(n.time).getTime():Number.MAX_VALUE,a=e.extendedExamTimesPerStudent&&e.extendedExamTimesPerStudent[t],s=a&&a.extend?a.extend:0,o=Date.now()+6e4*(i.duration+s),c=Math.min(r,o);return u()(X({untilDate:c}))}(e,t)),a&&n.append(u()($())),n},te=function(e){var t=f.Z.currentProject,n=f.Z.currentUser.account,i=(t||{}).eduStartedAssignmentInfo;if(!i)return Promise.resolve(!1);var r=i.assignment,a=i.started,s=(0,Q.bz)(r);if(!s.examMode)return Promise.resolve(!0);var o=s.examMode,c=o.timedMode,l=o.singleLogin,u=e||!a||!a.projectId,d=c.enabled||l;return u&&d?function(e,t){return new Promise((function(n){var i=b.Z.showConfirm({title:"Start Assignment Warning",description:ee(e,t),width:600,buttons:[{title:"Start Assignment",type:1,onClick:function(){i&&i.close(),n(!0)}},{title:"Cancel",onClick:function(){i&&i.close(),n(!1)}}],onHide:function(){n(!1)}})}))}(s,n).then((function(e){return e&&l?h.ZP.AccountManager.upgradeSessionToStrict().then((function(){return e})):e})):Promise.resolve(!0)},ne=function(e,t,n){window.sessionStorage.removeItem("codio_sso_token");var i="".concat(window.location.origin,"/home/student?course_id=").concat(e,"&assignment_id=").concat(t),r=window.btoa(unescape(encodeURIComponent(i))),a="?responseUrl=".concat(r);window.location.href="".concat(window.location.origin,"/oauth_api/ssoAccessToken/").concat(n).concat(a)},ie=function(e,t,n){return te(n).then((function(i){if(i)return function(e,t){var n=window.sessionStorage.getItem("codio_sso_token");return h.ZP.CourseManager.ensureAssignmentStarted(t,n).then((function(e){location.assign(y.ZP.getProjectIdeUrl(e))})).catch((function(n){if(n.message.includes("CUSTOM_AUTHENTICATION_REQUIRED")){var i=n.message.match("{(.*)}")?n.message.match("{(.*)}")[1]:"";ne(e,t,i)}}))}(e,t);n&&y.ZP.goBackOrLocation("/"+f.Z.currentUser.name())}))},re=n(97441);var ae=new Map;function se(e,t){for(var n=ae.get(e).maxRate,i=ae.get(e).parent,r=1;r<=n;r++)t>=r?i.find("[data-rate='".concat(r,"'][data-parentid='").concat(e,"']")).addClass("isRated"):i.find("[data-rate='".concat(r,"'][data-parentid='").concat(e,"']")).removeClass("isRated")}const oe={addRate:function(e,t,n,i){var r,a,s=e.find(t),o="rateContainer-'".concat(c().random(1e3),"'"),l=u()('<div class="rateContainer" id='+o+"></div>").on("mouseleave",(function(e){return function(e){se(e.currentTarget.id,ae.get(e.currentTarget.id).rated)}(e)}));ae.set(o,{parent:s,maxRate:n,onChooseFunc:function(e){return i(e)},rated:0});for(var d=1;d<=n;d++)l.append((r=d,a=o,u()('<div class="rateItem">'+r+"</div>").on("click",(function(e){return function(e){var t=e.currentTarget.dataset.parentid,n=e.currentTarget.dataset.rate;ae.get(t).rated=n,ae.get(t).onChooseFunc(n)}(e)})).attr("data-rate",r).attr("data-parentid",a).on("mouseenter",(function(e){return function(e){se(e.currentTarget.dataset.parentid,e.currentTarget.dataset.rate)}(e)}))));s.append(l)}};var ce=p().compile('<div class="survey-dialog">\n    <div class="survey-dialog-question">\n    </div>\n    <div class="survey-dialog-answer form">\n        {{#equals questionType "FREE_TEXT"}}\n            <label class="form-label" for=".survey-dialog-answer--free-text">\n              Answer\n            </label>\n            <textarea\n                class="survey-dialog-answer--free-text"\n                placeholder="place your answer here..."\n                rows = "5"\n                maxlength="4000"></textarea>\n        {{/equals}}\n        {{#equals questionType "RATE"}}\n            <div class="survey-dialog-answer--rate">\n            </div>\n        {{/equals}}\n    </div>\n</div>\n'),le=Q.rx,ue=Q.c1,de=10,pe=Object.freeze({NEXT_BUTTON:{title:"Next question",type:1,onClick:function(){return function(){if(ke(),he&&be<ye){var e=me[++be];he.content(_e(e)),be==ye-1&&he.buttons([pe.FINISH_BUTTON])}}()}},FINISH_BUTTON:{title:"Finish",type:1,onClick:function(){return ke(),be=-1,h.ZP.CourseManager.pushSurveyAnswers(ge,ve,we),void he.close()}}}),fe=Object.freeze({FREE_TEXT:"FREE_TEXT",RATE:"RATE"}),he=null,me=null,ge=null,ve=null,be=-1,ye=null,we={};function _e(e){var t=e.questionType||fe.RATE,n=u()(ce({questionType:t}));return y.ZP.toHTML(e.question).then((function(e){n.find(".survey-dialog-question").html(e)})),t===fe.RATE&&oe.addRate(n,".survey-dialog-answer",de,(function(e){return ke(e)})),n}function ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==e){if((me[be].questionType||fe.RATE)===fe.FREE_TEXT){var t=he.params.content.find(".survey-dialog-answer--free-text").val();if(c().isEmpty(t))return;we[be]={freeText:t}}}else we[be]={rate:parseInt(e)}}const Pe={showDialog:function(){var e=c().get(f.Z.currentProject,"eduStartedAssignmentInfo.assignment");ve=ue(e);var t=le(e);if(me=c().get(t,"survey.questions"),c().isEmpty(me))return Promise.resolve();ge=c().get(t,"survey.surveyId"),ye=c().size(me);var n=me[++be],i=ye>1?[pe.NEXT_BUTTON]:[pe.FINISH_BUTTON],r=_e(n);return new Promise((function(e){he=new b.Z({title:"Survey",icon:"checkclipboard",className:"survey-assignment-dialog",content:r,buttons:i,width:650,focusOn:r.find(".survey-dialog-answer--free-text"),onClose:function(){return e(),!0}})}))}};var Ze=p().compile('<div>\n  {{#if showDraftedNotAnswered}}\n    <div class="on-complete-confirmation-sections-block">\n      {{#if hasNotAnswered}}\n      Assessments on\n      {{#if moreThen5pagesNotAnswered}}\n      more than 5 pages\n      {{else}}\n      the following page{{#if sectionsWithNotAnsweredAssessments.length}}s{{/if}}\n      {{/if}}\n      are not answered{{#if moreThen5pagesNotAnswered}}.{{else}}:{{/if}}\n      {{#unless moreThen5pagesNotAnswered}}\n      <ul class="on-complete-confirmation-sections-list">\n      {{#each sectionsWithNotAnsweredAssessments}}\n        <li>{{title}}</li>\n      {{/each}}\n      </ul>\n      {{/unless}}\n      <br/>\n      {{/if}}\n      {{#if hasDrafted}}\n      Assessments on the following page{{#if sectionsWithDraftedAssessments.length}}s{{/if}} are not submitted:\n      <ul class="on-complete-confirmation-sections-list">\n      {{#each sectionsWithDraftedAssessments}}\n        <li>{{title}}</li>\n      {{/each}}\n      </ul>\n      <br/>\n      <div class="on-complete-confirmation-sections-checkbox-container">\n        <label class="checkbox">\n          <input type="checkbox" class="js-autosubmit-drafted" checked />\n          Submit all assessments\n        </label>\n      </div>\n      <br/>\n      {{/if}}\n      <br/>\n    </div>\n  {{/if}}\n  {{#if isTeacher}}\n    {{#if completed}}\n      Changing this assignment to Completed will set the Completed Date to today.\n    {{else}}\n      Changing this assignment to Incomplete will remove any existing Date of Completion\n      that is currently stored.\n    {{/if}}\n  {{else}}\n    {{#if readOnlyOnComplete}}\n      Once you mark the assignment as complete you will retain only read-only access.\n      You will not be able to make any further changes or run any programs of any kind.\n    {{else}}\n      {{#if noneOnComplete}}\n        You will be able to access and work in files in the assignment but any assessments in guides will not be accessible.\n        <br /><br />\n        Do you want to continue?\n      {{else}}\n        Once you mark the assignment as complete you lose full access to the assignment.\n        You will not be able to make any further changes or run any programs of any kind.\n      {{/if}}\n    {{/if}}\n    <br />\n    {{#unless noneOnComplete}}\n      <br />\n      If you acknowledge that you will no longer be able to make changes,\n      please type "yes" into the box below.\n    {{/unless}}\n  {{/if}}\n</div>\n'),xe=m.Z.create(n(10));g.Z.hotkey.plugin("education",n(9490));var Ce=null,Se=null,Ee=null,Ie=!1,Te=!1,je=!1,Ae=!1,Oe=".codio-jupyter",De="reset_assignment";function Ne(e){Ce=e,function(){var e=Ue(),t=Ce.assignment,n=(0,Q.bz)(t);n&&(n.isDisabled=e)}(),xe.eduStartedAssignmentInfoLoaded(Ce),Me();var t=nt(Ce.started);J(Ce,t)}function Me(){var e=[];!function(e){if(!Ce)return;var t=Ue(),n=f.Z.currentProject.isUserAssignee?"Grades":"Grading";Ee&&e.push({title:n,command:"file:open",params:{ext:"grading",filename:""}});var i=f.Z.currentProject,r=i.guides,a=i.isUserAssignee,s=f.Z.currentProject.eduStartedAssignmentInfo.assignment,o=!r||!1!==r.metadata.useMarkAsComplete;(a&&o||Ee)&&(nt(Ce.started)?(e.push({title:"Mark as Uncompleted",command:"education:mark_as_uncompleted",disabled:t||!Ie&&!Ee||tt(s)&&!Ee}),(0,Q.bz)(s).releaseGrades&&e.push({title:"Feedback",command:"education:feedback"}),Ee&&e.push({title:"Behavioral Player",command:"education:behavioralPlagiarismPlayer"})):e.push({title:"Mark as Completed",command:"education:mark_as_completed",disabled:t||!Ie&&!Ee}))}(e),function(e){if(!Te)return;e.push({title:"Test Autograde Script",command:"file:open",params:{ext:"test-autograde",filename:""}})}(e),function(e){var t=f.Z.currentProject;t.isAdmin&&!t.eduStartedAssignmentInfo&&t.exists(Oe)&&e.push({title:"Validate Jupyter",command:"file:open",params:{ext:"validate-jupyter",filename:""}})}(e),function(e){var t=f.Z.currentProject;t.isAuthorProject&&!t.isBookWriter&&e.push({title:"Publish Assignment",command:"education:publish_assignment"})}(e),function(e){e.push({title:"Code Comments",command:"file:open",params:{ext:"code-comments",filename:""}})}(e),function(e){if(!Fe())return void Re(!1);Re(!0),e.push({title:"Writable Copy",command:"education:writable"})}(e),function(e){if(!Le())return;e.push({title:"Reset assignment",command:"education:reset_assignment_by_student"})}(e),function(e){var t=f.Z.currentProject;(t.isAuthorProject||t.isAdmin&&!t.eduStartedAssignmentInfo)&&e.push({title:"Clear Assessment Answers",command:"education:clear_assessment_answers"})}(e),0!==e.length&&xe.updateEducationMenuItem({disabled:!1,items:e})}function Fe(){return Ce&&f.Z.currentProject.course&&Ee&&!Ce.started.isTemporary&&!f.Z.currentProject.writableCopy}function Re(e){xe.writableCopyMenuVisibility({state:e})}function Le(){var e=Ce&&Ce.assignment;return!!e&&(0,Q.bz)(e).enableResetAssignmentByStudent}function Ue(){if(!Ce||!f.Z.currentProject.course)return!0;var e=f.Z.currentProject.course,t=Ce.started.assignee;return(0,Q.LK)(e,Ce.assignment,t)}var Be=function(e){var t=e.assignment;return t?t.projectBased?t.projectBased.id:t.bookBased.id:""},qe=function(e){var t=e.assignment,n=(0,Q.bz)(t);return n?n.name:""};function He(){return We.apply(this,arguments)}function We(){return We=(0,r.Z)(s().mark((function e(){var t,n,i,r,a,o,c,l,u,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.Z.currentProject.eduStartedAssignmentInfo){e.next=3;break}return e.abrupt("return");case 3:if(n=f.Z.currentProject.course,i=t.assignment,nt(r=t.started)&&(0,Q.bz)(i).releaseGrades){e.next=7;break}return e.abrupt("return");case 7:return a=f.Z.currentUser.get("details").get("lowerName"),o=r.assignee.userId?h.ZP.AccountManager.findById(r.assignee.userId).then((function(e){return e.details.lowerName})):a,e.next=11,o;case 11:c=e.sent,f.Z.currentProject.temporaryDisableProtectLayout(),l=y.ZP.url.parse(window.location.href),u=Be(t),d=r.assignee.groupId,xe.openPreview({arg:{file:"".concat(l.protocol,"//").concat(l.host,"/home/student/feedback/").concat(c,"/").concat(n.id,"/").concat(u).concat(d?"/".concat(d):""),title:"Feedback"}});case 17:case"end":return e.stop()}}),e)}))),We.apply(this,arguments)}var ze=function(){var e=f.Z.currentProject;if(e.eduStartedAssignmentInfo){var t=Be(e.eduStartedAssignmentInfo);h.ZP.CourseManager.loadAssessmentGradingRubrics({assignmentId:t}).then((function(e){Se=e,xe.rubricsLoaded(e)})).catch((function(e){return v.Z.error(e.message)}))}};function Ge(){var e,t=f.Z.currentProject;if(ze(),t.eduStartedAssignmentInfo&&xe.updateForkMenuItem({visible:!1}),t.eduStartedAssignmentInfo&&(!t.writableCopy&&xe.updateDeleteProjectMenuItem({visible:!1}),xe.updateProjectPermissionsMenuItem({visible:!1})),t.eduStartedAssignmentInfo&&!t.isOpenedByTeacher){var n=Xe(t.eduStartedAssignmentInfo);xe.updateExportAsZipMenuItem({visible:!n}),xe.updateFiletreeDownload({visible:!n}),xe.updateFiletreeExportZip({visible:!n}),xe.filterCodioMenu()}t&&(t.isAdmin&&!t.eduStartedAssignmentInfo&&h.ZP.EducationOrganizationsManager.find().then((function(e){Te=c().some(e,(function(e){return e.teachers.requestorIsMember})),Me()})),t.eduStartedAssignmentInfo&&(Ie=function(e){var t=e.assignment;return(0,Q.bz)(t).studentCanComplete}(t.eduStartedAssignmentInfo),Ee=t.isOpenedByTeacher,Ne(t.eduStartedAssignmentInfo),e=m.Z.subscribe("guides.player:on_activate",(function(){m.Z.unsubscribe(e),He()})),!t.isReadOnly||Ee||Ae||function(e){var t=y.ZP.promise.deferred(),n=e?"This project is marked as completed. You can not edit it. <br/>If you require further access to the project, mark it as uncompleted.":"This project is marked as completed. You can not edit it. <br/>If you require further access to the project, contact your teacher.",i=[{title:"ok",type:1,onClick:function(){return a.close()}}],r={title:"Reset Assignment",onClick:function(){return t.resolve(De),lt(),a.close()}};Le()&&(i.push(r),n="This assignment is marked as completed but if you wish you can reset to start again. \n      To reset the assignment either select the button below or go to Education > Reset Assignment menu item");var a=b.Z.showWarning({title:"Warning",description:n,buttons:i,doNotCloseOpened:!0,width:700,onClose:function(){t.resolve()},onHide:function(){t.resolve()}});return t.promise}($e(t.eduStartedAssignmentInfo.assignment)).then((function(e){e!==De&&it()})))),xe.updatePublishBtnVisibility()}var Ve=function(e){var t=y.ZP.promise.deferred(),n=f.Z.currentProject.eduStartedAssignmentInfo,i=n.started,r=n.assignment;if(i.penaltyDisabled)return u().Deferred().resolve(!0);var a=i.completed.completedAt,s=i.assignee,o=(0,Q.bz)(r),l=(0,Q.Q4)(o,s,new Date(a)),d=(0,Q.Q4)(o,s);if(!(d&&(!l||new Date(d.applyAfter)>new Date(l.applyAfter))))return Promise.resolve(!0);var p=c().findIndex(o.penalty,(function(e){return e.id===d.id})),h="Deadline ".concat(p+1," has been reached.\n        This deadline carries a penalty of ").concat(d.percent,"%.\n        If you proceed, a ").concat(d.percent,"% penalty deduction will be\n        applied to ").concat(e?"student's":"your"," overall results."),m=function(){g&&g.close(),g=null},g=b.Z.showConfirm({title:"Late penalty warning",description:h,width:700,buttons:[{title:"Mark Incomplete and Receive Late Penalty",onClick:function(){m(),t.resolve(!0)},type:1},{title:"Cancel",onClick:function(){m(),t.resolve(!1)}}],onHide:function(){t.resolve(!1)}});return t.promise};function Ke(e){var t=Promise.resolve();e&&(t=y.ZP.promise.delay(1e3,null).then(xe.saveBeforeComplete).then(re.Z.getDraftedAndNoAnsweredAssessments).then((function(e){if(!(c().isEmpty(e.drafted)&&c().isEmpty(e.notAnswered)))return{assessmentsInfo:e,sectionsDrafted:re.Z.getSectionsForAssessments(e.drafted),sectionsNotAnswered:re.Z.getSectionsForAssessments(e.notAnswered)}})));return t.then((function(t){if(!Ee){if(!e)return Ve(Ee).then((function(e){if(e)return Qe(!1)}));var n=t?t.assessmentsInfo:null,i=!n||c().isEmpty(n.drafted)&&c().isEmpty(n.notAnswered),r=f.Z.currentProject.eduStartedAssignmentInfo.assignment;if(i&&$e(r))return Qe(!0)}var a=Ee||e?function(e,t,n){var i=f.Z.currentProject.guides,r=i&&i.metadata,a=n&&!c().isEmpty(n.sectionsDrafted),s=n&&!c().isEmpty(n.sectionsNotAnswered),o=s&&n.sectionsNotAnswered.length>5,l=!r||c().isUndefined(r.useSubmitButtons)||r.useSubmitButtons,u=f.Z.currentProject.eduStartedAssignmentInfo.assignment,d=$e(u);return new Promise((function(i){b.Z.showConfirm({title:"Warning",captcha:!e&&!d,captchaValue:"yes",placeholder:"Enter: yes",buttons:b.Z.MB_OKCANCEL,description:Ze({isTeacher:e,completed:t,noneOnComplete:d,readOnlyOnComplete:et(u),showDraftedNotAnswered:!!n&&l,hasDrafted:a,sectionsWithDraftedAssessments:n&&n.sectionsDrafted,hasNotAnswered:s,sectionsWithNotAnsweredAssessments:n&&n.sectionsNotAnswered,moreThen5pagesNotAnswered:o}),onClose:function(e){if(!e)return i(),!0;var t=!l||this.content().find(".js-autosubmit-drafted:checked").length>0;i({needSubmitDrafted:t})}})}))}(Ee,e,t):Ve(Ee);return a.then((function(t){if(t)return Qe(e,t.needSubmitDrafted)}))})).catch((function(e){var t=e.message;return v.Z.error(t)}))}function Ye(){var e=f.Z.currentProject.course,t=f.Z.currentProject.isLtiEnabled,n=y.ZP.isIframe();!t||c().isEmpty(e.details.lti.url)||n?xe.gotoDashboard():location.assign(e.details.lti.url)}function Je(e){v.Z.success("Successfully marked as "+e+"completed")}function Qe(e,t){at=!0;var n=f.Z.currentProject,i=y.ZP.isIframe();return(i||e&&!Ee)&&u()("div.ac").showFProgress("Marking assignment as completed..."),je=!0,Ae=!0,h.ZP.CourseManager.setCompleted({courseId:n.course.id,assignmentId:n.eduStartedAssignmentInfo.started.assignmentId,assignees:[n.eduStartedAssignmentInfo.started.assignee],completed:e,submitDrafted:e&&!!t}).then((function(t){je=!1;var r,a,s=e?"":"Un";r=e,(a=f.Z.currentProject.eduStartedAssignmentInfo.started.completed||{}).completed=r,f.Z.currentProject.eduStartedAssignmentInfo.started.completed=a,Ne(f.Z.currentProject.eduStartedAssignmentInfo),Me();var o=Promise.resolve();if(t.isTask&&(o=w.Z.onlyNsCallbackTask({message:t.taskId.value})),e){if(i)return et(n.eduStartedAssignmentInfo.assignment)?window.location.reload():o.then((function(){return u()("div.ac").hideFProgress(),new Promise((function(e){it().then((function(){Ae=!1,e()}))}))})).then((function(){return He()})).catch((function(e){var t="Unexpected grading error";e&&e.message&&(t=e.message),v.Z.error(t)})).finally((function(){Je(s),u()("div.ac").hideFProgress()}));if(!Ee)return o.then((function(){return u()("div.ac").hideFProgress(),it().then((function(){at=!1,Ye()}))})).catch((function(e){var t="Unexpected grading error";e&&e.message&&(t=e.message),v.Z.error(t)})).finally((function(){return u()("div.ac").hideFProgress()}));Je(s)}else Je(s),i&&u()("div.ac").hideFProgress()})).then(xe.setCompleted).catch((function(e){u()("div.ac").hideFProgress(),v.Z.error(e.message)})).finally((function(){at=!1}))}function Xe(e){var t=nt(e.started),n=e.assignment;return!t&&(0,Q.rx)(n).disableDownloadByStudent}function $e(e){return(0,Q.rx)(e).restrictionOnCompleted===Q.co.NONE}function et(e){var t=(0,Q.rx)(e);switch(t.restrictionOnCompleted){case Q.co.NO_ACCESS:return!0;case Q.co.READ_ONLY_AFTER_RELEASE_GRADES:return!t.releaseGrades;default:return!1}}function tt(e){var t=(0,Q.rx)(e);switch(t.restrictionOnCompleted){case Q.co.READ_ONLY:return!0;case Q.co.READ_ONLY_AFTER_RELEASE_GRADES:return t.releaseGrades;default:return!1}}function nt(e){return!!e.completed&&e.completed.completed}function it(){return rt.apply(this,arguments)}function rt(){return(rt=(0,r.Z)(s().mark((function e(){var t,n,i,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.Z.currentProject,n=c().get(t,"eduStartedAssignmentInfo.started.usersCompletedSurvey",[]),i=n.includes(f.Z.currentUser.account),r=nt(t.eduStartedAssignmentInfo.started),!(!i&&r&&!t.isOpenedByTeacher&&!et(t.eduStartedAssignmentInfo.assignment))){e.next=7;break}return e.abrupt("return",Pe.showDialog());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var at=!1;var st,ot,ct={};function lt(){var e=Be(Ce),t=Ce.started.assignee,n=qe(Ce),i="reset ".concat(n),r=f.Z.currentProject.course.id;b.Z.showConfirm({title:"Warning",description:"Once you reset the assignment, you will lose your current assignment progress.\n      <br/><br/>\n      If you acknowledge that you will lose your current assignment progress, enter “".concat(i,'" in the box below.'),captcha:!0,captchaValue:i,placeholder:"Enter: ".concat(i),onClose:function(n){n&&(f.Z.ide.skipNextProjectCloseEvent(),h.ZP.CourseManager.resetAssignment(e,t).then((function(){return ie(r,e,!0)})).catch((function(e){e.message.includes("CUSTOM_AUTHENTICATION_REQUIRED")||v.Z.error(e.message)})))}})}m.Z.subscribe("project:open",c().defer.bind(c(),Ge)),m.Z.subscribe("project:close",(function(){Ce=null,Se=null})),m.Z.subscribe("command:education:mark_as_completed",Ke.bind(null,!0)),m.Z.subscribe("command:education:mark_as_uncompleted",Ke.bind(null,!1)),m.Z.subscribe("command:education:writable",(function(){if(Ce&&!ct.promise)if(ct.popup&&!ct.popup.closed&&ct.popup.location.href.startsWith(ct.uri))ct.popup.focus();else{var e=v.Z.info("Making writable copy, please wait...");ct.promise=h.ZP.CourseManager.assignmentWritableCopy(Ce.started.assignmentId,Ce.started.assignee).then((function(t){e.hide();var n=v.Z.info("Opening writable copy, please wait...");setTimeout((function(){return n.hide()}),3e3);var i=window.location.origin,r=t.accountName,a=t.projectName,s="".concat(i,"/").concat(r,"/").concat(a);ct.uri=s,ct.popup=window.open(s,"_blank"),delete ct.promise})).catch((function(t){var n=t.message;e.hide(),v.Z.error("Error during create writable copy ".concat(n)),delete ct.promise}))}})),m.Z.subscribe("command:education:feedback",He),m.Z.subscribe("command:education:behavioralPlagiarismPlayer",(function(){if(f.Z.currentProject.eduStartedAssignmentInfo){var e=f.Z.currentProject.course,t=f.Z.currentProject.guid,n=y.ZP.url.parse(window.location.href);xe.openPreview({arg:{file:"".concat(n.protocol,"//").concat(n.host,"/home/teacher/behavioral-player/").concat(e.id,"/").concat(t),title:"Behavioral Player"}})}})),m.Z.subscribe("project:permissionsUpdated:#projectId",c().debounce((function(){je||(Ge(),f.Z.currentProject.examMode.singleLogin&&!f.Z.currentProject.isReadOnly&&f.Z.ide.showEnterStrictSessionWarning())}),200)),m.Z.subscribe("command:education:publish_assignment",(function(){q.showDialog()})),m.Z.subscribe("education:assignmentRubric:reloaded",(function(e,t){Se=t,xe.rubricsLoaded(t)})),m.Z.subscribe("education:course:reloaded",(function(e,t){if(Ce){var n=c().find(t.startedAssignments,(function(e){var t=Ce;return e.assignmentId===t.started.assignmentId&&(e.assignee.userId===t.started.assignee.userId||e.assignee.groupId===t.started.assignee.groupId)}));n&&(Ce.started.rubrics=(i=n.rubricsMap,c()(i).keyBy((function(e){return e[0]})).mapValues((function(e){var t=c().cloneDeep(e[1]);return t.rubrics=t.rubricsList,delete t.rubricsList,t})).value()))}var i})),m.Z.subscribe("project:completedStateUpdated",(function(){var e=f.Z.currentProject;Ne(e.eduStartedAssignmentInfo),nt(Ce.started)&&!Ae&&(y.ZP.isIframe()?et(e.eduStartedAssignmentInfo.assignment)&&window.location.reload():Ee?b.Z.showWarning({title:"Final deadline warning",buttons:b.Z.MB_OK,description:"You have exceeded the final deadline. You are no longer able to make changes to your answers. You are free to review your answers."}):at||Ye())})),m.Z.subscribe("command:education:reset_assignment_by_student",lt),m.Z.subscribe("command:education:clear_assessment_answers",(function(){var e="Are you sure you wish to clear assessment answers?";b.Z.showConfirm({title:"Warning",description:e,ariaDescribedBy:e,onClose:function(e){e&&re.Z.resetAll()}})})),st=Oe,ot=function(){Me()},m.Z.subscribe("item:created:"+st,+st,ot),m.Z.subscribe("item:deleted:"+st,ot),m.Z.subscribe("item:moved:"+st,ot),m.Z.subscribe("item:moved:#file:"+st,ot);const ut={goToDashboard:Ye,getEduStartedAssignmentInfo:function(){return Ce},getCompleteBtnInfo:function(){var e=f.Z.currentProject;if(!Ce)return null;var t=Ue();Ee=e.isOpenedByTeacher;var n=e.guides,i=n&&!1!==n.metadata.useMarkAsComplete,r=nt(Ce.started);return{show:e.isUserAssignee&&i||Ee,completed:r,disabled:t||!Ie&&!Ee||r&&tt(e.eduStartedAssignmentInfo.assignment)&&!Ee}},getAssignmentRubrics:function(){return Se},getAssignmentId:Be,showWritableCopyButton:Fe,getDisableDownloadByStudent:Xe}},6229:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i,a:()=>r});const i={TYPE:{FILE:"file",DIR:"dir"},CSS:{DIR:"tree-type-folder",FILE:"tree-type-file-"}};var r={FILE:"file",DIR:"directory"}},70243:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(96486),r=n.n(i),a=n(20294),s=n(6229),o=n(93443),c=n(44442),l=n(44442).A,u=o.Z.create(n(43380));function d(e,t){for(var n=t?t.split("/"):[],i=e.children,a=0,s=n.length;a<s;a++){var o=n[a];if(!r().isEmpty(o)&&!(i=i[o]))return}return i}function p(e,t,n,i,o,c){i=i||{},o=o||{};var l=r().isNumber(e)||r().isString(e)?s.Z.TYPE.FILE:s.Z.TYPE.DIR,u=l===s.Z.TYPE.FILE,d=!i[n],f=o[n]||!1,h=a.ZP.realName(t),m={text:h,type:l,a_attr:{"aria-label":"".concat(u?s.a.FILE:s.a.DIR," ").concat(h)}};return m.state={selected:f},u||(m.children=m.children||[],m.state.opened=!(l===s.Z.TYPE.DIR&&d)),u||(m.children=m.children||[],n=n?n+"/":"",c?m.children=!r().isEmpty(e):r().forOwn(e,(function(e,t){var r=p(e,t,n+t,i,o);m.children.push(r)}))),m}function f(e,t){var n=e.get_node("#").children[0],i=e.get_node(n),r=i.children,a=t.split("/"),s=i;return""!==t&&(s=h(e,r,a)),s}function h(e,t,n){if(t&&t.length>0){for(var i=n.shift(),r=!1,a=0;a<t.length;a++){var s=e.get_node(t[a]);if(s.text===i){r=!0;var o=s;return n.length>0&&(o=h(e,s.children,n)),o}}if(!r)return null}return null}function m(e,t){var n=e.get_path(t);if(n)return n.shift(),n.join("/")}function g(e){var t=f(e,""),n=e.get_selected(!0);0===n.length&&(n=[t]);for(var i=[],a=0,s=n.length;a<s;a++){var o=n[a],c=o.type,l=o.text,u=m(e,o),d={name:l,type:c};i.push({path:u,type:c,item:d})}return{file:{path:(i=r().sortBy(i,"path"))[0]&&i[0].path,type:i[0]&&i[0].type},items:i}}const v={getLevelByPath:function(e,t){var n=d(e,t),i=[];return n&&r().forOwn(n,(function(e,t){var n=r().isNumber(e)||r().isString(e);i.push({name:a.ZP.realName(t),dir:!n})})),i},getTreeLevelByPath:function(e,t,n,i,s){var o=(t=t?t+"/":"")?[]:{text:e.name+" ("+e.currentBranch+")",type:"root",state:{selected:!1,opened:!0},children:[],a_attr:{"aria-label":"".concat(e.name," ").concat(e.currentBranch," branch filetree")}},l=t?o:o.children,u=d(e,t);if(u){var f=c.Z.get("codio-filetree").tree_items_limit,h=r().keys(u).length>f,m=h?f:r().keys(u).length,g=0;r().forOwn(u,(function(e,r){var o=p(e,r=a.ZP.realName(r),t+r,n,i,!s);if(l.push(o),++g>m)return!1})),h&&l.push({text:"Level contains more than "+f+" items, output truncated",type:"truncated",state:{selected:!1,opened:!1},children:!1})}return o},sortAndCollectNodes:function(e,t){var n=[];return r().forEach(t,(function(t){var i=e.get_node(t),r={name:i.text,type:i.type},a=m(e,i);a&&n.push({item:r,path:a})})),(n=r().sortBy(n,"path")).reverse()},getPath:m,getParentPath:function(e){var t=e.lastIndexOf("/");return t=-1===t?0:t,e.substring(0,t)},getTreeNodeByPath:f,onSelect:function(e){if("file"===e.node.type){var t=m(e.instance,e.node);l.execute("file","open",{ext:"tree",filename:t})}},onSelectionChanged:function(e){var t=g(e.instance);u.itemSelect(t.file,t.items)},onDblClick:function(e){var t=this.getUserData(e,"nodeType");t=void 0===t?"":t;var n=m(this,this.getNode(e));u.itemDblClick({path:n,type:t},[n,t])},getSelectedFiles:g,getOpenedNodesPaths:function(e,t){var n={};return r().each(t,(function(t,i){var r=f(e,i);r&&e.is_open(r)&&(n[i]=!0)})),n},getSelectedNodesPaths:function(e){for(var t={},n=e.get_selected(),i=0;i<n.length;i++){var r=e.get_node(n[i]);t[m(e,r)]=!0}return t},getAsTreeData:function(e,t,n,i){n=n||{};var s=(i=i||{})[t]||!1,o={text:e.name+" ("+e.currentBranch+")",type:"root",state:{selected:s,opened:!0},children:[]};return r().isUndefined(e.children)||(t=t?t+"/":"",r().forOwn(e.children,(function(e,r){var s=p(e,r=a.ZP.realName(r),t+r,n,i);o.children.push(s)}))),o},openNodesByPaths:function(e,t){r().isArray(t)||(t=[t]),r().each(t,(function(t){var n=f(e,t);e.open_node(n,void 0,!1)}))},selectNodesByPaths:function(e,t){var n=[];r().each(t,(function(t,i){n.push(f(e,i))})),e.select_node(n)}}},97441:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ne});var i=n(4942),r=n(15861),a=n(87757),s=n.n(a),o=n(96486),c=n.n(o),l=n(97137),u=n(93443),d=n(20294),p=n(49721),f=n(60989),h=n(61478),m=n(88228),g=n(76900),v=n(85886),b=n(26024),y=n(22346),w=n(73687),_=n(38524),k=n(28893),P=n(58728),Z=n(70623),x=n(45113),C=n(21459);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=u.Z.create(n(10742)),T=[_.CN,_.KX,_.LI,_.mO],j={},A={},O=null,D=null,N=null;function M(){j.setState()}var F=function(){var e=(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=6;break}return e.next=3,d.ZP.promise.getState(O);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=null;case 7:if(t=e.t0,!O||t!==d.ZP.promise.STATES.FULFILLED){e.next=10;break}return e.abrupt("return",N);case 10:return O&&t!==d.ZP.promise.STATES.REJECTED||(O=h.Z.fetchGuideState()),e.abrupt("return",O.then((function(e){return N=e})));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function R(e,t){if(t.result){var n=t.submittedAt&&new Date(t.submittedAt),i={points:t.points,guidance:t.guidance,usedAttempts:t.usedAttempts||0,timestamp:n};switch(e){case g.ZP.TEST:case g.ZP.CODE_OUTPUT_COMPARE:return E(E({},i),{},{feedback:t.feedback,format:t.format,code:t.result.code,output:(0,C.a4)(t.result.stdout),expectedOutputs:t.result.expectedOutputs});case g.ZP.MULTIPLE_CHOICE:case g.ZP.FILL_IN_THE_BLANKS:return E(E({},i),{},{current:t.result.current,right:t.result.right});case g.ZP.MATH:return E(E({},i),{},{answers:t.result.answers});case g.ZP.CUSTOM:return E(E({},i),{},{code:0,answer:t.result.answer});case g.ZP.FREE_TEXT:return E(E({},i),{},{comments:t.comments,status:t.result.status,answer:t.result.answer});case g.ZP.FREE_TEXT_AUTO:return E(E({},i),{},{comments:(0,C.a4)(t.comments),feedback:t.feedback,format:t.format,status:t.result.status,answer:t.result.answer});case g.ZP.GRADE_BOOK:return E(E({},i),{},{comment:t.comment});case g.ZP.PARSONS_PUZZLE:return E(E({},i),{},{trashHash:t.result.trashHash,solutionHash:t.result.solutionHash,toggleStates:t.result.toggleStates,studentCode:t.result.studentCode});case g.ZP.SENSE_NETWORK:return E(E({},i),{},{graded:t.result.graded,preExecFailed:t.result.preExecFailed})}}}j.fetchGuideState=(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=p.Z.currentProject).eduStartedAssignmentInfo){e.next=3;break}return e.abrupt("return",(0,P.PT)().then(W));case 3:return e.abrupt("return",F().then((function(e){var n=t.guides&&c().cloneDeep(t.guides.assessments);return c().map(n,(function(t){var n=c().find(e,(function(e){return e.taskId===t.taskId}));t.result=n?n.result:null;var i=t.result&&R(t.type,t.result);return i&&(0===t.source.points?i.state=void 0!==i.code&&0!==i.code?"fail":"pass":i.state=t.result.answerState,t.result={result:i}),t.source=H(t.type,t.source,!0),t}))})));case 4:case"end":return e.stop()}}),e)}))),j.checkObject=function(e,t){var n;switch(e.type){case g.ZP.GRADE_BOOK:n={comment:e.comment,points:e.points};break;case g.ZP.SENSE_NETWORK:n={solution:e.solution};break;default:n={ids:e.action,text:e.text}}return this.check(e.task,e.type,n,t).then((function(){e.type===g.ZP.GRADE_BOOK&&l.Z.notify("Grade submitted")}))};var L=function(e,t,n){var i=void 0;return c().isUndefined(t.points)||(i=t.points>0?"pass":"fail"),{taskId:e,result:E(E({},t),{},{state:n,answerState:i})}};function U(e){return c().isFinite(e.points)?e.points>0?"pass":"fail":"pass"}function B(e,t){var n={html:!0,footnote:!0,asString:!0,noReact:!0,noDataLine:!0},i=[d.ZP.markdown.render(e.source.instructions,n,void 0,T).then((function(t){e.source.instructions=t}))];if(e.source.guidance){var r=d.ZP.markdown.render(e.source.guidance,n,void 0,T).then((function(t){e.source.guidance=t}));i.push(r)}if(e.result&&e.result.result&&e.result.result.guidance){var a=d.ZP.markdown.render(e.result.result.guidance,n,void 0,T).then((function(t){e.result.result.guidance=t}));i.push(a)}if(e.type===g.ZP.MULTIPLE_CHOICE)c().each(e.source.answers,(function(e){var t=d.ZP.markdown.render(e.answer,n,void 0,T).then((function(t){e.answer=t}));i.push(t)}));else if(e.type===g.ZP.FILL_IN_THE_BLANKS){var s=c().map(e.source.tokens.text,(function(e){return 0===e?"%%%blank%%%":e})).join("");i.push(d.ZP.markdown.render(s,n,void 0,T).then((function(t){e.source.rendered=t})))}Promise.all(i).then((function(){!function(e,t){var n=d.ZP.hashCode(e.taskId+"assessment",!0);!(t&&A[t.id])&&t&&t.setAssessmentState(n,e),c().each(A,(function(t){t.setAssessmentState(n,e)}))}(e,t)}))}function q(e){var t=!!e.showGuidanceAfterResponse;return delete e.showGuidanceAfterResponse,e.showGuidanceAfterResponseOption||(e.showGuidanceAfterResponseOption=t?{type:"Always"}:{type:"Never"}),e}function H(e,t,n){if(t=q(t),!n&&t.oneTimeTest&&(t.maxAttemptsCount=1),!c().isUndefined(t.maxAttemptsCount)||e!==g.ZP.MULTIPLE_CHOICE&&e!==g.ZP.FILL_IN_THE_BLANKS||(t.maxAttemptsCount=1),e===g.ZP.FILL_IN_THE_BLANKS){if(n||(t.tokens.regexPositions=[]),delete t.text,t.showValues){var i=(s=t.tokens.blank,c()(s).map((function(e){return c().startsWith(e,"/")&&c().endsWith(e,"/")&&e.length>1?{type:g.uR.REG_EX,value:e}:c().startsWith(e,'"')&&c().endsWith(e,'"')&&e.split(/",\s*"/).length>1?{type:g.uR.ONE_OF,value:e.substring(1,e.length-1).split(/",\s*"/)}:e})).value()),r=c()(i).flatMap((function(e,i){return e.type===g.uR.REG_EX?(n||t.tokens.regexPositions.push(i),[]):e.type===g.uR.ONE_OF?e.value:[e]})).value();if(!n){var a=(t.distractors||"").split("\n");r=c()(r.concat(a)).filter((function(e){return e})).shuffle()}t.tokens.blank=r}else delete t.tokens.blank;return t}var s;return t}function W(e){var t=function(t){var n=c().find(e,{taskId:t});return n?n.usedAttempts:null};return j.fetchDraft().then((function(n){return c().map(n,(function(n){return{type:n.type,taskId:n.taskId,source:H(n.type,n.source,!1),result:(i=n.taskId,r=c().find(e,{taskId:i}),r?{points:r.points,result:r.results[0],state:r.state}:null),usedAttempts:t(n.taskId),owner:!0};var i,r}))})).then(z)}function z(e){var t=c().filter(e,(function(e){return e.type===g.ZP.MATH}));if(c().isEmpty(t))return e;var n=w.ZP.showAsTeacher(),i=c().map(t,(function(e){var t={},i=!1;return e.result&&(e.result.result?(i=!0,t=e.result.result.answers):e.result.state&&(t=e.result.state.answers)),{question:e.source.question,answers:t,feedback:n||e.source.showExpectedAnswer&&i,score:i}}));return j.compileMath(i).then((function(t){var n=0;return c().map(e,(function(e){return e.type===g.ZP.MATH&&(e.source.instructions=t[n].questionText,n++),e}))}))}function G(e,t,n){return V.apply(this,arguments)}function V(){return(V=(0,r.Z)(s().mark((function e(t,n,i){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.Z.currentProject.isOwner&&!p.Z.currentProject.eduStartedAssignmentInfo){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",(0,P.PT)().then((function(e){var r=c().find(e,{taskId:t}),a=i.usedAttempts;return r?(r.points=n,r.usedAttempts=a,r.results.unshift(i)):r={taskId:t,points:n,state:void 0,results:[i],usedAttempts:a},(0,P.H_)(r)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t,n){var i=n?n.assessmentId:t.linkedId;i&&(e.linkedId=i);var r=n?n.libraryId:t.libraryId;r&&(e.libraryId=r);var a=n?n.version:t.version;c().isUndefined(a)||(e.version=parseInt(a,10))}function Y(e){return J.apply(this,arguments)}function J(){return(J=(0,r.Z)(s().mark((function e(t){var n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c()(t.source.tokens.blank).map("type").includes(g.uR.REG_EX),i=p.Z.currentProject.guid,!n){e.next=4;break}return e.abrupt("return",f.ZP.AssessmentManager.validateFibAssessment(i,t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}j.check=function(e,t,n,i){return function(e,t,n){return p.Z.currentProject.eduStartedAssignmentInfo?h.Z.check(e,t,n):j.fetchDraft().then((function(t){var i=c().find(t,{taskId:e});if(!i)throw new Error("Assessment not found.");return i.type===g.ZP.CODE_OUTPUT_COMPARE&&w.ZP.showAsTeacher()&&((i=c().cloneDeep(i)).source.showExpectedAnswer=!0),h.Z.checkByAssessment(p.Z.currentProject.guid,i,n)}))}(e,t,n).then(function(){var n=(0,r.Z)(s().mark((function n(r){var a,o,u,h,m,v,b;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=c().get(p.Z.currentProject,"eduStartedAssignmentInfo.assignment"),(o=a?(0,x.c1)(a):null)&&f.ZP.UserEventManager.create(f.ZP.UserEventManager.EventType.GUIDES_CHECK_ASSESSMENT,E(E({},Z.Z.constructBasicEvent()),{},{type:t,result:r,sectionId:i._sectionId,assignmentId:o})).catch((function(e){var t=e.message;return l.Z.error(t)})),u=p.Z.currentProject.eduStartedAssignmentInfo,!O){n.next=10;break}return n.next=7,d.ZP.promise.getState(O);case 7:n.t0=n.sent,n.next=11;break;case 10:n.t0=null;case 11:return h=n.t0,O&&h===d.ZP.promise.STATES.FULFILLED&&u&&(m=c().find(N,{taskId:e}),v=m&&m.result?m.result.state:void 0,b=L(e,r,v),(N=c().filter(N,(function(t){return t.taskId!==e}))).push(b)),n.abrupt("return",j.fetchGuideState().then((function(t){if(t&&i){var n=c().find(t,{taskId:e});if(!n)return;u?r.usedAttempts=n.result&&n.result.result&&n.result.result.usedAttempts:(n.usedAttempts+=1,r.usedAttempts=n.usedAttempts);var a=r.points,s=R(n.type,r);if(c().isFinite(s.points)||(s.points=a||0),s){if(s.guidance=r.guidance,0===n.source.points?s.state=0===r.result.code?"pass":"fail":s.state=a>0?"pass":"fail",n.type===g.ZP.SENSE_NETWORK&&(s.state=U(s)),n.result={result:s,points:a},G(e,a,s),n.type!==g.ZP.MATH)return B(n,i),s;var o;if(r.questionText)o=Promise.resolve(r.questionText);else{var l=w.ZP.showAsTeacher();o=j.compileMath([{question:n.source.question,answers:s.answers,score:!0,feedback:l||n.source.showExpectedAnswer}]).then((function(e){return e[0].questionText}))}o.then((function(e){return n.source.instructions=e,B(n,i),s}))}}})));case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){var t=e.message;l.Z.error(t)}))},j.setState=function(e){j.fetchGuideState().then((function(t){e&&(A[e.id]=e),t&&(c().isEmpty(t)?c().each(A,(function(e){e.resetButtons()})):c().each(t,(function(t){B(t,e)})))})).catch((function(e){var t=e.message;return l.Z.error(t)}))},j.fetchDraft=function(){return b.ZP.loadAssessmentsFromFile().then((function(e){return c().filter(e,(function(e){return e.type!==g.ZP.MATH}))})).then((function(e){return j.getAssessmentLibraries().then((function(t){return c().map(e,(function(e){if(e.type===g.ZP.RANDOM){var n=c().cloneDeep(t.certified).concat(t.my);e.source.permissions=c().some(n,(function(t){return t.id===e.source.libraryId}))}return E(E({},e),{},{source:q(e.source)})}))}))}))},j.getAssessments=function(){return j.fetchDraft().then((function(e){return I.assessmentsUpdated(e),e})).catch((function(e){l.Z.error("Problem with fetch assessments: "+e)}))},j.add=function(){var e=(0,r.Z)(s().mark((function e(t,n,i,r){var a,o,l,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=p.Z.currentProject.guid,t=t||n+"-"+d.ZP.hashCode(d.ZP.GUID()),c().each(i.answers,(function(e){e._id=d.ZP.GUID()})),(o={type:n,taskId:t,source:i}).type!==g.ZP.FILL_IN_THE_BLANKS){e.next=8;break}return o.source.tokens=m.ZP.tokenize(o.source.text),e.next=8,Y(o);case 8:if(!r.toLibrary){e.next=13;break}return u=y.Z.processForLibrary(o.source),e.next=12,f.ZP.AssessmentManager.updateAssessment({libraryId:r.libraryId,projectId:a,type:n,source:u,parameters:r.parameters});case 12:l=e.sent;case 13:return K(o,r,l),e.next=16,b.ZP.updateAssessmentContent(o);case 16:return M(),e.abrupt("return",o);case 18:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}(),j.edit=function(){var e=(0,r.Z)(s().mark((function e(t,n,i){var r,a,o,l,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.Z.currentProject.guid,e.next=3,j.fetchDraft();case 3:if(o=e.sent,c().each(n.answers,(function(e){e._id||(e._id=d.ZP.GUID())})),(a=c().find(o,{taskId:t})).source=n,a.type!==g.ZP.FILL_IN_THE_BLANKS){e.next=11;break}return a.source.tokens=m.ZP.tokenize(a.source.text),e.next=11,Y(a);case 11:if(!i.toLibrary){e.next=22;break}if(u=y.Z.processForLibrary(a.source),!i.linkedId){e.next=19;break}return e.next=16,f.ZP.AssessmentManager.updateAssessment({assessmentId:i.linkedId,libraryId:i.libraryId,projectId:r,type:a.type,source:u,parameters:i.parameters});case 16:l=e.sent,e.next=22;break;case 19:return e.next=21,f.ZP.AssessmentManager.updateAssessment({libraryId:i.libraryId,projectId:r,type:a.type,source:u,parameters:i.parameters});case 21:l=e.sent;case 22:return K(a,i,l),e.next=25,b.ZP.updateAssessmentContent(a);case 25:return M(),e.abrupt("return",a);case 27:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),j.disconnect=function(e){return j.fetchDraft().then((function(t){var n=c().find(t,{taskId:e});return delete n.linkedId,delete n.libraryId,delete n.version,b.ZP.updateAssessmentContent(n)}))},j.remove=function(e){return e=c().isArray(e)?e:[e],b.ZP.removeAssessments(e).then(M)},j.reset=function(){var e=(0,r.Z)(s().mark((function e(t,n){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.Z.currentProject.isAdmin&&!p.Z.currentProject.eduStartedAssignmentInfo){e.next=3;break}return l.Z.error("Not allowed."),e.abrupt("return");case 3:return i=(0,P.PT)().then((function(e){var i=c().find(e,{taskId:t});if(i)return i.points=0,i.results=[],n||(i.usedAttempts=0),(0,P.H_)(i)})),e.abrupt("return",i.then((function(){M()})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j.resetAll=function(){var e=p.Z.currentProject;e.isAdmin&&!e.eduStartedAssignmentInfo?((0,P.Er)(),c().each(A,(function(e){e.resetAnswers=(new Date).getTime()})),M()):l.Z.error("Not allowed.")},j.modify=function(e){return h.Z.removeResult(e).then((function(){O=null,M()}))},j.validateMath=function(e,t,n){var i;if(p.Z.currentProject.eduStartedAssignmentInfo){var r=p.Z.currentProject.guides.assessments;i=Promise.resolve(r)}else i=j.fetchDraft();return i.then((function(i){var r=c().find(i,{taskId:e});if(r)return j.compileMath([{question:r.source.question,answers:t.answers}]).then((function(e){r.source.instructions=e[0].questionText,r.result||(r.result={result:{}}),r.result.result.state="",B(r,n)}))}))};var Q,X,$=function(e,t){return{taskId:e,result:{points:0,state:t,usedAttempts:0,answerState:"fail"}}};function ee(e,t){return c().isEmpty(t)||c().isEmpty(e)?{}:te(e,c().keyBy(t),{})}function te(e,t,n){return!e||c().isEmpty(e.children)||e.children.forEach((function(e){var i=e.pageId;i&&e.id in t&&(n[i]=!0),te(e,t,n)})),n}j.saveState=function(){var e=(0,r.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.Z.currentProject.isUserAssignee){e.next=2;break}return e.abrupt("return");case 2:if(!p.Z.currentProject.eduStartedAssignmentInfo){e.next=4;break}return e.abrupt("return",h.Z.saveState(t,n).then((0,r.Z)(s().mark((function e(){var i,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=6;break}return e.next=3,d.ZP.promise.getState(O);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=null;case 7:if(i=e.t0,!O||i!==d.ZP.promise.STATES.FULFILLED){e.next=16;break}if(r=c().find(N,{taskId:t})){e.next=13;break}return N.push($(t,n)),e.abrupt("return");case 13:r.result.state=n,e.next=17;break;case 16:O=null;case 17:case"end":return e.stop()}}),e)})))));case 4:return e.abrupt("return",(0,P.PT)().then((function(e){var i=c().find(e,{taskId:t});return i?(i.points=0,i.state=n):i={taskId:t,points:0,state:n||void 0,results:[]},(0,P.H_)(i)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j.compileMath=function(e){return h.Z.compileMath(e)},j.getDraftedAndNoAnsweredAssessments=function(){var e=j.getCurrentUnitAssessments();return j.fetchGuideState().then((function(t){var n=c().clone(e),i=c().clone(e);return t.forEach((function(e){var t=e.type===g.ZP.GRADE_BOOK,r=e.type===g.ZP.PARSONS_PUZZLE;(e.type===g.ZP.JUPYTER_NOTEBOOK||t)&&(delete n[e.id],delete i[e.id]);var a=e.result;a&&(a.state&&!r||a.result)&&delete i[e.id],a&&!a.result&&a.state||delete n[e.id]})),{drafted:n,notAnswered:i}}))},j.getSectionsForAssessments=function(e){var t=p.Z.currentProject,n=t.guides;if(!n)return[];var i=ee(n.bookStructure,t.bookAssignmentPages);return n.metadata.sections.filter((function(n){return(!t.isBook||n.id in i)&&c().some(n.assessmentIds,(function(t){return t in e}))}))},j.getCurrentUnitAssessments=function(){var e=p.Z.currentProject,t=e.guides;if(!t)return{};var n={};if(c().isEmpty(t.bookStructure)||c().isEmpty(e.bookAssignmentPages))return t.assessments.forEach((function(e){n[e.id]=!0})),n;var i=ee(t.bookStructure,e.bookAssignmentPages);return t.metadata.sections.forEach((function(e){e.id in i&&e.assessmentIds&&e.assessmentIds.forEach((function(e){n[e]=!0}))})),n},j.hasDraftedNotAnsweredAssessments=function(e){return j.getDraftedAndNoAnsweredAssessments().then((function(t){if(c().isEmpty(t.drafted)&&c().isEmpty(t.notAnswered))return!1;if(!e)return!0;var n=j.getSectionsForAssessments(t.drafted),i=j.getSectionsForAssessments(t.notAnswered),r=n.some((function(t){return t.id===e})),a=i.some((function(t){return t.id===e}));return r||a}))},j.getAssessmentsUsageForProject=function(e){return k.ZP.getMetadata().then((function(t){var n=t.getSections();return Promise.all(c().map(n,"contentModel")).then((function(t){return c()(e).map((function(e){var i=null;return c().forEach(t,(function(t,r){var a=new RegExp("\\|assessment\\}\\("+e.taskId+'\\)|data-codio-assessment-output="'+e.taskId+'"'),s=t.findNextMatch(a,{lineNumber:0,column:0},!0);if(s)return i={taskId:e.taskId,section:{index:r,fileName:n[r].contentPath,pos:{lineNumber:s.range.startLineNumber,column:s.range.startColumn}}},!1})),i})).compact().value()}))}))},j.getAssessmentLibraries=function(){return D?Promise.resolve(D):f.ZP.AssessmentManager.listLibraries({userId:p.Z.currentUser.getAccountUid()}).then((function(e){return c().each(e,(function(e){var t=c().some(e.permissions,(function(e){return e.id===p.Z.currentUser.getAccountUid()&&"WRITE"===e.access}));e.readOnly=!t})),(D=c().groupBy(e,(function(e){return e.certified?"certified":"my"}))).my=D.my||[],D.certified=D.certified||[],D})).catch((function(e){return e&&l.Z.error(e.message)}))},Q=c().throttle(function(e){var t=e.path,n=e.newPath,i=void 0===n?"":n,r=c().startsWith(t,v.Nc)||c().startsWith(i,v.Nc);p.Z.currentProject.exists(t)||b.ZP.fileRemoved(t),r&&M()}.bind(null),500),X=[],c().each(["item:created:#path","item:moved:#path:#newPath","item:deleted:#path","file:change:#path"],(function(e){X.push(u.Z.subscribe(e,Q))})),u.Z.subscribe("project:close",(function(){b.ZP.filesRemoved()})),u.Z.subscribe("guides:assessments:redraw",(function(){O=null,M()})),u.Z.subscribe("project:close",(function(){A={},O=null}));const ne=j},99012:(e,t,n)=>{"use strict";n.d(t,{LQ:()=>r,Z0:()=>u,ZP:()=>d});var i=n(76900),r=30,a={};a[i.ZP.CODE_OUTPUT_COMPARE]="Standard Code Test",a[i.ZP.TEST]="Advanced Code Test",a[i.ZP.MULTIPLE_CHOICE]="Multiple Choice",a[i.ZP.FILL_IN_THE_BLANKS]="Fill in the Blanks",a[i.ZP.FREE_TEXT]="Free Text",a[i.ZP.FREE_TEXT_AUTO]="Free Text Autograde",a[i.ZP.GRADE_BOOK]="Grade Book",a[i.ZP.MATH]="Math Assessment",a[i.ZP.PARSONS_PUZZLE]="Parsons Puzzle",a[i.ZP.SENSE_NETWORK]="Sense.Network";var s="Assessment Type",o="Bloom's level",c="Learning Objectives",l={};l[s]=!0,l[o]=!0,l[c]=!0;var u=["Name","Id"];const d={COC_SEQUENCE_FIELDS:5,COC_TIMEOUT:r,TEST_CUSTOM_TIMEOUT:300,FTA_TIMEOUT:40,BLOOMS_LEVEL:{1:"Level I - Remembering",2:"Level II - Understanding",3:"Level III - Applying",4:"Level IV - Analyzing",5:"Level V - Evaluating",6:"Level VI - Creating"},ASSESSMENT_NAME_BY_TYPE:a,PROTECTED_TAG_NAMES:u,REQUIRED_TAGS:["Content","Programming Language"],ASSESSMENT_TYPE_TAG:s,BLOOMS_LEVEL_TAG:o,LEARNING_OBJECTIVES_TAG:c,AUTO_TAGS:l,FROM_LIBRARY_DUMMY:"<<<<<library-assessment>>>>>",ASSESSMENT_USED:"used",ASSESSMENT_UNUSED:"unused"}},58728:(e,t,n)=>{"use strict";n.d(t,{Er:()=>k,H_:()=>_,PT:()=>b,rN:()=>P});var i=n(15861),r=n(87757),a=n.n(r),s=n(96486),o=n.n(s),c=n(49721),l=n(57866),u=n(26024),d=n(85886).ZP.ASSESSMENTS_ANSWERS_FILE,p="authorAnswers",f=null;function h(e){return m.apply(this,arguments)}function m(){return(m=(0,i.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return n=o().map(t,_),e.abrupt("return",Promise.all(n).then((function(){return c.Z.currentProject.deleteItems([d])})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return v.apply(this,arguments)}function v(){return(v=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.Z.currentProject.exists(d)){e.next=2;break}return e.abrupt("return",{});case 2:return e.abrupt("return",(0,u.co)().then((function(e){return h(e)})).catch((function(){})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return y.apply(this,arguments)}function y(){return(y=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===f){e.next=2;break}return e.abrupt("return",w(o().cloneDeep(f)));case 2:return e.abrupt("return",g().then((function(){return(0,l.rQ)(c.Z.currentProject.guid,p).then((function(e){return o()(e).map((function(e){try{return JSON.parse(e.value)}catch(e){return null}})).filter((function(e){return null!==e})).value()}))})).then((function(e){return f=o().keyBy(e,"taskId"),w(e)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return o().values(e)}function _(e){if(e&&e.taskId){var t=e.taskId,n=JSON.stringify(e);return(0,l.xG)(c.Z.currentProject.guid,p,t,n).then((function(){return function(e,t){null===f&&(f={}),f[e]=t}(t,e)}))}}function k(){var e=o().map(f,(function(e){return P(e.taskId)}));return f={},Promise.all(e)}function P(e){return delete f[e],(0,l.xG)(c.Z.currentProject.guid,p,e,void 0)}},22346:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var i=n(88228),r=n(52308),a=n.n(r),s=n(96486),o=n.n(s),c=n(76900),l=n(99012),u=n(96513),d=2e4,p={"ParsonsWidget._graders.LineBasedGrader":"1","ParsonsWidget._graders.VariableCheckGrader":"2","ParsonsWidget._graders.UnitTestGrader":"3","ParsonsWidget._graders.LanguageTranslationGrader":"4","ParsonsWidget._graders.TurtleGrader":"5"};function f(e,t){var n,i=function(e){var t={name:e.find("#name"),showName:e.find("#show_name")},n={data:{name:t.name.val(),showName:t.showName.is(":checked")}};n.data.name||y(n,{el:t.name,message:"Name is required"});return n}(t);switch(e){case c.ZP.MULTIPLE_CHOICE:n=function(e){var t={question:e.find("#question")},n={data:{instructions:t.question.val()}};n.data.instructions||y(n,{el:t.question,message:"Question is required"});return n}(t);break;case c.ZP.GRADE_BOOK:n={data:{}};break;case c.ZP.MATH:n=function(e){var t={question:e.find("#question")},n={data:{question:t.question.val()}};n.data.question||y(n,{el:t.question,message:"Question XML is required"});return n}(t);break;case c.ZP.RANDOM:return function(e){var t={name:e.find("#name")},n={data:{name:t.name.val()}};n.data.name||y(n,{el:t.name,message:"Name is required"});return n}(t);default:n={data:{instructions:t.find("#instructions").val()}}}return _(i,n)}function h(e,t){switch(e){case c.ZP.CODE_OUTPUT_COMPARE:return function(e){var t={command:e.find("#cmd"),preExecuteCommand:e.find("#pre_cmd"),timeout:e.find("#timeout")},n={data:{command:t.command.val(),preExecuteCommand:t.preExecuteCommand.val(),options:{timeout:parseInt(t.timeout.val(),10)||l.LQ}}};n.data.command||y(n,{el:t.command,message:"Command is required"});return n}(t);case c.ZP.TEST:return function(e){var t={command:e.find("#command"),codeEnvConfig:e.find("#codeEnvConfig"),pythonPath:e.find("#pythonpath")},n={data:{command:t.command.val(),codeEnvConfig:t.codeEnvConfig.val()}};o().isEmpty(t.pythonPath.val())||(n.data.pythonPath=t.pythonPath.val());var i=e.find("#test_type").val();if(i!==c.ZP.TEST_SUBTYPES.CUSTOM){var r=k(e),a=JSON.parse(r);n.data.codeEnvConfig=r,o().isEmpty(a.files)&&y(n,{el:e.find("#test-add-case"),message:"Add a test case"}),n.data.command="python /usr/share/codio/assessments/assessments.py",n.data.timeoutSeconds=l.ZP.TEST_CUSTOM_TIMEOUT}else n.data.command||y(n,{el:t.command,message:"Command is required"}),delete n.data.codeEnvConfig;return n.data.timeoutSeconds=parseInt(e.find("#timeout").val(),10),n}(t);case c.ZP.MULTIPLE_CHOICE:return function(e){var t={multiple_response:e.find("#multiple_response"),is_randomized:e.find("#is_randomized"),answers:e.find(".answers :input").not(":button")},n={data:{multipleResponse:t.multiple_response.is(":checked"),isRandomized:t.is_randomized.is(":checked")}};n.data.answers=o()(t.answers).chunk(3).map((function(e){var t={};return o().each(e,(function(e){var n=a()(e),i=n.attr("name");t[i]="correct"===i?n.is(":checked"):n.val()})),t})).value(),o().some(n.data.answers,(function(e){return""===e.answer}))&&y(n,{el:null,message:"Answer can not be empty"});n.data.answers.length<2&&y(n,{el:null,message:"There should be two answers minimum"});o().some(n.data.answers,(function(e){return e.correct}))||y(n,{el:null,message:"There should be minimum one correct answer"});return n}(t);case c.ZP.FILL_IN_THE_BLANKS:return function(e){var t={showValues:e.find("#show_values"),text:e.find("#text"),distractors:e.find("#fib-assessments-distractors")},n={data:{showValues:t.showValues.is(":checked"),text:t.text.val(),distractors:t.distractors.val()}};n.data.text||y(n,{el:t.text,message:"Text is required"});n.data.text.match(/<<</)&&n.data.text.match(/>>>/)||y(n,{el:t.text,message:"You have not filled in any Blanks"});n.data.showValues||(n.data.distractors="");return n}(t);case c.ZP.FREE_TEXT_AUTO:return function(e){var t={command:e.find("#command"),timeout:e.find("#timeout")},n={data:{command:t.command.val(),timeoutSeconds:parseInt(t.timeout.val(),10)||l.ZP.FTA_TIMEOUT}};n.data.command||y(n,{el:t.command,message:"Command is required"});return n}(t);case c.ZP.PARSONS_PUZZLE:return function(e){var t=e.closest(".assessment-editor").data("assessment"),n=i.ZP.getParsonsSettingsFromAssessment(t),r=e.data("parsonsUI"),a=r?r.export():n,s=o().omit(a.options,["grader"]);return{data:{initial:a.initial,options:JSON.stringify(s),grader:p[a.options.grader]}}}(t);case c.ZP.SENSE_NETWORK:return function(e){var t={preExecuteCommand:e.find("#pre_cmd"),preExecuteFeedback:e.find("#pre_feedback"),feedbackUrl:e.find("#feedback_url"),filename:e.find("#filename")},n={data:{preExecuteCommand:t.preExecuteCommand.val(),preExecuteFeedback:t.preExecuteFeedback.val(),feedbackUrl:t.feedbackUrl.val(),filename:t.filename.val()}};n.data.feedbackUrl||y(n,{el:t.feedbackUrl,message:"Feedback URL is required"});return n}(t);case c.ZP.RANDOM:return function(e){var t=[];e.find(".tag-item").each((function(){var e={tag:a()(this).find('[name="tag_name"]'),value:a()(this).find('[name="tag_value"]')},n={name:e.tag.val(),value:e.value.val()};t.push(n)}));var n={data:{libraryId:e.find("#libraryId").val(),search:t,libraryName:e.find("#random-assessment-library-name").text()}};n.data.libraryId||y(n,{el:e.find("#browse-library-assessments"),message:"Search is required"});return n}(t);default:return{data:{}}}}function m(e,t){var n,i=function(e){var t={guidance:e.find("#guidance"),maxAttemptsCount:e.find("#max_attempts_count"),passedInputScore:e.find("#show-guidance-passed-input-score"),passedInputAttempts:e.find("#show-guidance-passed-input-attempts")},n=e.find(".show-guidance-type-input:checked").val(),i={type:n};"Score"===n?i.passedFrom=parseInt(t.passedInputScore.val(),10):"Attempts"===n&&(i.passedFrom=parseInt(t.passedInputAttempts.val(),10));var r=e.find("#set_number_of_attempts").is(":checked"),a=r?parseInt(t.maxAttemptsCount.val(),10):0,s={data:{guidance:t.guidance.val(),showGuidanceAfterResponseOption:i,maxAttemptsCount:a}};r&&(o().isNaN(a)||a<1||a>100)&&y(s,{el:t.maxAttemptsCount,message:"Correct number of attempts should be greater than 0 and less than 100"});if(("Score"===n||"Attempts"===n)&&(o().isNaN(i.passedFrom)||i.passedFrom<0||i.passedFrom>100)){var c="Score"===n?'"Score is greater than or equal to a %"':'"After X attempts"';y(s,{el:"Score"===n?t.passedInputScore:t.passedInputAttempts,message:"".concat(c," should be greater or equal to 0 and less than 100")})}return s}(t);switch(e){case c.ZP.CODE_OUTPUT_COMPARE:n=function(e){var t={points:e.find("#points"),ignoreCase:e.find("#ignore_case"),ignoreWhiteSpaces:e.find("#ignore_white_spaces"),matchSubstring:e.find("#match_substring"),sequence:e.find(".sequence :input").filter(":not(button)"),showExpectedAnswer:e.find("#show_expected_answer"),arePartialPointsAllowed:e.find("#allow_partial_points")},n=t.ignoreWhiteSpaces.is(":checked"),i={data:{points:parseInt(t.points.val(),10),options:{ignoreCase:t.ignoreCase.is(":checked"),ignoreWhitespaces:n,ignoreNewline:n,matchSubstring:t.matchSubstring.is(":checked")},showExpectedAnswer:t.showExpectedAnswer.is(":checked"),arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked")}},r=b(i.data.points,t.points);r&&y(i,r);return _(i,function(e,t,n){var i={data:{}},r="If Substring Match option is enabled, the Expected Output cannot be empty/blank";return i.data.sequence=o()(e).chunk(l.ZP.COC_SEQUENCE_FIELDS).map((function(e){var s={};o().each(e,(function(e){var t=a()(e),n=t.attr("name");s[n]="showFeedback"===n?t.is(":checked"):t.val()}));var c=function(t){var n=o().find(e,(function(e){return"output"===e.name}));y(i,{el:a()(n),message:t})};if(t){var l=s.output;n&&(l=l.trim()),""===l&&c(r)}s.output&&s.output.length>d&&c("Expected output field content is too large, it must not exceed 2,500 lines.");return s})).value(),i}(t.sequence,i.data.options.matchSubstring,n))}(t);break;case c.ZP.TEST:n=function(e){var t={points:e.find("#points"),arePartialPointsAllowed:e.find("#allow_partial_points")},n={data:{points:parseInt(t.points.val(),10),arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked")}},i=b(n.data.points,t.points);i&&y(n,i);return n}(t);break;case c.ZP.MULTIPLE_CHOICE:n=function(e){var t={showExpectedAnswer:e.find("#show_expected_answer"),correct_points:e.find("#correct_points"),incorrect_points:e.find("#incorrect_points"),arePartialPointsAllowed:e.find("#allow_partial_points")},n={data:{showExpectedAnswer:t.showExpectedAnswer.is(":checked"),points:parseInt(t.correct_points.val(),10),incorrectPoints:parseInt(t.incorrect_points.val(),10),arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked")}},i=b(n.data.points,t.correct_points);i&&y(n,i);var r=b(n.data.incorrectPoints,t.incorrect_points,!0);r&&y(n,r);return n}(t);break;case c.ZP.FILL_IN_THE_BLANKS:n=function(e){var t={showExpectedAnswer:e.find("#show_expected_answer"),points:e.find("#points"),arePartialPointsAllowed:e.find("#allow_partial_points")},n={data:{showExpectedAnswer:t.showExpectedAnswer.is(":checked"),points:parseInt(t.points.val(),10),arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked")}},i=b(n.data.points,t.points);i&&y(n,i);return n}(t);break;case c.ZP.FREE_TEXT:n=function(e){var t={previewType:e.find("#previewType"),arePartialPointsAllowed:e.find("#allow_partial_points"),points:e.find("#points")},n=g(e),i={data:{previewType:t.previewType.val(),arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked"),points:parseInt(t.points.val(),10),rubrics:n}},r=b(i.data.points,t.points);r&&y(i,r);return i}(t);break;case c.ZP.FREE_TEXT_AUTO:n=function(e){var t={previewType:e.find("#previewType"),arePartialPointsAllowed:e.find("#allow_partial_points"),points:e.find("#points")},n={data:{arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked"),previewType:t.previewType.val(),points:parseInt(t.points.val(),10)}},i=b(n.data.points,t.points);i&&y(n,i);return n}(t);break;case c.ZP.GRADE_BOOK:return function(e){var t={points:e.find("#points"),arePartialPointsAllowed:e.find("#allow_partial_points")},n=g(e),i={data:{points:parseInt(t.points.val(),10),arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked"),rubrics:n}},r=b(i.data.points,t.points);r&&y(i,r);return i}(t);case c.ZP.MATH:n=function(e){var t={showExpectedAnswer:e.find("#show_expected_answer"),points:e.find("#points")},n={data:{showExpectedAnswer:t.showExpectedAnswer.is(":checked"),points:parseInt(t.points.val(),10)}},i=b(n.data.points,t.points);i&&y(n,i);return n}(t);break;case c.ZP.PARSONS_PUZZLE:n=function(e){var t={points:e.find("#points")},n={data:{points:parseInt(t.points.val(),10)}},i=b(n.data.points,t.points);i&&y(n,i);return n}(t);break;case c.ZP.SENSE_NETWORK:n=function(e){var t={points:e.find("#points"),gradable:e.find("#gradable")},n={data:{points:parseInt(t.points.val(),10),gradable:t.gradable.is(":checked")}};if(n.data.gradable){var i=b(n.data.points,t.points);i&&y(n,i)}else""===n.data.points&&(n.data.points="0");return n}(t);break;case c.ZP.RANDOM:return function(e){var t={points:e.find("#points")},n={data:{points:parseInt(t.points.val(),10)}},i=b(n.data.points,t.points);i&&y(n,i);return n}(t);default:n={data:{}}}return _(i,n)}function g(e){var t=e.find(".assessments-grade-rubrics--item");return o().map(t,(function(e){var t,n,i=a()(e);return{id:i.data("id"),weight:(t=i.find(".assessments-grade-rubrics--weight-edit").val(),n=parseInt(t,10)||0,n<0||n>1e3?0:n),message:i.find(".assessments-grade-rubrics--message-edit").val()}}))}function v(e,t){var n={data:{metadata:{}}},i={bloomsObjectiveLevel:t.find("#blooms"),learningObjectives:t.find("#learningObjectives"),tags:t.find(".tag-item"),files:"files",layout:t.find("#layout")};return function(e,t,n){var i=[];n.each((function(){var t={tag:a()(this).find('[name="tag_name"]'),value:a()(this).find('[name="tag_value"]')},n={name:t.tag.val(),value:t.value.val()};i.push(n),l.Z0.map((function(e){return e.toLowerCase()})).includes(n.name.toLowerCase())&&w(e,{el:t.tag,message:"".concat(n.name," is protected (internal) tag name")}),t.tag.attr("required")&&!n.value&&w(e,{el:t.value,message:'"'+n.name+'" tag value is required'})})),i.unshift({name:l.ZP.ASSESSMENT_TYPE_TAG,value:l.ZP.ASSESSMENT_NAME_BY_TYPE[t]}),e.data.metadata.tags=o()(i).filter((function(e){return e.name&&e.value})).uniqBy("name").value()}(n,e,i.tags),o().defaultsDeep(n,{data:{metadata:{files:[],layout:i.layout.val()},bloomsObjectiveLevel:i.bloomsObjectiveLevel.val(),learningObjectives:i.learningObjectives.val()}}),n.data.learningObjectives||w(n,{el:i.learningObjectives,message:"Learning Objectives is required"}),n.data.bloomsObjectiveLevel||w(n,{el:i.bloomsObjectiveLevel,message:"Bloom's Level is required"}),n}function b(e,t,n){var i=t.val();return/^[-+]?\d+$/.test(i)?function(e){return e<0||e>1e3}(e)?{el:t,message:n?"Incorrect points should be greater or equal to 0 and less than 1000":"Correct points should be greater to 0 and less than 1000"}:void 0:{el:t,message:n?"Incorrect points should be an integer":"Correct points should be an integer"}}function y(e,t){e.errors=e.errors||[],e.errors.push(t)}function w(e,t){e.libErrors=e.libErrors||[],e.libErrors.push(t)}function _(e,t){var n=o().cloneDeep(e);return o().assign(n.data,t.data),(n.errors||t.errors)&&(n.errors=n.errors||[],n.errors=n.errors.concat(t.errors||[])),n}function k(e){var t=e.find("#test_type").val();if(t!==c.ZP.TEST_SUBTYPES.CUSTOM){var n=e.find("#test_subtype").val(),i=t===c.ZP.TEST_SUBTYPES.JAVA,r=t===c.ZP.TEST_SUBTYPES.PYTHON,s=e.find(".test-case-info"),l=o().map(s,(function(e){var t=a()(e);return i&&"junit"===n?{filePath:t.find(".test-case-path").text(),className:t.find(".test-case-class").text()}:t.find(".test-case-path").text()})),u=e.closest(".assessment-editor").find("#grading_form"),d=parseInt(u.find("#points").val(),10),p=parseInt(e.find("#timeout").val(),10),f={type:t,subtype:n,files:l,maxPoints:d,timeout:p};if(i&&"junit"===n){var h=e.find("#sources").val(),m=e.find("#testsources").val(),g=e.find("#junit-version").val(),v={wd:e.find("#wd").val(),sources:h,libs:e.find("#libs").val(),testsources:m,jUnitVersion:g};f=o().extend(f,v)}else if(i&&"style"===n){var b=e.find("#checkstyle-version").val()||"";f=o().extend(f,{configFile:e.find("#configFile").val(),checkStyleVersion:b})}else r&&"unittest"===n&&(f=o().extend(f,{executable:e.find("#executable").val(),pythonwd:e.find("#pythonwd").val()}));return JSON.stringify(f)}}const P={getData:function(e,t,n){var i=t.find("#"+n);switch(n){case"general_form":return f(e,i);case"execution_form":return h(e,i);case"grading_form":return m(e,i);case"metadata_form":return v(e,i);default:return{data:{}}}},genAdvTestConfig:k,processForLibrary:function(e){var t=o().cloneDeep(e),n=t.bloomsObjectiveLevel,i=t.learningObjectives;return i&&t.metadata.tags.splice(1,0,{name:l.ZP.LEARNING_OBJECTIVES_TAG,value:i}),n&&t.metadata.tags.splice(1,0,{name:l.ZP.BLOOMS_LEVEL_TAG,value:l.ZP.BLOOMS_LEVEL[n]}),o().omit(t,["points","incorrectPoints","bloomsObjectiveLevel","learningObjectives"])},getFilesFromOpened:function(e,t){return o().map(t,(function(t){return function(e,t){switch(t.type){case u.Z.TYPE.FILE:case u.Z.TYPE.TUTOR:return t.content;case u.Z.TYPE.PREVIEW:var n=new RegExp("^http(s?):\\/\\/"+e+"\\/","gi");return n.test(t.content)?t.content.replace(n,""):/^http(s?):/.test(t.content)?null:t.content;default:return null}}(e,t)}))},convertLibAssessment:function(e){var t=o().omit(e,["type","assessmentId","libraryId","version","parametersScript"]),n=[];return o().each(e.metadata.tags,(function(e,t){n.push({name:t,value:e})})),t.metadata.tags=n,{type:e.type,linkedId:e.assessmentId,libraryId:e.libraryId,version:e.version,source:t,parameters:e.parametersScript}}}},26024:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>P,co:()=>w});var i=n(15861),r=n(87757),a=n.n(r),s=n(96486),o=n.n(s),c=n(20294),l=n(49721),u=n(97137),d=n(93443),p=n(85886),f=n(93702),h=p.ZP.ASSESSMENTS_ANSWERS_FILE,m={};function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"[]";try{return JSON.parse(e.content)}catch(i){if(t)return n;throw u.Z.error("Parse "+e.fullFilePath+" failed. Please check that the file contains valid JSON."),"Parse "+e.fullFilePath+" failed."}}function v(e,t){return f.Z.initFile(e,t)}var b=function(e,t){return m[e]||(m[e]=v(e,t)),m[e]},y=function(){var e=(0,i.Z)(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o()(o().get(l.Z.currentProject.children,[".guides","assessments"],{})).keys().filter((function(e){return"json"===c.ZP.path.getFileExtension(e)})).value()){e.next=3;break}return e.abrupt("return",[]);case 3:return n=o().map(t,(function(e){return b("".concat(p.Nc,"/").concat(e),"[]")})),e.abrupt("return",Promise.all(n).then((function(e){return o()(e).map((function(e){return g(e)})).compact().value()})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){return b(h,"[]").then((function(e){return g(e,!0)}))};function _(e,t){t.content=JSON.stringify(e,void 0,"\t")}var k=o().debounce((function(){return u.Z.notify("Warning! Manual editing JSON files from ".concat(p.Nc," can break guides."))}),200);d.Z.subscribe("file:editor:open",(function(e,t){o().startsWith(t.fileName,p.Nc)&&k()}));const P={loadAssessmentsFromFile:y,loadAnswersFromFile:w,updateAssessmentContent:function(e){return b("".concat(p.Nc,"/").concat(e.taskId,".json"),"{}").then(_.bind(null,e))},removeAssessments:function(e){var t=o().map(e,(function(e){return"".concat(p.Nc,"/").concat(e,".json")}));return l.Z.currentProject.deleteItems(t)},fileRemoved:function(e){delete m[e]},filesRemoved:function(){m={}},initFile:v,deleteFile:function(e){if(l.Z.currentProject.exists(e))return l.Z.currentProject.deleteItems([e]);throw Error("File not exist: ".concat(e))}}},83638:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var i=n(15861),r=n(87757),a=n.n(r),s=n(52308),o=n.n(s),c=n(96486),l=n.n(c),u=n(177),d=n.n(u),p=n(49721),f=n(58471),h=n(61478);var m=n(79165);var g,v,b=d().compile('<div class="assessments-grade-rubrics-copy">\n\n</div>\n'),y=d().compile('<div class="assessments-grade-rubrics-copy--item">\n    {{courseName}} - {{assignmentName}}\n    {{#each rubricsList}}\n    <div class="assessments-grade-rubrics-copy-info hide">\n        <div class="assessments-grade-rubrics-copy--item-weight">-{{weight}}</div>\n        <div class="assessments-grade-rubrics-copy--item-message">{{message}}</div>\n    </div>\n    {{/each}}\n</div>\n'),w=d().compile(m),_=d().compile('<input class="assessments-grade-rubrics-copy--input" placeholder="Find course or assignment..." autofocus/>\n'),k="";function P(e){l().delay((function(){o()(e.documentActiveElement).focus()}),200)}function Z(e,t){var n,r=f.Z.showConfirm({description:"Do you want to copy rubrics?",doNotCloseOpened:!0,onHide:function(){P(r)},onClose:(n=(0,i.Z)(a().mark((function n(i){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!i){n.next=8;break}return v.content().empty().append(o()(w())),n.prev=2,n.next=5,t(e.rubricsList);case 5:return n.prev=5,v.close(),n.finish(5);case 8:case"end":return n.stop()}}),n,null,[[2,,5,8]])}))),function(e){return n.apply(this,arguments)})})}function x(e){var t=l().filter(g,(function(e){var t,n;if(p.Z.currentProject.authorAssignment){var i=p.Z.currentProject.authorAssignment,r=i.course,a=i.assignment;t=r.id,n=a.id}return p.Z.currentProject.course&&p.Z.currentProject.eduStartedAssignmentInfo&&(t=p.Z.currentProject.course.id,n=h.Z.getAssignmentId()),(e.courseId!==t||e.assignmentId!==n)&&(l().includes(e.courseName.toLowerCase(),k)||l().includes(e.assignmentName.toLowerCase(),k))})),n=v.content().find(".assessments-grade-rubrics-copy");n.empty(),l().isEmpty(t)?n.append(o()('<strong class="assessments-grade-rubrics--no-rubrics">No rubrics for copy</strong>')):l().each(t,(function(t){var i=o()(y(t));n.append(i),i.mouseenter((function(){i.addClass("assessments-grade-rubrics-copy--item-active"),i.find(".assessments-grade-rubrics-copy-info").removeClass("hide")})),i.mouseleave((function(){i.removeClass("assessments-grade-rubrics-copy--item-active"),i.find(".assessments-grade-rubrics-copy-info").addClass("hide")})),i.click(Z.bind(null,t,e))}))}const C={openDialog:function(e){function t(){v.content().closest(".modal").css({"margin-top":0,top:0}).removeClass("fade in")}v=new f.Z({title:"Copy rubrics",doNotCloseOpened:!0,content:o()(b()),buttons:f.Z.MB_OK,width:"600px",onShow:function(){v.dialogContent.css("max-height","80vh"),t()},onHide:function(){P(v)}}),t(),v.content().find(".assessments-grade-rubrics-copy").empty().append(o()(w())),h.Z.loadRubricsForCopy().then((function(t){g=t,k="",function(e){if(g.length>10){var t=o()(_());v.content().prepend(t),t.keyup((function(){k=t.val(),x(e)}))}}(e),x(e)}))}}},88228:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>c});var i=n(96486),r=n.n(i),a=n(76900),s={1:"ParsonsWidget._graders.LineBasedGrader",2:"ParsonsWidget._graders.VariableCheckGrader",3:"ParsonsWidget._graders.UnitTestGrader",4:"ParsonsWidget._graders.LanguageTranslationGrader",5:"ParsonsWidget._graders.TurtleGrader"},o=function(e){if(!e.result||!e.result.result)return!1;var t=e.result.result;switch(e.type){case a.ZP.TEST:case a.ZP.CODE_OUTPUT_COMPARE:case a.ZP.MULTIPLE_CHOICE:case a.ZP.FILL_IN_THE_BLANKS:case a.ZP.CUSTOM:case a.ZP.PARSONS_PUZZLE:case a.ZP.SENSE_NETWORK:return!(!t||!t.state||"reset"===t.state);case a.ZP.MATH:return!(!t||!t.answers);case a.ZP.FREE_TEXT:case a.ZP.FREE_TEXT_AUTO:return!(!t||!t.answer);case a.ZP.GRADE_BOOK:return!!t&&void 0!==t.points;default:return!1}};const c={tokenize:function(e){for(var t={blank:[],text:[],regexPositions:[]},n=/((?:.|\n)*?)<<<(.+?)>>>/g,i=0;;){var s=n.exec(e);if(null===s)break;i=n.lastIndex;var o=s[1],c=s[2];r().isEmpty(o)||t.text.push(o),c=c.trim(),r().startsWith(c,"/")&&r().endsWith(c,"/")&&c.length>1?(t.regexPositions.push(t.blank.length),t.blank.push({type:a.uR.REG_EX,value:c})):r().startsWith(c,'"')&&r().endsWith(c,'"')&&c.split(/",\s*"/).length>1?t.blank.push({type:a.uR.ONE_OF,value:c.substring(1,c.length-1).split(/",\s*"/)}):t.blank.push(c),t.text.push(0)}if(i!==e.length){var l=e.substring(i);t.text.push(l)}return t},updateAssessmentType:function(e){e.task.codeTest?e.type=a.ZP.TEST:e.task.freeTextAuto?e.type=a.ZP.FREE_TEXT_AUTO:e.task.fillInBlanks?e.type=a.ZP.FILL_IN_THE_BLANKS:e.task.freeText?e.type=a.ZP.FREE_TEXT:e.task.gradeBook?e.type=a.ZP.GRADE_BOOK:e.task.parsonsPuzzle?e.type=a.ZP.PARSONS_PUZZLE:e.task.multipleChoice?e.type=a.ZP.MULTIPLE_CHOICE:e.task.mathStack?e.type=a.ZP.MATH:e.task.senseNetwork?e.type=a.ZP.SENSE_NETWORK:e.task.codeOutputCompare&&(e.type=a.ZP.CODE_OUTPUT_COMPARE)},convertAttemptOrAssessmentTask:function(e,t){return e.codeTest?e.codeTest:e.freeTextAuto?e.freeTextAuto:e.fillInBlanks?e.fillInBlanks:e.freeText?(t&&e.freeText.status&&e.freeText.status.done&&(e.freeText.points=e.freeText.status.done.points),e.freeText):e.gradeBook?(t&&e.gradeBook.points&&(e.gradeBook.points=e.gradeBook.points.value),e.gradeBook):e.parsonsPuzzle?e.parsonsPuzzle:e.multipleChoice?e.multipleChoice:e.mathStack?e.mathStack:e.senseNetwork?e.senseNetwork:e.codeOutputCompare?e.codeOutputCompare:void 0},getParsonsSettingsFromAssessment:function(e){var t={};try{t=JSON.parse(e.source.options)}catch(e){}return e.source.grader&&(t.grader=s[e.source.grader]),{initial:e.source.initial||"",options:t}},isAnswered:o,isUngraded:function(e){var t=r().get(e,"result.result");switch(e.type){case a.ZP.GRADE_BOOK:return!t||void 0===t.points;case a.ZP.FREE_TEXT:if(!t)return!1;var n="DONE"===t.status&&r().isFinite(t.points);return o(e)&&!n;default:return!1}}}},27726:(e,t,n)=>{"use strict";n.d(t,{_3:()=>f.Z,R0:()=>cr,ZP:()=>lr});var i={};n.r(i),n.d(i,{afterRender:()=>Mt,bindEvents:()=>$t,dropFile:()=>en});var r={};n.r(r),n.d(r,{afterRender:()=>tn,bindEvents:()=>rn});var a={};n.r(a),n.d(a,{afterRender:()=>on,bindEvents:()=>dn});var s={};n.r(s),n.d(s,{afterRender:()=>hn});var o={};n.r(o),n.d(o,{afterRender:()=>mn});var c={};n.r(c),n.d(c,{afterRender:()=>Pn,bindEvents:()=>Cn,dropFile:()=>Sn,processSourceBeforeSubmit:()=>En});var l={};n.r(l),n.d(l,{bindEvents:()=>In,dropFile:()=>Tn});var u={};n.r(u),n.d(u,{bindEvents:()=>jn});var d={};n.r(d),n.d(d,{bindEvents:()=>An});var p={};n.r(p),n.d(p,{bindEvents:()=>Bn});var f=n(97441),h=n(70885),m=n(4942),g=n(96486),v=n.n(g),b=n(52308),y=n.n(b),w=n(99012),_=n(177),k=n.n(_),P=n(3717),Z=n.n(P),x=n(49721),C=n(93443),S=n(20294),E=n(97137),I=n(58471),T=n(54565),j=n(60989),A=n(87167),O=n(28893),D=n(51267),N=n(76900),M=n(22346),F=n(15861),R=n(87757),L=n.n(R),U=n(85886),B=n(68058).I_,q=C.Z.create(n(10742));n(39197),n(25818),n(44941),n(39925);var H=null,W=null,z=[],G=10,V={},K=null,Y=null,J=[],Q=!0,X=[];function $(e){e.find(".js-tag.js-typeahead").typeahead({highlights:!0},{source:K.ttAdapter(),displayKey:"val"}),e.find(".js-value.js-typeahead").typeahead({highlights:!0},{source:Y.ttAdapter(),displayKey:"val"})}function ee(){var e=W.find("#library-filter").val(),t=y()(this).closest(".tag-value-controls").find(".js-tag.js-typeahead.tt-input").val(),n=V[e][t]||[],i=v().map(n,(function(e){return{val:e}}));Y.clear(),Y.add(i)}function te(){var e=D.ZP.renderSaveSearchDlgContent(),t=W.find("#item-name"),n=J,i=new I.Z({title:"Save Search",content:e,buttons:I.Z.MB_OKCANCEL,doNotCloseOpened:!0,focusOn:W.find("#search-name").focus(),onShow:function(){var e=this;t.on("keyup",(function(t){!t||13!==t.keyCode||t.metaKey||t.ctrlKey||e.close(I.Z.IDOK)}))},onClose:function(e){if(e===I.Z.IDOK){var t=i.content().find("#search-name"),r=y().trim(t.val());if(v().isEmpty(r))return S.ZP.addErrorToInput(t,"Name is required"),!1;t.off("keyup");var a=x.Z.currentUser.get("userSettings"),s=v().cloneDeep(a.get("assessments")||{});s.searches=s.searches||[],s.searches=v().slice(s.searches,0,9),s.searches.unshift({name:r,search:n}),a.set("assessments",s),x.Z.currentUser.saveSection("userSettings",(function(){E.Z.success("Search saved successfully."),ae(s.searches)}))}}})}function ne(e){e.preventDefault();var t=y()(this).closest(".favorites-item-container").data("index");ie(x.Z.currentUser.get("userSettings").get("assessments").searches[t].search)}function ie(e,t){var n=W.find(".tag-value-controls");if(n.length!==e.length)for(var i=n.length>e.length?le:oe,r=Math.abs(n.length-e.length);r>0;)i(),r--;n=W.find(".tag-value-controls");for(var a=0;a<e.length;a++){var s=e[a],o=n.eq(a);o.find(".js-tag").typeahead("val",s.name),o.find(".js-value").typeahead("val",s.value)}me(t)}function re(e){e.preventDefault();var t=y()(this).closest(".favorites-item-container").data("index"),n=x.Z.currentUser.get("userSettings"),i=v().cloneDeep(n.get("assessments")||{});i.searches=i.searches||[],i.searches.splice(t,1),n.set("assessments",i),x.Z.currentUser.saveSection("userSettings",(function(){E.Z.success("Search removed successfully."),ae(i.searches)}))}function ae(e){var t=W.find(".favorites .dropdown-menu"),n=D.ZP.renderFavoritesDdItems(e);t.empty().append(n)}function se(e){e.preventDefault(),oe()}function oe(){var e=W.find(".search.tags");e.find(".tag-value-controls:first").find(".add-tag").empty().removeClass("add-tag").addClass("remove-tag").append('<i class="ss-icon red">delete</i>');var t=D.ZP.renderEmptyTagValueControls();e.prepend(t),$(t)}function ce(e){e.preventDefault(),le(y()(this).closest(".tag-value-controls")),me()}function le(e){(e=e||W.find(".tag-value-controls:last")).find(".js-typeahead").typeahead("destroy"),e.remove()}function ue(e){e.preventDefault(),B.set("last-used-library-id",y()(this).val()),he()}function de(e){e.preventDefault(),function(e){return j.ZP.AssessmentManager.loadAssessment(e)}(y()(this).closest(".assessment-item").data("id")).then((function(e){H.close(),q.editAssessment({assessment:M.Z.convertLibAssessment(e)})})).catch((function(e){e&&E.Z.error(e.message)}))}function pe(e){e.preventDefault();var t=y()(this);t.closest(".library-assessments-list").find(".assessment-item").removeClass("active"),t.addClass("active")}function fe(e){e.preventDefault(),e.stopPropagation();var t=y()(this),n=y()(W.find(".tag-value-controls")[0]);n.find(".js-tag.js-typeahead.tt-input").val(t.data("key")),n.find(".js-value.js-typeahead.tt-input").val(t.data("value")),me()}function he(){Z().start(),function(e){return ve.apply(this,arguments)}(W.find("#library-filter").val()).then((function(e){var t=v().map(w.ZP.PROTECTED_TAG_NAMES,(function(e){return{val:e}})),n=v().keys(e),i=v().map(n,(function(e){return{val:e}}));K.clear(),K.add(i.concat(t))})).catch((function(e){return e&&E.Z.error(e.message)})).finally((function(){return Z().done()})),be(),me()}function me(e){Z().start();var t,n,i=(t=[],W.find(".tag-value-controls").each((function(){var e=y()(this),n=e.find(".js-tag.js-typeahead.tt-input").val();if(""!==n){var i=e.find(".js-value.js-typeahead.tt-input").val();v().isEmpty(i)||t.push({name:n,value:i})}})),t);return!e&&(n=!v().isEmpty(i),function(e,t){e.removeClass(U.xu),e.attr(U.xu,!t),t||e.addClass(U.xu)}(W.find(".favorites-save-btn"),n)),function(e){J=e;var t=W.find("#library-filter").val();if(!t)return Promise.resolve([]);return j.ZP.AssessmentManager.searchInLibrary({libraryId:t,search:e}).then((function(e){return v().map(e.assessments,(function(e){return e.typeName=w.ZP.ASSESSMENT_NAME_BY_TYPE[e.type],e}))}))}(i).then((function(e){var t,n;W&&(z=v().filter(e,(function(e){return X&&!v().includes(X,e.type)})),ge(!0),e.length?(t=W.find(".paginate-container"),n=ye(),be(),z.length>G&&t.pagination({currentPage:n.page,items:z.length,itemsOnPage:G,displayedPages:3,prevText:"directleft",nextText:"directright",onPageClick:function(){ge()}})):be())})).catch((function(e){E.Z.error(e.message)})).finally((function(){Z().done()}))}function ge(e){var t=ye(e),n=(t.page-1)*t.perPage;!function(e){C.Z.off(W,"click",".select-assessment-btn"),C.Z.off(W,"click",".assessment-item"),C.Z.off(W,"click",".assessment-item-tag");var t=v()(J).map((function(e){return e.name+": "+e.value})).values().join("; "),n=D.ZP.renderAssessmentLibraryItemsList(e,t,Q);W.find(".assessments-list-container .list").empty().append(n),C.Z.on(W,"click",".select-assessment-btn",de),C.Z.on(W,"click",".assessment-item",pe),C.Z.on(W,"click",".assessment-item-tag",fe)}(z.slice(n,n+t.perPage))}function ve(){return(ve=(0,F.Z)(L().mark((function e(t){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:if(!V[t]){e.next=4;break}return e.abrupt("return",V[t]);case 4:return e.abrupt("return",j.ZP.AssessmentManager.loadTags({libraryId:t}).then((function(e){return V[t]=e,e})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(){var e=W.find(".paginate-container");e.data("pagination")&&(e.pagination("destroy"),e.data("pagination",null))}function ye(e){if(!W)return{};var t=1,n=W.find(".paginate-container");return!e&&n.data("pagination")&&(t=n.pagination("getCurrentPage")),{perPage:G,page:t}}function we(){H=null,J=[],V={},Y.clear(),Y=null,K.clear(),K=null,W.find("#library-filter")[0].selectize.destroy(),W.find(".js-typeahead").typeahead("destroy"),W=null,C.Z.off(W)}function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.showApplySearch,i=t.preview,r=t.edit,a=t.filterOutTypes;Q=!n&&!i,X=a||[];var s=x.Z.currentUser.get("userSettings").get("assessments")||{};W=D.ZP.renderLibraryBrowserDlgContent(e,s.searches||[]);var o=v().map(e.my.concat(e.certified),"id"),c=i&&i.libraryId?i.libraryId:null,l=r&&r.libraryId?r.libraryId:null,u=B.get("last-used-library-id"),d=l||c||u,p=v().includes(o,d);if(d&&p?W.find("#library-filter").val(d):p||W.find(".library-no-access-random").removeClass("hide"),function(e){(K=new Bloodhound({name:"tags",local:[],datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.val)},queryTokenizer:Bloodhound.tokenizers.whitespace})).initialize(),(Y=new Bloodhound({name:"values",local:[],datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.val)},queryTokenizer:Bloodhound.tokenizers.whitespace})).initialize();var t=W.find("#library-filter").selectize({onInitialize:function(){this.$control_input.attr("aria-labelledby","library-filter"),this.$control_input.attr("readonly",!0)}});e&&t[0].selectize.disable(),$(W)}(i),i){var f=W.find(".filters");f.find(":input").prop("readonly",!0),f.find("button").prop(U.xu,!0)}i&&i.search&&ie(i.search,!0),r&&r.search&&ie(r.search,!0),he(),!i&&(C.Z.on(W,"click",".add-tag",se),C.Z.on(W,"click",".remove-tag",ce),C.Z.on(W,"focus",".js-value.js-typeahead",ee),C.Z.on(W,"change input typeahead:selected",".js-typeahead",(function(){return me()})),C.Z.on(W,"click",".favorites-save-btn",te),C.Z.on(W,"click",".favorites-item",ne),C.Z.on(W,"click",".icon-delete-search",re),C.Z.on(W,"change","#library-filter",ue));var h=n?[{title:"Apply search",type:1,onClick:function(){return 0===J.length?(E.Z.info("Search should contain at least one tag."),!1):0===z.length?(E.Z.info("Search should return at least one assessment."),!1):(e=W.find("#library-filter").val(),q.applyAssessmentLibrarySearch({searchData:{libraryId:e,search:J}}),H.close());var e}}]:I.Z.MB_CANCEL,m=i?"Random assessment search preview":"Choose an Assessment to Add";H=new I.Z({title:m,buttons:h,content:W,width:1200,height:500,onShow:function(){me(!!i)},onClose:function(){we()}})}C.Z.subscribe("guides:library:preview",(function(e,t){f.Z.getAssessmentLibraries().then((function(e){_e(e,{preview:t})}))}));const ke={openDialog:_e};const Pe={chooseLibrary:function(e){return new Promise((function(t,n){var i=new I.Z({title:"Select Library",icon:"books",content:D.ZP.renderSelectLibraryDlgContent(e),buttons:[{title:"Select",type:1,onClick:function(){return i.close(I.Z.IDOK)}},{title:"Cancel",onClick:function(){return i.close(I.Z.IDCANCEL)}}],onClose:function(e){e===I.Z.IDOK?t(i.content().find("#library").val()):n(new Error("Select library was canceled"))}})}))}};const Ze={show:function(e,t){if(e.layout&&e.isCloseAll)return Promise.resolve();var n={isPreviousLayoutSelected:!e.layout,layout:t.layout},i={isCloseAll:e.isCloseAll,opened:t.opened};return new Promise((function(e,t){I.Z.showConfirm({title:"Section settings confirmation",content:D.ZP.renderSectionSettingsConfirmDlgContent(n,i),buttons:I.Z.MB_OKCANCEL,width:600,onClose:function(n){n?e():t(new Error("section settings confirm cancelled"))}})}))}};var xe,Ce,Se,Ee,Ie=n(70243);n(57568);var Te=[],je=!1,Ae=[".settings"];function Oe(e,t){var n={core:{check_callback:!1,multiple:e,themes:{dots:!1,responsive:!1},force_text:!0},types:{root:{icon:"ss-icon ss-briefcase"},dir:{icon:"ss-icon ss-folder"},file:{icon:"ss-icon ss-textfile"},truncated:{icon:"ss-icon ss-alert"}},sort:Re,plugins:["types","sort"]};return e?(v().isEmpty(t)||(t=v()(t).keyBy((function(e){return e})).mapValues((function(){return!0})).value()),n.core.data=Ie.Z.getTreeLevelByPath(x.Z.currentProject,"",null,t,!0),De(n.core.data),n.plugins.push("checkbox"),n.checkbox={cascade_to_disabled:!1}):(n.plugins.push("conditionalselect","noclose"),n.conditionalselect=function(){return!1}),n}function De(e,t){var n="";"root"!==e.type&&(n=t?t+"/"+e.text:e.text),v().includes(Ae,n)&&(e.state.disabled=!0),v().each(e.children,(function(e){De(e,n)}))}function Ne(e){return!(!e.state||!e.state.selected)||!!e.children&&v().some(e.children,Ne)}function Me(e){return v()(e).map((function(e){return Ne(e)?(delete e.state,e.children=Me(e.children),e):null})).compact().value()}function Fe(e,t){return e=e?e+"/":"",v()(t).map((function(t){var n=e+t.text;return v().isEmpty(t.children)?"file"!==t.type?null:n:Fe(n,t.children)})).flattenDeep().compact().value()}function Re(e,t){var n=this.get_node(e),i=this.get_node(t),r=["root","dir","file"];return n.type!==i.type?r.indexOf(n.type)>r.indexOf(i.type)?1:-1:n.text.toLowerCase()>i.text.toLowerCase()?1:-1}function Le(e,t){t.settings.core.data=Me(v().cloneDeep(e.get_json())),t.refresh(!0),v().delay((function(){var e=t.get_json();v().isEmpty(e)||(Te=Fe("",v().cloneDeep(e)[0].children)||[])}),100)}y().jstree.plugins.noclose=function(){this.close_node=y().noop};const Ue={init:function(e,t){if(!je){if(t){var n=D.ZP.renderAssessmentFilesList(Te);e.empty().append(n)}var i=Oe(!0,Te),r=Oe(!1);(Se=e.find(".selected-content")).jstree(r),Ee=y().jstree.reference(Se),Se.on("loaded.jstree refresh.jstree",(function(){Ee.open_all()})),(xe=e.find(".project-files")).jstree(i),Ce=y().jstree.reference(xe),xe.on("loaded.jstree",Le.bind(null,Ce,Ee)).on("select_node.jstree deselect_node.jstree",(function(){v().delay(Le.bind(null,Ce,Ee),50)})),je=!0}},setInitialPaths:function(e){Te=e},clean:function(){xe&&xe.off("select_node.jstree deselect_node.jstree"),Ce&&Ce.destroy(),Ee&&Ee.destroy(),Ce=null,Ee=null,xe=null,Se=null,Te=[],je=!1},getSelectedPaths:function(){return Te}};var Be=n(50352),qe=n(73007),He=n.n(qe),We=n(19093),ze=n.n(We),Ge=n(68156),Ve=n.n(Ge);function Ke(){Ve().apply(this,arguments)}function Ye(){ze().apply(this,arguments)}n(44941),(0,S.ED)(Ke,Ve()),Ke.prototype.getLocalResults=function(e,t){t(this.list)},Ke.prototype.setList=function(e){this.list=e},(0,S.ED)(Ye,ze()),Ye.prototype.getSearchProps=function(){return["name","type"]},Ye.prototype.getSearchTokens=function(){return{}},Ye.prototype.doName=function(e,t){return this.compare(e.toLowerCase(),t.source.name.toLowerCase())},Ye.prototype.doType=function(e,t){return this.compare(e.toLowerCase(),t.type.toLowerCase())};const Je=function(e){var t=new(He()),n=new Ke([new Ye]);return n.setList(e),t.addProvider(n),t.setList=function(e){this.clean(),n.setList(e)},t};var Qe=n(18914),Xe=n(21384),$e=n(15671),et=n(43144),tt=n(5085),nt={},it=function(){function e(t,n,i){(0,$e.Z)(this,e),this.elementId=t,this.container=n,this.value=i,this.counter=10,this.initWithFallback()}return(0,et.Z)(e,[{key:"initWithFallback",value:function(){var e=this;v().defer((function(){null===document.getElementById(e.elementId)?e.counter>=0&&(v().delay((function(){return e.initWithFallback()}),100),e.counter=e.counter-1):e.init()}))}},{key:"cleanup",value:function(){nt[this.elementId]&&(nt[this.elementId].editor.close(),nt[this.elementId].observer.disconnect(),nt[this.elementId].changeCallback.dispose(),nt[this.elementId].spellchecker.cleanup(),delete nt[this.elementId])}},{key:"destroy",value:function(){this.cleanup(),this.panel&&this.panel.clear()}},{key:"init",value:function(){this.cleanup();var e=this.container.find(".assessments-ribbon-editor"),t=new A.yO(this.value,"markdown"),n=new A.ZP(e,t,{language:"markdown",lineNumbers:"on",automaticLayout:!0,ariaLabel:"",quickSuggestions:{other:!1,comments:!1,strings:!1},minimap:{enabled:!1},parameterHints:{enabled:!1},wordWrap:"on",suggestOnTriggerCharacters:!1,acceptSuggestionOnEnter:"off",tabCompletion:"off",wordBasedSuggestions:!1}),i=new A.yV(n);i.init();try{var r=v().throttle((function(){return n.layout()}),300),a=new ResizeObserver(r);a.observe(e.find(".monaco-editor-container")[0]);var s=this.container.closest(".assessment-editor"),o=this.container.find(".guides-editor-with-preview-container-textarea"),c=v().throttle((function(){var e=n.getContent();o.val(e),s.data("changed",!0)}),30),l=n.onDidChangeModelContent(c);nt[this.elementId]={editor:n,observer:a,changeCallback:l,spellchecker:i}}catch(e){}var u=this.container.find(".assessments-ribbon-panel");n.setModel(t),this.editor=n,this.panel=new tt.Z(u,t,n,{showActions:!1,showPreview:!1,showBlocks:!1,showTutor:!1,showFile:!1,showMedia:!1})}}]),e}(),rt=n(83638),at=n(11359),st=k().compile(at),ot=function(e){var t=e.find(".item-div");e.find(".move").prop(U.xu,!1),t.first().find(".up-btn").prop(U.xu,!0),t.last().find(".down-btn").prop(U.xu,!0)};function ct(e){e.preventDefault();var t=y()(this);I.Z.showConfirm({title:"Remove Answer?",description:"Are you sure you wish to remove this Answer?",onClose:function(e){if(e){t.closest(".item-div").remove();var n=t.closest(".answers-list");ot(n)}}})}function lt(e){var t=y()(this).closest(".form-fieldset").find(".command-helpBlock");v().includes(e.target.value,".guides/secure")?t.removeClass("hide"):t.addClass("hide")}var ut=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.find("#assessment-type").val(),r=[],a={},s=e.find(".navigation-item");return v().each(s,(function(s){var o=y()(s),c=o.data("id"),l=M.Z.getData(i,e,c),u=t?[].concat(l.errors||[],l.libErrors||[]):l.errors;!v().isEmpty(u)&&n?(o.addClass("error"),r=r.concat(v().map(u,(function(e){return e.message})))):(n&&o.removeClass("error"),v().merge(a,l.data))})),{errorMsgArr:r,source:a}};function dt(e){var t=e.find("#allow_partial_points").is(":checked"),n=e.find(".assessments-grade-rubrics--form");t?n.removeClass("hide"):n.addClass("hide")}function pt(e,t,n){e.find(".assessments-grade-rubrics--list").append(y()(st({id:S.ZP.GUID(),weight:t||1,message:n||"Message",editWeight:!0}))),e.data("changed",!0)}function ft(e){rt.Z.openDialog((function(t){v().map(t,(function(t){pt(e,t.weight,t.message)}))}))}function ht(e,t){I.Z.showConfirm({description:"Do you want to delete grading rubric?",onClose:function(n){return n&&(y()(t.currentTarget).closest(".assessments-grade-rubrics--item").remove(),e.data("changed",!0)),!0}})}var mt,gt,vt,bt=function(e){var t=e.find("#set_number_of_attempts").is(":checked"),n=e.find("#max_attempts_count");t?n.removeClass("hide"):n.addClass("hide")},yt=function(e){C.Z.on(e,"change","#allow_partial_points",dt.bind(null,e)),C.Z.on(e,"click",".assessments-grade-rubrics--button",(function(){return pt(e)})),C.Z.on(e,"click",".assessments-grade-rubrics--options",ft.bind(null,e)),C.Z.on(e,"click",".assessments-grade-rubrics--itemClose",ht.bind(null,e))},wt=n(93702),_t=n(61478),kt="compile",Pt="run",Zt=[{ext:["java"],template:(mt={},(0,m.Z)(mt,Pt,v().template("java -cp ${path} ${fileName}")),(0,m.Z)(mt,kt,v().template("javac ${filePath}")),mt)},{ext:["py"],template:(0,m.Z)({},Pt,v().template("python ${filePath}"))},{ext:["c"],template:(gt={},(0,m.Z)(gt,Pt,v().template("./${fileName}")),(0,m.Z)(gt,kt,v().template("gcc ${filePath} -o ${fileName} -lm")),gt)},{ext:["cpp"],template:(vt={},(0,m.Z)(vt,Pt,v().template("./${fileName}")),(0,m.Z)(vt,kt,v().template("g++ -o ${fileName} ${filePath}")),vt)},{ext:["rb"],template:(0,m.Z)({},Pt,v().template("ruby ${filePath}"))},{ext:["sh"],template:(0,m.Z)({},Pt,v().template("bash ${filePath}"))}],xt=function(e,t,n){var i="".concat(e).concat(n);if(e)return i;var r=S.ZP.path.parse(n),a=Zt.find((function(e){return e.ext.includes(r.extension)}));if(!a||a&&!a.template[t])return i;var s=S.ZP.path.getFileName(r.name);return function(e,t,n,i,r){return e({path:n||"./",filePath:t,fileName:i,ext:r})}(a.template[t],n,r.dir,s,r.extension)},Ct=n(21459),St=j.ZP.containerManager;const Et={generate:function(e,t){var n=x.Z.currentProject.guid,i={CODIO_TEST_SEQUENCE:JSON.stringify({command:t.command,preExecuteCommand:t.preExecuteCommand,arguments:e.find(".generate_arguments").val(),input:e.find(".generate_input").val(),timeout:t.options&&t.options.timeout})};return St.run(n,"/usr/share/codio/assessments/generator.py",{env:i}).then((function(e){var t,n=e.code,i=e.stdout,r=e.stderr;try{t=JSON.parse(i)}catch(e){t=i}if(0!==n){var a=r||t;throw t.error&&(a=t.error),Error(a)}if(0!==t.returnCode&&(0,Ct.q4)(t.stderr))throw Error((0,Ct.a4)(t.stderr));return t.stdout}))}};var It=n(80470);function Tt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var At=k().compile(It),Ot=k().compile('<div class="test-case-check-state-icon">\n    {{#if passed}}\n    <span class="iconify-inline test-case-check-state-icon-pass" title="Passed" data-icon="@codio:mdi:check-bold"></span>\n    {{else}}\n    <span class="iconify-inline test-case-check-state-icon-fail" title="Failed" data-icon="@codio:mdi:close-thick"></span>\n    {{/if}}\n</div>\n'),Dt={failed:"fail",passed:"pass",progress:"progress"},Nt=function(e){if(function(e){var t=e.find("#linked-id").val(),n=e.find("#id");return!(n.length&&n.val())&&t}(e)){e.find(".test-case-action").attr("disabled",!0).attr("title","You have to add the assessment from the library first, to generate/check answers")}},Mt=function(e,t){var n=e.find(".assessment-code-output-compare-form");Nt(n),function(e,t){var n=e.find(".item-div");v().each(t.source.sequence,(function(e,t){var i=y()(n.get(t));i.find(".input-textarea").val(e.input),i.find(".output-textarea").val(e.output),i.find(".feedback-textarea").val(e.feedback)}))}(e,t)};function Ft(e){return Rt.apply(this,arguments)}function Rt(){return Rt=(0,F.Z)(L().mark((function e(t){var n,i,r;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){var e=(0,F.Z)(L().mark((function e(n){var i,r,a,s,o,c;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ut(t,!1),r=i.source,(a=n.find(".test-case-generateOutputBtn")).disableButton("Generating...","loading"),(s=n.find(".remove-btn")).attr("disabled",!0),e.prev=5,e.next=8,Et.generate(n,r);case 8:(o=e.sent)&&n.find(".output-textarea").val(o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),c=e.t0.message,E.Z.error(c);case 16:return e.prev=16,a.enableButton(),s.attr("disabled",!1),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[5,12,16,20]])})));return function(t){return e.apply(this,arguments)}}(),i=y()(this).closest(".item-div"),""!==(r=i.find(".output-textarea")).val()){e.next=5;break}return e.abrupt("return",n(i));case 5:I.Z.showConfirm({title:"Warning",description:"Output field is not empty. Are you sure you want to overwrite it?",onClose:function(e){e&&(r.val(""),n(i))}});case 6:case"end":return e.stop()}}),e,this)}))),Rt.apply(this,arguments)}function Lt(e,t){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,F.Z)(L().mark((function e(t,n){var i,r,a,s,o,c,l,u,d,p,f,h,m,g;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ut(t,!1),r=i.source,Kt(a=y()(this).closest(".test-cases-container"),n),Jt(a),Vt(n,Dt.progress),s=t.find(".item-div"),o=s.index(n),(c=v().cloneDeep(r)).sequence=[r.sequence[o]],l=n.find(".output-textarea").val(),u=zt(t,c),e.prev=11,e.next=14,Ht(u);case 14:d=e.sent,p=d[0],f=0===p.returnCode&&p.passed,h=f?Dt.passed:Dt.failed,m=0!==p.returnCode?p.stderr:f?"":p.stdout,Vt(n,h),Gt(n,f,m,l),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(11),g=e.t0.message,Vt(n,Dt.failed),E.Z.error(g);case 28:return e.prev=28,Yt(a,n),Jt(a),e.finish(28);case 32:case"end":return e.stop()}}),e,this,[[11,23,28,32]])})))).apply(this,arguments)}function Bt(e){return qt.apply(this,arguments)}function qt(){return(qt=(0,F.Z)(L().mark((function e(t){var n,i,r,a,s,o,c,l,u,d,p;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ut(t,!1),i=n.source,Kt(r=y()(this).closest(".test-cases-container")),Jt(r,"loading"),(a=t.find(".add-item-to-check-btn")).attr("disabled",!0),t.find(".test-case-check-output-container").hide(),t.find(".test-case-check-state").empty(),s=t.find(".item-div"),o=i.sequence,c=Tt(o),e.prev=11,c.s();case 13:if((l=c.n()).done){e.next=21;break}return u=l.value,d=o.indexOf(u),p=y()(s.get(d)),e.next=19,Lt(t,p);case 19:e.next=13;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(11),c.e(e.t0);case 26:return e.prev=26,c.f(),e.finish(26);case 29:a.attr("disabled",!1),Yt(r),Jt(r);case 32:case"end":return e.stop()}}),e,this,[[11,23,26,29]])})))).apply(this,arguments)}function Ht(e){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,F.Z)(L().mark((function e(t){var n,i,r,a,s,o,c,l;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.Z.currentProject.guid,e.next=3,_t.Z.checkByAssessment(n,t,{});case 3:i=e.sent,r=i.result,a=r.code,s=r.stdout,o=r.stderr;try{c=JSON.parse(s)}catch(e){c=s}if(0===a||c.sequence){e.next=13;break}throw l=o||c,c.error&&(l=c.error),Error(l);case 13:return e.abrupt("return",c.sequence);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e,t){var n=e.find("#assessment-type").val(),i=e.find("#id");return{type:n,taskId:i.length?i.val():"".concat(n,"-").concat(S.ZP.hashCode(S.ZP.GUID())),source:t}}function Gt(e,t,n,i){var r=function(e,t){var n=new diff_match_patch.diff_match_patch,i=n.diff_main(e,t);return n.diff_cleanupSemantic(i),n.diff_prettyHtml(i)}(n,i),a=e.find(".test-case-check-output-container");t?a.hide():a.show(),a.find(".test-case-check-output").empty().append(r)}function Vt(e,t){var n=t===Dt.progress;e.find(".test-case-check-output-container").hide();var i=e.find(".test-case-check-state");if(i.empty(),!n){var r=t===Dt.passed,a=y()(Ot({passed:r}));i.append(a)}}function Kt(e,t){var n=t||e;n.find(".remove-btn").attr("disabled",!0),n.find(".test-case-checkBtn").disableButton("Checking...","loading")}function Yt(e,t){var n=t||e,i=e.find(".test-case-checkBtn.loading").length>0;!t&&i||(n.find(".remove-btn").attr("disabled",!1),n.find(".test-case-checkBtn").enableButton())}function Jt(e,t){var n=e.find(".test-case-checkAllBtn");e.find(".test-case-checkBtn.loading").length>0?n.disableButton("Check All",t):n.enableButton()}function Qt(e,t){e&&e.preventDefault();var n=y()(this).closest(".assessment-code-output-compare-form"),i=n.find(".items-list"),r={};t&&(r={arguments:t.arguments,input:t.input,output:t.output});var a=y()(At({source:{sequence:[r]}}));i.append(a),Nt(n)}function Xt(e){var t=y()(this).closest(".form-fieldset"),n=e.target.checked?"removeClass":"addClass";t.parent().find(".output-feedback-fieldset")[n]("hide")}var $t=function(e){C.Z.on(e,"click",".add-item-to-check-btn",Qt),C.Z.on(e,"click",".test-case-generateOutputBtn",(function(){Ft.call(this,e)})),C.Z.on(e,"click",".remove-btn",ct),C.Z.on(e,"click",".test-case-checkBtn",(function(){var t=y()(this).closest(".item-div");Lt.call(this,e,t)})),C.Z.on(e,"click",".test-case-checkAllBtn",(function(){Bt.call(this,e)})),C.Z.on(e,"change",".assessment-coc-feedback-toggle .toggle input",Xt),C.Z.on(e,"change","#cmd",lt)},en=function(e,t,n){var i=y()(n.target);if("cmd"===i.attr("id")||"pre_cmd"===i.attr("id")){var r="cmd"===i.attr("id")?Pt:kt,a=xt(i.val(),r,t);i.val(a),i.trigger("change")}},tn=function(e,t){!function(e,t){e.find("#text").val(t.source.text),e.find("#fib-assessments-distractors").val(t.source.distractors||"")}(e,t)},nn=function(e){var t=e.find("#show_values").is(":checked"),n=e.find(".fib-assessments-distractors");t?n.removeClass("hide"):n.addClass("hide")},rn=function(e){C.Z.on(e,"change","#show_values",nn.bind(null,e))},an=n(99393),sn=k().compile(an),on=function(e,t){!function(e,t){var n=e.find(".item-div");v().each(t.source.answers,(function(e,t){y()(n.get(t)).find(".answer-textarea").val(e.answer)}))}(e,t),ot(e.find(".answers-list"))};function cn(e){e&&e.preventDefault();var t=y()(this).closest(".assessment-multiple-choice-form"),n=t.find(".answers-list"),i=t.find("#multiple_response").is(":checked"),r=t.find("#is_randomized").is(":checked"),a=y()(sn({source:{answers:[{}],multipleResponse:i,isRandomized:r}}));n.append(a),ot(n)}function ln(){var e=y()(this),t=e.closest("form").find(".answers-list");e.is(":checked")?(t.find(".radiobutton").addClass("toggle").removeClass("radiobutton"),t.find('input[name="correct"]').attr("type","checkbox")):(t.find(".toggle").addClass("radiobutton").removeClass("toggle"),t.find('input[name="correct"]').attr("type","radio"))}function un(e){e.preventDefault();var t=y()(this),n=t.closest(".item-div");t.hasClass("up-btn")?n.prev().insertAfter(n):n.next().insertBefore(n),ot(t.closest(".answers-list"))}var dn=function(e){C.Z.on(e,"click",".add-answer-btn",cn),C.Z.on(e,"click",".remove-btn",ct),C.Z.on(e,"change","#multiple_response",ln),C.Z.on(e,"click",".action-btn.move",un)},pn=n(13667),fn=n(88228),hn=function(e,t){var n=e.find(".assessment-parsons-puzzle-form #execution_form");n.data("onFirstFormPaint",[function(){var e=pn.build("#uiContainer",fn.ZP.getParsonsSettingsFromAssessment(t));n.data("parsonsUI",e)}])},mn=function(e,t){!function(e,t){e.find("#pre_feedback").val(t.source.preExecuteFeedback)}(e,t)},gn=n(42052);var vn=k().compile('<div class="control-group">\n    <label class="control-label hint hint-top">\n        <a href="javascript:void(0)" class="remove-btn" title="Remove test case" aria-label="Remove test case">\n            <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n        </a>\n        Test case\n    </label>\n    <div class="controls">\n        <div class="test-case-info">\n            <div><strong>Path:</strong> <span class="test-case-path">{{casePath}}</span></div>\n            {{#if java}}\n            <div><strong>Class name:</strong> <span class="test-case-class">{{className}}</span></div>\n            {{/if}}\n        </div>\n        <div class="helpBlock command-helpBlock {{#notIncludes casePath ".guides/secure"}}hide{{/notIncludes}}">\n            Script will be executed isolated from user container&nbsp;\n            <a href=\'https://docs.codio.com/instructors/authoring/assessments/auto-grade-scripts.html#secure-scripts\' target=\'_blank\'>click here</a>\n        </div>\n    </div>\n</div>\n'),bn={java:["java"],ruby:["rb"],python:["py"],javascript:["js"]},yn={},wn=function(e,t,n){n.find(".test-sub-type").addClass("hide"),n.find("."+e+"-"+t+"-sub-type").removeClass("hide"),n.find(".test-cases-field").empty(),"junit"===t||"rspec"===t||"unittest"===t?n.find(".form-fieldset-allow-partial").removeClass("hide"):n.find(".form-fieldset-allow-partial").addClass("hide"),"unittest"===t?(n.find(".form-fieldset-py-executable").removeClass("hide"),n.find(".form-fieldset-py-wd").removeClass("hide"),n.find(".form-fieldset-py-path").removeClass("hide")):(n.find(".form-fieldset-py-executable").addClass("hide"),n.find(".form-fieldset-py-wd").addClass("hide"),n.find(".form-fieldset-py-path").addClass("hide")),yn={}},_n=function(e,t,n,i){N.ZP.TEST_SUBTYPES.CUSTOM===e?(n.find(".form-fieldset-subtype-selector").addClass("hide"),n.find(".custom").removeClass("hide"),n.find(".predefined").addClass("hide"),n.find(".form-fieldset-allow-partial").removeClass("hide"),n.find(".form-fieldset-py-executable").addClass("hide"),n.find(".form-fieldset-py-wd").addClass("hide"),n.find(".form-fieldset-py-path").addClass("hide")):(n.find(".form-fieldset-allow-partial").addClass("hide"),n.find(".form-fieldset-subtype-selector").removeClass("hide"),n.find(".custom").addClass("hide"),n.find(".predefined").removeClass("hide"),function(e,t,n){var i={ruby:{style:"Rubocop (style)",rspec:"RSpec (tests)"},java:{style:"CheckStyle",junit:"JUnit (tests)"},python:{style:"PyCodeStyle",unittest:"UnitTest"},javascript:{jshint:"JSHint (style)",jslint:"JSLint (style)"}};t.find("#test_subtype").find("option").remove(),v().each(i[e],(function(r,a){var s=y()("<option></option>").attr("value",a).text(i[e][a]);n.advancedTypeConfig&&(n.advancedTypeConfig.subtype===a&&s.attr("selected","selected"),n.advancedTypeConfig.executable&&(t.find("#executable").val(n.advancedTypeConfig.executable),t.find("#pythonwd").val(n.advancedTypeConfig.pythonwd)),n.advancedTypeConfig.jUnitVersion&&t.find("#junit-version").val(n.advancedTypeConfig.jUnitVersion),n.advancedTypeConfig.checkStyleVersion&&t.find("#checkstyle-version").val(n.advancedTypeConfig.checkStyleVersion)),t.find("#test_subtype").append(s)}))}(e,n,i),t=t||n.find("#test_subtype").val(),wn(e,t,n))},kn=function(e,t,n,i){var r=n.find("#test_subtype").val(),a=t===N.ZP.TEST_SUBTYPES.JAVA&&"junit"===r,s=a?e.filePath:e;yn[s]=!0;var o=y()(vn({casePath:s,className:a?e.className:e,java:a}));n.find(".test-cases-field").append(o);var c=n.find("#codeEnvConfig");C.Z.on(o.find(".remove-btn"),"click",(function(e){e.preventDefault(),e.stopPropagation();var t=y()(this).parent().parent();I.Z.showConfirm({title:"Case remove confirmation",description:"Are you sure you want to remove this case?",onClose:function(e){e&&(c.trigger("change"),t.remove(),yn[s]=!1)}})})),i&&(c.val(M.Z.genAdvTestConfig(n)),c.trigger("change"))},Pn=function(e,t){var n=t.advancedTypeConfig&&t.advancedTypeConfig.subtype;_n(t.advancedType,n,e,t),t.advancedTypeConfig&&t.advancedTypeConfig.files&&v().each(t.advancedTypeConfig.files,(function(n){kn(n,t.advancedType,e)}))};function Zn(e,t){if(!v().isEmpty(t)&&x.Z.currentProject.exists(t))if(yn[t])E.Z.error("File already added: "+t);else{var n=e.find("#test_type").val();if(bn[n]){var i=e.find("#test_type").val(),r=e.find("#test_subtype").val(),a=S.ZP.path.getFileExtension(t);N.ZP.TEST_SUBTYPES.JAVA!==i||"style"!==r||"xml"!==a?v().includes(bn[n],a)?N.ZP.TEST_SUBTYPES.JAVA===i&&"junit"===r?xn(t).then((function(t){kn(t,i,e,!0)})):kn(t,i,e,!0):E.Z.error("Incorrect file type, should be: "+bn[n].join(" ")):e.find("#configFile").val(t)}}else E.Z.error("File not found: "+t)}var xn=function(e){var t="";return x.Z.currentProject.file(e).then((function(n){return t=n.content,gn.Z.parseClassInformation(n.content,e)})).then((function(n){if(v().isEmpty(n.className)){var i="Java class not found in "+e;return E.Z.error(i),Promise.reject(new Error(i))}if(!(v().includes(t,"@Test")||v().includes(t,"@ParameterizedTest")||v().includes(t,"@org.junit.jupiter.api.Test")||v().includes(t,"@org.junit.jupiter.params.ParameterizedTest"))&&!v().includes(t,"extends")){var r="JUnit test not found in "+e;return E.Z.error(r),Promise.reject(new Error(r))}v().includes(t,".jupiter.")&&(!(v().endsWith(n.className,"Test")||v().endsWith(n.className,"Tests"))&&E.Z.info("".concat(n.className," class name do not match against class names ending in Test or Tests. This test may not function correctly.")));var a=v().isEmpty(n.packageName)?n.className:n.packageName+"."+n.className;return{filePath:e,className:a}}))},Cn=function(e,t){C.Z.on(e,"change","#test_type",(function(n){var i=y()(n.target).val();_n(i,void 0,e,t),N.ZP.TEST_SUBTYPES.CUSTOM===i&&e.find("#command").val("")})),C.Z.on(e,"change","#test_subtype",(function(){var t=e.find("#test_type").val(),n=e.find("#test_subtype").val();wn(t,n,e)})),C.Z.on(e,"click","#test-add-case-btn",(function(){Zn(e,y()("#test-add-case").val())})),C.Z.on(e,"change","#command",lt)},Sn=function(e,t,n){var i=y()(n.target);if("command"===i.attr("id")){if("sh"!==S.ZP.path.getFileExtension(t))i.val("".concat(i.val()).concat(t));else{var r=xt(i.val(),Pt,t);i.val(r)}i.trigger("change")}else Zn(e,t)},En=function(e){var t=v().cloneDeep(e),n=t.arePartialPointsAllowed,i=t.codeEnvConfig;if(i){var r=JSON.parse(i),a=r.subtype;r.partialPoints=!1,v().includes(["junit","rspec","unittest"],a)&&(r.partialPoints=n,t.codeEnvConfig=JSON.stringify(r))}return t},In=function(e){C.Z.on(e,"change","#command",lt)},Tn=function(e,t,n){var i=y()(n.target);"command"===i.attr("id")&&("sh"!==S.ZP.path.getFileExtension(t)?i.val("".concat(i.val()).concat(t)):i.val(xt(i.val(),Pt,t)),i.trigger("change"))},jn=function(e){yt(e)},An=function(e){yt(e)};function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nn=C.Z.create(n(10742)),Mn=null,Fn=null;function Rn(){Mn&&(C.Z.unsubscribe(Mn),Mn=null)}var Ln=function(e,t,n){var i=n.searchData;Rn();var r=Fn.my.concat(Fn.certified),a=v().find(r,{id:i.libraryId}),s=a?a.name:"",o=Dn(Dn({},i),{},{libraryName:s,permissions:!0}),c=(0,D.F8)(o);e.find("#execution_form").replaceWith(c),Nn.assessmentEditorValidate()},Un=function(e){f.Z.getAssessmentLibraries().then((function(t){Fn=t,Rn(),Mn=C.Z.subscribe("guides:library:apply_search",Ln.bind(null,e));var n=y()("#execution_form"),i=[];n.find(".tag-item").each((function(){var e={tag:y()(this).find('[name="tag_name"]'),value:y()(this).find('[name="tag_value"]')},t={name:e.tag.val(),value:e.value.val()};i.push(t)}));var r=n.find("#libraryId").val(),a=r?{libraryId:r,search:i}:null;ke.openDialog(t,{showApplySearch:!0,edit:a,filterOutTypes:[N.ZP.CUSTOM,N.ZP.GRADE_BOOK,N.ZP.SENSE_NETWORK,N.ZP.FREE_TEXT,N.ZP.RANDOM,N.ZP.MATH]})}))},Bn=function(e){C.Z.on(e,"click","#browse-library-assessments",Un.bind(null,e))},qn=n(47380),Hn=n(26024),Wn=n(57866),zn=n(95611),Gn="sampleParameters",Vn=null;function Kn(){return null!==Vn?y().Deferred().resolve(Yn(v().cloneDeep(Vn))).promise():(0,Wn.rQ)(x.Z.currentProject.guid,Gn).then((function(e){return v()(e).map((function(e){try{return JSON.parse(e.value)}catch(e){return null}})).filter((function(e){return null!==e})).value()})).then((function(e){return Vn=v().keyBy(e,"taskId"),Yn(e)}))}function Yn(e){return v().values(e)}function Jn(e){if(e&&e.taskId){var t=e.taskId,n=JSON.stringify(e);return(0,Wn.xG)(x.Z.currentProject.guid,Gn,t,n).then((function(){return function(e,t){null===Vn&&(Vn={}),Vn[e]=t}(t,e)}))}}function Qn(e){return delete Vn[e],(0,Wn.xG)(x.Z.currentProject.guid,Gn,e,void 0)}var Xn,$n=n(58728),ei="-parameters",ti="".concat(U.Nc,"/temporary-file").concat(ei,".").concat("py"),ni=[N.ZP.RANDOM,N.ZP.GRADE_BOOK,N.ZP.SENSE_NETWORK],ii=function(){function e(t,n,i){(0,$e.Z)(this,e),this.form=t,this.filePath=e.getParametersFilePath(n),this.removeFileOnDestroy=i,this.newSampleParameters=null,this.sampleParameters=null,this.taskId=n,this.bindEvents()}return(0,et.Z)(e,[{key:"onGenerateClick",value:function(e){var t=this;e.preventDefault(),(0,Wn.MJ)(x.Z.currentProject.guid,ti).then((function(e){t.newSampleParameters=e,t.form.find(".assessment-editor-parameters-sample-view").removeClass("error").text(t.parametersAsText(e))})).catch((function(e){t.newSampleParameters=null,t.form.find(".assessment-editor-parameters-sample-view").empty().addClass("error").append(e.message)}))}},{key:"parametersAsText",value:function(e){var t="";try{var n=JSON.parse(e);for(var i in v().isEmpty(n)&&(t+="please add your parameters to codio_parameters dictionary\n",t+="codio_parameters = dict()\n",t+='codio_parameters["param"] = "hello"\n'),n)t+=[i,"=",JSON.stringify(n[i]),"\n"].join(" ")}catch(n){t=e,console.error("parse error",n)}return t}},{key:"onGenerateExampleClick",value:function(e){e.preventDefault(),this.editor&&this.editor.replaceRange('\nimport random\n\ncodio_parameters = dict()\n\ncodio_parameters["parameter"] = random.randint(1, 300)\n',this.editor.getPosition())}},{key:"bindEvents",value:function(){C.Z.on(this.form,"click",".assessment-editor-parameters-sample-generate-btn",this.onGenerateClick.bind(this)),C.Z.on(this.form,"click",".assessment-editor-parameters-generate-example-btn",this.onGenerateExampleClick.bind(this))}},{key:"getFile",value:function(){return this.file||(this.file=x.Z.currentProject.unixFile(this.filePath)),this.file}},{key:"getInitialContent",value:function(){return x.Z.currentProject.exists(this.filePath)?this.getFile().then((function(e){return e.content})):Promise.resolve("")}},{key:"initEditor",value:function(){var e=this;this.getInitialContent().then((function(t){var n=e.form.find(".assessment-editor-parameters-container");e.tempModel=new A.yO(t,"python"),e.editor=new A.ZP(n,e.tempModel,{language:"python",lineNumbers:"on",automaticLayout:!0,minimap:{enabled:!1},wordWrap:"on"}),e.editor.setModel(e.tempModel);var i=v().throttle((function(){return e.editor.layout()}),300);e.observer=new ResizeObserver(i),e.observer.observe(n.find(".monaco-editor-container")[0]),e.storeToTempFile();var r=v().debounce(e.storeToTempFile.bind(e),500,{maxWait:1e3});e.editor.onDidChangeModelContent(r)})),Kn().then((function(t){var n=v().find(t,{taskId:e.taskId});n&&(e.sampleParameters=e.newSampleParameters=n.parameters,e.form.find(".assessment-editor-parameters-sample-view").text(n.parameters?e.parametersAsText(n.parameters):""))}))}},{key:"isInitialized",value:function(){return!!this.editor}},{key:"getContent",value:function(){return this.isInitialized()?Promise.resolve(this.getTempContent()):this.getInitialContent()}},{key:"getTempContent",value:function(){return this.tempModel?this.tempModel.getValue().trim():""}},{key:"getTemporaryFile",value:function(){return this.tempFile||(this.tempFile=Hn.ZP.initFile(ti)),this.tempFile}},{key:"storeToTempFile",value:function(){var e=this;return this.getTemporaryFile().then((function(t){var n=S.ZP.promise.deferred();return t.content=e.editor.getContent(),v().defer((function(){zn.Z.saveAllAndWait().then((function(){return n.resolve(t)}))})),n.promise}))}},{key:"save",value:function(){var e=this;return Hn.ZP.initFile(this.filePath).then((function(t){e.removeFileOnDestroy=!1,t.content=e.editor.getContent()})).then((function(){v().isNull(e.newSampleParameters)?Qn(e.taskId).then((function(){return(0,$n.rN)(e.taskId)})):e.sampleParameters!==e.newSampleParameters&&Jn({taskId:e.taskId,parameters:e.newSampleParameters}).then((function(){return(0,$n.rN)(e.taskId)}))}))}},{key:"clearGeneratedParameters",value:function(){Qn(this.taskId)}},{key:"setRemoveFileOnDestroy",value:function(e){this.removeFileOnDestroy=e}},{key:"cleanUpFile",value:function(e){e&&e.then((function(e){return e.close()}))}},{key:"destroy",value:function(){(this.isInitialized()&&!this.getTempContent()||this.removeFileOnDestroy)&&x.Z.currentProject.exists(this.filePath)&&Hn.ZP.deleteFile(this.filePath),x.Z.currentProject.exists(ti)&&Hn.ZP.deleteFile(ti),this.editor&&this.editor.close(),this.editor=null,this.tempModel&&this.tempModel.dispose(),this.tempModel=null,C.Z.off(this.form),this.observer&&this.observer.disconnect(),this.observer=null,this.cleanUpFile(this.tempFile),this.cleanUpFile(this.file),this.tempFile=null,this.file=null}}],[{key:"isAllowed",value:function(e){return!v().some(ni,(function(t){return t===e}))}},{key:"getParametersFilePath",value:function(e){return"".concat(U.Nc,"/").concat(e).concat(ei,".").concat("py")}}]),e}();n(44941),n(39925);var ri=(Xn={},(0,m.Z)(Xn,N.ZP.CODE_OUTPUT_COMPARE,i),(0,m.Z)(Xn,N.ZP.FILL_IN_THE_BLANKS,r),(0,m.Z)(Xn,N.ZP.MULTIPLE_CHOICE,a),(0,m.Z)(Xn,N.ZP.PARSONS_PUZZLE,s),(0,m.Z)(Xn,N.ZP.SENSE_NETWORK,o),(0,m.Z)(Xn,N.ZP.TEST,c),(0,m.Z)(Xn,N.ZP.CUSTOM,{}),(0,m.Z)(Xn,N.ZP.FREE_TEXT,u),(0,m.Z)(Xn,N.ZP.FREE_TEXT_AUTO,l),(0,m.Z)(Xn,N.ZP.GRADE_BOOK,d),(0,m.Z)(Xn,N.ZP.JUPYTER_NOTEBOOK,{}),(0,m.Z)(Xn,N.ZP.MATH,{}),(0,m.Z)(Xn,N.ZP.RANDOM,p),Xn),ai=O.ZP.Action,si=C.Z.create(n(10742)),oi=k().compile(qn),ci=null,li=!0,ui=function(){},di=null,pi=null,fi=null,hi=null,mi=null,gi=null,vi=null,bi=[],yi=null,wi=null,_i=null,ki=null,Pi=null,Zi=null,xi=[];function Ci(e){e.preventDefault();var t=y()(this);t.hasClass("active")||Si(t)}function Si(e){var t=e.closest(".navigation-list"),n=e.closest(".forms-container").find("form"),i=t.find(".navigation-item.active").data("id"),r=n.siblings("#"+i);C.Z.off(r,"change"),t.find(".navigation-item").removeClass("active"),e.addClass("active"),i=e.data("id"),n.addClass("hide"),(r=n.siblings("#"+i)).removeClass("hide");var a=r.data("onFirstFormPaint");a&&(v().each(a,(function(e){e()})),r.removeData("onFirstFormPaint")),v().forEach(r.find(".guides-editor-with-preview-container"),(function(e){var t=y()(e);if(!t.data("init")){var n=t.find(".guides-editor-with-preview-container-textarea");xi.push(new it(n.attr("id"),t,n.val())),t.data("init",!0)}})),C.Z.on(r,"change",Ei)}function Ei(e){e.preventDefault(),Ii(y()(this))}function Ii(e){var t=e.closest(".assessment-editor");t.find("#errors-container").empty().hide();var n=t.find("#assessment-type").val(),i=e.attr("id"),r=M.Z.getData(n,t,i);e.find(".validation-error").removeClass("validation-error");var a=t.find('.navigation-item[data-id="'+i+'"]');v().isEmpty(r.errors)?a.removeClass("error"):(a.addClass("error"),v().each(r.errors,(function(e){e.el&&e.el.addClass("validation-error")})))}function Ti(e){e.preventDefault();var t=y()(e.currentTarget).closest(".assessment-editor"),n=y()(this),i=t.find("#id").val();f.Z.disconnect(i).then((function(){E.Z.success("Successfully disconnected from library"),t.find("#linked-id").val(""),t.find("#assessment-library-id").val(""),n.remove(),si.assessmentDisconnected()}))}function ji(e,t){t.preventDefault();var n,i,r,a=y()(t.currentTarget).closest(".assessment-editor"),s=a.find("#id");s.length&&s.val()&&e&&a.data("outdated")?(n=Ai.bind(null,a),i=function(){Oi(a,e)},r=I.Z.showWarning({title:"This assessment has been updated by another user",description:"You can get the updated assessment and overwrite your local changes or continue with updating the assessment which will overwrite changes in the library.",width:700,buttons:[{title:"Get Updated Assessment",type:1,onClick:function(){return n(),r.close()}},{title:"Overwrite Changes in Library",onClick:function(){return i(),r.close()}}]})):Oi(a,e)}function Ai(e){var t=e.data("assessment"),n=e.data("libAssessment"),i=M.Z.convertLibAssessment(n),r={insertFromLib:!0,toLibrary:!1,isRandom:!1};if(t.source.metadata.layout||i.source.metadata.layout){var a=i.source.metadata.pageTitle||t.source.name;r.sectionTitle="(Updated) "+a,r.forceNewPage=!0}else r.prefix="-----------Updated assessment below---------------\n",r.insertAfter=t.taskId;Di(e,i,r,i)}var Oi=function(e,t,n,i){li=v().isUndefined(n)?li:n;var r=e.find("#assessment-type").val(),a=i?void 0:e.find("#linked-id").val(),s=i?void 0:e.find("#assessment-library-id").val(),o=i?void 0:e.find("#version").val(),c=ut(e,t,!0),l=c.errorMsgArr,u=c.source,d=u;if(ri[N.ZP.TEST].processSourceBeforeSubmit&&(d=ri[N.ZP.TEST].processSourceBeforeSubmit(u)),e.find(".navigation-item.error").length){var p=v()(l).uniq().map((function(e){return'<span class="error-message">'+e+"</span>"})).value().join("<br/>");e.find("#errors-container").empty().html(p).show()}else{var f=e.find("#id"),h=f.length&&f.val(),m=!h&&a;m&&Pi&&Pi.setRemoveFileOnDestroy(!1);var g=m&&e.data("assessment"),b=r===N.ZP.RANDOM;if(!b){var y=pi.getSectionPosition(di.id),_=pi.getLayout(y);if(t&&("1-panel"===_?delete d.metadata.layout:(d.metadata.layout=_,d.metadata.pageTitle=di.title,d.metadata.buttonText=function(e,t){if(e){var n=vi.getContent();return new RegExp("{(.+?)\\|assessment}\\("+e+"\\)\\n?","gm").exec(n)[1]}return Be.ZP.getDefaultButtonText(t)}(h,r),d.metadata.content=function(e){var t;if(e){var n=new RegExp("{.+\\|assessment}\\("+e+"\\)\\n?","gm");t=vi.getContent().replace(n,w.ZP.FROM_LIBRARY_DUMMY+"\n")}else{var i=new A.yO(vi.getContent());i.replaceRange(w.ZP.FROM_LIBRARY_DUMMY+"\n",vi.getPosition()),t=i.getValue()}return t.replace(/{.+\|assessment}\(.+-[0-9]+\)\n?/gm,"")}(h))),m)d.metadata.files=Ue.getSelectedPaths(),d.metadata.opened=g.source.metadata.opened||[];else{d.metadata.files=er(Ue.getSelectedPaths());var k=pi.getSectionTabs(y,!0);d.metadata.opened=v().map(k.ide.concat(k.ssh,k.terminal),(function(e){return{type:e.type,panelNumber:e.panelNumber,content:e.content}}))}}Di(e,{type:r,taskId:h,linkedId:a,libraryId:s,version:o,source:d},{toLibrary:t,isRandom:b,insertFromLib:m},g,i)}};function Di(e,t,n,i,r){var a=Promise.resolve();n.insertFromLib&&(a=j.ZP.AssessmentManager.addToProject({projectId:x.Z.currentProject.guid,assessmentId:t.linkedId}));var s=r?tr(t.type):Zi,o=n.insertFromLib&&t.source.metadata.layout||n.isRandom&&!t.taskId||n.forceNewPage;return a.then((function(){if(o)return function(e,t,n){var i=e.source.metadata||{},r=v().map(i.opened||[],(function(e){return Xe.Z.convertTabDataToAction(e)}));r.unshift(new ai({action:"close",path:"#tabs"}));var a=t?t.source.metadata.content:null,s=v().get(t,"source.metadata.buttonText"),o=function(e,t,n){var i=Be.ZP.generateAssessmentString(e,n),r=i+"\n";t&&(r=t.replace(w.ZP.FROM_LIBRARY_DUMMY,i));return r}(e,a,s);return new Promise((function(a){si.bookAddPage({options:{contentType:"markdown",title:n||v().get(t,"source.metadata.pageTitle")||e.source.name,value:o,layout:i.layout,files:r,readOnly:e.type===N.ZP.RANDOM},callback:function(){a()}})}))}({taskId:s,type:t.type,source:t.source},i,n.sectionTitle)})).then((function(){var i=Promise.resolve();n.toLibrary&&t.source.metadata.layout&&(i=Ze.show(di,t.source.metadata)),i.then((function(){var i=function(e,t){if(!ii.isAllowed(e.type))return Promise.resolve();if(Pi.isInitialized()&&!t){if(Pi.getTempContent())return Pi.save();Pi.clearGeneratedParameters()}if(!t)return Promise.resolve();var n=ii.getParametersFilePath(t);return Pi.getContent().then((function(e){return e?wt.Z.initFile(n,e):null}))}(t,r?s:null);return i.then((function(){return r&&(t.source.name="Copy of ".concat(t.source.name)),function(e,t,n,i){var r=Promise.resolve();t.libraryId?r=Promise.resolve(t.libraryId):n&&(r=t.linkedId?j.ZP.AssessmentManager.loadAssessment(t.linkedId).then((function(e){return e.libraryId})):function(){var e=fi.my.concat(fi.certified),t=Promise.resolve(e[0].id);e.length>1&&(t=Pe.chooseLibrary(fi));return t}());var a=Promise.resolve(null);ii.isAllowed(t.type)&&(a=Pi.getContent().then((function(e){return e||null})));var s=Promise.all([r,a]).then((function(r){var a=(0,h.Z)(r,2),s=a[0],o=a[1],c={libraryId:s,linkedId:t.linkedId,version:t.version,toLibrary:n,parameters:o};if(t.taskId&&!i.duplicate){var l=Promise.resolve();return n&&e.data("outdated")&&(l=new Promise((function(e,t){I.Z.showConfirm({description:"Your assessment version is outdated. Do you still want to update the assessment and overwrite the updated assessment data in the library?",captcha:!0,onClose:function(n){return n?e():t(new Error("update assessment cancelled"))}})}))),l.then((function(){return zi(e),f.Z.edit(t.taskId,t.source,c)}))}var u=i&&i.taskId;return zi(e),f.Z.add(u,t.type,t.source,c)}));return s.then((function(e){t.taskId&&!i.duplicate?li?or():Gi().then((function(){ui()})):(si.assessmentAdded({assessment:e,newAssessmentInfo:i}),i.duplicate&&E.Z.success("Assessment successfully duplicated."))})).catch((function(t){t&&E.Z.error(t.message),function(e){var t=e.find(".submit-btn");t.enableButton(),e.find(":input").prop(U.xu,!1)}(e)}))}(e,t,n.toLibrary,{taskId:s,toNewPage:o,prefix:n.prefix,insertAfter:n.insertAfter,duplicate:r})}))})).catch((function(){}))}))}function Ni(e){return Gi().then((function(t){return v().find(t,{taskId:e})}))}function Mi(e,t){return Ni(e).then((function(n){var i=n.source;if(!v().isInteger(t)||t<0||t>1e3)return E.Z.error("Incorrect points value"),i.points;if(i.points=t,i.codeEnvConfig){var r=JSON.parse(i.codeEnvConfig);r.maxPoints=t,i.codeEnvConfig=JSON.stringify(r)}f.Z.edit(e,i,{toLibrary:!1}).then((function(){return Gi().then((function(e){_i=e,Fi(ci.find("option:selected").data("filter"))}))}))}))}function Fi(e){ki=v().filter(_i,(function(t){return e===w.ZP.ASSESSMENT_USED?t.usageInfo:e!==w.ZP.ASSESSMENT_UNUSED||!t.usageInfo})),function(e){if(e&&ci){var t=ci.find("#sorter-buttons");t.find("button").removeClass("active"),t.find("button[data-order="+e.order+"]").addClass("active"),ci.find(".sorter.selectbox").val(e.by)}}(wi=wi||{by:"name",order:"asc"}),ki=qi(ki),yi.setList(ki);var t=ci.find("#delete-all-unused");t.removeClass("hide"),e!==w.ZP.ASSESSMENT_UNUSED&&t.addClass("hide"),t.attr(U.xu,v().isEmpty(ki))}function Ri(){var e=ci.find("#search").val();yi&&yi.search(e,Li)}function Li(e){ar(qi(ki=e))}function Ui(){wi=Bi(),Ri()}function Bi(){return{by:ci.find(".sorter.selectbox")[0].value,order:ci.find("#sorter-buttons > button.active").data("order")}}function qi(e){var t=Bi();switch(t.by){case"name":e=v().sortBy(e,(function(e){return e.source.name.toLowerCase()}));break;case"points":e=v().sortBy(e,(function(e){return e.source.points}));break;case"orderInGuides":e=v().chain(e).sortBy((function(e){return e.usageInfo&&e.usageInfo.section.pos.line})).sortBy((function(e){return e.usageInfo&&e.usageInfo.section.index})).value()}return"desc"===t.order&&e.reverse(),e}function Hi(e){return function(t){if(!t)return!0;var n;(n=this).preventClosing(!0),n.buttons()[0].disable("Deleting...","loading"),n.buttons()[1].disable(),n.content().find(":input").prop(U.xu,!0);var i=this;return f.Z.remove(e).then((function(){var t=v().map(e,(function(e){return ii.getParametersFilePath(e)}));x.Z.currentProject.deleteItems(t),or(),i.close(I.Z.IDCANCEL)})).catch(v().bind(Wi,null,i)),!1}}function Wi(e){e.preventClosing(!1);var t=e.content(),n=e.buttons()[0];e.buttons()[1].enable(),n.enable(!0),t.find(":input").prop(U.xu,!1)}function zi(e){var t=e.find(".submit-btn"),n="Create"===t.html()?"Creating":"Updating";t.disableButton(n+"...","loading"),e.find(":input").prop(U.xu,!0)}function Gi(){return f.Z.getAssessments().then((function(e){return Promise.all([e,f.Z.getAssessmentsUsageForProject(e)])})).then((function(e){var t=(0,h.Z)(e,2),n=t[0],i=t[1];return v().map(n,(function(e){return e.usageInfo=v().find(i,{taskId:e.taskId}),e}))}))}function Vi(e){return(mi=new Bloodhound({name:"tags",local:[],datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.val)},queryTokenizer:Bloodhound.tokenizers.whitespace})).initialize(),(gi=new Bloodhound({name:"values",local:[],datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.val)},queryTokenizer:Bloodhound.tokenizers.whitespace})).initialize(),function(e){if(hi)return Promise.resolve(hi);hi={};var t=e.my.concat(e.certified),n=v().map(t,"id");return j.ZP.AssessmentManager.loadTags({libraryIds:n}).then((function(e){return v().each(e,(function(e){v().each(e,(function(e,t){hi[t]?hi[t].concat(e):hi[t]=e}))})),v().mapValues(hi,(function(e){return v().uniq(e)}))}))}(e).then((function(e){var t=v().map(e,(function(e,t){return{val:t}}));mi.add(t)}))}function Ki(e){e.find(".js-tag.js-typeahead").typeahead({highlights:!0},{name:"tags",source:mi.ttAdapter(),displayKey:"val"}),e.find(".js-value.js-typeahead").typeahead({highlights:!0},{name:"values",source:gi.ttAdapter(),displayKey:"val"})}function Yi(e){e&&e.preventDefault();var t=y()(this).closest(".form").find(".tags-list"),n=y()(oi({source:{metadata:{tags:[{name:"",value:""}]}}}));t.append(n),Ki(n)}function Ji(){var e=y()(this).closest(".tag-item").find(".js-tag.js-typeahead.tt-input").val(),t=hi[e]||[],n=v().map(t,(function(e){return{val:e}}));gi.clear(),gi.add(n)}function Qi(e){e.preventDefault(),y()(this).closest(".tag-item").remove()}function Xi(e){e.preventDefault();var t=y()(e.currentTarget).closest(".assessment-editor"),n=t.find("#assessment-type").val();Zi=n+"-"+S.ZP.hashCode(S.ZP.GUID()),Oi(t,!1,!1,!0)}function $i(e){var t=e.find(".navigation-item");v().each(t,(function(t){var n=y()(t).data("id");Ii(e.find("#"+n))}))}function er(e){var t=pi.getSectionPosition(di.id),n=Qe.Z.getLayoutInfo(pi,0,t),i=x.Z.currentProject.backendSubDomain+"."+T.Z.get("boxDomain"),r=M.Z.getFilesFromOpened(i,n.opened);return v()(r).concat(e).uniq().compact().value()}var tr=function(e){return e+"-"+S.ZP.hashCode(S.ZP.GUID())},nr=function(e,t){Zi=function(e){return e.taskId?e.taskId:e.type+"-"+S.ZP.hashCode(S.ZP.GUID())}(e),Ue.clean(),Z().start();var n=Promise.resolve();e.linkedId&&(n=j.ZP.AssessmentManager.loadAssessment(e.linkedId)),Promise.all([f.Z.getAssessmentLibraries(),n]).then((function(n){var i,r=(0,h.Z)(n,2),a=r[0],s=r[1];fi=a,li=t,ir(e,s);var o=D.ZP.renderAssessmentEditor(e);o.find("form").submit((function(e){return e.preventDefault()})),o.data("assessment",e),o.data("libAssessment",s),e.outdated&&o.data("outdated",!0),Vi(a),Ki(o),function(e,t){var n=ri[t.type];n.afterRender&&n.afterRender(e,t),function(e,t){!function(e,t){e.find("#guidance").val(t.source.guidance),e.find("#instructions").val(t.source.instructions),e.find("#question").val(t.source.question||t.source.instructions)}(e,t)}(e,t)}(o,e);var c=!e.taskId&&e.linkedId,l=e.source.metadata.files;c||(l=er(e.source.metadata.files)),Ue.setInitialPaths(l);var u=o.find("#files_form");o.find("#files_form").data("onFirstFormPaint",[function(){Ue.init(u,c)}]);var d=o.find("#parameters_form"),p=null==s||null===(i=s.parametersScript)||void 0===i?void 0:i.script;p&&wt.Z.initFile(ii.getParametersFilePath(Zi),p),ii.isAllowed(e.type)&&(Pi=new ii(d,Zi,!!p||!e.taskId),d.data("onFirstFormPaint",[function(){Pi.initEditor()}]));var f=e.type===N.ZP.RANDOM,m=a&&(!v().isEmpty(a.my)||!v().isEmpty(a.certified));(c||f)&&o.find(".library-buttons").empty();var g=function(e){var t=fi.my.concat(fi.certified);if(e){var n=v().find(t,{id:e});return!!n&&!n.readOnly}return v().some(t,(function(e){return!e.readOnly}))}(e.libraryId);m&&g||o.find(".save-in-library").remove();var b=ci.find(".form");b.removeClass("hide"),b.empty().append(o).show(),ci.find(".assessments-filters").addClass("hide"),ci.find(".assessments-preview").addClass("hide"),!c&&e.taskId||o.find(".assessment-editor-duplicate").addClass("hide"),ci.removeClass("tab-pane--appBackground"),Si(o.find(".navigation-item").eq(0)),$i(o),function(e,t){C.Z.off(e),bi&&C.Z.unsubscribe(bi),C.Z.on(e,"click",".navigation-item",Ci),C.Z.on(e,"click",".cancel-btn",(function(){Pi&&Pi.setRemoveFileOnDestroy(!t.taskId),li?sr():ui()})),C.Z.on(e,"click",".save-in-library",(function(e){return Pi&&Pi.setRemoveFileOnDestroy(!t.taskId),ji(!0,e)})),C.Z.on(e,"click",".disconnect-btn",Ti),C.Z.on(e,"click",".preview-button",rr),C.Z.on(e.find("form"),"change",(function(){e.data("changed",!0)})),C.Z.on(e,"click",".submit-btn",(function(e){return Pi&&Pi.setRemoveFileOnDestroy(!t.taskId),ji(!1,e)})),C.Z.on(e,"click",".add-tag-btn",Yi),C.Z.on(e,"focus",".js-value.js-typeahead",Ji),C.Z.on(e,"click",".remove-tag-btn",Qi),C.Z.on(e,"change","#set_number_of_attempts",bt.bind(null,e)),C.Z.on(e,"click",".assessment-editor-duplicate",Xi),bi=[C.Z.subscribe("guides:assessment:disconnected",(function(){e.find(".save-in-library").html("Save in Library")})),C.Z.subscribe("guides:assessmentEditor:validate",$i.bind(null,e))];var n=ri[t.type];n.bindEvents&&n.bindEvents(e,t)}(o,e)})).finally((function(){Z().done()}))};function ir(e,t){if(e.taskId){var n=e.type===N.ZP.RANDOM?e.source.libraryId:e.libraryId;n&&(e.source.libraryName=function(e){if(!fi)return"";var t=fi.my.concat(fi.certified),n=v().find(t,{id:e});return n?n.name:""}(n)),e.taskId&&t&&e.version!==t.version&&(e.outdated=!0)}}function rr(e){e.preventDefault();var t=y()(this).closest(".preview-area-container");t.toggleClass("preview");var n=y()(this).parent().parent().find("#assessment-type").val(),i=t.find("textarea").val();(n===N.ZP.MATH?f.Z.compileMath([{question:i,answers:{}}]).then((function(e){return e[0].questionText})):S.ZP.toHTML(i)).then((function(e){t.find(".preview-container").html(e),n===N.ZP.MATH&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])}))}function ar(e){var t=ci.find(".assessments-preview");ci.find(".form").addClass("hide");var n,i=D.ZP.renderAssessmentList(e);i.find(".qtip-here").qtip(),t.empty().append(i),n=i,C.Z.on(n,"mouseup keyup",".assessments-list-item-points-input",(function(){var e=this;Mi(y()(this).closest(".assessments-list-item").data("taskid"),parseInt(y()(this).val(),10)).then((function(t){v().isNumber(t)&&y()(e).val(t)}))})),C.Z.on(n,"click",".assessments-list-item-link",(function(e){e.preventDefault(),Ni(y()(this).closest(".assessments-list-item").data("taskid")).then((function(e){nr(e,!0)}))})),C.Z.on(n,"click",".assessments-list-item-goto",(function(e){e.preventDefault();var t=y()(this).closest(".assessments-list-item").data("taskid");n.find(".qtip-here").qtip("destroy",!0),Ni(t).then((function(e){si.goToAssessment(e)}))})),C.Z.on(n,"click",".assessments-list-item-add",(function(e){e.preventDefault(),Ni(y()(this).closest(".assessments-list-item").data("taskid")).then((function(e){si.assessmentAdded({assessment:e})}))})),C.Z.on(n,"click",".remove-btn:not(.disabled)",(function(e){e.preventDefault(),Ni(y()(this).closest(".assessments-list-item").data("taskid")).then((function(e){I.Z.showConfirm({description:"Do you want to delete '"+e.source.name+"' Assessment?",captcha:!0,onClose:Hi([e.taskId])})}))}))}function sr(){ci.find(".form").hide().empty(),ci.find(".assessments-preview").removeClass("hide"),ci.addClass("tab-pane--appBackground")}var or=function(){Promise.all([Gi(),f.Z.getAssessmentLibraries()]).then((function(e){var t=(0,h.Z)(e,2),n=t[0],i=t[1];fi=i,v().each(n,ir.bind(null)),ci.find(".assessments-filters").removeClass("hide"),ci.find(".assessments-preview").is(":visible")||sr(),_i=n,yi||(yi=Je(_i)),ci.find("#search").val(""),function(){var e=v().debounce(Ri,400);C.Z.on(ci.find("#search"),"input",e),C.Z.on(ci.find(".selectbox.filter"),"change",(function(e){e.preventDefault();var t=y()(this).find("option:selected").data("filter");ci.find("#search").val(""),Fi(t),ar(ki)})),C.Z.on(ci.find(".selectbox.sorter"),"change",(function(e){e.preventDefault(),Ui()}));var t=ci.find("#sorter-buttons > button");C.Z.on(t,"click",(function(e){e.preventDefault();var n=y()(this);n.hasClass("active")||(t.removeClass("active"),n.addClass("active"),Ui())})),C.Z.on(ci.find("#delete-all-unused"),"click",(function(e){e.preventDefault();var t=ci.find(".assessments-list-item").map((function(){return y()(this).data("taskid")})).get();I.Z.showConfirm({description:"Do you want to delete all unused Assessments?",captcha:!0,onClose:Hi(t)})}))}(),Fi(ci.find("option:selected").data("filter")),ar(ki)}))};const cr={submitAssessment:Oi,renderAssessmentEditor:nr,addFromLibrary:function(){f.Z.getAssessmentLibraries().then((function(e){ke.openDialog(e)}))},init:function(e,t,n,i,r){vi=t,ci=e,ui=r,di=i,pi=n,_i=null,ki=null,yi=null,wi=null},renderAssessmentsList:or,fileDrop:function(e,t){var n=y()("#assessments .assessment-editor"),i=n.data("assessment"),r=ri[i.type];return r.dropFile&&r.dropFile(n,e,t),!0},cleanup:function(){v().each(xi,(function(e){return e.destroy()})),xi=[],Pi&&Pi.destroy(),Pi=null},activate:function(){}},lr={assessments:f.Z,assessmentsUi:cr}},61478:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(96486),r=n.n(i),a=n(49721),s=n(60989),o={};function c(){var e=a.Z.currentProject.eduStartedAssignmentInfo.assignment;return e.projectBased?e.projectBased.id:e.bookBased.id}function l(e){return a.Z.currentProject.eduStartedAssignmentInfo&&r().assign(e,{assignmentId:c()}),e}function u(e){return r().assign(e,{projectId:a.Z.currentProject.guid})}const d={fetchGuideState:function(){return s.ZP.AssessmentManager.fetchGuideState(u({}))},fetchDraft:function(){return s.ZP.AssessmentManager.fetchDraft(u({}))},removeDraft:function(){return s.ZP.AssessmentManager.removeDraft(u({}))},removeAnswers:function(){return s.ZP.AssessmentManager.removeAnswers(u({}))},saveState:function(e,t){return s.ZP.AssessmentManager.saveState(u({assessmentId:e,state:t}))},compileMath:function(e){var t=r().map(e,(function(e){return e.question+JSON.stringify(e.answers)+e.feedback+e.score})).join(",");if(!o[t]){var n=s.ZP.AssessmentManager.compileMath(l({projectId:a.Z.currentProject.guid,questions:e}));n.then(void 0,(function(){o[t]=null})),o[t]=n}return o[t]},check:function(e,t,n){return s.ZP.AssessmentManager.check(u({assessmentId:e,type:t,data:n,submittedAt:(new Date).toISOString()}))},checkByAssessment:function(e,t,n){return s.ZP.AssessmentManager.check({assessment:t,projectId:e,data:n,submittedAt:(new Date).toISOString()})},removeResult:function(e){return s.ZP.AssessmentManager.removeResult(u({assessmentId:e}))},loadRubricsForCopy:function(){return s.ZP.CourseManager.loadAssessmentGradingRubricsForCopy()},getAssignmentId:c,loadRubrics:function(){return s.ZP.CourseManager.loadAssessmentGradingRubrics({assignmentId:c()})},changeRubric:function(e,t){return s.ZP.CourseManager.changeAssessmentGradingRubrics(c(),e,t)},applyAssessmentGradingRubrics:function(e,t,n){return s.ZP.CourseManager.applyAssessmentGradingRubrics(c(),a.Z.currentProject.eduStartedAssignmentInfo.started.assignee,t,e,n)},findCourse:function(e,t,n,i,r){return s.ZP.CourseManager.findOne(e,t,n,i,r)},submitJupyter:function(){return s.ZP.AssessmentManager.submitJupyter(l({}))},submitGradeBookAssessment:function(e,t,n){return s.ZP.AssessmentManager.submitGradeBook(l({assignmentId:e,comment:t,points:n}))}}},76900:(e,t,n)=>{"use strict";n.d(t,{D4:()=>o,FD:()=>f,PS:()=>c,Rz:()=>p,UF:()=>i,UX:()=>a,V1:()=>s,Vf:()=>u,ZP:()=>m,_N:()=>l,aR:()=>r,nh:()=>d,uR:()=>h});var i="test",r="multiple-choice",a="fill-in-the-blanks",s="free-text",o="free-text-auto",c="code-output-compare",l="math-stack",u="grade-book",d="parsons-puzzle",p="sense-network",f="random",h={REG_EX:"regEx",ONE_OF:"oneOf"};const m={TEST:i,MULTIPLE_CHOICE:r,FILL_IN_THE_BLANKS:a,FREE_TEXT:s,FREE_TEXT_AUTO:o,CODE_OUTPUT_COMPARE:c,CUSTOM:"custom",MATH:l,GRADE_BOOK:u,PARSONS_PUZZLE:d,JUPYTER_NOTEBOOK:"jupyter-notebook",SENSE_NETWORK:p,RANDOM:f,TEST_SUBTYPES:{JAVA:"java",CUSTOM:"custom",RUBY:"ruby",PYTHON:"python"}}},73449:(e,t,n)=>{"use strict";n.d(t,{X:()=>s});var i=n(96486),r=n.n(i),a=n(85886),s=function(e,t){var n={name:t,children:[]},i=n.children;return r().each(e,(function(e){var t={title:e.title,id:e.id,pageId:e.id,type:a.ZP.BOOK_TYPES.PAGE};i.push(t),t.children&&(i=t.children)})),n}},44067:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var i=n(93443),r=n(49721),a=n(20294),s=n(96486),o=n.n(s),c=n(35402),l=n(85886),u=n(1436),d=null,p=null;var f=function e(t,n,i){var r="".concat(t,"/").concat(n),a="".concat(r,".json");i[a]||(a="".concat(r,"/").concat(l.nb));var s=i[a];if(!s)return null;var c={id:s.id,title:s.title,type:s.type};return s.contentType&&(c.pageId=s.id),s.anchor&&(c.anchor=s.anchor),s.type!==l.yj.PAGE&&(c.children=o()(s.order).map((function(t){return e(r,t,i)})).compact().value()),c},h=function(){return c.zD().then((function(e){var t=e[l.q9];if(!t)throw new Error("metadata for ".concat(l.q9," not found"));var n=o()(t.order).map((function(t){return f(l.mK,t,e)})).compact().value();return{name:t.title,children:n}}))};function m(e){return e&&(p=null),p||(p=h().then((function(e){return d=e,r.Z.currentProject.isBook&&d.name!==r.Z.currentProject.bookName?(d.name=r.Z.currentProject.bookName,u.Z.updateTitle(r.Z.currentProject.bookName).then((function(){return d}))):d})).catch((function(e){return p=null,Promise.reject(e)}))),p}i.Z.subscribe("project:close:#projectId",(function(){d=null,p=null}));var g,v,b;g=l.Ty,v=function(){r.Z.currentProject.exists(l.Ty)||(d=null,p=null)},b=[],o().each(["item:created:","item:moved:","item:moved:#from:","item:deleted:","file:change:"],(function(e){b.push(i.Z.subscribe(e+g,v))}));const y={getBookStructure:m,load:function(e){return m(e)}};var w=n(38880),_=a.ZP.promise.deferred(),k=_.promise;function P(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return k.then((function(t){return t.isBookReader||t.eduStartedAssignmentInfo?w.Z[e].apply(w.Z,n):y[e].apply(y,n)}))}}i.Z.subscribe("project:open:#projectId",(function(){_.resolve(r.Z.currentProject)}));const Z={getBookStructure:P("getBookStructure"),load:P("load")}},38880:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(15861),r=n(87757),a=n.n(r),s=n(96486),o=n.n(s),c=n(49721),l=null,u=n(44674).d3,d=n(73449).X;function p(){return f.apply(this,arguments)}function f(){return(f=(0,i.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===l&&(t=c.Z.currentProject.guides)&&(l=t.bookStructure,(l&&l.children?o().isEmpty(l.children):o().isEmpty(l))&&t.metadata&&t.metadata.sections&&(l=d(t.metadata.sections,c.Z.currentProject.name))),e.abrupt("return",l);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const h={filterSection:function(e,t){if(e&&e.metadata){e=o().cloneDeep(e);var n=o().compact(o().map(t,(function(t){var n=u(t,e.bookStructure);if(n)return n.pageId})));e.metadata.sections=o().filter(e.metadata.sections,(function(e){return o().includes(n,e.id)}))}return e.metadata},getBookStructure:p,load:p}},44674:(e,t,n)=>{"use strict";n.d(t,{XS:()=>s,d3:()=>a});var i=n(96486),r=n.n(i),a=function e(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=n.children,o=r().find(s,(function(e){return i?t===e.pageId:t===e.id}));if(o){var c=n&&n.id?n:null;return a?c:o}for(var l=0,u=s.length;l<u;l++){var d=s[l];if(d.children&&(o=e(t,d,i,a)))return o}},s=function e(t,n,i){var a=r().find(i,(function(e){return t===e.pageId&&n===e.anchor}));if(a)return a;for(var s=0,o=i.length;s<o;s++){var c=i[s];if(c.children&&(a=e(t,n,c.children)))return a}}},49067:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>c});var i=n(96486),r=n.n(i),a=n(49721),s=n(68058);function o(){return a.Z.currentProject.guid+":book_hide_non_unit"}const c={isDisabledStructureHidden:function(){var e=s.I_.get(o());return!a.Z.currentProject.isBookWriter&&!a.Z.currentProject.showAllBookPages||(r().isUndefined(e)?!a.Z.currentProject.showAllBookPages:!1!==e)},setDisabledStructureHidden:function(e){s.I_.set(o(),e)}}},48503:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L});var i=n(4942),r=n(70885),a=n(96486),s=n.n(a),o=n(49721),c=n(20294),l=n(28893),u=n(85886),d=n(44067),p=n(49067),f=n(76638),h=n(54565).Z.get("eduServer"),m=s().partial(f.Z.request2,h,"book");const g=function(e){return m("getBook",{projectId:e})},v=function(e,t){return m("updateBook",{projectId:e,data:t})};var b=n(1436),y=n(97137);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=n(44674).d3,P=n(44674).XS,Z=d.Z.getBookStructure,x=u.ZP.BOOK_TYPES.PAGE,C=u.ZP.BOOK_TYPES.SECTION,S=u.ZP.BOOK_TYPES.CHAPTER;function E(e,t){var n=s().remove(t,(function(t){return e===t.id}));if(!s().isEmpty(n))return n[0];for(var i=0,r=t.length;i<r;i++){var a=t[i];if(a.children&&(n=E(e,a.children)))return n}}var I=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=k(t,n),a=function(e){return e.type===C&&i};if(r.type===x||a(r)){var s=k(t,n,void 0,!0);return s&&a(s)?e(s.id,n,i):s}return r};function T(e,t,n){-1===t?e.push(n):e.splice(t+1,0,n)}var j=function(e,t){if(!t)return{layout:"1-panel"};var n=e.getSectionById(t.pageId),i={layout:n.layout,closeTerminalSession:n.closeTerminalSession,path:n.paths};return n.isCloseAll&&(i.files=[{path:"#tabs",action:"close"}]),i},A=function(e,t){var n=M(e.children),i=s().findIndex(n,(function(e){return e.id===t}));return s().findLast(n,(function(e){return e.pageId}),i)};function O(e,t,n,i){var r=t?e.getSectionById(t.pageId):null;return _({contentType:r?r.contentType:"markdown",id:n},i)}function D(){return l.ZP.getMetadata()}function N(e){return s().chain(e).map((function(e){return[e.pageId?e:null,e.children?N(e.children):null]})).flattenDeep().compact().value()}function M(e){return s().chain(e).map((function(e){return[e,e.children?M(e.children):null]})).flattenDeep().compact().value()}function F(e,t,n){var i=s().find(e,(function(e){return t===e.pageId}));if(i)return n.join(" -> ");for(var r=0,a=e.length;r<a;r++){var o=e[r];if(o.children){var c=s().clone(n);if(c.push(o.title),i=F(o.children,t,c))return i}}}function R(e){var t=[];return s().each(e,(function(e){var n,i=[];e.children&&(i=R(e.children),e.children=i),n=e.id,(s().includes(o.Z.currentProject.bookAssignmentPages,n)||!s().isEmpty(i))&&t.push(e)})),t}const L={load:function(){return o.Z.currentProject.isBookReader&&!s().isEmpty(o.Z.currentProject.bookAssignmentPages)&&p.ZP.isDisabledStructureHidden()?d.Z.load().then((function(e){return function(e){return(e=s().cloneDeep(e)).children=R(e.children),e}(e)})):d.Z.load()},addChapter:function(e,t){return Z().then((function(n){var i=c.ZP.GUID(),r=S,a={title:e,id:i,type:r,children:[]},o=function(e,t){return s().findIndex(e.children,(function(e){return e.id===t||!(!e.children||!k(t,e))}))}(n,t);T(n.children,o,a);var l={id:i,type:r,title:e,order:[]};return b.Z.addFolder(null,o,l).then((function(){return a}))})).catch((function(e){return e.message&&y.Z.error(e.message),Promise.reject(e)}))},addSection:function(e,t){return Z().then((function(n){var i=I(t,n,!0),r=i?i.id:null,a=i?i.children:n.children,o=s().findIndex(a,(function(e){return t===e.id})),l=c.ZP.GUID(),u=C,d={title:e,id:l,type:u,children:[]};T(a,o,d);var p={id:l,type:u,title:e};return b.Z.addFolder(r,o,p).then((function(){return d}))})).catch((function(e){return e.message&&y.Z.error(e.message),Promise.reject(e)}))},addPage:function(e,t){return Promise.all([Z(),D()]).then((function(n){var i=(0,r.Z)(n,2),a=i[0],o=i[1],l=A(a,t),u=I(t,a),d=u?u.id:null,p=u?u.children:a.children,f=s().findIndex(p,(function(e){return t===e.id})),h=c.ZP.GUID(),m={id:h,title:e.title,pageId:h,type:x};if(e.type=x,T(p,f,m),e.value=e.value||"# Sample content "+e.title,s().isUndefined(e.layout)){var g=j(o,l);e=_(_({},e),g)}var v=O(o,l,h,e);return o.addPage(d,f,v).then((function(){return m}))})).catch((function(e){return e.message&&y.Z.error(e.message),Promise.reject(e)}))},searchItem:k,nodeIdByPageIdAndAnchor:function(e,t){return Z().then((function(n){var i=t?P(e,t,n.children):k(e,n,!0);if(i)return i.id}))},removeItems:function(e){return D().then((function(t){return t.removeNodes(e)})).then((function(){return Z().then((function(t){var n=s()(e).map((function(e){return E(e,t.children)})).compact().value(),i=s()(n).map((function(e){return[e,e.children?N(e.children):[]]})).flattenDeep().uniq().value(),r=s()(i).filter((function(e){return e.pageId})).map((function(e){return e.pageId})).value();return b.Z.removeSections(r),i}))})).catch((function(e){return e.message&&y.Z.error(e.message),Promise.reject(e)}))},renameItem:function(e,t){return Promise.all([Z(),D()]).then((function(n){var i=(0,r.Z)(n,2),a=i[0],s=i[1],o=k(e,a);return o.title=t,s.renameNode(o.id,t)})).catch((function(e){return e.message&&y.Z.error(e.message),Promise.reject(e)}))},moveItems:function(e,t,n){return D().then((function(i){return i.moveNodes(e,t,n)})).catch((function(e){return e.message&&y.Z.error(e.message),Promise.reject(e)})).finally((function(){return Z(!0)}))},pageInfoByName:function(e){return D().then((function(t){var n=t.getSectionByFileName(e);if(n)return{title:n.title,id:n.id}}))},onSectionsUpdate:function(e){return Promise.all([Z(),D()]).then((function(t){var n=(0,r.Z)(t,2),i=n[0],a=n[1],s=k(e,i,!0),o=a.getSectionById(e);s.title!==o.title&&(s.title=o.title)}))},copyItems:function(e,t){return D().then((function(n){return n.copyNodes(e,t)})).catch((function(e){return e.message&&y.Z.error(e.message),Promise.reject(e)})).finally((function(){return Z(!0)}))},linkPage:function(e,t){return Promise.all([Z(),D()]).then((function(n){var i,a=(0,r.Z)(n,2),s=a[0],o=a[1],c=k(e,s);if(t){var l=A(s,e);c.pageId=c.id;var u=j(o,l),d=O(o,l,c.id,_({value:"# Sample content "+c.title},u));i=o.linkPage(e,d)}else delete c.pageId,i=o.unlinkPage(e);return i.then((function(){return c.id}))})).catch((function(e){return e.message&&y.Z.error(e.message),Promise.reject(e)}))},breadcrumbsPage:function(e){return Z().then((function(t){return F(t.children,e,[])})).then((function(e){return s().escape(e)}))},updateTitle:function(e){var t=o.Z.currentProject.isBook;return Z().then((function(n){return n.name=e,D().then((function(t){return t.updateTitle(e)})),t?g(o.Z.currentProject.guid):Promise.resolve()})).then((function(n){return t?v(o.Z.currentProject.guid,{name:e,description:n.description,icon:n.icon,isPublic:n.isPublic}):Promise.resolve()})).catch((function(e){return e.message&&y.Z.error(e.message),Promise.reject(e)}))},flatPages:N,flatNodes:M,sortBookPages:function(e,t){var n=s()(e).map((function(e){return e.id})).invert().mapValues((function(e){return parseInt(e,10)})).value();return s().chain(t).filter((function(e){return s().isNumber(n[e])})).sortBy((function(e){return n[e]})).value()}}},33732:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>S,xv:()=>r});var i={};n.r(i),n.d(i,{default:()=>g,onLinkPress:()=>m});var r={};n.r(r),n.d(r,{default:()=>C,execute:()=>P,run:()=>x,runWithoutTimeout:()=>Z});var a=n(96486),s=n.n(a),o=n(93443).Z.create(n(10742)),c=n(28893).aU;function l(e,t){var n=new RegExp("(?:[^"+t+'"]+|["][^"]*")+',"g");return e.match(n)}function u(e){var t=parseInt(e,10);if(!s().isNaN(t))return t}function d(e){if(e)return'"'===e[0]&&'"'===e[e.length-1]?e.substr(1,e.length-2):e}function p(e,t,n,i,r,a){return i=u(i),a=u(a),r=d(r),t=function(e){switch(e){case"files":return"file";case"previews":return"preview";case"terminals":return"terminal"}return e}(t),{action:new c({action:e,panel:i,ref:r,lineCount:a}),command:{type:t,content:n}}}function f(e,t){var n="panel="+t;return e.replace(n,"")}function h(e,t){var n=t;if(!s().isUndefined(n)){var i=[],r=l(n,"\\;");return s().each(r,(function(e){var t=function(e){var t=(e=d(e)).split(" ",1)[0],n=s().trim(e.substr(t.length)),i=function(e){var t=l(e," "),n={},i=[];return s().each(t,(function(e){if(0!==(e=d(e)).length){var t=e.split("=");1===t.length?i.push(e):n[t[0]]=t[1]}})),{files:i,params:n}}(n);if("cmd"===t){var r=d(n);return i.params&&i.params.panel&&(r=f(r,i.params.panel)),[p("open",t,r,i.params.panel||0)]}if("open_terminal"===t){var a=d(n);return i.params&&i.params.panel&&(a=f(a,i.params.panel)),[p("open","terminal",a,i.params.panel||0)]}var o=t.split("_"),c=o[0],u=o[1];if(!s().isUndefined(c)&&!s().isUndefined(u)){0===i.files.length&&i.files.push(void 0);var h=i.params,m=[];return s().each(i.files,(function(e){var t=p(c,u,e,h.panel,h.ref,h.count);m.push(t)})),m}}(e=s().trim(e));t&&(i=i.concat(t))})),i}}var m=function(e,t){var n=h(0,t);n&&o.command(n)};const g={onLinkPress:m};var v=n(49721),b=n(60989),y=n(97137),w=n(20294),_=b.ZP.containerManager;function k(e,t){for(var n=[],i=!1,r="",a=0;a<e.length;a++)" "!==e.charAt(a)||i?'"'===e.charAt(a)&&t?i=!i:r+=e.charAt(a):(n.push(r),r="");return n.push(r),n}var P=function(e){return x(e).then((function(t){0!==t.code&&y.Z.info("Error executing command: "+w.ZP.safeHtml(e))}))},Z=function(e){var t,n=Array.isArray(e)?e:k(e),i=n.shift();n.length>0&&(t=n);var r=v.Z.currentProject.guid;return _.run(r,i,{args:t,timeout:-1})},x=function(e){var t,n=Array.isArray(e)?e:k(e),i=n.shift();n.length>0&&(t=n);var r=v.Z.currentProject.guid;return _.run(r,i,{args:t})};const C={execute:P,run:x,runWithoutTimeout:Z},S={markdown:i,remote:r}},85886:(e,t,n)=>{"use strict";n.d(t,{Iw:()=>w,Nc:()=>s,Ty:()=>a,ZP:()=>_,_1:()=>v,gg:()=>b,mK:()=>c,nb:()=>l,q9:()=>u,xu:()=>f,yj:()=>y});var i,r=n(4942),a=".guides",s=a+"/assessments",o=a+"/sections.md",c=a+"/content",l="index.json",u="".concat(c,"/").concat(l),d=a+"/img",p=a+"/styles.css",f="disabled",h=a+"/assessmentsAnswers.json",m="html",g="markdown",v=g,b=(i={},(0,r.Z)(i,g,"md"),(0,r.Z)(i,m,"html"),i),y={PAGE:"page",SECTION:"section",CHAPTER:"chapter"},w="guides-tree";const _={GUIDES_FOLDER:a,ASSESSMENTS_FOLDER:s,GUIDES_ROOT_METADATA_FILE:u,GUIDES_OLD_DESCRIPTION_FILE:o,GUIDES_CONTENT_FOLDER:c,IMG_FOLDER:d,CSS_FILE:p,CSS_FILE_CONTENT:"/* Place you styles here */",DEFAULT_THEME:"light",PROJECT_SETTINGS_FILE:".settings",ASSESSMENTS_ANSWERS_FILE:h,CONTENT_TYPE_HTML:m,CONTENT_TYPE_MARKDOWN:g,CONTENT_TYPE_DEFAULT:v,CONTENT_HEADER_FILE:c+"/header.html",CONTENT_FOOTER_FILE:c+"/footer.html",BOOK_TYPES:y,TREE_NAME:w}},73687:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>ye});var i=n(96486),r=n.n(i),a=n(93443),s=n(49721),o=n(97137),c=n(87122),l=n(20294),u=n(28893),d=n(85886),p=n(18914),f=n(58471),h=n(50352);function m(e){(0,h.wu)()||(e?s.Z.ide.open("guides",""):f.Z.showConfirm({title:"Start the guide?",description:"This Assignment has a Codio Guide tutorial. Would you like to start the Guide now?",doNotCloseOpened:!0,onClose:function(e){e&&s.Z.ide.open("guides","")}}))}a.Z.subscribe("command:guides:open_guides_player",m.bind(null,!0));const g=m;const v=function(){return u.ZP.createMetadata().then((function(e){var t=e[0];e[1]&&(t.useSubmitButtons=!0,t.useMarkAsComplete=!0)}))};var b=n(38260),y=d.ZP.GUIDES_FOLDER,w=d.ZP.CSS_FILE,_=d.ZP.IMG_FOLDER,k=d.ZP.GUIDES_CONTENT_FOLDER;function P(e,t){var n=s.Z.currentProject;if(!n||n.exists(e))return Promise.resolve();var i=l.ZP.path.parse(e),a=i.name;return n.createFile(a,i.dir).then((function(){return function(e,t){var n=s.Z.currentProject;if(!n||n.readOnly||!n.exists(e))return Promise.resolve();return n.file(e).then((function(i){i.content=t,n.is_manual_save&&r().defer((function(){s.Z.currentProject.getShareFile(e).save()}))}))}(e,t)}))}function Z(e){var t=s.Z.currentProject;if(!t||t.exists(e))return Promise.resolve();var n=l.ZP.path.parse(e),i=n.name;return t.createFolder(i,n.dir)}function x(){var e=s.Z.currentProject;return e&&e.exists(w)?e.deleteItems([w]):Promise.resolve()}const C={createContent:function(){return Z(y).then((function(){return Promise.all([Z(_),Z(k)])})).then((function(){return v()}))},createCustomCss:function(){var e=Promise.resolve();return s.Z.currentProject.exists(d.ZP.CSS_FILE)&&(e=s.Z.currentProject.unixFile(d.ZP.CSS_FILE).then((function(e){if(e.content===d.ZP.CSS_FILE_CONTENT)return x()}))),e=e.then((function(){return b.Z.getMetadataThemeContent()})).then((function(e){return b.Z.getCss(e)})).then((function(e){return P(w,e)}))},removeCustomCss:x};var S=n(52308),E=n.n(S),I=d.Ty+"/sections.md",T=["curl https://raw.githubusercontent.com/codio/new-guides-converter","/master/build/converter.js | node"].join("");const j=function(){return s.Z.currentProject.exists(I)},A=function(){return function(e){return s.Z.ide.open("terminal","backend-guide",{view:"backend"}).then((function(t){t&&t.extension.then((function(t){return t.ready().then((function(){return t.termPromise})).then((function(t){return t.exec(e)}))}))}))}(T)};n(93702),n(95611);var O=d.Ty+"/assessments.json",D="assessments",N=("".concat(d.Ty,"/").concat(D),function(){return s.Z.currentProject.exists(O)&&!r()(r().get(s.Z.currentProject.children,[".guides","assessments"],{})).keys().filter((function(e){return"json"===l.ZP.path.getFileExtension(e)})).value().length});n(99770);var M=d.Ty+"/metadata.json",F=(d.Ty,"content_v3"),R=("".concat(d.Ty,"/").concat(F),"index"),L="".concat(d.Ty,"/").concat("content","/").concat(R,".json"),U=n(33732),B=n(44442).A,q=["/usr/share/codio/assessments/guides-converter-v3"];function H(){return U.ZP.remote.run(q).then((function(e){if(0!==e.code)return t=E()('<div>An error has occurred during the process of converting your Codio Guides to the new format. \n  Please contact <a class="contact-support" style="cursor:pointer">Codio Technical Support</a> for assistance.</div>').on("click",".contact-support",W),n=l.ZP.promise.deferred(),f.Z.showWarning({title:"Guides Conversion Error",description:t,buttons:f.Z.MB_OK,onClose:function(){n.resolve()},onHide:function(){n.resolve()}}),n.promise;var t,n}))}function W(){B.execute("support","show")}const z=function(){return N()||s.Z.currentProject.exists(M)&&!s.Z.currentProject.exists(L)},G=function(){return H()};n(44830);var V="Guides convert started or canceled";const K=function(){var e=s.Z.currentProject.eduStartedAssignmentInfo;return s.Z.currentProject.children[d.Ty]&&r().isEmpty(s.Z.currentProject.children[d.Ty])||s.Z.currentProject.readOnly||e||!j()&&!z()?Promise.resolve():new Promise((function(e){f.Z.showConfirm({title:"Convert guides?",description:["This Guide is in an old format, which is not supported anymore. ","We can automatically convert your Guide into the new format. ","Doing so will open a terminal tab and run a command line utility. ","You will be able to open the Guide Editor and Player after this ","process finishes."].join(""),onHide:function(){e(!1)},onClose:function(t){e(t)}})})).then((function(e){if(e){var t=j()?A():G(),n=E()("#content");n.block(),t.finally((function(){n.unblock(),window.location.reload()}))}return Promise.reject(new Error(V))}))},Y=V;var J=n(48503),Q=n(1436),X=a.Z.create(n(10742)),$=d.ZP.GUIDES_ROOT_METADATA_FILE,ee=d.ZP.GUIDES_FOLDER,te=d.ZP.CSS_FILE,ne=d.ZP.PROJECT_SETTINGS_FILE,ie={initDfd:l.ZP.promise.deferred()};function re(){var e=s.Z.currentProject;if(!e)return!1;var t=e.eduStartedAssignmentInfo,n=e.exists($),i=e.guides&&!r().isEmpty(e.guides.metadata)&&!r().isEmpty(e.guides.metadata.sections);return!t&&n||i}function ae(e,t){s.Z.currentProject&&!s.Z.currentProject.readOnly&&K().then((function(){ie.initDfd=l.ZP.promise.deferred(),ie.initDfd.resolve()})).then((function(){return ue(),C.createContent().finally((function(){return le()}))})).then((function(){s.Z.currentProject.exists(ne)||X.projectSettingsUpdate({arg:{plugin:"editor",key:"tab_size",value:2}}),r().defer((function(){s.Z.ide.open("guides-edit","",{ignoreExtensions:["filetree"],step:t&&t.step})}))})).catch((function(e){return e&&e.message!==Y&&o.Z.error(e.message)}))}function se(){s.Z.currentProject.exists(ee)?(0,h.wu)()&&(0,Q.p)().then((function(e){Q.Z.set(e)})):(u.ZP.close(!0),X.guidesRemoved()),pe()}a.Z.subscribe("command:guides:add_custom_css",(function(){C.createCustomCss(u.ZP).then((function(){r().delay((function(){s.Z.ide.open("tree",te)}))}))})),a.Z.subscribe("command:guides:remove_custom_css",(function(){return C.removeCustomCss(u.ZP)}));var oe,ce=function(e,t){var n=[];return r().each(["item:created:","item:moved:","item:moved:#from:","item:deleted:","file:change:"],(function(i){n.push(a.Z.subscribe(i+e,t))})),n};var le=function(){oe||(oe=se)};ce(ee,(function(){oe&&oe.apply(null,arguments)}));var ue=function(){oe=void 0};function de(e,t){var n=t?"enableItem":"disableItem";r().each(e,(function(e){c.ZP[n](e)}))}function pe(){de(["menu-item-guides-play","menu-item-guides-play-view"],re())}a.Z.subscribe("command:guides:edit",ae),a.Z.subscribe("command:guides:play",(function(){if(re()){var e=p.Z.getPlayerPanel();s.Z.ide.open("guides","",{panel:e})}else o.Z.error("No Guides in the project")})),a.Z.subscribe("project:open",(function(){!function(){var e=s.Z.currentProject,t=e.guides;if(e.eduStartedAssignmentInfo&&t&&t.bookStructure){var n=t.bookStructure.children,i=n?J.Z.flatPages(n):[];e.sortedBookPages=J.Z.sortBookPages(i,e.bookAssignmentPages)}}();var e=s.Z.currentProject.eduStartedAssignmentInfo;e||le(),p.Z.reset(),K().then((function(){de(["menu-item-guides-edit","menu-item-guides-edit-css","menu-item-guides-edit-css-reset"],!e),re()&&e?g(!0):e&&X.treeAddFilter({plugin:"guides-player",filter:"hide",path:[".codio",d.ZP.GUIDES_FOLDER],seq:0}),ie.initDfd.resolve()})).catch((function(e){return re()&&g(!1),ie.initDfd.reject(new Error("guides convert")),e&&e.message!==Y&&o.Z.error(e.message),be()})).catch((function(){})),pe()})),a.Z.subscribe("project:close",(function(){ue(),u.ZP.close(),p.Z.close(),ie.isTeacher=!1})),a.Z.subscribe("guides:command:run",(function(e,t){p.Z.run(t)}));var fe=function(){return s.Z.currentProject.eduStartedAssignmentInfo},he=function(){return s.Z.currentProject.isOpenedByTeacher},me=function(){var e=(s.Z.currentProject.eduStartedAssignmentInfo||{}).started;return e&&s.Z.currentProject.isOpenedByTeacher&&s.Z.currentUser.getAccountUid()===e.assignee.userId&&!s.Z.currentProject.writableCopy},ge=!1,ve=!1,be=function(){return ie.initDfd.promise};const ye={onFileChange:ce,listenMetaChanges:le,stopListenMetaChanges:ue,isUnit:fe,isTeacher:he,isPreview:me,isEditorOpen:function(){return ge},setEditorOpen:function(e){ge=e,e||X.editorClose()},setViewSwitcher:function(e){ve=e},getViewSwitcher:function(){return ve},showAsTeacher:function(){return s.Z.currentProject.isAuthorProject||me()?ve:fe()?he():!!s.Z.currentProject.isOwner&&ve},getInitPromise:be,isGuidesExist:re,edit:ae}},93702:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(96486),r=n.n(i),a=n(20294),s=n(49721),o=n(97137),c=n(95611);const l={initFile:function(e,t){return s.Z.currentProject.exists(e)?s.Z.currentProject.unixFile(e):function(e){if(!s.Z.currentProject)return Promise.reject();var t=a.ZP.path.parse(e),n=t.name,i=t.dir;return s.Z.currentProject.createFile(n,i)}(e).then((function(){return s.Z.currentProject.file(e)})).then((function(e){var n=a.ZP.promise.deferred();return r().isUndefined(t)?n.resolve(e):(e.content=t,r().defer((function(){c.Z.saveAllAndWait().then((function(){return n.resolve(e)}))}))),n.promise}))},getParsedContent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{return JSON.parse(e.content)}catch(i){if(t)return n;throw o.Z.error("Parse ".concat(e.name," failed. Please check that the file contains valid JSON.")),new Error("Parse ".concat(e.name," failed."))}},updateContent:function(e,t){e.content=JSON.stringify(t,void 0,"\t")}}},28893:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>r,aU:()=>i.aU});var i=n(81644);const r={Section:i.$0,Action:i.aU,createMetadata:i.bp,getMetadata:i.sd,close:i.ZP.close}},55537:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(96486),r=n.n(i);function a(e){var t=e.split(","),n=[];return r().each(t,(function(e){var t=function(e){return 0!==(e=r().trim(e)).length&&("#"===e[0]?(t=r().trim(e.split(":",1)[0].substr(1)),n=r().trim(e.substr(t.length+2))):(t="file",n=e),"file"===t&&("."===(i=n)[0]&&"/"===i[1]?i=i.substr(2):"/"===i[0]&&(i=i.substr(1)),n=i),{type:t,content:n});var t,n,i}(e=r().trim(e));!1!==t&&n.push(t)})),n}var s=function(e){r().isUndefined(e)||(this.json=e)},o=s.prototype;function c(e,t,n,i){var a="_"+t;Object.defineProperty(e,t,{get:function(){return r().isUndefined(this[a])?n:this[a]},set:function(e){this[a]=e,r().isFunction(i)&&i(this,e)}})}Object.defineProperty(o,"json",{get:function(){return{path:this.path,panel:this.panel,ref:this.ref,lineCount:this.lineCount,action:this.action}},set:function(e){e=function(e){return e.action="close"===e.action?"close":"open",e}(e),this.path=e.path,this.ref=e.ref,this.panel=e.panel,this.lineCount=e.lineCount,this.action=e.action}}),Object.defineProperty(o,"isCloseAll",{get:function(){if("close"===this.action){var e=r().find(this.commands,{content:"",type:"tabs"});if(!r().isUndefined(e))return!0}return!1}}),c(o,"path","",(function(e,t){var n=t;r().isString(t)&&(n=function(e){return a(e)}(t)),e.commands=n})),c(o,"ref"),c(o,"panel"),c(o,"lineCount"),c(o,"action"),c(o,"commands");const l=s},99770:(e,t,n)=>{"use strict";n.d(t,{QZ:()=>o,X_:()=>s,_b:()=>u,kQ:()=>l,xZ:()=>a,y2:()=>c});var i=n(20294),r=n(85886),a=function(e){var t=i.ZP.path.parse(e),n=t.dir,a=t.name;return a!==r.nb?i.ZP.path.getFileName(a):i.ZP.path.parse(n).name},s=function(e){return"".concat(i.ZP.path.escape(e.title),"-").concat(e.id.substring(0,4))},o=function(e,t){return"".concat(e.substring(0,e.length-4)).concat(t.substring(0,4))},c=function(e){return r.gg[e]||""},l=function(e,t){var n=i.ZP.path.parse(e),r=n.dir,a=n.name,s=c(t);return"".concat(r,"/").concat(i.ZP.path.getFileName(a),".").concat(s)},u=function(e,t){return"".concat(e.substring(0,e.lastIndexOf(".")),".").concat(t)}},81644:(e,t,n)=>{"use strict";n.d(t,{aU:()=>f.Z,$0:()=>p.Z,bp:()=>I,ZP:()=>T,sd:()=>E});var i=n(15861),r=n(87757),a=n.n(r),s=n(96486),o=n.n(s),c=n(49721),l=n(85886),u=n(93443),d=n(1436),p=n(8450),f=n(55537),h=n(38880),m=n(35402),g=n(4942),v=n(99770),b=n(20294),y=n(93702);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={title:"",theme:"light",scripts:[],lexikonTopic:"",suppressPageNumbering:!1,useSubmitButtons:!0,useMarkAsComplete:!0,hideMenu:!1,allowGuideClose:!1,collapsedOnStart:!1,hideSectionsToggle:!1,hideBackToDashboard:!1,protectLayout:!1},P={id:"",title:"",files:[],path:[],contentType:l._1,type:"page",teacherOnly:!1,closeTerminalSession:!0,learningObjectives:"",layout:"1-panel"},Z=function(){var e,t,n,i,r,a,s,o,u,d={id:b.ZP.GUID(),title:"Page 1"},p=(e=d,t=_(_({},P),e),n=(0,v.y2)(t.contentType),i="".concat(l.mK,"/").concat((0,v.X_)(t)),r="".concat(i,".").concat(n),a="".concat(i,".json"),s=y.Z.initFile(a,JSON.stringify(t,void 0,"\t")).then((function(e){return e.close()})),o="# Sample content ".concat(t.title),u=y.Z.initFile(r,o).then((function(e){return e.close()})),Promise.all([s,u])),f=_(_({},k),{},{title:c.Z.currentProject.bookName||c.Z.currentProject.name,order:[(0,v.X_)(d)]}),h=y.Z.initFile(l.q9,JSON.stringify(f,void 0,"\t")).then((function(e){return e.close()}));return Promise.all([h,p])},x=u.Z.create(n(10742)),C=null;function S(){var e;if(function(){var e=c.Z.currentProject;return e.eduStartedAssignmentInfo&&e.guides&&e.guides.metadata}()){var t=c.Z.currentProject,n=t.guides&&t.guides.metadata;!t.showAllBookPages&&t.isBookReader&&(n=h.Z.filterSection(t.guides,t.bookAssignmentPages)),n.sections=o().map(n.sections,(function(e){return e.contentType=e.type,e})),e=Promise.resolve(n)}else e=(0,d.p)();return e.then((function(e){return d.Z.set(e),C=!0,x.metadataLoaded(d.Z),d.Z}))}var E=function(){var e=(0,i.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,!C||o().isBoolean(C)){e.next=5;break}return e.next=4,b.ZP.promise.getState(C);case 4:t=e.sent;case 5:if(!(null===C||t&&t===b.ZP.promise.STATES.REJECTED)){e.next=9;break}C=S(),e.next=11;break;case 9:if(!0!==C){e.next=11;break}return e.abrupt("return",Promise.resolve(d.Z));case 11:return e.abrupt("return",C);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){if(c.Z.currentProject)return c.Z.currentProject.exists(l.q9)?E().then((function(e){return[e,!1]})):Z().then((function(){return m.zD()})).then((function(){return E().then((function(e){return[e,!0]}))}))};const T={Section:p.Z,Action:f.Z,createMetadata:I,getMetadata:E,close:function(e){d.Z.close(e),C=null}}},35402:(e,t,n)=>{"use strict";n.d(t,{$4:()=>Q,Eq:()=>ee,Ih:()=>$,M2:()=>U,Ws:()=>F,Xl:()=>J,Ym:()=>O,_Q:()=>X,aF:()=>A,bz:()=>L,oN:()=>R,r4:()=>G,w:()=>H,yl:()=>D,zD:()=>C});var i=n(42982),r=n(4942),a=n(15861),s=n(87757),o=n.n(s),c=n(96486),l=n.n(c),u=n(49721),d=n(20294),p=n(93443),f=n(95611),h=n(97137),m=n(85886),g=n(93702),v=n(99770);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={},_={},k={},P={},Z={debug:console.debug.bind(window.console,"METADATA_BY_PATH:")},x=function e(t,n){var i=l().pickBy(n,(function(e,t){return"json"===d.ZP.path.getFileExtension(t)||1!==e}));return l().map(i,(function(n,i){var r="".concat(t,"/").concat(i);return 1===n?r:e(r,n)}))},C=function(){if(Z.debug("load"),!u.Z.currentProject.children[".guides"])throw new Error("metadata not found");var e=l().flattenDeep(x(m.mK,u.Z.currentProject.children[".guides"].content)),t=l().filter(e,(function(e){return!w[e]}));if(!t.length)return Promise.resolve(l().cloneDeep(w));var n=function(){var e=(0,a.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:return n=e.sent,e.prev=3,e.abrupt("return",JSON.parse(n.content));case 7:return e.prev=7,e.t0=e.catch(3),e.next=11,d.ZP.promise.getState(n.status);case 11:throw e.sent===d.ZP.promise.STATES.REJECTED&&(n.close(),delete _[t]),console.error("metadata corrupted for "+t),new Error("metadata corrupted for ".concat(t));case 15:case"end":return e.stop()}}),e,null,[[3,7]])})));return function(t){return e.apply(this,arguments)}}();return d.ZP.promise.mapSeries(t,n,10).then((function(e){var n=l().mapKeys(e,(function(e,n){return t[n]}));return w=y(y({},w),n),S(),l().cloneDeep(w)}))},S=function(){P=l()(w).mapValues((function(e){return e.id})).invert().value()},E=function(e){return P[e]},I=function(e){var t=E(e);return t?(0,v.xZ)(t):null},T=function(e){return _[e]||(_[e]=u.Z.currentProject.unixFile(e)),_[e]},j=function e(t,n,i){Z.debug("getOrderedMetadata",n,i);var r="".concat(n,"/").concat(i),a=u.Z.currentProject.getFileInfo(r),s=a&&"dir"===a.type,o="".concat(r).concat(s?"/index":"",".json");Z.debug("getOrderedMetadata metadataFileName",o);var c=t[o];if(!c){var d=u.Z.currentProject.getFileInfo(o);return Z.debug("removing broken node. metadataFileName, fileInfo",o,d),function(e,t){Z.debug("removeBrokenNode",e,t),h.Z.notify("Metadata for ".concat(t," page in ").concat(e," not found."));var n="".concat(e,"/").concat(m.nb),i=w[n],r=l().filter(i.order,(function(e){return e!==t}));O("".concat(e,"/").concat(m.nb),{order:r}),D()}(n,i),null}var p=[];return c.order&&(p=l().map(c.order,(function(n){return e(t,r,n)}))),[c.contentType?o:null,p]},A=function(){return Z.debug("getSectionsOrder"),C().then((function(e){var t=e[m.q9];return t&&t.order?l()(t.order).map((function(t){return j(e,m.mK,t)})).flattenDeep().compact().value():Promise.reject(new Error("Metadata corrupted"))}))},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Z.debug("updateMetadata",e,t,n),u.Z.currentProject.exists(e)&&w[e]&&(w[e]=n?t:y(y({},w[e]),t),k[e]=1)},D=function(){Z.debug("flush");var e=l().keys(k);return d.ZP.promise.iterateAsync(e,(function(e){return T(e).then((function(t){try{t.content=JSON.stringify(w[e],void 0,"\t"),delete k[e]}catch(e){}})).catch((function(){}))})).then((function(){return f.Z.saveAllAndWait()}))},N=function(e,t){return Z.debug("createMetadataFile",e,t),g.Z.initFile(e).then((function(e){return g.Z.updateContent(e,t)}))},M=function(e,t,n){var r=(0,i.Z)(e);return t=-1===t?e.length:t+1,r.splice(t,0,n),r},F=function(e,t,n){return Z.debug("addPage",e,t,n),C().then((function(i){var r=i[e],a=e.replace("/".concat(m.nb),""),s=(0,v.X_)(n),o=(0,v.y2)(n.contentType),c="".concat(a,"/").concat(s,".").concat(o),l="".concat(a,"/").concat(s,".json"),u=N(l,n);P[n.id]=l;var d=M(r.order,t,s);O(e,{order:d});var p=g.Z.initFile(c);return Promise.all([u,p]).then((function(){return D()})).then((function(){return c}))}))},R=function(e,t,n){return Z.debug("addFolder",e,t,n),C().then((function(i){var r=i[e],a=e.replace("/".concat(m.nb),""),s=(0,v.X_)(n),o="".concat(a,"/").concat(s,"/").concat(m.nb),c=N(o,y(y({},n),{},{order:[]}));P[n.id]=o;var l=M(r.order,t,s);return O(e,{order:l}),c.then((function(){return D()}))}))},L=function(e,t){return Z.debug("linkPage",e,t),C().then((function(){O(e,t);var n=(0,v.kQ)(e,t.contentType);return g.Z.initFile(n).then((function(){return D()})).then((function(){return n}))}))},U=function(e){return Z.debug("unlinkPage",e),C().then((function(t){var n=t[e],i=l().pick(n,["id","title","order","type"]);O(e,i,!0);var r=Promise.resolve();if(n.contentType){var a=(0,v.kQ)(e,n.contentType);r=u.Z.currentProject.deleteItems([a])}return r.then((function(){return D()}))}))},B=function(e){var t=d.ZP.path.parse(e),n=t.dir;return t.name===m.nb?n.substring(0,n.lastIndexOf("/")):n},q=function(e,t,n){Z.debug("updateOrderOnRename",t,n);var i=e[t],r=B(t),a="".concat(r,"/").concat(m.nb),s=e[a],o=I(i.id),c=(0,v.X_)({id:i.id,title:n});if(o!==c){var u=l().map(s.order,(function(e){return e===o?c:e}));O(a,{order:u})}},H=function(e,t){return Z.debug("renameNode",e,t),C().then((function(n){var i=n[e];if(i&&i.title!==t)return d.ZP.path.parse(e).name===m.nb?function(e,t,n){Z.debug("renameFolder",t,n);var i=e[t],r=(0,v.X_)({id:i.id,title:n});if(r===I(i.id))return O(t,{title:n}),D().then((function(){return null}));var a=d.ZP.path.parse(t);O(t,{title:n}),q(e,t,n);var s=a.dir.substring(0,a.dir.lastIndexOf("/")),o="".concat(s,"/").concat(r);return D().then((function(){return u.Z.currentProject.renameItem(a.dir,o)})).then((function(){return w=l().mapKeys(w,(function(e,t){return l().startsWith(t,"".concat(a.dir,"/"))?(delete _[t],t.replace(a.dir,o)):t})),S(),{oldPath:"".concat(a.dir,"/"),newPath:"".concat(o,"/")}}))}(n,e,t):function(e,t,n){Z.debug("renamePage",t,n);var i=e[t],r=(0,v.X_)({id:i.id,title:n});if(r===I(i.id))return O(t,{title:n}),D().then((function(){return[l().cloneDeep(w[t])]}));var a=d.ZP.path.parse(t),s=(0,v.kQ)(t,i.contentType),o=d.ZP.path.getFileExtension(s),c="".concat(a.dir,"/").concat(r,".").concat(o);return u.Z.currentProject.renameItem(s,c).then((function(){O(t,{title:n}),q(e,t,n);var o="".concat(a.dir,"/").concat(r,".json");return D().then((function(){return u.Z.currentProject.renameItem(t,o)})).then((function(){delete _[t],w[o]=w[t],delete w[t],P[i.id]=o})).then((function(){return{oldPath:s,newPath:c}}))}))}(n,e,t)}))},W=function(e){var t=[],n=l().map(e,(function(e){var n=d.ZP.path.parse(e),i=n.dir;return n.name===m.nb?(t.push(i),i):e}));return l().reduce(n,(function(e,n){return l().find(t,(function(e){return l().startsWith(n,"".concat(e,"/"))}))||e.push(n),e}),[])},z=function(){w=l().pickBy(w,(function(e,t){return u.Z.currentProject.exists(t)})),_=l().pickBy(_,(function(e,t){return u.Z.currentProject.exists(t)})),k=l().pickBy(k,(function(e,t){return u.Z.currentProject.exists(t)}))},G=function(e){return Z.debug("removeNodes",e),C().then((function(t){var n=W(e),i=l()(n).map((function(e){var n=t[e];return n?[e,(0,v.kQ)(e,n.contentType)]:e})).flatten().value();return u.Z.currentProject.deleteItems(i).then((function(){return z(),S(),l().forEach(n,(function(e){var t=d.ZP.path.parse(e),n=t.dir,i=t.name,r=d.ZP.path.getFileName(i),a="".concat(n,"/").concat(m.nb),s=w[a],o=l().filter(s.order,(function(e){return e!==r}));O(a,{order:o})})),D()}))}))},V=function(e,t,n){var r=l()(n).map((function(n){var i=function(e,t,n,i){var r="".concat(n).concat(i?"/".concat(m.nb):""),a=e[t];if(e[r].type===m.yj.CHAPTER){var s=t.split("/")[2],o=d.ZP.path.getFileName(s);return{pos:e[m.q9].order.indexOf(o)+1,parentMetadataPath:m.q9}}var c=d.ZP.path.parse(t).dir,l="".concat(c,"/").concat(m.nb),u=e[l];if(a.type===m.yj.PAGE){var p=d.ZP.path.parse(t),f=d.ZP.path.getFileName(p.name);return{pos:u.order.indexOf(f)+1,parentMetadataPath:l}}return{pos:u.order.length,parentMetadataPath:l}}(e,t,n.oldPaths[0],n.isDir);return{info:n,posInfo:i}})).groupBy((function(e){return e.posInfo.parentMetadataPath})).value();return d.ZP.promise.iterateAsync(r,(function(t){var n=e[t[0].posInfo.parentMetadataPath],r=(0,i.Z)(n.order),a=l().map(t,(function(e){var t=e.info;return d.ZP.path.getFileName(d.ZP.path.parse(t.newPaths[0]).name)}));return r.splice.apply(r,[t[0].posInfo.pos,0].concat((0,i.Z)(a))),O(t[0].posInfo.parentMetadataPath,{order:r}),d.ZP.promise.iterateAsync(t,(function(e){var t=e.info,n="".concat(t.newPaths[0]).concat(t.isDir?"/".concat(m.nb):"");return T(n).then((function(e){var n=JSON.parse(e.content);n.id=t.id,e.content=JSON.stringify(n,void 0,"\t")}))}))})).then((function(){return D()}))},K=function e(t){var n=u.Z.currentProject;if(!n.exists("".concat(t,"/").concat(m.nb)))return Promise.resolve();var i=function(e){return l().get(n.children,e.split("/"))},r=i(t),a={},s=l()(r).map((function(e,i){var r="".concat(t,"/").concat(i);if("dir"===n.getFileInfo(r).type&&!n.exists("".concat(r,"/").concat(m.nb)))return null;var s=d.ZP.path.getFileName(i);a[s]=a[s]||d.ZP.GUID();var o=a[s],c=d.ZP.path.getFileExtension(i),l="index"!==s?(0,v.QZ)(s,o):s;return{id:o,oldPath:r,oldName:s,newPath:"".concat(t,"/").concat(l).concat(c?".".concat(c):""),newName:l}})).compact().value(),o=l().filter(s,(function(e){return e.oldPath!==e.newPath})),c=l().map(o,(function(e){return e.oldPath})),p=l().map(o,(function(e){return e.newPath})),h=l().reduce(s,(function(e,t){return e[t.oldName]=t.newName,e}),{});return n.moveItems(c,p).then((function(){return d.ZP.promise.iterateAsync(s,(function(e){var t=n.getFileInfo(e.newPath),i="dir"===t.type,r=d.ZP.path.getFileExtension(t.name);if(!i&&"json"!==r)return Promise.resolve();var a="".concat(e.newPath).concat(i?"/".concat(m.nb):"");return T(a).then((function(n){var r=JSON.parse(n.content);t.name!==m.nb||i?r.id=e.id:r.order=l().map(r.order,(function(e){return h[e]})),n.content=JSON.stringify(r,void 0,"\t")}))}))})).then((function(){return f.Z.saveAllAndWait()})).then((function(){var n=y({},i(t)),r=l().keys(n);return d.ZP.promise.mapSeries(r,(function(i){return l().isNumber(n[i])?Promise.resolve():e("".concat(t,"/").concat(i))}))}))},Y=function(e){return d.ZP.promise.mapSeries(e,(function(e){var t=e.newPaths;if(!e.isDir)return Promise.resolve();var n=t[0];return K(n)})).then((function(){return f.Z.saveAllAndWait()}))},J=function(e,t){return Z.debug("copyNodes",e,t),C().then((function(n){var i=d.ZP.path.parse(e).dir,r=W(t),a=function(e,t,n){return l().reduce(n,(function(n,i){var r=[],a=[],s=d.ZP.GUID(),o=u.Z.currentProject.getFileInfo(i),c=o&&"dir"===o.type,l=c?"".concat(i,"/").concat(m.nb):i,p=e[l],f=(0,v.X_)({title:p.title,id:s});r.push(i);var h=p.type===m.yj.CHAPTER?m.mK:t;if(a.push("".concat(h,"/").concat(f).concat(c?"":".json")),!c){var g=(0,v.kQ)(l,p.contentType),b=d.ZP.path.getFileExtension(g);r.push(g),a.push("".concat(t,"/").concat(f,".").concat(b))}return n.push({oldPaths:r,newPaths:a,id:s,isDir:c}),n}),[])}(n,i,r),s=l()(a).map((function(e){return e.oldPaths})).flatten().value(),o=l()(a).map((function(e){return e.newPaths})).flatten().value();return u.Z.currentProject.copyItems(s,o).then((function(){return V(n,e,a)})).then((function(){return d.ZP.promise.delay(500)})).then((function(){return Y(a)}))}))},Q=function(e,t,n){return Z.debug("moveNodes",e,t,n),C().then((function(r){var a=W(t),s=d.ZP.path.parse(e).dir,o=function(e,t,n){return l().reduce(n,(function(n,i){var r="dir"===u.Z.currentProject.getFileInfo(i).type,a=d.ZP.path.parse(i),s=a.dir,o=a.name;if(s===t)return n;if(n.src.push(i),n.dest.push("".concat(t,"/").concat(o)),!r){var c=e[i];if(c.contentType){var l=(0,v.kQ)(i,c.contentType),p=d.ZP.path.getFileExtension(l);n.src.push(l),n.dest.push("".concat(t,"/").concat(d.ZP.path.getFileName(o),".").concat(p))}}return n}),{src:[],dest:[]})}(r,s,a);return(o.src.length?u.Z.currentProject.moveItems(o.src,o.dest):Promise.resolve()).then((function(){return function(e,t,n,r){var a,s=l().groupBy(n,(function(e){return B(e)}));l().each(s,(function(t,n){var i="".concat(n,"/").concat(m.nb),r=e[i],a=l().map(t,v.xZ),s=r.order.filter((function(e){return!l().includes(a,e)}));O(i,{order:s})}));var o="".concat(t,"/").concat(m.nb),c=e[o],u=l().map(n,v.xZ),d=(0,i.Z)(c.order);return d=l().filter(d,(function(e){return!u.includes(e)})),r=l().isUndefined(r)?c.order.length:r,(a=d).splice.apply(a,[r,0].concat((0,i.Z)(u))),O(o,{order:d}),D()}(r,s,a,n)})).then((function(){l().each(o.src,(function(e,t){var n=o.dest[t],i="dir"===u.Z.currentProject.getFileInfo(n).type,r=d.ZP.path.parse(e);if(i||"json"===d.ZP.path.getFileExtension(r.name))if(i){var a="".concat(e,"/"),s="".concat(n,"/");w=l().mapKeys(w,(function(e,t){return l().startsWith(t,a)?t.replace(a,s):t}))}else w[n]=w[e]}))})).then((function(){z(),S()}))}))},X=function(e,t){return Z.debug("switchContentType",e,t),C().then((function(n){var i=n[e];if(!i||!i.contentType)return null;var r=(0,v.kQ)(e,i.contentType),a=(0,v.y2)(t),s=(0,v._b)(r,a);return u.Z.currentProject.unixFile(r).then((function(e){e.content=""})).then((function(){return f.Z.saveAllAndWait()})).then((function(){return u.Z.currentProject.renameItem(r,s)})).then((function(){return O(e,{contentType:t}),D()})).then((function(){return s}))}))},$=function(e){var t=m.q9;return e&&"#"!==e?E(e):t},ee=function(){Z.debug("cleanup"),w={},l()(_).keys().each((function(e){return T(e).then((function(e){return e.close()}))})),_={},k={},P={}};p.Z.subscribe("project:close:#projectId",(function(){ee()}));var te=l().debounce((function(){return h.Z.notify("Warning! Manual editing JSON files from ".concat(m.mK," can break guides."))}),200);p.Z.subscribe("file:editor:open",(function(e,t){_[t.fileName]&&te()}))},1436:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E,p:()=>S});var i=n(44925),r=n(4942),a=n(70885),s=n(96486),o=n.n(s),c=n(52308),l=n.n(c),u=n(93443),d=n(85886),p=n(8450),f=n(79703),h=n(21384),m=n(35402),g=n(99770),v=["name","order"],b=["order"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=u.Z.create(n(10742)),k=function(){this._sections=[]},P=k.prototype;function Z(e,t){var n=[],i=[],r=[],a=0;return o().each(t,(function(t){var r=e.getSectionById(t.id);if(o().isUndefined(r))r=new p.Z(t);else{e._sections=o().without(e._sections,r);var s=r.update(t);i.push({id:r.id,major:s})}r.teacherOnly?r.number={section:""}:(a++,r.number={section:a}),n.push(r)})),o().each(e._sections,(function(e){r.push(e.id)})),e._sections=n,{updated:i,deleted:r}}var x=function(){l()("#content").block()},C=function(){var e=l()("#content");o().defer((function(){return e.unblock()}))};P.set=function(e){if(!e){var t=this._sections;return this._sections=[],void _.guidesUpdated({deleted:o().map(t,(function(e){return e.cleanup(),e.id}))})}var n=Z(this,e.sections);this.title=e.title,this.theme=e.theme,this.scripts=e.scripts,this.lexikonTopic=e.lexikonTopic,this.suppressPageNumbering=e.suppressPageNumbering,this.hideMenu=e.hideMenu,this.allowGuideClose=e.allowGuideClose,this.useSubmitButtons=e.useSubmitButtons,this.useMarkAsComplete=e.useMarkAsComplete,this.collapsedOnStart=e.collapsedOnStart,this.hideSectionsToggle=e.hideSectionsToggle,this.hideBackToDashboard=e.hideBackToDashboard,this.protectLayout=e.protectLayout,_.guidesUpdated(n)},P.save=function(){return m.Ym(d.q9,this.json()),m.yl()},P.getSection=function(e){return this._sections[e]},P.getSectionById=function(e){return o().find(this._sections,(function(t){return t.id===e}))},P.sectionsCount=function(){return this._sections.length},P.getSections=function(){return o().clone(this._sections)},P.getSectionByFileName=function(e){return o().find(this._sections,{contentPath:e})};var S=function(){return m.zD().then((function(e){return Promise.all([e,m.aF()])})).then((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1],s=w({},n),c=s[d.q9];delete s[d.q9];c.name,c.order;var l=(0,i.Z)(c,v),u=o()(r).map((function(e){var t=n[e],r=(t.order,(0,i.Z)(t,b)),a=(0,g.kQ)(e,r.contentType);return w(w({},r),{},{contentFile:a})})).compact().value();return w(w({},l),{},{sections:u})}))};P.refreshSections=function(){var e=this;return S().then((function(t){var n=Z(e,t.sections);_.guidesUpdated(n)}))},P.updateSectionsOrder=function(){var e=this;return m.aF().then((function(t){e._sections=o().sortBy(e._sections,(function(e){var n=(0,g._b)(e.contentPath,"json");return t.indexOf(n)}))}))},P.addSection=function(e){var t=this;return e instanceof p.Z||(e=new p.Z(e)),this._sections.push(e),this.updateSectionsOrder().then((function(){t.updateNumbers(),_.guidesUpdated({added:[e.id]})}))},P.updateNumbers=function(){var e=0;o().forEach(this._sections,(function(t){t&&(t.teacherOnly?t.number={section:""}:(e++,t.number={section:e}))}))},P.removeSections=function(e){var t=[],n=o().keyBy(e,(function(e){return e}));this._sections=o().filter(this._sections,(function(e){var i=n[e.id];return i&&(t.push(e.id),e.cleanup()),!i})),this.updateNumbers(),_.guidesUpdated({deleted:t})},P.getSectionPosition=function(e){return o().findIndex(this._sections,(function(t){return t.id===e}))},P.close=function(e){this.set(null),e&&m.Eq()},P.json=function(){var e={};return e.title=this.title,e.theme=this.theme,e.scripts=this.scripts,e.lexikonTopic=this.lexikonTopic,e.suppressPageNumbering=this.suppressPageNumbering,e.useSubmitButtons=this.useSubmitButtons,e.useMarkAsComplete=this.useMarkAsComplete,e.hideMenu=this.hideMenu,e.allowGuideClose=this.allowGuideClose,e.collapsedOnStart=this.collapsedOnStart,e.hideSectionsToggle=this.hideSectionsToggle,e.hideBackToDashboard=this.hideBackToDashboard,e.protectLayout=this.protectLayout,e},P.getTabs=function(e,t){return f.ZP.buildTabsMap(this,e,t)},P.getSectionTabs=function(e,t){var n=e;if(o().isString(n))n=this.getSectionPosition(n);else if(n<0)return{ssh:[],terminal:[],ide:[]};return function(e,t,n){var i={},r={ide:[],ssh:[],terminal:[]},a=e.getSection(t);if(o().isUndefined(a))return{ssh:[],terminal:[],ide:[]};a.isCloseAll||(r=e.getSectionTabs(t-1,n));var s=a.getTabs(),c=h.Z.filterTabs(s.open,["preview","file","tutor","vm","vmssh"]),l=h.Z.filterTabs(s.close,["preview","file","tutor","vm","vmssh"]);if(i.ide=h.Z.mergeTabs(r.ide,c,l),n){var u=h.Z.filterTabs(s.open,["ssh"]),d=h.Z.filterTabs(s.open,["terminal"]);i.ssh=h.Z.mergeTabs(r.ssh,u,[]),i.terminal=h.Z.mergeTabs(r.terminal,d,[])}else i.ssh=h.Z.filterTabs(s.open,["ssh"]),i.terminal=h.Z.filterTabs(s.open,["terminal"]);return i}(this,n,t)},P.getLayout=function(e){var t=e;if(o().isString(t)&&(t=this.getSectionPosition(t)),t<0)return"1-panel-tree";var n=this.getSection(t).layout;return o().isUndefined(n)||""===n?this.getLayout(t-1):n},P.addPage=function(e,t,n){var i=this;return x(),m.zD().then((function(){var r=(0,m.Ih)(e);if(r){var a=new p.Z(n),s=w(w({},a.json),{},{type:d.yj.PAGE});return m.Ws(r,t,s).then((function(e){return a.contentPath=e,n.value?a.setValue(n.value):Promise.resolve()})).then((function(){return i.addSection(a)}))}})).finally((function(){return C()}))},P.addFolder=function(e,t,n){return x(),m.zD().then((function(){var i=(0,m.Ih)(e);if(i)return m.oN(i,t,n)})).finally((function(){return C()}))},P.linkPage=function(e,t){var n=this;return x(),m.zD().then((function(i){var r=(0,m.Ih)(e);if(r){var a=i[r];t.title=a.title;var s=new p.Z(t),o=w(w({},s.json),{},{type:a.type,order:a.order});return m.bz(r,o).then((function(e){return s.contentPath=e,t.value?s.setValue(t.value):Promise.resolve()})).then((function(){return n.addSection(s)}))}})).finally((function(){return C()}))},P.unlinkPage=function(e){return x(),m.zD().then((function(){var t=(0,m.Ih)(e);if(t)return m.M2(t)})).finally((function(){return C()}))},P.renameNode=function(e,t){var n=this;return x(),m.zD().then((function(i){var r=(0,m.Ih)(e);if(r){var a=i[r].id,s=n.getSectionById(a),c="";return s&&(c=s.title,s.title=t),m.w(r,t).then((function(e){o().forEach(n._sections,(function(t){e&&t.contentPath&&o().startsWith(t.contentPath,e.oldPath)&&(t.contentPath=t.contentPath.replace(e.oldPath,e.newPath))}))})).catch((function(){s&&(s.title=c)}))}})).finally((function(){return C()}))},P.updateTitle=function(e){return x(),m.zD().then((function(t){var n=t[d.q9];if(n&&n.title!==e)return m.Ym(d.q9,{title:e}),m.yl()})).finally((function(){return C()}))},P.removeNodes=function(e){return x(),m.zD().then((function(){var t=o().map(e,(function(e){return(0,m.Ih)(e)}));return m.r4(t)})).finally((function(){return C()}))},P.copyNodes=function(e,t){var n=this;return x(),m.zD().then((function(){var i=(0,m.Ih)(e),r=o()(t).map((function(e){return(0,m.Ih)(e)})).compact().value();return m.Xl(i,r).then((function(){return n.refreshSections()}))})).finally((function(){return C()}))},P.moveNodes=function(e,t,n){var i=this;return x(),m.zD().then((function(){var r=(0,m.Ih)(e),a=o()(t).map((function(e){return(0,m.Ih)(e)})).compact().value();return m.$4(r,a,n).then((function(){return i.refreshSections()}))})).finally((function(){return C()}))},Object.defineProperty(P,"theme",{get:function(){return o().isUndefined(this._theme)&&(this._theme=d.ZP.DEFAULT_THEME),this._theme},set:function(e){o().isUndefined(e)&&(e=d.ZP.DEFAULT_THEME),e!==this._theme&&(this._theme=e,_.themeChanged())}}),Object.defineProperty(P,"scripts",{get:function(){return this._scripts||[]},set:function(e){o().isString(e)&&(e=o().map(e.split("\n"),o().trim),e=o().compact(e)),o().isArray(e)?this._scripts=e:this._scripts=[],_.scriptsChanged()}}),Object.defineProperty(P,"suppressPageNumbering",{get:function(){return this._suppressPageNumbering},set:function(e){this._suppressPageNumbering=!0===e,_.suppressPageNumberingChanged()}}),Object.defineProperty(P,"hideMenu",{get:function(){return this._hideMenu},set:function(e){this._hideMenu=!0===e}}),Object.defineProperty(P,"allowGuideClose",{get:function(){return this._allowGuideClose},set:function(e){this._allowGuideClose=!0===e}}),Object.defineProperty(P,"useSubmitButtons",{get:function(){return this._useSubmitButtons},set:function(e){this._useSubmitButtons=!1!==e}}),Object.defineProperty(P,"useMarkAsComplete",{get:function(){return this._useMarkAsComplete},set:function(e){this._useMarkAsComplete=!1!==e}}),Object.defineProperty(P,"collapsedOnStart",{get:function(){return this._collapsedOnStart},set:function(e){this._collapsedOnStart=!0===e}}),Object.defineProperty(P,"hideSectionsToggle",{get:function(){return this._hideSectionsToggle},set:function(e){this._hideSectionsToggle=!0===e}}),Object.defineProperty(P,"hideBackToDashboard",{get:function(){return this._hideBackToDashboard},set:function(e){this._hideBackToDashboard=!0===e}}),Object.defineProperty(P,"protectLayout",{get:function(){return this._protectLayout},set:function(e){this._protectLayout=!0===e}}),Object.defineProperty(P,"lexikonTopic",{get:function(){return o().isUndefined(this._lexikonTopic)&&(this._lexikonTopic=""),this._lexikonTopic},set:function(e){o().isUndefined(e)&&(e=""),e!==this._lexikonTopic&&(this._lexikonTopic=e,_.lexikonTopicChanged())}});const E=new k},8450:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var i=n(96486),r=n.n(i),a=n(52308),s=n.n(a),o=n(49721),c=n(20294),l=n(93443),u=n(85886),d=n(55537),p=n(79703),f=n(21384),h=n(87167),m=n(95611),g=n(35402),v=n(99770),b=p.ZP.Tab,y=n(72523).aI;n(44830);var w=l.Z.create(n(10742)),_={title:"New Section",contentType:u._1},k=function(e){Z(this,e)},P=k.prototype;function Z(e,t){t=r().defaults(t,_),e._id=r().isUndefined(t.id)?c.ZP.GUID():t.id,e._readOnly=t.readOnly,e._pageId=t.pageId,e._title=t.title,e.actions=t.files,e.layout=t.layout,e.paths=t.path,e.type=t.type,e._contentType=t.contentType,e.teacherOnly=t.teacherOnly,e.closeTerminalSession=void 0===t.closeTerminalSession?!e.isCloseAll:t.closeTerminalSession,e.contentPath=t.contentFile||function(e,t){if(t&&e===u.ZP.CONTENT_TYPE_HTML)return t.htmlRelativePath;return null}(t.contentType,t.content),e.content=t.content,e.isFakeSection=t.isFakeSection,e.learningObjectives=t.learningObjectives,e._media=t.media}function x(e){var t,n=(t=e.title,c.ZP.path.escape(t)),i=u.ZP.GUIDES_CONTENT_FOLDER,r=(0,v.y2)(e.contentType);return[i,"/",n,"-",e.id.slice(0,4),".",r].join("")}function C(e,t){var n=s()("#content");return n.block(),g.zD().then((function(){var n=(0,g.Ih)(e.id);return n?g._Q(n,t).then((function(t){e.contentPath=t})):null})).finally((function(){return r().defer((function(){return n.unblock()}))}))}function S(e){if(e.isFakeSection)return Promise.resolve(new h.yO(""));if(e.content&&e.content.markdown)return Promise.resolve(new h.yO(e.content.markdown));if(r().isUndefined(e._contentPromise)){var t=Promise.resolve();e._contentPromise=t.then((function(){return function(e){var t=o.Z.currentProject;if(!t)return Promise.reject(new Error("No project"));if(!o.Z.currentProject.exists(e)){var n=c.ZP.path.parse(e),i=n.name,r=n.dir;return t.createFile(i,r).then((function(){return t.file(e)}))}return t.file(e)}(e.contentPath)})).then((function(t){return e.file=t,t.model}))}return e._contentPromise}function E(e,t,n){var i={open:[],close:[],isCloseAll:!1,isPaused:!1},a=e._media&&e._media.actions;return a?(i.open=r().concat(t.ide,t.terminal),a=r()(a).sortBy("time").filter((function(e){return e.time<=n})).value(),r().forEach(a,(function(e){if(e.tabType){var t=new b(e.tabType,e.content,e.panel,{ref:e.reference,lineCount:e.lines});if("open"===e.action)i.open.push(t);else{var n=p.ZP.findIndex(i.open,t,!0);-1!==n&&(t.type===b.TYPE.TERMINAL?i.open=r().filter(i.open,(function(e){return e.type!==b.TYPE.TERMINAL})):i.open.splice(n,1))}}else switch(e.type){case y.CLOSE_ALL:i.open=[],i.isCloseAll=!0;break;case y.PAUSE:i.isPaused=!0}})),i):i}P.setContentType=function(e){return this._contentType=e,C(this,e)},P.cleanup=function(){this.file&&this.file.close(),this.file=null},Object.defineProperty(P,"id",{get:function(){return this._id}}),Object.defineProperty(P,"readOnly",{get:function(){return this._readOnly}}),Object.defineProperty(P,"title",{get:function(){return this._title},set:function(e){this._title!==e&&(this._title=e,function(e){w.sectionUpdate({id:e.id},e),w.guidesUpdated({updated:[{id:e.id}]})}(this))}}),Object.defineProperty(P,"actions",{get:function(){return this._actions},set:function(e){e=function(e){return e=r().isArray(e)?e:[],r().forEach(e,(function(t,n){t instanceof d.Z||(e[n]=new d.Z(t))})),e}(e),this._actions=e}}),Object.defineProperty(P,"contentType",{get:function(){return this._contentType},set:function(e){this._contentType=e,C(this,e)}}),Object.defineProperty(P,"contentPath",{get:function(){return this._contentPath},set:function(e){r().isString(e)?this._contentPath=e:this._contentPath=x(this)}}),Object.defineProperty(P,"contentModel",{get:function(){return S(this)}}),Object.defineProperty(P,"layout",{get:function(){return this._layout},set:function(e){this._layout=e}}),Object.defineProperty(P,"learningObjectives",{get:function(){return r().isUndefined(this._learningObjectives)&&(this._learningObjectives=""),this._learningObjectives},set:function(e){r().isUndefined(e)&&(e=""),e!==this._learningObjectives&&(this._learningObjectives=e)}}),Object.defineProperty(P,"media",{get:function(){return this._media},set:function(e){this._media=e}}),Object.defineProperty(P,"paths",{get:function(){return this._paths},set:function(e){var t=[];r().isString(e)?r().map(e.split(";"),(function(e){(e=r().trim(e)).length>0&&t.push(e)})):r().isArray(e)&&(t=e),this._paths=t}}),Object.defineProperty(P,"json",{get:function(){return{id:this.id,title:this.title,files:(e=this.actions,r().map(e,"json")),layout:this.layout,path:this.paths,type:this.type,contentType:this.contentType,reset:this.reset,teacherOnly:this.teacherOnly,closeTerminalSession:this.closeTerminalSession,media:this.media,learningObjectives:this.learningObjectives,readOnly:this.readOnly};var e}}),Object.defineProperty(P,"isCloseAll",{get:function(){var e=!1,t=this.actions;return r().forEach(t,(function(t){if(t.isCloseAll)return e=!0,!1})),e}}),Object.defineProperty(P,"teacherOnly",{get:function(){return this._teacherOnly},set:function(e){this._teacherOnly=!0===e}}),P.setValue=function(e){var t=this;return this.contentModel.then((function(t){return t.setValue(e)})).then((function(){if(!(t.isFakeSection||t.content&&t.content.markdown))return m.Z.saveAllAndWait()}))},P.update=function(e){var t=!1;return e.title!==this.title&&(t=!0),Z(this,e),t},P.getTabs=function(){var e={open:[],close:[]},t=this.actions;return r().forEach(t,(function(t){var n=t.commands;r().forEach(n,(function(n){var i=new b(n.type,n.content,t.panel,{ref:t.ref,lineCount:t.lineCount});"open"===t.action?e.open.push(i):e.close.push(i)}))})),e},P.getMediaTabs=function(e,t,n){var i={map:{toOpen:[],toClose:[]},needCloseAll:!1,needPause:!1},r=E(this,e,t),a=E(this,e,n);return i.needCloseAll=t<n&&a.isCloseAll,i.needPause=t<n&&a.isPaused,r=f.Z.mergeTabs([],r.open,r.close),a=f.Z.mergeTabs([],a.open,a.close),i.map=p.ZP.diffTabs(r,a),i},P.save=function(){var e=this;return g.zD().then((function(){return g.Ym((0,g.Ih)(e.id),e.json),g.yl()}))};const I=k},50352:(e,t,n)=>{"use strict";n.d(t,{B5:()=>d,ZP:()=>p,wu:()=>u});var i=n(49721),r=n(76900),a=n(85886),s=n(96486),o=n.n(s),c=function(e){return e.teacherOnly?"":e.number.section+"."},l=function(e){return e===r.ZP.FREE_TEXT?"Submit Answer!":"Check It!"},u=function(){var e=i.Z.ide;return e.panels.isOpen(null,"guides")||e.panels.isOpen(null,"guides-edit")},d=function(e,t){var n,i;n=t===a.ZP.CONTENT_TYPE_HTML?/data-codio-assessment-output="(.*?)"/g:/\{.+?\|assessment\}\((.*?)\)/g;for(var r=[];null!==(i=n.exec(e));)r.push(i[1]);return o().uniq(r)};const p={generateTitleNumber:c,generateTitle:function(e,t){return(t?"":c(e)+" ")+e.title},generateAssessmentString:function(e,t){return"{"+(t=t||l(e.type))+"|assessment}("+e.taskId+")"},getDefaultButtonText:l,findAssessmentsIds:d}},18914:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var i=n(96486),r=n.n(i),a=n(52308),s=n.n(a),o=n(49721),c=n(97137),l=n(20294);const u=JSON.parse('{"type":"vertical","params":{"width":"100%","height":"100%","fixed":false},"children":[{"type":"single","params":{"width":"200px","height":"100%","focus":false,"canFocus":true,"fixed":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":0},"children":[{"type":"tab","params":{"ext":"filetree","active":true,"title":"Filetree"}}]}]}]}');var d={"1-panel":n(74607),"2-column":n(29681),"3-column":n(37196),"3-cell":n(29991),"3-cell-left":n(3074),"4-cell":n(2106)};function p(e){return r().cloneDeep(d[e])}function f(e){var t=p(e),n=t.children[0];return t.children=[r().cloneDeep(u)],t.children[0].children.push(n),t}const h={"1-panel-tree":{template:f("1-panel"),panels:[[0,1,0],[0,0,0]],guidesPanel:0,defaultFilesPanel:0,name:"1 Panel with tree"},"1-panel":{template:p("1-panel"),panels:[[0,0]],guidesPanel:0,defaultFilesPanel:0,name:"1 Panel without tree"},"2-panels-tree":{template:f("2-column"),panels:[[0,1,0,0],[0,1,1,0],[0,0,0,0]],guidesPanel:1,defaultFilesPanel:0,name:"2 Panels with tree"},"2-panels-tree-guides-left":{template:f("2-column"),panels:[[0,1,0,0],[0,1,1,0],[0,0,0,0]],guidesPanel:0,defaultFilesPanel:1,name:"2 Panels with tree (Guides Left)"},"2-panels":{template:p("2-column"),panels:[[0,0,0],[0,1,0]],guidesPanel:1,defaultFilesPanel:0,name:"2 Panels without tree"},"2-panels-guides-left":{template:p("2-column"),panels:[[0,0,0],[0,1,0]],guidesPanel:0,defaultFilesPanel:1,name:"2 Panels without tree (Guides Left)"},"3-columns-tree":{template:f("3-column"),panels:[[0,1,0,0,0],[0,1,0,1,0],[0,1,1,0],[0,0,0,0]],guidesPanel:2,defaultFilesPanel:0,name:"3 Columns with tree"},"3-columns-tree-guides-left":{template:f("3-column"),panels:[[0,1,0,0,0],[0,1,0,1,0],[0,1,1,0],[0,0,0,0]],guidesPanel:0,defaultFilesPanel:1,name:"3 Columns with tree (Guides Left)"},"3-columns":{template:p("3-column"),panels:[[0,0,0,0],[0,0,1,0],[0,1,0]],guidesPanel:2,defaultFilesPanel:0,name:"3 Columns without tree"},"3-columns-guides-left":{template:p("3-column"),panels:[[0,0,0,0],[0,0,1,0],[0,1,0]],guidesPanel:0,defaultFilesPanel:1,name:"3 Columns without tree (Guides Left)"},"3-cell-tree":{template:f("3-cell"),panels:[[0,1,0,0,0],[0,1,0,1,0],[0,1,1,0],[0,0,0,0]],guidesPanel:2,defaultFilesPanel:0,name:"3 Panels with tree"},"3-cell-tree-guides-left":{template:f("3-cell-left"),panels:[[0,1,0,0],[0,1,1,0,0],[0,1,1,1,0],[0,0,0,0]],guidesPanel:0,defaultFilesPanel:1,name:"3 Panels with tree (Guides Left)"},"3-cell":{template:p("3-cell"),panels:[[0,0,0,0],[0,0,1,0],[0,1,0],[0,0,0,0]],guidesPanel:2,defaultFilesPanel:0,name:"3 Panels without tree"},"3-cell-left":{template:p("3-cell-left"),panels:[[0,0,0],[0,1,0,0],[0,1,1,0]],guidesPanel:0,defaultFilesPanel:1,name:"3 Panels without tree (Guides Left)"},"4-cell-tree":{template:f("4-cell"),panels:[[0,1,0,0,0,0],[0,1,0,0,1,0],[0,1,0,1,0,0],[0,1,0,1,1,0],[0,0,0,0]],guidesPanel:1,defaultFilesPanel:0,name:"4 Panels with tree"},"4-cell-tree-guides-left":{template:f("4-cell"),panels:[[0,1,0,0,0,0],[0,1,0,0,1,0],[0,1,0,1,0,0],[0,1,0,1,1,0],[0,0,0,0]],guidesPanel:0,defaultFilesPanel:1,name:"4 Panels with tree (Guides Left)"},"4-cell":{template:p("4-cell"),panels:[[0,0,0,0,0],[0,0,0,1,0],[0,0,1,0,0],[0,0,1,1,0],[0,0,0,0]],guidesPanel:1,defaultFilesPanel:0,name:"4 Panels without tree"},"4-cell-guides-left":{template:p("4-cell"),panels:[[0,0,0,0,0],[0,0,0,1,0],[0,0,1,0,0],[0,0,1,1,0],[0,0,0,0]],guidesPanel:0,defaultFilesPanel:1,name:"4 Panels without tree (Guides Left)"}};var m=n(93443),g=n(79703),v=n(33732).xv,b=m.Z.create(n(10742)),y=g.ZP.Tab;n(44041);var w=[];function _(e,t){var n=e.panels[e.guidesPanel];0===t&&(t=""),k(e.template,n).children.push({type:"tab",params:{ext:"guides",active:!0,filename:""+t}})}function k(e,t){var n=e;return r().each(t,(function(e){if(r().isUndefined(n))return!1;n=n.children[e]})),n}function P(e,t){var n=h[e];return r().isUndefined(n)?[]:(_(n=r().cloneDeep(n),t),n)}function Z(e,t){if(!r().isUndefined(e)){var n=t;r().isUndefined(n)&&(n=e.defaultFilesPanel||0);var i=r().clone(e.panels[n]);if(!r().isUndefined(i)){var a=o.Z.ide.panels;i.pop();var s=k(a.child,i);return s.open?s:void 0}}}function x(e,t,n,i){var a=t.getSectionTabs(n),o=t.getSection(n),u=a.ssh,d=a.terminal,p=g.ZP.buildMap(t,i,n);s()("div.ac").showFProgress("Please wait...");var f=[];r().forEach(u,(function(e){f.push(v.run(e.content))}));var h=Promise.all(f);return f.length>0&&(h=h.then(l.ZP.delay.bind(null,2e3))),h.catch((function(){c.Z.info("Prepare step fails.")})).finally((function(){var t=Z.bind(null,e),n=Promise.resolve();return o.isCloseAll&&(n=C(t).then((function(){if(0===d.length||o.closeTerminalSession)return new y("terminal").close(t)}))),n.then((function(){var e=r().map(p.toClose,(function(e){return e.close(t)}));return Promise.all(e)})).then((function(){var e=r().map(p.toOpen,(function(e){return e.open(t,!0)}));return Promise.all(e)})).then((function(){return Promise.all(r().map(d,(function(e){return o.isCloseAll&&o.closeTerminalSession&&(e.isCloseAll=o.isCloseAll),e.open(t,!0)})))})).then((function(){s()("div.ac").hideFProgress()})).catch(l.ZP.error.checkErrorForIgnore)}))}function C(e){e=e||e(E());var t=r().map(w,(function(t){return t.close(e)}));return Promise.all(t)}function S(){b.layoutApplied()}function E(){return h[T()]}function I(){}function T(){return function(){if(!o.Z.ide.panels.child)return null;var e=o.Z.ide.panels.child.serialize(),t=r().cloneDeep(h);return r().each(t,(function(e,t){_(e,0),e.name=t})),r().findKey(t,D.bind(null,e))}()}function j(e){return e&&e.params&&"guides"===e.params.ext}function A(e,t){if(r().isUndefined(e)||r().isUndefined(t))return!1;if(e.type!==t.type)return!1;if("tabs"===e.type)return r().some(e.children,j)===r().some(t.children,j);if(e.children.length===t.children.length){for(var n=0;n<e.children.length;n++){if(!1===A(e.children[n],t.children[n]))return!1}return!0}return!1}function O(e){return!!("tab"===e.type&&e.params&&"filetree"===e.params.ext||e.children&&r().some(e.children,O))}function D(e,t){var n=t.template;return A(e,n)&&O(e)===O(n)}r().each(["command:ide:panel_close","command:ide:panel","command:ide:panel_split_vertical","command:ide:panel_split_horizontal","command:ide:layout_2_rows","command:ide:layout_default","command:ide:layout_showcase","command:ide:layout_2_rows"],(function(e){m.Z.subscribe(e,I)}));const N={reset:I,build:P,set:function(e,t,n,i){var a=e.getLayout(t),s=T();if(r().isUndefined(a)||r().isUndefined(h[a])){if(r().isUndefined(s))return x(void 0,e,t,n).then(S),!1;a=s}return i&&!r().includes(a,"-tree")&&(a+="-tree"),s!==a?(r().defer((function(){(function(e){return o.Z.ide.panels.setLayout(e).then((function(){return o.Z.ide.panels.updateUrl(null,null)}))})(P(a,t).template).then(S)})),!0):(x(h[s],e,t,n).then(S),!1)},getLayout:E,defs:h,run:function(e){r().isArray(e)||(e=[e]);var t=T(),n=Z.bind(null,h[t]);r().each(e,(function(e){var t=e.action,i=e.command,a=r().pick(t,["ref","lineCount"]),s=new y(i.type,i.content,t.panel,a);"open"===t.action?(w.push(s),s.open(n)):s.close(n).catch(l.ZP.error.checkErrorForIgnore)}))},closeAllTabs:C,getPanel:Z,getPlayerPanel:function(){var e=T();if(!r().isUndefined(e)&&r().isObject(h[e]))return Z(h[e],h[e].guidesPanel)},getLayoutInfo:function(e,t,n){var i=E(),a=e.getSectionTabs(n),s=g.ZP.buildMap(e,t,n),o=r().map([].concat(s.toOpen,a.terminal,a.ssh),(function(e){return{type:e.type,panelNumber:e.panelNumber,content:e.content}}));return{layout:i&&i.name?i.name:void 0,opened:o}},close:function(){w=[]},getCurrentLayout:T}},44041:(e,t,n)=>{"use strict";n.r(t);var i=n(96486),r=n.n(i),a=n(49721),s=n(93443),o=n(34335),c=n(20294),l=n(68058).I_,u=s.Z.create(n(10742)),d=s.Z.createSync(n(57066));function p(){return a.Z.currentProject.guid+":guides_editor_layout"}function f(){return l.get(p())}function h(){var e=a.Z.ide.panels.serialize();f()||l.set(p(),e);var t=m(e),n=r().toFinite(t&&t.params&&t.params.filename||0),i=a.Z.ide.panels,s=i.isOpen(null,"guides")||i.isOpen(null,"guides-edit");(s?s.beforeClose():Promise.resolve()).then((function(){return a.Z.ide.panels.resetLayout()})).then((function(){return o.Z.setStep(n)})).then((function(){u.play()})).catch(c.ZP.error.checkErrorForIgnore)}function m(e){if(e&&e.params&&"guides-edit"===e.params.ext)return e;if(e&&r().isArray(e.children))for(var t=0,n=e.children.length;t<n;t++){var i=m(e.children[t]);if(i)return i}}function g(){f()&&o.Z.getStep().then((function(e){e=e||0;var t=l.get(p());l.remove(p());var n=function(e,t){var n=m(t);return e=r().toString(e),!(!n||r().isEmpty(e)||(n.params.filename=e,0))}(e,t);a.Z.ide.panels.setLayout(t).then((function(){d.hideSwitchToEdit(),n||u.edit({step:e})}))}))}function v(){if(f())g();else{var e=a.Z.ide.panels.isOpen(void 0,"guides");e&&e.panel.closeTab(e).catch(c.ZP.error.checkErrorForIgnore),u.edit()}}s.Z.subscribe("command:guides:pre_edit",v),s.Z.subscribe("command:guides:pre_play",(function(){var e=a.Z.ide.panels.isOpen(null,"guides");a.Z.currentProject.eduStartedAssignmentInfo||e?u.play():h()})),s.Z.subscribe("command:guides:preview",h),s.Z.subscribe("command:guides:back_to_edit",v),s.Z.subscribe("guides:player:open",(function(){f()&&d.showSwitchToEdit();var e=a.Z.ide.panels.isOpen(null,"guides-edit");e&&e.panel.closeTab(e).catch(c.ZP.error.checkErrorForIgnore)})),s.Z.subscribe("guides:player:close_rendered",g)},72523:(e,t,n)=>{"use strict";n.d(t,{Cs:()=>s,Tb:()=>o,UP:()=>l,Yn:()=>r,aI:()=>a,vK:()=>i,w_:()=>c});var i={AUDIO:"audio",VIDEO:"video"},r=".guides/media",a={FILE_OPEN:"file_open",FILE_CLOSE:"file_close",RUN_COMMAND:"run_command",TERMINAL_OPEN:"terminal_open",TERMINAL_CLOSE:"terminal_close",HIGHLIGHT:"highlight",CLOSE_ALL:"close_all",PAUSE:"pause"},s=["mp3","ogg"],o=31457280,c={ac3:"audio/ac3",mp3:"audio/mp3",mp4:"audio/mp4",ogg:"audio/ogg"},l=[{label:"Open file",value:a.FILE_OPEN},{label:"Close file",value:a.FILE_CLOSE},{label:"Open terminal",value:a.TERMINAL_OPEN},{label:"Close terminal",value:a.TERMINAL_CLOSE},{label:"Run command",value:a.RUN_COMMAND},{label:"Highlight",value:a.HIGHLIGHT},{label:"Close all tabs",value:a.CLOSE_ALL},{label:"Pause",value:a.PAUSE}]},38524:(e,t,n)=>{"use strict";function i(e,t,n){for(var i,r,a,s=t,o=e.posMax,c=0,l=!1;t<o;){if(127===(i=e.src.charCodeAt(t))||41===i){if(0===c&&!a){l=!0;break}a||c--}else if(40===i)c++;else if(a||34!==i&&39!==i){if(i===a)a=void 0;else if(10===i)break}else a=i;t++}return!(s===t||!l)&&(!!n(r=e.src.slice(s,t))&&(e.linkContent=r,e.pos=t,!0))}function r(e){return 0===e.indexOf("open_")||0===e.indexOf("close_")||0===e.indexOf("cmd ")}function a(e,t){var n,a,s,o,c,l=e.pos,u=e.posMax,d=e.pos;if(91!==e.src.charCodeAt(d))return!1;if(e.level>=e.options.maxNesting)return!1;if(n=d+1,a=function(e,t){var n,i,r,a=-1,s=e.posMax,o=e.pos,c=e.isInLabel;if(e.isInLabel)return-1;if(e.labelUnmatchedScopes)return e.labelUnmatchedScopes--,-1;for(e.pos=t+1,e.isInLabel=!0,n=1;e.pos<s;){if(91===(r=e.src.charCodeAt(e.pos)))n++;else if(93===r&&0==--n){i=!0;break}e.parser.skipToken(e)}return i?(a=e.pos,e.labelUnmatchedScopes=0):e.labelUnmatchedScopes=n-1,e.pos=o,e.isInLabel=c,a}(e,d),a<0)return!1;if(!((o=a+1)<u&&40===e.src.charCodeAt(o)))return!1;for(o++;o<u&&(32===(c=e.src.charCodeAt(o))||10===c);o++);if(o>=u)return!1;for(i(e,o,r)?(s=e.linkContent,o=e.pos):s="";o<u&&(32===(c=e.src.charCodeAt(o))||10===c);o++);return o>=u||41!==e.src.charCodeAt(o)?(e.pos=l,!1):(o++,(0===s.indexOf("open_")||0===s.indexOf("close_")||0===s.indexOf("cmd "))&&(t||(e.pos=n,e.posMax=a,e.push({type:"codio_link_open",href:s,title:e.src.substr(n,a-n),level:e.level++}),e.linkLevel++,e.parser.tokenize(e),e.linkLevel--,e.push({type:"codio_link_close",level:--e.level})),e.pos=o,e.posMax=u,!0))}function s(e,t){var n=e[t],i=n.href,r=n.title;return'<codio-link cmd="'.concat(encodeURI(i),'" caption="').concat(encodeURI(r||i),'">')}function o(){return"</codio-link>"}function c(e){e.inline.ruler.before("links","codio_link",a),e.renderer.rules.codio_link_open=s,e.renderer.rules.codio_link_close=o}n.d(t,{KX:()=>g,LI:()=>T,CN:()=>c,mO:()=>y});var l=n(73687),u="|||",d="codio-";function p(e,t){var n=e.bMarks[t]+e.blkIndent,i=e.eMarks[t];return e.src.substr(n,i-n)}function f(e,t,n,i){var r=p(e,t);if(0!==(r=r.trim()).indexOf(u))return!1;if(i)return!0;var a,s=r.replace(u,"").replace(" ","");if(e.level>=e.options.maxNesting)return!1;for(a=t+1;a<n&&0!==p(e,a).indexOf(u);a++);if("guidance"===s&&!l.ZP.showAsTeacher())return e.line=a+1,!0;var o=e.parentType;return e.parentType="codio_block",e.tokens.push({type:"codio_block_open",lines:[t,a],level:e.level++,tight:!1,block_type:s}),e.parser.tokenize(e,t+1,a),e.line=a+1,e.tokens.push({type:"codio_block_close",level:--e.level,tight:!1}),e.parentType=o,!0}function h(e,t,n){var i=t[n].block_type;0===i.length&&(i="definition");var r=d+i;return'<div data-line="'+t[n].lines[0]+'" class="'+r+' codio-md-line">'}function m(e,t,n){return"</div>"+e(t,n)}function g(e){e.block.ruler.before("paragraph","codio_block",f,{alt:["paragraph"]});var t=e.renderer.getBreak;e.renderer.rules.codio_block_open=h.bind(null,t),e.renderer.rules.codio_block_close=m.bind(null,t)}function v(e,t){var n,i,r=e.posMax,a=e.pos,s=!1;if(36!==e.src.charCodeAt(a))return!1;for(n=a+1,36===e.src.charCodeAt(n)&&(s=!0,n++);n<r;){if(s&&36===e.src.charCodeAt(n)&&36===e.src.charCodeAt(n+1)){i=n+2;break}if(!s&&36===e.src.charCodeAt(n)){i=n+1;break}n++}return!!i&&(t||(e.pos=a,e.posMax=i,e.push({type:"codio_mathjax",data:e.src.substr(a,i-a),level:e.level})),e.pos=i,e.posMax=r,!0)}function b(e,t,n){return function(e,t){if(!t||"codio_mathjax"!==t.type)return;if(e)return'<span className="mathjax">'+t.data+"</span>";var n=window.escape(t.data);return'<MathJax data="'+n+'" />'}(e,t[n])}function y(e,t){e.inline.ruler.before("text","codio_mathjax",v),e.renderer.rules.codio_mathjax=b.bind(null,t.noReact)}var w=n(96486),_=n.n(w),k=n(177),P=n.n(k),Z=n(20294);var x=P().compile("%%%button|assessment|{{idText}}|{{href}}|{{type}}|{{cap}}|{{assessmentType}}%%%\n"),C=P().compile("%%%button|codio|{{idText}}|{{href}}|{{type}}|{{cap}}%%%\n");function S(){return!0}function E(e,t){var n,r,a,s,o,c=e.pos,l=e.posMax,u=e.pos;if(123!==e.src.charCodeAt(u))return!1;if(e.level>=e.options.maxNesting)return!1;if(n=u+1,r=function(e,t){var n,i,r,a=-1,s=e.posMax,o=e.pos,c=e.isInLabel;if(e.isInLabel)return-1;if(e.labelUnmatchedScopes)return e.labelUnmatchedScopes--,-1;for(e.pos=t+1,e.isInLabel=!0,n=1;e.pos<s;){if(123===(r=e.src.charCodeAt(e.pos)))n++;else if(125===r&&0==--n){i=!0;break}e.parser.skipToken(e)}return i?(a=e.pos,e.labelUnmatchedScopes=0):e.labelUnmatchedScopes=n-1,e.pos=o,e.isInLabel=c,a}(e,u),r<0)return!1;if(!((s=r+1)<l&&40===e.src.charCodeAt(s)))return!1;for(s++;s<l&&(32===(o=e.src.charCodeAt(s))||10===o);s++);if(s>=l)return!1;for(u=s,i(e,s,S)?(a=e.linkContent,s=e.pos):a="",u=s;s<l&&(32===(o=e.src.charCodeAt(s))||10===o);s++);if(s>=l||41!==e.src.charCodeAt(s))return e.pos=c,!1;if(s++,!t){e.pos=n,e.posMax=r;var d=function(e){var t=e.split("|");if(1===t.length)return{label:e,type:"normal"};return{label:_().trim(t[0]),type:_().trim(t[1])}}(e.src.substr(n,r-n));e.push({type:"codio_button",href:a,title:d.label,button_type:d.type,level:e.level})}return e.pos=s,e.posMax=l,!0}function I(e,t){return function(e){if(!e||"codio_button"!==e.type)return;var t=e.href,n=e.title||"";0===n.length&&(n=t);t=_().trim(t);var i=e.button_type,r=Z.ZP.hashCode(t+i,!0);return function(e,t,n,i,r){var a="assessment"===e?x:C,s="";if("assessment"===e){var o=i.split("-"),c=o[0];"free"===c&&o.length>3&&(c=o[0]+"-"+o[1]+"-"+o[2]),s="codio-challenge-"+c}return a({idText:t,href:i,cap:r,assessmentType:s,type:e})}(i,r,0,t,n)}(e[t])}function T(e){e.inline.ruler.before("links","codio_button",E),e.renderer.rules.codio_button=I}},51267:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>be,F8:()=>ve});var i=n(15861),r=n(87757),a=n.n(r),s=n(52308),o=n.n(s),c=n(96486),l=n.n(c),u=n(177),d=n.n(u),p=n(49721),f=n(20294),h=n(18914),m=n(38260),g=n(85099),v=n(8246);const b='<li class="file-elem" data-action="{{action}}">\n  <a href="javascript:void(0)" class="remove-btn" aria-label="Remove Tab" title="Remove Tab">\n    <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n  </a>\n  <div class="file-input-body list-item-body">\n    <div class="input-switch-type">\n      <label for="action-{{index}}">Type</label>\n      <input class="file-type" type="hidden" name="action-{{index}}" value="{{type}}">\n\n      <div class="btn-group switch-file-type">\n        <a class="dropdown-toggle" data-toggle="dropdown" href="#">\n          <i class="ss-icon current-file-type">\n            {{#equals type \'file\'}}textfile{{/equals}}\n            {{#equals type \'preview\'}}eye{{/equals}}\n            {{#equals type \'terminal\'}}computer{{/equals}}\n            {{#equals type \'highlight\'}}quote{{/equals}}\n            {{#equals type \'tutor\'}}binoculars{{/equals}}\n            {{#equals type \'vm\'}}weatheronline{{/equals}}\n            {{#equals type \'vmssh\'}}browseonline{{/equals}}\n          </i>\n          <i class="ss-icon ss-dropdown"></i>\n        </a>\n        <ul class="dropdown-menu" role="menu">\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="file">\n              <i class="ss-icon">textfile</i> File\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="preview">\n              <i class="ss-icon">eye</i> Preview\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="terminal">\n              <i class="ss-icon">computer</i> Terminal\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="highlight">\n              <i class="ss-icon">quote</i> Highlight\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="tutor">\n              <i class="ss-icon">binoculars</i> Visualizer\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="vm">\n              <i class="ss-icon">weatheronline</i> VM\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="vmssh">\n              <i class="ss-icon">browseonline</i> VM SSH Terminal\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <div class="input-container">\n      {{guidesTemplate type this}}\n    </div>\n  </div>\n</li>\n',y='<section class="args">\n  <label for="arg">Filename</label>\n  <input type="text" name="arg" value="{{arg}}" placeholder="index.html">\n</section>\n<section class="panel">\n  <label for="panel">Panel</label>\n  <input type="text" name="panel" value="{{panel}}">\n</section>\n',w='<section class="args">\n  <label for="arg">Url</label>\n  <input type="text" name="arg" value="{{arg}}" placeholder="https://my-site.com/index.html">\n</section>\n<section class="panel">\n  <label for="panel">Panel</label>\n  <input type="text" name="panel"  value="{{panel}}">\n</section>\n',_='<section class="args">\n    <label for="arg">Filename</label>\n    <input type="text" name="arg" value="{{arg}}" placeholder="index.js">\n</section>\n<section class="panel">\n    <label for="panel">Panel</label>\n    <input type="text" name="panel"  value="{{panel}}">\n</section>\n',k='<section class="panel">\n    <label for="panel">Panel</label>\n    <input type="text" name="panel"  value="{{panel}}">\n</section>\n',P='<section class="panel">\n    <label for="panel">Panel</label>\n    <input type="text" name="panel"  value="{{panel}}">\n</section>\n',Z='<section class="args">\n  <label for="arg">Command</label>\n  <input type="text" name="arg" value="{{arg}}" placeholder="ls">\n</section>\n<section class="panel">\n  <label for="panel">Panel</label>\n  <input type="text" name="panel"  value="{{panel}}">\n</section>\n',x='<section class="args">\n  <label for="arg">Filename</label>\n  <input type="text" name="arg" value="{{arg}}" placeholder="index.html">\n</section>\n<section class="args">\n  <label for="arg">Reference</label>\n  <input type="text" name="ref" value="{{ref}}" placeholder="my-marker">\n</section>\n<section class="panel">\n  <label for="panel"># Lines</label>\n  <input type="text" name="line-count" placeholder="1" value="{{lineCount}}">\n</section>\n<section class="panel">\n  <label for="panel">Panel</label>\n  <input type="text" name="panel" value="{{panel}}">\n</section>\n';var C=n(99393);var S=n(47380);var E=n(80470);var I=n(11359);const T='<form id="execution_form" class="form form--simple" action="/">\n  {{#if source.libraryId}}\n  <input type="hidden" id="libraryId" value="{{source.libraryId}}" readonly />\n  {{#if source.permissions}}\n    <p>Search will be executed into <strong id="random-assessment-library-name">{{source.libraryName}}</strong> Library</p>\n  {{else}}\n    <h3>You have no access to the {{source.libraryName}} library</h3>\n  {{/if}}\n  <div class="tags-container">\n    <div class="tags-header">\n      <div class="tag-name-header">\n        <label class="form-label">Tag name</label>\n      </div>\n      <div class="tag-value-header">\n        <label class="form-label">Tag value</label>\n      </div>\n    </div>\n    <ul class="tags-list">\n      {{#each source.search}}\n      <li class="tag-item">\n        <div class="tag-name">\n          <input\n            name="tag_name"\n            type="text"\n            value="{{this.name}}"\n            class="js-tag tag-name-input"\n            readonly\n          />\n        </div>\n        <div class="tag-value">\n          <input\n            name="tag_value"\n            type="text"\n            value="{{this.value}}"\n            class="js-value tag-value-input"\n            readonly\n          />\n        </div>\n      </li>\n      {{/each}}\n    </ul>\n  </div>\n  <button\n    type="button"\n    class="btn btn--primary"\n    id="browse-library-assessments"\n  >\n    Update search\n  </button>\n  {{else}}\n  <button\n    type="button"\n    class="btn btn--primary"\n    id="browse-library-assessments"\n  >\n    Browse assessments\n  </button>\n  {{/if}}\n</form>\n',j='<div class="tag-value-controls">\n  <i class="ss-icon input-icon">search</i>\n  <input type="search" name="tag-field" class="js-tag js-typeahead" placeholder="Tag..." aria-label="Tag">\n  <i class="ss-icon input-icon">search</i>\n  <input type="search" name="value-field" class="js-value js-typeahead" placeholder="Value..." aria-label="Value">\n  <button type="button" class="btn tag-action-btn add-tag"><i class="ss-icon">plus</i></button>\n</div>\n',A='{{#if searches}}\n{{#each searches}}\n<li class="favorites-item-container" data-index="{{@index}}" role="menuitem">\n  <a class="favorites-item" href="javascript:void(0)">{{this.name}}</a>\n  <i class="ss-icon icon-delete-search" title="Remove search" aria-label="Remove search">close</i>\n</li>\n{{/each}}\n{{else}}\n<li class="favorites-item-container" role="menuitem"><a class="favorites-item" href="javascript:void(0)" data-index="-1">No saved searches</a></li>\n{{/if}}\n';const O=function(){v.Z.registerPartial("fileInput",b),v.Z.registerPartial("input-args-file",y),v.Z.registerPartial("input-args-preview",w),v.Z.registerPartial("input-args-tutor",_),v.Z.registerPartial("input-args-vm",k),v.Z.registerPartial("input-args-vmssh",P),v.Z.registerPartial("input-args-terminal",Z),v.Z.registerPartial("input-args-highlight",x),v.Z.registerPartial("assessmentListItem",'<li class="assessments-list-item {{#unless usageInfo}}unused{{/unless}}" data-taskid="{{taskId}}">\n  <a\n    href="javascript:void(0)"\n    class="remove-btn {{#if usageInfo}}qtip-here disabled{{/if}}"\n    {{#if usageInfo}}title="Can not be removed while used in guides"{{else}}title="Remove assessment"{{/if}}\n  >\n    <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n  </a>\n  <div class="assessments-list-item-points" id="points-input">\n      <input\n          class="assessments-list-item-points-input"\n          aria-labelledby="points-input"\n          type="number"\n          min="0"\n          max="1000"\n          value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n      />\n  </div>\n\n  <div class="list-item-body">\n    <a href="javascript:void(0)" class="assessments-list-item-link">\n      {{#if linkedId}}\n      <i class="ss-icon assessment-list-item-icon"\n        {{#if source.libraryName}}title="Linked with \'{{source.libraryName}}\' Library"{{/if}}\n      >link</i>\n      {{/if}}\n      {{#equals type \'random\'}}<i class="ss-icon assessment-list-item-icon">search</i>{{/equals}}\n      <span class="item-name">{{source.name}} ({{taskId}})</span>\n    </a>\n    {{#if usageInfo}}\n    <a\n      href="javascript:void(0)"\n      class="assessments-list-item-action assessments-list-item-goto qtip-here"\n      title="Go to definition"\n    >\n      <i class="ss-icon">navigate</i>\n    </a>\n    {{else}}\n    <button class="btn assessments-list-item-add" aria-label="Add assessment to the page">\n      Add to the page\n    </button>\n    {{/if}}\n  </div>\n</li>\n'),v.Z.registerPartial("answerItem",C),v.Z.registerPartial("ribbonEditorWithPreview",'<div class="guides-editor-with-preview">\n    <a href="javascript:void(0)" class="preview-button"><i class="ss-icon">view</i></a>\n    <div class="guides-editor-with-preview-container">\n        <div class="assessments-ribbon-panel"></div>\n        <div class="assessments-ribbon-editor"></div>\n        <textarea class="hide guides-editor-with-preview-container-textarea preview-field-with-content large-text-area" placeholder="{{placeholder}}" id="{{id}}" rows="8"></textarea>\n    </div>\n    <div class="preview-container">preview content</div>\n</div>\n'),v.Z.registerPartial("aEditorNavigation",'<div class="navigation-container">\n  <ul class="navigation-list">\n    <li class="navigation-item" data-id="general_form">General</li>\n    <li class="navigation-item" data-id="execution_form">Execution</li>\n    <li class="navigation-item" data-id="grading_form">Grading</li>\n    <li class="navigation-item" data-id="parameters_form">Parameters</li>\n    <li class="navigation-item" data-id="metadata_form">Metadata</li>\n    <li class="navigation-item" data-id="files_form">Files</li>\n  </ul>\n</div>\n'),v.Z.registerPartial("aEditorFooter",'<div id="errors-container"></div>\n<footer class="assessment-editor-footer">\n  <div class="main-buttons">\n    <button type="button" class="btn cancel-btn">Cancel</button>\n    <button type="button" class="btn btn--primary submit-btn">{{#if taskId}}Save{{else}}Create{{/if}}</button>\n  </div>\n  <div class="additional-buttons library-buttons">\n    {{#if linkedId}}<button type="button" class="btn disconnect-btn">Disconnect</button>{{/if}}\n    <button\n      type="button"\n      class="btn save-in-library {{#if outdated}}outdated{{/if}}"\n    >{{#if linkedId}}Update{{else}}Save{{/if}} in Library</button>\n  </div>\n</footer>\n'),v.Z.registerPartial("aEditorTagItem",S),v.Z.registerPartial("aEditorTags",'<div class="tags-container">\n  {{#unless readOnly}}\n  <div class="tag-actions">\n    <button class="btn add-tag-btn" type="button">Add tag</button>\n  </div>\n  {{/unless}}\n  <div class="tags-header">\n    <div class="tag-actions"></div>\n    <div class="tag-name-header">\n      <label class="form-label">Tag name</label>\n    </div>\n    <div class="tag-value-header">\n      <label class="form-label">Tag value</label>\n    </div>\n  </div>\n  <ul class="tags-list">\n    {{> aEditorTagItem}}\n  </ul>\n</div>\n'),v.Z.registerPartial("aEditorAnswerRationale",'<div class="form-fieldset">\n  <label class="form-label">Show Rationale to Student</label>\n  <label class="form-label">\n    <input\n      class="show-guidance-type-input"\n      type="radio"\n      name="showGuidanceAfterResponseOption"\n      value="Never"\n      {{#exists source.showGuidanceAfterResponseOption}}\n        {{#equals source.showGuidanceAfterResponseOption.type "Never"}}checked{{/equals}}\n      {{else}}\n        checked\n      {{/exists}}\n    > Never\n  </label>\n\n  <label class="form-label">\n    <input\n      value="Attempts"\n      class="show-guidance-type-input"\n      type="radio"\n      name="showGuidanceAfterResponseOption"\n      {{#equals source.showGuidanceAfterResponseOption.type "Attempts"}}checked{{/equals}}/>\n    After\n    <input type="number" min="0" max="100" class="show-guidance-passed-input" id="show-guidance-passed-input-attempts"\n      {{#equals source.showGuidanceAfterResponseOption.type "Attempts"}}\n        {{#exists source.showGuidanceAfterResponseOption.passedFrom}}\n          value="{{source.showGuidanceAfterResponseOption.passedFrom}}"\n        {{else}}\n          value="1"\n        {{/exists}}\n      {{else}}\n        value="1"\n      {{/equals}}\n    />\n    attempts\n  </label>\n\n  <label class="form-label">\n    <input\n      value="Score"\n      class="show-guidance-type-input"\n      type="radio"\n      name="showGuidanceAfterResponseOption"\n      {{#equals source.showGuidanceAfterResponseOption.type "Score"}}checked{{/equals}}/>\n    Score is greater than or equal to\n    <input type="number" min="0" max="100" class="show-guidance-passed-input" id="show-guidance-passed-input-score"\n      {{#equals source.showGuidanceAfterResponseOption.type "Score"}}\n        {{#exists source.showGuidanceAfterResponseOption.passedFrom}}\n          value="{{source.showGuidanceAfterResponseOption.passedFrom}}"\n        {{else}}\n          value="60"\n        {{/exists}}\n      {{else}}\n        value="60"\n      {{/equals}}\n    />&nbsp;%\n  </label>\n\n  <label class="form-label">\n    <input\n      value="Always"\n      class="show-guidance-type-input"\n      name="showGuidanceAfterResponseOption"\n      type="radio"\n      {{#equals source.showGuidanceAfterResponseOption.type "Always"}}checked{{/equals}}/> Always\n  </label>\n</div>\n<div class="form-fieldset form-fieldset--large preview-area-container">\n  <label class="form-label">Rationale</label>\n  {{> ribbonEditorWithPreview id=\'guidance\' placeholder=\'\'}}\n</div>\n\n'),v.Z.registerPartial("aEditorNumberOfAttempts",'<div class="form-fieldset">\n  <label class="form-label" for="set_number_of_attempts">Defined number of attempts</label>\n  <label class="toggle">\n    <input type="checkbox" id="set_number_of_attempts" {{#if source.maxAttemptsCount}}checked{{/if}}/>\n    <span class="toggle-label"></span>\n    <span class="toggle-handle"></span>\n  </label>\n  <input\n    type="number"\n    min="1"\n    max="100"\n    class="number-of-attempts-input {{#unless source.maxAttemptsCount}}hide{{/unless}}"\n    id="max_attempts_count"\n    value="{{#if source.maxAttemptsCount}}{{source.maxAttemptsCount}}{{ else }}1{{/if}}"\n    aria-label="Max attempts count"\n  />\n</div>\n'),v.Z.registerPartial("aEditorObjectives",'<div class="form-fieldset">\n  <label class="form-label" for="blooms">Bloom\'s level</label>\n  <select id="blooms">\n    <option value="" {{#unless source.bloomsObjectiveLevel}}selected="true"{{/unless}}></option>\n    <option value=1 {{#equals source.bloomsObjectiveLevel \'1\'}}selected="true"{{/equals}}>Level I - Remembering</option>\n    <option value=2 {{#equals source.bloomsObjectiveLevel \'2\'}}selected="true"{{/equals}}>Level II - Understanding</option>\n    <option value=3 {{#equals source.bloomsObjectiveLevel \'3\'}}selected="true"{{/equals}}>Level III - Applying</option>\n    <option value=4 {{#equals source.bloomsObjectiveLevel \'4\'}}selected="true"{{/equals}}>Level IV - Analyzing</option>\n    <option value=5 {{#equals source.bloomsObjectiveLevel \'5\'}}selected="true"{{/equals}}>Level V - Evaluating</option>\n    <option value=6 {{#equals source.bloomsObjectiveLevel \'6\'}}selected="true"{{/equals}}>Level VI - Creating</option>\n  </select>\n</div>\n<div class="form-fieldset">\n  <label class="form-label" for="learningObjectives">Learning Objectives</label>\n  <input\n    class="learningObjectives-textarea"\n    type="text"\n    id="learningObjectives"\n    value="{{#if source.learningObjectives}}{{source.learningObjectives}}{{/if}}"\n  />\n</div>'),v.Z.registerPartial("aEditorBaseGeneral",'<input type="hidden" value="{{type}}" id="assessment-type">\n{{#if taskId}}\n<input type="hidden" id="id" value="{{taskId}}" readonly />\n{{/if}}\n{{#if linkedId}}\n<input type="hidden" id="linked-id" value="{{linkedId}}" readonly>\n{{/if}}\n{{#if libraryId}}\n<input type="hidden" id="assessment-library-id" value="{{libraryId}}" readonly>\n{{/if}}\n{{#if version includeZero=true}}\n<input type="hidden" id="version" value="{{version}}" readonly>\n{{/if}}\n<div class="form-fieldset">\n  <label class="form-label" for="name">Name</label>\n  <input\n    type="text"\n    id="name"\n    placeholder="Name..."\n    value="{{#if source.name}}{{source.name}}{{/if}}"\n  />\n</div>\n<div class="form-fieldset">\n  <label class="form-label">Show Name</label>\n  <label class="toggle">\n    <input type="checkbox" id="show_name" {{#if source.showName}}checked{{/if}}/>\n    <span class="toggle-label"></span>\n    <span class="toggle-handle"></span>\n  </label>\n</div>\n'),v.Z.registerPartial("aEditorGeneralForm",'<form id="general_form" class="form form--simple" action="/">\n  {{> aEditorBaseGeneral}}\n  <div class="form-fieldset form-fieldset--large preview-area-container">\n    <label class="form-label" for="instructions">Instructions</label>\n    {{> ribbonEditorWithPreview id=\'instructions\' placeholder=\'Instruction...\'}}\n  </div>\n</form>\n'),v.Z.registerPartial("aEditorMetadataForm",'<form id="metadata_form" class="form form--simple" action="/">\n  {{#if source.metadata.layout}}\n  <input type="hidden" id="layout" value="{{source.metadata.layout}}" readonly />\n  {{/if}}\n  {{> aEditorObjectives}}\n  {{> aEditorTags}}\n</form>'),v.Z.registerPartial("aEditorFilesForm",'<form id="files_form" class="form form--simple files-container" action="/">\n  <div class="content-container">\n    <h3 class="header">Additional content</h3>\n    <div class="js-tree-container selected-content"></div>\n  </div>\n  <div class="separator"></div>\n  <div class="content-container">\n    <h3 class="header">Project files</h3>\n    <div class="js-tree-container project-files"></div>\n  </div>\n</form>'),v.Z.registerPartial("aEditorLinkedInfo",'{{#if linkedId}}\n<i class="ss-icon linked-icon" {{#if source.libraryName}}title="Linked with \'{{source.libraryName}}\' Library"{{/if}}>link</i>\n{{/if}}\n'),v.Z.registerPartial("aEditorDuplicateButton",'<button class="btn assessment-editor-duplicate" title="Duplicate and save assessment" aria-label="Duplicate and save assessment">\n  <span class="iconify-inline" data-icon="@codio:mdi:content-copy"></span> Duplicate and Save\n</button>\n'),v.Z.registerPartial("aEditorSenseExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="pre_cmd">Pre-Exec Command (Optional)</label>\n    <input\n      type="text"\n      id="pre_cmd"\n      placeholder="Pre Execute Command..."\n      value="{{#if source.preExecuteCommand}}{{source.preExecuteCommand}}{{/if}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label" for="pre_feedback">Pre-Exec Feedback (Optional)</label>\n    <textarea\n      placeholder="pre-exec feedback"\n      id="pre_feedback"\n      rows="8"\n    ></textarea>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label" for="feedback_url">Feedback URL</label>\n    <input\n      type="text"\n      id="feedback_url"\n      placeholder="Feedback URL..."\n      value="{{#if source.feedbackUrl}}{{source.feedbackUrl}}{{/if}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label" for="filename">Filename</label>\n    <input\n      type="text"\n      id="filename"\n      placeholder="Filename"\n      value="{{#if source.filename}}{{source.filename}}{{/if}}"\n    />\n  </div>\n</form>'),v.Z.registerPartial("aEditorSenseGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label">Gradable</label>\n    <label class="toggle">\n      <input type="checkbox" id="gradable" {{#if source.gradable}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="text"\n      id="points"\n      value="{{#exists source.points}}{{source.points}}{{/exists}}"\n    />\n  </div>\n  {{> aEditorAnswerRationale}}\n</form>\n'),v.Z.registerPartial("aEditorSenseNavigation",'<div class="navigation-container">\n  <ul class="navigation-list">\n    <li class="navigation-item" data-id="general_form">General</li>\n    <li class="navigation-item" data-id="execution_form">Execution</li>\n    <li class="navigation-item" data-id="grading_form">Grading</li>\n    <li class="navigation-item" data-id="metadata_form">Metadata</li>\n    <li class="navigation-item" data-id="files_form">Files</li>\n  </ul>\n</div>\n'),v.Z.registerPartial("cocItem",E),v.Z.registerPartial("aEditorCocExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="cmd">Command</label>\n    <input\n      type="text"\n      id="cmd"\n      placeholder="Command..."\n      value="{{#if source.command}}{{source.command}}{{/if}}"\n    />\n    <div class="helpBlock command-helpBlock {{#notIncludes source.command ".guides/secure"}}hide{{/notIncludes}}">\n    Script will be executed isolated from user container&nbsp;\n    <a href=\'https://docs.codio.com/instructors/authoring/assessments/auto-grade-scripts.html#secure-scripts\' target=\'_blank\'>click here</a>\n    </div>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label" for="pre_cmd">Pre-Exec Command (Optional)</label>\n    <input\n      type="text"\n      id="pre_cmd"\n      placeholder="Pre Execute Command..."\n      value="{{#if source.preExecuteCommand}}{{source.preExecuteCommand}}{{/if}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label" for="timeout">Timeout</label>\n    <input\n      type="number"\n      min="1"\n      max="300"\n      id="timeout"\n      value="{{#if source.options.timeout}}{{source.options.timeout}}{{/if}}{{#unless source.options.timeout}}30{{/unless}}"\n      placeholder="Command timeout..."\n    />\n  </div>\n</form>\n'),v.Z.registerPartial("aEditorCocGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="text"\n      id="points"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset form-fieldset-allow-partial">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="options-container">\n    <div class="form-fieldset">\n      <label class="form-label">Case Insensitive</label>\n      <label class="toggle">\n        <input type="checkbox" id="ignore_case" {{#if source.options.ignoreCase}}checked{{/if}}/>\n        <span class="toggle-label"></span>\n        <span class="toggle-handle"></span>\n      </label>\n    </div>\n    <div class="form-fieldset">\n      <label class="form-label">Ignore White Spaces</label>\n      <label class="toggle">\n        <input type="checkbox" id="ignore_white_spaces" {{#if source.options.ignoreWhitespaces}}checked{{/if}}/>\n        <span class="toggle-label"></span>\n        <span class="toggle-handle"></span>\n      </label>\n    </div>\n    <div class="form-fieldset">\n      <label class="form-label">Substring match</label>\n      <label class="toggle">\n        <input type="checkbox" id="match_substring" {{#if source.options.matchSubstring}}checked{{/if}}/>\n        <span class="toggle-label"></span>\n        <span class="toggle-handle"></span>\n      </label>\n    </div>\n  </div>\n  <div class="form-fieldset form-fieldset--large test-cases-container">\n    <div class="form-fieldset form-fieldset--horizontal">\n      <button type="button" class="btn add-item-to-check-btn">Add Item To Check</button>\n      <button type="button" class="btn test-case-action test-case-checkAllBtn">Check ALL</button>\n    </div>\n    <ul class="items-list sequence">\n      {{> cocItem}}\n    </ul>\n    <div class="form-fieldset form-fieldset--horizontal">\n      <button type="button" class="btn add-item-to-check-btn bottom">Add Item To Check</button>\n    </div>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Show Expected Answer</label>\n    <label class="toggle">\n      <input type="checkbox" id="show_expected_answer" {{#if source.showExpectedAnswer}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),v.Z.registerPartial("aEditorParametersForm",'<form id="parameters_form" class="form form--simple" action="/">\n  <div class="assessment-editor-parameters">\n    <div class="assessment-editor-parameters-container"/>\n    <div class="assessment-editor-parameters-separator"/>\n    <div class="assessment-editor-parameters-sample">\n      <button class="assessment-editor-parameters-sample-generate-btn btn btn--primary">\n        Generate Sample Parameters\n      </button>\n      <div class="assessment-editor-parameters-sample-view"></div>\n      <button class="assessment-editor-parameters-generate-example-btn btn btn--primary">\n        Add code example\n      </button>\n    </div>\n  </div>\n</form>\n'),v.Z.registerPartial("aEditorTestExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div class="form-fieldset form-fieldset-type-selector">\n    <label class="form-label" for="test_type">language type</label>\n    <select id="test_type">\n      <option value="custom" {{#equals advancedType \'custom\'}}selected="true"{{/equals}}>Custom</option>\n      <option value="ruby" {{#equals advancedType \'ruby\'}}selected="true"{{/equals}}>Ruby</option>\n      <option value="java" {{#equals advancedType \'java\'}}selected="true"{{/equals}}>Java</option>\n      <option value="python" {{#equals advancedType \'python\'}}selected="true"{{/equals}}>Python</option>\n      <option value="javascript" {{#equals advancedType \'javascript\'}}selected="true"{{/equals}}>JavaScript</option>\n    </select>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="timeout">Timeout</label>\n    <input\n      type="number"\n      min="1"\n      max="300"\n      id="timeout"\n      value="{{#if source.timeoutSeconds}}{{source.timeoutSeconds}}{{/if}}{{#unless source.timeoutSeconds}}40{{/unless}}"\n      placeholder="Command timeout..."\n    />\n  </div>\n\n  <div class="form-fieldset form-fieldset--large form-fieldset-subtype-selector {{#equals advancedType \'custom\'}}hide{{/equals}}">\n    <label class="form-label" for="test_subtype">Language assessment subtype</label>\n    <select id="test_subtype">\n    </select>\n  </div>\n\n  <div class="custom form-fieldset--large {{#notequals advancedType \'custom\'}}hide{{/notequals}}">\n    <div class="form-fieldset">\n      <label class="form-label" for="command">Command</label>\n      <input\n        type="text"\n        id="command"\n        value="{{#if source.command}}{{source.command}}{{/if}}"\n        placeholder="Test command..."\n      />\n      <div class="helpBlock command-helpBlock {{#notIncludes source.command ".guides/secure"}}hide{{/notIncludes}}">\n        Script will be executed isolated from user container&nbsp;\n        <a href=\'https://docs.codio.com/instructors/authoring/assessments/auto-grade-scripts.html#secure-scripts\' target=\'_blank\'>click here</a>\n      </div>\n    </div>\n  </div>\n\n  <div class="predefined form-fieldset--large {{#equals advancedType \'custom\'}}hide{{/equals}}">\n\n    <div class="java-junit-sub-type test-sub-type {{#notequals advancedType \'java\'}}hide{{/notequals}}">\n      <div class="form-fieldset">\n        <label class="form-label" for="junit-version">JUnit version</label>\n        <div class="controls">\n          <select id="junit-version">\n            <option value="5.10.0" {{#equals jUnitVersion \'5.10.0\'}}selected{{/equals}}>JUnit5 v5.10.0</option>\n            <option value="5" {{#equals jUnitVersion \'5\'}}selected{{/equals}}>JUnit5 v5.6.1</option>\n            <option value="4.13.2" {{#equals jUnitVersion \'4.13.2\'}}selected{{/equals}}>JUnit4 v4.13.2</option>\n            <option value="4" {{#equals jUnitVersion \'4\'}}selected{{/equals}}{{#unless jUnitVersion}}selected{{/unless}}>JUnit4 v4.12</option>\n          </select>\n        </div>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label" for="sources">Source path:</label>\n        <input type="text" id="sources" value="{{#if advancedTypeConfig}}{{advancedTypeConfig.sources}}{{/if}}" placeholder="Sources..."/>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label" for="testsources">Tests source path:</label>\n        <input type="text" id="testsources" value="{{#if advancedTypeConfig}}{{advancedTypeConfig.testsources}}{{/if}}" placeholder="Test sources..."/>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label" for="libs">Library path:</label>\n        <input type="text" id="libs" value="{{#if advancedTypeConfig}}{{advancedTypeConfig.libs}}{{/if}}" placeholder="Libraries..."/>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label" for="wd">Working directory:</label>\n        <input type="text" id="wd" value="{{#if advancedTypeConfig}}{{advancedTypeConfig.wd}}{{/if}}" placeholder="Working directory..."/>\n      </div>\n    </div>\n    <div class="java-style-sub-type test-sub-type {{#notequals advancedType \'java\'}}hide{{/notequals}}">\n      <div class="form-fieldset">\n        <label class="form-label" for="configFile">Config path:</label>\n        <input type="text" id="configFile" value="{{#if advancedTypeConfig}}{{advancedTypeConfig.configFile}}{{/if}}" placeholder="Config path..."/>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label" for="checkstyle-version">Checkstyle version</label>\n        <div class="controls">\n          <select id="checkstyle-version">\n            <option value="10.12" {{#equals checkStyleVersion \'10.12\'}}selected{{/equals}}>Checkstyle v10.12(JRE 11 and above)</option>\n            <option value="8.24" {{#equals checkStyleVersion \'8.24\'}}selected{{/equals}}{{#unless checkStyleVersion}}selected{{/unless}}>Checkstyle v8.24(JRE 8 and above)</option>\n            <option value="8.9" {{#equals checkStyleVersion \'8.9\'}}selected{{/equals}}>Checkstyle v8.9(JRE 8)</option>\n            <option value="6.6" {{#equals checkStyleVersion \'6.6\'}}selected{{/equals}}>Checkstyle v6.6(JRE 6 and 7)</option>\n          </select>\n        </div>\n      </div>\n    </div>\n\n    <div class="form-fieldset">\n      <label class="control-label hint hint-top" for="test-add-case">\n        Add case:\n      </label>\n      <div class="controls">\n        <input type="text" id="test-add-case" class="input-xlarge" placeholder="Path to file or drop it..." maxlength="1024">\n        <button type="button" class="btn test-add-case-btn" id="test-add-case-btn">Add case</button>\n      </div>\n    </div>\n    <div class="form-fieldset--large test-cases-field">\n    </div>\n  </div>\n\n  <div class="form-fieldset form-fieldset--large preview-area-container hide">\n    <label class="form-label" for="codeEnvConfig">Code env config: hidden field</label>\n    <input\n      placeholder="Code env config"\n      id="codeEnvConfig"\n      type="text"\n      value="{{#if source.codeEnvConfig}}{{source.codeEnvConfig}}{{/if}}"\n    />\n  </div>\n\n  <div class="form-fieldset hide form-fieldset-py-executable">\n    <label class="form-label" for="executable">Python executable</label>\n    <input\n      type="text"\n      id="executable"\n      value="{{#if source.executable}}{{source.executable}}{{else}}python{{/if}}"\n    />\n  </div>\n\n  <div class="form-fieldset hide form-fieldset-py-wd">\n    <label class="form-label" for="pythonwd">Python working directory</label>\n    <input\n      type="text"\n      id="pythonwd"\n      value="{{#if source.pythonwd}}{{source.pythonwd}}{{else}}{{/if}}"\n    />\n  </div>\n\n  <div class="form-fieldset hide form-fieldset-py-path">\n    <label class="form-label" for="pythonpath">Student folder</label>\n    <input\n      type="text"\n      id="pythonpath"\n      value="{{#if source.pythonPath}}{{source.pythonPath}}{{else}}{{/if}}"\n      placeholder="Path to student folder or default.."\n    />\n  </div>\n</form>\n'),v.Z.registerPartial("aEditorTestGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="text"\n      id="points"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset form-fieldset-allow-partial">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),v.Z.registerPartial("aEditorMcqGeneralForm",'<form id="general_form" class="form form--simple" action="/">\n  {{> aEditorBaseGeneral}}\n  <div class="form-fieldset form-fieldset--large preview-area-container">\n    <label class="form-label" for="question">Question</label>\n    {{> ribbonEditorWithPreview id=\'question\' placeholder=\'\'}}\n  </div>\n</form>\n'),v.Z.registerPartial("aEditorMcqExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label">Shuffle answers</label>\n    <label class="toggle">\n      <input type="checkbox" id="is_randomized" {{#if source.isRandomized}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Multiple Response</label>\n    <label class="toggle">\n      <input type="checkbox" id="multiple_response" {{#if source.multipleResponse}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <btn class="btn add-answer-btn">Add Answer</btn>\n  </div>\n  <div class="form-fieldset form-fieldset--large answers">\n    <ul class="answers-list">\n      {{> answerItem}}\n    </ul>\n  </div>\n</form>'),v.Z.registerPartial("aEditorMcqGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label">Correct Points</label>\n    <input\n      type="text"\n      id="correct_points"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Incorrect Points</label>\n    <input\n      type="text"\n      id="incorrect_points"\n      value="{{#if source.incorrectPoints}}{{source.incorrectPoints}}{{else}}0{{/if}}"\n    />\n  </div>\n  <div class="form-fieldset form-fieldset-allow-partial">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Show Expected Answer</label>\n    <label class="toggle">\n      <input type="checkbox" id="show_expected_answer" {{#if source.showExpectedAnswer}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),v.Z.registerPartial("aEditorFibExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div class="form-fieldset form-fieldset--large preview-area-container">\n    <label class="form-label">Text</label>\n    {{> ribbonEditorWithPreview id=\'text\' placeholder=\'\'}}\n    <span class="hint-text">\n      Example: The correct acronym for the main processor chip in a computer is &lt;&lt;&lt;CPU&gt;&gt;&gt;\n      <a href="https://docs.codio.com/instructors/authoring/assessments/fill-in-blanks.html#fill-in-blanks" target="_blank">Documentation</a>\n    </span>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Show Possible Values</label>\n    <label class="toggle">\n      <input type="checkbox" id="show_values" {{#if source.showValues}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset form-fieldset--large fib-assessments-distractors {{#unless source.showValues}}hide{{/unless}}">\n    <span class="hint-text">\n      If you show students possible values, you can add distractors (wrong answers) to the drop down by listing them in the text area below. One distractor per line\n    </span>\n    <label class="form-label" for="fib-assessments-distractors">Distractors</label>\n    <textarea\n            class="large-text-area"\n            id="fib-assessments-distractors"\n            rows="4"\n    ></textarea>\n  </div>\n</form>\n'),v.Z.registerPartial("aEditorFibGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="text"\n      id="points"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset form-fieldset-allow-partial">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Show Expected Answer</label>\n    <label class="toggle">\n      <input type="checkbox" id="show_expected_answer" {{#if source.showExpectedAnswer}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),v.Z.registerPartial("aEditorFtNavigation",'<div class="navigation-container">\n  <ul class="navigation-list">\n    <li class="navigation-item" data-id="general_form">General</li>\n    <li class="navigation-item" data-id="grading_form">Grading</li>\n    <li class="navigation-item" data-id="parameters_form">Parameters</li>\n    <li class="navigation-item" data-id="metadata_form">Metadata</li>\n    <li class="navigation-item" data-id="files_form">Files</li>\n  </ul>\n</div>\n'),v.Z.registerPartial("aEditorFtGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label">Points</label>\n    <input\n      type="text"\n      id="points"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Preview type</label>\n    <select id="previewType" >\n      <option value="NONE">Plain text (no preview)</option>\n      <option value="RAW" {{#equals source.previewType \'RAW\'}}selected="selected"{{/equals}}>Plain text + Latex</option>\n      <option value="MARKDOWN" {{#equals source.previewType \'MARKDOWN\'}}selected="selected"{{/equals}}>Markdown + Latex</option>\n    </select>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n\n  <div class="assessments-grade-rubrics--form {{#unless source.arePartialPointsAllowed}}hide{{/unless}}">\n    <button class="assessments-grade-rubrics--options icon-button" title=\'Copy rubrics\'>\n      <span class="iconify-inline" data-icon="@codio:mdi:cog"></span>\n    </button>\n    <div class="form-fieldset">\n      <label class="form-label">Rubric items</label>\n      <div class="assessments-grade-rubrics--list">\n        {{#each source.rubrics}}\n        {{> aEditorGbookGradingRubricItem}}\n        {{/each}}\n      </div>\n      <button class="btn btn-primary assessments-grade-rubrics--button">\n        <span class="iconify-inline" data-icon="@codio:mdi:plus-thick"></span>\n        &nbsp;Add Rubric Item\n      </button>\n    </div>\n  </div>\n</form>\n'),v.Z.registerPartial("aEditorFtaExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="command">Command</label>\n    <input\n      type="text"\n      id="command"\n      value="{{#if source.command}}{{source.command}}{{/if}}"\n    />\n    <div class="helpBlock command-helpBlock {{#notIncludes source.command ".guides/secure"}}hide{{/notIncludes}}">\n    Script will be executed isolated from user container&nbsp;\n    <a href=\'https://docs.codio.com/instructors/authoring/assessments/auto-grade-scripts.html#secure-scripts\' target=\'_blank\'>click here</a>\n  </div>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label" for="timeout">Timeout</label>\n    <input\n      type="number"\n      min="1"\n      max="300"\n      id="timeout"\n      value="{{#if source.timeoutSeconds}}{{source.timeoutSeconds}}{{/if}}{{#unless source.timeoutSeconds}}40{{/unless}}"\n      placeholder="Command timeout..."\n    />\n  </div>\n</form>\n'),v.Z.registerPartial("aEditorFtaGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label">Points</label>\n    <input\n      type="text"\n      id="points"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Preview type</label>\n    <select id="previewType" >\n      <option value="NONE">Plain text (no preview)</option>\n      <option value="RAW" {{#equals source.previewType \'RAW\'}}selected="selected"{{/equals}}>Plain text + Latex</option>\n      <option value="MARKDOWN" {{#equals source.previewType \'MARKDOWN\'}}selected="selected"{{/equals}}>Markdown + Latex</option>\n    </select>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),v.Z.registerPartial("aEditorGbookNavigation",'<div class="navigation-container">\n  <ul class="navigation-list">\n    <li class="navigation-item" data-id="general_form">General</li>\n    <li class="navigation-item" data-id="grading_form">Grading</li>\n    <li class="navigation-item" data-id="metadata_form">Metadata</li>\n    <li class="navigation-item" data-id="files_form">Files</li>\n  </ul>\n</div>\n'),v.Z.registerPartial("aEditorGbookGeneralForm",'<form id="general_form" class="form form--simple" action="/">\n  {{> aEditorBaseGeneral}}\n</form>'),v.Z.registerPartial("aEditorGbookGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label">Points</label>\n    <input\n      type="text"\n      id="points"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="assessments-grade-rubrics--form {{#unless source.arePartialPointsAllowed}}hide{{/unless}}">\n    <button class="assessments-grade-rubrics--options icon-button" title=\'Copy rubrics\'>\n      <span class="iconify-inline" data-icon="@codio:mdi:cog"></span>\n    </button>\n    <div class="form-fieldset">\n      <label class="form-label">Rubric items</label>\n      <div class="assessments-grade-rubrics--list">\n        {{#each source.rubrics}}\n          {{> aEditorGbookGradingRubricItem}}\n        {{/each}}\n      </div>\n      <button class="btn btn-primary assessments-grade-rubrics--button">\n        <span class="iconify-inline" data-icon="@codio:mdi:plus-thick"></span>\n        &nbsp;Add Rubric Item\n      </button>\n    </div>\n  </div>\n</form>\n'),v.Z.registerPartial("aEditorGbookGradingRubricItem",I),v.Z.registerPartial("aEditorMathNavigation",'<div class="navigation-container">\n  <ul class="navigation-list">\n    <li class="navigation-item" data-id="general_form">General</li>\n    <li class="navigation-item" data-id="grading_form">Grading</li>\n    <li class="navigation-item" data-id="parameters_form">Parameters</li>\n    <li class="navigation-item" data-id="metadata_form">Metadata</li>\n    <li class="navigation-item" data-id="files_form">Files</li>\n  </ul>\n</div>\n'),v.Z.registerPartial("aEditorMathGeneralForm",'<form id="general_form" class="form form--simple" action="/">\n  {{> aEditorBaseGeneral}}\n  <div class="form-fieldset form-fieldset--large preview-area-container">\n    <label class="form-label">Question XML</label>\n    <a href="javascript:void(0)" class="question-preview-button preview-button"><i class="ss-icon">view</i></a>\n    <textarea\n      class="large-text-area preview-field-with-content"\n      id="question"\n      rows="4"\n    ></textarea>\n    <div class="preview-container">preview content</div>\n  </div>\n</form>'),v.Z.registerPartial("aEditorMathGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="text"\n      id="points"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Show Expected Answer</label>\n    <label class="toggle">\n      <input type="checkbox" id="show_expected_answer" {{#if source.showExpectedAnswer}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  {{> aEditorAnswerRationale}}\n</form>\n'),v.Z.registerPartial("aEditorParsonsExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div id="uiContainer" />\n</form>'),v.Z.registerPartial("aEditorParsonsGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label">Points</label>\n    <input\n      type="text"\n      id="points"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),v.Z.registerPartial("aEditorRandomNavigation",'<div class="navigation-container">\n  <ul class="navigation-list">\n    <li class="navigation-item" data-id="general_form">General</li>\n    <li class="navigation-item" data-id="grading_form">Grading</li>\n    <li class="navigation-item" data-id="execution_form">Execution</li>\n  </ul>\n</div>\n'),v.Z.registerPartial("aEditorRandomGeneralForm",'<form id="general_form" class="form form--simple" action="/">\n  <input type="hidden" value="{{type}}" id="assessment-type">\n  {{#if taskId}}\n  <input type="hidden" id="id" value="{{taskId}}" readonly />\n  {{/if}}\n  <div class="form-fieldset">\n    <label class="form-label" for="name">Name</label>\n    <input\n      type="text"\n      id="name"\n      placeholder="Name..."\n      value="{{#if source.name}}{{source.name}}{{/if}}"\n    />\n  </div>\n</form>'),v.Z.registerPartial("aEditorRandomGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label">Points</label>\n    <input\n      type="text"\n      id="points"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n</form>\n'),v.Z.registerPartial("aEditorRandomExecutionForm",T),v.Z.registerPartial("libraryBrowserTagValueControls",j),v.Z.registerPartial("libraryBrowserFavoritesItems",A)};var D=n(76900),N=n(99012),M=n(50352),F=n(73687),R=n(72523),L=n(85886),U=n(48503);var B=n(96513);n(44247);var q=[{id:L.ZP.CONTENT_TYPE_HTML,name:"HTML (alpha)"},{id:L.ZP.CONTENT_TYPE_MARKDOWN,name:"MARKDOWN"}],H={};H[R.aI.FILE_CLOSE]=d().compile('<input type="hidden" name="action" value="close">\n<input type="hidden" name="tab_type" value="file">\n<div class="media-action-item-content">\n  <input\n    class="plain-input"\n    type="text"\n    name="content"\n    placeholder="Filename"\n    value="{{#if action}}{{action.content}}{{/if}}"\n  />\n</div>\n<div class="media-action-item-panel">\n  <input\n    class="plain-input"\n    type="text"\n    name="panel"\n    placeholder="Panel"\n    value="{{#if action}}{{action.panel}}{{/if}}"\n  />\n</div>\n'),H[R.aI.FILE_OPEN]=d().compile('<input type="hidden" name="action" value="open">\n<input type="hidden" name="tab_type" value="file">\n<div class="media-action-item-content">\n  <input\n    class="plain-input"\n    type="text"\n    name="content"\n    placeholder="Filename"\n    value="{{#if action}}{{action.content}}{{/if}}"\n  />\n</div>\n<div class="media-action-item-panel">\n  <input\n    class="plain-input"\n    type="text"\n    name="panel"\n    placeholder="Panel"\n    value="{{#if action}}{{action.panel}}{{/if}}"\n  />\n</div>\n'),H[R.aI.HIGHLIGHT]=d().compile('<input type="hidden" name="action" value="open">\n<input type="hidden" name="tab_type" value="file">\n<div class="media-action-item-content">\n  <input\n    class="plain-input"\n    type="text"\n    name="content"\n    placeholder="Filename"\n    value="{{#if action}}{{action.content}}{{/if}}"\n  />\n</div>\n<div class="media-action-item-reference">\n  <input\n    class="plain-input"\n    type="text"\n    name="reference"\n    placeholder="Reference"\n    value="{{#if action}}{{action.reference}}{{/if}}"\n  />\n</div>\n<div class="media-action-item-lines">\n  <input\n    class="plain-input"\n    type="text"\n    name="lines"\n    placeholder="Lines"\n    value="{{#if action}}{{action.lines}}{{/if}}"\n  />\n</div>\n<div class="media-action-item-panel">\n  <input\n    class="plain-input"\n    type="text"\n    name="panel"\n    placeholder="Panel"\n    value="{{#if action}}{{action.panel}}{{/if}}"\n  />\n</div>\n'),H[R.aI.RUN_COMMAND]=d().compile('<input type="hidden" name="action" value="open">\n<input type="hidden" name="tab_type" value="terminal">\n<div class="media-action-item-content">\n  <input\n    class="plain-input"\n    type="text"\n    name="content"\n    placeholder="Command"\n    value="{{#if action}}{{action.content}}{{/if}}"\n  />\n</div>\n<div class="media-action-item-panel">\n  <input\n    class="plain-input"\n    type="text"\n    name="panel"\n    placeholder="Panel"\n    value="{{#if action}}{{action.panel}}{{/if}}"\n  />\n</div>\n'),H[R.aI.TERMINAL_CLOSE]=d().compile('<input type="hidden" name="action" value="close">\n<input type="hidden" name="tab_type" value="terminal">\n'),H[R.aI.TERMINAL_OPEN]=d().compile('<input type="hidden" name="action" value="open">\n<input type="hidden" name="tab_type" value="terminal">\n<div class="media-action-item-panel">\n  <input\n    class="plain-input"\n    type="text"\n    name="panel"\n    placeholder="Panel"\n    value="{{#if action}}{{action.panel}}{{/if}}"\n  />\n</div>\n');var W=d().compile('<div>\n  <div class="main player-container">\n    <div class="navigation-container">\n      <header>\n        <div>\n          <button class="{{#unless showCollapse}}hide{{/unless}} btn btn--text guides-button-collapse" aria-label="Collapse">\n            Collapse\n          </button>\n        </div>\n        <small class="small-preview"></small>\n        <div>\n          {{#unless isStudent}}\n          <button title="Switch to code" class="btn guides-editor-code-switch hide guides-toolbar-button-with-text" aria-label="Switch to code">\n            <span class="iconify-inline" data-icon="@codio:mdi:pencil-outline"></span> Edit\n          </button>\n          {{/unless}}\n          {{#if teacherInStudentUnit}}\n          <div>\n            <a href="javascript:void(0)" class="btn btn--text guides-button-grading">\n              Grading\n            </a>\n          </div>\n          {{/if}}\n          {{#if isRegistered }}\n          <div class="no-wrap navigator-container navigator-container-buttons">\n            <button class="btn navigator guides-button-prev disabled" title="Previous" aria-label="Previous">\n              <span class="iconify" data-icon="@codio:mdi:chevron-left"></span>\n            </button>\n            <button class="btn navigator guides-button-next disabled" title="Next" aria-label="Next">\n              <span class="iconify" data-icon="@codio:mdi:chevron-right"></span>\n            </button>\n          </div>\n\n          <div class="btn-group guide-preferences-container">\n            <button\n              aria-expanded="false"\n              class="btn btn--text guide-preferences"\n              data-toggle="dropdown"\n              title="Settings"\n              aria-label="Settings"\n              aria-controls="menu-guide-preferences"\n              aria-haspopup="true"\n            >\n              <i class="ss-icon ss-settings"></i>\n            </button>\n            {{{settingsMenu}}}\n          </div>\n\n          {{#if showLexicon}}\n          <div class="btn-group">\n            <button\n              class="btn lexikon-open"\n              title="Lexicon"\n              aria-label="Lexicon"\n            >\n              <i class="ss-icon">searchbook</i>\n            </button>\n          </div>\n          {{/if}}\n          {{/if}}\n\n          {{#unless hideSectionsToggle}}\n          <button aria-expanded="false" class="btn guides-player-toggle-nav-book" title="Toggle sections list" aria-label="Toggle sections list">\n            <span class="iconify-inline" data-icon="@codio:mdi:format-list-bulleted"></span>\n          </button>\n          {{/unless}}\n        </div>\n      </header>\n\n      {{#unless isStudent}}\n      <button title="Switch to code" class="btn preview-switch-type code hide" data-type="code" aria-label="Switch to code">\n        <span class="iconify-inline" data-icon="@codio:mdi:pencil-outline"></span>\n      </button>\n      {{/unless}}\n\n      <div class="media-player-container media-player-hidden">\n        <audio id="player_media_player" class="video-js vjs-default-skin vjs-default-skin-audio" controls preload="auto"\n               height="0">\n        </audio>\n      </div>\n    </div>\n\n    <div class="main item-content"></div>\n  </div>\n  <div class="expand-view-container hide"></div>\n</div>\n'),z=d().compile('<div class="main guides-editor-container" tabindex="0">\n  <section class="content">\n    <div class="navigation-container">\n      <header class="header">\n        <h1 class="guides-editor-title">\n          <small></small>\n          <span>{{title}}</span>\n        </h1>\n\n        <form action="#" class="guides-editor-title-form">\n          <input value=""\n                 class="guides-editor-title-input"\n                 placeholder="Enter the section title here"\n                 aria-label="Section title"\n          >\n        </form>\n        <nav class="toolbar">\n          <div class="btn-group btn-group-assessment">\n            <button\n              aria-expanded="false"\n              class="btn guides-toolbar-button-with-text"\n              data-toggle="dropdown"\n              title="Create assessment"\n              aria-label="Create assessment"\n              aria-controls="menu-manage-assessments"\n              aria-haspopup="true"\n            >\n              <span class="iconify-inline" data-icon="@codio:mdi:order-bool-ascending-variant"></span> Assessments\n              <i class="ss-icon ss-dropdown"></i>\n            </button>\n            <div class="dropdown-menu">\n            </div>\n          </div>\n          <div class="guides-editor-view-type-switch-container">\n            <div class="form-fieldset guides-editor-split-view-switch-container">\n              <label class="toggle">\n                <input type="checkbox" id="split_view" {{#if isSplitView}}checked{{/if}}/>\n                <span class="toggle-label"></span>\n                <span class="toggle-handle"></span>\n              </label>\n              <label class="form-label">Split view</label>\n            </div>\n            <button title="Switch to preview" class="btn guides-editor-preview-switch guides-toolbar-button-with-text" aria-label="Switch to preview">\n              <span class="iconify-inline" data-icon="@codio:mdi:eye"></span> Preview\n            </button>\n          </div>\n          <button class="btn guides-settings guides-settings-configure-layout guides-toolbar-button-with-text" title="Layout" aria-label="Layout">\n            <span class="iconify-inline" data-icon="@codio:mdi:view-dashboard-edit"></span> Layout\n          </button>\n          <button class="btn guides-settings guides-settings-global guides-toolbar-button-with-text" title="Settings" aria-label="Settings">\n            <span class="iconify-inline" data-icon="@codio:mdi:wrench"></span> Settings\n          </button>\n          <div class="no-wrap navigator-container navigator-container-buttons">\n            <button class="btn navigator guides-button-prev" title="Previous" aria-label="Previous">\n              <span class="iconify" data-icon="@codio:mdi:chevron-left"></span>\n            </button>\n            <button class="btn navigator guides-button-next" title="Next" aria-label="Next">\n              <span class="iconify" data-icon="@codio:mdi:chevron-right"></span>\n            </button>\n            <button class="btn navigator guides-button-add-page hide" title="Add Page" aria-label="Add Page">\n              <i class="ss-icon">addfile</i>\n            </button>\n          </div>\n          <button aria-expanded="false" class="btn guides-editor-toggle-nav-book" title="Toggle sections list" aria-label="Toggle sections list">\n            <span class="iconify-inline" data-icon="@codio:mdi:format-list-bulleted"></span>\n          </button>\n          <button title="Refresh Guides" class="btn preview-switch-type refresh" data-type="refresh" aria-label="Refresh Guides">\n             <i class="ss-icon">sync</i>\n          </button>\n        </nav>\n      </header>\n      <aside class="ribbon-panel-place">\n      </aside>\n    </div>\n\n    <div class="main editor-size-mark guides-content-editor">\n    </div>\n\n  </section>\n\n</div>\n'),G=d().compile('<div class="settings">\n  <div class="settings-container hide" id="global"></div>\n  <div class="settings-container hide" id="configure-layout"></div>\n  <div class="settings-container hide assessments-container" id="assessments">\n    <section class="assessments-filters hide">\n      <div class="filter-container">\n        <label for="filter" class="filter-label">FILTER BY:</label>\n        <select class="selectbox filter" id="filter">\n          <option value="all" selected="selected" data-filter="">All</option>\n          <option value="used" data-filter="used">Used</option>\n          <option value="unused" data-filter="unused">Not used</option>\n        </select>\n        <button class="delete-all-unused btn hide" id="delete-all-unused">Delete all unused</button>\n      </div>\n      <div class="search-container">\n        <label class="search">\n          <i class="ss-icon">search</i>\n          <input type="search" class="search-field" id="search" placeholder="Search...">\n        </label>\n      </div>\n      <div class="sorter-container">\n        <label class="sorter-label">\n          <select class="selectbox sorter" id="sorting">\n            <option value="name" selected="selected">Name</option>\n            <option value="points">Points</option>\n            <option value="orderInGuides">Order in guides</option>\n          </select>\n        </label>\n        <div id="sorter-buttons" class="buttons">\n          <button id="sorter-asc" data-order="asc" class="btn active">\n            <i class="ss-icon">ascend</i>\n          </button>\n          <button id="sorter-desc" data-order="desc" class="btn">\n            <i class="ss-icon">descend</i>\n          </button>\n        </div>\n      </div>\n    </section>\n    <div class="assessments-preview" />\n    <div class="form" />\n  </div>\n  <div class="settings-container hide" id="media">\n    <div class="media-form" />\n  </div>\n</div>\n'),V=d().compile('<ul\r\n  class="assessments-manage-container {{#if isHtml}}assessments-manage-container--html{{/if}}{{#if canCreate}}{{#unless isHtml}}assessments-manage-container-2-columns{{#if showSense}} assessments-manage-container-2-columns--with-sense{{/if}}{{/unless}}{{/if}}"\r\n  role="menu"\r\n  id="menu-manage-assessments"\r\n>\r\n  {{#if canCreate}}\r\n    <li role="presentation" class="js-skip-menuitem">\r\n      <h3 class="assessment-dd-header">Create New...</h3>\r\n      <h4 class="assessment-dd-subheader">Auto-Graded</h4>\r\n    </li>\r\n    <li role="presentation">\r\n      <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="code-output-compare" title="Standard Code Test">\r\n        <i class="svg icon icon-coc"/>\r\n        <div class="assessment-create-text">Standard Code Test</div>\r\n      </a>\r\n    </li>\r\n    <li role="presentation">\r\n      <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="test" title="Advanced Code Test">\r\n        <i class="svg icon icon-code-test"/>\r\n        <div class="assessment-create-text">Advanced Code Test</div>\r\n      </a>\r\n    </li>\r\n    {{#unless isHtml}}\r\n    <li role="presentation">\r\n      <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="parsons-puzzle" title="Parsons Puzzle Assessment">\r\n        <i class="svg icon icon-parsons"/>\r\n        <div class="assessment-create-text">Parsons Puzzle</div>\r\n      </a>\r\n    </li>\r\n    <li role="presentation">\r\n      <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="multiple-choice" title="Multiple Choice">\r\n        <i class="svg icon icon-mcq"/>\r\n        <div class="assessment-create-text">Multiple Choice</div>\r\n      </a>\r\n    </li>\r\n    <li role="presentation">\r\n      <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="fill-in-the-blanks" title="Fill in the Blanks">\r\n        <i class="svg icon icon-fib"/>\r\n        <div class="assessment-create-text">Fill in the Blanks</div>\r\n      </a>\r\n    </li>\r\n    <li role="presentation">\r\n      <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="free-text-auto" title="Free Text Autograde">\r\n        <i class="svg icon icon-free-text-auto"/>\r\n        <div class="assessment-create-text">Free Text Autograde</div>\r\n      </a>\r\n    </li>\r\n    {{#if showMath}}\r\n    <li role="presentation">\r\n      <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="math-stack" title="Math Assessment">\r\n        <i class="svg icon icon-math"/>\r\n        <div class="assessment-create-text">Math Assessment</div>\r\n      </a>\r\n    </li>\r\n    {{/if}}\r\n    {{#if showSense}}\r\n    <li role="presentation">\r\n      <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="sense-network" title="Sense.Network Assessment">\r\n        <i class="svg icon icon-sense"/>\r\n        <div class="assessment-create-text">Sense.Network</div>\r\n      </a>\r\n    </li>\r\n    {{/if}}\r\n    <li role="presentation" class="js-skip-menuitem">\r\n      <h4 class="assessment-dd-subheader">Manually Graded</h4>\r\n    </li>\r\n    <li role="presentation">\r\n      <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="free-text" title="Free Text">\r\n        <i class="svg icon icon-free-text"/>\r\n        <div class="assessment-create-text">Free Text</div>\r\n      </a>\r\n    </li>\r\n    <li role="presentation">\r\n      <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="grade-book" title="Grade Book">\r\n        <i class="svg icon icon-grade-book"/>\r\n        <div class="assessment-create-text">Grade Book</div>\r\n      </a>\r\n    </li>\r\n    {{/unless}}\r\n    {{#if showLibrary}}\r\n    <li role="presentation" class="js-skip-menuitem">\r\n      <h3 class="assessment-dd-header">Add from Library...</h3>\r\n    </li>\r\n    <li role="presentation">\r\n      <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="assessment-library" title="Assessment Library">\r\n        <i class="svg icon icon-assessments-library"/>\r\n        <div class="assessment-create-text">Assessment</div>\r\n      </a>\r\n    </li>\r\n    <li role="presentation">\r\n      <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="random" title="Random">\r\n        <i class="svg icon icon-random"/>\r\n        <div class="assessment-create-text">Random</div>\r\n      </a>\r\n    </li>\r\n    {{/if}}\r\n  {{/if}}\r\n  <li role="presentation" class="assessment-view-existing">\r\n    <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-existing" title="View Existing Assessments">\r\n      <div class="assessment-create-text">View Existing Assessments</div>\r\n    </a>\r\n  </li>\r\n</ul>\r\n'),K=d().compile('{{#if assessments.length}}\n<ul class="list assessments">\n  {{#each assessments}}\n  {{> assessmentListItem}}\n  {{/each}}\n</ul>\n{{else}}\n<div class="no-assessments-message">\n    <h2>No assessments</h2>\n</div>\n{{/if}}\n<div class="form-footer">\n  <button type="button" id="cancel-btn" class="btn">Close</button>\n</div>\n'),Y=d().compile('<div class="assessment-library-browser">\n  <div class="library-container">\n    <section class="filters">\n      <h4 class="hide library-no-access-random">\n        You have no access to the library in random assessment, apply search will change it to the current library.\n      </h4>\n      <div class="form">\n        <div class="library-filter">\n          <label class="library-select-label" for="library-filter">Library name</label>\n          <select id="library-filter">\n            <optgroup label="My Libraries">\n              {{#each libraries.my}}\n              <option value="{{id}}">{{name}}</option>\n              {{/each}}\n            </optgroup>\n            <optgroup label="Certified Libraries">\n              {{#each libraries.certified}}\n              <option value="{{id}}">{{name}}</option>\n              {{/each}}\n            </optgroup>\n          </select>\n        </div>\n        <label class="search tags">\n          {{> libraryBrowserTagValueControls}}\n        </label>\n        <div class="search favorites">\n          <div class="btn-group search-filter favorites">\n            <button class="btn dropdown-toggle" data-toggle="dropdown">\n              Saved <span class="caret"></span>\n            </button>\n            <ul class="dropdown-menu" role="menu">\n              {{>libraryBrowserFavoritesItems}}\n            </ul>\n          </div>\n          <button type="button" class="btn favorites-save-btn">\n            Save\n          </button>\n        </div>\n      </div>\n    </section>\n    <div class="assessments-list-container">\n      <section class="ordering">\n        <div class="paginate-container pagination"></div>\n        <a href="https://docs.codio.com/instructors/setupcourses/library/search-library.html" target="_blank" class="library-help-link">\n          <i class="ss-icon">info</i>\n          <span>Need a little help?</span>\n        </a>\n      </section>\n      <div class="list">\n      </div>\n    </div>\n  </div>\n</div>\n'),J=d().compile(j),Q=d().compile('{{#equals items.length 0}}\r\n  <div class="block-notice">\r\n    {{#if search}}\r\n      <p>Your search - <strong>{{search}}</strong> - did not match any assessment.</p>\r\n      <small>\r\n        <p>Suggestions:</p>\r\n        <ul>\r\n          <li>Try different tags/values.</li>\r\n          <li>Try different library.</li>\r\n          <li>Try fewer tags.</li>\r\n        </ul>\r\n      </small>\r\n    {{else}}\r\n      <p>It looks like no assessment available yet.</p>\r\n    {{/if}}\r\n  </div>\r\n{{else}}\r\n  <div class="library-assessments-list">\r\n    {{#each items}}\r\n      <div class="assessment-item" data-id="{{assessmentId}}">\r\n        <div class="assessment-image-container">\r\n          <div class="assessment-item-image icon-{{type}}"></div>\r\n        </div>\r\n        <div class="assessment-item-details">\r\n          <div class="assessment-item-name">\r\n            <span class="assessment-type-name">{{typeName}} / </span>\r\n            <strong>{{name}}</strong>\r\n          </div>\r\n          <div class="assessment-item-tags-list">\r\n            {{#each tags}}\r\n            <div class="assessment-item-tag" data-key="{{@key}}" data-value="{{this}}">\r\n              <span class="assessment-tag-name">{{@key}}</span>\r\n              <span class="assessment-tag-value">{{this}}</span>\r\n            </div>\r\n            {{/each}}\r\n          </div>\r\n          <div class="assessment-item-instructions">{{instructions}}</div>\r\n        </div>\r\n        <div class="assessment-item-complexity">\r\n          {{#if layout}}\r\n          <span title="Has layout">\r\n            <span aria-hidden="true" class="iconify" data-icon="@codio:mdi:file-plus"></span>\r\n          </span>\r\n          {{/if}}\r\n          {{#if hasParameters}}\r\n          <span title="Has parameters">\r\n            <span aria-hidden="true" class="iconify" data-icon="@codio:mdi:tune-vertical"></span>\r\n          </span>\r\n          {{/if}}\r\n        </div>\r\n        {{#if ../showSelectAssessmentBtn}}\r\n        <div class="assessment-item-action">\r\n          <button class="btn select-assessment-btn">Add</button>\r\n        </div>\r\n        {{/if}}\r\n      </div>\r\n    {{/each}}\r\n  </div>\r\n\r\n{{/equals}}\r\n'),X=d().compile('<form action="/" method="post" onsubmit="return false;">\n  <label for="search-name">Search name</label>\n  <input type="text" id="search-name" name="name" autocomplete="off" required autofocus placeholder="Enter the search name"  maxlength="100">\n</form>\n'),$=d().compile(A),ee=d().compile(T),te={};te[D.ZP.TEST]=d().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3>\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-code-test"/> Advanced Code Test\n      {{#if taskId}}(<span class="task-id">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/advanced-code-test.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  <div class="forms-container">\n    {{> aEditorNavigation}}\n    <div class="form-container assessment-test-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorTestExecutionForm}}\n      {{> aEditorTestGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),te[D.ZP.MULTIPLE_CHOICE]=d().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3>\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-mcq"/> Multiple Choice Question\n      {{#if taskId}}(<span class="task-id">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/multiple-choice.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  <div class="forms-container">\n    {{> aEditorNavigation}}\n    <div class="form-container assessment-multiple-choice-form">\n      {{> aEditorMcqGeneralForm}}\n      {{> aEditorMcqExecutionForm}}\n      {{> aEditorMcqGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),te[D.ZP.FILL_IN_THE_BLANKS]=d().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3>\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-fib"/> Fill in the Blanks\n      {{#if taskId}}(<span class="task-id">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/fill-in-blanks.html#fill-in-blanks" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  <div class="forms-container">\n    {{> aEditorNavigation}}\n    <div class="form-container assessment-fib-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorFibExecutionForm}}\n      {{> aEditorFibGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),te[D.ZP.MATH]=d().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3>\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-math"/> S.T.A.C.K Math Assessment\n      {{#if taskId}}(<span class="task-id">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/math-assessments.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  <div class="forms-container">\n    {{> aEditorMathNavigation}}\n    <div class="form-container assessment-math-stack-form">\n      {{> aEditorMathGeneralForm}}\n      {{> aEditorMathGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),te[D.ZP.FREE_TEXT]=d().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3>\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-free-text"/> Free Text\n      {{#if taskId}}(<span class="task-id">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/free-text.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  <div class="forms-container">\n    {{> aEditorFtNavigation}}\n    <div class="form-container assessment-free-text-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorFtGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),te[D.ZP.FREE_TEXT_AUTO]=d().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3>\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-free-text-auto"/> Free Text Autograde\n      {{#if taskId}}(<span class="task-id">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/autograde-free-text.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  <div class="forms-container">\n    {{> aEditorNavigation}}\n    <div class="form-container assessment-free-text-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorFtaExecutionForm}}\n      {{> aEditorFtaGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),te[D.ZP.CODE_OUTPUT_COMPARE]=d().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3>\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-coc"/> Standard Code Test\n      {{#if taskId}}(<span class="task-id">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/standard-code-test.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  <div class="forms-container">\n    {{> aEditorNavigation}}\n    <div class="form-container assessment-code-output-compare-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorCocExecutionForm}}\n      {{> aEditorCocGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),te[D.ZP.GRADE_BOOK]=d().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3>\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-grade-book"/> Grade Book\n      {{#if taskId}}(<span class="task-id">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/grade-book.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  <div class="forms-container">\n    {{> aEditorGbookNavigation}}\n    <div class="form-container assessment-grade-book-form">\n      {{> aEditorGbookGeneralForm}}\n      {{> aEditorGbookGradingForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),te[D.ZP.PARSONS_PUZZLE]=d().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3>\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-parsons"/> Parsons puzzle\n      {{#if taskId}}(<span class="task-id">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/parsons-puzzle.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  <div class="forms-container">\n    {{> aEditorNavigation}}\n    <div class="form-container assessment-parsons-puzzle-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorParsonsExecutionForm}}\n      {{> aEditorParsonsGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),te[D.ZP.SENSE_NETWORK]=d().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3>\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-sense"/> Sense.Network\n      {{#if taskId}}(<span class="task-id">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/sense-network.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  <div class="forms-container">\n    {{> aEditorSenseNavigation}}\n    <div class="form-container assessment-sense-network-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorSenseExecutionForm}}\n      {{> aEditorSenseGradingForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),te[D.ZP.RANDOM]=d().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3>\n      <i class="svg icon icon-random"/> Random Assessment\n      {{#if taskId}}(<span class="task-id">{{taskId}}</span>){{/if}}\n    </h3>\n    <a href="https://docs.codio.com/instructors/setupcourses/library/search-library.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  <div class="forms-container">\n    {{> aEditorRandomNavigation}}\n    <div class="form-container assessment-random-form">\n      {{> aEditorRandomGeneralForm}}\n      {{> aEditorRandomGradingForm}}\n      {{> aEditorRandomExecutionForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n');var ne=d().compile("<div class=\"form section-settings-confirm-dlg\">\n  {{#if layoutInfo.isPreviousLayoutSelected}}\n  <p>\n    This assessment's layout is currently set to 'Previous'.\n  </p>\n  {{/if}}\n  {{#unless openedInfo.isCloseAll}}\n  <p>\n  'Close Tabs' setting is disabled.\n  </p>\n  {{/unless}}\n  <p>\n    To preserve the currently displayed configuration, this assessment will be saved with\n    the '{{layoutInfo.name}}' layout{{#if openedInfo.opened}} and with the following tabs:{{else}}.{{/if}}\n  </p>\n  {{#if openedInfo.opened}}\n  <ul class=\"section-settings-confirm-opened-list\">\n  {{#each openedInfo.opened}}\n    {{#equals this.type 'file'}}\n    <li>Type - File. Filename - {{this.content}}. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n    {{#equals this.type 'preview'}}\n    <li>Type - Preview. URL - {{this.content}}. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n    {{#equals this.type 'terminal'}}\n    <li>Type - Terminal. Command - {{this.content}}. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n    {{#equals this.type 'tutor'}}\n    <li>Type - Visualizer. Filename - {{this.content}}. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n    {{#equals this.type 'vm'}}\n    <li>Type - Virtual Machine. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n    {{#equals this.type 'vmssh'}}\n    <li>Type - Virtual Machine Ssh Terminal. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n  {{/each}}\n  </ul>\n  {{/if}}\n</div>\n"),ie=d().compile('<div class="form select-library-dlg">\n  <select id="library">\n    <optgroup label="My Libraries">\n      {{#each my}}\n      <option value="{{id}}" {{#if readOnly}}disabled="disabled"{{/if}}>{{name}}</option>\n      {{/each}}\n    </optgroup>\n    <optgroup label="Certified Libraries">\n      {{#each certified}}\n      <option value="{{id}}" {{#if readOnly}}disabled="disabled"{{/if}}>{{name}}</option>\n      {{/each}}\n    </optgroup>\n  </select>\n</div>'),re=d().compile('<div class="assessment-files-list">\n  <p>\n    The following files will be added\n  </p>\n  <ul>\n  {{#each paths}}\n    <li>{{this}}</li>\n  {{/each}}\n  </ul>\n</div>'),ae=d().compile('<div class="media-type media-type--{{type}}">\n  <h3 class="media-header">\n    <i class="media-icon ss-icon">highvolume</i>\n    <span>Audio element</span>\n    {{#if media}}(<span class="media-name">{{media.name}}</span>){{/if}}\n  </h3>\n</div>\n<form class="form form--simple media-form" action="/">\n  <input type="hidden" name="type" id="type" value="{{type}}">\n  <div class="form-fieldset">\n    <label class="form-label" for="name">Name</label>\n    <input\n      type="text"\n      name="name"\n      id="name"\n      value="{{#if media}}{{media.name}}{{/if}}"\n      placeholder="Audio name..."\n      />\n  </div>\n  <div class="form-fieldset media-source-container">\n    <label class="form-label" for="source">Source name</label>\n    <input\n      class="media-source-input"\n      type="file"\n      name="source"\n      id="source"\n      value="{{#if media}}{{media.source}}{{/if}}"\n      placeholder="Source..."\n      />\n    <div class="media-source-controls">\n      <input\n        class="media-source-txt-input"\n        type="text"\n        readonly\n        name="sourceTxt"\n        id="sourceTxt"\n        value="{{#if media}}{{media.source}}{{/if}}"\n        placeholder="Source..."\n      />\n      <a href="javascript:void(0)" class="btn change-source-btn">Change source</a>\n    </div>\n  </div>\n  <div class="form-fieldset form-fieldset-media-disable">\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Disable audio element</span>\n        <input\n          type="checkbox"\n          name="disabled"\n          id="disabled"\n          {{#if media}}{{#if media.disabled}}checked{{/if}}{{/if}}\n          aria-describedby="disabled-label"\n        >\n        <span class="switch-label" aria-hidden="true"></span>\n        <span class="switch-handle" aria-hidden="true"></span>\n      </label>\n      <p class="help-block help-block--guide-settings" id="disabled-label">\n        Disable audio element.\n      </p>\n    </div>\n  </div>\n  <div class="container-direction-column">\n    <div class="media-player invisible">\n      <div class="media-player-disabled"></div>\n      <{{type}} id="editor_media_player" class="video-js vjs-default-skin vjs-default-skin-{{type}}" controls preload="auto"\n         width="800" height="{{#equals type "audio"}}0{{else}}300{{/equals}}">\n      </{{type}}>\n    </div>\n    <div class="media-action-add-button">\n      <a href="javascript:void(0)" class="btn add-action-btn">Add action</a>\n    </div>\n    <div class="media-actions-container">\n      <div class="media-action-item media-action-item-header">\n        <div class="media-action-item-remove media-action-item-cell"></div>\n        <div class="media-action-item-time-container media-action-item-cell">Time</div>\n        <div class="media-action-item-type-container media-action-item-cell">Type</div>\n      </div>\n    </div>\n  </div>\n  <div class="form-footer">\n    <button type="button" id="cancel-btn" class="btn">Cancel</button>\n    <button type="submit" class="btn btn--primary submit-btn">{{#if media}}Save and Close Settings{{else}}Create and Close Settings{{/if}}</button>\n  </div>\n</form>\n'),se=d().compile('<div class="media-action-item">\n  <div class="media-action-item-remove media-action-item-cell">\n    <a\n      href="javascript:void(0)"\n      class="media-action-item-remove-btn"\n      title="Remove action"\n      aria-label="Remove action"\n    >\n      <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n    </a>\n  </div>\n  <div class="media-action-item-time-container media-action-item-cell">\n    <input\n      type="text"\n      name="time"\n      class="media-action-item-time plain-input"\n      value="{{formatSeconds action.time \'mm:ss\'}}"\n    />\n  </div>\n  <div class="media-action-item-type-container media-action-item-cell">\n    <select class="media-action-item-type" name="type">\n      {{#each typeData}}\n      <option value="{{value}}">{{label}}</option>\n      {{/each}}\n    </select>\n  </div>\n  <div class="media-item-action-type-fields"></div>\n</div>\n'),oe=d().compile('<div class="media-source-upload-container">\n  <input class="media-source-upload-input" type="file" accept=".mp3,.ogg">\n  <span class="btn media-source-btn">Upload File</span>\n</div>'),ce=d().compile(b),le=d().compile('<ul class="dropdown-menu pull-right" id="menu-guide-preferences" role="menu">\n\n  <li role="presentation">\n    <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="js-reset-section">Restore current files</a>\n  </li>\n\n  <li id="guides-settings-mark-complete" class="hide"></li>\n\n  <li role="presentation" class="dropdown-submenu pull-left">\n    <a role="menuitem" aria-haspopup="true" aria-expanded="false" href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">Theme</a>\n    <ul class="dropdown-menu dropdown-menu-change-theme" role="menu">\n      {{#each normal_themes}}\n      <li role="presentation">\n        <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="js-change-theme" data-theme="{{id}}">{{name}}</a>\n      </li>\n      {{/each}}\n      <li class="divider"></li>\n      {{#each dyslexic_themes}}\n      <li role="presentation">\n        <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="js-change-theme" data-theme="{{id}}">{{name}}</a>\n      </li>\n      {{/each}}\n    </ul>\n  </li>\n  <li role="presentation" class="dropdown-submenu pull-left">\n    <a role="menuitem" aria-haspopup="true" aria-expanded="false" href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">Font Size</a>\n    <ul class="dropdown-menu dropdown-menu-change-font" role="menu">\n      {{#each font_sizes}}\n      <li role="presentation">\n        <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="js-change-font" data-size="{{this}}">{{this}}</a>\n      </li>\n      {{/each}}\n    </ul>\n  </li>\n\n  <li role="presentation">\n    <a href="javascript:void(0)" class="js-reset-style">Reset font &amp; theme</a>\n  </li>\n\n  <li role="presentation">\n    <a href="javascript:void(0)" class="js-code-comments">Code comments</a>\n  </li>\n\n  {{#if showViewModeToggle}}\n  <li role="separator" class="divider"></li>\n\n  <li role="presentation" class="guides-menu-switcher">\n    <form>\n      <label id="view-as-teacher-label">View as teacher</label>\n      <fieldset>\n        <label class="switch">\n          <span class="visuallyhidden">View as teacher</span>\n          <input type="checkbox" class="js-view-switch" name="view-as-teacher" id="view-as-teacher"\n                 {{#if showAsTeacher}}checked="checked"{{/if}} aria-describedby="view-as-teacher-label"/>\n          <span class="switch-label" aria-hidden="true"></span>\n          <span class="switch-handle" aria-hidden="true"></span>\n        </label>\n      </fieldset>\n    </form>\n  </li>\n  {{/if}}\n</ul>\n'),ue={};ue.highlight=d().compile(x),ue.terminal=d().compile(Z),ue.tutor=d().compile(_),ue.vm=d().compile(k),ue[B.Z.TYPE.VM_SSH]=d().compile(P),ue.preview=d().compile(w),ue.file=d().compile(y);var de={};de.global=d().compile('<form class="form form--simple" action="/">\n  <a href="https://docs.codio.com/instructors/authoring/guides/intro.html#" target="_blank" class="main-form-help-link"><i class="ss-icon">info</i> <span>Need a little help?</span></a>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="scripts">Scripts</label>\n    <textarea name="scripts" id="scripts" >{{scripts}}</textarea>\n  </div>\n\n  <div class="form-fieldset">\n    <a href="#" id="html-header">Edit HTML Header</a>\n    <a href="#" id="html-footer">Edit HTML Footer</a>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="theme">Theme</label>\n    <select name="theme" id="theme" disabled>\n      {{#each themes}}\n      <option value="{{id}}" {{#equals ../theme id}}selected="selected"{{/equals}}>\n      {{name}}\n      </option>\n      {{/each}}\n    </select>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label">Lexikon Topic</label>\n    <input type="text" name="lexikon_topic" {{#if lexikonTopic}}value="{{lexikonTopic}}"{{/if}}/>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="suppress-page-numbering">Suppress page numbering</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Suppress page numbering</span>\n        <input\n          type="checkbox"\n          name="suppressPageNumbering"\n          id="suppress-page-numbering"\n          {{#if suppressPageNumbering}}checked{{/if}}\n          aria-describedby="suppress-page-numbering-label"\n        >\n        <span class="switch-label" aria-hidden="true"></span>\n        <span class="switch-handle" aria-hidden="true"></span>\n      </label>\n      <p class="help-block help-block--guide-settings" id="suppress-page-numbering-label">\n        Do not show section numbers.\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="hide-menu">Hide menu</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Hide top menu</span>\n        <input\n          type="checkbox"\n          name="hideMenu"\n          id="hide-menu"\n          {{#if hideMenu}}checked{{/if}}\n          aria-describedby="hide-menu-label"\n        >\n        <span class="switch-label" aria-hidden="true"></span>\n        <span class="switch-handle" aria-hidden="true"></span>\n      </label>\n      <p class="help-block help-block--guide-settings" id="hide-menu-label">\n        Hide top menu.\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="allow-guide-close">Allow Guide to be closed</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Allow guides to be closable</span>\n        <input\n          type="checkbox"\n          name="allowGuideClose"\n          id="allow-guide-close"\n          {{#if allowGuideClose}}checked{{/if}}\n          aria-describedby="allow-guide-close-label"\n        >\n        <span class="switch-label" aria-hidden="true"></span>\n        <span class="switch-handle" aria-hidden="true"></span>\n      </label>\n      <p class="help-block help-block--guide-settings" id="allow-guide-close-label">\n        Allow Guide to be closable.\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="use-submit-buttons">Use Submit buttons</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Use submit button</span>\n        <input\n          type="checkbox"\n          name="useSubmitButtons"\n          id="use-submit-buttons"\n          {{#if useSubmitButtons}}checked{{/if}}\n          aria-describedby="use-submit-buttons-label"\n        >\n        <span class="switch-label" aria-hidden="true"></span>\n        <span class="switch-handle" aria-hidden="true"></span>\n      </label>\n      <p class="help-block help-block--guide-settings" id="use-submit-buttons-label">\n        Use Submit buttons.\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="use-mark-as-complete">Use Mark as complete</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Use Mark as complete</span>\n        <input\n          type="checkbox"\n          name="useMarkAsComplete"\n          id="use-mark-as-complete"\n          {{#if useMarkAsComplete}}checked{{/if}}\n          aria-describedby="use-mark-as-complete-label"\n        >\n        <span class="switch-label" aria-hidden="true"></span>\n        <span class="switch-handle" aria-hidden="true"></span>\n      </label>\n      <p class="help-block help-block--guide-settings" id="use-mark-as-complete-label">\n        Show mark as complete.\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="collapsed-on-start">Collapsed on start</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Collapsed on start</span>\n        <input\n          type="checkbox"\n          name="collapsedOnStart"\n          id="collapsed-on-start"\n          {{#if collapsedOnStart}}checked{{/if}}\n          aria-describedby="collapsed-on-start-label"\n        >\n        <span class="switch-label" aria-hidden="true"></span>\n        <span class="switch-handle" aria-hidden="true"></span>\n      </label>\n      <p class="help-block help-block--guide-settings" id="collapsed-on-start-label">\n        Collapse Guide on start\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="allow-guide-close">Hide sections toggle</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Hide sections toggle</span>\n        <input\n          type="checkbox"\n          name="hideSectionsToggle"\n          id="hide-sections-toggle"\n          {{#if hideSectionsToggle}}checked{{/if}}\n        >\n        <span class="switch-label"></span>\n        <span class="switch-handle"></span>\n      </label>\n      <p class="help-block help-block--guide-settings">\n        Hide sections toggle\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="allow-guide-close">Hide "Back to dashboard" button</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Hide "Back to dashboard" button</span>\n        <input\n          type="checkbox"\n          name="hideBackToDashboard"\n          id="hide-back-to-dashboard"\n          {{#if hideBackToDashboard}}checked{{/if}}\n        >\n        <span class="switch-label"></span>\n        <span class="switch-handle"></span>\n      </label>\n      <p class="help-block help-block--guide-settings">\n        Hide "Back to dashboard" button\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="allow-guide-close">Protect layout</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Protect layout</span>\n        <input\n                type="checkbox"\n                name="protectLayout"\n                id="protect-layout"\n                {{#if protectLayout}}checked{{/if}}\n        >\n        <span class="switch-label"></span>\n        <span class="switch-handle"></span>\n      </label>\n      <p class="help-block help-block--guide-settings">\n        Prevent tabs closing by students\n      </p>\n    </div>\n  </div>\n\n  <div class="form-footer">\n    <button type="button" id="cancel-btn" class="btn">Cancel</button>\n    <button type="submit" class="btn btn--primary">Save and Close Settings</button>\n  </div>\n</form>\n'),de["configure-layout"]=d().compile('<form class="form form--simple configure-layout-form" action="/">\n  <div class="page-settings-container">\n    <div class="page-settings-layout-dd-container">\n      <div class="form-fieldset">\n        <label class="form-label" for="layout">Layout</label>\n        <select name="layout" id="layout" class="layout-select-control" >\n          <option value="" {{#equals layout ""}}selected="selected"{{/equals}}>\n          Previous\n          </option>\n          {{#each layouts}}\n          <option value="{{@key}}" {{#equals ../layout @key}}selected="selected"{{/equals}}>\n          {{this}}\n          </option>\n          {{/each}}\n        </select>\n      </div>\n    </div>\n    <div class="page-settings-layout-column-2">\n      <div class="js-show-file-tree form-fieldset {{#equals layout ""}}hide{{/equals}}">\n        <label class="form-label" for="showFileTree">Show file tree</label>\n        <div class="help-block-wrapper">\n          <label class="switch">\n            <span class="visuallyhidden">Show file tree</span>\n            <input type="checkbox" name="showFileTree" id="showFileTree" {{#if showFileTree}}checked{{/if}} />\n            <span class="switch-label" aria-hidden="true"></span>\n            <span class="switch-handle" aria-hidden="true"></span>\n          </label>\n        </div>\n      </div>\n      <div class="js-show-folders form-fieldset {{#unlessEq layout ""}}{{#unless showFileTree}}hide{{/unless}}{{/unlessEq}}">\n        <label class="form-label" for="step">Show Folders</label>\n        <input\n          type="text"\n          name="step"\n          id="step"\n          value="{{step}}"\n          placeholder="Put a path here"\n        />\n      </div>\n      <div class="js-guides-on-left form-fieldset {{#equals layout ""}}hide{{/equals}}">\n        <label class="form-label" for="guidesOnLeft">Guides on left</label>\n        <div class="help-block-wrapper">\n          <label class="switch">\n            <span class="visuallyhidden">Guides on left</span>\n            <input type="checkbox" name="guidesOnLeft" id="guidesOnLeft" {{#if guidesOnLeft}}checked{{/if}}/>\n            <span class="switch-label" aria-hidden="true"></span>\n            <span class="switch-handle" aria-hidden="true"></span>\n          </label>\n        </div>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label" for="close-all">Close Tabs</label>\n        <div class="help-block-wrapper">\n          <label class="switch">\n            <span class="visuallyhidden">Close Tabs</span>\n            <input type="checkbox" name="closeAll" id="close-all" {{#if closeAll}}checked{{/if}} aria-describedby="close-all-label">\n            <span class="switch-label" aria-hidden="true"></span>\n            <span class="switch-handle" aria-hidden="true"></span>\n          </label>\n          <p class="help-block help-block--guide-settings" id="close-all-label">\n            Close all tabs when the user enters this section.\n          </p>\n        </div>\n        <div class="js-close-terminal-session-container {{#unless closeAll}}hide{{/unless}}">\n          <label class="form-label" for="close-terminal-session">Close Terminal Session</label>\n          <div class="help-block-wrapper">\n            <label class="switch">\n              <span class="visuallyhidden">Close Terminal Session</span>\n              <input type="checkbox" name="closeTerminalSession" id="close-terminal-session" {{#if closeTerminalSession}}checked{{/if}} aria-describedby="close-terminal-session-label">\n              <span class="switch-label" aria-hidden="true"></span>\n              <span class="switch-handle" aria-hidden="true"></span>\n            </label>\n            <p class="help-block help-block--guide-settings" id="close-terminal-session-label">\n              Close terminal session when the user enters this section.\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="page-settings-layout-column-3">\n      <div class="form-fieldset">\n        <label class="form-label">Content Type</label>\n        <select name="contentType" id="content-type" >\n          {{#each contentTypes}}\n          <option value="{{id}}" {{#equals ../contentType id}}selected="selected"{{/equals}}>\n          {{name}}\n          </option>\n          {{/each}}\n        </select>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label">Teacher only</label>\n        <div class="help-block-wrapper">\n          <label class="switch" for="teacher-only">\n            <span class="visuallyhidden">Teacher only</span>\n            <input type="checkbox" name="teacherOnly" id="teacher-only" {{#if\n                   teacherOnly}}checked{{/if}} aria-describedby="teacher-only-label">\n            <span class="switch-label" aria-hidden="true"></span>\n            <span class="switch-handle" aria-hidden="true"></span>\n          </label>\n          <p class="help-block help-block--guide-settings" id="teacher-only-label">\n            The page will be shown only for teachers.\n          </p>\n        </div>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label" for="learningObjectives">Learning Objectives</label>\n        <input\n          class="learningObjectives-textarea"\n          type="text"\n          name="learningObjectives"\n          id="learningObjectives"\n          value="{{#if learningObjectives}}{{learningObjectives}}{{/if}}"\n        />\n      </div>\n    </div>\n  </div>\n  <div class="open-tabs-container">\n    <hr />\n    <h4>Open Tabs</h4>\n    <a href="javascript:void(0)" class="btn add-btn">Add Tab</a>\n    <ul class="list files">\n      {{#each files}}\n      {{> fileInput}}\n      {{/each}}\n    </ul>\n  </div>\n  <div class="form-footer">\n    <button type="button" id="cancel-btn" class="btn">Cancel</button>\n    <button type="submit" class="btn btn--primary">Save and Close Settings</button>\n  </div>\n</form>\n');var pe={"1-panel":"1 Panel","2-panels":"2 Panels","3-columns":"3 Columns","3-cell":"3 Panels","4-cell":"4 Panels"};var fe=function(e,t){var n=R.aI;return e===n.PAUSE||e===n.CLOSE_ALL?o()():o()(H[e]({action:t}))},he=g.ZP.markdown.updateIframeCss,me=function(){var e=(0,i.Z)(a().mark((function e(t,n,i,r){var s,o,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=8;break}return s=r.suppressPageNumbering||n.suppressPageNumbering,o=M.ZP.generateTitle(i,s),(c=t.find("div.main h1.title")).text(o),c.data("id",i.id),l=t.find("div.item-content"),e.abrupt("return",ge({metadata:n,section:i,container:l,isScrollReset:!0,suppressPageNumbering:s,useSubmitButtons:n.useSubmitButtons,useMarkAsComplete:n.useMarkAsComplete,hideBackToDashboard:n.hideBackToDashboard,anchor:r.anchor,layoutInfo:r.layoutInfo}));case 8:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}(),ge=function(e){var t=e.section,n=e.container,i=e.isScrollReset,r=e.theme,a=e.suppressPageNumbering,s=e.useSubmitButtons,o=e.useMarkAsComplete,c=e.hideBackToDashboard,u=e.anchor,d=e.layoutInfo,f=e.skipFocusOnSectionChange,h=M.ZP.generateTitle(t,a),m=t.contentType,v=p.Z.currentProject;switch(m){case L.ZP.CONTENT_TYPE_HTML:var b=[];return v.exists(L.ZP.CONTENT_HEADER_FILE)&&b.push(L.ZP.CONTENT_HEADER_FILE),b.push(t.contentPath),v.exists(L.ZP.CONTENT_FOOTER_FILE)&&b.push(L.ZP.CONTENT_FOOTER_FILE),g.ZP[m].render(n,b,u);case L.ZP.CONTENT_TYPE_MARKDOWN:var y=null;if(v.eduStartedAssignmentInfo){var w=v.guides.bookStructure.children,_=w?U.Z.flatPages(w):[],k=l().findIndex(_,{pageId:t.id});if(-1!==k){var P=_[k],Z=v.sortedBookPages,x=e.metadata.getSections(),C=l().findIndex(x,(function(e){return e.id===t.id}))+1;y={isLastUnitPage:!l().isEmpty(Z)&&l().last(Z)===P.id,isUnitPage:l().includes(Z||[],P.id),currentPage:C,totalNumberOfPages:x.length}}}return t.contentModel.then((function(e){return g.ZP[m].render(n,r,h,e.getValue(),{isScrollReset:i,pageInfo:y,useSubmitButtons:s,useMarkAsComplete:o,hideBackToDashboard:c,sectionId:t.id,layoutInfo:d,skipFocusOnSectionChange:f})}))}};var ve=function(e){return o()(ee({source:e}))};O();const be={renderMediaActionTypeFields:fe,renderPlayer:function(e,t,n,i){return o()(W({isRegistered:p.Z.currentUser&&!p.Z.currentUser.isAnonymous(),settingsMenu:e,showLexicon:t,teacherInStudentUnit:F.ZP.isUnit()&&F.ZP.isTeacher()&&!p.Z.currentProject.isOwner,isStudent:F.ZP.isUnit()&&!F.ZP.isTeacher(),showCollapse:n,hideSectionsToggle:i}))},updateIframeCss:he,renderPlayerItem:me,renderBody:ge,renderEditorItem:function(e,t,n){return o()(z({title:M.ZP.generateTitle(e),item:e.json,showSplitview:e.json.type!==L.ZP.CONTENT_TYPE_HTML,sections:t,isBookWriter:p.Z.currentProject.isBookWriter,isBook:p.Z.currentProject.isBook,isSplitView:"splitview"===n}))},renderSettings:function(){return o()(G())},renderAssessmentsDropdown:function(e,t,n,i,r){return o()(V({canCreate:e,isHtml:t,showLibrary:n,showMath:i,showSense:r}))},renderAssessmentList:function(e){return o()(K({assessments:e}))},renderLibraryBrowserDlgContent:function(e,t){return o()(Y({libraries:e,searches:t}))},renderEmptyTagValueControls:function(){return o()(J())},renderAssessmentLibraryItemsList:function(e,t,n){return o()(Q({items:e,search:t,showSelectAssessmentBtn:n}))},renderSaveSearchDlgContent:function(){return o()(X())},renderFavoritesDdItems:function(e){return o()($({searches:e}))},renderAssessmentEditor:function(e){!function(e){if(e.source||(e.source={}),e.source.oneTimeTest&&(e.source.maxAttemptsCount=1),e.type!==D.ZP.RANDOM&&(l().isUndefined(e.source.showName)&&(e.source.showName=!0),l().isEmpty(e.source.bloomsObjectiveLevel)&&delete e.source.bloomsObjectiveLevel,l().isUndefined(e.source.showExpectedAnswer)&&(e.source.showExpectedAnswer=!0)),l().isUndefined(e.source.metadata))e.source.metadata={},e.source.metadata.tags=l().map(N.ZP.REQUIRED_TAGS,(function(e){return{name:e,value:"",required:!0}}));else{var t=[],n={};l().each(N.ZP.REQUIRED_TAGS,(function(t){n[t]=!0,l().find(e.source.metadata.tags,{name:t})||e.source.metadata.tags.push({name:t,value:"",required:!0})})),l().each(e.source.metadata.tags,(function(i){if(N.ZP.AUTO_TAGS[i.name])switch(i.name){case N.ZP.BLOOMS_LEVEL_TAG:e.source.bloomsObjectiveLevel=l().invert(N.ZP.BLOOMS_LEVEL)[i.value];break;case N.ZP.LEARNING_OBJECTIVES_TAG:e.source.learningObjectives=i.value}else n[i.name]&&(i.required=!0),t.push(i)})),e.source.metadata.tags=t}}(e);var t=te[e.type];switch(e.type){case D.ZP.TEST:if(e.advancedType="custom",e&&e.source&&e.source.codeEnvConfig)try{var n=JSON.parse(e.source.codeEnvConfig);e.advancedTypeConfig=n,e.advancedType=n.type}catch(e){}break;case D.ZP.MULTIPLE_CHOICE:e.source.answers||(e.source.answers=[{correct:!0},{}]),l().isUndefined(e.source.maxAttemptsCount)&&(e.source.maxAttemptsCount=1);break;case D.ZP.FILL_IN_THE_BLANKS:l().isUndefined(e.source.maxAttemptsCount)&&(e.source.maxAttemptsCount=1);break;case D.ZP.CODE_OUTPUT_COMPARE:e.source.sequence||(e.source.sequence=[{}]),void 0===e.source.options&&(e.source.options={ignoreCase:!0,ignoreWhitespaces:!0});break;case D.ZP.PARSONS_PUZZLE:l().isEmpty(e.source.grader)&&delete e.source.grader}return o()(t(e))},renderSectionSettingsConfirmDlgContent:function(e,t){return e.name=h.Z.defs[e.layout].name,o()(ne({layoutInfo:e,openedInfo:t}))},renderSelectLibraryDlgContent:function(e){return o()(ie(e))},renderAssessmentFilesList:function(e){return o()(re({paths:e}))},renderMediaForm:function(e,t){var n={media:e,type:t=e?e.type:t};return o()(ae(n))},renderMediaActionItem:function(e){var t=o()(se({action:e,typeData:R.UP}));t.find(".media-action-item-time").inputmask({mask:"59:59",definitions:{5:{validator:"[0-5]"}}});var n=e.type||R.aI.FILE_OPEN;e.type&&t.find(".media-action-item-type").val(e.type);var i=fe(n,e);return t.find(".media-item-action-type-fields").append(i),t},renderMediaUploadContainer:function(){return o()(oe())},fileInput:function(e,t){return o()(ce({index:f.ZP.GUID(),type:t||"file",panel:0}))},inputArgs:function(e){return o()(ue[e]({panel:0}))},cleanup:function(){},playSettingsMenu:function(e,t,n){var i=p.Z.currentProject;return le({normal_themes:e,dyslexic_themes:t,font_sizes:n,showViewModeToggle:i.isAuthorProject||F.ZP.isPreview()||i.isOwner&&!i.eduStartedAssignmentInfo,showAsTeacher:F.ZP.showAsTeacher()})},settingsForm:function(e,t){var n=t.files;t.closeAll=function(e){return l().some(e,(function(e){return e.path.match(/^#tabs/)}))}(n),t.files=l().map(l().filter(n,{action:"open"}),(function(e,t){var n,i,r=e.json;return r.index=t,r.type=function(e){var t=e.path.match(/^#([^\s:]*):\s(.*)/);return t?t[1]:e.ref&&e.lineCount?"highlight":"file"}(e),r.arg=(n=e.path,(i=n.match(/^#([^\s:]*):\s(.*)/))?i[2]:n),r})),t.layouts=pe,t.themes=l().filter(m.Z.themes(),{dyslexic:!1}),t.contentTypes=q,t.step=t.paths,t.isBookWriter=p.Z.currentProject.isBookWriter;var i=de[e];return o()(i(t))}}},98053:(e,t,n)=>{"use strict";n.d(t,{Z:()=>re});var i=n(4942),r=n(52308),a=n.n(r),s=n(96486),o=n.n(s),c=n(49721),l=n(60989),u=n(95611),d=n(20294),p=n(97137),f=n(44442),h=n(51751),m=n(33732),g=n(76900),v=n(58471),b=n(93443),y=n(72375),w=n(18914),_=n(73687),k=n(70623),P=n(85886),Z=n(15671),x=n(43144),C=n(177),S=n.n(C);var E=S().compile('<div class="image-modal-container">\n</div>\n'),I=S().compile('<div\n  id="{{id}}"\n  class="image-modal image-modal-initial"\n  tabindex="-1"\n  role="dialog"\n  aria-modal="true"\n  aria-hidden="false"\n>\n  <div tabindex="0"></div>\n  <div class="image-modal-content">\n    <button class="image-modal-close-btn" aria-label="Close image">\n      <span class="iconify" data-icon="@codio:mdi:close-thick"></span>\n    </button>\n    <div class="image-modal-show-area" tabindex="0">\n      <img class="image-modal-large-image" src="{{url}}" alt="Full size image">\n    </div>\n  </div>\n  <div tabindex="0"></div>\n</div>\n');const T=function(){function e(t){(0,Z.Z)(this,e),this.id=d.ZP.GUID(),this.modal=a()(I({id:this.id,url:t}))}return(0,x.Z)(e,[{key:"_onResize",value:function(){var e=a()(window),t=(e.width()-this.modal.width())/2,n=(e.height()-this.modal.height())/2;this.modal.css("left",t).css("top",n)}},{key:"_bindEvents",value:function(){var e=this,t=this.modal.find(".image-modal-large-image"),n=this.modal,i=a()(window),r=this;t.load((function(){var e=a()(this).get(0),t=.95*i.width()/e.naturalWidth,s=.95*i.height()/e.naturalHeight;(t<1||s<1)&&((t<s||t===s)&&n.css("width","95%"),(s<t||t===s)&&n.css("height","95%")),n.removeClass("image-modal-initial"),r.trapFunction=d.ZP.addTrapFocus(".image-modal-content",r.modal),r._onResize(),r.onResizeThrottled=o().throttle((function(){return r._onResize()}),500),r.observer=new ResizeObserver(r.onResizeThrottled),r.observer.observe(document.body)})),this.modal.find(".image-modal-close-btn").click((function(){return e.close()})),b.Z.on(i,"click.image-modal.".concat(this.id),(function(t){a()(t.target).closest("#".concat(e.id)).length||e.close()})),b.Z.on(document,"keydown.image-modal".concat(this.id),(function(t){27===t.keyCode&&e.close()}))}},{key:"getModalContainer",value:function(){var e=a()("body"),t=e.find(".image-modal-container");return t.length||(t=a()(E()),e.append(t)),t}},{key:"open",value:function(){a()("body").block({showSpinner:!1}),this.getModalContainer().append(this.modal),this.modal.focus(),this._bindEvents()}},{key:"close",value:function(){d.ZP.removeTrapFocus(this.trapFunction),this.onResizeThrottled&&this.onResizeThrottled.cancel(),this.onResizeThrottled=null,this.modal.remove(),b.Z.off(a()(window),"click.image-modal.".concat(this.id)),b.Z.off(document,"keydown.image-modal.".concat(this.id)),this.observer&&this.observer.disconnect(),this.observer=null,a()("body").unblock()}}]),e}();function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=l.ZP.CourseManager,D=l.ZP.UserEventManager,N=n(68058).I_,M=m.ZP.markdown,F=m.ZP.remote,R=n(27726)._3,L=b.Z.create(n(10742)),U=n(79703).OK,B={load:function(e){e.loadComplete()},codioLinkClick:function(e,t){D.create(D.EventType.LINK_WITH_COMMAND,A(A({},k.Z.constructBasicEvent()),{},{command:t.cmd,caption:t.caption,sectionId:e._sectionId})).catch((function(e){var t=e.message;return p.Z.error(t)})),M.onLinkPress(t.action,t.cmd)},codioButtonClick:function(e,t){e.runButton(t)},codioGradeAssessment:function(e,t){L.showGradeAssessment({id:t.id})},codioExpandOutput:function(e,t){L.assessmentExpandOutput(t)},codioAssessmentButtonClick:function(e,t){L.codioAssessmentBtnClick();var n=d.ZP.promise.deferred(),i=c.Z.currentProject.guides&&c.Z.currentProject.guides.assessments;if(!t.type&&t.task&&!o().isEmpty(i)){var r=o().find(i,(function(e){return e.taskId===t.task}));t.type=r&&r.type}var a=t.type===g.ZP.FREE_TEXT,s=t.type===g.ZP.FREE_TEXT_AUTO,l=t.type===g.ZP.FILL_IN_THE_BLANKS,u=t.type===g.ZP.MULTIPLE_CHOICE,p=t.type===g.ZP.PARSONS_PUZZLE;if(t.type===g.ZP.SENSE_NETWORK){t.solution="";var f=t.filename||c.Z.currentEditor&&c.Z.currentEditor.filename;f?c.Z.currentProject.getFile(f).then((function(e){t.solution=e})).finally((function(){n.resolve()})):n.resolve()}else n.resolve();var h=c.Z.currentProject.guid+":assessment_notice"+(t.showWarning?"_test":""),m=!1;if(t.showWarning&&!N.get(h)){var b=a?"Submit Answer":"Check It",y=function(i){if(!i){var r;if(a||l||u||s||p){var o=e._buttons[t.id].data;o.result||(o.result={}),r=o.result}else r=e._buttons[t.id].data;return r.result={state:"reset",timestamp:(new Date).getTime()},e._refresh(e),!0}N.set(h,!0),n.promise.then((function(){e.runAssessmentAction(t)}))};v.Z.showConfirm({title:"Attention",description:'Please be aware that you can make only one attempt to answer this question. Once you submit the answer by clicking the "'+b+'" button, you cannot change it again.',doNotCloseOpened:!0,onHide:function(){if(!m)return y(!1);m=!1},onClose:function(e){return m=!0,y(e)}})}else n.promise.then((function(){e.runAssessmentAction(t)}))},codioAssessmentSaveState:function(e,t){var n=e._buttons[t.id];n&&(n.data||(n.data={result:{}}),n.data.result||(n.data.result={}),n.data.result.state=t.state),R.saveState(t.taskId,t.state,e).catch((function(e){var t=e.message;return p.Z.error(t)}))},codioAssessmentReset:function(e,t){R.reset(t.id).catch((function(e){var t=e.message;return p.Z.error(t)}))},codioRandomAssessmentPreview:function(e,t){var n=t.source,i=n.libraryId,r=n.search;L.librarySearchPreview({libraryId:i,search:r})},codioAssessmentsUnblock:function(e){if(c.Z.currentProject.penalty){var t=c.Z.currentProject.penalty.id,n=c.Z.currentProject.penalty.percent;v.Z.showConfirm({title:"Penalty warning",buttons:v.Z.MB_OKCANCEL,description:"Deadline "+t+" has been reached. This deadline carries a penalty of "+n+"%. If you proceed, a "+n+'% penalty deduction will be applied to your overall results. You will then be able to modify as many questions as you like with no additional penalty<br/>Please type "yes" into the box below.',captcha:!0,captchaValue:"yes",placeholder:"Enter: yes",onClose:function(t){if(t)return c.Z.currentProject.penaltyApprovedDate=new Date,O.updatePenaltyApprovedDate(c.Z.currentProject.guid).then((function(){p.Z.notify("approved"),H(e)})).catch((function(e){p.Z.error(e.message)}))}})}},codioAssessmentModify:function(e,t){"DONE"===t.status?v.Z.showWarning({description:"You are not able to modify this question as it has already been graded.<br/><br/>You will need to contact your teacher to request them to allow further modifications.",buttons:v.Z.MB_OK,doNotCloseOpened:!0,width:700}):v.Z.showConfirm({title:"Modify Answer",description:"You may modify your answer but you must resubmit after making your modifications.<br/><br/>You should be aware that the submit date will change to the date of the new submission.",onClose:function(e){return e&&(y.Z.getEduStartedAssignmentInfo()?R.modify(t.id):R.reset(t.id,!0)),!0}})},codioAssessmentValidate:function(e,t){e.setUpdateAssessmentState(t.id,"progress","Please wait while we check your answer…"),R.saveState(t.taskId,t.state,e).then((function(){return R.validateMath(t.taskId,t.state,e)})).catch((function(e){var t=e.message;return p.Z.error(t)}))},codioNextButtonClick:function(e){q("goToNextSection",e)},onScroll:function(e,t){e._scroll=t},onClick:function(e){q("iframeClick",e)},onLineMap:function(e,t){e._lineMap=t},scrollInfo:function(e,t){e._scrollHeight=t.scrollHeight,e._height=t.height},buttonState:function(e,t){e.setButtonState(t.id,t.state,t.value)},switchUnit:function(e,t){t.id&&q("switchUnit",e,{unitId:t.id})},backToDash:function(e){q("backToDash",e)},switchOutputView:function(e){q("switchOutputView",e)},markAsCompleted:function(e,t){t.completed?L.markAsCompleted():L.markAsUncompleted()},onFootnoteClick:function(e,t){e._anchor=t,e._iframe.attr("src",$(e))},onImageClick:function(e,t){new T(t).open()},openTab:function(e,t){new U(t.type,t.content,t.panelNumber).open(w.Z.getPanel.bind(null,w.Z.getLayout()))},goToNextSection:function(e){q("goToNextSection",e)},resetCurrentFiles:function(e){q("resetCurrentFiles",e)},goToPreviousSection:function(e){q("goToPreviousSection",e)},goToSectionTitled:function(e,t){q("goToSectionByTitle",e,{sectionTitle:t.sectionTitle})},goToSection:function(e,t){q("goToSectionById",e,{sectionId:t.sectionId,optionalAnchor:t.optionalAnchor})},closeAllTabs:function(){c.Z.ide.panels.closeAllTabs(["filetree","guides","guides-edit"])},closeTab:function(e,t){b.Z.publish("tab:close_by_path:"+t.path)},runInBox:function(e,t){m.ZP.remote.run(t.cmd).then((function(n){Q(e,"callback",{id:t.id,result:n})})).catch((function(n){var i=n.message;Q(e,"callback",{id:t.id,error:i})}))},checkAssessment:function(e,t){B.codioAssessmentButtonClick(e,{task:t.id,id:d.ZP.hashCode(t.id+"assessment",!0)})},sendAssessment:function(e,t){R.check(t.id,g.ZP.CUSTOM,{points:t.points,answer:t.answer},e).then((function(n){Q(e,"callback",{id:t.callbackId,error:!1,result:n})}))},getAssessment:function(e,t){R.fetchGuideState().then((function(n){var i=o().find(n,{taskId:t.id});Q(e,"callback",{id:t.callbackId,error:!1,result:i&&i.result&&i.result.result})})).catch((function(n){var i=n.message;Q(e,"callback",{id:t.callbackId,error:i})}))},onKeyDown:function(e,t){f.Z.hotkey.emulateKey(t)},getFile:function(e,t){(function(e){var t=c.Z.currentProject;if(!t)return Promise.reject(new Error("No Project Opened"));if(e=(0,d.qg)(e),!t.exists(e))return Promise.reject(new Error("File does not exist"));return t.file(e)})(t.path).then((function(n){Q(e,"loadFile",{content:n.content,args:t})}))},saveFile:function(e,t){(function(e,t){var n=c.Z.currentProject;if(!n)return Promise.reject(new Error("No Project Opened"));if(e=(0,d.qg)(e),!n.exists(e))return Promise.reject(new Error("File not found"));return n.file(e).then((function(e){if(e.content===t)return Promise.reject(new Error("File content does not changed"));e.content=t})).then(d.ZP.promise.delay(50)).then((function(){return u.Z.saveAllAndWait()})).catch((function(){return Promise.resolve()}))})(t.path,t.content).then((function(){Q(e,"saveFile",{args:t})}))},renderCompleted:function(e){e._debouncedSetContent()}};function q(e,t,n){L[e](o().assign(n,{iframeId:t.id}))}function H(e){e._lineMap={};var t=e.content,n=c.Z.currentProject,i=n.penalty,r=y.Z.getEduStartedAssignmentInfo(),s=r&&r.started.completed,o=s&&s.completed,l=n.penaltyApprovedDate,u=n.penaltyExtendMin,d=!e.useMarkAsComplete&&i&&(!l||l&&new Date(i.date.getTime()+6e4*u)>l),p=c.Z.currentProject.pairProgramming,f=!(p&&p.enabled)||!c.Z.collaborationDriverId||c.Z.collaborationDriverId===c.Z.currentUser.account,h=null;e.resetAnswers&&(h=e.resetAnswers,e.resetAnswers=null),Q(e,"setContent",{html:t,buttons:e.buttons,css:e.css,scroll:e.scroll,fontSize:e.fontSize,scripts:e.scripts,dyslexicBar:e.dyslexicBar,title:e.title,showNext:!e.isExpandedOutput&&!a()(".guides-button-next").is("[".concat(P.xu,"]")),contentType:e._contentType,showAsTeacher:_.ZP.showAsTeacher(),isBookReader:n.isBookReader,pageInfo:e.pageInfo,useSubmitButtons:e.useSubmitButtons,hideBackToDashboard:e.hideBackToDashboard,disableAssessments:!o&&d,sectionId:e.sectionId,layoutInfo:e.layoutInfo,skipFocusOnSectionChange:e.skipFocusOnSectionChange,eduStartedAssignment:r,assignmentRubrics:y.Z.getAssignmentRubrics(),completeBtnState:y.Z.getCompleteBtnInfo(),isDriverOrSingleMode:f,isExpandedOutput:e.isExpandedOutput,expandOutputSwitchText:e.expandOutputSwitchText,isWritableCopy:n.writableCopy,resetAnswers:h})}function W(e,t,n){e.ready.then((function(){!function(e,t){Q(e,"loadUnits",{units:t})}(e,n)}))}function z(e){e&&(e.fontSize=f.Z.get("guides").font_size)}function G(e){e.ready.then((function(){!function(e,t){Q(e,"setCompleteBtnState",{completeBtnState:t})}(e,y.Z.getCompleteBtnInfo())}))}function V(e,t,n){e.ready.then((function(){!function(e,t){Q(e,"loadEduStartedAssignment",{eduStartedAssignment:t})}(e,n)}))}var K=function(e,t,n){e.ready.then((function(){return J(e,n)}))};function Y(e){e.useMarkAsComplete||H(e)}var J=function(e,t){Q(e,"loadAssignmentRubrics",{assignmentRubrics:t})};function Q(e,t,n){var i=e._iframe[0];if(i.contentWindow){var r={action:t,args:n},a=window.location.protocol,s=JSON.stringify(r),o=a+e._iframe.attr("src");i.contentWindow.postMessage(s,o)}}function X(e){try{var t=JSON.parse(e.data),n=t.id,i=a()("#"+n).data("instance");o().isUndefined(i)||o().defer((function(){!function(e,t){var n=t.action,i=t.args;o().isFunction(B[n])&&B[n](e,i)}(i,t)}))}catch(e){}}function $(e,t,n){var i={id:e._id,origin:window.location.origin};n=n?"&"+n:"";var r=t||"__guides__.html";return"//"+c.Z.currentProject.backendDomain+"/"+r+"?"+a().param(i)+n+(o().isEmpty(e._anchor)?"":"#"+e._anchor)}function ee(e){e.ready.then((function(){H(e)}))}function te(e){return e?o().map(e,(function(e){return"path="+encodeURIComponent(e)})).join("&"):null}window.addEventListener("message",X,!1);var ne=function(e,t){var n=this,i=te(t.paths),r=t.url;this._id=d.ZP.GUID();var s=y.Z.getEduStartedAssignmentInfo(),l=y.Z.getAssignmentRubrics();this._refresh=o().debounce(ee,10),this._container=e,this._anchor=t.anchor,this._useLoadCallback=t.useLoadCallback;var u=function(e,t,n,i){var r=$(e,n,i),s=a()('<iframe id="'.concat(e._id,'"\n            allowFullScreen="allowFullScreen"\n            allow="camera \'src\';microphone \'src\'"\n            frameBorder="0"\n            name="guides"\n            title="Guides Player"\n            class="guides-iframe"\n            src="').concat(r,'">\n      </iframe>'));return e._useLoadCallback&&s.on("load",(function(){return e.loadComplete()})),t.append(s),s}(this,e,r,i);u.data("instance",this),this._iframe=u,this._ready=d.ZP.promise.deferred(),this._readyPromise=this._ready.promise,this._lineMap={},this._buttons={},this._dyslexicBar=!1,this._scripts=[],this._fontSize=f.Z.get("guides").font_size,this._contentType=t.contentType,this._pageInfo=null,this._resetAnswers=null,this._isExpandedOutput=t.isExpandedOutput,this._expandOutputSwitchText=t.expandOutputSwitchText,this._setContentDfd=d.ZP.promise.deferred(),this._setContentPromise=this._setContentDfd.promise,this._debouncedSetContent=o().debounce((function(){n._setContentDfd.resolve()}),1e3),G(this),b.Z.subscribe("settings:loaded",z.bind(this,this)),b.Z.subscribe("guides:units_loaded",W.bind(this,this)),b.Z.subscribe("project:penaltyUpdated",Y.bind(this,this)),b.Z.subscribe("education:set_completed",G.bind(this,this)),s?V(this,0,s):b.Z.subscribe("education:edu_started_assignment_info_loaded",V.bind(this,this)),l?K(this,0,l):b.Z.subscribe("education:rubricsLoaded",K.bind(this,this));var p=c.Z.currentProject.pairProgramming;p&&p.enabled&&b.Z.subscribe("collaboration:driverUpdated",this._refresh.bind(this,this))},ie=ne.prototype;ie.loadComplete=function(){this._isLoaded||(this._isLoaded=!0,this._ready.resolve()),this._refresh(this)},Object.defineProperty(ie,"content",{set:function(e){e!==this._value&&(this._value=e,this._lineMap={},this._refresh(this))},get:function(){return this._value}}),Object.defineProperty(ie,"title",{set:function(e){e!==this._title&&(this._title=e,this._refresh(this))},get:function(){return this._title}}),Object.defineProperty(ie,"css",{set:function(e){e!==this._css&&(this._css=e,this._refresh(this))},get:function(){return this._css}}),Object.defineProperty(ie,"scroll",{set:function(e){this._scroll=e;var t=this;this.ready.then((function(){Q(t,"setScroll",e)}))},get:function(){return this._scroll||0}}),Object.defineProperty(ie,"pageInfo",{set:function(e){e!==this._pageInfo&&(this._pageInfo=e,this._refresh(this))},get:function(){return this._pageInfo||!1}}),Object.defineProperty(ie,"useSubmitButtons",{set:function(e){e!==this._useSubmitButtons&&(this._useSubmitButtons=e,this._refresh(this))},get:function(){return this._useSubmitButtons}}),Object.defineProperty(ie,"useMarkAsComplete",{set:function(e){e!==this._useMarkAsComplete&&(this._useMarkAsComplete=e)},get:function(){return this._useMarkAsComplete}}),Object.defineProperty(ie,"sectionId",{set:function(e){e!==this._sectionId&&(this._sectionId=e)},get:function(){return this._sectionId}}),Object.defineProperty(ie,"hideBackToDashboard",{set:function(e){e!==this._hideBackToDashboard&&(this._hideBackToDashboard=e,this._refresh(this))},get:function(){return this._hideBackToDashboard}}),Object.defineProperty(ie,"skipFocusOnSectionChange",{set:function(e){e!==this._skipFocusOnSectionChange&&(this._skipFocusOnSectionChange=e,this._refresh(this))},get:function(){return this._skipFocusOnSectionChange}}),Object.defineProperty(ie,"layoutInfo",{set:function(e){e!==this._layoutInfo&&(this._layoutInfo=e,this._refresh(this))},get:function(){return this._layoutInfo}}),Object.defineProperty(ie,"scripts",{set:function(e){this._scripts=e||[],this._refresh(this)},get:function(){return this._scripts}}),Object.defineProperty(ie,"dyslexicBar",{set:function(e){this._dyslexicBar=e,this._refresh(this)},get:function(){return this._dyslexicBar}}),Object.defineProperty(ie,"ready",{get:function(){return this._readyPromise}}),Object.defineProperty(ie,"lineMap",{get:function(){return this._lineMap}}),Object.defineProperty(ie,"scrollHeight",{get:function(){return this._scrollHeight}}),Object.defineProperty(ie,"height",{get:function(){return this._height}}),Object.defineProperty(ie,"contentType",{set:function(e){this._contentType=e},get:function(){return this._contentType}}),Object.defineProperty(ie,"isExpandedOutput",{get:function(){return this._isExpandedOutput}}),Object.defineProperty(ie,"expandOutputSwitchText",{set:function(e){this._expandOutputSwitchText=e},get:function(){return this._expandOutputSwitchText}}),Object.defineProperty(ie,"resetAnswers",{set:function(e){this._resetAnswers=e},get:function(){return this._resetAnswers}}),ie.scrollTop=function(e){if(o().isUndefined(e))return this.scroll;this.scroll=e},ie.changeSrc=function(e,t,n){t=te(t),this._anchor=n||"",this._iframe.attr("src",$(this,e,t))},ie.focus=function(){var e=this;this._iframe[0].contentWindow?this._iframe[0].contentWindow.focus():this._iframe.load((function(){e._iframe[0].contentWindow.focus()}))},ie.setButtonState=function(e,t,n){var i=function(e){if(0===e.length)return!0;var t=o().trim(e);return 0===t.indexOf("<p")||0===t.indexOf("<div")}(n=n||"");0===n.length&&("fail"===t?n="<p><b>Error executing command.</b></p>":"pass"===t&&(n="<p><b>Command was successfully executed.</b></p>")),i||(n=a()("<div/>").text(n).html()),this._buttons[e]={state:t,message:n,timestamp:(new Date).getTime()},this._refresh(this)},ie.setAssessmentState=function(e,t){this._buttons[e]={data:t,type:"assessment"},this._refresh(this)},ie.setUpdateAssessmentState=function(e,t,n){this._buttons[e]||(this._buttons[e]={data:{},type:"assessment"}),o().set(this._buttons[e],"data.result.result.state",t),o().set(this._buttons[e],"data.result.result.output",n),this._refresh(this)},ie.runAssessmentAction=function(e){var t=e.id;this.setUpdateAssessmentState(t,"progress","Please wait while we check your answer…");var n=this;return u.Z.saveAllAndWait().then((function(){return R.checkObject(e,n)})).catch((function(e){var i="System error, please try again.";e&&e.message&&(i=e.message),n.setUpdateAssessmentState(t,"fail",i)}))},ie.runButton=function(e){var t=e.id,n=e.cmd,i=this,r=e.type;if("terminal"===r)return L.command({action:{action:"open"},command:{type:"cmd",content:n}}),void D.create(D.EventType.GUIDES_BUTTON_TERMINAL,A(A({},k.Z.constructBasicEvent()),{},{command:n,sectionId:i._sectionId})).catch((function(e){var t=e.message;return p.Z.error(t)}));if("reset"!==r)if("debugger"!==r)if("go-to-section-titled"!==r){if("background"===r)return i.setButtonState(t,"progress","Please wait while command is executing…"),function(e){return u.Z.saveAllAndWait().then((function(){return F.runWithoutTimeout(e)}))}(n).then((function(e){0!==e.code?i.setButtonState(t,"fail",e.stdout):i.setButtonState(t,"pass","Command executed"),D.create(D.EventType.GUIDES_BUTTON,A(A({},k.Z.constructBasicEvent()),{},{command:n,sectionId:i._sectionId})).catch((function(e){var t=e.message;return p.Z.error(t)}))})).catch((function(e){var n=e.message;i.setButtonState(t,"invalid",n)}));i.setButtonState(t,"progress","Please wait while we check your code…"),function(e){return u.Z.saveAllAndWait().then((function(){return F.run(e)}))}(n).then((function(e){0!==e.code?i.setButtonState(t,"fail",e.stdout):i.setButtonState(t,"pass",e.stdout),D.create(D.EventType.GUIDES_BUTTON,A(A({},k.Z.constructBasicEvent()),{},{command:n,code:e.code,output:e.stdout,sectionId:i._sectionId})).catch((function(e){var t=e.message;return p.Z.error(t)}))})).catch((function(e){var n="System error, please try again. "+e.message;"Access denied"===e.message&&(n="You do not have permissions to run commands on this box"),i.setButtonState(t,"invalid",n)}))}else q("goToSectionByTitle",i,{sectionTitle:n});else L.debuggerStart({title:n});else L.resetCurrentFiles()},ie.resetButtons=function(){this._buttons={},this._refresh(this)},ie.redraw=function(){var e=this._iframe.parent();this._iframe.detach(),e.append(this._iframe)},Object.defineProperty(ie,"isIframe",{get:function(){return!0}}),Object.defineProperty(ie,"buttons",{get:function(){return this._buttons}}),Object.defineProperty(ie,"id",{get:function(){return this._iframe&&this._iframe.attr("id")}}),Object.defineProperty(ie,"fontSize",{get:function(){return this._fontSize},set:function(e){null==e&&(e=18),(e=parseInt(e,10))>30||e<12||e!==this._fontSize&&(this._fontSize=e,this._refresh(this),f.Z.get("guides").sync_font_size&&(h.ZP.set("user","editor","font_size",e-2),h.ZP.set("user","terminal","font_size",e-2)),h.ZP.set("user","guides","font_size",e),h.ZP.commit())}}),ne.isExist=function(e){return a()(e).find("iframe.guides-iframe").length>0},ne.get=function(e){return a()(e).find("iframe.guides-iframe").data("instance")};const re=ne},85099:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>l,tj:()=>s.Z});var i=n(96486),r=n.n(i),a=n(85886),s=n(98053),o="__guides_html__.html";function c(e,t,n){var i;return s.Z.isExist(e)?((i=s.Z.get(e)).contentType=a.ZP.CONTENT_TYPE_HTML,i.changeSrc(o,t,n)):i=function(e,t,n){var i={contentType:a.ZP.CONTENT_TYPE_HTML,url:o,paths:t,anchor:n,useLoadCallback:!0};return new s.Z(e,i)}(e,t,n),r().isUndefined(i)?Promise.reject(new Error("Iframe not found")):i.ready.then((function(){return i}))}const l={html:{render:function(e,t,n){return c(e,t,n)}},markdown:n(9477).Z,iframeClient:s.Z}},9477:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P,U:()=>k});var i=n(70885),r=n(52308),a=n.n(r),s=n(96486),o=n.n(s),c=n(49721),l=n(85886),u=n(20294),d=n(97137),p=n(38260),f=n(98053),h=n(38524);const m='.rendered-markdown {\n  margin-left: 10px;\n}\n\n.last-run {\n  font-family: \'Nunito Sans\', sans-serif;\n  font-size: 70%;\n}\n\n.codio-button-result {\n  padding: 0;\n  font-size: 16px;\n}\n\n.codio-button-result-icon {\n  left: -30px;\n  top: 10px;\n}\n\n.codio-feedback-comments,\n.codio-assessment-compare .codio-button-result-out .codio-output-text,\n.codio-assessment-compare .codio-button-result-out .codio-expected-output-text,\n.codio-assessment-compare .codio-button-result-out .codio-feedback-text,\n.codio-output-diff {\n  max-height: none;\n}\n\n.content {\n  border: none;\n  margin: 0;\n  padding-top: 0;\n}\n\n.content.dyslexic pre {\n  font-family: "OpenDyslexic Mono", monospace;\n}\n\n.content.dyslexic .codio-button-result .codio-button-result-out {\n  font-family: "OpenDyslexic Mono", monospace;\n}\n\n.codio-button-switch-view {\n  text-transform: none;\n}\n\n.content::before,\n.content::after {\n  display: none;\n}\n\n.footer {\n  padding: 10px 0;\n}\n\n.codio-button-switch-view.switch-view {\n  padding: 2px 12px;\n  border-radius: 2px;\n  margin-left: -40px;\n  margin-top: 10px;\n}\n\n.close-btn {\n  position: absolute;\n  right: 20px;\n  top: 20px;\n  border: none;\n  font-size: 20px;\n}\n\n.output .guides-iframe {\n  height: 100%;\n  width: 100%;\n}\n\n\n';var g=[h.KX,h.LI,h.mO,h.CN];function v(e,t,n){return(void 0!==t?Promise.resolve(t):p.Z.getCurrentTheme()).then((function(t){var i=p.Z.getTheme(t);o().isUndefined(i)&&(i=p.Z.getTheme(l.ZP.DEFAULT_THEME));var r=i.css;function s(t){e.css=t}n&&(r+=m);var u=c.Z.currentProject;if(!u)return Promise.reject(new Error("No project"));e.dyslexicBar=!0===i.dyslexic;var d=u.eduStartedAssignmentInfo,f=d?d.assignmentVersion.guides:null,h=f?f.customStylesUrl:null,g=u.exists(l.ZP.CSS_FILE);if(!i.dyslexic&&(h||g)){return(h?new Promise((function(e){a().get(h,(function(t){return e(t)}))})):u.file(l.ZP.CSS_FILE).then((function(e){return e.content}))).then((function(e){e===l.ZP.CSS_FILE_CONTENT?s(r):s(e)}))}return s(r),new Promise((function(e){return o().defer((function(){return e()}))}))}))}function b(e,t){return v(e,t).then((function(){return e}))}function y(e){var t=(0,i.Z)(e,4),n=t[0],r=t[1],a=t[2],s=t[3];return n.content=r,n.title=a,n.pageInfo=s.pageInfo,n.useSubmitButtons=s.useSubmitButtons,n.useMarkAsComplete=s.useMarkAsComplete,n.sectionId=s.sectionId,n.hideBackToDashboard=s.hideBackToDashboard,n.layoutInfo=s.layoutInfo,n.skipFocusOnSectionChange=s.skipFocusOnSectionChange,n}function w(e,t){var n,i=u.ZP.promise.deferred(),r=i.promise;return f.Z.isExist(e)?(n=f.Z.get(e))&&n.contentType!==l.ZP.CONTENT_TYPE_MARKDOWN?(n.contentType=l.ZP.CONTENT_TYPE_MARKDOWN,b(n,t).then((function(e){return i.resolve(e)})).catch((function(e){return i.reject(e)})),n.changeSrc("__guides__.html")):i.resolve(n):(n=function(e){return new f.Z(e,{contentType:l.ZP.CONTENT_TYPE_MARKDOWN})}(e),b(n,t).then((function(e){return i.resolve(e)})).catch((function(e){return i.reject(e)}))),o().isUndefined(n)?Promise.reject(new Error("Iframe not found")):r.then((function(e){return e.ready})).then((function(){return n}))}function _(e){return t=e,u.ZP.markdown.render(t,{html:!0,footnote:!0,asString:!0},[],g).then((function(e){return e})).catch((function(e){e&&(console.error(e),d.Z.error("Unable to parse and render markdown"))}));var t}var k=function(e,t,n){return w(e).then((function(e){return v(e,t,n)}))};const P={render:function(e,t,n,i,r){var a=_(i);return Promise.all([w(e,t),a,n,r]).then(y).then((function(e){r.isScrollReset&&(e.scroll=0)}))},updateIframeCss:k}},5085:(e,t,n)=>{"use strict";n.d(t,{Z:()=>pe});var i=n(15671),r=n(43144),a=n(52308),s=n.n(a),o=n(96486),c=n.n(o),l=n(177),u=n.n(l),d=n(93443),p=n(44442);var f=n(60136),h=n(82963),m=n(61120);function g(e,t){return e.line>t.line||e.line===t.line&&e.ch>t.ch?{start:c().cloneDeep(t),end:c().cloneDeep(e)}:{end:c().cloneDeep(t),start:c().cloneDeep(e)}}var v=function(){function e(){(0,i.Z)(this,e)}return(0,r.Z)(e,[{key:"run",value:function(){throw new Error("Not implemented")}}]),e}();function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var y=function(e){(0,f.Z)(n,e);var t=b(n);function n(e,r,a){var s;return(0,i.Z)(this,n),(s=t.call(this)).wrapperText=e,s.noSelectionText=r,c().isString(a)?s.rightWrapperText=a:s.rightWrapperText=e,s}return(0,r.Z)(n,[{key:"run",value:function(e){this.doc=e,this.doc.somethingSelected()?this._wrapSelected():this._insertWithoutSelection()}},{key:"_wrapSelected",value:function(){var e=this,t=this.doc.listSelections();t.reverse();var n=c().map(t,(function(t){var n=g(t.anchor,t.head),i=n.start,r=n.end,a=c().cloneDeep(i);a.ch=a.ch-e.wrapperText.length,a.ch<0&&(a.ch=0);var s=e.doc.getRange(a,i),o=c().cloneDeep(r);o.ch=o.ch+e.rightWrapperText.length;var l=e.doc.getRange(r,o);return s===e.wrapperText&&l===e.rightWrapperText?(e.doc.replaceRange("",r,o,"ribbon"),e.doc.replaceRange("",a,i,"ribbon"),i.ch=i.ch-e.wrapperText.length,i.line===r.line&&(r.ch=r.ch-e.rightWrapperText.length)):(e.doc.replaceRange(e.rightWrapperText,r,r,"ribbon"),e.doc.replaceRange(e.wrapperText,i,i,"ribbon"),i.ch=i.ch+e.wrapperText.length,i.line===r.line&&(r.ch=r.ch+e.rightWrapperText.length)),{anchor:i,head:r}}));this.doc.setSelections(n)}},{key:"_insertWithoutSelection",value:function(){var e=this.doc.getCursor(),t=this.wrapperText+this.noSelectionText+this.rightWrapperText,n=c().cloneDeep(e);n.ch=n.ch+this.wrapperText.length;var i=c().cloneDeep(e);i.ch=i.ch+this.noSelectionText.length+this.rightWrapperText.length,this.doc.replaceRange(t,e,e,"ribbon"),this.doc.setSelection(n,i)}}]),n}(v);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var _=function(e){(0,f.Z)(n,e);var t=w(n);function n(){return(0,i.Z)(this,n),t.call(this,"**","strong text")}return(0,r.Z)(n)}(y);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var P=function(e){(0,f.Z)(n,e);var t=k(n);function n(){return(0,i.Z)(this,n),t.call(this,"*","emphasized text")}return(0,r.Z)(n)}(y);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var x=function(e){(0,f.Z)(n,e);var t=Z(n);function n(){return(0,i.Z)(this,n),t.call(this,"~~","strikethrough text")}return(0,r.Z)(n)}(y);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var S=function(e){(0,f.Z)(n,e);var t=C(n);function n(){var e;return(0,i.Z)(this,n),(e=t.call(this)).initialHeading="### ",e}return(0,r.Z)(n,[{key:"run",value:function(e){this.doc=e,this.doc.somethingSelected()?this._wrapSelected():this._insertWithoutSelection()}},{key:"_headingLevel",value:function(e){for(var t=0;t<e.length;t++){if("#"!==e[t])return 0;if(t<e.length-1&&" "===e[t+1])return t+1}return 0}},{key:"_wrapSelected",value:function(){var e=this,t=this.doc.listSelections();t.reverse();var n=c().map(t,(function(t){var n=g(t.anchor,t.head),i=n.start,r=n.end,a=e.doc.getLine(i.line),s=e._headingLevel(a);if(s>0)return e._changeHeadingLevel(s,i,r);var o=e.doc.getRange(i,r).replace(/\n/g,"");return e._convertToHeader(i,r,o)}));this.doc.setSelections(n)}},{key:"_convertToHeader",value:function(e,t,n){var i=c().cloneDeep(e),r=i.line>0||i.ch>0,a=e.line!==t.line;i.line=i.line+(r?1:0),i.ch=this.initialHeading.length;var s=(r?"\n":"")+this.initialHeading+n+(a?"\n":"");this.doc.replaceRange(s,e,t,"ribbon");var o=c().cloneDeep(i);return o.ch=s.length+4,{anchor:i,head:o}}},{key:"_changeHeadingLevel",value:function(e,t,n){var i=1===e?2:1,r=this.doc.getRange({line:t.line,ch:i},n).replace(/\n/g,"");this.doc.replaceRange(r,{line:t.line,ch:0},n,"ribbon");var a=1===e?0:e;return{anchor:{line:t.line,ch:a},head:{line:t.line,ch:r.length}}}},{key:"_insertWithoutSelection",value:function(){var e,t=this.doc.getCursor(),n=this.doc.getLine(t.line),i=this._headingLevel(n);e=i>0?this._changeHeadingLevel(i,t,{line:t.line,ch:n.length}):this._convertToHeader(t,t,"Heading\n"),this.doc.setSelection(e.anchor,e.head)}}]),n}(v);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var I=function(e){(0,f.Z)(n,e);var t=E(n);function n(e,r){var a;return(0,i.Z)(this,n),(a=t.call(this)).insertText=e,a.relativeSelection=r,a}return(0,r.Z)(n,[{key:"run",value:function(e){this.doc=e;var t=this.doc.getCursor(),n=e.getLine(t.line),i=t.line>0&&n.length||t.ch>0,r=(i?"\n":"")+this.insertText+"\n";if(this.doc.replaceRange(r,t,t,"ribbon"),this.relativeSelection){var a=this.relativeSelection,s=a.from,o=a.to;this.doc.setCursor({line:t.line,ch:s});var c=t.line+(i?1:0);this.doc.setSelection({line:c,ch:s},{line:c,ch:o})}}}]),n}(v);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var j=function(e){(0,f.Z)(n,e);var t=T(n);function n(e,r,a){var s;return(0,i.Z)(this,n),(s=t.call(this)).wrapperText=e,s.noSelectionText=r,c().isString(a)?s.rightWrapperText=a:s.rightWrapperText=e,s}return(0,r.Z)(n,[{key:"run",value:function(e){this.doc=e,this.doc.somethingSelected()?this._wrapSelected():this._insertWithoutSelection()}},{key:"_wrapSelected",value:function(){var e=this,t=this.doc.listSelections();t.reverse();var n=c().map(t,(function(t){var n=g(t.anchor,t.head),i=n.start,r=n.end,a=e.wrapperText.split("\n").length-1,s=c().cloneDeep(i);s.ch=0,s.line=s.line-1,s.line<0&&(s.line=0);var o=c().trim(e.doc.getRange(s,i)),l=c().cloneDeep(r);l.ch=e.rightWrapperText.length,l.line=l.line+1;var u=c().trim(e.doc.getRange(r,l));if(o===e.wrapperText&&u===e.rightWrapperText)e.doc.replaceRange("",r,l,"ribbon"),e.doc.replaceRange("",s,i,"ribbon"),i.ch=0,i.line=i.line-1,r.line=r.line-1;else{var d=i.line>0||i.ch>0,p=e.doc.getLine(r.line).length!==r.ch,f=(d?"\n":"")+e.wrapperText+"\n",h="\n"+e.rightWrapperText+(p?"\n":"");e.doc.replaceRange(h,r,r,"ribbon"),e.doc.replaceRange(f,i,i,"ribbon"),i.ch=0,i.line=i.line+1+(d?1+a:a),r.line=r.line+1+(d?1+a:a)}return{anchor:i,head:r}}));this.doc.setSelections(n)}},{key:"_insertWithoutSelection",value:function(){var e=this.doc.getCursor(),t=e.line>0||e.ch>0,n=this.wrapperText.split("\n").length-1,i=this.doc.getLine(e.line).length!==e.ch,r=(t?"\n":"")+this.wrapperText+"\n"+this.noSelectionText+"\n"+this.rightWrapperText+(i?"\n":""),a=c().cloneDeep(e);a.ch=0,a.line=e.line+1+(t?1+n:n);var s=c().cloneDeep(a),o=this.noSelectionText.split("\n"),l=o[o.length-1];s.ch=l.length,s.line=s.line+o.length-1,this.doc.replaceRange(r,e,e,"ribbon"),this.doc.setSelection(a,s)}}]),n}(v);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var O=function(e){(0,f.Z)(n,e);var t=A(n);function n(){var e;return(0,i.Z)(this,n),(e=t.call(this)).simpleWrap=new y("`","code"),e.multiWrap=new j("```","","```"),e}return(0,r.Z)(n,[{key:"run",value:function(e){this.doc=e;var t=this.simpleWrap;if(this.doc.somethingSelected()){var n=this.doc.getSelection();n&&-1!==n.indexOf("\n")&&(t=this.multiWrap)}else t=this.simpleWrap;t&&t.run(e)}}]),n}(v);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var N=function(e){(0,f.Z)(n,e);var t=D(n);function n(){var e;return(0,i.Z)(this,n),(e=t.call(this)).quoteText="> ",e.noSelectionText="Blockquote",e}return(0,r.Z)(n,[{key:"run",value:function(e){this.doc=e,this.doc.somethingSelected()?this._wrapSelected():this._insertWithoutSelection()}},{key:"_wrapSelected",value:function(){var e=this,t=this.doc.listSelections(),n=c().map(t,(function(t){for(var n=g(t.anchor,t.head),i=n.start,r=n.end,a=!0,s=i.line;s<=r.line;s++){var o=e.doc.getLine(s);if(!o||!c().startsWith(o,e.quoteText)){a=!1;break}}var l=e.doc.getRange(i,r);if(a){var u=l.replace(/> /g,"");return e.doc.replaceRange(u,{ch:0,line:i.line},r,"ribbon"),{anchor:{ch:0,line:i.line},head:{line:r.line,ch:r.ch-e.quoteText.length}}}var d=i.line>0||i.ch>0,p=e.doc.getLine(r.line),f=r.ch!==p.length,h=(d?"\n":"")+e.quoteText+l.split("\n").join("\n"+e.quoteText)+(f?"\n":"");return e.doc.replaceRange(h,i,r,"ribbon"),{anchor:{ch:e.quoteText.length,line:i.line+(d?1:0)},head:{line:r.line+(d?1:0),ch:r.ch+e.quoteText.length}}}));this.doc.setSelections(n)}},{key:"_insertWithoutSelection",value:function(){var e=this.doc.getCursor(),t=e.line>0||e.ch>0,n=(t?"\n":"")+this.quoteText+this.noSelectionText+"\n";this.doc.replaceRange(n,e,e,"ribbon");var i=e.line+(t?1:0);this.doc.setSelection({line:i,ch:this.quoteText.length},{line:i,ch:this.quoteText.length+this.noSelectionText.length})}}]),n}(v),M=n(4942),F=n(70885),R=n(15861),L=n(87757),U=n.n(L),B=n(49721),q=n(20294),H=n(58471),W=n(50276);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var G=u().compile('<form action="/" method="post" class="form-horizontal" id="ribbon-modal-form">\n    <div class="ribbon-prompt-window">\n        {{#if usePicker}}\n        <button class="btn">\n            Pick an image...\n        </button>\n        <strong>\n            - or -\n        </strong>\n        {{/if}}\n        <input type="text" class="input-xlarge" autofocus placeholder="Provide an url..." />\n    </div>\n</form>\n'),V=function(e){(0,f.Z)(a,e);var t,n=z(a);function a(e){var t;return(0,i.Z)(this,a),(t=n.call(this)).title="Add an image",t.usePicker=e,t}return(0,r.Z)(a,[{key:"run",value:(t=(0,R.Z)(U().mark((function e(t){var n,i,r,a,s,o,l,u,d=this;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.doc=t,e.prev=1,e.next=4,this.getInputValue();case 4:n=e.sent,c().isString(n)&&(this.doc.somethingSelected()?(i=this.doc.listSelections(),r=c().map(i,(function(e){var t=g(e.anchor,e.head),i=t.start,r=t.end,a=d.doc.getRange(i,r).split("\n").join(" "),s=d.insertCommand(i,r,a,n),o=(0,F.Z)(s,2),c=o[0],l=o[1];return{anchor:{line:i.line,ch:i.ch+c},head:{line:i.line,ch:i.ch+2+l.length}}})),this.doc.setSelections(r)):(a=this.doc.getCursor(),s=this.insertCommand(a,a,n,n),o=(0,F.Z)(s,2),l=o[0],u=o[1],this.doc.setCursor({line:a.line,ch:a.ch}),this.doc.setSelection({line:a.line,ch:a.ch+l},{line:a.line,ch:a.ch+l+u.length}))),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return t.apply(this,arguments)})},{key:"filesFilter",value:function(e){return e}},{key:"getInputValue",value:function(){var e=this,t=q.ZP.promise.deferred(),n=H.Z.showPrompt({doNotCloseOpened:!0,icon:null,content:G({usePicker:this.usePicker}),title:this.title,onHide:function(){t&&(t.reject(new Error("choose image cancelled")),t=null)},onClose:function(e){t&&(t.resolve(e&&n.content().find("input").val()),t=null)}});return n.content().find(".btn").click((function(i){i&&i.preventDefault(),W.Z.open((function(){var t=B.Z.currentProject.files({isCaseSensitive:!1,filesSeparate:!0});return c().filter(t,e.filesFilter)}),(function(e){t&&(t.resolve(e),t=null,n.close())}))})),t.promise}}]),a}(v);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var Y=function(e){(0,f.Z)(n,e);var t=K(n);function n(){return(0,i.Z)(this,n),t.call(this,!0)}return(0,r.Z)(n,[{key:"insertCommand",value:function(e,t,n,i){n===i&&(n="alt text");var r="![".concat(n,"](").concat(i,")");return this.doc.replaceRange(r,e,t,"ribbon"),[2,n]}},{key:"filesFilter",value:function(e){var t=e.name,i=t?t.split("."):[""],r=i[i.length-1].toLowerCase();return c().find(n.IMG_EXTENSIONS,(function(e){return e===r}))}}]),n}(V);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}(0,M.Z)(Y,"IMG_EXTENSIONS",["png","apng","avif","gif","jpg","jpeg","jfif","pjpeg","pjp","svg","webp","bmp","ico","cur","tif","tiff"]);var Q=function(e){(0,f.Z)(n,e);var t=J(n);function n(){var e;return(0,i.Z)(this,n),(e=t.call(this)).title="Add a link",e}return(0,r.Z)(n,[{key:"insertCommand",value:function(e,t,n,i){n===i&&(n="link text");var r="[".concat(n,"](").concat(i,")");return this.doc.replaceRange(r,e,t,"ribbon"),[1,n]}}]),n}(V);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var $=function(e){(0,f.Z)(n,e);var t=X(n);function n(e,r){var a;return(0,i.Z)(this,n),(a=t.call(this)).wrapperText=e,a.wrapperTextTrimmed=c().trim(a.wrapperText),a.noSelectionText=r,a}return(0,r.Z)(n,[{key:"run",value:function(e){this.doc=e,this.doc.somethingSelected()?this._wrapSelected():this._insertWithoutSelection()}},{key:"_wrapSelected",value:function(){var e=this,t=this.doc.listSelections();c().map(t,(function(t){for(var n=g(t.anchor,t.head),i=n.start,r=n.end,a=i.line;a<=r.line;a++)e.toggleLine(a)}))}},{key:"toggleLine",value:function(e){var t=this.doc.getLine(e),n={line:e,ch:0};if(c().startsWith(t,this.wrapperText)){var i=this.wrapperText.length;return this.doc.replaceRange("",n,{line:e,ch:i},"ribbon"),!0}if(c().startsWith(t,this.wrapperTextTrimmed)){var r=this.wrapperTextTrimmed.length;return this.doc.replaceRange("",n,{line:e,ch:r},"ribbon"),!0}var a=t.length>0?"":this.noSelectionText;return this.doc.replaceRange(this.wrapperText+a,n,n,"ribbon"),!1}},{key:"_insertWithoutSelection",value:function(){var e=this.doc.getCursor(),t=this.toggleLine(e.line),n=c().cloneDeep(e),i=c().cloneDeep(e);t||(n.ch=n.ch+this.wrapperText.length,i.ch=n.ch+this.noSelectionText.length),this.doc.setSelection(n,i)}}]),n}(v);function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var te=new RegExp("^[0-9]+. .*"),ne=function(e){(0,f.Z)(n,e);var t=ee(n);function n(e){return(0,i.Z)(this,n),t.call(this,"1. ",c().isString(e)?e:"List item")}return(0,r.Z)(n,[{key:"isList",value:function(e){return te.test(e)}}]),n}($);function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var re=new RegExp("^- .*"),ae=function(e){(0,f.Z)(n,e);var t=ie(n);function n(e){return(0,i.Z)(this,n),t.call(this,"- ",c().isString(e)?e:"List item")}return(0,r.Z)(n,[{key:"isList",value:function(e){return re.test(e)}}]),n}($),se=function(){function e(t,n){(0,i.Z)(this,e),this.doc=t,this.editor=n,this.omitEvent=!1}return(0,r.Z)(e,[{key:"needOmitEvent",value:function(){return this.omitEvent}},{key:"somethingSelected",value:function(){var e=this.editor.getSelection(),t=e.selectionStartLineNumber,n=e.selectionStartColumn,i=e.positionLineNumber,r=e.positionColumn;return t!==i||n!==r}},{key:"setSelection",value:function(e,t){this.setSelections([{anchor:e,head:t}])}},{key:"setSelections",value:function(e){var t=c().map(e,(function(e){var t=e.anchor,n=e.head;return{selectionStartColumn:t.ch+1,selectionStartLineNumber:t.line+1,positionColumn:n.ch+1,positionLineNumber:n.line+1}}));this.editor.setSelections(t)}},{key:"setCursor",value:function(e){this.editor.setPosition({lineNumber:e.line+1,column:e.ch+1})}},{key:"listSelections",value:function(){var e=this.editor.getSelections();return c().map(e,(function(e){return{anchor:{line:e.startLineNumber-1,ch:e.startColumn-1},head:{line:e.endLineNumber-1,ch:e.endColumn-1}}}))}},{key:"getSelection",value:function(){var e=this.listSelections();if(e.length)return this.getRange(e[0].anchor,e[0].head)}},{key:"getLine",value:function(e){return this.doc.getLineContent(e+1)}},{key:"getRange",value:function(e,t){return this.doc.getValueInRange({startLineNumber:e.line+1,startColumn:e.ch+1,endLineNumber:t.line+1,endColumn:t.ch+1})}},{key:"getCursor",value:function(){var e=this.editor.getPosition();return{line:e.lineNumber-1,ch:e.column-1}}},{key:"replaceRange",value:function(e,t,n){this.omitEvent=!0,this.doc.replaceRange(e,{lineNumber:t.line+1,column:t.ch+1},{lineNumber:n.line+1,column:n.ch+1}),this.omitEvent=!1}}]),e}();const oe=JSON.parse('{"openMediaSettings":"ribbon:media:open"}');function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var le=d.Z.create(oe),ue=function(e){(0,f.Z)(n,e);var t=ce(n);function n(){return(0,i.Z)(this,n),t.call(this)}return(0,r.Z)(n,[{key:"run",value:function(){le.openMediaSettings()}}]),n}(v),de=u().compile('{{#if showActions}}\n<div class="ribbon-dropup">\n    <button class="ribbon-button ribbon-button-open" title="Open actions">\n        <span class="iconify-inline" data-icon="@codio:mdi:console"></span>\n        <i class="icon ss-icon icon-dropdown ss-pika ribbon-icon-dropdown" type="pika">dropdown</i>\n    </button>\n    <div class="ribbon-dropup-content ribbon-dropup-content--large">\n        <button class="ribbon-dropbtn" data-action="terminal">Open terminal</button>\n        <button class="ribbon-dropbtn" data-action="debugger">Open debugger</button>\n        <button class="ribbon-dropbtn" data-action="run">Run command/process{{#exists hotkeys.run}} ({{hotkeys.run}}){{/exists}}</button>\n        <button class="ribbon-dropbtn" data-action="goto">Go to page</button>\n        <button class="ribbon-dropbtn" data-action="restore">Restore files</button>\n    </div>\n</div>\n{{/if}}\n{{#if showPreview}}\n<div class="ribbon-dropup">\n    <button class="ribbon-button ribbon-button-preview" title="Preview actions">\n        <span class="iconify-inline" data-icon="@codio:mdi:eye"></span>\n        <i class="icon ss-icon icon-dropdown ss-pika ribbon-icon-dropdown" type="pika">dropdown</i>\n    </button>\n    <div class="ribbon-dropup-content">\n        <button class="ribbon-dropbtn" data-action="open-preview">Open preview</button>\n        <button class="ribbon-dropbtn" data-action="close-preview">Close preview</button>\n    </div>\n</div>\n{{/if}}\n{{#or showActions showPreview}}<div class="ribbon-separator"></div>{{/or}}\n<button class="ribbon-button ribbon-button-details" data-action="details" title="Details">\n    <span class="iconify-inline" data-icon="@codio:mdi:chevron-right"></span>\n</button>\n{{#if showBlocks}}\n<div class="ribbon-dropup">\n    <button class="ribbon-button ribbon-button-block">\n        <span class="iconify-inline" data-icon="@codio:mdi:alert-box-outline"></span>\n        <i class="icon ss-icon icon-dropdown ss-pika ribbon-icon-dropdown" type="pika">dropdown</i>\n    </button>\n    <div class="ribbon-dropup-content">\n        <button class="ribbon-dropbtn" data-action="important">Important</button>\n        <button class="ribbon-dropbtn" data-action="info">Info</button>\n        <button class="ribbon-dropbtn" data-action="warning">Warning</button>\n        <button class="ribbon-dropbtn" data-action="topic">Topic</button>\n        <button class="ribbon-dropbtn" data-action="definition">Definition</button>\n        <button class="ribbon-dropbtn" data-action="challenge">Challenge</button>\n        <button class="ribbon-dropbtn" data-action="guidance">Guidance</button>\n        <button class="ribbon-dropbtn" data-action="meetup">Meetup</button>\n        <button class="ribbon-dropbtn" data-action="hackathon">Hackathon</button>\n        <button class="ribbon-dropbtn" data-action="create">Create</button>\n        <button class="ribbon-dropbtn" data-action="calendar">Calendar</button>\n        <button class="ribbon-dropbtn" data-action="growthhack">Growthhack</button>\n        <button class="ribbon-dropbtn" data-action="xdiscipline">Xdiscipline</button>\n        <button class="ribbon-dropbtn" data-action="debugging">Debugging</button>\n    </div>\n</div>\n{{/if}}\n{{#if showTutor}}\n<div class="ribbon-dropup">\n    <button class="ribbon-button ribbon-button-tutor" title="Tutor actions">\n        <span class="iconify-inline" data-icon="@codio:mdi:binoculars"></span>\n        <i class="icon ss-icon icon-dropdown ss-pika ribbon-icon-dropdown" type="pika">dropdown</i>\n    </button>\n    <div class="ribbon-dropup-content">\n        <button class="ribbon-dropbtn" data-action="open-tutor">Open tutor</button>\n        <button class="ribbon-dropbtn" data-action="close-tutor">Close tutor</button>\n    </div>\n</div>\n<div class="ribbon-separator"></div>\n{{/if}}\n{{#if showFile}}\n<div class="ribbon-dropup">\n    <button class="ribbon-button ribbon-button-file" title="File actions">\n        <span class="iconify-inline" data-icon="@codio:mdi:file-document-multiple-outline"></span>\n        <i class="icon ss-icon icon-dropdown ss-pika ribbon-icon-dropdown" type="pika">dropdown</i>\n    </button>\n    <div class="ribbon-dropup-content">\n        <button class="ribbon-dropbtn" data-action="open-file">Open file</button>\n        <button class="ribbon-dropbtn" data-action="open-highlight">Open highlight</button>\n        <button class="ribbon-dropbtn" data-action="close-file">Close file</button>\n        <button class="ribbon-dropbtn" data-action="close-all">Close all</button>\n    </div>\n</div>\n{{/if}}\n<div class="ribbon-separator"></div>\n<button class="ribbon-button ribbon-button-b" data-action="b" title="Bold{{#exists hotkeys.bold}} ({{hotkeys.bold}}){{/exists}}">\n    <span class="iconify-inline" data-icon="@codio:mdi:format-bold"></span>\n</button>\n<button class="ribbon-button ribbon-button-i" data-action="i" title="Italic">\n    <span class="iconify-inline" data-icon="@codio:mdi:format-italic"></span>\n</button>\n<button class="ribbon-button ribbon-button-h" data-action="h" title="Heading">\n    <span class="iconify-inline" data-icon="@codio:mdi:format-header-pound"></span>\n</button>\n<button class="ribbon-button ribbon-button-s" data-action="s" title="Strikethrough">\n    <span class="iconify-inline" data-icon="@codio:mdi:format-strikethrough-variant"></span>\n</button>\n<div class="ribbon-separator"></div>\n<button class="ribbon-button ribbon-button-ul" data-action="ul" title="Unordered list{{#exists hotkeys.u_list}} ({{hotkeys.u_list}}){{/exists}}">\n    <span class="iconify-inline" data-icon="@codio:mdi:format-list-bulleted"></span>\n</button>\n<button class="ribbon-button ribbon-button-ol" data-action="ol" title="Ordered list{{#exists hotkeys.o_list}} ({{hotkeys.o_list}}){{/exists}}">\n    <span class="iconify-inline" data-icon="@codio:mdi:format-list-numbered"></span>\n</button>\n<button class="ribbon-button ribbon-button-table" data-action="table" title="Table">\n    <span class="iconify-inline" data-icon="@codio:mdi:table"></span>\n</button>\n<div class="ribbon-separator"></div>\n<button class="ribbon-button ribbon-button-quote" data-action="quote" title="Blockquote">\n    <span class="iconify-inline" data-icon="@codio:mdi:format-quote-close"></span>\n</button>\n<button class="ribbon-button ribbon-button-code" data-action="code" title="Code{{#exists hotkeys.code}} ({{hotkeys.code}}){{/exists}}">\n    <span class="iconify-inline" data-icon="@codio:mdi:code-tags"></span>\n</button>\n<button class="ribbon-button ribbon-button-link" data-action="link" title="Link">\n    <span class="iconify-inline" data-icon="@codio:mdi:link-variant"></span>\n</button>\n<button class="ribbon-button ribbon-button-img" data-action="img" title="Image">\n    <span class="iconify-inline" data-icon="@codio:mdi:image-search-outline"></span>\n</button>\n{{#if showMedia}}\n<div class="ribbon-separator"></div>\n<button class="ribbon-button ribbon-button-media" data-action="media" title="Media">\n    <span class="iconify-inline" data-icon="@codio:mdi:music-circle-outline"></span>\n</button>\n{{/if}}\n'),pe=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,i.Z)(this,e);var o=c().merge({showActions:!0,showPreview:!0,showBlocks:!0,showTutor:!0,showFile:!0,showMedia:!0},{hotkeys:this._ribbonHotkeys()},a),l=s()(de(o));this.container=t,this.doc=new se(n,r),this.container.empty().append(l),this.editor=r,this._initActions(),this._bindEvents(this.container),this._bindHotkeys()}return(0,r.Z)(e,[{key:"_ribbonHotkeys",value:function(){var e="md_toolbar_",t=c().pickBy(p.Z.hotkey.compiledDescription().guides,(function(t,n){return c().startsWith(n,e)}));return c().reduce(t,(function(t,n,i){return n.key&&(t[i.replace(e,"")]=n.key),t}),{})}},{key:"_bindEvents",value:function(e){var t=this,n=function(e){var n=s()(e.target).closest(".ribbon-button").data("action");n||(n=s()(e.target).data("action")),n&&t._actions[n]&&(t._actions[n].run(t.doc),t.editor&&t.editor.focus())};e.find(".ribbon-button").click(n),e.find(".ribbon-dropbtn").click(n),this._listenDoc()}},{key:"_initActions",value:function(){this._enterActions=[new ae(""),new ne("")],this._actions={b:new _,i:new P,s:new x,h:new S,terminal:new I("{Button Text | terminal}(command)",{from:25,to:32}),debugger:new I("{Open debugger | debugger}(debugger_configuration_name)",{from:27,to:54}),run:new I("{Button Text}(command parameter1 parameter2 parameterN)",{from:14,to:54}),goto:new I("{Button Text | go-to-section-titled}(section title)",{from:37,to:50}),restore:new I("{Button text | reset}(optional commands to run)",{from:22,to:46}),quote:new N,table:new I("| Title 1 | Title 2  |\n|---------|----------|\n| Content | Content  |",{from:2,to:9}),"open-preview":new I("[Click here](open_preview filename.here panel=0)",{from:26,to:39}),"close-preview":new I("[Click here](close_preview filename.here)",{from:27,to:40}),"open-tutor":new I("[Click here](open_tutor filename.here panel=0)",{from:24,to:37}),"close-tutor":new I("[Click here](close_tutor filename.here)",{from:25,to:38}),"open-file":new I("[Click here](open_file filename.here panel=0)",{from:23,to:36}),"open-highlight":new I('[Click here](open_file filename.here panel=0 ref="some text in your code" count=3)',{from:23,to:36}),"close-file":new I("[Click here](close_file filename.here)",{from:24,to:37}),"close-all":new I("[Click here](close_all)"),info:new j("|||info","## My Title\n\nSome text","|||"),warning:new j("|||warning","## My Title\n\nSome text","|||"),topic:new j("|||topic","## My Title\n\nSome text","|||"),definition:new j("|||definition","## My Title\n\nSome text","|||"),challenge:new j("|||challenge","## My Title\n\nSome text","|||"),guidance:new j("|||guidance","## My Title\n\nSome text","|||"),meetup:new j("|||meetup","## My Title\n\nSome text","|||"),hackathon:new j("|||hackathon","## My Title\n\nSome text","|||"),create:new j("|||create","## My Title\n\nSome text","|||"),calendar:new j("|||calendar","## My Title\n\nSome text","|||"),growthhack:new j("|||growthhack","## My Title\n\nSome text","|||"),xdiscipline:new j("|||xdiscipline","## My Title\n\nSome text","|||"),debugging:new j("|||debugging","## My Title\n\nSome text","|||"),important:new j("|||important","## My Title\n\nSome text","|||"),code:new O,img:new Y,link:new Q,ul:new ae,ol:new ne,details:new j("<details>\n  <summary>\n     Header\n  </summary>","    Body","</details>"),media:new ue}}},{key:"_bindHotkeys",value:function(){var e=this,t=function(t){e.editor.hasTextFocus()&&e._actions[t].run(e.doc)};this._handlers=[d.Z.subscribe("command:guides:md_toolbar_bold",(function(){return t("b")})),d.Z.subscribe("command:guides:md_toolbar_u_list",(function(){return t("ul")})),d.Z.subscribe("command:guides:md_toolbar_o_list",(function(){return t("ol")})),d.Z.subscribe("command:guides:md_toolbar_code",(function(){return t("code")})),d.Z.subscribe("command:guides:md_toolbar_run",(function(){return t("run")}))]}},{key:"_unbindHotkeys",value:function(){this._handlers&&d.Z.unsubscribe(this._handlers)}},{key:"_listenDoc",value:function(){var e=this;this.callback=this.editor.onDidChangeModelContent((function(t){return e._docUpdateHandler(t)}))}},{key:"swapDoc",value:function(e){this.callback&&this.callback.dispose(),this.doc=new se(e,this.editor),this._listenDoc()}},{key:"hide",value:function(){this.container&&this.container.hide()}},{key:"show",value:function(){this.container&&this.container.show()}},{key:"clear",value:function(){this.callback&&this.callback.dispose(),this.container&&this.container.empty(),this._unbindHotkeys(),this._handlers=null}},{key:"_docUpdateHandler",value:function(e){var t=this;if(!this.doc.needOmitEvent()&&e.changes&&1===e.changes.length&&"\n"===e.changes[0].text){var n=this.doc.getCursor(),i=this.doc.getLine(n.line),r=c().find(this._enterActions,(function(e){return e.isList(i)}));r&&c().defer((function(){return r.run(t.doc)}))}}}]),e}()},51751:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>o});var i=n(96486),r=n.n(i),a=n(44442),s={};const o={set:function(e,t,n,i){var r=[e,t,n].join(":");s[r]={type:e,section:t,key:n,value:i}},get:function(e,t,n){return"user"===e?a.Z.getUser(t)[n]:a.Z.getProject(t)[n]},getCompiled:function(e){return a.Z.get("guides")[e]},commit:function(){var e=r().map(s,(function(e){return{type:e.type,plugin:e.section,key:e.key,value:e.value}}));a.Z.hotkey.execute("settings","updateMany",e),s={}}}},34335:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n(88122)},88122:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>D,getBookState:()=>O,getCurrentEditorSectionId:()=>E,getStep:()=>S,getTeacherInitialStep:()=>T,resetState:()=>j,setBookState:()=>A,setCurrentEditorSectionId:()=>I,setStep:()=>C});var i=n(15861),r=n(87757),a=n.n(r),s=n(96486),o=n.n(s),c=n(49721),l=n(60989),u=n(68058),d=n(73687),p=n(48503),f=n(88228),h=l.ZP.CourseManager,m="codio-guides",g="step",v="step_teacher",b="book",y="editor-section",w=0,_=!1;function k(e,t){return P.apply(this,arguments)}function P(){return(P=(0,i.Z)(a().mark((function e(t,n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=c.Z.currentProject){e.next=3;break}throw new Error("No Project");case 3:if(i.getPluginData(m)[t]===n){e.next=6;break}return e.abrupt("return",i.setPluginData(m,t,n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return x.apply(this,arguments)}function x(){return(x=(0,i.Z)(a().mark((function e(t){var n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.Z.currentProject){e.next=3;break}throw new Error("No Project");case 3:return i=n.getPluginData(m),e.abrupt("return",i[t]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.Z.currentProject.readOnly){e.next=3;break}return w=t,e.abrupt("return",w);case 3:return e.abrupt("return",k(d.ZP.isTeacher()?v:g,t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=c.Z.currentProject.readOnly,n=function(){var e,t=c.Z.currentProject,n=t.eduStartedAssignmentInfo,i=null;if(n&&n.started){var r=n.started,a=r.assignmentId,s=r.assignee,l=s.userId||s.groupId,d="section-".concat(a,"-").concat(l);i=u.I_.get(d),u.I_.remove(d)}if(!i)return-1;if(t.isBook&&!t.showAllBookPages){var f=p.Z.flatPages(t.guides.bookStructure.children),h=o().map(t.bookAssignmentPages,(function(e){var t=o().find(f,{id:e});if(void 0!==t)return t.pageId}));e=o().indexOf(h,i)}else{var m=t.guides&&t.guides.metadata,g=m&&m.sections||[];e=o().findIndex(g,{id:i})}return e}();n=-1!==n?n:e;var i=Promise.resolve();return-1!==n&&(i=C(n)),t?i.then((function(){return w})):i.then((function(){return Z(d.ZP.isTeacher()?v:g)}))},E=function(){return(u.I_.get(y)||{})[c.Z.currentProject.guid]||null},I=function(e){var t=u.I_.get(y)||{};t[c.Z.currentProject.guid]=e,u.I_.set(y,t)},T=function(e){var t,n,i,r=e?function(e){var t=c.Z.currentProject,n=o()(e).filter((function(e){return f.ZP.isUngraded(e)&&e.source.points>0})).keyBy((function(e){return e.id})).mapValues((function(){return!0})).value(),i=t.guides&&t.guides.metadata,r=i&&i.sections||[];return o().findIndex(r,(function(e){return o().some(e.assessmentIds,(function(e){return n[e]}))}))}(e):-1;return r=-1!==r?r:(t=c.Z.currentProject,n=t.guides&&t.guides.metadata,i=n&&n.sections||[],o().findIndex(i,{teacherOnly:!1})),S(r)},j=function(e){var t=c.Z.currentProject;if(!t)return Promise.reject(new Error("No Project"));var n=t.guid;return h.restoreContent(n,e).then((function(e){if("done"!==e)return Promise.reject(new Error(e))}))},A=function(e){if(!c.Z.currentProject.readOnly)return k(b,e);_=e},O=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.Z.currentProject.readOnly){e.next=2;break}return e.abrupt("return",_);case 2:return e.abrupt("return",Z(b));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();const D={setStep:C,getStep:S,resetState:j,setBookState:A,getBookState:O,getTeacherInitialStep:T,getCurrentEditorSectionId:E,setCurrentEditorSectionId:I}},79703:(e,t,n)=>{"use strict";n.d(t,{OK:()=>l,ZP:()=>u});var i=n(96486),r=n.n(i),a=n(96513),s=n(20294),o=function(e,t,n){var i=t.panelNumber,s=t.content,o=t.type;return r().findIndex(e,(function(e){return n&&o===a.Z.TYPE.TERMINAL?o===e.type:r().isUndefined(i)?s===e.content&&o===e.type:s===e.content&&o===e.type&&i===e.panelNumber}))},c=function(e,t){var n={toOpen:[],toClose:[]};return r().forEach(e,(function(e){-1===o(t,e)&&n.toClose.push(e)})),r().forEach(t,(function(e){n.toOpen.push(e)})),n},l=a.Z;const u={findIndex:o,execute:function(e,t,n){var i=new a.Z(t.type,t.content,e.panel);"open"===e.action?i.open(n):i.close(n).catch(s.ZP.error.checkErrorForIgnore)},diffTabs:c,buildMap:function(e,t,n){var i=e.getSectionTabs(t),r=e.getSectionTabs(n);return c(i.ide,r.ide)},Tab:l}},21384:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(96486),r=n.n(i),a=n(55537);function s(e,t){var n=t.panelNumber,i=t.content,a=t.type;return r().find(e,{content:i,type:a,panelNumber:n})}const o={filterTabs:function(e,t){return r().filter(e,(function(e){return r().includes(t,e.type)}))},mergeTabs:function(e,t,n){var i=r().clone(e);return r().each(t,(function(e){var t=s(i,e);r().isUndefined(t)||i.splice(t,1),i.push(e)})),r().each(n,(function(e){for(;;){var t=s(i,e);if(r().isUndefined(t))break;i.splice(t,1)}})),i},convertTabDataToAction:function(e){var t="file"===e.type?"":"#"+e.type+":";return new a.Z({action:e.action,panel:e.panelNumber,path:t+" "+e.content})}}},96513:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(15861),r=n(87757),a=n.n(r),s=n(96486),o=n.n(s),c=n(49721),l=n(20294);function u(e,t){o().defer((function(){c.Z.currentProject.temporaryDisableProtectLayout();var n=e.content,i=e.type,r=e.panel;switch(i){case v.TYPE.FILE:return function(e,t,n,i){t=o().trim(t),o().defer((function(){c.Z.currentProject.temporaryDisableProtectLayout(),c.Z.currentProject.exists(t)&&c.Z.ide.open("tree",t,{panel:e,highlight:{ref:n.ref,count:n.lineCount},noFocus:i})}))}(r,n,e.options,t);case v.TYPE.PREVIEW:return function(e,t,n){0===(t=o().trim(t)).length&&(t="/"),c.Z.ide.open("preview",t,{panel:e,noWarning:!0,noFocus:n})}(r,n,t);case v.TYPE.TERMINAL:return function(e,t,n,i){e.isCloseAll&&h(t,"terminal","backend-guide").catch(l.ZP.error.checkErrorForIgnore);var r=c.Z.ide.open("terminal","backend-guide",{panel:t,view:"backend",noFocus:i});(n=o().trim(n)).length>0&&r.then((function(e){e&&e.extension.then((function(e){return e.ready().then((function(){return e.termPromise})).then((function(e){return e.exec({cmd:n,noFocus:i})})).catch((function(){}))}))}))}(e,r,n,t);case v.TYPE.TUTOR:return function(e,t,n){c.Z.ide.open("tutor",t,{panel:e,noFocus:n})}(r,n,t);case v.TYPE.VM:return function(e,t,n){c.Z.ide.open("virtual-machines",t,{panel:e,noFocus:n,title:"VM"})}(r,n,t);case v.TYPE.VM_SSH:return function(e,t,n){c.Z.ide.open("virtual-machines-ssh",t,{panel:e,noFocus:n,title:"VM SSH Terminal"})}(r,n,t)}}))}function d(){return(d=(0,i.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.Z.currentProject.temporaryDisableProtectLayout(),n=t.panel,e.t0=t.type,e.next=e.t0===v.TYPE.FILE?5:"cmd"===e.t0?6:e.t0===v.TYPE.TERMINAL?8:e.t0===v.TYPE.VM?9:e.t0===v.TYPE.VM_SSH?10:e.t0===v.TYPE.PREVIEW?11:e.t0===v.TYPE.TUTOR?12:e.t0===v.TYPE.TABS||"tabs"===e.t0?13:14;break;case 5:return e.abrupt("return",h(n,"tree",t.content));case 6:return e.abrupt("return");case 8:return e.abrupt("return",h(n,"terminal","backend-guide"));case 9:return e.abrupt("return",h(n,"virtual-machines"));case 10:return e.abrupt("return",h(n,"virtual-machines-ssh"));case 11:return e.abrupt("return",p(n,t.content));case 12:return e.abrupt("return",h(n,"tutor",t.content));case 13:return e.abrupt("return",f(void 0===t.panelNumber?void 0:n));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t){return t&&0!==t.length||(t="/"),h(e,"preview",decodeURIComponent(t))}function f(e){var t=["filetree","guides","guides-edit"];return o().isUndefined(e)?c.Z.ide.panels.closeAllTabs(t):e.closeAllTabs(t)}function h(e,t,n){return m.apply(this,arguments)}function m(){return(m=(0,i.Z)(a().mark((function e(t,n,i){var r,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}if(!(r=t.isOpen(i,n))){e.next=4;break}return e.abrupt("return",t.closeTab(r));case 4:if(!(r=c.Z.ide.panels.isOpen(i,n))){e.next=7;break}return e.abrupt("return",r.panel.closeTab(r));case 7:e.next=12;break;case 9:return s=c.Z.ide.panels.getAllOpened(i,n),l=o().map(s,(function(e){return e.panel.closeTab(e)})),e.abrupt("return",Promise.all(l));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){switch(e){case"all":return v.TYPE.TABS;case"cmd":return v.TYPE.TERMINAL;default:return e}}var v=function(e,t,n,i){this._type=g(e),this._content=t,this._panelNumber=n,this._options=i||{}},b=v.prototype;b.open=function(e,t){this.panel=e(this.panelNumber),u(this,t)},b.close=function(e){return this.panel=e(this.panelNumber),function(e){return d.apply(this,arguments)}(this)},Object.defineProperty(b,"type",{get:function(){return this._type}}),Object.defineProperty(b,"content",{get:function(){return this._content}}),Object.defineProperty(b,"panelNumber",{get:function(){return this._panelNumber},set:function(e){this._panelNumber=e}}),Object.defineProperty(b,"options",{get:function(){return this._options},set:function(e){this._options=e}}),Object.defineProperty(b,"isCloseAll",{get:function(){return!0===this._isCloseAll},set:function(e){this._isCloseAll=e}}),v.TYPE={TERMINAL:"terminal",FILE:"file",PREVIEW:"preview",TUTOR:"tutor",TABS:"tabs",VM:"vm",VM_SSH:"vmssh"};const y=v},38260:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(15861),r=n(87757),a=n.n(r),s=n(96486),o=n.n(s),c=n(28893),l=n(85886),u=n(51751);var d,p=["@import url('https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,700,700i&subset=latin-ext,vietnamese');\n\n.body {\n  height: 100%;\n  padding-bottom: 1px;\n}\n\n.codio-assessment-name {\n  font-size: 150%;\n  max-width: 80%;\n}\n\n.codio-assessment-guidance-container {\n  padding: 0.5em;\n  margin-bottom: 1em;\n  background-color: #e4efe4;\n  border: 1px #d6ded6 solid;\n  border-radius: 3px;\n}\n\n.codio-assessment-guidance-title {\n  margin: 0;\n}\n\n.codio-assessment-guidance-text {\n  font-size: 90%;\n}\n\n.codio-button-result.hide {\n  display: none;\n}\n\n.codio-button-result {\n  font-size: 100%;\n}\n\n.codio-assessment-last-run {\n  font-size: 70%;\n}\n\n.codio-assessment-last-run span {\n  color: #888;\n}\n\n.codio-button-disabled {\n  cursor: default;\n  opacity: 0.5;\n}\n\n.codio-button.codio-button-type-assessment {\n  text-shadow: none;\n  border-radius: 2px;\n  text-transform: none;\n}\n\n.codio-button.codio-button-type-assessment-reset,\n.codio-button.codio-button-type-assessment-modify {\n  margin-left: 10px;\n  text-transform: none;\n}\n\n.codio-button.codio-button-type-assessment-validate {\n  margin-right: 10px;\n  text-transform: none;\n}\n\n.codio-math-progress {\n  margin-left: 10px;\n  display: inline-block;\n  position: relative;\n  top: 5px;\n}\n\n.codio-assessment-instructions-fieldset {\n  min-width: 0;\n  border: 0;\n}\n\n.codio-assessment-instructions-legend {\n  max-width: 100%;\n  float: left;\n}\n\n/* Radio buttons*/\n\n.codio-button-type-assessment-multiple-radio {\n  padding-top: 0px;\n  margin: 1em 0;\n  clear: both;\n}\n.codio-button-type-assessment-multiple-radio:first-of-type {\n  margin-top: 1em;\n}\n\n.codio-button-type-assessment-multiple-radio:last-of-type {\n  margin-bottom: 1em;\n}\n\n.codio-button-type-assessment-multiple-radio input {\n  position: absolute;\n  opacity: 0;\n}\n\n.codio-button-type-assessment-multiple-radio input:focus+label {\n  outline: 2px auto Highlight;\n  position: relative;\n}\n\n.codio-button-type-assessment-multiple-radio label {\n  display: block;\n}\n\n.codio-button-type-assessment-multiple-radio label i {\n  background-color: rgba(204, 0, 102, 0);\n  border: 2px solid #aaadbd;\n  height: 14px;\n  width: 14px;\n  border-radius: 12px;\n  content: '';\n  display: inline-block;\n  position: absolute;\n  transition: border 0.3s ease-in-out;\n  margin-top: 2px;\n}\n\n.codio-button-type-assessment-multiple-radio:hover label i {\n  border: 2px solid #797d92;\n  cursor: pointer;\n}\n\n.codio-button-type-assessment-multiple-radio label i::before {\n  height: 10px;\n  width: 10px;\n  border-radius: 10px;\n  content: '';\n  display: inline-block;\n  margin-left: 2px;\n  margin-top: 2px;\n}\n\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-done:hover label i {\n  border: 2px solid #848db3;\n}\n\n.codio-button-type-assessment-multiple-radio input:checked + label i {\n  border: 2px solid #797d92;\n}\n\n.codio-button-type-assessment-multiple-radio input:checked + label i::before {\n  height: 0;\n  width: 0;\n  background-color: #797d92;\n  border: 5px solid #797d92;\n  border-radius: 50%;\n  content: '';\n}\n\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok:hover input:checked + label i,\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok input:checked + label i,\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok:hover label i,\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok label i {\n  border: 2px solid #71b380;\n}\n\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok input:checked + label i::before,\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok label i::before {\n  background-color: #71b380;\n  border-color: #71b380;\n}\n\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-wrong:hover input:checked + label i,\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-wrong input:checked + label i {\n  border: 2px solid #da8181;\n}\n\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-wrong input:checked + label i::before {\n  background-color: #da8181;\n  border-color: #da8181;\n}\n\n.codio-challenge a.codio-assessment-disabled {\n  cursor: not-allowed;\n}\n\n/* Checkboxes*/\n\n.codio-button-type-assessment-multiple-checkbox {\n  padding-top: 0px;\n  margin: 1em 0;\n  clear: both;\n}\n\n.codio-button-type-assessment-multiple-checkbox:first-of-type {\n  margin-top: 1em;\n}\n\n.codio-button-type-assessment-multiple-checkbox:last-of-type {\n  margin-bottom: 1em;\n}\n\n.codio-button-type-assessment-multiple-checkbox input {\n  position: absolute;\n  opacity: 0;\n}\n\n.codio-button-type-assessment-multiple-checkbox input:focus+label {\n  outline: 2px auto Highlight;\n  position: relative;\n}\n\n.codio-button-type-assessment-multiple-checkbox label i {\n  background-color: #aaadbd;\n  border: 1px solid #aaadbd;\n  border-radius: 2px;\n  height: 12px;\n  width: 12px;\n  padding: 4px;\n  content: '';\n  display: inline-block;\n  margin-right: 10px;\n  position: absolute;\n  top: 1px;\n  left: 2px;\n}\n\n.codio-button-type-assessment-multiple-checkbox label {\n  display: block;\n  position: relative;\n}\n\n.codio-button-type-assessment-multiple-checkbox label i {\n  transition: background-color 0.3s ease-in-out;\n}\n\n.codio-button-type-assessment-multiple-checkbox:hover label i {\n  background-color: #797d92;\n}\n\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-done:hover label i {\n  background-color: #797d92;\n}\n\n.codio-button-type-assessment-multiple-checkbox input:checked + label i {\n  background-image: url(\"/assets/images/guides/checkmark.svg\");\n  background-size: contain;\n  background-color: #797d92;\n}\n\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-ok:hover input:checked + label i,\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-ok input:checked + label i,\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-ok:hover label i,\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-ok label i {\n  background-color: #71b380;\n}\n\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-ok input:checked + label i::before,\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-ok label i::before {\n  background-color: #71b380;\n}\n\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-wrong:hover input:checked + label i,\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-wrong input:checked + label i {\n  background-color: #da8181;\n}\n\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-wrong input:checked + label i::before {\n  background-color: #da8181;\n}\n\n.codio-button-type-assessment-multiple-answer {\n  margin: 0;\n  padding-left: 30px;\n  clear: both;\n}\n\n.codio-button-type-assessment-multiple-answer .p-tag {\n  margin: 0;\n}\n\n/* Fill in the blanks */\n\n.codio-fill-in-the-blanks {\n  margin-bottom: 2em;\n}\n\n.codio-fill-in-the-blanks .p-tag > div {\n  display: inline-flex !important;\n  flex-wrap: wrap;\n  align-items: center;\n}\n\n.codio-fib-simple-wrapper {\n  display: inline-flex;\n}\n\n.codio-fib-simple-wrapper p {\n  margin: 2px 0;\n}\n\n/* select */\n\n.codio-fib-select {\n  display: inline-grid;\n  margin: 1px 5px;\n}\n\n.fib-react-select__control {\n  min-height: auto;\n  border: 1px solid #898989;\n}\n\n.fib-react-select__value-container {\n  padding: 0 8px;\n}\n\n.fib-react-select__input {\n  margin: 0 2px;\n}\n\n.fib-react-select__placeholder,\n.fib-react-select__single-value {\n  transform: none;\n  position: relative;\n  line-height: 1.2em;\n  max-width: calc(100% - 4px);\n  min-width: 50px;\n}\n\n.fib-react-select__single-value p {\n  margin: 2px 0;\n}\n\n.fib-react-select__input {\n  padding: 0;\n}\n\n.fib-react-select__indicator {\n  padding: 0;\n}\n\n.fib-react-select__indicator-separator {\n  margin-top: 4px;\n  margin-bottom: 4px;\n}\n\n.fib-react-select__menu {\n  white-space: nowrap;\n  width: auto;\n  font-size: 0.9em;\n  font-family: 'Nunito Sans', sans-serif;\n}\n\n.fib-react-select__menu-list p {\n  margin: 0;\n}\n\n.fib-react-select__menu-list .fib-react-select__option {\n  padding-top: 4px;\n  padding-bottom: 4px;\n  min-width: 90px;\n}\n\n/*   simple */\n\n.codio-fib-simple-input {\n  font-family: 'Nunito Sans';\n  font-weight: 300;\n  font-size: 1em;\n  display: inline-block;\n  padding: 0 .2em;\n  background-color: #eceff6;\n  border-radius: 2px;\n  line-height: 1.3em;\n  border: 1px solid #898989;\n}\n\n.codio-fib-simple-input:focus {\n  outline: none;\n}\n\n.codio-fill-in-the-blanks .codio-md-line {\n  margin: 0;\n  line-height: 1.4em;\n}\n\n.codio-assessment-fib-ok,\n.codio-assessment-fib-wrong {\n  border-radius: 2px;\n}\n.codio-assessment-fib-ok {\n  background-color: #cfecd6;\n  border: 1px solid #cfecd6;\n}\n\n.codio-assessment-fib-wrong {\n  background-color: #ff9999;\n  border: 1px solid #ff9999;\n  text-decoration: line-through;\n}\n\ntable th {\n  text-align: left;\n}\n\n/* Grade book */\n.codio-assessment-grade-book .codio-assessment-textarea {\n  width: 100%;\n  min-height: 100px;\n}\n\n.codio-assessment-grade-book .codio-helpBlock {\n  background-color: #ffffff;\n  padding: 20px;\n}\n\n/* Tree text */\n.codio-assessment-free-text .codio-assessment-textarea {\n  width: 100%;\n  min-height: 100px;\n}\n\n.codio-assessment-free-text .codio-assessment-content {\n  margin-bottom: 20px;\n}\n\n.codio-assessment-free-text .codio-helpBlock {\n  padding: 20px;\n  background-color: #ffffff;\n  margin-right: 0;\n}\n\n\n/* Tree text auto */\n.codio-assessment-free-text-auto .codio-assessment-textarea {\n  width: 100%;\n  min-height: 100px;\n}\n\n.codio-assessment-free-text-auto .codio-assessment-content {\n  margin-bottom: 20px;\n}\n\n.codio-assessment-free-text-auto .codio-helpBlock {\n  padding: 20px;\n  background-color: #e4edef;\n  margin-right: 0;\n  overflow: auto;\n}\n\n.codio-assessment-free-text-auto .codio-output {\n  max-height: 250px;\n}\n\n/* grade details - rubrics */\n.codio-rubricInfo-item {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.codio-rubricInfo {\n  line-height: 22px;\n  padding-top: 10px;\n}\n\n.codio-rubricInfo-posNumber,\n.codio-rubricInfo-negNumber {\n  font-weight: 600;\n  padding-right: 10px;\n}\n\n.codio-rubricInfo-posNumber {\n  color: #008000;\n}\n\n.codio-rubricInfo-negNumber {\n  color: #ff0000;\n}\n\ntextarea {\n  font-family: inherit;\n  font-size: inherit;\n}\n\n.codio-assessment-math-stack input {\n  font-size: 0.9em;\n}\n\n.codio-assessment-math-stack .MathJax {\n  font-size: 1.5em;\n}\n\n.stackpartmark {\n  font-weight: bold;\n}\n\n.toggle {\n  position: relative;\n  display: inline-block;\n  vertical-align: top;\n  width: 30px;\n  height: 15px;\n  padding: 0;\n  background-color: #d5dae6;\n  border-radius: 10px;\n  cursor: pointer;\n  margin: 4px 5px 0 0;\n}\n\n.toggle input[type=checkbox] {\n  float: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  opacity: 0;\n}\n\n.toggle .toggle-label {\n  position: relative;\n  display: block;\n  height: inherit;\n  font-size: 14px;\n  text-transform: uppercase;\n  background: #A8B2C4;\n  border-radius: inherit;\n}\n\n.toggle .toggle-label:before,\n.toggle .toggle-label:after {\n  position: absolute;\n  top: 50%;\n  margin-top: -5px;\n  line-height: 1;\n  color: white;\n}\n\n.toggle input[type=checkbox]:checked ~ .toggle-label {\n  background: #4294f0;\n}\n\n.toggle input[type=checkbox]:checked ~ .toggle-label:before {\n  opacity: 0;\n}\n\n.toggle input[type=checkbox]:checked ~ .toggle-label:after {\n  opacity: 1;\n}\n\n.toggle input[type=checkbox]:disabled ~ .toggle-label {\n  background: #ffffff;\n}\n\n.toggle input[type=checkbox]:checked ~ .toggle-handle {\n  left: 16px;\n}\n\n.toggle .toggle-handle {\n  position: absolute;\n  top: 2px;\n  left: 2px;\n  width: 11px;\n  height: 11px;\n  background: #ffffff;\n  border-radius: 10px;\n}\n\n.codio-assessment-free-text-preview {\n  margin-bottom: 5px;\n}\n\n.codio-downArrow:before {\n  position: relative;\n  display: inline-block;\n  content: '';\n  border-left: 10px solid transparent;\n  border-top: 10px solid #555;\n  border-right: 10px solid transparent;\n  left: 5px;\n  top: 3px;\n}\n\n.codio-downArrow:after {\n  position: relative;\n  display: inline-block;\n  content: '';\n  border-left: 9px solid transparent;\n  border-top: 9px solid #fff;\n  border-right: 9px solid transparent;\n  left: -14px;\n  top: 0px;\n}\n\n.codio-upArrow:before {\n  position: relative;\n  display: inline-block;\n  content: '';\n  border-left: 10px solid transparent;\n  border-bottom: 10px solid #555;\n  border-right: 10px solid transparent;\n  left: 5px;\n  top: 3px;\n}\n\n.codio-upArrow:after {\n  position: relative;\n  display: inline-block;\n  content: '';\n  border-left: 9px solid transparent;\n  border-bottom: 9px solid #fff;\n  border-right: 9px solid transparent;\n  left: -14px;\n  top: 5px;\n}\n\n.codio-collapseArrow {\n  float: right;\n  margin-top: 10px;\n}\n\n.codio-assessment-parsons-puzzle .sortable-code {\n  float: none;\n}\n\n.codio-assessment-parsons-puzzle .sortable-code li {\n  white-space: pre-wrap;\n}\n\n.codio-assessment-parsons-puzzle .sortable-code ul,\n.codio-assessment-parsons-puzzle .testcase .output {\n  font-size: inherit;\n}\n\n.codio-assessment-parsons-puzzle .code-container {\n  position: relative;\n}\n\n.codio-assessment-parsons-puzzle .block-actions {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  opacity: 0.3;\n  background-color: #fff;\n  z-index: 1000;\n  cursor: default !important;\n}\n\n.codio-assessment-parsons-puzzle .model-canvas {\n  cursor: pointer;\n}\n\n.codio-assessment-random .tags-list {\n  margin: 10px 0;\n}\n\n.codio-button-expand {\n  background-image: url('/assets/images/guides/expand.svg');\n  background-position: center;\n  background-repeat: no-repeat;\n  background-color: transparent;\n  background-size: contain;\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  cursor: pointer;\n  height: 20px;\n  width: 20px;\n  border: none;\n}\n",'/* Codio Blocks */\n\n.codio-warning::before,\n.codio-definition::before,\n.codio-important::before,\n.codio-topic::before,\n.codio-challenge::before,\n.codio-info::before,\n.codio-curiculum::before,\n.codio-guidance::before,\n.codio-meetups::before,\n.codio-headline::before,\n.codio-hackathon::before,\n.codio-create::before,\n.codio-calendar::before,\n.codio-growthhack::before,\n.codio-debugging::before,\n.codio-xdiscipline::before {\n  background-image: url("/assets/images/guides/blocks/quote.svg");\n  position: absolute;\n  content: \' \';\n  margin-left: -110px;\n  margin-top: 15px;\n  background-repeat: no-repeat;\n  width: 71px;\n  height: 71px;\n}\n\n.codio-important::before {\n  background-image: url("/assets/images/guides/blocks/important.svg");\n}\n\n.codio-warning,\n.codio-definition,\n.codio-important,\n.codio-topic,\n.codio-challenge,\n.codio-info,\n.codio-curiculum,\n.codio-guidance,\n.codio-meetups,\n.codio-headline,\n.codio-hackathon,\n.codio-create,\n.codio-calendar,\n.codio-growthhack,\n.codio-debugging,\n.codio-xdiscipline {\n  padding: 12px 40px 12px 65px;\n  margin: 1em 36px 2em 29px;\n  font-size: 0.9em;\n  color: #484040;\n  background-color: #f5f9f5;\n  border-radius: 4px;\n  box-shadow: 2px 2px 4px #DDD;\n  overflow-x: auto;\n}\n\n.codio-warning h1,\n.codio-definition h1,\n.codio-important h1,\n.codio-topic h1,\n.codio-challenge h1,\n.codio-info h1,\n.codio-curiculum h1,\n.codio-guidance h1,\n.codio-meetups h1,\n.codio-headline h1,\n.codio-hackathon h1,\n.codio-create h1,\n.codio-calendar h1,\n.codio-growthhack h1,\n.codio-debugging h1,\n.codio-xdiscipline h1,\n.codio-warning h2,\n.codio-definition h2,\n.codio-important h2,\n.codio-topic h2,\n.codio-challenge h2,\n.codio-info h2,\n.codio-curiculum h2,\n.codio-guidance h2,\n.codio-meetups h2,\n.codio-headline h2,\n.codio-hackathon h2,\n.codio-create h2,\n.codio-calendar h2,\n.codio-growthhack h2,\n.codio-debugging h2,\n.codio-xdiscipline h2,\n.codio-warning h3,\n.codio-definition h3,\n.codio-important h3,\n.codio-topic h3,\n.codio-challenge h3,\n.codio-info h3,\n.codio-curiculum h3,\n.codio-guidance h3,\n.codio-meetups h3,\n.codio-headline h3,\n.codio-hackathon h3,\n.codio-create h3,\n.codio-calendar h3,\n.codio-growthhack h3,\n.codio-debugging h3,\n.codio-xdiscipline h3 {\n  font-size: 120%;\n  font-style: normal;\n  margin-bottom: 0;\n  margin-top: 0;\n  border: none;\n  padding-bottom: 0;\n}\n\n.codio-warning > p:first-of-type,\n.codio-definition > p:first-of-type,\n.codio-important > p:first-of-type,\n.codio-topic > p:first-of-type,\n.codio-challenge > p:first-of-type,\n.codio-info > p:first-of-type,\n.codio-curiculum > p:first-of-type,\n.codio-guidance > p:first-of-type,\n.codio-meetups > p:first-of-type,\n.codio-headline > p:first-of-type,\n.codio-hackathon > p:first-of-type,\n.codio-create > p:first-of-type,\n.codio-calendar > p:first-of-type,\n.codio-growthhack > p:first-of-type,\n.codio-debugging > p:first-of-type,\n.codio-xdiscipline > p:first-of-type {\n  margin-top: 0;\n}\n\n.codio-info::before {\n  background-image: url("/assets/images/guides/blocks/info.svg");\n}\n\n.codio-definition::before {\n  background-image: url("/assets/images/guides/blocks/definition.svg");\n}\n\n.codio-warning::before {\n  background-image: url("/assets/images/guides/blocks/warning.svg");\n}\n.codio-curiculum::before,\n.codio-topic::before {\n  background-image: url("/assets/images/guides/blocks/topic.svg");\n}\n\n.codio-challenge::before {\n  background-image: url("/assets/images/guides/blocks/challenge.svg");\n  margin-left: -109px;\n}\n\n.codio-guidance::before {\n  background-image: url("/assets/images/guides/blocks/guidance.svg");\n}\n\n.codio-meetups::before {\n  background-image: url("/assets/images/guides/blocks/meetups.svg");\n}\n\n.codio-headline::before {\n  background-image: url("/assets/images/guides/blocks/headlines.svg");\n}\n\n.codio-hackathon::before {\n  background-image: url("/assets/images/guides/blocks/hackathon.svg");\n}\n\n.codio-create::before {\n  background-image: url("/assets/images/guides/blocks/creatorspaceLab.svg");\n}\n\n.codio-calendar::before {\n  background-image: url("/assets/images/guides/blocks/aDayInTheLifeOf.svg");\n}\n\n.codio-growthhack::before {\n  background-image: url("/assets/images/guides/blocks/growthHacks.svg");\n}\n\n.codio-debugging::before {\n  background-image: url("/assets/images/guides/blocks/debugging.svg");\n}\n\n.codio-xdiscipline::before {\n  background-image: url("/assets/images/guides/blocks/acrossTheDisciplines.svg");\n}\n\n.codio-feedback-comments {\n  max-height: 250px;\n  overflow: auto;\n  font-family: monospace;\n}\n\n.codio-feedback-comments div {\n  white-space: normal;\n}\n\n.codio-feedback-comments-border {\n  border-radius: 2px;\n  border: 1px solid #d3d5dc;\n  color: #33393d;\n  margin: 10px 0;\n  padding: 3px;\n}\n\n.codio-feedback-comments p,\n.codio-feedback-comments h1,\n.codio-feedback-comments h2,\n.codio-feedback-comments h3,\n.codio-feedback-comments h4,\n.codio-feedback-comments h5,\n.codio-feedback-comments div,\n.codio-feedback-comments ul {\n  margin: 0;\n  padding: 0 0 3px;\n}\n\n/* image-table */\n\n.codio-image-table {\n\n}\n\n.codio-image-table h3 {\n\n  font-family: \'Open Sans\', sans-serif;\n  color: #ffffff;\n  font-size: 100%;\n  font-weight: normal;\n  text-align: center;\n  padding-top: 21px;\n  padding-bottom: 21px;\n  background-color: #222324;\n  margin: 33px 0 13px 0;\n}\n\n/* image */\n\n.codio-image {\n  max-width: 500px;\n  margin: 1em auto;\n}\n\n.codio-image img {\n  border: 1px solid #c7d5f6;\n  border-radius: 2px;\n}\n\n.codio-image p {\n  margin: 0;\n}\n\n.codio-image p + p {\n  font-size: 1em;\n  text-align: center;\n  margin: 1em 0;\n}\n\n/* interactive table */\n.codio-interactive-table {\n}\n\n/* codio button */\n.codio-button {\n  text-shadow: none;\n  font-style: normal;\n  display: inline-block;\n  padding: 3px 17px 1px;\n  font-weight: normal;\n  font-size: 75%;\n  text-align: center;\n  vertical-align: middle;\n  cursor: pointer;\n  background: #386fd7;\n  border-radius: 2px;\n  color: #fff;\n  text-transform: uppercase;\n  text-decoration: none;\n  margin-left: auto;\n  margin-right: auto;\n  font-family: \'Nunito Sans\';\n  border: 1px solid #386fd7;\n}\n\n.codio-button:disabled {\n  cursor: not-allowed;\n}\n\n.codio-button:focus {\n  outline: thin dotted #333 !important;\n  outline: 5px auto -webkit-focus-ring-color !important;;\n  outline-offset: -2px;\n  -webkit-box-shadow: inset 0 0 0 1px #fff;\n  -moz-box-shadow: inset 0 0 0 1px #fff;\n  box-shadow: inset 0 0 0 1px #fff;\n}\n\n.codio-button-diff {\n  float: right;\n  text-transform: none;\n}\n\n.codio-button-result {\n  background: #fff;\n  border: 1px solid #ddd;\n  border-radius: 2px;\n  line-height: 25px;\n  position: relative;\n  padding: 1em 65px;\n  font-weight: normal;\n  margin: 1em 0;\n  min-height: 30px;\n}\n\n.codio-button-result:after {\n  position: absolute;\n  display: inline-block;\n  left: 21px;\n  bottom: 100%;\n  content: \'\';\n  border-left: 8px solid transparent;\n  border-bottom: 9px solid #fff;\n  border-right: 9px solid transparent;\n}\n\n\n.codio-button-result:before {\n  position: absolute;\n  display: inline-block;\n  left: 19px;\n  bottom: 100%;\n  content: \'\';\n  border-left: 10px solid transparent;\n  border-bottom: 11px solid #ddd;\n  border-right: 10px solid transparent;\n}\n\n.codio-button-result-icon {\n  position: absolute;\n  top: 20px;\n  left: 26px;\n  width: 26px;\n  height: 26px;\n}\n\n.codio-button-result-icon-pass {\n  background-image: url("/assets/images/guides/checkmark_green.svg");\n}\n\n.codio-button-result-icon-partial {\n  background-image: url("/assets/images/guides/percent.svg");\n}\n\n.codio-button-result-icon-fail {\n  background-image: url("/assets/images/guides/remove_red.svg");\n}\n\n.codio-button-result-icon-progress {\n  background-image: url("/assets/images/guides/spinner-black.gif");\n  background-size: 16px 16px;\n  height: 16px;\n  width: 16px;\n}\n\n.codio-button-result .codio-button-result-out {\n  overflow: auto;\n  font-family: monospace;\n  margin: 0;\n  white-space: pre-wrap;\n}\n\n.codio-button.codio-button-result-success {\n  color: #ffffff;\n  background: #18d8a7;\n  border: none;\n}\n\n.codio-button.codio-button-result-danger {\n  background-color: #E86A6B;\n  border: none;\n  margin-left: 5px;\n}\n\n.codio-button.codio-button-result-primary {\n  color: #ffffff;\n  background: #15a4fa;\n  border: none;\n  margin-left: 5px;\n}\n\n.codio-button.codio-assessment-disabled {\n  /* ios iframe hack, opacity rerenders whole iframe and scrolls up*/\n  background-color: #8bacea;\n  border-color: #8bacea;\n}\n\n.codio-button.codio-button-type-assessment-grade {\n  margin-left: 10px;\n}\n\n.codio-assessment-grade-book .codio-button.codio-button-type-assessment-grade {\n  margin-left: 0;\n  margin-top: 10px;\n}\n\n.codio-button-result .codio-button-result-error-text {\n  color: #b94a48;\n}\n\n.codio-button-result .codio-button-result-success-text {\n  color: #468847;\n}\n\n.codio-assessment-compare .codio-button-result.fail .codio-button-result-out,\n.codio-challenge.codio-assessment-compare .codio-button-result.pass .codio-button-result-out\n{\n  font-style: normal;\n  font-size: 16px;\n}\n\n.codio-assessment-compare .codio-button-result-out > div {\n  font-weight: 600;\n}\n\n.codio-assessment-compare .codio-button-result-out > div > pre,\n.codio-assessment-compare .codio-button-result-out div.codio-output-diff > pre {\n  font-weight: 500;\n  font-size: 14px;\n  margin: 0;\n}\n\n.codio-assessment-compare .codio-button-result-out .codio-output-text,\n.codio-assessment-compare .codio-button-result-out .codio-expected-output-text,\n.codio-assessment-compare .codio-button-result-out .codio-feedback-text {\n  max-height: 250px;\n  overflow: auto\n}\n\n.codio-assessment-compare .codio-button-result-out .codio-feedback-text {\n  word-break: break-word;\n  white-space: pre-wrap;\n}\n\n.codio-assessment-compare .codio-button-result-out .codio-output-text,\n.codio-assessment-compare .codio-button-result-out .codio-output-diff-del\n{\n  background-color: #ffe6e6;\n}\n\n.codio-assessment-compare .codio-button-result-out .codio-expected-output-text,\n.codio-assessment-compare .codio-button-result-out .codio-output-diff-ins {\n  background-color: #e9fff2;\n}\n\n.codio-output-diff {\n  max-height: 500px;\n  overflow: auto\n}\n\n/* HelpBlock Component*/\n/* By default, the arrow is to the top left of the block. */\n.codio-helpBlock, .stackinputfeedback {\n  border-radius: 2px;\n  border: 1px solid #d3d5dc;\n  color: #33393d;\n  margin: 10px 36px 10px 0;\n  padding: 10px;\n  line-height: 16px;\n  position: relative;\n  max-width: 570px;\n}\n\n.codio-helpBlock--fullWidth {\n  max-width: none;\n  margin-left: 0;\n  margin-right: 0;\n}\n\n.stackinputfeedback:empty {\n  display: none;\n}\n\n.stackinputfeedback,\n.codio-assessment-compare .codio-button-result-out .codio-feedback-text\n{\n  background-color: #fbfbfb;\n}\n\n/* Positions arrow to the bottom left. */\n.codio-helpBlock--topLeftArrow:before {\n  position: absolute;\n  display: inline-block;\n  content: \'\';\n  border-bottom: 7px solid #eee;\n  border-right: 7px solid transparent;\n  border-left: 7px solid transparent;\n  left: 10px;\n  top: -8px;\n}\n\n.codio-helpBlock--topLeftArrow:after {\n  position: absolute;\n  display: inline-block;\n  content: \'\';\n  border-bottom: 6px solid #FFFFFF;\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  left: 11px;\n  top: -6px;\n}\n\n/* Positions arrow to the bottom left. */\n.codio-helpBlock--bottomLeftArrow:before {\n  position: absolute;\n  display: inline-block;\n  content: \'\';\n  border-top: 7px solid #eaecf2;\n  border-right: 7px solid transparent;\n  border-left: 7px solid transparent;\n  left: 10px;\n  bottom: -8px;\n}\n\n.codio-helpBlock--bottomLeftArrow:after {\n  position: absolute;\n  display: inline-block;\n  content: \'\';\n  border-top: 6px solid #FFFFFF;\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  left: 11px;\n  bottom: -6px;\n}\n\n/* Positions arrow to the left. */\n.codio-helpBlock--leftArrow:before {\n  position: absolute;\n  display: inline-block;\n  content: \'\';\n  border-bottom: 7px solid transparent;\n  border-right: 7px solid #eee;\n  border-top: 7px solid transparent;\n  left: -7px;\n  top: 10px;\n}\n\n.codio-helpBlock--leftArrow:after {\n  position: absolute;\n  display: inline-block;\n  content: \'\';\n  border-bottom: 6px solid transparent;\n  border-right: 6px solid #fff;\n  border-top: 6px solid transparent;\n  left: -6px;\n  top: 11px;\n}\n\n.codio-challenge.codio-challenge-collapsed::before {\n  top: 12px;\n}\n\n.codio-button-type-gradeBook-pointsInput {\n  margin-right: 5px;\n}\n\n.codio-button-type-gradeBook-pointsOf {\n\n}\n\n.codio-button-type-gradeBook-pointsPicker {\n  margin-top: 5px;\n}\n\n.codio-button-type-gradeBook-commentInfo {\n  margin-top: 5px;\n}\n\n.codio-button-type-gradeBook-nameCollapse {\n  display: flex;\n  display: -moz-box;\n  display: -webkit-box;\n\n  flex-direction: row;\n  -webkit-box-orient: horizontal;\n  -moz-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -moz-box-direction: normal;\n  min-width: 0;\n\n  justify-content: space-between;\n  -webkit-box-pack: justify;\n  -moz-box-pack: justify;\n  -ms-flex-pack: justify;\n\n  align-items: baseline;\n  -webkit-box-align: baseline;\n  -moz-box-align: baseline;\n  -ms-flex-align: baseline;\n\n  height: 1.6em;\n}\n',n(87677),"footer {\n  text-align: center;\n  margin-top: 80px;\n  font-family: 'Nunito Sans';\n}\n\nfooter button {\n  text-decoration: none;\n  background-image: none;\n  line-height: 1.5em;\n  border-radius: 2em;\n  padding: 0 8px;\n  background-color: transparent;\n  border: 1px solid #aaa;\n  text-transform: none;\n  min-width: 1em;\n  font-size: 0.9em;\n  color: #636C85;\n  margin-right: 20px;\n}\n\nfooter button:hover {\n  border-color: #444;\n  color: #444;\n}\n\nfooter button span::after {\n  background-image: url('/assets/images/guides/footer-next.png');\n  background-size: 1em 1em;\n  width: 1em;\n  height: 1em;\n  content: \" \";\n  display: inline-block;\n  font-size: 1em;\n  vertical-align: middle;\n  margin-bottom: .25em;\n  margin-left: 0.1em;\n}\n\nfooter button.plain span::after {\n  display: none;\n}\n","html {\n  font-size: 18px;\n}\n\nbody {\n  margin: 0 60px 30px;\n  font-size: 18px;\n  line-height: 1.5;\n}\n\n@media only screen and (max-width: 600px) {\n  body {\n    margin: 0 30px 30px;\n  }\n}\n\n@media only screen and (max-width: 400px) {\n  body {\n    margin: 0 20px 30px;\n  }\n}\n\n.rendered-markdown {\n  font-family: 'Nunito Sans', sans-serif;\n  max-width: 660px;\n  margin: 0 auto;\n  font-weight: 150;\n  color: #212c3f;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-family: 'Nunito Sans', sans-serif;\n  font-weight: 700;\n  margin-top: 1em;\n  margin-bottom: 16px;\n}\n\nstrong, b {\n  font-weight: bold;\n}\n\nh1 {\n  font-size: 1.8em;\n  font-weight: 900;\n}\n\nh2 {\n  border-bottom: 1px solid #212c3f;\n  font-size: 1.6em;\n}\n\nh3 {\n  font-size: 1.4em;\n}\n\nh4 {\n  font-size: 1.2em;\n}\n\nh5,\nh6 {\n  font-size: 1em;\n}\n\n.page-title {\n  margin-top: 10px;\n  line-height: 1.1em;\n  color: #8e8e8e;\n  -webkit-transition: all 0.6s ease-in-out;\n  -moz-transition: all 0.6s ease-in-out;\n  transition: all 0.6s ease-in-out;\n}\n\n.page-title.shrink {\n  position: fixed;\n  top: 0;\n  z-index: 9;\n  background: #FFF;\n  max-width: 90%;\n  width: 90%;\n  font-size: 1.2em;\n  font-style: italic;\n  font-weight: 500;\n  padding: 10px 5% 10px 5%;\n  margin-top: 0;\n  margin-left: -60px;\n  color: #767676;\n  box-shadow: 1px 0 20px #FFF;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  -o-text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\na {\n  color: #212c3f;\n  text-decoration: none;\n  text-shadow: 0.03em 0 white, -0.03em 0 white, 0 0.03em white, 0 -0.03em white, 0.06em 0 white, -0.06em 0 white, 0.09em 0 white, -0.09em 0 white, 0.12em 0 white, -0.12em 0 white, 0.15em 0 white, -0.15em 0 white;\n  background-image: -webkit-linear-gradient(#ffffff, #ffffff), -webkit-linear-gradient(#ffffff, #ffffff), -webkit-linear-gradient(#212c3f, #212c3f);\n  background-image: linear-gradient(#ffffff, #ffffff), linear-gradient(#ffffff, #ffffff), linear-gradient(#212c3f, #212c3f);\n  background-size: .05em 1px, .05em 1px, 1px 1px;\n  background-repeat: no-repeat, no-repeat, repeat-x;\n  background-position: 0% 90%, 100% 90%, 0% 90%;\n  cursor: pointer;\n}\n\na::-moz-selection {\n  text-shadow: 0.03em 0 #b4d5fe, -0.03em 0 #b4d5fe, 0 0.03em #b4d5fe, 0 -0.03em #b4d5fe, 0.06em 0 #b4d5fe, -0.06em 0 #b4d5fe, 0.09em 0 #b4d5fe, -0.09em 0 #b4d5fe, 0.12em 0 #b4d5fe, -0.12em 0 #b4d5fe, 0.15em 0 #b4d5fe, -0.15em 0 #b4d5fe;\n  background: #b4d5fe;\n}\na::selection {\n  text-shadow: 0.03em 0 #b4d5fe, -0.03em 0 #b4d5fe, 0 0.03em #b4d5fe, 0 -0.03em #b4d5fe, 0.06em 0 #b4d5fe, -0.06em 0 #b4d5fe, 0.09em 0 #b4d5fe, -0.09em 0 #b4d5fe, 0.12em 0 #b4d5fe, -0.12em 0 #b4d5fe, 0.15em 0 #b4d5fe, -0.15em 0 #b4d5fe;\n  background: #b4d5fe;\n}\n\na::-moz-selection {\n  text-shadow: 0.03em 0 #b4d5fe, -0.03em 0 #b4d5fe, 0 0.03em #b4d5fe, 0 -0.03em #b4d5fe, 0.06em 0 #b4d5fe, -0.06em 0 #b4d5fe, 0.09em 0 #b4d5fe, -0.09em 0 #b4d5fe, 0.12em 0 #b4d5fe, -0.12em 0 #b4d5fe, 0.15em 0 #b4d5fe, -0.15em 0 #b4d5fe;\n  background: #b4d5fe;\n}\n\na:before,\na:after,\na *,\na *:before,\na *:after {\n  text-shadow: none;\n}\n\n.docs-body a:visited {\n  color: #212c3f;\n}\n\ncode {\n  font-family: monospace;\n}\n\ncode {\n  font-size: 77%;\n  font-weight: 400;\n  font-style: normal;\n  padding: 0 .5em;\n  background-color: #f7f9fc;\n  border: 1px solid #c7d5f6;\n  border-radius: 2px;\n}\n\n.p-tag,\nblockquote,\nul,\nol,\ndl,\ntable {\n  margin: 0em 0 24px 0;\n}\n\nli {\n  margin-bottom: .5em;\n}\n\nli:last-of-type {\n  margin-bottom: 0;\n}\n\ndt {\n  font-weight: 700;\n}\n\npre {\n  margin: 1em 0;\n}\n\npre code {\n  padding: 20px 28px;\n  display: block;\n  overflow: auto;\n}\n\npre code b,\npre code strong {\n  font-weight: 700;\n}\n\n.code-block {\n  position: relative;\n}\n\n.btn-clipboard {\n  background-image: url('/assets/images/guides/clipboard.svg');\n  background-position: center;\n  background-repeat: no-repeat;\n  background-color: transparent;\n  position: absolute;\n  top: 5px;\n  left: 4px;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  opacity: 0.5;\n}\n\n.btn-clipboard:hover {\n  opacity: 0.7;\n}\n\nul {\n  padding-left: 1.3em;\n}\n\nul ul {\n  padding-left: 1.5em;\n  margin: 0;\n}\n\ntable {\n  border-collapse: collapse;\n  width: 100%;\n  font-size: inherit;\n}\n\ntable th,\ntable td {\n  padding: 14px;\n}\n\ntable thead tr {\n  border-top: 1px solid #c7d5f6;\n}\n\ntable tbody tr:first-child {\n  border-top: 1px solid #c7d5f6;\n}\n\ntable tbody tr:nth-child(2n) {\n  background-color: #f7f9fc;\n}\n\ntable tbody tr:last-child {\n  border-bottom: 1px solid #c7d5f6;\n}\n\nabbr {\n  border-bottom: 1px dashed #c7d5f6;\n  cursor: help;\n}\n\nhr {\n  border: none;\n  border-top: 1px solid #c7d5f6;\n  height: 1px;\n  padding: 0;\n}\n\nimg {\n  margin: 0 auto;\n  display: block;\n  max-width: 100%;\n}\n\n.guides-image {\n  cursor: zoom-in;\n}\n\n.codio-challenge .guides-image {\n  cursor: default;\n}\n\nblockquote {\n  padding-left: 20px;\n  border-left: 2px solid #212c3f;\n  font-style: italic;\n}\n\nmark {\n  background-color: #ffff9d;\n  padding: .05em .2em;\n  border-radius: 2px;\n}\n\n.codio-button-type-assessment,\n.codio-assessment-last-run {\n  font-family: 'Nunito Sans', sans-serif;\n}\n"],f={light:{id:"light",name:"Light Reading",css:p.join("\n"),dyslexic:!1},dyslexic:{id:"dyslexic",name:"Dyslexic",css:[].concat(p,['@font-face {\n  font-family: "OpenDyslexic";\n  src: url(/assets/images/guides/fonts/OpenDyslexic-Bold.woff);\n  font-weight: bold;\n}\n\n@font-face {\n  font-family: "OpenDyslexic";\n  src: url(/assets/images/guides/fonts/OpenDyslexic-BoldItalic.woff);\n  font-weight: bold;\n  font-style: italic;\n}\n\n@font-face {\n  font-family: "OpenDyslexic";\n  src: url(/assets/images/guides/fonts/OpenDyslexic-Italic.woff);\n  font-style: italic;\n}\n\n@font-face {\n  font-family: "OpenDyslexic";\n  src: url(/assets/images/guides/fonts/OpenDyslexic-Regular.woff);\n}\n\n@font-face {\n  font-family: "OpenDyslexic Mono";\n  src: url(/assets/images/guides/fonts/OpenDyslexicMono-Regular.woff);\n}\n\nbody, .rendered-markdown {\n  font-family: "OpenDyslexic", sans-serif;\n  font-weight: 300;\n  line-height: 1.5;\n}\n\nbody,\n.rendered-markdown,\n.codio-button-result {\n  background-color: #FFF2E6;\n  color: #303030;\n}\n\n.page-title {\n  background-color: #FFF2E6;\n}\n\n.page-title.shrink {\n  box-shadow: 1px 0 20px #FFF2E6;\n}\n\npre {\n  font-family: "OpenDyslexic Mono", monospace;\n}\n\n.page-title,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-family: "OpenDyslexic", sans-serif;\n  clear: left;\n  font-weight: 400;\n  color: #475760;\n}\n\na, footer a {\n  color: #5396BE;\n  font-family: "OpenDyslexic", sans-serif;\n}\n\na {\n  border-bottom: 1px solid #5396BE;\n  text-shadow: none;\n  background-image: none;\n}\n\nol li:before {\n  font-family: \'OpenDyslexic\', sans-serif;\n}\n\n/* standard tables */\ntable {\n  font-family: "OpenDyslexic", sans-serif;\n  font-size: inherit;\n}\n\npre code,\npre code.highlight,\npre tt {\n  font-family: "OpenDyslexic Mono", Monaco, Menlo, Consolas, "Courier New", monospace;\n  font-size: 90%;\n  line-height: 23px;\n}\n\ncode,\ntt {\n  font-size: 75%;\n  font-family: "OpenDyslexic Mono", Monaco, Menlo, Consolas, "Courier New", monospace;\n  padding: .2em .5em;\n}\n\n.codio-image-table h3,\n.codio-image .p-tag + .p-tag,\n.codio-button,\n.codio-button-result,\n.codio-button-result .codio-button-result-out {\n  font-family: \'OpenDyslexic\', sans-serif;\n}\n\n.guides-image {\n  cursor: zoom-in;\n}\n\n.codio-challenge .guides-image {\n  cursor: default;\n}\n\n.codio-button-result .codio-button-result-out {\n  min-height: 2.3em;\n}\n\ntable thead tr,\ntable tbody tr:first-child,\ntable tbody tr:last-child ,\nabbr,\nhr,\nh2,\nh1,\ncode,\n.codio-button-result {\n  border-color: rgba(0, 0, 0, 0.18);\n}\n\ntable thead tr {\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n.codio-button-result:before {\n  border-bottom-color: rgba(0, 0, 0, 0.18);\n}\n.codio-button-result:after {\n  border-bottom-color: rgba(230, 218, 207, 1);\n}\n\n\ncode,\npre,\ntable tbody tr:nth-child(2n) {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\ndiv.rendered-markdown > .p-tag:nth-child(even),\ndiv.rendered-markdown > div:nth-child(even){\n  background-color: rgba(0,0,0, 0.05);\n}\n\ndiv.rendered-markdown ul > li:nth-child(even),\ndiv.rendered-markdown ol > li:nth-child(even){\n  background-color: rgba(0,0,0, 0.05);\n}\n\n\n.reading-bar {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  z-index: 200;\n  pointer-events: none;\n  background-color: rgba(0, 0, 0, 0.098);\n  height: 1.5em;\n}\n\ndiv.rendered-markdown .p-tag:hover,\ndiv.rendered-markdown li:hover,\ndiv.rendered-markdown h1:not(.page-title):hover,\ndiv.rendered-markdown h2:hover,\ndiv.rendered-markdown h3:hover,\ndiv.rendered-markdown h4:hover,\ndiv.rendered-markdown h5:hover,\ndiv.rendered-markdown h6:hover,\ndiv.rendered-markdown pre:hover,\ndiv.rendered-markdown td:hover,\n.codio-button-result  {\n  background-color: rgba(0, 0, 0, 0.1) !important;\n}\n']).join("\n"),dyslexic:!0}},h=function e(t){var n=f[t];return o().isUndefined(n)?e(l.ZP.DEFAULT_THEME):n.css},m="user",g="project";function v(e){return b.apply(this,arguments)}function b(){return(b=(0,i.Z)(a().mark((function e(t){var n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.ZP.get(m,"guides","theme"),!((i=u.ZP.get(g,"guides","theme"))&&i.length>0)){e.next=4;break}return e.abrupt("return",i);case 4:if(!(n&&n.length>0)){e.next=6;break}return e.abrupt("return",n);case 6:return e.abrupt("return",y(t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return e.getMetadata().then((function(e){return e.theme}))}const w={themes:function(){return o().cloneDeep(f)},getTheme:function(e){return o().cloneDeep(f[e])},getCss:h,applyTheme:function(e){var t=f[e];if(o().isUndefined(t))return o().isUndefined(d)&&(d=u.ZP.get(m,"guides","editor_theme_before_dyslexic")),u.ZP.set(m,"guides","theme",""),u.ZP.set(g,"guides","theme",""),u.ZP.set(m,"editor","theme",d),void u.ZP.commit();t.dyslexic?function(e){var t=u.ZP.get(g,"guides","theme");t&&u.ZP.set(g,"guides","theme",""),u.ZP.set(m,"guides","theme",e.id),d=t||"",u.ZP.set(m,"guides","editor_theme_before_dyslexic",d),u.ZP.set(m,"editor","theme","dyslexic")}(t):function(e){var t=u.ZP.get(m,"guides","theme");t&&u.ZP.set(m,"guides","theme",""),"dyslexic"===t&&(o().isUndefined(d)&&(d=u.ZP.get(m,"guides","editor_theme_before_dyslexic")),u.ZP.set(m,"editor","theme",d)),u.ZP.set(g,"guides","theme",e.id)}(t),u.ZP.commit()},getCurrentTheme:function(){return v(c.ZP)},getMetadataThemeContent:function(){return y(c.ZP)},getCurrentThemeContent:function(){return v(c.ZP).then((function(e){return h(e)}))}}},70623:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(49721),r=n(72375);const a={constructBasicEvent:function(){var e=r.Z.getEduStartedAssignmentInfo();return{assignmentId:e&&r.Z.getAssignmentId(e),projectId:i.Z.currentProject.guid}}}},4629:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>i});const i={JUNIT_KEY:"junit_stored_result",NO_TESTS:-1,NO_JAVA:120,COMPILE_ERROR:121}},82678:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Z,getCurrentExecutions:()=>k,getStoredExecution:()=>P});var i=n(15861),r=n(87757),a=n.n(r),s=n(96486),o=n.n(s),c=n(93443),l=n(49721),u=n(60989),d=n(95611),p=n(44442),f=n(20294),h=n(50156),m=n(4629),g=u.ZP.containerManager,v=n(68058).I_,b=m.ZP.JUNIT_KEY,y=m.ZP.NO_TESTS,w=null;function _(){function e(e){return v.set(b+":"+l.Z.currentProject.guid,JSON.stringify(e)),e}var t=l.Z.currentProject.guid;return d.Z.saveAllAndWait().then((function(){var e=p.Z.get("junit").timeout;return e=e>300?300:e,g.run(t,"/usr/share/codio/assessments/junit/junit_runner.sh",{cwd:"/home/codio/workspace",timeout:e,args:[]})})).then(e).catch((function(t){return e(t.message)}))}c.Z.subscribe("junit:execute",(0,i.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=6;break}return e.next=3,f.ZP.promise.getState(w);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=null;case 7:if(t=e.t0,null===w||t!==f.ZP.promise.STATES.PENDING){e.next=10;break}return e.abrupt("return");case 10:w=h.ZP.loadSettingsFromFile().then((function(e){return o().isEmpty(e.cases)?{code:y,stdout:"No executions"}:_()}));case 11:case"end":return e.stop()}}),e)}))));var k=function(){var e=(0,i.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===w){e.next=2;break}return e.abrupt("return",w);case 2:if(!(t=P())){e.next=5;break}return e.abrupt("return",JSON.parse(t));case 5:return e.abrupt("return",{code:y,stdout:"No executions"});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){return v.get(b+":"+l.Z.currentProject.guid)};const Z={getCurrentExecutions:k,getStoredExecution:P}},50156:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>m});var i=n(96486),r=n.n(i),a=n(20294),s=n(49721),o=n(93443),c=".codioJUnit",l={};function u(e){return s.Z.currentProject.exists(e)?s.Z.currentProject.file(e):function(e){if(!s.Z.currentProject)return Promise.reject(new Error("No project"));var t=a.ZP.path.parse(e),n=t.name,i=t.dir;return s.Z.currentProject.createFile(n,i)}(e).then((function(){return s.Z.currentProject.file(e)})).then((function(e){return e.content="{}",e}))}function d(e){return l[e]||(l[e]=u(e)),l[e]}function p(e,t){return t.content=JSON.stringify(e,void 0," "),e}var f,h;f=c,h=r().throttle(function(e){s.Z.currentProject.exists(e)||delete l[e]}.bind(null,c),500),r().each(["item:moved:","item:moved:#from:","item:deleted:"],(function(e){o.Z.subscribe(e+f,h)}));const m={loadSettingsFromFile:function(){return d(c).then((function(e){return function(e){try{return JSON.parse(e.content)}catch(e){return{}}}(e)}))},updateSettingsContent:function(e){return d(c).then(p.bind(null,e))}}},12953:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});var i=["ocaml","java","python"]},94117:(e,t,n)=>{"use strict";n.d(t,{VF:()=>r,_Q:()=>a});var i="file:///home/codio/workspace/",r=function(e){return i+e},a=function(e){return e.replace(i,"")}},84346:(e,t,n)=>{"use strict";n.d(t,{Pl:()=>i,ZP:()=>a,if:()=>r});var i="preview",r="preview-deploy";const a={EXT_NAME:"preview",SETTINGS_INDEX:"index_file",MODE_DEFAULT:i,MODE_PREVIEW_DEPLOY:r,MODE_DEPLOY:"deploy",RUN_MODE_PREVIEW:0,RUN_MODE_PREVIEW_DEPLOY:1,RUN_MODE_DEPLOY:2}},86190:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(44952),r={},a={};r.openInNewWindow=function(e,t){i.Z.interpolate(e).then((function(e){t&&(a[e]=t);var n=a[e];n&&!n.closed?(n.location=e,n.focus()):(n=window.open(e,"_blank"),a[e]=n)}))};const s=r},72664:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(96486),r=n.n(i),a=n(49721),s=n(20294),o=n(97137),c=n(44442),l=n(54565),u=n(86190),d=n(84346);const p=JSON.parse('["txt","js","css","coffee","scss","sass","html","htm","md","less","pdf"]');var f=n(68058).I_,h={},m={coffee:"js",less:"css",scss:"css",sass:"css"};h.getCurrentFile=function(){var e,t=a.Z.ide.panels.focus&&a.Z.ide.panels.focus.activeTab();if(t){var n=t.extensionName;"tree"!==n&&"preview"!==n||(e=t.filename)}return e},h.getDefaultAddress=function(e,t){return e?h.url(t)+"."+e:h.url(t)},h.url=function(e){return 0===e.indexOf("http")?e:0===e.indexOf("//")?window.location.protocol+e:l.Z.get("backendSchema")+s.ZP.path.join(a.Z.currentProject.backendDomain,e)},h.inWhiteList=function(e){if(!s.ZP.url.parse(e).pathname)return!0;var t=e.split("/"),n=r().last(t).match(/\.(\w+)$/);if(!n)return!0;var i=n[1];return r().includes(p,i)},h.findCompiledViewExtension=function(e){var t;for(var n in m)if(m[n]){var i=e.indexOf("."+n);if(-1!==i&&i===e.length-n.length-1){t=m[n];break}}return t},h.getProjectIndex=function(){var e=h.getProjectIndexFile();return e&&(e=a.Z.currentProject.exists(e)?e:null),e},h.getProjectIndexFile=function(){var e=null,t=c.Z.get(d.ZP.EXT_NAME);return t&&t[d.ZP.SETTINGS_INDEX]&&(e=t[d.ZP.SETTINGS_INDEX]),e},h.addrInPreviewDomain=function(e){try{return 0===s.ZP.url.parse(e).hostname.indexOf(a.Z.currentProject.backendDomain)}catch(e){return!1}},h.isDefaultPort=function(e){try{var t=s.ZP.url.parse(e).port;return"80"===t||void 0===t}catch(e){return!1}},h.showIndexNotFound=function(){o.Z.error("Unable to find an <code>"+s.ZP.safeHtml(h.getProjectIndexFile())+"</code> in your project. You can locate a file to preview in the filetree and then right-click it. Alternatively, check <code>Current File</code> in Preview dropdown menu and click Preview button")},h.openProjectIndex=function(e,t,n){t=t||d.ZP.MODE_DEFAULT;var i=h.getProjectIndex();i?e?h.openInCodioTab(t,i,"Preview for "+i):u.Z.openInNewWindow(h.url(i),n):h.showIndexNotFound()},h.previewStorageLinkId=function(e){return"preview-links-"+a.Z.currentProject.guid+"-"+e},h.openPreview=function(e,t,n,i){if(n=n||d.ZP.MODE_DEFAULT,r().isEmpty(t))h.openProjectIndex(e,n);else if(e)h.openInCodioTab(n,t,t+" (Preview)");else{if("preview-url"===n){if(n="preview",void 0===(t=f.get(h.previewStorageLinkId(t))))return}else t=h.url(t);u.Z.openInNewWindow(t,i)}},h.openInCodioTab=function(e,t,n){var i=a.Z.ide.panels,r=i.focus&&i.focus.isOpen(t,e);r?(i.focus.activateTab(r),i.focus.focus(),"preview-url"===e&&(t=f.get(h.previewStorageLinkId(t)),e="preview"),r._callExtensionSync("setUrl",t),r._callExtensionSync("refresh")):a.Z.ide.open(e,t,{title:n})},h.getCodioDeployUrl=function(){return a.Z.get("deployment")().then((function(e){return e.getCodioDeployUrl()}))},h.hasDeployPermission=function(){return a.Z.currentUser&&!a.Z.currentUser.isAnonymous()&&a.Z.currentProject&&a.Z.currentProject.isAdmin};const g=h},15454:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(96486),r=n.n(i),a=n(52308),s=n.n(a),o=n(177),c=n.n(o),l=n(20294),u=n(93443),d=n(58471);var p=c().compile('<div class="quick-list-dlg">\n    <div>\n        <label for="search">Search:</label>\n        <span role="combobox" aria-expanded="true" aria-owns="itemsList" aria-haspopup="listbox" id="search-listbox">\n            <input type="text" class="fuzzy-search" id="search" name="search" placeholder="{{searchPlaceholder}}" autocomplete="off" data-allowed-hotkeys="{{allowedHotkeys}}">\n        </span>\n    </div>\n    <div class="list-container">\n        <ul aria-labelledby="itemsList" role="listbox" id="itemsList" class="list"></ul>\n        <p id="warning-message">\n            Only showing the first {{maxItems}} results.\n        </p>\n        <div class="disable-list-container"></div>\n    </div>\n</div>\n'),f=l.ZP.KeyCode;function h(e,t){this._init(),this.getData=e,this.options=t,this.maxItems=t&&t.maxItems?t.maxItems:50}var m=h.prototype;function g(e){var t=this.content(),n=t.find(".fuzzy-search");t.find("#warning-message").hide(),n.focus(),l.ZP.promise.defer().then((function(){e._initializeList()}))}m._init=function(){this.dialog=null,this.itemsPerPage=0,this.selectedIndex=0,this.currentQueryId=null,this.currentQuery="",this.openAfterSearch=!1},m._getContent=function(){var e={searchPlaceholder:this.options.searchPlaceholder,allowedHotkeys:this.options.allowedHotkeys,maxItems:this.maxItems};return s()(p(e))},m._initializeList=function(){var e=this;this.getData().then((function(t){var n=e.dialog&&e.dialog.content();if(n){var i=n.find(".fuzzy-search"),a=n.find(".quick-list-dlg").find(".list-container");e._renderList(a,t),e._dropSelection(a),u.Z.on(a,"click",(function(t){e._onClick(t.target)}));var o="",c=function(){var n=s()(this).val().trim();n!==o&&(o=n,e._onQueryChanged(n,t,a))};c.call(i),u.Z.on(i,"keydown",(function(t){if(t.which===f.RETURN){if(t.preventDefault(),null===e.currentQueryId){var n=a.children("#itemsList");e._onClick(n.children(":visible").eq(e.selectedIndex))}else e.openAfterSearch=!0;return!1}r().includes([f.UP,f.DOWN,f.PAGE_UP,f.PAGE_DOWN],t.which)?e._handleSelectionChangeKeys(t,a):r().defer((function(){t.which!==f.TAB&&c.call(i)}))})),u.Z.on(i,"change",c)}}))},m._onQueryChanged=function(e,t,n){this.currentQueryId=Math.random(),this.currentQuery=e;var i=this,r=this.currentQueryId,a=function(e){!1!==(0,i.options.callback)(null,e)&&i.close()},s=function(){return this.currentQuery!==e||this.currentQueryId!==r}.bind(this);l.ZP.promise.delay(20).then((function(){return s()?Promise.reject(new Error("query was canceled")):i.options.filterOnQueryChanged(t,e,s)})).then((function(e){return s()?Promise.reject(new Error("query was canceled")):i.openAfterSearch?(e[0]&&a(e[0]),i.currentQueryId=null,i.openAfterSearch=!1,Promise.reject(new Error("was opened after search"))):(i._renderList(n,e),e)})).then((function(e){return l.ZP.promise.defer(e)})).then((function(e){s()||(i.openAfterSearch?e[0]&&a(e[0]):m._dropSelection(n),i.currentQueryId=null,i.openAfterSearch=!1)})).catch((function(){}))},m._handleSelectionChangeKeys=function(e,t){e.preventDefault();var n,i=t.children("#itemsList"),r=i.children().length;e.which===f.UP?n=-1:e.which===f.DOWN?n=1:e.which===f.PAGE_UP?n=-this.itemsPerPage:e.which===f.PAGE_DOWN&&(n=this.itemsPerPage),this.selectedIndex+=n,this.selectedIndex=Math.max(this.selectedIndex,0),this.selectedIndex=Math.min(this.selectedIndex,r-1),this._updateSelection(i,!0)},m._updateSelection=function(e,t){var n=e.children().length,i=e.parent(),r=i.scrollTop(),a=e.children(0).outerHeight(),s=this.selectedIndex*a,o=i.prop("clientHeight");this.itemsPerPage=Math.floor(o/a);var c=a*(this.itemsPerPage-1);if(r-s>a?i.scrollTop(s):s-r-o>a?i.scrollTop(s-c):s<r?i.scrollTop(r-a):s>r+c?i.scrollTop(r+a):this.selectedIndex===this.maxItems-1&&i.scrollTop(r+30),this.selectedIndex<n){var l=e.children(":visible");l.removeClass("selected"),l.eq(this.selectedIndex).addClass("selected"),l.find('a[aria-selected="true"]').attr("aria-selected","false");var u=l.eq(this.selectedIndex).find("a");u.attr("aria-selected","true"),t&&u.focus()}},m._renderList=function(e,t){var n=r()(t).take(this.maxItems).map((function(e){return e})).value();e.children("#itemsList").remove();var i=s()(this.options.listTemplate({items:n}));e.prepend(i),function(e,t){t?e.show():e.hide()}(e.children("#warning-message"),t.length>this.maxItems);var a=this,o=this.dialog.content().find(".fuzzy-search");u.Z.on(i,"keydown",(function(t){var n=t.which||t.keyCode;r().includes([f.UP,f.DOWN,f.PAGE_UP,f.PAGE_DOWN],n)?a._handleSelectionChangeKeys(t,e):(n>47&&n<58||32===n||n>64&&n<91||n>95&&n<112||n>185&&n<193||n>218&&n<223)&&(o.focus(),r().defer((function(){o.trigger("change")})))})),u.Z.on(i,"focus","a",(function(t){var n=s()(t.target).data("index");a.selectedIndex=parseInt(n,10);var i=e.children("#itemsList");a._updateSelection(i)}))},m._dropSelection=function(e){this.selectedIndex=0;var t=e.children("#itemsList");if(t.children().length>0){var n=t.children(":visible");n.removeClass("selected"),n.eq(this.selectedIndex).addClass("selected")}t.parent().scrollTop(0)},m._onClick=function(e){(e=s()(e).closest("li")).length>0&&(!1!==this.options.callback(e)&&this.close())},m.toggle=function(){if(this.dialog)return this.close();var e=this;this._init();var t=r().partial(g,this),n=this._getContent();r().isFunction(this.options.beforeRender)&&this.options.beforeRender(n),this.dialog=new d.Z({title:this.options.title,content:n,onShow:t,showTransition:!1,showLoading:!1,doNotCloseOpened:!0,onClose:function(){e.currentQueryId=null,e.dialog=null},onHide:function(){e.close()}}),this.dialog.buttonsPane.remove()},m.close=function(){this.dialog&&this.dialog.close(),this.dialog=null},m.getDialog=function(){return this.dialog},m.enable=function(){var e=this.dialog&&this.dialog.content();e&&(e.find("input").removeAttr("disabled"),e.find(".btn").removeClass("disabled"),e.find(".disable-list-container").hide())},m.disable=function(){var e=this.dialog&&this.dialog.content();e&&(e.find("input").attr("disabled","disabled"),e.find(".btn").addClass("disabled"),e.find(".disable-list-container").show())};const v=h},36008:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(96486),r=n.n(i),a=n(177),s=n.n(a),o=n(49721),c=n(20294),l=30,u=70;function d(e,t,n,i,r){return(0!==(r=r||0)?c.ZP.promise.defer():Promise.resolve()).then((function(){if(i())return Promise.reject(new Error("query was cancelled"));var a=function(e,t,n,i){for(var r=i.scores,a=i.filteredFiles,s=e.files,o=e.query,c=e.lowerQuery,d=e.regex,f=Date.now(),h=e.pathScoreWeight,m=0,g=s.length;t+m<g;++m){if(m%u==0)if(Date.now()-f>l)break;var v=s[t+m],b=v.path,y=v.selfScore;if(""===o)r[b]=y;else{var w=v.lowerPath;if(!d.test(w))continue;a.push(v);var _=p({query:o,lowerQuery:c,path:b,lowerPath:w},n);r[b]=y+h*_}}return t+m}(e,r,t,n);return a>=e.files.length?n:d(e,t,n,i,a)}))}function p(e,t){var n=e.query.length,i=e.path.length;t.scoreArray.length<n*i&&(t.scoreArray.length=n*i*2,t.sequenceArray.length=n*i*2);var r=t.scoreArray,a=t.sequenceArray;e.fileNameIndex=e.path.lastIndexOf("/");for(var s=0;s<n;++s)for(var o=0;o<i;++o){var c=0===o?0:r[s*i+o-1],l=0===s||0===o?0:r[(s-1)*i+o-1],u=0===s||0===o?0:a[(s-1)*i+o-1],d=f(e,s,o,u);d&&l+d>c?(a[s*i+o]=u+1,r[s*i+o]=l+d):(a[s*i+o]=0,r[s*i+o]=c)}return r[n*i-1]}function f(e,t,n,i){return e.lowerQuery[t]!==e.lowerPath[n]?0:i?function(e,t,n,i){var r=t>n,a=0===t||"/"===e[t-1],s=10;r&&(s+=4);a&&(s+=5);return s+=4*i,s}(e.path,n-i,e.fileNameIndex,i):function(e,t,n){var i=e.path,r=function(e,t,n){if(0===n)return!0;var i=e.charAt(n-1);return"_"===i||"-"===i||"/"===i||"."===i||e[n-1]===t[n-1]&&e[n]!==t[n]}(i,e.lowerPath,n),a=n>e.fileNameIndex,s=0===n||"/"===i[n-1],o=e.query,c=e.lowerQuery,l=o[t]===i[n]&&o[t]!==c[t],u=10;s&&(u+=4);r&&(u+=2);l&&(u+=6);a&&(u+=4);n===e.fileNameIndex+1&&0===t&&(u+=5);a&&r&&(u+=3);return u}(e,t,n)}const h={filterAndScoreFiles:function(e,t,n){var i=(t=t.replace(/\s/g,"")).toLowerCase(),r=""===t?null:function(e){for(var t="^[]{}()\\.$*+?|-,",n="",i=0,r=e.length;i<r;++i){var a=e.charAt(i);-1!==t.indexOf(a)&&(a="\\"+a),i&&(n+="[^"+a+"]*"),n+=a}return new RegExp(n)}(i),a={filteredFiles:""===t?e:[],scores:{}},s=Math.max(Math.round(Math.log(e.length)/Math.LN10),1);return d({files:e,query:t,lowerQuery:i,regex:r,pathScoreWeight:Math.pow(10,s)},{scoreArray:[],sequenceArray:[]},a,n)}};var m=n(15454);var g=null,v=s().compile('<ul aria-labelledby="itemsList" role="listbox" id="itemsList" tabindex="0" class="list quick-open">\n  {{#each items}}\n    <li role="none">\n      <a role="option" href="#" tabindex="-1" data-index="{{@index}}">\n        <h2 aria-hidden="true" class="name">{{name}}</h2>\n        <p class="path" title="{{path}}">{{path}}</p>\n      </a>\n    </li>\n  {{/each}}\n</ul>\n');function b(e,t,n){var i;t?i=t.find(".path").html():n&&(i=n.path),i&&r().isFunction(e)&&e(i)}function y(e,t,n){return c.ZP.promise.defer().then((function(){return h.filterAndScoreFiles(e,t,n)})).then((function(e){return c.ZP.promise.defer(e)})).then((function(e){if(n())return Promise.reject(new Error("query was cancelled"));var t=e.filteredFiles,i=e.scores;return r().sortBy(t,(function(e){return i[e.path]||0})),t}))}const w={open:function(e){if(!o.Z.ide.isClosed){if(e=e||{},g&&g.dialog)return g.close();var t={title:e.title,maxItems:50,allowedHotkeys:e.allowedHotkeys,searchPlaceholder:e.searchPlaceholder,listTemplate:v,filterOnQueryChanged:y,callback:b.bind(this,e.onSelect),beforeRender:e.beforeRender};(g=new m.Z(e.getData,t)).toggle()}},close:function(){g&&g.close(),g=null},getDialog:function(){return g&&g.getDialog()},enable:function(){g&&g.enable()},disable:function(){g&&g.disable()}}},50276:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(96486),r=n.n(i),a=n(93443),s=n(49721),o=n(20294),c=n(36008),l=n(44442).A,u=a.Z.create(n(31663)),d=function(e){var t=e.lastIndexOf("/");return t<0?e:e.substring(t+1)},p=function(e){var t=r().clone(e.activeFiles);delete t[e.focusedFile];var n=[];r().forIn(e.openFiles,(function(t,i){r().has(e.activeFiles,i)||n.push(i)}));var i=r().keys(t).concat(n);return null!==e.focusedFile&&i.push(e.focusedFile),i},f=function(e){var t=null,n={},i={},a=s.Z.ide.panels;return h(a.child,(function(a,s){if("tree"===a.extensionName){var o=a.filename;if(!r().find(e,(function(e){return e.path.toLowerCase()===o.toLowerCase()})))return;s&&a.active&&(t=o),a.active&&(n[o]=1),i[o]=1}})),{focusedFile:t,activeFiles:n,openFiles:i}},h=function e(t,n,i){r().forEach(t.children,(function(r){r.extension?n(r,t.hasFocus||i):e(r,n,i||t.hasFocus)}))};function m(e){l.execute("file","open",{ext:"tree",filename:e}),c.Z.close()}var g=function(e,t){c.Z.open({title:"Quick Open",allowedHotkeys:"ide:key_quick_open",searchPlaceholder:"enter first few letters of a file to open...",getData:function(){return function(e){var t=e?e():s.Z.currentProject.files({isCaseSensitive:!1,filesSeparate:!0}),n=f(t),i=p(n);return o.ZP.promise.defer().then((function(){var e=t.length,a=r().map(i,(function(t,n){var i=d(t);return{path:t,lowerPath:t.toLowerCase(),name:i,lowerName:i.toLowerCase(),selfScore:e-n-1}})),s=r()(n.openFiles);return r().forEach(t,(function(t){s.has(t.path)||(t.lowerPath=t.path.toLowerCase(),t.lowerName=t.name.toLowerCase(),t.selfScore=e-a.length-1,a.push(t))})),a}))}(e)},onSelect:t||m})};a.Z.subscribe("command:ide:key_quick_open",r().debounce((function(){s.Z.ide.isFullScreen&&u.changeFullscreenMode(),r().defer(g)}),200)),a.Z.subscribe("project:close",(function(){c.Z.close()}));const v={open:g}},10947:(e,t,n)=>{"use strict";n.d(t,{q:()=>a});var i=n(96486),r=n.n(i),a=function e(t,n){var i=null;return r().each(t,(function(t){return!(i=t.id===n?t:null)&&t.nodes&&(i=e(t.nodes,n)),!i})),i}},84439:(e,t,n)=>{"use strict";n.d(t,{O:()=>p});var i=n(96486),r=n.n(i),a={id:"",title:"",command:"",onOff:{defaultValue:!1,toggle:!1}},s={title:"divider"};function o(e,t,n,i){var s=r().cloneDeep(a);return n=n.trim(),s.id=e+"-"+n,s.title=n,s.command=e+":select",s.params={id:s.id,title:n,data:t},i&&(s.onOff.defaultValue=!0),s}function c(e,t,n){n.length&&n[e](s),r().isArray(t)||(t=[t]),r().each(t,(function(t){n[e](t)}))}var l=c.bind(null,"push",{title:"Configure....",command:"run:settings",onOff:{defaultValue:!1,toggle:!1}}),u=c.bind(null,"unshift",{title:".codio file is not a valid JSON",command:"run:settings",onOff:{defaultValue:!1,toggle:!1}}),d=c.bind(null,"push",[{id:"preview-inside",title:"Inside Codio",command:"preview:inside",onOff:{defaultValue:!1,toggle:!1}},{id:"preview-new-window",title:"New Browser Tab",command:"preview:new-window",onOff:{defaultValue:!1,toggle:!1}}]),p=function(e){var t=e.default,n=e["default preview"],i=r().map(e.commands,(function(e,n){return o("run",e,n,t===n)})),a=r().map(e.preview,(function(e,t){return o("preview",e,t,n===t)}));return!0===e.error&&(u(i),u(a)),d(a),l(i),l(a),{run:i,preview:a}}},69688:(e,t,n)=>{"use strict";n.d(t,{Q:()=>l});var i=n(96486),r=n.n(i),a=n(240),s=n.n(a),o=n(54565).Z.get("backendSchema"),c={commands:{},preview:{"Project Index (static)":o+"{{domain}}/{{index}}","Current File (static)":o+"{{domain}}/{{filepath}}","Box URL":"https://{{domain3000}}/"}};var l=function(e){if(r().isUndefined(e))return r().cloneDeep(c);var t,n,i=function(e){try{return JSON.parse(e)}catch(e){return-1}}((t=e,(new(s())).strip(t)));return-1===i?((n=r().cloneDeep(c)).error=!0,n):(r().isUndefined(i.commands)&&(i.commands={}),r().isUndefined(i.preview)&&(i.preview=r().cloneDeep(c.preview)),i)}},23147:(e,t,n)=>{"use strict";n.r(t);var i=n(4942),r=n(15861),a=n(87757),s=n.n(a),o=n(96486),c=n.n(o),l=n(49721),u=n(93443),d=n(87122),p=n(44952),f=n(97137),h=n(95611),m=n(20294),g=n(60989),v=n(70623),b=n(71e3),y=n(54565);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=g.ZP.UserEventManager,P=n(44442).A,Z=n(68058).I_,x=n(69688).Q,C=n(84439).O,S=u.Z.create(n(41839)),E=y.Z.get("backendSchema"),I=n(62809);I=I.replace(/\{schema}/gi,E);var T,j=".codio",A="menu-run-button",O="menu-preview-button",D={},N=[];function M(e){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t||P.execute("file","open",{ext:"tree",filename:j});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){var t=l.Z.currentProject;if(t.exists(j))return M(e);var n=m.ZP.promise.deferred(),i=u.Z.subscribe("item:created:"+j,(function(){u.Z.unsubscribe(i),l.Z.currentProject.file(j).then((function(e){c().defer((function(){e.content=I}))})).then((function(){M(e);var t=l.Z.currentProject.getShareFile(j);c().defer((function(){t.save(),H(),n.resolve()}))}))}));return t.createFile(j,""),n.promise}function L(e){var t=D[e];if(l.Z.currentProject.isAdmin&&t){t.title;var n=t.command.split(":"),i=n.shift();n=n.join(":"),h.Z.saveAllAndWait().then((function(){P.execute(i,n,t.params)}))}}function U(e,t,n){void 0!==n&&function(e,t){var n=l.Z.currentProject.guid;Z.set("default-"+e+"-"+n,t)}(t,n);var i=function(e){var t=l.Z.currentProject.guid;return Z.get("default-"+e+"-"+t)}(t),r=c().find(e,{title:i});void 0===r&&(r=c().find(e,(function(e){return"divider"!==e.title})));var a="run"===t?A:O;d.ZP.switchItemInGroup(a,r.id),D[t]=r,d.ZP.setTitle(a,r.title),"preview"===t&&B()}function B(){var e=Z.get("preview-new-window");S.updatePreviewMenuInside({onOff:{defaultValue:!e}}),S.updatePreviewMenuNewWindow({onOff:{defaultValue:e}})}function q(e){var t=C(e);T=t,d.ZP.setItems(A,t.run),d.ZP.setItems(O,t.preview),U(t.run,"run"),U(t.preview,"preview"),B()}function H(){var e=l.Z.currentProject;if(e&&e.isAdmin)return e.exists(j)?void e.file(j).then((function(e){q(x(e.content))})):q(x())}function W(){l.Z.currentProject.file(j).then((function(e){e.close(!0),H()}))}u.Z.subscribe("command:run:append",(function(e,t){var n=t.section,i=t.data;R(!0).then((function(){return l.Z.currentProject.file(j)})).then((function(e){c().defer((function(){var t,r=e.content,a=new RegExp('"'+n+'"s?:s?'),s=r.match(a);if(s){var o=function(e,t){for(var n,i=0,r=0,a=e.length;r<a;r++)if(e[r]===t[0])1==++i&&(n={startPos:r});else if(e[r]===t[1]&&0==--i){n&&(n.endPos=r);break}return n}(r.substring(s.index,r.length),i instanceof Array?"[]":"{}");if(o){var u=s.index+o.startPos,d=s.index+o.endPos+1;t=r.substring(0,u)+JSON.stringify(i)+r.substring(d,r.length)}}if(!t){var p=r.lastIndexOf("}"),f=',\n  "'+n+'": '+JSON.stringify(i)+"\n";t=r.substring(0,p-1)+f+r.substring(p,r.length)}e.content=t;var m=l.Z.currentProject.getShareFile(j);c().defer((function(){m.save(),c().delay((function(){h.Z.saveAllAndWait()}),100)}))}))}))})),u.Z.subscribe("command:run:execute",L.bind(null,"run")),u.Z.subscribe("command:preview:execute",L.bind(null,"preview")),u.Z.subscribe("command:ide:run",L.bind(null,"run")),u.Z.subscribe("command:ide:preview",L.bind(null,"preview")),u.Z.subscribe("command:run:settings",(function(){l.Z.currentProject.exists(j)?M():R()})),u.Z.subscribe("command:run:select",(function(e,t){U(T.run,"run",t.arg.title);var n=t.arg.title,i=t.arg.data;c().isObject(i)&&(n=i.id,i=i.cmd),c().isString(i)&&c().isString(n)&&function(e,t){p.Z.interpolate(e).then((function(e){k.create(k.EventType.MENU_BUTTON,_(_({},v.Z.constructBasicEvent()),{},{command:e})),(0,b.Z)(e,t)})).catch((function(e){var t=e.message;return f.Z.error(t)}))}(c().trim(i),n)})),u.Z.subscribe("command:preview:select",(function(e,t){var n;U(T.preview,"preview",t.arg.title),n=t.arg.data,t.arg.title,P.execute("preview","url",{file:n})})),u.Z.subscribe("project:open",(function(){!function(){if(H(),N.push(u.Z.subscribe("item:deleted:"+j,W)),l.Z.currentProject&&l.Z.currentProject.is_manual_save)N.push(u.Z.subscribe("editor:save:"+j,H));else{var e=c().debounce(H,400);c().forEach(["file:change:","item:created:","item:moved:","item:moved:#file:"],(function(t){N.push(u.Z.subscribe(t+j,e))}))}}()})),u.Z.subscribe("project:permissionsUpdated:#projectId",H),u.Z.subscribe("project:preferencesUpdated",(function(){H()}))},35373:(e,t,n)=>{"use strict";n.r(t);var i=n(52308),r=n.n(i),a=n(49721),s=n(93443),o=n(20294),c=n(58471),l=n(60989),u=n(94049),d=n(64998),p=n(97137),f=l.ZP.search,h="replace cancelled",m="no matches";var g=null;function v(e,t){var n={close:e,hide:t};return null!==g?(g._params=n,g):(g=new c.Z({onClose:function(){g&&(g._params.close.apply(null,arguments),g=null)},onHide:function(){g&&(g._params.hide.apply(null,arguments),g=null)}}),g._params=n,g)}function b(e,t){return"Found "+e+" match(es) in "+t+" file(s)"}function y(){}s.Z.subscribe("search:global:search",(function(e,t){t.z=o.ZP.GUID();var n=d.ZP.encodeParams(t);a.Z.ide.open("search",n,"Search Results "),u.Z.close()})),s.Z.subscribe("search:global:replace",(function(e,t){0===t.locations.length?delete t.locations:t.locations=t.locations.split(" ");var n=function(e){var t=v(y,y);return t.title('Searching for "'+e.pattern+'"...'),t.buttons([{title:"Cancel",class:"mb-cancel",onClick:function(){t.close()}}]),t.content(b(0,0)),t}(t);f.search(t).then((function(e){return l.ZP.standardCallbackTask({message:e.taskId})})).then((function(e){var t={};return t.items=e.totalMatches,t.files=e.filesCount,t.more=e.moreResults,n.content(b(t.items,t.files)),t})).then((function(e){return function(e){var t,n,i,r=o.ZP.promise.deferred(),a=e.items;function s(e){0===a?r.reject(new Error(m)):3!==e&&1!==e?r.resolve():r.reject(new Error(h))}0===a?(n="Nothing found",t="Nothing to replace",i=c.Z.MB_OK):(i=c.Z.MB_YESNO,n="Perform replace?",t="<p>You are about to replace "+(e.more?"more than ":"")+a+" occurrences across "+e.files+" files.</p>",e.more&&(t+="<p><strong>Your search returned more than 500 results</strong>, which we do not show here. Continuing with this replacement will not be limited, and all matches will be replaced.</p>"),t+="<p>Do you wish to continue?</p>");var l=s.bind(null,3),u=v(s,l);return u.title(n),u.content(t),u.buttons(i),r.promise}(e)})).then((function(){return f.replace(t)})).then((function(e){return l.ZP.standardCallbackTask(e)})).then((function(e){r().notify(e+" replacements done"),u.Z.close()})).catch((function(e){e.message!==h&&e.message!==m&&p.Z.error(e.message)}))}))},94049:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var i=n(52308),r=n.n(i),a=n(96486),s=n.n(a),o=n(177),c=n.n(o),l=n(93443),u=n(49721),d=n(20294);var p=c().compile('<div class="search-dialog">\n  <div tabindex="0"></div>\n  <form action="/" method="post" class="clearfix search-dialog-body">\n\n    <div class="options" role="toolbar" aria-label="Search options">\n      <div class="btn-group btn-group-vertical" data-toggle="buttons-checkbox">\n        <button type="button" id="snr-option-regexp" data-name="regexp" class="hint hint-right btn btn-inverse {{#if flags.regexp}}active{{/if}}" aria-label="Regular expression" aria-pressed="false">\n          <i class="ss-icon">flash</i>\n          <span class="hint-text">Regular expression</span>\n        </button>\n        <button type="button" id="snr-option-ignore-case" data-name="ignoreCase" class="hint hint-right btn btn-inverse {{#unless flags.ignoreCase}}active{{/unless}}" aria-label="Case sensitive" aria-pressed="false">\n          <i class="ss-icon">font</i>\n          <span class="hint-text">Case sensitive</span>\n        </button>\n        <button type="button" id="snr-option-whole-words" data-name="wholeWord" class="hint hint-right btn btn-inverse {{#if flags.wholeWord}}active{{/if}}" aria-label="Whole words" aria-pressed="false">\n          <i class="ss-icon">quote</i>\n          <span class="hint-text">Whole words</span>\n        </button>\n      </div>\n    </div>\n\n    <div class="fields form-horizontal">\n      <div class="row">\n        <label class="hint hint-top" for="pattern">Find</label>\n        <input name="pattern" id="pattern" type="text" value="{{pattern}}" placeholder="Find..." data-allowed-hotkeys="{{allowedHotkeys}}">\n      </div>\n\n      {{#unless local}}\n      <div class="row">\n        <label class="hint hint-top" for="locations">Where</label>\n        <input name="locations" id="locations" type="text" value="{{locationsCompiled}}" placeholder="All files and folders" data-allowed-hotkeys="{{allowedHotkeys}}">\n      </div>\n      {{/unless}}\n\n      {{#if showReplace}}\n      <div class="row">\n        <label class="hint hint-top" for="replacement">Replace</label>\n        <input name="replacement" id="replacement" type="text" value="{{replacement}}" placeholder="Replace..." data-allowed-hotkeys="{{allowedHotkeys}}">\n      </div>\n      {{/if}}\n    </div>\n    <div class="buttons">\n      {{#if showSearch}}\n      <button name="search" class="btn btn-search btn-inverse btn-action" aria-label="Find">\n        Find\n      </button>\n      {{/if}}\n\n      {{#if showReplace}}\n      <button name="replace" class="btn btn-replace btn-inverse btn-action" aria-label="Replace">\n        Replace\n      </button>\n      {{/if}}\n\n      {{#if showReplaceAll}}\n      <button name="replaceAll" class="btn btn-replace-all btn-inverse btn-action" aria-label="Replace All">\n        Replace All\n      </button>\n      {{/if}}\n    </div>\n\n    <button type="button" class="close" aria-label="Close panel" title="Close panel">\n      <i class="ss-icon" aria-hidden="true">close</i>\n    </button>\n  </form>\n  <div tabindex="0"></div>\n</div>\n'),f=l.Z.create(n(34063)),h=d.ZP.KeyCode,m=null,g=null,v={flags:{ignoreCase:!0}},b=["search:key_replaceProject","search:key_searchProject","ide:key_esc"].join(","),y=[],w=0,_=0;function k(e){var t=Z(),n=function(e){if(!s().isString(e.pattern)||0===e.pattern.length)return!1;return!0}(t);if(n){var i=m.eventPrefix;f[e]({prefix:i},t)}else r().notify("Search field is empty.",{type:"error"})}function P(){E()}function Z(){var e={flags:{ignoreCase:!1}};return m.find("input, .options button").each((function(t,n){var i=(n=r()(n)).prop("name");n.is("button")?(i=n.data("name"),e.flags[i]="ignoreCase"===i?!n.hasClass("active"):n.hasClass("active")):e[i]=n.val()})),e}function x(){return 0===m.find(".btn-search").length?k("replace"):0===m.find(".btn-replace-all").length?k("search"):k("replace"),!1}function C(e){l.Z.on(e,"click",".close",P),l.Z.on(e,"submit","form",x),l.Z.on(e,"click","button.btn-action",(function(e){return 0===e.clientX&&0===e.clientY?x():(k(e.target.name),!1)})),l.Z.on(e,"keydown",".options button",(function(e){e.keyCode===h.ESC&&P(),e.keyCode===h.DOWN&&function(){++_>w&&(_=0);S()}(),e.keyCode===h.UP&&function(){--_<0&&(_=w);S()}()})),l.Z.on(e,"click",".options button",(function(){var e=r()(this);_=e.data("index");var t="true"===e.attr("aria-pressed")?"false":"true";e.attr("aria-pressed",t)})),l.Z.on(e,"focus",".options button",(function(){_=r()(this).data("index")}))}function S(){y[_].focus()}var E=function(){if(m){if(l.Z.off(y),y=[],d.ZP.removeTrapFocus(undefined),m.remove(),v=Z(),m=null,f.close(),f.preformResize(),r()(g).closest(".CodeMirror").length){var e=u.Z.currentEditor;e&&e.editor.focus()}else f.dialogClose();g=null}};l.Z.subscribe("project:close",E);const I={show:function(e,t,n){var i;if(i=e,!(!u.Z.currentProject&&i||i&&u.Z.currentProject.readOnly)){E(),g=document.activeElement;var a,o=v,c=u.Z.currentEditor&&u.Z.currentEditor.editor,l=c&&c.getSelection();l&&!l.isEmpty()&&(a=c.getValueInRange(l)),o.pattern=a||o.pattern,o.showReplace=e,o.locationsCompiled=o.locations||"",s().each(n,(function(e,t){o[t]=e})),o.allowedHotkeys=b;var d=r()(p(o));d.find("input, .options button").each((function(e,t){(t=r()(t)).is("button")&&(t.data("index",e),y.push(t))})),y.length>0&&(w=y.length-1),C(d),r()("div.ac").append(d);var h=d.find("input[name=pattern]");return h.focus(),h.select(),(m=d).eventPrefix=t,f.preformResize(),m}},close:E}},27090:(e,t,n)=>{"use strict";n.r(t);var i=n(96486),r=n.n(i),a=n(49721),s=n(93443),o=n(95611),c=n(94049),l={showSearch:!0},u={showReplace:!0};var d=[{path:"",type:""}];s.Z.subscribe("filetree:select",(function(e,t){d=t})),s.Z.subscribe("command:search:key_searchProject",function(e){var t=r().cloneDeep(l);c.Z.show(!1,e,t)}.bind(null,"global")),s.Z.subscribe("command:search:key_replaceProject",function(e){a.Z.currentProject&&o.Z.saveAllAndWait().then((function(){var t=r().cloneDeep(u);c.Z.show(!0,e,t)}))}.bind(null,"global")),s.Z.subscribe("command:search:in_folder",(function(){if(a.Z.currentProject){var e=r().map(d,(function(e){return"dir"===e.type&&e.path.length>0?e.path+"/** ":""})).join(""),t=r().cloneDeep(l);t.locationsCompiled=e,c.Z.show(!1,"global",t)}})),s.Z.subscribe("command:ide:key_esc",c.Z.close)},64998:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>l});var i=n(96486),r=n.n(i),a={"{bsplash}":"\\","{splash}":"/","{qmark}":"?"};function s(e){return r().each(a,(function(t,n){e=e.split(n).join(t)})),e}function o(e){return r().each(a,(function(t,n){e=e.split(t).join(n)})),e}function c(e){var t={regexp:!1,ignoreCase:!1,wholeWord:!1};if("_"===e)return t;for(var n=0;n<e.length;++n)switch(e[n]){case"r":t.regexp=!0;break;case"i":t.ignoreCase=!0;break;case"w":t.wholeWord=!0}return t}const l={encodeToCss:function(e){return btoa(window.escape(JSON.stringify(e)))},decodeFromCss:function(e){return JSON.parse(window.unescape(atob(e)))},decodeParams:function(e){var t,n=e.split("/");return{pattern:s(n[0]),locations:(t=n[1],"_"===t?"":s(t)),flags:c(n[2])}},encodeParams:function(e){var t,n,i;return[encodeURIComponent(o(e.pattern)),(i=e.locations,0===i.length?"_":o(i)),(t=e.flags,n="",r().each(t,(function(e,t){e&&(n+=t[0])})),0===n.length?"_":n),e.z].join("/")}}},26433:(e,t,n)=>{"use strict";n.r(t);var i=n(96486),r=n.n(i),a=n(93443),s=n(44442),o=a.Z.create(n(66147));function c(e){return!!e}function l(e){return!e}function u(e){return e||null}function d(){var e={editor:{font_size:[11,12,13,14,15,16,18,20,22,24],tab_size:[1,2,3,4,5,6,7,8],indent_with_tabs:l,navigate_within_soft_tabs:u,wrap:c,theme:s.Z.descriptions().editor.theme.values},terminal:{font_size:[11,12,13,14,15,16,18,20,22,24],theme:s.Z.descriptions().terminal.theme.values}};r().each(e,(function(e,t){var n=s.Z.get(t),i=s.Z.getProject(t);n&&r().each(e,(function(e,a){var s=!r().isUndefined(i[a]);if(r().isFunction(e)||!r().isObject(e)&&!r().isArray(e))o.updateMenuItem({id:t+"_"+a},{onOff:{defaultValue:e(n[a]),toggle:!1},disabled:s,command:"settings:update:user",params:{plugin:t,key:a,value:!n[a]}});else{var c=[];r().each(e,(function(e){var i={title:String(e).toString(),onOff:{defaultValue:n[a]===e,toggle:!1},command:"settings:update:user",params:{plugin:t,key:a,value:e}};c.push(i)})),o.updateMenuItem({id:t+"_"+a},{items:c,disabled:s})}}))}))}a.Z.subscribe("settings:changed",d),a.Z.subscribe("ide:open",d)},78705:(e,t,n)=>{"use strict";n.r(t);var i=n(52308),r=n.n(i);n(32093),r().fn.qtip.defaults=r().extend(!0,{},r().fn.qtip.defaults,{position:{my:"bottom center",at:"top center",viewport:r()(window),adjust:{resize:!0,method:"shift"}},style:{classes:"qtip-dark"},hide:{fixed:!0}})},5989:(e,t,n)=>{var i={"./ada":[31421,9,9949],"./ada.js":[31421,9,9949],"./cobol":[82199,9,9949],"./cobol.js":[82199,9,9949],"./d":[59850,9,9949],"./d.js":[59850,9,9949],"./dart":[95044,9,9949],"./dart.js":[95044,9,9949],"./elixir":[38885,9,9949],"./elixir.js":[38885,9,9949],"./erlang":[84105,9,9949],"./erlang.js":[84105,9,9949],"./fortran":[64207,9,9949],"./fortran.js":[64207,9,9949],"./groovy":[5,9,9949],"./groovy.js":[5,9,9949],"./haskell":[82139,9,9949],"./haskell.js":[82139,9,9949],"./julia":[37645,9,9949],"./julia.js":[37645,9,9949],"./ocaml":[10835,9,9949],"./ocaml.js":[10835,9,9949],"./octave":[36886,3,9949],"./octave.js":[36886,3,9949],"./racket":[21934,9,9949],"./racket.js":[21934,9,9949],"./sbcl":[75534,9,9949],"./sbcl.js":[75534,9,9949],"./scala":[17419,9,9949],"./scala.js":[17419,9,9949]};function r(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],r=t[0];return n.e(t[2]).then((()=>n.t(r,16|t[1])))}r.keys=()=>Object.keys(i),r.id=5989,e.exports=r},57293:(e,t,n)=>{var i={"./Handlebars.tmLanguage.json":[53734,3734],"./JSON.tmLanguage.json":[22951,2951],"./JavaScript.tmLanguage.json":[7779,7779],"./MagicPython.tmLanguage.json":[39315,9315],"./TypeScript.tmLanguage.json":[16737,6737],"./batchfile.tmLanguage.json":[99308,9308],"./c.tmLanguage.json":[50559,559],"./clojure.tmLanguage.json":[36177,6177],"./coffeescript.tmLanguage.json":[19470,9470],"./cpp.tmLanguage.json":[37330,7330],"./csharp.tmLanguage.json":[48257,8257],"./cshtml.tmLanguage.json":[66425,6425],"./css.tmLanguage.json":[89343,8169],"./dart.tmLanguage.json":[14590,4590],"./docker.tmLanguage.json":[33921,3921],"./fsharp.tmLanguage.json":[41982,1982],"./go.tmLanguage.json":[2936,2936],"./groovy.tmLanguage.json":[58773,8773],"./html.tmLanguage.json":[51587,4067],"./ini.tmLanguage.json":[9441,9441],"./java.tmLanguage.json":[52361,2361],"./julia.tmLanguage.json":[1178,1178],"./less.tmLanguage.json":[80583,583],"./lua.tmLanguage.json":[93849,3849],"./markdown.tmLanguage.json":[15248,5248],"./objective-c.tmLanguage.json":[90648,648],"./perl.tmLanguage.json":[31966,1966],"./php.tmLanguage.json":[34602,4602],"./powershell.tmLanguage.json":[50519,519],"./pug.tmLanguage.json":[60564,564],"./r.tmLanguage.json":[69410,9410],"./ruby.tmLanguage.json":[3905,3905],"./rust.tmLanguage.json":[11784,1784],"./scss.tmLanguage.json":[46229,6229],"./shell-unix-bash.tmLanguage.json":[93614,3614],"./sql.tmLanguage.json":[38646,8646],"./swift.tmLanguage.json":[1691,1691],"./xml.tmLanguage.json":[97614,7614],"./yaml.tmLanguage.json":[31846,1846]};function r(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],r=t[0];return n.e(t[1]).then((()=>n.t(r,19)))}r.keys=()=>Object.keys(i),r.id=57293,e.exports=r},85520:(e,t,n)=>{var i={"./3024-day.json":[43424,3424],"./3024-night.json":[55445,5445],"./ambiance.json":[14850,4850],"./base16-dark.json":[71347,1347],"./base16-light.json":[26646,6646],"./blackboard.json":[57983,7983],"./bold.json":[93715,3715],"./cobalt.json":[87810,7810],"./default.json":[56274,6274],"./dyslexic.json":[35868,5868],"./earthsong.json":[82043,2043],"./eclipse.json":[35739,5739],"./elegant.json":[629,629],"./erlang-dark.json":[2607,2607],"./frontier.json":[86858,6858],"./juicy.json":[77670,7670],"./lesser-dark.json":[3549,3549],"./mbo.json":[59926,9926],"./mellow.json":[89853,9853],"./midnight.json":[66527,6527],"./monokai.json":[93770,3770],"./neat.json":[10859,859],"./night.json":[53283,3283],"./ocean-dark.json":[66115,6115],"./ocean-light.json":[98835,8835],"./paraiso-dark.json":[5143,5143],"./paraiso-light.json":[44124,4124],"./pastel-on-dark.json":[1410,1410],"./pastel.json":[88459,8459],"./peacock.json":[38366,8366],"./rubyblue.json":[49520,9520],"./solarized-dark.json":[52200,2200],"./solarized-light.json":[44074,4074],"./the-matrix.json":[26774,6774],"./tomorrow-night-bright.json":[21465,1465],"./tomorrow-night-eighties.json":[18944,8944],"./twilight.json":[45260,5260],"./vibrant-ink.json":[15306,5306],"./xq-dark.json":[42950,2950],"./xq-light.json":[12744,2744],"./zenburn.json":[79418,9418]};function r(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],r=t[0];return n.e(t[1]).then((()=>n.t(r,19)))}r.keys=()=>Object.keys(i),r.id=85520,e.exports=r},94748:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII="},6161:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjNDI0MjQyIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="},51096:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjQzVDNUM1Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="},99393:e=>{"use strict";e.exports='{{#each source.answers}}\n<li class="item-div">\n  <div class="actions">\n    <button class="up-btn move action-btn" title="Move up">\n      <span class="iconify-inline" data-icon="@codio:mdi:arrow-up-bold"></span>\n    </button>\n    <button class="remove-btn delete action-btn" title="Remove answer" aria-label="Remove answer">\n      <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n    </button>\n    <button class="down-btn move action-btn" title="Move down">\n      <span class="iconify-inline" data-icon="@codio:mdi:arrow-down-bold"></span>\n    </button>\n  </div>\n  <div class="fields list-item-body">\n    <input type="hidden" name="_id" value="{{_id}}"/>\n    <div class="correct">\n      <label class="form-label">Correct</label>\n      <label class="{{#if ../source.multipleResponse}}toggle{{else}}radiobutton{{/if}}">\n        <input type="{{#if ../source.multipleResponse}}checkbox{{else}}radio{{/if}}" name="correct" {{#if correct}}checked="checked"{{/if}}/>\n        <span class="toggle-label"></span>\n        <span class="toggle-handle"></span>\n      </label>\n    </div>\n    <div class="answer preview-area-container">\n      <label class="form-label">Answer</label>\n      <a href="javascript:void(0)" class="answer-preview-button preview-button"><i class="ss-icon">view</i></a>\n      <textarea\n        class="answer-textarea preview-field-with-content"\n        placeholder="Answer"\n        name="answer"\n        rows="2"\n        ></textarea>\n      <div class="preview-container">preview content</div>\n    </div>\n  </div>\n</li>\n{{/each}}\n'},47380:e=>{"use strict";e.exports='{{#each this.source.metadata.tags}}\n  <li class="tag-item">\n    <div class="tag-actions">\n    {{#unless ../readOnly}}\n    {{#unless ../required}}\n      <a href="javascript:void(0)" class="remove-tag-btn delete" title="Remove tag" aria-label="Remove tag">\n        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n      </a>\n    {{/unless}}\n    {{/unless}}\n    </div>\n    <div class="tag-name">\n      <input\n        name="tag_name"\n        type="text"\n        value="{{this.name}}"\n        placeholder="Tag name"\n        class="js-typeahead js-tag tag-name-input"\n        {{#if ../readOnly}}readonly{{/if}}\n        {{#if this.required}}readonly{{/if}}\n        {{#if this.required}}required{{/if}}\n      />\n    </div>\n    <div class="tag-value">\n      <input\n        name="tag_value"\n        type="text"\n        value="{{this.value}}"\n        placeholder="Tag value"\n        class="js-typeahead js-value tag-value-input"\n        {{#if ../readOnly}}readonly{{/if}}\n        {{#if this.required}}placeholder="Enter {{this.name}} here..."{{/if}}\n      />\n    </div>\n  </li>\n{{/each}}\n'},80470:e=>{"use strict";e.exports='{{#each source.sequence}}\n<li class="item-div">\n  <div class="actions">\n    <button type="button" class="remove-btn delete" title="Remove item" aria-label="Remove item">\n      <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n    </button>\n  </div>\n  <div class="fields list-item-body">\n    <div class="item-row">\n      <div class="item-column">\n        <div class="form-fieldset">\n          <label class="form-label">Input - Arguments</label>\n          <input\n                  type="text"\n                  class="arguments generate_arguments"\n                  name="arguments"\n                  value="{{#if this.arguments}}{{this.arguments}}{{/if}}"\n          />\n        </div>\n        <div class="form-fieldset form-fieldset--large">\n          <label class="form-label">Input - STDIN</label>\n          <textarea\n                  class="input-textarea generate_input"\n                  name="input"\n                  rows="4"\n          >{{#if this.input}}{{this.input}}{{/if}}</textarea>\n        </div>\n      </div>\n      <div class="item-column">\n        <div class="form-fieldset form-fieldset--large output-textarea-fieldset">\n          <label class="form-label">Expected Output</label>\n          <textarea\n                  class="output-textarea"\n                  name="output"\n                  rows="6"\n          >{{#if this.output}}{{this.output}}{{/if}}</textarea>\n        </div>\n      </div>\n    </div>\n    <div class="item-row">\n      <div class="item-column">\n        <div class="feedback">\n          <div class="form-fieldset assessment-coc-feedback-toggle">\n            <label class="form-label">Show error feedback</label>\n            <label class="toggle">\n              <input type="checkbox" name="showFeedback" {{#if this.showFeedback}}checked{{/if}}/>\n              <span class="toggle-label"></span>\n              <span class="toggle-handle"></span>\n            </label>\n          </div>\n          <div class="form-fieldset form-fieldset--large output-feedback-fieldset {{#unless this.showFeedback}}hide{{/unless}}">\n            <label class="form-label">Error feedback</label>\n            <textarea\n                    class="feedback-textarea"\n                    name="feedback"\n                    rows="2"\n            ></textarea>\n          </div>\n        </div>\n      </div>\n      <div class="item-column">\n        <div class="test-case-actions">\n          <button type="button" class="btn test-case-action test-case-generateOutputBtn">Generate</button>\n          <button type="button" class="btn test-case-action test-case-checkBtn">Check It</button>\n          <div class="test-case-check-state"></div>\n        </div>\n        <div class="test-case-check-output-container">\n          <label class="form-label">Output</label>\n          <div class="test-case-check-output"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</li>\n{{/each}}\n'},11359:e=>{"use strict";e.exports='<div data-id="{{id}}" class="assessments-grade-rubrics--item">\n    <input type="number" min="0" max="1000" value="{{weight}}" class="assessments-grade-rubrics--weight-edit">\n    <input type="text" maxlength="1000" value="{{message}}" class="assessments-grade-rubrics--message-edit">\n    <button class="assessments-grade-rubrics--itemClose icon-button" title="Remove rubric" aria-label="Remove rubric">\n        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n    </button>\n</div>\n'},79165:e=>{"use strict";e.exports='<i class="spinner assessments-grade-rubrics--loader svg icon icon-loader-dark" />\n'},62809:e=>{"use strict";e.exports='{\n// Configure your Run and Preview buttons here.\n\n// Run button configuration\n  "commands": {\n        "Node version": "node --version"\n  },\n\n// Preview button configuration\n  "preview": {\n        "Project Index (static)": "{schema}{{domain}}/{{index}}",\n        "Current File (static)": "{schema}{{domain}}/{{filepath}}",\n        "Box URL": "https://{{domain3000}}/"\n  }\n}'},59816:()=>{},89896:()=>{},66005:()=>{},28022:()=>{},78157:()=>{},95506:()=>{},4162:()=>{},85549:()=>{},22414:()=>{},62562:()=>{},45151:e=>{"use strict";e.exports=JSON.parse('{"accountLoad":"account:load:#name"}')},66056:e=>{"use strict";e.exports=JSON.parse('{"logout":{"desc":"Sign out."}}')},14823:e=>{"use strict";e.exports=JSON.parse('{"billingClose":"billing:close","subscribeFormRendered":"subscribe:form:rendered","subscribeFormDisplayed":"subscribe:form:displayed","billingUpdated":"billing:update"}')},17133:e=>{"use strict";e.exports=JSON.parse('{"fileChange":"file:change:#name","fileRename":"file:rename:#from:#to","filePropUpdated":"file:prop:updated:#path"}')},10270:e=>{"use strict";e.exports=JSON.parse('{"projectOpened":"project:open:#projectId","projectClosed":"project:close:#projectId","ideOpened":"ide:open","ideClosed":"ide:close","fileOpened":"file:open:#filePath","tabActivated":{"event":"tab:activated:#extension","type":"sync"},"tabFocus":{"event":"tab:focus:#extension","type":"sync"},"tabClosed":"tab:closed","panelChangeFocus":"panel:focus:change","panelChangeSize":"panel:size:change","panelResizeStart":"panel:resize:start","panelResizeEnd":"panel:resize:end","tabRename":"tab:rename:#from:#to","closeByPath":"tab:close_by_path:#path","closeByExt":"tab:close_by_ext:#ext","activate":"tab:activate:#id","close":"tab:close:#id","itemMoved":"item:moved:#from:#to","itemCreated":"item:created:#path","itemDeleted":"item:deleted:#path","enterFullscreen":"ide:fullscreen:enter","leaveFullscreen":"ide:fullscreen:leave","tabbarRendered":"ide:tabbar:rendered","unblockTree":"tree:unblock","selectTreeItem":"tree:select:#path","expandPanel":"panel:expand:#id","playGuides":"command:guides:pre_play","updateDeleteProjectMenuItem":"menu:update:deleteProject"}')},94375:e=>{"use strict";e.exports=JSON.parse('{"new_file":{"key":"Alt+Shift+N","desc":"New file."},"new_folder":{"key":"Alt+Ctrl+Shift+N","desc":"New folder."},"delete_item":{"key":"Del","desc":"Delete item."},"rename_item":{"key":"Ctrl+Alt+E","desc":"Rename item."},"upload_item":{"desc":"Upload item."},"layout_default":{"key":{"mac":"Cmd+Alt+R","win":"Ctrl+Alt+R"},"desc":"Reset to the default layout."},"layout_simple":{"desc":"simple layout."},"layout_2_columns":{"desc":"2 columns layout."},"layout_2_rows":{"desc":"2 rows layout."},"layout_showcase":{"desc":"Showcase layout."},"panel_split_horizontal":{"key":{"mac":"Cmd+Alt+H","win":"Ctrl+Alt+H"},"desc":"Split the selected panel horizontally."},"panel_split_vertical":{"key":{"mac":"Cmd+Alt+V","win":"Ctrl+Alt+V"},"desc":"Split the selected panel vertically."},"panel:join":{"desc":"Join with Closest."},"panel_close":{"key":{"mac":"Cmd+Alt+C","win":"Ctrl+Alt+C"},"desc":"Close the selected panel."},"tab_close":{"key":{"mac":"Alt+W","win":"Alt+W"},"desc":"Close the selected tab."},"tab_close_all":{"key":{"mac":"Alt+Shift+W","win":"Alt+Shift+W"},"desc":"Close the tabs in selected panel."},"tab_close_others":{"key":{"mac":"Cmd+Alt+W","win":"Ctrl+Alt+W"},"desc":"Close others tabs in selected panel, except current."},"tab_close_left":{"desc":"Close tabs in selected panel on the left side of the current."},"tab_close_right":{"desc":"Close tabs in selected panel on the right side of the current."},"tab_switch_left":{"key":"Alt+Shift+,","desc":"Cycle to the tab which is to the left of the current tab."},"tab_switch_right":{"key":"Alt+Shift+.","desc":"Cycle to the tab which is to the right of the current tab."},"fullscreen":{"key":{"win":"F11","mac":"Cmd+Shift+F"},"desc":"Go to fullscreen mode"},"preview":{"key":"Shift+F9","desc":"Preview"},"deploy":{"key":"Alt+F9","desc":"Deploy"},"run":{"key":"Ctrl+F9","desc":"Run"},"key_quick_open":{"key":{"win":"Ctrl+O","mac":"Cmd+O"},"desc":"Open a file."},"key_quick_run":{"key":{"win":"Ctrl+Shift+P","mac":"Cmd+Shift+P"},"desc":"Run an action."},"key_esc":{"key":"Esc","desc":"Escape button press"},"switch_view_type":{"key":{"win":"Ctrl+J","mac":"Cmd+J"},"desc":"Switch active tab view type."},"panel_switch_left":{"key":"Ctrl-Shift-Alt-Left","desc":"Switch to panel to the left of the current panel"},"panel_switch_right":{"key":"Ctrl-Shift-Alt-Right","desc":"Switch to panel to the right of the current panel"},"panel_switch_up":{"key":"Ctrl-Shift-Alt-Up","desc":"Switch to panel above the current panel"},"panel_switch_down":{"key":"Ctrl-Shift-Alt-Down","desc":"Switch to panel below the current panel"},"key_menu_focus":{"desc":"Move focus to the menu","key":"F10"}}')},53064:e=>{"use strict";e.exports=JSON.parse('{"highlight_unsaved_tabs":{"type":"boolean","default":false,"desc":"Show asterisk on unsaved tabs"}}')},32006:e=>{"use strict";e.exports=JSON.parse('{"showPublishDialog":"publish:showDialog","openCall":"command:call:open"}')},85284:e=>{"use strict";e.exports=JSON.parse('[{"session":"anonymous","project":["OWNER"]}]')},22026:e=>{"use strict";e.exports=JSON.parse('{"updateAvailable":"events-channel:updateAvailable"}')},60936:e=>{"use strict";e.exports=JSON.parse('{"deleted":"project:deleted:#projectId","shutdown":"project:shutdown:#projectId","preferencesUpdated":"project:preferencesUpdated:#projectId","permissionsUpdated":"project:permissionsUpdated:#projectId","projectRenamed":"project:rename:#projectId","projectDataUpdate":"project:dataUpdate:#projectId","itemCreated":"project:item:created:#path","itemDeleted":"project:item:deleted:#path","itemMoved":"project:item:moved:#from:#to","fileStructureUpdated":"project:fileStructure:updated","renaming":"project:renaming","renameFailed":"project:renameFailed","penaltyUpdated":"project:penaltyUpdated","commentsUpdated":"project:commentsUpdated","driverTransferReq":"project:driverTransferReq","collaborationDriverUpdate":"project:collaborationDriverUpdate","collaborationActiveUsersUpdate":"project:collaborationActiveUsersUpdate","completedStateUpdated":"project:completedStateUpdated","callStarted":"project:callStarted"}')},57328:e=>{"use strict";e.exports=JSON.parse('{"create":{"desc":"Create project."},"preferences":{"desc":"Open project settings."},"permissions":{"desc":"Open project permissions."},"fork":{"desc":"Copy project."},"share":{"desc":"Share project."},"export:zip":{"desc":"Export project as zip."},"delete":{"desc":"Delete project."},"close":{"desc":"Close project."},"stack":{"desc":"Project stack settings."}}')},37791:e=>{"use strict";e.exports=JSON.parse('{"deleted":"project:deleted:#projectId"}')},96205:e=>{"use strict";e.exports=JSON.parse('{"routeChanged":{"event":"route:changed","type":"sync"}}')},17780:e=>{"use strict";e.exports=JSON.parse('{"logout":"session:logout"}')},89261:e=>{"use strict";e.exports=JSON.parse('{"settingsChanged":"settings:changed:#type","settingsLoaded":"settings:loaded","hotkeySync":{"event":"command:#plugin:#command","type":"sync"},"hotkeysUpdated":"settings:hotkey:updated"}')},67660:e=>{"use strict";e.exports=JSON.parse('{"project:open":{"desc":"Open project preferences."},"user:open":{"desc":"Open user preferences."}}')},80093:e=>{"use strict";e.exports=JSON.parse('{"dirty":"shareman:dirty:#path","connected":"shareman:connect","cursors":"shareman:cursors","disconnected":"shareman:disconnect","error":"shareman:error","filePropUpdate":{"event":"file:prop:update:#path","type":"sync"}}')},86575:e=>{"use strict";e.exports=JSON.parse('{"timeChunkMsSpent":"app:timeChunkMsSpent"}')},28755:e=>{"use strict";e.exports=JSON.parse('{"activate":"file:editor:activate","deactivate":"file:editor:deactivate","open":"file:editor:open","hint":"file:editor:hint","lint":"file:editor:lint","hover":"file:editor:hover","close":"file:editor:close","focus":"file:editor:focus","cursorActivity":"file:editor:cursorActivity","out":"file:editor:out","change":"file:editor:change","filePropUpdate":{"event":"file:prop:update:#path","type":"sync"}}')},84151:e=>{"use strict";e.exports=JSON.parse('{"onClose":"dialog:close"}')},98322:e=>{"use strict";e.exports=JSON.parse('{"appendSection":"command:run:append"}')},30011:e=>{"use strict";e.exports=JSON.parse('{"updateMenuItemsVisibility":"call:updateMenuItemsVisibility","publishMic":"call:publishMic","publishCam":"call:publishCam","showSettings":"call:showSettings","togglePublishStream":"call:togglePublishStream","changeMicrophoneSource":"call:settings:changeMicrophoneSource","changeCameraSource":"call:settings:changeCameraSource","settingsClosed":"call:settings:closed","chatClosed":"call:chat:closed","showChat":"call:showChat","publishStarted":"call:publishStarted","publishStopped":"call:publishStopped","sessionStreamCreated":"call:session:streamCreated","sessionStreamDestroyed":"call:session:streamDestroyed","streamPropertyChanged":"call:session:streamPropertyChanged","callPanelSwitched":"call:panelSwitched","destroyCall":"call:destroy"}')},91775:e=>{"use strict";e.exports=JSON.parse('{"threadRemoved":"codeComments:thread:removed:#path:#id","commentThreadUpdated":"codeComments:thread:updated:#path:#id","commentsUpdated":"codeComments:updated"}')},86868:e=>{"use strict";e.exports=JSON.parse('{"appendSection":"command:run:append","startDebug":"command:debug:start","consoleAppend":"command:debug:console:append:#uuid","consoleClear":"command:debug:console:clear:#uuid","statusMessageChange":"command:debug:status-message:#uuid","debuggerState":"command:debug:debugger-state:#uuid","breakpointState":"command:debug:breakpoint-state:#path","breakpointHit":"command:debug:breakpoint-hit:#path","breakpointClear":"command:debug:breakpoint-clear:#path","breakpointUpdate":"command:debug:breakpoint-update","drawBreakpoints":"command:debug:draw-breakpoints:#uuid","breakpointChangeWarning":"command:debug:breakpoint-warning","drawFrame":"command:debug:draw-frame:#uuid","drawLocals":"command:debug:draw-locals:#uuid","drawWatches":"command:debug:draw-watches:#uuid","editWatch":"command:debug:edit-watch:#uuid","updateWatch":"command:debug:update-watch:#uuid","stop":"command:debug:stop:#uuid","resume":"command:debug:resume:#uuid","step-over":"command:debug:step-over:#uuid","step-into":"command:debug:step-into:#uuid","step-out":"command:debug:step-out:#uuid","frame":"command:debug:frame:#uuid","restart":"command:debug:restart:#uuid","send-stdin":"command:debug:send-stdin:#uuid","connectionInit":"debugger:connection:init:#uuid","connectionOffline":"debugger:connection:offline:#uuid","connectionData":"debugger:connection:data:#topic:#uuid","updateDebugMenuButton":"menu:update:menu-debug-button","debuggerPanelSwitched":"debug:panel_switched","consoleInit":"command:debug:console:init:#uuid"}')},38830:e=>{"use strict";e.exports=JSON.parse('{"targetsUpdated":"deployment:targetsUpdated","deployDefault":"deployment:default:deploy","deployDefaultProcessing":"deployment:default:processing","deployDefaultComplete":"deployment:default:complete","openTargetsEditor":"command:file:open","updateMenuTargets":"menu:update:deployment-default-target","updateFiletreeDeployFiles":"filetree:right-menu:update:deploy-files","updateTabDeployFile":"tab:right-menu:update:deploy-file","defaultTargetUpdated":"deployment:default-updated","deployFiles":"deployment:deploy:files","updatePreviewMenuButton":"menu:update:menu-preview-button"}')},10:e=>{"use strict";e.exports=JSON.parse('{"updateEducationMenuItem":"menu:update:education","updateForkMenuItem":"menu:update:fork","updateDeleteProjectMenuItem":"menu:update:deleteProject","updateProjectPermissionsMenuItem":"menu:update:ProjectPermissions","updateExportAsZipMenuItem":"menu:update:exportAsZip","updateFiletreeDownload":"filetree:right-menu:update:filetree-download","updateFiletreeExportZip":"filetree:right-menu:update:filetree-export-zip","filterCodioMenu":"menu:filter","eduStartedAssignmentInfoLoaded":"education:edu_started_assignment_info_loaded","setCompleted":"education:set_completed","gotoDashboard":"command:goto:dashboard","openPreview":"command:preview:url","rubricsLoaded":"education:rubricsLoaded","writableCopyMenuVisibility":"education:writableCopyMenuVisibility","updatePublishBtnVisibility":"education:updatePublishBtnVisibility","publishDialogClosed":"education:publishDialogClosed","saveBeforeComplete":"command:education:save_before_completed"}')},9490:e=>{"use strict";e.exports=JSON.parse('{"mark_as_completed":{"desc":"Mark project as completed."},"mark_as_uncompleted":{"desc":"Mark project as uncompleted."}}')},43380:e=>{"use strict";e.exports=JSON.parse('{"itemSelect":"filetree:select:#path:#type","itemDblClick":"filetree:dblclick:#path:#type","moveItems":"filetree:move","pasteItems":"filetree:paste","duplicateItems":"filetree:duplicate","iconClick":"tree:click:icon:#plugin","redrawn":"filetree:redrawn","openShareDialog":"command:project:share","openTerminal":"command:terminal:backend-connection","syncStructure":"command:file:sync_structure","itemDrop":"filetree:file:drop","openGuidesEditor":"command:guides:pre_edit","openGuidesPlayer":"command:guides:open_guides_player","openParent":"command:filetree:openParent"}')},10742:e=>{"use strict";e.exports=JSON.parse('{"onUpdate":"guides:data:update","treeAddFilter":"filetree:node:addVisibilityFilter","treeRemoveFilter":"filetree:node:removeVisibilityFilter","treeCloseNode":"filetree:node:close:#path","treeOpenNode":"filetree:node:open:#path","panelSizeChange":"panel:size:change","command":"guides:command:run","sectionUpdate":"guides:section:update:#id","guidesRemoved":"guides:removed","guidesClose":"guides:close","guidesUpdated":"guides:updated","themeChanged":"guides:theme_changed","suppressPageNumberingChanged":"guides:suppressPageNumbering_changed","scriptsChanged":"guides:scripts_changed","settingsOpen":"guides:settings:open","settingsClose":"guides:settings:close","assessmentAdded":"guides:assessment:added","goToAssessment":"guides:assessment:goto","editAssessment":"guides:assessment:edit","lexikonTopicChanged":"guides:lexikonTopic_changed","openLexikon":"Codio Lexikon:open_lexikon:#topic","projectSettingsUpdate":"command:settings:update:project","projectSettingsRemove":"command:settings:remove:project","assessmentsUpdated":"guides:assessments:updated","loadedUnits":"guides:units_loaded","switchUnit":"guides:units:switch","backToDash":"guides:units:back_to_dash","switchOutputView":"guides:units:switch_output_view","iframeClick":"guides:iframe:click","playerOpen":"guides:player:open","play":"command:guides:play","edit":"command:guides:edit","backToEdit":"command:guides:back_to_edit","preview":"command:guides:preview","playerClose":"guides:player:close","editorClose":"guides:editor:close","renderedPlayerClose":"guides:player:close_rendered","debuggerStart":"command:debugger:executeByName","contentTypeChanged":"guides:contentType_changed","goToSectionByTitle":"guides:section:goto_title","goToSectionById":"guides:section:goto_id","goToNextSection":"guides:section:goto_next","goToPreviousSection":"guides:section:goto_prev","sectionRendered":"guides:section:rendered","collapsePanel":"panel:collapse:#id","openBookNavigation":"guides:book:nav_open","closeBookNavigation":"guides:book:nav_close","bookAddChapter":"guides:book:add_chapter","bookAddSection":"guides:book:add_section","bookAddPage":"guides:book:add_page","bookRemoveItem":"guides:book:remove_item","bookCopyItems":"guides:book:copy_items","bookRenameItem":"guides:book:rename_item","bookItemRenamed":"guides:book:item_renamed","bookMoveItems":"guides:book:moveItems","bookSearch":"guides:book:search","bookClearSearch":"guides:book:clear_search","bookLinkPage":"guides:book:link_page","bookUpdateTitle":"guides:book:update_title","bookRefreshTree":"guides:book:refresh_tree","metadataLoaded":"guides:metadata:loaded","markAsCompleted":"command:education:mark_as_completed","markAsUncompleted":"command:education:mark_as_uncompleted","gradeAssessmentsRender":"guides:grade:render_assessments","redrawAssessments":"guides:assessments:redraw","changeView":"guides:view:change","resetCurrentFiles":"guides:current_files:reset","assessmentDisconnected":"guides:assessment:disconnected","showGradeAssessment":"guides:assessment:grade:#id","mediaPlayerInitialized":"guides:media:initialized","mediaPlayerClosed":"guides:media:closed","mediaPlayerStopped":"guides:media:stopped","courseReloaded":"education:course:reloaded","assignmentRubricsReloaded":"education:assignmentRubric:reloaded","assessmentExpandOutput":"guides:assessment:expandOutput","applyAssessmentLibrarySearch":"guides:library:apply_search","assessmentEditorValidate":"guides:assessmentEditor:validate","librarySearchPreview":"guides:library:preview","codioAssessmentBtnClick":"guides:codioAssessmentBtnClick","layoutApplied":"guides:layout:applied","onActivatePlayer":"guides.player:on_activate"}')},57066:e=>{"use strict";e.exports=JSON.parse('{"showSwitchToEdit":"command:guides:switch_to_edit:show","hideSwitchToEdit":"command:guides:switch_to_edit:hide","beforeFileRestore":"guides:fileRestore:before","afterFileRestore":"guides:fileRestore:after"}')},74607:e=>{"use strict";e.exports=JSON.parse('{"type":"single","params":{"width":"100%","height":"100%","focus":false,"canFocus":false,"fixed":false},"children":[{"type":"single","params":{"width":"100%","height":"100%","focus":true,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}')},29681:e=>{"use strict";e.exports=JSON.parse('{"type":"single","params":{"width":"100%","height":"100%","focus":false,"canFocus":false,"fixed":false},"children":[{"type":"vertical","params":{"width":"50%","height":"100%","fixed":false},"children":[{"type":"single","params":{"width":"50%","height":"100%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"single","params":{"width":"50%","height":"100%","focus":true,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}')},3074:e=>{"use strict";e.exports=JSON.parse('{"type":"single","params":{"width":"100%","height":"100%","focus":false,"canFocus":false,"fixed":false},"children":[{"type":"vertical","params":{"width":"50%","height":"100%","fixed":false},"children":[{"type":"single","params":{"width":"50%","height":"100%","focus":true,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"horizontal","params":{"width":"50%","height":"100%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"single","params":{"width":"100%","height":"50%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"single","params":{"width":"100%","height":"50%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}]}')},29991:e=>{"use strict";e.exports=JSON.parse('{"type":"single","params":{"width":"100%","height":"100%","focus":false,"canFocus":false,"fixed":false},"children":[{"type":"vertical","params":{"width":"50%","height":"100%","fixed":false},"children":[{"type":"horizontal","params":{"width":"50%","height":"100%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"single","params":{"width":"100%","height":"50%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"single","params":{"width":"100%","height":"50%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]},{"type":"single","params":{"width":"50%","height":"100%","focus":true,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}')},37196:e=>{"use strict";e.exports=JSON.parse('{"type":"single","params":{"width":"100%","height":"100%","focus":false,"canFocus":false,"fixed":false},"children":[{"type":"vertical","params":{"width":"100%","height":"100%","fixed":false},"children":[{"type":"vertical","params":{"width":"66%","height":"100%","fixed":false},"children":[{"type":"single","params":{"width":"50%","height":"100%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"single","params":{"width":"50%","height":"100%","focus":true,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]},{"type":"single","params":{"width":"34%","height":"100%","focus":true,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}')},2106:e=>{"use strict";e.exports=JSON.parse('{"type":"single","params":{"width":"100%","height":"100%","focus":false,"canFocus":false,"fixed":false},"children":[{"type":"single","params":{"width":"100%","height":"100%","fixed":false,"canFocus":false},"children":[{"type":"horizontal","params":{"width":"100%","height":"100%","fixed":false},"children":[{"type":"vertical","params":{"width":"50%","height":"50%","fixed":false},"children":[{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"single","params":{"width":"50%","height":"50%","focus":true,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]},{"type":"vertical","params":{"width":"100%","height":"50%","fixed":false},"children":[{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}]}]}')},23112:e=>{"use strict";e.exports=JSON.parse('{"execute":"junit:execute"}')},19423:e=>{"use strict";e.exports=JSON.parse('{"projectSettingsUpdate":"command:settings:update:project","diagnosticsUpdated":"lsp:diagnostics:updated:#fileName"}')},90101:e=>{"use strict";e.exports=JSON.parse('{"setReadOnlyForNavigator":"collaboration:setReadOnlyForNavigator","driverUpdated":"collaboration:driverUpdated"}')},29265:e=>{"use strict";e.exports=JSON.parse('{"deployDefault":"deployment:default:deploy","updatePreviewMenuInside":"menu:update:preview-inside","updatePreviewMenuNewWindow":"menu:update:preview-new-window","updatePreviewMenuIndex":"menu:update:preview-project-index","updatePreviewMenuCurrentFile":"menu:update:preview-current-file","updatePreviewMenuButton":"menu:update:menu-preview-button","updatePreviewMenuRunP":"menu:update:run-mode-preview","updatePreviewMenuRunDP":"menu:update:run-mode-deploy-preview","updatePreviewMenuRunD":"menu:update:run-mode-deploy","updatePreviewMenuProjectIndex":"menu:update:preview-project-index","defaultTargetUpdated":"deployment:default-updated"}')},36656:e=>{"use strict";e.exports=JSON.parse('{"projectSettingsOpen":"dashboard:preferences:open:#projectName","projectSettingsClose":"dashboard:preferences:close","exportProject":"command:project:export:zip","projectSettingsRefresh":"dashboard:preferences:refreshAll:#projectName","deleteProject":"command:project:delete"}')},31663:e=>{"use strict";e.exports=JSON.parse('{"changeFullscreenMode":"command:ide:fullscreen"}')},41839:e=>{"use strict";e.exports=JSON.parse('{"updatePreviewMenuInside":"menu:update:preview-inside","updatePreviewMenuNewWindow":"menu:update:preview-new-window"}')},61735:e=>{"use strict";e.exports={}},65670:e=>{"use strict";e.exports=JSON.parse('{"name":"run","description":"Run extension"}')},62119:e=>{"use strict";e.exports={}},34063:e=>{"use strict";e.exports=JSON.parse('{"replace":"search:#prefix:replace","replaceAll":"search:#prefix:replaceAll","search":"search:#prefix:search","close":"search:close","dialogClose":"dialog:close","preformResize":"panel:size:change"}')},66147:e=>{"use strict";e.exports=JSON.parse('{"updateMenuItem":"menu:update:#id"}')},89404:e=>{"use strict";e.exports=JSON.parse('{"closeTerminal":"project:closeTerminal"}')},73151:e=>{"use strict";e.exports=JSON.parse('{"name":"tooltips","description":"Enable tooltips"}')},9533:e=>{"use strict";e.exports=JSON.parse('{"closeByPath":"tab:close_by_path:#path","statusBarOpened":"status_bar:opened"}')}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},deferred=[],__webpack_require__.O=(e,t,n,i)=>{if(!t){var r=1/0;for(c=0;c<deferred.length;c++){for(var[t,n,i]=deferred[c],a=!0,s=0;s<t.length;s++)(!1&i||r>=i)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[s])))?t.splice(s--,1):(a=!1,i<r&&(r=i));if(a){deferred.splice(c--,1);var o=n();void 0!==o&&(e=o)}}return e}i=i||0;for(var c=deferred.length;c>0&&deferred[c-1][2]>i;c--)deferred[c]=deferred[c-1];deferred[c]=[t,n,i]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var i={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var r=2&t&&e;"object"==typeof r&&!~leafPrototypes.indexOf(r);r=getProto(r))Object.getOwnPropertyNames(r).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,__webpack_require__.d(n,i),n},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>e+"."+{57:"35b07c336a33ab17b6dc",131:"7654d8ac2eb010cd47e6",519:"82d3cbf963b1b0bd427b",559:"bb324618d02ee8e1c9a6",564:"6fbb20082a7116db1a11",583:"a8f34c3ebc998390c364",629:"31595464f33f2f17157f",648:"e1629fa064d1ec23d1ac",859:"1943bba83b8cad1b2622",1178:"233738cc5cdfbaa13cc1",1347:"daa70424d73c835b3262",1410:"38cdb36f4e8251df067e",1465:"4db4f9967cd2f6ebaa9f",1691:"f86c0dd2b7b18648fbcf",1784:"dd89383eb60a26fbee79",1846:"4c437baed84253a5fdf1",1966:"d19eab5df0788ccd3821",1982:"2206ed5a5e35f4e791af",2043:"1ee82cb898f69c0c9d35",2200:"b27f79d00de6a83e22c9",2361:"23fe27d81649c403a3d2",2607:"9bf5bae411a82ee2a2c1",2744:"7c2841238428fdfd1f95",2913:"453f95c67117b857a17d",2936:"eea6889f24da1d2f3d8b",2943:"ef7dc26fd84c913914bf",2950:"a6c04630e5a4a32db982",2951:"c65f9f0a1e3e9f9221b0",3283:"1b0d61a8a8919b9717cc",3424:"f8690926124bf919088b",3549:"7b7d6e0c204763b7eec5",3614:"019ef536a50ec8116631",3715:"cb6568e65181ddd63348",3734:"1e41a5cea7b553ba4437",3770:"6af4ce5a9677450687cf",3849:"38e632cf5ca2d0655c5c",3905:"b6cbc454c9aebaec1cbe",3921:"9fe66c72bbf0b336fb55",4067:"6dab07083e68f8e0c041",4074:"ec9e5b2fee89ca6c319b",4124:"47f410d4b31f19a70d9b",4590:"f8a04d9bf4b9761779be",4602:"df81edbf6415930e290e",4850:"75b949c2275ca207383a",4943:"069bd13bd333250e5a08",5143:"ce98f098fb34128c7d3e",5248:"e5b3fb77a4b58da0c3e5",5260:"297823c07bc23bec9db8",5306:"ccbe6ff10db7a4e837aa",5445:"0d1ed48247c47e7e7e7d",5710:"d370543ee8fbb9803351",5739:"5886f5016de96ce72e4c",5868:"46ea5d8a88825afe7d76",6098:"a67774ccb532a57294e1",6115:"2690ae569e2735129a1d",6177:"7cf31468558ec41d9f56",6229:"98b0de6330f1628d004a",6274:"af48059dce8b588e5f0d",6425:"49dacb3940b2bba0ca10",6527:"3b5b3e2c5d7ffe2ea74d",6646:"e8107e545a6eccbed9d8",6737:"e92acf79e76be414234b",6774:"ca9b6d229cebff65a09e",6858:"ab6ac92be1c801b3d080",7330:"a07a449650b17953856b",7614:"52dbf57c6e9355617a52",7670:"68c435846f2237f0f281",7779:"e661c6055ed8f5cae63a",7810:"3a51dbd7322cdea32090",7983:"f2b7d45fe9b013e98745",8169:"b07093d6ed4e7c305011",8257:"f8898a2f52d9a6500eda",8366:"c3a5436ecf961b7386a6",8459:"b966685de7c13cd4bc00",8646:"63c2dc200792df0b46cf",8773:"806fafd4fe222964e833",8835:"d77608562d6e9d4fbb0b",8944:"9c4440ca05d1a08b8eeb",8980:"6fe47db5cff2d81c0737",9032:"b6cd05b53f1b6437daf6",9308:"55bf9431d8d100fb269b",9315:"dddcac3ca6ce2fbb6921",9410:"a80d2f89f15fca217950",9418:"be32991c10656ba443cd",9441:"aa76f41be923042c0e88",9470:"7d8e183bb8bd48b617fb",9520:"631b83aabf1f0a11d4cd",9853:"a23533335b28ae01719a",9926:"fc1e20550638ed335cd1"}[e]+".js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="codio:",__webpack_require__.l=(e,t,n,i)=>{if(inProgress[e])inProgress[e].push(t);else{var r,a;if(void 0!==n)for(var s=document.getElementsByTagName("script"),o=0;o<s.length;o++){var c=s[o];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==dataWebpackPrefix+n){r=c;break}}r||(a=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,__webpack_require__.nc&&r.setAttribute("nonce",__webpack_require__.nc),r.setAttribute("data-webpack",dataWebpackPrefix+n),r.src=e),inProgress[e]=[t];var l=(t,n)=>{r.onerror=r.onload=null,clearTimeout(u);var i=inProgress[e];if(delete inProgress[e],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((e=>e(n))),t)return t(n)},u=setTimeout(l.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=l.bind(null,r.onerror),r.onload=l.bind(null,r.onload),a&&document.head.appendChild(r)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="https://static-assets.codio.com/client/js/",(()=>{__webpack_require__.b=document.baseURI||self.location.href;var e={2143:0};__webpack_require__.f.j=(t,n)=>{var i=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise(((n,r)=>i=e[t]=[n,r]));n.push(i[2]=r);var a=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(a,(n=>{if(__webpack_require__.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",s.name="ChunkLoadError",s.type=r,s.request=a,i[1](s)}}),"chunk-"+t,t)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[a,s,o]=n,c=0;if(a.some((t=>0!==e[t]))){for(i in s)__webpack_require__.o(s,i)&&(__webpack_require__.m[i]=s[i]);if(o)var l=o(__webpack_require__)}for(t&&t(n);c<a.length;c++)r=a[c],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return __webpack_require__.O(l)},n=self.webpackChunkcodio=self.webpackChunkcodio||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),__webpack_require__.nc=void 0;var __webpack_exports__=__webpack_require__.O(void 0,[9949,2988,4132,2769],(()=>__webpack_require__(89981)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=http://sourcemaps.codio.test:22334/client/js/app.2761a51fa584768fb720.js.map